var nA=Object.create;var s0=Object.defineProperty;var iA=Object.getOwnPropertyDescriptor;var sA=Object.getOwnPropertyNames;var aA=Object.getPrototypeOf,uA=Object.prototype.hasOwnProperty;var mc=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var Et=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var oA=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of sA(t))!uA.call(e,a)&&a!==r&&s0(e,a,{get:()=>t[a],enumerable:!(n=iA(t,a))||n.enumerable});return e};var vi=(e,t,r)=>(r=e!=null?nA(aA(e)):{},oA(t||!e||!e.__esModule?s0(r,"default",{value:e,enumerable:!0}):r,e));var I0=Et(Ec=>{"use strict";Ec.byteLength=EA;Ec.toByteArray=yA;Ec.fromByteArray=DA;var Bi=[],ai=[],bA=typeof Uint8Array<"u"?Uint8Array:Array,bh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(zs=0,F0=bh.length;zs<F0;++zs)Bi[zs]=bh[zs],ai[bh.charCodeAt(zs)]=zs;var zs,F0;ai[45]=62;ai[95]=63;function C0(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function EA(e){var t=C0(e),r=t[0],n=t[1];return(r+n)*3/4-n}function AA(e,t,r){return(t+r)*3/4-r}function yA(e){var t,r=C0(e),n=r[0],a=r[1],u=new bA(AA(e,n,a)),i=0,c=a>0?n-4:n,l;for(l=0;l<c;l+=4)t=ai[e.charCodeAt(l)]<<18|ai[e.charCodeAt(l+1)]<<12|ai[e.charCodeAt(l+2)]<<6|ai[e.charCodeAt(l+3)],u[i++]=t>>16&255,u[i++]=t>>8&255,u[i++]=t&255;return a===2&&(t=ai[e.charCodeAt(l)]<<2|ai[e.charCodeAt(l+1)]>>4,u[i++]=t&255),a===1&&(t=ai[e.charCodeAt(l)]<<10|ai[e.charCodeAt(l+1)]<<4|ai[e.charCodeAt(l+2)]>>2,u[i++]=t>>8&255,u[i++]=t&255),u}function SA(e){return Bi[e>>18&63]+Bi[e>>12&63]+Bi[e>>6&63]+Bi[e&63]}function _A(e,t,r){for(var n,a=[],u=t;u<r;u+=3)n=(e[u]<<16&16711680)+(e[u+1]<<8&65280)+(e[u+2]&255),a.push(SA(n));return a.join("")}function DA(e){for(var t,r=e.length,n=r%3,a=[],u=16383,i=0,c=r-n;i<c;i+=u)a.push(_A(e,i,i+u>c?c:i+u));return n===1?(t=e[r-1],a.push(Bi[t>>2]+Bi[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],a.push(Bi[t>>10]+Bi[t>>4&63]+Bi[t<<2&63]+"=")),a.join("")}});var P0=Et(Eh=>{Eh.read=function(e,t,r,n,a){var u,i,c=a*8-n-1,l=(1<<c)-1,m=l>>1,E=-7,b=r?a-1:0,v=r?-1:1,g=e[t+b];for(b+=v,u=g&(1<<-E)-1,g>>=-E,E+=c;E>0;u=u*256+e[t+b],b+=v,E-=8);for(i=u&(1<<-E)-1,u>>=-E,E+=n;E>0;i=i*256+e[t+b],b+=v,E-=8);if(u===0)u=1-m;else{if(u===l)return i?NaN:(g?-1:1)*(1/0);i=i+Math.pow(2,n),u=u-m}return(g?-1:1)*i*Math.pow(2,u-n)};Eh.write=function(e,t,r,n,a,u){var i,c,l,m=u*8-a-1,E=(1<<m)-1,b=E>>1,v=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:u-1,A=n?1:-1,w=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,i=E):(i=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-i))<1&&(i--,l*=2),i+b>=1?t+=v/l:t+=v*Math.pow(2,1-b),t*l>=2&&(i++,l/=2),i+b>=E?(c=0,i=E):i+b>=1?(c=(t*l-1)*Math.pow(2,a),i=i+b):(c=t*Math.pow(2,b-1)*Math.pow(2,a),i=0));a>=8;e[r+g]=c&255,g+=A,c/=256,a-=8);for(i=i<<a|c,m+=a;m>0;e[r+g]=i&255,g+=A,i/=256,m-=8);e[r+g-A]|=w*128}});var z0=Et(Ua=>{"use strict";var Ah=I0(),Ha=P0(),B0=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Ua.Buffer=De;Ua.SlowBuffer=$A;Ua.INSPECT_MAX_BYTES=50;var Ac=2147483647;Ua.kMaxLength=Ac;De.TYPED_ARRAY_SUPPORT=FA();!De.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function FA(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(De.prototype,"parent",{enumerable:!0,get:function(){if(De.isBuffer(this))return this.buffer}});Object.defineProperty(De.prototype,"offset",{enumerable:!0,get:function(){if(De.isBuffer(this))return this.byteOffset}});function es(e){if(e>Ac)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,De.prototype),t}function De(e,t,r){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Dh(e)}return x0(e,t,r)}De.poolSize=8192;function x0(e,t,r){if(typeof e=="string")return IA(e,t);if(ArrayBuffer.isView(e))return PA(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if($i(e,ArrayBuffer)||e&&$i(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&($i(e,SharedArrayBuffer)||e&&$i(e.buffer,SharedArrayBuffer)))return Sh(e,t,r);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=e.valueOf&&e.valueOf();if(n!=null&&n!==e)return De.from(n,t,r);let a=BA(e);if(a)return a;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return De.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}De.from=function(e,t,r){return x0(e,t,r)};Object.setPrototypeOf(De.prototype,Uint8Array.prototype);Object.setPrototypeOf(De,Uint8Array);function T0(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function CA(e,t,r){return T0(e),e<=0?es(e):t!==void 0?typeof r=="string"?es(e).fill(t,r):es(e).fill(t):es(e)}De.alloc=function(e,t,r){return CA(e,t,r)};function Dh(e){return T0(e),es(e<0?0:Fh(e)|0)}De.allocUnsafe=function(e){return Dh(e)};De.allocUnsafeSlow=function(e){return Dh(e)};function IA(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!De.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let r=O0(e,t)|0,n=es(r),a=n.write(e,t);return a!==r&&(n=n.slice(0,a)),n}function yh(e){let t=e.length<0?0:Fh(e.length)|0,r=es(t);for(let n=0;n<t;n+=1)r[n]=e[n]&255;return r}function PA(e){if($i(e,Uint8Array)){let t=new Uint8Array(e);return Sh(t.buffer,t.byteOffset,t.byteLength)}return yh(e)}function Sh(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return t===void 0&&r===void 0?n=new Uint8Array(e):r===void 0?n=new Uint8Array(e,t):n=new Uint8Array(e,t,r),Object.setPrototypeOf(n,De.prototype),n}function BA(e){if(De.isBuffer(e)){let t=Fh(e.length)|0,r=es(t);return r.length===0||e.copy(r,0,0,t),r}if(e.length!==void 0)return typeof e.length!="number"||Ih(e.length)?es(0):yh(e);if(e.type==="Buffer"&&Array.isArray(e.data))return yh(e.data)}function Fh(e){if(e>=Ac)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Ac.toString(16)+" bytes");return e|0}function $A(e){return+e!=e&&(e=0),De.alloc(+e)}De.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==De.prototype};De.compare=function(t,r){if($i(t,Uint8Array)&&(t=De.from(t,t.offset,t.byteLength)),$i(r,Uint8Array)&&(r=De.from(r,r.offset,r.byteLength)),!De.isBuffer(t)||!De.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===r)return 0;let n=t.length,a=r.length;for(let u=0,i=Math.min(n,a);u<i;++u)if(t[u]!==r[u]){n=t[u],a=r[u];break}return n<a?-1:a<n?1:0};De.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};De.concat=function(t,r){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return De.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<t.length;++n)r+=t[n].length;let a=De.allocUnsafe(r),u=0;for(n=0;n<t.length;++n){let i=t[n];if($i(i,Uint8Array))u+i.length>a.length?(De.isBuffer(i)||(i=De.from(i)),i.copy(a,u)):Uint8Array.prototype.set.call(a,i,u);else if(De.isBuffer(i))i.copy(a,u);else throw new TypeError('"list" argument must be an Array of Buffers');u+=i.length}return a};function O0(e,t){if(De.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||$i(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let a=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return _h(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return K0(e).length;default:if(a)return n?-1:_h(e).length;t=(""+t).toLowerCase(),a=!0}}De.byteLength=O0;function RA(e,t,r){let n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,t>>>=0,r<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return MA(this,t,r);case"utf8":case"utf-8":return L0(this,t,r);case"ascii":return jA(this,t,r);case"latin1":case"binary":return UA(this,t,r);case"base64":return LA(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return qA(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}De.prototype._isBuffer=!0;function Gs(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}De.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<t;r+=2)Gs(this,r,r+1);return this};De.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<t;r+=4)Gs(this,r,r+3),Gs(this,r+1,r+2);return this};De.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<t;r+=8)Gs(this,r,r+7),Gs(this,r+1,r+6),Gs(this,r+2,r+5),Gs(this,r+3,r+4);return this};De.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?L0(this,0,t):RA.apply(this,arguments)};De.prototype.toLocaleString=De.prototype.toString;De.prototype.equals=function(t){if(!De.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:De.compare(this,t)===0};De.prototype.inspect=function(){let t="",r=Ua.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"};B0&&(De.prototype[B0]=De.prototype.inspect);De.prototype.compare=function(t,r,n,a,u){if($i(t,Uint8Array)&&(t=De.from(t,t.offset,t.byteLength)),!De.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(r===void 0&&(r=0),n===void 0&&(n=t?t.length:0),a===void 0&&(a=0),u===void 0&&(u=this.length),r<0||n>t.length||a<0||u>this.length)throw new RangeError("out of range index");if(a>=u&&r>=n)return 0;if(a>=u)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,a>>>=0,u>>>=0,this===t)return 0;let i=u-a,c=n-r,l=Math.min(i,c),m=this.slice(a,u),E=t.slice(r,n);for(let b=0;b<l;++b)if(m[b]!==E[b]){i=m[b],c=E[b];break}return i<c?-1:c<i?1:0};function N0(e,t,r,n,a){if(e.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,Ih(r)&&(r=a?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(a)return-1;r=e.length-1}else if(r<0)if(a)r=0;else return-1;if(typeof t=="string"&&(t=De.from(t,n)),De.isBuffer(t))return t.length===0?-1:$0(e,t,r,n,a);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?a?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):$0(e,[t],r,n,a);throw new TypeError("val must be string, number or Buffer")}function $0(e,t,r,n,a){let u=1,i=e.length,c=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(e.length<2||t.length<2)return-1;u=2,i/=2,c/=2,r/=2}function l(E,b){return u===1?E[b]:E.readUInt16BE(b*u)}let m;if(a){let E=-1;for(m=r;m<i;m++)if(l(e,m)===l(t,E===-1?0:m-E)){if(E===-1&&(E=m),m-E+1===c)return E*u}else E!==-1&&(m-=m-E),E=-1}else for(r+c>i&&(r=i-c),m=r;m>=0;m--){let E=!0;for(let b=0;b<c;b++)if(l(e,m+b)!==l(t,b)){E=!1;break}if(E)return m}return-1}De.prototype.includes=function(t,r,n){return this.indexOf(t,r,n)!==-1};De.prototype.indexOf=function(t,r,n){return N0(this,t,r,n,!0)};De.prototype.lastIndexOf=function(t,r,n){return N0(this,t,r,n,!1)};function kA(e,t,r,n){r=Number(r)||0;let a=e.length-r;n?(n=Number(n),n>a&&(n=a)):n=a;let u=t.length;n>u/2&&(n=u/2);let i;for(i=0;i<n;++i){let c=parseInt(t.substr(i*2,2),16);if(Ih(c))return i;e[r+i]=c}return i}function xA(e,t,r,n){return yc(_h(t,e.length-r),e,r,n)}function TA(e,t,r,n){return yc(GA(t),e,r,n)}function OA(e,t,r,n){return yc(K0(t),e,r,n)}function NA(e,t,r,n){return yc(WA(t,e.length-r),e,r,n)}De.prototype.write=function(t,r,n,a){if(r===void 0)a="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")a=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,a===void 0&&(a="utf8")):(a=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let u=this.length-r;if((n===void 0||n>u)&&(n=u),t.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");let i=!1;for(;;)switch(a){case"hex":return kA(this,t,r,n);case"utf8":case"utf-8":return xA(this,t,r,n);case"ascii":case"latin1":case"binary":return TA(this,t,r,n);case"base64":return OA(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return NA(this,t,r,n);default:if(i)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),i=!0}};De.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function LA(e,t,r){return t===0&&r===e.length?Ah.fromByteArray(e):Ah.fromByteArray(e.slice(t,r))}function L0(e,t,r){r=Math.min(e.length,r);let n=[],a=t;for(;a<r;){let u=e[a],i=null,c=u>239?4:u>223?3:u>191?2:1;if(a+c<=r){let l,m,E,b;switch(c){case 1:u<128&&(i=u);break;case 2:l=e[a+1],(l&192)===128&&(b=(u&31)<<6|l&63,b>127&&(i=b));break;case 3:l=e[a+1],m=e[a+2],(l&192)===128&&(m&192)===128&&(b=(u&15)<<12|(l&63)<<6|m&63,b>2047&&(b<55296||b>57343)&&(i=b));break;case 4:l=e[a+1],m=e[a+2],E=e[a+3],(l&192)===128&&(m&192)===128&&(E&192)===128&&(b=(u&15)<<18|(l&63)<<12|(m&63)<<6|E&63,b>65535&&b<1114112&&(i=b))}}i===null?(i=65533,c=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|i&1023),n.push(i),a+=c}return HA(n)}var R0=4096;function HA(e){let t=e.length;if(t<=R0)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=R0));return r}function jA(e,t,r){let n="";r=Math.min(e.length,r);for(let a=t;a<r;++a)n+=String.fromCharCode(e[a]&127);return n}function UA(e,t,r){let n="";r=Math.min(e.length,r);for(let a=t;a<r;++a)n+=String.fromCharCode(e[a]);return n}function MA(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let a="";for(let u=t;u<r;++u)a+=YA[e[u]];return a}function qA(e,t,r){let n=e.slice(t,r),a="";for(let u=0;u<n.length-1;u+=2)a+=String.fromCharCode(n[u]+n[u+1]*256);return a}De.prototype.slice=function(t,r){let n=this.length;t=~~t,r=r===void 0?n:~~r,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<t&&(r=t);let a=this.subarray(t,r);return Object.setPrototypeOf(a,De.prototype),a};function Xr(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}De.prototype.readUintLE=De.prototype.readUIntLE=function(t,r,n){t=t>>>0,r=r>>>0,n||Xr(t,r,this.length);let a=this[t],u=1,i=0;for(;++i<r&&(u*=256);)a+=this[t+i]*u;return a};De.prototype.readUintBE=De.prototype.readUIntBE=function(t,r,n){t=t>>>0,r=r>>>0,n||Xr(t,r,this.length);let a=this[t+--r],u=1;for(;r>0&&(u*=256);)a+=this[t+--r]*u;return a};De.prototype.readUint8=De.prototype.readUInt8=function(t,r){return t=t>>>0,r||Xr(t,1,this.length),this[t]};De.prototype.readUint16LE=De.prototype.readUInt16LE=function(t,r){return t=t>>>0,r||Xr(t,2,this.length),this[t]|this[t+1]<<8};De.prototype.readUint16BE=De.prototype.readUInt16BE=function(t,r){return t=t>>>0,r||Xr(t,2,this.length),this[t]<<8|this[t+1]};De.prototype.readUint32LE=De.prototype.readUInt32LE=function(t,r){return t=t>>>0,r||Xr(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};De.prototype.readUint32BE=De.prototype.readUInt32BE=function(t,r){return t=t>>>0,r||Xr(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};De.prototype.readBigUInt64LE=Ps(function(t){t=t>>>0,ja(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&qu(t,this.length-8);let a=r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,u=this[++t]+this[++t]*2**8+this[++t]*2**16+n*2**24;return BigInt(a)+(BigInt(u)<<BigInt(32))});De.prototype.readBigUInt64BE=Ps(function(t){t=t>>>0,ja(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&qu(t,this.length-8);let a=r*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],u=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n;return(BigInt(a)<<BigInt(32))+BigInt(u)});De.prototype.readIntLE=function(t,r,n){t=t>>>0,r=r>>>0,n||Xr(t,r,this.length);let a=this[t],u=1,i=0;for(;++i<r&&(u*=256);)a+=this[t+i]*u;return u*=128,a>=u&&(a-=Math.pow(2,8*r)),a};De.prototype.readIntBE=function(t,r,n){t=t>>>0,r=r>>>0,n||Xr(t,r,this.length);let a=r,u=1,i=this[t+--a];for(;a>0&&(u*=256);)i+=this[t+--a]*u;return u*=128,i>=u&&(i-=Math.pow(2,8*r)),i};De.prototype.readInt8=function(t,r){return t=t>>>0,r||Xr(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};De.prototype.readInt16LE=function(t,r){t=t>>>0,r||Xr(t,2,this.length);let n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};De.prototype.readInt16BE=function(t,r){t=t>>>0,r||Xr(t,2,this.length);let n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};De.prototype.readInt32LE=function(t,r){return t=t>>>0,r||Xr(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};De.prototype.readInt32BE=function(t,r){return t=t>>>0,r||Xr(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};De.prototype.readBigInt64LE=Ps(function(t){t=t>>>0,ja(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&qu(t,this.length-8);let a=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(n<<24);return(BigInt(a)<<BigInt(32))+BigInt(r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});De.prototype.readBigInt64BE=Ps(function(t){t=t>>>0,ja(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&qu(t,this.length-8);let a=(r<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(a)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n)});De.prototype.readFloatLE=function(t,r){return t=t>>>0,r||Xr(t,4,this.length),Ha.read(this,t,!0,23,4)};De.prototype.readFloatBE=function(t,r){return t=t>>>0,r||Xr(t,4,this.length),Ha.read(this,t,!1,23,4)};De.prototype.readDoubleLE=function(t,r){return t=t>>>0,r||Xr(t,8,this.length),Ha.read(this,t,!0,52,8)};De.prototype.readDoubleBE=function(t,r){return t=t>>>0,r||Xr(t,8,this.length),Ha.read(this,t,!1,52,8)};function Pn(e,t,r,n,a,u){if(!De.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<u)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}De.prototype.writeUintLE=De.prototype.writeUIntLE=function(t,r,n,a){if(t=+t,r=r>>>0,n=n>>>0,!a){let c=Math.pow(2,8*n)-1;Pn(this,t,r,n,c,0)}let u=1,i=0;for(this[r]=t&255;++i<n&&(u*=256);)this[r+i]=t/u&255;return r+n};De.prototype.writeUintBE=De.prototype.writeUIntBE=function(t,r,n,a){if(t=+t,r=r>>>0,n=n>>>0,!a){let c=Math.pow(2,8*n)-1;Pn(this,t,r,n,c,0)}let u=n-1,i=1;for(this[r+u]=t&255;--u>=0&&(i*=256);)this[r+u]=t/i&255;return r+n};De.prototype.writeUint8=De.prototype.writeUInt8=function(t,r,n){return t=+t,r=r>>>0,n||Pn(this,t,r,1,255,0),this[r]=t&255,r+1};De.prototype.writeUint16LE=De.prototype.writeUInt16LE=function(t,r,n){return t=+t,r=r>>>0,n||Pn(this,t,r,2,65535,0),this[r]=t&255,this[r+1]=t>>>8,r+2};De.prototype.writeUint16BE=De.prototype.writeUInt16BE=function(t,r,n){return t=+t,r=r>>>0,n||Pn(this,t,r,2,65535,0),this[r]=t>>>8,this[r+1]=t&255,r+2};De.prototype.writeUint32LE=De.prototype.writeUInt32LE=function(t,r,n){return t=+t,r=r>>>0,n||Pn(this,t,r,4,4294967295,0),this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=t&255,r+4};De.prototype.writeUint32BE=De.prototype.writeUInt32BE=function(t,r,n){return t=+t,r=r>>>0,n||Pn(this,t,r,4,4294967295,0),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};function H0(e,t,r,n,a){V0(t,n,a,e,r,7);let u=Number(t&BigInt(4294967295));e[r++]=u,u=u>>8,e[r++]=u,u=u>>8,e[r++]=u,u=u>>8,e[r++]=u;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=i,i=i>>8,e[r++]=i,i=i>>8,e[r++]=i,i=i>>8,e[r++]=i,r}function j0(e,t,r,n,a){V0(t,n,a,e,r,7);let u=Number(t&BigInt(4294967295));e[r+7]=u,u=u>>8,e[r+6]=u,u=u>>8,e[r+5]=u,u=u>>8,e[r+4]=u;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=i,i=i>>8,e[r+2]=i,i=i>>8,e[r+1]=i,i=i>>8,e[r]=i,r+8}De.prototype.writeBigUInt64LE=Ps(function(t,r=0){return H0(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))});De.prototype.writeBigUInt64BE=Ps(function(t,r=0){return j0(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))});De.prototype.writeIntLE=function(t,r,n,a){if(t=+t,r=r>>>0,!a){let l=Math.pow(2,8*n-1);Pn(this,t,r,n,l-1,-l)}let u=0,i=1,c=0;for(this[r]=t&255;++u<n&&(i*=256);)t<0&&c===0&&this[r+u-1]!==0&&(c=1),this[r+u]=(t/i>>0)-c&255;return r+n};De.prototype.writeIntBE=function(t,r,n,a){if(t=+t,r=r>>>0,!a){let l=Math.pow(2,8*n-1);Pn(this,t,r,n,l-1,-l)}let u=n-1,i=1,c=0;for(this[r+u]=t&255;--u>=0&&(i*=256);)t<0&&c===0&&this[r+u+1]!==0&&(c=1),this[r+u]=(t/i>>0)-c&255;return r+n};De.prototype.writeInt8=function(t,r,n){return t=+t,r=r>>>0,n||Pn(this,t,r,1,127,-128),t<0&&(t=255+t+1),this[r]=t&255,r+1};De.prototype.writeInt16LE=function(t,r,n){return t=+t,r=r>>>0,n||Pn(this,t,r,2,32767,-32768),this[r]=t&255,this[r+1]=t>>>8,r+2};De.prototype.writeInt16BE=function(t,r,n){return t=+t,r=r>>>0,n||Pn(this,t,r,2,32767,-32768),this[r]=t>>>8,this[r+1]=t&255,r+2};De.prototype.writeInt32LE=function(t,r,n){return t=+t,r=r>>>0,n||Pn(this,t,r,4,2147483647,-2147483648),this[r]=t&255,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24,r+4};De.prototype.writeInt32BE=function(t,r,n){return t=+t,r=r>>>0,n||Pn(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};De.prototype.writeBigInt64LE=Ps(function(t,r=0){return H0(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});De.prototype.writeBigInt64BE=Ps(function(t,r=0){return j0(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function U0(e,t,r,n,a,u){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function M0(e,t,r,n,a){return t=+t,r=r>>>0,a||U0(e,t,r,4,34028234663852886e22,-34028234663852886e22),Ha.write(e,t,r,n,23,4),r+4}De.prototype.writeFloatLE=function(t,r,n){return M0(this,t,r,!0,n)};De.prototype.writeFloatBE=function(t,r,n){return M0(this,t,r,!1,n)};function q0(e,t,r,n,a){return t=+t,r=r>>>0,a||U0(e,t,r,8,17976931348623157e292,-17976931348623157e292),Ha.write(e,t,r,n,52,8),r+8}De.prototype.writeDoubleLE=function(t,r,n){return q0(this,t,r,!0,n)};De.prototype.writeDoubleBE=function(t,r,n){return q0(this,t,r,!1,n)};De.prototype.copy=function(t,r,n,a){if(!De.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),!a&&a!==0&&(a=this.length),r>=t.length&&(r=t.length),r||(r=0),a>0&&a<n&&(a=n),a===n||t.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),t.length-r<a-n&&(a=t.length-r+n);let u=a-n;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,a):Uint8Array.prototype.set.call(t,this.subarray(n,a),r),u};De.prototype.fill=function(t,r,n,a){if(typeof t=="string"){if(typeof r=="string"?(a=r,r=0,n=this.length):typeof n=="string"&&(a=n,n=this.length),a!==void 0&&typeof a!="string")throw new TypeError("encoding must be a string");if(typeof a=="string"&&!De.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(t.length===1){let i=t.charCodeAt(0);(a==="utf8"&&i<128||a==="latin1")&&(t=i)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);let u;if(typeof t=="number")for(u=r;u<n;++u)this[u]=t;else{let i=De.isBuffer(t)?t:De.from(t,a),c=i.length;if(c===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(u=0;u<n-r;++u)this[u+r]=i[u%c]}return this};var La={};function Ch(e,t,r){La[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(a){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:a,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}Ch("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Ch("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError);Ch("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,a=r;return Number.isInteger(r)&&Math.abs(r)>2**32?a=k0(String(r)):typeof r=="bigint"&&(a=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(a=k0(a)),a+="n"),n+=` It must be ${t}. Received ${a}`,n},RangeError);function k0(e){let t="",r=e.length,n=e[0]==="-"?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function VA(e,t,r){ja(t,"offset"),(e[t]===void 0||e[t+r]===void 0)&&qu(t,e.length-(r+1))}function V0(e,t,r,n,a,u){if(e>r||e<t){let i=typeof t=="bigint"?"n":"",c;throw u>3?t===0||t===BigInt(0)?c=`>= 0${i} and < 2${i} ** ${(u+1)*8}${i}`:c=`>= -(2${i} ** ${(u+1)*8-1}${i}) and < 2 ** ${(u+1)*8-1}${i}`:c=`>= ${t}${i} and <= ${r}${i}`,new La.ERR_OUT_OF_RANGE("value",c,e)}VA(n,a,u)}function ja(e,t){if(typeof e!="number")throw new La.ERR_INVALID_ARG_TYPE(t,"number",e)}function qu(e,t,r){throw Math.floor(e)!==e?(ja(e,r),new La.ERR_OUT_OF_RANGE(r||"offset","an integer",e)):t<0?new La.ERR_BUFFER_OUT_OF_BOUNDS:new La.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}var KA=/[^+/0-9A-Za-z-_]/g;function zA(e){if(e=e.split("=")[0],e=e.trim().replace(KA,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function _h(e,t){t=t||1/0;let r,n=e.length,a=null,u=[];for(let i=0;i<n;++i){if(r=e.charCodeAt(i),r>55295&&r<57344){if(!a){if(r>56319){(t-=3)>-1&&u.push(239,191,189);continue}else if(i+1===n){(t-=3)>-1&&u.push(239,191,189);continue}a=r;continue}if(r<56320){(t-=3)>-1&&u.push(239,191,189),a=r;continue}r=(a-55296<<10|r-56320)+65536}else a&&(t-=3)>-1&&u.push(239,191,189);if(a=null,r<128){if((t-=1)<0)break;u.push(r)}else if(r<2048){if((t-=2)<0)break;u.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;u.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;u.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return u}function GA(e){let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r)&255);return t}function WA(e,t){let r,n,a,u=[];for(let i=0;i<e.length&&!((t-=2)<0);++i)r=e.charCodeAt(i),n=r>>8,a=r%256,u.push(a),u.push(n);return u}function K0(e){return Ah.toByteArray(zA(e))}function yc(e,t,r,n){let a;for(a=0;a<n&&!(a+r>=t.length||a>=e.length);++a)t[a+r]=e[a];return a}function $i(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function Ih(e){return e!==e}var YA=(function(){let e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let a=0;a<16;++a)t[n+a]=e[r]+e[a]}return t})();function Ps(e){return typeof BigInt>"u"?JA:e}function JA(){throw new Error("BigInt not supported")}});var v1=Et(Ge=>{var Vu={};Vu.userAgent=!1;var Ma={},XA="11.1.0",ZA="jsrsasign(all) 11.1.0 (2024-02-01) (c) 2010-2023 Kenji Urushima | kjur.github.io/jsrsasign/license";var Ye=Ye||(function(e,t){var r={},n=r.lib={},a=n.Base=(function(){function g(){}return{extend:function(A){g.prototype=this;var w=new g;return A&&w.mixIn(A),w.hasOwnProperty("init")||(w.init=function(){w.$super.init.apply(this,arguments)}),w.init.prototype=w,w.$super=this,w},create:function(){var A=this.extend();return A.init.apply(A,arguments),A},init:function(){},mixIn:function(A){for(var w in A)A.hasOwnProperty(w)&&(this[w]=A[w]);A.hasOwnProperty("toString")&&(this.toString=A.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),u=n.WordArray=a.extend({init:function(g,A){g=this.words=g||[],A!=t?this.sigBytes=A:this.sigBytes=g.length*4},toString:function(g){return(g||c).stringify(this)},concat:function(g){var A=this.words,w=g.words,S=this.sigBytes,y=g.sigBytes;if(this.clamp(),S%4)for(var C=0;C<y;C++){var x=w[C>>>2]>>>24-C%4*8&255;A[S+C>>>2]|=x<<24-(S+C)%4*8}else for(var C=0;C<y;C+=4)A[S+C>>>2]=w[C>>>2];return this.sigBytes+=y,this},clamp:function(){var g=this.words,A=this.sigBytes;g[A>>>2]&=4294967295<<32-A%4*8,g.length=e.ceil(A/4)},clone:function(){var g=a.clone.call(this);return g.words=this.words.slice(0),g},random:function(g){for(var A=[],w=0;w<g;w+=4)A.push(e.random()*4294967296|0);return new u.init(A,g)}}),i=r.enc={},c=i.Hex={stringify:function(g){for(var A=g.words,w=g.sigBytes,S=[],y=0;y<w;y++){var C=A[y>>>2]>>>24-y%4*8&255;S.push((C>>>4).toString(16)),S.push((C&15).toString(16))}return S.join("")},parse:function(g){for(var A=g.length,w=[],S=0;S<A;S+=2)w[S>>>3]|=parseInt(g.substr(S,2),16)<<24-S%8*4;return new u.init(w,A/2)}},l=i.Latin1={stringify:function(g){for(var A=g.words,w=g.sigBytes,S=[],y=0;y<w;y++){var C=A[y>>>2]>>>24-y%4*8&255;S.push(String.fromCharCode(C))}return S.join("")},parse:function(g){for(var A=g.length,w=[],S=0;S<A;S++)w[S>>>2]|=(g.charCodeAt(S)&255)<<24-S%4*8;return new u.init(w,A)}},m=i.Utf8={stringify:function(g){try{return decodeURIComponent(escape(l.stringify(g)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(g){return l.parse(unescape(encodeURIComponent(g)))}},E=n.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(g){typeof g=="string"&&(g=m.parse(g)),this._data.concat(g),this._nDataBytes+=g.sigBytes},_process:function(g){var A=this._data,w=A.words,S=A.sigBytes,y=this.blockSize,C=y*4,x=S/C;g?x=e.ceil(x):x=e.max((x|0)-this._minBufferSize,0);var N=x*y,L=e.min(N*4,S);if(N){for(var ne=0;ne<N;ne+=y)this._doProcessBlock(w,ne);var pe=w.splice(0,N);A.sigBytes-=L}return new u.init(pe,L)},clone:function(){var g=a.clone.call(this);return g._data=this._data.clone(),g},_minBufferSize:0}),b=n.Hasher=E.extend({cfg:a.extend(),init:function(g){this.cfg=this.cfg.extend(g),this.reset()},reset:function(){E.reset.call(this),this._doReset()},update:function(g){return this._append(g),this._process(),this},finalize:function(g){g&&this._append(g);var A=this._doFinalize();return A},blockSize:512/32,_createHelper:function(g){return function(A,w){return new g.init(w).finalize(A)}},_createHmacHelper:function(g){return function(A,w){return new v.HMAC.init(g,w).finalize(A)}}}),v=r.algo={};return r})(Math);(function(e){var a=Ye,t=a.lib,r=t.Base,n=t.WordArray,a=a.x64={};a.Word=r.extend({init:function(u,i){this.high=u,this.low=i}}),a.WordArray=r.extend({init:function(u,i){u=this.words=u||[],this.sigBytes=i!=e?i:8*u.length},toX32:function(){for(var u=this.words,i=u.length,c=[],l=0;l<i;l++){var m=u[l];c.push(m.high),c.push(m.low)}return n.create(c,this.sigBytes)},clone:function(){for(var u=r.clone.call(this),i=u.words=this.words.slice(0),c=i.length,l=0;l<c;l++)i[l]=i[l].clone();return u}})})();Ye.lib.Cipher||(function(e){var g=Ye,t=g.lib,r=t.Base,n=t.WordArray,a=t.BufferedBlockAlgorithm,u=g.enc.Base64,i=g.algo.EvpKDF,c=t.Cipher=a.extend({cfg:r.extend(),createEncryptor:function(w,S){return this.create(this._ENC_XFORM_MODE,w,S)},createDecryptor:function(w,S){return this.create(this._DEC_XFORM_MODE,w,S)},init:function(w,S,y){this.cfg=this.cfg.extend(y),this._xformMode=w,this._key=S,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(w){return this._append(w),this._process()},finalize:function(w){return w&&this._append(w),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(w){return{encrypt:function(S,y,C){return(typeof y=="string"?A:v).encrypt(w,S,y,C)},decrypt:function(S,y,C){return(typeof y=="string"?A:v).decrypt(w,S,y,C)}}}});t.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var b=g.mode={},l=function(w,S,y){var C=this._iv;C?this._iv=e:C=this._prevBlock;for(var x=0;x<y;x++)w[S+x]^=C[x]},m=(t.BlockCipherMode=r.extend({createEncryptor:function(w,S){return this.Encryptor.create(w,S)},createDecryptor:function(w,S){return this.Decryptor.create(w,S)},init:function(w,S){this._cipher=w,this._iv=S}})).extend();m.Encryptor=m.extend({processBlock:function(w,S){var y=this._cipher,C=y.blockSize;l.call(this,w,S,C),y.encryptBlock(w,S),this._prevBlock=w.slice(S,S+C)}}),m.Decryptor=m.extend({processBlock:function(w,S){var y=this._cipher,C=y.blockSize,x=w.slice(S,S+C);y.decryptBlock(w,S),l.call(this,w,S,C),this._prevBlock=x}}),b=b.CBC=m,m=(g.pad={}).Pkcs7={pad:function(w,S){for(var y=4*S,y=y-w.sigBytes%y,C=y<<24|y<<16|y<<8|y,x=[],N=0;N<y;N+=4)x.push(C);y=n.create(x,y),w.concat(y)},unpad:function(w){w.sigBytes-=w.words[w.sigBytes-1>>>2]&255}},t.BlockCipher=c.extend({cfg:c.cfg.extend({mode:b,padding:m}),reset:function(){c.reset.call(this);var S=this.cfg,w=S.iv,S=S.mode;if(this._xformMode==this._ENC_XFORM_MODE)var y=S.createEncryptor;else y=S.createDecryptor,this._minBufferSize=1;this._mode=y.call(S,this,w&&w.words)},_doProcessBlock:function(w,S){this._mode.processBlock(w,S)},_doFinalize:function(){var w=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){w.pad(this._data,this.blockSize);var S=this._process(!0)}else S=this._process(!0),w.unpad(S);return S},blockSize:4});var E=t.CipherParams=r.extend({init:function(w){this.mixIn(w)},toString:function(w){return(w||this.formatter).stringify(this)}}),b=(g.format={}).OpenSSL={stringify:function(w){var S=w.ciphertext;return w=w.salt,(w?n.create([1398893684,1701076831]).concat(w).concat(S):S).toString(u)},parse:function(w){w=u.parse(w);var S=w.words;if(S[0]==1398893684&&S[1]==1701076831){var y=n.create(S.slice(2,4));S.splice(0,4),w.sigBytes-=16}return E.create({ciphertext:w,salt:y})}},v=t.SerializableCipher=r.extend({cfg:r.extend({format:b}),encrypt:function(w,S,y,C){C=this.cfg.extend(C);var x=w.createEncryptor(y,C);return S=x.finalize(S),x=x.cfg,E.create({ciphertext:S,key:y,iv:x.iv,algorithm:w,mode:x.mode,padding:x.padding,blockSize:w.blockSize,formatter:C.format})},decrypt:function(w,S,y,C){return C=this.cfg.extend(C),S=this._parse(S,C.format),w.createDecryptor(y,C).finalize(S.ciphertext)},_parse:function(w,S){return typeof w=="string"?S.parse(w,this):w}}),g=(g.kdf={}).OpenSSL={execute:function(w,S,y,C){return C||(C=n.random(8)),w=i.create({keySize:S+y}).compute(w,C),y=n.create(w.words.slice(S),4*y),w.sigBytes=4*S,E.create({key:w,iv:y,salt:C})}},A=t.PasswordBasedCipher=v.extend({cfg:v.cfg.extend({kdf:g}),encrypt:function(w,S,y,C){return C=this.cfg.extend(C),y=C.kdf.execute(y,w.keySize,w.ivSize),C.iv=y.iv,w=v.encrypt.call(this,w,S,y.key,C),w.mixIn(y),w},decrypt:function(w,S,y,C){return C=this.cfg.extend(C),S=this._parse(S,C.format),y=C.kdf.execute(y,w.keySize,w.ivSize,S.salt),C.iv=y.iv,v.decrypt.call(this,w,S,y.key,C)}})})();(function(){for(var e=Ye,t=e.lib.BlockCipher,ne=e.algo,r=[],n=[],a=[],u=[],i=[],c=[],l=[],m=[],E=[],b=[],v=[],g=0;256>g;g++)v[g]=128>g?g<<1:g<<1^283;for(var A=0,w=0,g=0;256>g;g++){var S=w^w<<1^w<<2^w<<3^w<<4,S=S>>>8^S&255^99;r[A]=S,n[S]=A;var y=v[A],C=v[y],x=v[C],N=257*v[S]^16843008*S;a[A]=N<<24|N>>>8,u[A]=N<<16|N>>>16,i[A]=N<<8|N>>>24,c[A]=N,N=16843009*x^65537*C^257*y^16843008*A,l[S]=N<<24|N>>>8,m[S]=N<<16|N>>>16,E[S]=N<<8|N>>>24,b[S]=N,A?(A=y^v[v[v[x^y]]],w^=v[v[w]]):A=w=1}var L=[0,1,2,4,8,16,32,64,128,27,54],ne=ne.AES=t.extend({_doReset:function(){for(var B=this._key,pe=B.words,I=B.sigBytes/4,B=4*((this._nRounds=I+6)+1),j=this._keySchedule=[],R=0;R<B;R++)if(R<I)j[R]=pe[R];else{var M=j[R-1];R%I?6<I&&R%I==4&&(M=r[M>>>24]<<24|r[M>>>16&255]<<16|r[M>>>8&255]<<8|r[M&255]):(M=M<<8|M>>>24,M=r[M>>>24]<<24|r[M>>>16&255]<<16|r[M>>>8&255]<<8|r[M&255],M^=L[R/I|0]<<24),j[R]=j[R-I]^M}for(pe=this._invKeySchedule=[],I=0;I<B;I++)R=B-I,M=I%4?j[R]:j[R-4],pe[I]=4>I||4>=R?M:l[r[M>>>24]]^m[r[M>>>16&255]]^E[r[M>>>8&255]]^b[r[M&255]]},encryptBlock:function(pe,I){this._doCryptBlock(pe,I,this._keySchedule,a,u,i,c,r)},decryptBlock:function(pe,I){var B=pe[I+1];pe[I+1]=pe[I+3],pe[I+3]=B,this._doCryptBlock(pe,I,this._invKeySchedule,l,m,E,b,n),B=pe[I+1],pe[I+1]=pe[I+3],pe[I+3]=B},_doCryptBlock:function(pe,I,B,j,R,M,Q,V){for(var z=this._nRounds,Dt=pe[I]^B[0],Ht=pe[I+1]^B[1],jt=pe[I+2]^B[2],It=pe[I+3]^B[3],te=4,me=1;me<z;me++)var at=j[Dt>>>24]^R[Ht>>>16&255]^M[jt>>>8&255]^Q[It&255]^B[te++],st=j[Ht>>>24]^R[jt>>>16&255]^M[It>>>8&255]^Q[Dt&255]^B[te++],ct=j[jt>>>24]^R[It>>>16&255]^M[Dt>>>8&255]^Q[Ht&255]^B[te++],It=j[It>>>24]^R[Dt>>>16&255]^M[Ht>>>8&255]^Q[jt&255]^B[te++],Dt=at,Ht=st,jt=ct;at=(V[Dt>>>24]<<24|V[Ht>>>16&255]<<16|V[jt>>>8&255]<<8|V[It&255])^B[te++],st=(V[Ht>>>24]<<24|V[jt>>>16&255]<<16|V[It>>>8&255]<<8|V[Dt&255])^B[te++],ct=(V[jt>>>24]<<24|V[It>>>16&255]<<16|V[Dt>>>8&255]<<8|V[Ht&255])^B[te++],It=(V[It>>>24]<<24|V[Dt>>>16&255]<<16|V[Ht>>>8&255]<<8|V[jt&255])^B[te++],pe[I]=at,pe[I+1]=st,pe[I+2]=ct,pe[I+3]=It},keySize:8});e.AES=t._createHelper(ne)})();(function(){function e(v,g){var A=(this._lBlock>>>v^this._rBlock)&g;this._rBlock^=A,this._lBlock^=A<<v}function t(v,g){var A=(this._rBlock>>>v^this._lBlock)&g;this._lBlock^=A,this._rBlock^=A<<v}var r=Ye,a=r.lib,n=a.WordArray,a=a.BlockCipher,u=r.algo,i=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],m=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],E=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],b=u.DES=a.extend({_doReset:function(){for(var v=this._key.words,g=[],A=0;56>A;A++){var w=i[A]-1;g[A]=v[w>>>5]>>>31-w%32&1}for(v=this._subKeys=[],w=0;16>w;w++){for(var S=v[w]=[],y=l[w],A=0;24>A;A++)S[A/6|0]|=g[(c[A]-1+y)%28]<<31-A%6,S[4+(A/6|0)]|=g[28+(c[A+24]-1+y)%28]<<31-A%6;for(S[0]=S[0]<<1|S[0]>>>31,A=1;7>A;A++)S[A]>>>=4*(A-1)+3;S[7]=S[7]<<5|S[7]>>>27}for(g=this._invSubKeys=[],A=0;16>A;A++)g[A]=v[15-A]},encryptBlock:function(v,g){this._doCryptBlock(v,g,this._subKeys)},decryptBlock:function(v,g){this._doCryptBlock(v,g,this._invSubKeys)},_doCryptBlock:function(v,g,A){this._lBlock=v[g],this._rBlock=v[g+1],e.call(this,4,252645135),e.call(this,16,65535),t.call(this,2,858993459),t.call(this,8,16711935),e.call(this,1,1431655765);for(var w=0;16>w;w++){for(var S=A[w],y=this._lBlock,C=this._rBlock,x=0,N=0;8>N;N++)x|=m[N][((C^S[N])&E[N])>>>0];this._lBlock=C,this._rBlock=y^x}A=this._lBlock,this._lBlock=this._rBlock,this._rBlock=A,e.call(this,1,1431655765),t.call(this,8,16711935),t.call(this,2,858993459),e.call(this,16,65535),e.call(this,4,252645135),v[g]=this._lBlock,v[g+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});r.DES=a._createHelper(b),u=u.TripleDES=a.extend({_doReset:function(){var v=this._key.words;this._des1=b.createEncryptor(n.create(v.slice(0,2))),this._des2=b.createEncryptor(n.create(v.slice(2,4))),this._des3=b.createEncryptor(n.create(v.slice(4,6)))},encryptBlock:function(v,g){this._des1.encryptBlock(v,g),this._des2.decryptBlock(v,g),this._des3.encryptBlock(v,g)},decryptBlock:function(v,g){this._des3.decryptBlock(v,g),this._des2.encryptBlock(v,g),this._des1.decryptBlock(v,g)},keySize:6,ivSize:2,blockSize:2}),r.TripleDES=a._createHelper(u)})();(function(){var e=Ye,t=e.lib.WordArray;e.enc.Base64={stringify:function(r){var n=r.words,a=r.sigBytes,u=this._map;r.clamp(),r=[];for(var i=0;i<a;i+=3)for(var c=(n[i>>>2]>>>24-8*(i%4)&255)<<16|(n[i+1>>>2]>>>24-8*((i+1)%4)&255)<<8|n[i+2>>>2]>>>24-8*((i+2)%4)&255,l=0;4>l&&i+.75*l<a;l++)r.push(u.charAt(c>>>6*(3-l)&63));if(n=u.charAt(64))for(;r.length%4;)r.push(n);return r.join("")},parse:function(r){var n=r.length,a=this._map,u=a.charAt(64);u&&(u=r.indexOf(u),u!=-1&&(n=u));for(var u=[],i=0,c=0;c<n;c++)if(c%4){var l=a.indexOf(r.charAt(c-1))<<2*(c%4),m=a.indexOf(r.charAt(c))>>>6-2*(c%4);u[i>>>2]|=(l|m)<<24-8*(i%4),i++}return t.create(u,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(e){function t(b,v,g,A,w,S,y){return b=b+(v&g|~v&A)+w+y,(b<<S|b>>>32-S)+v}function r(b,v,g,A,w,S,y){return b=b+(v&A|g&~A)+w+y,(b<<S|b>>>32-S)+v}function n(b,v,g,A,w,S,y){return b=b+(v^g^A)+w+y,(b<<S|b>>>32-S)+v}function a(b,v,g,A,w,S,y){return b=b+(g^(v|~A))+w+y,(b<<S|b>>>32-S)+v}for(var u=Ye,l=u.lib,i=l.WordArray,c=l.Hasher,l=u.algo,m=[],E=0;64>E;E++)m[E]=4294967296*e.abs(e.sin(E+1))|0;l=l.MD5=c.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(b,v){for(var g=0;16>g;g++){var A=v+g,w=b[A];b[A]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360}var g=this._hash.words,A=b[v+0],w=b[v+1],S=b[v+2],y=b[v+3],C=b[v+4],x=b[v+5],N=b[v+6],L=b[v+7],ne=b[v+8],pe=b[v+9],I=b[v+10],B=b[v+11],j=b[v+12],R=b[v+13],M=b[v+14],Q=b[v+15],V=g[0],me=g[1],te=g[2],z=g[3],V=t(V,me,te,z,A,7,m[0]),z=t(z,V,me,te,w,12,m[1]),te=t(te,z,V,me,S,17,m[2]),me=t(me,te,z,V,y,22,m[3]),V=t(V,me,te,z,C,7,m[4]),z=t(z,V,me,te,x,12,m[5]),te=t(te,z,V,me,N,17,m[6]),me=t(me,te,z,V,L,22,m[7]),V=t(V,me,te,z,ne,7,m[8]),z=t(z,V,me,te,pe,12,m[9]),te=t(te,z,V,me,I,17,m[10]),me=t(me,te,z,V,B,22,m[11]),V=t(V,me,te,z,j,7,m[12]),z=t(z,V,me,te,R,12,m[13]),te=t(te,z,V,me,M,17,m[14]),me=t(me,te,z,V,Q,22,m[15]),V=r(V,me,te,z,w,5,m[16]),z=r(z,V,me,te,N,9,m[17]),te=r(te,z,V,me,B,14,m[18]),me=r(me,te,z,V,A,20,m[19]),V=r(V,me,te,z,x,5,m[20]),z=r(z,V,me,te,I,9,m[21]),te=r(te,z,V,me,Q,14,m[22]),me=r(me,te,z,V,C,20,m[23]),V=r(V,me,te,z,pe,5,m[24]),z=r(z,V,me,te,M,9,m[25]),te=r(te,z,V,me,y,14,m[26]),me=r(me,te,z,V,ne,20,m[27]),V=r(V,me,te,z,R,5,m[28]),z=r(z,V,me,te,S,9,m[29]),te=r(te,z,V,me,L,14,m[30]),me=r(me,te,z,V,j,20,m[31]),V=n(V,me,te,z,x,4,m[32]),z=n(z,V,me,te,ne,11,m[33]),te=n(te,z,V,me,B,16,m[34]),me=n(me,te,z,V,M,23,m[35]),V=n(V,me,te,z,w,4,m[36]),z=n(z,V,me,te,C,11,m[37]),te=n(te,z,V,me,L,16,m[38]),me=n(me,te,z,V,I,23,m[39]),V=n(V,me,te,z,R,4,m[40]),z=n(z,V,me,te,A,11,m[41]),te=n(te,z,V,me,y,16,m[42]),me=n(me,te,z,V,N,23,m[43]),V=n(V,me,te,z,pe,4,m[44]),z=n(z,V,me,te,j,11,m[45]),te=n(te,z,V,me,Q,16,m[46]),me=n(me,te,z,V,S,23,m[47]),V=a(V,me,te,z,A,6,m[48]),z=a(z,V,me,te,L,10,m[49]),te=a(te,z,V,me,M,15,m[50]),me=a(me,te,z,V,x,21,m[51]),V=a(V,me,te,z,j,6,m[52]),z=a(z,V,me,te,y,10,m[53]),te=a(te,z,V,me,I,15,m[54]),me=a(me,te,z,V,w,21,m[55]),V=a(V,me,te,z,ne,6,m[56]),z=a(z,V,me,te,Q,10,m[57]),te=a(te,z,V,me,N,15,m[58]),me=a(me,te,z,V,R,21,m[59]),V=a(V,me,te,z,C,6,m[60]),z=a(z,V,me,te,B,10,m[61]),te=a(te,z,V,me,S,15,m[62]),me=a(me,te,z,V,pe,21,m[63]);g[0]=g[0]+V|0,g[1]=g[1]+me|0,g[2]=g[2]+te|0,g[3]=g[3]+z|0},_doFinalize:function(){var b=this._data,v=b.words,g=8*this._nDataBytes,A=8*b.sigBytes;v[A>>>5]|=128<<24-A%32;var w=e.floor(g/4294967296);for(v[(A+64>>>9<<4)+15]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,v[(A+64>>>9<<4)+14]=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,b.sigBytes=4*(v.length+1),this._process(),b=this._hash,v=b.words,g=0;4>g;g++)A=v[g],v[g]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360;return b},clone:function(){var b=c.clone.call(this);return b._hash=this._hash.clone(),b}}),u.MD5=c._createHelper(l),u.HmacMD5=c._createHmacHelper(l)})(Math);(function(){var e=Ye,a=e.lib,t=a.WordArray,r=a.Hasher,n=[],a=e.algo.SHA1=r.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,i){for(var c=this._hash.words,l=c[0],m=c[1],E=c[2],b=c[3],v=c[4],g=0;80>g;g++){if(16>g)n[g]=u[i+g]|0;else{var A=n[g-3]^n[g-8]^n[g-14]^n[g-16];n[g]=A<<1|A>>>31}A=(l<<5|l>>>27)+v+n[g],A=20>g?A+((m&E|~m&b)+1518500249):40>g?A+((m^E^b)+1859775393):60>g?A+((m&E|m&b|E&b)-1894007588):A+((m^E^b)-899497514),v=b,b=E,E=m<<30|m>>>2,m=l,l=A}c[0]=c[0]+l|0,c[1]=c[1]+m|0,c[2]=c[2]+E|0,c[3]=c[3]+b|0,c[4]=c[4]+v|0},_doFinalize:function(){var u=this._data,i=u.words,c=8*this._nDataBytes,l=8*u.sigBytes;return i[l>>>5]|=128<<24-l%32,i[(l+64>>>9<<4)+14]=Math.floor(c/4294967296),i[(l+64>>>9<<4)+15]=c,u.sigBytes=4*i.length,this._process(),this._hash},clone:function(){var u=r.clone.call(this);return u._hash=this._hash.clone(),u}});e.SHA1=r._createHelper(a),e.HmacSHA1=r._createHmacHelper(a)})();(function(e){for(var t=Ye,g=t.lib,r=g.WordArray,n=g.Hasher,g=t.algo,a=[],u=[],i=function(w){return 4294967296*(w-(w|0))|0},c=2,l=0;64>l;){var m;e:{m=c;for(var E=e.sqrt(m),b=2;b<=E;b++)if(!(m%b)){m=!1;break e}m=!0}m&&(8>l&&(a[l]=i(e.pow(c,.5))),u[l]=i(e.pow(c,1/3)),l++),c++}var v=[],g=g.SHA256=n.extend({_doReset:function(){this._hash=new r.init(a.slice(0))},_doProcessBlock:function(A,w){for(var S=this._hash.words,y=S[0],C=S[1],x=S[2],N=S[3],L=S[4],ne=S[5],pe=S[6],I=S[7],B=0;64>B;B++){if(16>B)v[B]=A[w+B]|0;else{var j=v[B-15],R=v[B-2];v[B]=((j<<25|j>>>7)^(j<<14|j>>>18)^j>>>3)+v[B-7]+((R<<15|R>>>17)^(R<<13|R>>>19)^R>>>10)+v[B-16]}j=I+((L<<26|L>>>6)^(L<<21|L>>>11)^(L<<7|L>>>25))+(L&ne^~L&pe)+u[B]+v[B],R=((y<<30|y>>>2)^(y<<19|y>>>13)^(y<<10|y>>>22))+(y&C^y&x^C&x),I=pe,pe=ne,ne=L,L=N+j|0,N=x,x=C,C=y,y=j+R|0}S[0]=S[0]+y|0,S[1]=S[1]+C|0,S[2]=S[2]+x|0,S[3]=S[3]+N|0,S[4]=S[4]+L|0,S[5]=S[5]+ne|0,S[6]=S[6]+pe|0,S[7]=S[7]+I|0},_doFinalize:function(){var A=this._data,w=A.words,S=8*this._nDataBytes,y=8*A.sigBytes;return w[y>>>5]|=128<<24-y%32,w[(y+64>>>9<<4)+14]=e.floor(S/4294967296),w[(y+64>>>9<<4)+15]=S,A.sigBytes=4*w.length,this._process(),this._hash},clone:function(){var A=n.clone.call(this);return A._hash=this._hash.clone(),A}});t.SHA256=n._createHelper(g),t.HmacSHA256=n._createHmacHelper(g)})(Math);(function(){var e=Ye,t=e.lib.WordArray,n=e.algo,r=n.SHA256,n=n.SHA224=r.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var a=r._doFinalize.call(this);return a.sigBytes-=4,a}});e.SHA224=r._createHelper(n),e.HmacSHA224=r._createHmacHelper(n)})();(function(){function e(){return n.create.apply(n,arguments)}for(var t=Ye,r=t.lib.Hasher,u=t.x64,n=u.Word,a=u.WordArray,u=t.algo,i=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],c=[],l=0;80>l;l++)c[l]=e();u=u.SHA512=r.extend({_doReset:function(){this._hash=new a.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock:function(m,E){for(var C=this._hash.words,b=C[0],v=C[1],g=C[2],A=C[3],w=C[4],S=C[5],y=C[6],C=C[7],x=b.high,N=b.low,L=v.high,ne=v.low,pe=g.high,I=g.low,B=A.high,j=A.low,R=w.high,M=w.low,Q=S.high,V=S.low,z=y.high,te=y.low,me=C.high,at=C.low,st=x,ct=N,It=L,Dt=ne,Ht=pe,jt=I,hn=B,Ar=j,lr=R,Nr=M,_r=Q,xt=V,fr=z,yt=te,xe=me,$e=at,ve=0;80>ve;ve++){var Se=c[ve];if(16>ve)var ye=Se.high=m[E+2*ve]|0,re=Se.low=m[E+2*ve+1]|0;else{var ye=c[ve-15],re=ye.high,P=ye.low,ye=(re>>>1|P<<31)^(re>>>8|P<<24)^re>>>7,P=(P>>>1|re<<31)^(P>>>8|re<<24)^(P>>>7|re<<25),U=c[ve-2],re=U.high,G=U.low,U=(re>>>19|G<<13)^(re<<3|G>>>29)^re>>>6,G=(G>>>19|re<<13)^(G<<3|re>>>29)^(G>>>6|re<<26),re=c[ve-7],Y=re.high,de=c[ve-16],X=de.high,de=de.low,re=P+re.low,ye=ye+Y+(re>>>0<P>>>0?1:0),re=re+G,ye=ye+U+(re>>>0<G>>>0?1:0),re=re+de,ye=ye+X+(re>>>0<de>>>0?1:0);Se.high=ye,Se.low=re}var Y=lr&_r^~lr&fr,de=Nr&xt^~Nr&yt,Se=st&It^st&Ht^It&Ht,W=ct&Dt^ct&jt^Dt&jt,P=(st>>>28|ct<<4)^(st<<30|ct>>>2)^(st<<25|ct>>>7),U=(ct>>>28|st<<4)^(ct<<30|st>>>2)^(ct<<25|st>>>7),G=i[ve],f=G.high,q=G.low,G=$e+((Nr>>>14|lr<<18)^(Nr>>>18|lr<<14)^(Nr<<23|lr>>>9)),X=xe+((lr>>>14|Nr<<18)^(lr>>>18|Nr<<14)^(lr<<23|Nr>>>9))+(G>>>0<$e>>>0?1:0),G=G+de,X=X+Y+(G>>>0<de>>>0?1:0),G=G+q,X=X+f+(G>>>0<q>>>0?1:0),G=G+re,X=X+ye+(G>>>0<re>>>0?1:0),re=U+W,Se=P+Se+(re>>>0<U>>>0?1:0),xe=fr,$e=yt,fr=_r,yt=xt,_r=lr,xt=Nr,Nr=Ar+G|0,lr=hn+X+(Nr>>>0<Ar>>>0?1:0)|0,hn=Ht,Ar=jt,Ht=It,jt=Dt,It=st,Dt=ct,ct=G+re|0,st=X+Se+(ct>>>0<G>>>0?1:0)|0}N=b.low=N+ct,b.high=x+st+(N>>>0<ct>>>0?1:0),ne=v.low=ne+Dt,v.high=L+It+(ne>>>0<Dt>>>0?1:0),I=g.low=I+jt,g.high=pe+Ht+(I>>>0<jt>>>0?1:0),j=A.low=j+Ar,A.high=B+hn+(j>>>0<Ar>>>0?1:0),M=w.low=M+Nr,w.high=R+lr+(M>>>0<Nr>>>0?1:0),V=S.low=V+xt,S.high=Q+_r+(V>>>0<xt>>>0?1:0),te=y.low=te+yt,y.high=z+fr+(te>>>0<yt>>>0?1:0),at=C.low=at+$e,C.high=me+xe+(at>>>0<$e>>>0?1:0)},_doFinalize:function(){var m=this._data,E=m.words,b=8*this._nDataBytes,v=8*m.sigBytes;return E[v>>>5]|=128<<24-v%32,E[(v+128>>>10<<5)+30]=Math.floor(b/4294967296),E[(v+128>>>10<<5)+31]=b,m.sigBytes=4*E.length,this._process(),this._hash.toX32()},clone:function(){var m=r.clone.call(this);return m._hash=this._hash.clone(),m},blockSize:32}),t.SHA512=r._createHelper(u),t.HmacSHA512=r._createHmacHelper(u)})();(function(){var e=Ye,a=e.x64,t=a.Word,r=a.WordArray,a=e.algo,n=a.SHA512,a=a.SHA384=n.extend({_doReset:function(){this._hash=new r.init([new t.init(3418070365,3238371032),new t.init(1654270250,914150663),new t.init(2438529370,812702999),new t.init(355462360,4144912697),new t.init(1731405415,4290775857),new t.init(2394180231,1750603025),new t.init(3675008525,1694076839),new t.init(1203062813,3204075428)])},_doFinalize:function(){var u=n._doFinalize.call(this);return u.sigBytes-=16,u}});e.SHA384=n._createHelper(a),e.HmacSHA384=n._createHmacHelper(a)})();(function(){var e=Ye,m=e.lib,t=m.WordArray,r=m.Hasher,m=e.algo,n=t.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),a=t.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=t.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),i=t.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),c=t.create([0,1518500249,1859775393,2400959708,2840853838]),l=t.create([1352829926,1548603684,1836072691,2053994217,0]),m=m.RIPEMD160=r.extend({_doReset:function(){this._hash=t.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(E,b){for(var v=0;16>v;v++){var g=b+v,A=E[g];E[g]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360}var g=this._hash.words,A=c.words,w=l.words,S=n.words,y=a.words,C=u.words,x=i.words,N,L,ne,pe,I,B,j,R,M,Q;B=N=g[0],j=L=g[1],R=ne=g[2],M=pe=g[3],Q=I=g[4];for(var V,v=0;80>v;v+=1)V=N+E[b+S[v]]|0,V=16>v?V+((L^ne^pe)+A[0]):32>v?V+((L&ne|~L&pe)+A[1]):48>v?V+(((L|~ne)^pe)+A[2]):64>v?V+((L&pe|ne&~pe)+A[3]):V+((L^(ne|~pe))+A[4]),V|=0,V=V<<C[v]|V>>>32-C[v],V=V+I|0,N=I,I=pe,pe=ne<<10|ne>>>22,ne=L,L=V,V=B+E[b+y[v]]|0,V=16>v?V+((j^(R|~M))+w[0]):32>v?V+((j&M|R&~M)+w[1]):48>v?V+(((j|~R)^M)+w[2]):64>v?V+((j&R|~j&M)+w[3]):V+((j^R^M)+w[4]),V|=0,V=V<<x[v]|V>>>32-x[v],V=V+Q|0,B=Q,Q=M,M=R<<10|R>>>22,R=j,j=V;V=g[1]+ne+M|0,g[1]=g[2]+pe+Q|0,g[2]=g[3]+I+B|0,g[3]=g[4]+N+j|0,g[4]=g[0]+L+R|0,g[0]=V},_doFinalize:function(){var E=this._data,b=E.words,v=8*this._nDataBytes,g=8*E.sigBytes;for(b[g>>>5]|=128<<24-g%32,b[(g+64>>>9<<4)+14]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,E.sigBytes=4*(b.length+1),this._process(),E=this._hash,b=E.words,v=0;5>v;v++)g=b[v],b[v]=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360;return E},clone:function(){var E=r.clone.call(this);return E._hash=this._hash.clone(),E}});e.RIPEMD160=r._createHelper(m),e.HmacRIPEMD160=r._createHmacHelper(m)})(Math);(function(){var e=Ye,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(r,n){r=this._hasher=new r.init,typeof n=="string"&&(n=t.parse(n));var a=r.blockSize,u=4*a;n.sigBytes>u&&(n=r.finalize(n)),n.clamp();for(var i=this._oKey=n.clone(),c=this._iKey=n.clone(),l=i.words,m=c.words,E=0;E<a;E++)l[E]^=1549556828,m[E]^=909522486;i.sigBytes=c.sigBytes=u,this.reset()},reset:function(){var r=this._hasher;r.reset(),r.update(this._iKey)},update:function(r){return this._hasher.update(r),this},finalize:function(r){var n=this._hasher;return r=n.finalize(r),n.reset(),n.finalize(this._oKey.clone().concat(r))}})})();(function(){var e=Ye,n=e.lib,t=n.Base,r=n.WordArray,n=e.algo,a=n.HMAC,u=n.PBKDF2=t.extend({cfg:t.extend({keySize:4,hasher:n.SHA1,iterations:1}),init:function(i){this.cfg=this.cfg.extend(i)},compute:function(i,c){for(var A=this.cfg,l=a.create(A.hasher,i),m=r.create(),E=r.create([1]),b=m.words,v=E.words,g=A.keySize,A=A.iterations;b.length<g;){var w=l.update(c).finalize(E);l.reset();for(var S=w.words,y=S.length,C=w,x=1;x<A;x++){C=l.finalize(C),l.reset();for(var N=C.words,L=0;L<y;L++)S[L]^=N[L]}m.concat(w),v[0]++}return m.sigBytes=4*g,m}});e.PBKDF2=function(i,c,l){return u.create(l).compute(i,c)}})();var qa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Rh="=";function rs(e){var t,r,n="";for(t=0;t+3<=e.length;t+=3)r=parseInt(e.substring(t,t+3),16),n+=qa.charAt(r>>6)+qa.charAt(r&63);if(t+1==e.length?(r=parseInt(e.substring(t,t+1),16),n+=qa.charAt(r<<2)):t+2==e.length&&(r=parseInt(e.substring(t,t+2),16),n+=qa.charAt(r>>2)+qa.charAt((r&3)<<4)),Rh)for(;(n.length&3)>0;)n+=Rh;return n}function Ka(e){var t="",r,n=0,a,u;for(r=0;r<e.length&&e.charAt(r)!=Rh;++r)u=qa.indexOf(e.charAt(r)),!(u<0)&&(n==0?(t+=ts(u>>2),a=u&3,n=1):n==1?(t+=ts(a<<2|u>>4),a=u&15,n=2):n==2?(t+=ts(a),t+=ts(u>>2),a=u&3,n=3):(t+=ts(a<<2|u>>4),t+=ts(u&15),n=0));return n==1&&(t+=ts(a<<2)),t}function J0(e){var t=Ka(e),r,n=new Array;for(r=0;2*r<t.length;++r)n[r]=parseInt(t.substring(2*r,2*r+2),16);return n}var $s,QA=0xdeadbeefcafe,G0=(QA&16777215)==15715070;function ae(e,t,r){e!=null&&(typeof e=="number"?this.fromNumber(e,t,r):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}function Gt(){return new ae(null)}function ey(e,t,r,n,a,u){for(;--u>=0;){var i=t*this[e++]+r[n]+a;a=Math.floor(i/67108864),r[n++]=i&67108863}return a}function ty(e,t,r,n,a,u){for(var i=t&32767,c=t>>15;--u>=0;){var l=this[e]&32767,m=this[e++]>>15,E=c*l+m*i;l=i*l+((E&32767)<<15)+r[n]+(a&1073741823),a=(l>>>30)+(E>>>15)+c*m+(a>>>30),r[n++]=l&1073741823}return a}function ry(e,t,r,n,a,u){for(var i=t&16383,c=t>>14;--u>=0;){var l=this[e]&16383,m=this[e++]>>14,E=c*l+m*i;l=i*l+((E&16383)<<14)+r[n]+a,a=(l>>28)+(E>>14)+c*m,r[n++]=l&268435455}return a}G0&&Vu.appName=="Microsoft Internet Explorer"?(ae.prototype.am=ty,$s=30):G0&&Vu.appName!="Netscape"?(ae.prototype.am=ey,$s=26):(ae.prototype.am=ry,$s=28);ae.prototype.DB=$s;ae.prototype.DM=(1<<$s)-1;ae.prototype.DV=1<<$s;var Nh=52;ae.prototype.FV=Math.pow(2,Nh);ae.prototype.F1=Nh-$s;ae.prototype.F2=2*$s-Nh;var ny="0123456789abcdefghijklmnopqrstuvwxyz",Cc=new Array,za,oi;za=48;for(oi=0;oi<=9;++oi)Cc[za++]=oi;za=97;for(oi=10;oi<36;++oi)Cc[za++]=oi;za=65;for(oi=10;oi<36;++oi)Cc[za++]=oi;function ts(e){return ny.charAt(e)}function X0(e,t){var r=Cc[e.charCodeAt(t)];return r??-1}function iy(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function sy(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function Bs(e){var t=Gt();return t.fromInt(e),t}function ay(e,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==256)r=8;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var n=e.length,a=!1,u=0;--n>=0;){var i=r==8?e[n]&255:X0(e,n);if(i<0){e.charAt(n)=="-"&&(a=!0);continue}a=!1,u==0?this[this.t++]=i:u+r>this.DB?(this[this.t-1]|=(i&(1<<this.DB-u)-1)<<u,this[this.t++]=i>>this.DB-u):this[this.t-1]|=i<<u,u+=r,u>=this.DB&&(u-=this.DB)}r==8&&(e[0]&128)!=0&&(this.s=-1,u>0&&(this[this.t-1]|=(1<<this.DB-u)-1<<u)),this.clamp(),a&&ae.ZERO.subTo(this,this)}function uy(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function oy(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var r=(1<<t)-1,n,a=!1,u="",i=this.t,c=this.DB-i*this.DB%t;if(i-- >0)for(c<this.DB&&(n=this[i]>>c)>0&&(a=!0,u=ts(n));i>=0;)c<t?(n=(this[i]&(1<<c)-1)<<t-c,n|=this[--i]>>(c+=this.DB-t)):(n=this[i]>>(c-=t)&r,c<=0&&(c+=this.DB,--i)),n>0&&(a=!0),a&&(u+=ts(n));return a?u:"0"}function cy(){var e=Gt();return ae.ZERO.subTo(this,e),e}function ly(){return this.s<0?this.negate():this}function fy(e){var t=this.s-e.s;if(t!=0)return t;var r=this.t;if(t=r-e.t,t!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this[r]-e[r])!=0)return t;return 0}function Ic(e){var t=1,r;return(r=e>>>16)!=0&&(e=r,t+=16),(r=e>>8)!=0&&(e=r,t+=8),(r=e>>4)!=0&&(e=r,t+=4),(r=e>>2)!=0&&(e=r,t+=2),(r=e>>1)!=0&&(e=r,t+=1),t}function hy(){return this.t<=0?0:this.DB*(this.t-1)+Ic(this[this.t-1]^this.s&this.DM)}function py(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s}function dy(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s}function gy(e,t){var r=e%this.DB,n=this.DB-r,a=(1<<n)-1,u=Math.floor(e/this.DB),i=this.s<<r&this.DM,c;for(c=this.t-1;c>=0;--c)t[c+u+1]=this[c]>>n|i,i=(this[c]&a)<<r;for(c=u-1;c>=0;--c)t[c]=0;t[u]=i,t.t=this.t+u+1,t.s=this.s,t.clamp()}function vy(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t){t.t=0;return}var n=e%this.DB,a=this.DB-n,u=(1<<n)-1;t[0]=this[r]>>n;for(var i=r+1;i<this.t;++i)t[i-r-1]|=(this[i]&u)<<a,t[i-r]=this[i]>>n;n>0&&(t[this.t-r-1]|=(this.s&u)<<a),t.t=this.t-r,t.clamp()}function my(e,t){for(var r=0,n=0,a=Math.min(e.t,this.t);r<a;)n+=this[r]-e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e[r],t[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[r++]=this.DV+n:n>0&&(t[r++]=n),t.t=r,t.clamp()}function wy(e,t){var r=this.abs(),n=e.abs(),a=r.t;for(t.t=a+n.t;--a>=0;)t[a]=0;for(a=0;a<n.t;++a)t[a+r.t]=r.am(0,n[a],t,a,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&ae.ZERO.subTo(t,t)}function by(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()}function Ey(e,t,r){var n=e.abs();if(!(n.t<=0)){var a=this.abs();if(a.t<n.t){t?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=Gt());var u=Gt(),i=this.s,c=e.s,l=this.DB-Ic(n[n.t-1]);l>0?(n.lShiftTo(l,u),a.lShiftTo(l,r)):(n.copyTo(u),a.copyTo(r));var m=u.t,E=u[m-1];if(E!=0){var b=E*(1<<this.F1)+(m>1?u[m-2]>>this.F2:0),v=this.FV/b,g=(1<<this.F1)/b,A=1<<this.F2,w=r.t,S=w-m,y=t??Gt();for(u.dlShiftTo(S,y),r.compareTo(y)>=0&&(r[r.t++]=1,r.subTo(y,r)),ae.ONE.dlShiftTo(m,y),y.subTo(u,u);u.t<m;)u[u.t++]=0;for(;--S>=0;){var C=r[--w]==E?this.DM:Math.floor(r[w]*v+(r[w-1]+A)*g);if((r[w]+=u.am(0,C,r,S,0,m))<C)for(u.dlShiftTo(S,y),r.subTo(y,r);r[w]<--C;)r.subTo(y,r)}t!=null&&(r.drShiftTo(m,t),i!=c&&ae.ZERO.subTo(t,t)),r.t=m,r.clamp(),l>0&&r.rShiftTo(l,r),i<0&&ae.ZERO.subTo(r,r)}}}function Ay(e){var t=Gt();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(ae.ZERO)>0&&e.subTo(t,t),t}function Ws(e){this.m=e}function yy(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function Sy(e){return e}function _y(e){e.divRemTo(this.m,null,e)}function Dy(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function Fy(e,t){e.squareTo(t),this.reduce(t)}Ws.prototype.convert=yy;Ws.prototype.revert=Sy;Ws.prototype.reduce=_y;Ws.prototype.mulTo=Dy;Ws.prototype.sqrTo=Fy;function Cy(){if(this.t<1)return 0;var e=this[0];if((e&1)==0)return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function Ys(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function Iy(e){var t=Gt();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(ae.ZERO)>0&&this.m.subTo(t,t),t}function Py(e){var t=Gt();return e.copyTo(t),this.reduce(t),t}function By(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=e[t]&32767,n=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e[r]+=this.m.am(0,n,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function $y(e,t){e.squareTo(t),this.reduce(t)}function Ry(e,t,r){e.multiplyTo(t,r),this.reduce(r)}Ys.prototype.convert=Iy;Ys.prototype.revert=Py;Ys.prototype.reduce=By;Ys.prototype.mulTo=Ry;Ys.prototype.sqrTo=$y;function ky(){return(this.t>0?this[0]&1:this.s)==0}function xy(e,t){if(e>4294967295||e<1)return ae.ONE;var r=Gt(),n=Gt(),a=t.convert(this),u=Ic(e)-1;for(a.copyTo(r);--u>=0;)if(t.sqrTo(r,n),(e&1<<u)>0)t.mulTo(n,a,r);else{var i=r;r=n,n=i}return t.revert(r)}function Ty(e,t){var r;return e<256||t.isEven()?r=new Ws(t):r=new Ys(t),this.exp(e,r)}ae.prototype.copyTo=iy;ae.prototype.fromInt=sy;ae.prototype.fromString=ay;ae.prototype.clamp=uy;ae.prototype.dlShiftTo=py;ae.prototype.drShiftTo=dy;ae.prototype.lShiftTo=gy;ae.prototype.rShiftTo=vy;ae.prototype.subTo=my;ae.prototype.multiplyTo=wy;ae.prototype.squareTo=by;ae.prototype.divRemTo=Ey;ae.prototype.invDigit=Cy;ae.prototype.isEven=ky;ae.prototype.exp=xy;ae.prototype.toString=oy;ae.prototype.negate=cy;ae.prototype.abs=ly;ae.prototype.compareTo=fy;ae.prototype.bitLength=hy;ae.prototype.mod=Ay;ae.prototype.modPowInt=Ty;ae.ZERO=Bs(0);ae.ONE=Bs(1);function Oy(){var e=Gt();return this.copyTo(e),e}function Ny(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function Ly(){return this.t==0?this.s:this[0]<<24>>24}function Hy(){return this.t==0?this.s:this[0]<<16>>16}function jy(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function Uy(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function My(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=Bs(r),a=Gt(),u=Gt(),i="";for(this.divRemTo(n,a,u);a.signum()>0;)i=(r+u.intValue()).toString(e).substr(1)+i,a.divRemTo(n,a,u);return u.intValue().toString(e)+i}function qy(e,t){this.fromInt(0),t==null&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),a=!1,u=0,i=0,c=0;c<e.length;++c){var l=X0(e,c);if(l<0){e.charAt(c)=="-"&&this.signum()==0&&(a=!0);continue}i=t*i+l,++u>=r&&(this.dMultiply(n),this.dAddOffset(i,0),u=0,i=0)}u>0&&(this.dMultiply(Math.pow(t,u)),this.dAddOffset(i,0)),a&&ae.ZERO.subTo(this,this)}function Vy(e,t,r){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(ae.ONE.shiftLeft(e-1),Lh,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(ae.ONE.shiftLeft(e-1),this);else{var n=new Array,a=e&7;n.length=(e>>3)+1,t.nextBytes(n),a>0?n[0]&=(1<<a)-1:n[0]=0,this.fromString(n,256)}}function Ky(){var e=this.t,t=new Array;t[0]=this.s;var r=this.DB-e*this.DB%8,n,a=0;if(e-- >0)for(r<this.DB&&(n=this[e]>>r)!=(this.s&this.DM)>>r&&(t[a++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this[e]&(1<<r)-1)<<8-r,n|=this[--e]>>(r+=this.DB-8)):(n=this[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),(n&128)!=0&&(n|=-256),a==0&&(this.s&128)!=(n&128)&&++a,(a>0||n!=this.s)&&(t[a++]=n);return t}function zy(e){return this.compareTo(e)==0}function Gy(e){return this.compareTo(e)<0?this:e}function Wy(e){return this.compareTo(e)>0?this:e}function Yy(e,t,r){var n,a,u=Math.min(e.t,this.t);for(n=0;n<u;++n)r[n]=t(this[n],e[n]);if(e.t<this.t){for(a=e.s&this.DM,n=u;n<this.t;++n)r[n]=t(this[n],a);r.t=this.t}else{for(a=this.s&this.DM,n=u;n<e.t;++n)r[n]=t(a,e[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function Jy(e,t){return e&t}function Xy(e){var t=Gt();return this.bitwiseTo(e,Jy,t),t}function Lh(e,t){return e|t}function Zy(e){var t=Gt();return this.bitwiseTo(e,Lh,t),t}function Z0(e,t){return e^t}function Qy(e){var t=Gt();return this.bitwiseTo(e,Z0,t),t}function Q0(e,t){return e&~t}function eS(e){var t=Gt();return this.bitwiseTo(e,Q0,t),t}function tS(){for(var e=Gt(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e}function rS(e){var t=Gt();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function nS(e){var t=Gt();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function iS(e){if(e==0)return-1;var t=0;return(e&65535)==0&&(e>>=16,t+=16),(e&255)==0&&(e>>=8,t+=8),(e&15)==0&&(e>>=4,t+=4),(e&3)==0&&(e>>=2,t+=2),(e&1)==0&&++t,t}function sS(){for(var e=0;e<this.t;++e)if(this[e]!=0)return e*this.DB+iS(this[e]);return this.s<0?this.t*this.DB:-1}function aS(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function uS(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=aS(this[r]^t);return e}function oS(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this[t]&1<<e%this.DB)!=0}function cS(e,t){var r=ae.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function lS(e){return this.changeBit(e,Lh)}function fS(e){return this.changeBit(e,Q0)}function hS(e){return this.changeBit(e,Z0)}function pS(e,t){for(var r=0,n=0,a=Math.min(e.t,this.t);r<a;)n+=this[r]+e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e[r],t[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t[r++]=n:n<-1&&(t[r++]=this.DV+n),t.t=r,t.clamp()}function dS(e){var t=Gt();return this.addTo(e,t),t}function gS(e){var t=Gt();return this.subTo(e,t),t}function vS(e){var t=Gt();return this.multiplyTo(e,t),t}function mS(){var e=Gt();return this.squareTo(e),e}function wS(e){var t=Gt();return this.divRemTo(e,t,null),t}function bS(e){var t=Gt();return this.divRemTo(e,null,t),t}function ES(e){var t=Gt(),r=Gt();return this.divRemTo(e,t,r),new Array(t,r)}function AS(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function yS(e,t){if(e!=0){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}}function zu(){}function e1(e){return e}function SS(e,t,r){e.multiplyTo(t,r)}function _S(e,t){e.squareTo(t)}zu.prototype.convert=e1;zu.prototype.revert=e1;zu.prototype.mulTo=SS;zu.prototype.sqrTo=_S;function DS(e){return this.exp(e,new zu)}function FS(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r[--n]=0;var a;for(a=r.t-this.t;n<a;++n)r[n+this.t]=this.am(0,e[n],r,n,0,this.t);for(a=Math.min(e.t,t);n<a;++n)this.am(0,e[n],r,n,0,t-n);r.clamp()}function CS(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r[this.t+n-t]=this.am(t-n,e[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function Ga(e){this.r2=Gt(),this.q3=Gt(),ae.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function IS(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=Gt();return e.copyTo(t),this.reduce(t),t}function PS(e){return e}function BS(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function $S(e,t){e.squareTo(t),this.reduce(t)}function RS(e,t,r){e.multiplyTo(t,r),this.reduce(r)}Ga.prototype.convert=IS;Ga.prototype.revert=PS;Ga.prototype.reduce=BS;Ga.prototype.mulTo=RS;Ga.prototype.sqrTo=$S;function kS(e,t){var r=e.bitLength(),n,a=Bs(1),u;if(r<=0)return a;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?u=new Ws(t):t.isEven()?u=new Ga(t):u=new Ys(t);var i=new Array,c=3,l=n-1,m=(1<<n)-1;if(i[1]=u.convert(this),n>1){var E=Gt();for(u.sqrTo(i[1],E);c<=m;)i[c]=Gt(),u.mulTo(E,i[c-2],i[c]),c+=2}var b=e.t-1,v,g=!0,A=Gt(),w;for(r=Ic(e[b])-1;b>=0;){for(r>=l?v=e[b]>>r-l&m:(v=(e[b]&(1<<r+1)-1)<<l-r,b>0&&(v|=e[b-1]>>this.DB+r-l)),c=n;(v&1)==0;)v>>=1,--c;if((r-=c)<0&&(r+=this.DB,--b),g)i[v].copyTo(a),g=!1;else{for(;c>1;)u.sqrTo(a,A),u.sqrTo(A,a),c-=2;c>0?u.sqrTo(a,A):(w=a,a=A,A=w),u.mulTo(A,i[v],a)}for(;b>=0&&(e[b]&1<<r)==0;)u.sqrTo(a,A),w=a,a=A,A=w,--r<0&&(r=this.DB-1,--b)}return u.revert(a)}function xS(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var a=t.getLowestSetBit(),u=r.getLowestSetBit();if(u<0)return t;for(a<u&&(u=a),u>0&&(t.rShiftTo(u,t),r.rShiftTo(u,r));t.signum()>0;)(a=t.getLowestSetBit())>0&&t.rShiftTo(a,t),(a=r.getLowestSetBit())>0&&r.rShiftTo(a,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return u>0&&r.lShiftTo(u,r),r}function TS(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(t==0)r=this[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this[n])%e;return r}function OS(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return ae.ZERO;for(var r=e.clone(),n=this.clone(),a=Bs(1),u=Bs(0),i=Bs(0),c=Bs(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),t?((!a.isEven()||!u.isEven())&&(a.addTo(this,a),u.subTo(e,u)),a.rShiftTo(1,a)):u.isEven()||u.subTo(e,u),u.rShiftTo(1,u);for(;n.isEven();)n.rShiftTo(1,n),t?((!i.isEven()||!c.isEven())&&(i.addTo(this,i),c.subTo(e,c)),i.rShiftTo(1,i)):c.isEven()||c.subTo(e,c),c.rShiftTo(1,c);r.compareTo(n)>=0?(r.subTo(n,r),t&&a.subTo(i,a),u.subTo(c,u)):(n.subTo(r,n),t&&i.subTo(a,i),c.subTo(u,c))}if(n.compareTo(ae.ONE)!=0)return ae.ZERO;if(c.compareTo(e)>=0)return c.subtract(e);if(c.signum()<0)c.addTo(e,c);else return c;return c.signum()<0?c.add(e):c}var bn=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],NS=(1<<26)/bn[bn.length-1];function LS(e){var t,r=this.abs();if(r.t==1&&r[0]<=bn[bn.length-1]){for(t=0;t<bn.length;++t)if(r[0]==bn[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<bn.length;){for(var n=bn[t],a=t+1;a<bn.length&&n<NS;)n*=bn[a++];for(n=r.modInt(n);t<a;)if(n%bn[t++]==0)return!1}return r.millerRabin(e)}function HS(e){var t=this.subtract(ae.ONE),r=t.getLowestSetBit();if(r<=0)return!1;var n=t.shiftRight(r);e=e+1>>1,e>bn.length&&(e=bn.length);for(var a=Gt(),u=0;u<e;++u){a.fromInt(bn[Math.floor(Math.random()*bn.length)]);var i=a.modPow(n,this);if(i.compareTo(ae.ONE)!=0&&i.compareTo(t)!=0){for(var c=1;c++<r&&i.compareTo(t)!=0;)if(i=i.modPowInt(2,this),i.compareTo(ae.ONE)==0)return!1;if(i.compareTo(t)!=0)return!1}}return!0}ae.prototype.chunkSize=jy;ae.prototype.toRadix=My;ae.prototype.fromRadix=qy;ae.prototype.fromNumber=Vy;ae.prototype.bitwiseTo=Yy;ae.prototype.changeBit=cS;ae.prototype.addTo=pS;ae.prototype.dMultiply=AS;ae.prototype.dAddOffset=yS;ae.prototype.multiplyLowerTo=FS;ae.prototype.multiplyUpperTo=CS;ae.prototype.modInt=TS;ae.prototype.millerRabin=HS;ae.prototype.clone=Oy;ae.prototype.intValue=Ny;ae.prototype.byteValue=Ly;ae.prototype.shortValue=Hy;ae.prototype.signum=Uy;ae.prototype.toByteArray=Ky;ae.prototype.equals=zy;ae.prototype.min=Gy;ae.prototype.max=Wy;ae.prototype.and=Xy;ae.prototype.or=Zy;ae.prototype.xor=Qy;ae.prototype.andNot=eS;ae.prototype.not=tS;ae.prototype.shiftLeft=rS;ae.prototype.shiftRight=nS;ae.prototype.getLowestSetBit=sS;ae.prototype.bitCount=uS;ae.prototype.testBit=oS;ae.prototype.setBit=lS;ae.prototype.clearBit=fS;ae.prototype.flipBit=hS;ae.prototype.add=dS;ae.prototype.subtract=gS;ae.prototype.multiply=vS;ae.prototype.divide=wS;ae.prototype.remainder=bS;ae.prototype.divideAndRemainder=ES;ae.prototype.modPow=kS;ae.prototype.modInverse=OS;ae.prototype.pow=DS;ae.prototype.gcd=xS;ae.prototype.isProbablePrime=LS;ae.prototype.square=mS;function Hh(){this.i=0,this.j=0,this.S=new Array}function jS(e){var t,r,n;for(t=0;t<256;++t)this.S[t]=t;for(r=0,t=0;t<256;++t)r=r+this.S[t]+e[t%e.length]&255,n=this.S[t],this.S[t]=this.S[r],this.S[r]=n;this.i=0,this.j=0}function US(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]}Hh.prototype.init=jS;Hh.prototype.next=US;function MS(){return new Hh}var kh=256;var Sc,Kn,Zr;function qS(e){Kn[Zr++]^=e&255,Kn[Zr++]^=e>>8&255,Kn[Zr++]^=e>>16&255,Kn[Zr++]^=e>>24&255,Zr>=kh&&(Zr-=kh)}function jh(){qS(new Date().getTime())}if(Kn==null){if(Kn=new Array,Zr=0,Ma!==void 0&&(Ma.crypto!==void 0||Ma.msCrypto!==void 0)){if(Ph=Ma.crypto||Ma.msCrypto,Ph.getRandomValues)for(Bh=new Uint8Array(32),Ph.getRandomValues(Bh),ui=0;ui<32;++ui)Kn[Zr++]=Bh[ui];else if(Vu.appName=="Netscape"&&Vu.appVersion<"5")for($h=Ma.crypto.random(32),ui=0;ui<$h.length;++ui)Kn[Zr++]=$h.charCodeAt(ui)&255}for(;Zr<kh;)ui=Math.floor(65536*Math.random()),Kn[Zr++]=ui>>>8,Kn[Zr++]=ui&255;Zr=0,jh()}var ui,Ph,Bh,$h;function VS(){if(Sc==null){for(jh(),Sc=MS(),Sc.init(Kn),Zr=0;Zr<Kn.length;++Zr)Kn[Zr]=0;Zr=0}return Sc.next()}function KS(e){var t;for(t=0;t<e.length;++t)e[t]=VS()}function Wa(){}Wa.prototype.nextBytes=KS;function Bn(e,t){return new ae(e,t)}function At(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function zS(e,t){if(this.isPublic=!0,this.isPrivate=!1,typeof e!="string")this.n=e,this.e=t;else if(e!=null&&t!=null&&e.length>0&&t.length>0)this.n=Bn(e,16),this.e=parseInt(t,16);else throw"Invalid RSA public key"}function GS(e){return e.modPowInt(this.e,this.n)}At.prototype.doPublic=GS;At.prototype.setPublic=zS;At.prototype.type="RSA";function WS(e,t,r){if(this.isPrivate=!0,typeof e!="string")this.n=e,this.e=t,this.d=r;else if(e!=null&&t!=null&&e.length>0&&t.length>0)this.n=Bn(e,16),this.e=parseInt(t,16),this.d=Bn(r,16);else throw"Invalid RSA private key"}function YS(e,t,r,n,a,u,i,c){if(this.isPrivate=!0,this.isPublic=!1,e==null)throw"RSASetPrivateEx N == null";if(t==null)throw"RSASetPrivateEx E == null";if(e.length==0)throw"RSASetPrivateEx N.length == 0";if(t.length==0)throw"RSASetPrivateEx E.length == 0";if(e!=null&&t!=null&&e.length>0&&t.length>0)this.n=Bn(e,16),this.e=parseInt(t,16),this.d=Bn(r,16),this.p=Bn(n,16),this.q=Bn(a,16),this.dmp1=Bn(u,16),this.dmq1=Bn(i,16),this.coeff=Bn(c,16);else throw"Invalid RSA private key in RSASetPrivateEx"}function JS(e,t){var r=new Wa,n=e>>1;this.e=parseInt(t,16);for(var a=new ae(t,16),u=e/2-100,i=ae.ONE.shiftLeft(u);;){for(;this.p=new ae(e-n,1,r),!(this.p.subtract(ae.ONE).gcd(a).compareTo(ae.ONE)==0&&this.p.isProbablePrime(10)););for(;this.q=new ae(n,1,r),!(this.q.subtract(ae.ONE).gcd(a).compareTo(ae.ONE)==0&&this.q.isProbablePrime(10)););if(this.p.compareTo(this.q)<=0){var c=this.p;this.p=this.q,this.q=c}var l=this.q.subtract(this.p).abs();if(!(l.bitLength()<u||l.compareTo(i)<=0)){var m=this.p.subtract(ae.ONE),E=this.q.subtract(ae.ONE),b=m.multiply(E);if(b.gcd(a).compareTo(ae.ONE)==0&&(this.n=this.p.multiply(this.q),this.n.bitLength()==e)){this.d=a.modInverse(b),this.dmp1=this.d.mod(m),this.dmq1=this.d.mod(E),this.coeff=this.q.modInverse(this.p);break}}}this.isPrivate=!0}function XS(e){if(this.p==null||this.q==null)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),r=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(r)<0;)t=t.add(this.p);return t.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r)}At.prototype.doPrivate=XS;At.prototype.setPrivate=WS;At.prototype.setPrivateEx=YS;At.prototype.generate=JS;function Gr(e,t){this.x=t,this.q=e}function ZS(e){return e==this?!0:this.q.equals(e.q)&&this.x.equals(e.x)}function QS(){return this.x}function e_(){return new Gr(this.q,this.x.negate().mod(this.q))}function t_(e){return new Gr(this.q,this.x.add(e.toBigInteger()).mod(this.q))}function r_(e){return new Gr(this.q,this.x.subtract(e.toBigInteger()).mod(this.q))}function n_(e){return new Gr(this.q,this.x.multiply(e.toBigInteger()).mod(this.q))}function i_(){return new Gr(this.q,this.x.square().mod(this.q))}function s_(e){return new Gr(this.q,this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q))}Gr.prototype.equals=ZS;Gr.prototype.toBigInteger=QS;Gr.prototype.negate=e_;Gr.prototype.add=t_;Gr.prototype.subtract=r_;Gr.prototype.multiply=n_;Gr.prototype.square=i_;Gr.prototype.divide=s_;Gr.prototype.sqrt=function(){return new Gr(this.q,this.x.sqrt().mod(this.q))};function Qt(e,t,r,n){this.curve=e,this.x=t,this.y=r,n==null?this.z=ae.ONE:this.z=n,this.zinv=null}function a_(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function u_(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function o_(e){if(e==this)return!0;if(this.isInfinity())return e.isInfinity();if(e.isInfinity())return this.isInfinity();var t,r;return t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),t.equals(ae.ZERO)?(r=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q),r.equals(ae.ZERO)):!1}function c_(){return this.x==null&&this.y==null?!0:this.z.equals(ae.ZERO)&&!this.y.toBigInteger().equals(ae.ZERO)}function l_(){return new Qt(this.curve,this.x,this.y.negate(),this.z)}function f_(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),r=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q);if(ae.ZERO.equals(r))return ae.ZERO.equals(t)?this.twice():this.curve.getInfinity();var n=new ae("3"),a=this.x.toBigInteger(),u=this.y.toBigInteger(),i=e.x.toBigInteger(),c=e.y.toBigInteger(),l=r.square(),m=l.multiply(r),E=a.multiply(l),b=t.square().multiply(this.z),v=b.subtract(E.shiftLeft(1)).multiply(e.z).subtract(m).multiply(r).mod(this.curve.q),g=E.multiply(n).multiply(t).subtract(u.multiply(m)).subtract(b.multiply(t)).multiply(e.z).add(t.multiply(m)).mod(this.curve.q),A=m.multiply(this.z).multiply(e.z).mod(this.curve.q);return new Qt(this.curve,this.curve.fromBigInteger(v),this.curve.fromBigInteger(g),A)}function h_(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var e=new ae("3"),t=this.x.toBigInteger(),r=this.y.toBigInteger(),n=r.multiply(this.z),a=n.multiply(r).mod(this.curve.q),u=this.curve.a.toBigInteger(),i=t.square().multiply(e);ae.ZERO.equals(u)||(i=i.add(this.z.square().multiply(u))),i=i.mod(this.curve.q);var c=i.square().subtract(t.shiftLeft(3).multiply(a)).shiftLeft(1).multiply(n).mod(this.curve.q),l=i.multiply(e).multiply(t).subtract(a.shiftLeft(1)).shiftLeft(2).multiply(a).subtract(i.square().multiply(i)).mod(this.curve.q),m=n.square().multiply(n).shiftLeft(3).mod(this.curve.q);return new Qt(this.curve,this.curve.fromBigInteger(c),this.curve.fromBigInteger(l),m)}function p_(e){if(this.isInfinity())return this;if(e.signum()==0)return this.curve.getInfinity();var t=e,r=t.multiply(new ae("3")),n=this.negate(),a=this,u=this.curve.q.subtract(e),i=u.multiply(new ae("3")),c=new Qt(this.curve,this.x,this.y),l=c.negate(),m;for(m=r.bitLength()-2;m>0;--m){a=a.twice();var E=r.testBit(m),b=t.testBit(m);E!=b&&(a=a.add(E?this:n))}for(m=i.bitLength()-2;m>0;--m){c=c.twice();var v=i.testBit(m),g=u.testBit(m);v!=g&&(c=c.add(v?c:l))}return a}function d_(e,t,r){var n;e.bitLength()>r.bitLength()?n=e.bitLength()-1:n=r.bitLength()-1;for(var a=this.curve.getInfinity(),u=this.add(t);n>=0;)a=a.twice(),e.testBit(n)?r.testBit(n)?a=a.add(u):a=a.add(this):r.testBit(n)&&(a=a.add(t)),--n;return a}Qt.prototype.getX=a_;Qt.prototype.getY=u_;Qt.prototype.equals=o_;Qt.prototype.isInfinity=c_;Qt.prototype.negate=l_;Qt.prototype.add=f_;Qt.prototype.twice=h_;Qt.prototype.multiply=p_;Qt.prototype.multiplyTwo=d_;function ns(e,t,r){this.q=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(r),this.infinity=new Qt(this,null,null)}function g_(){return this.q}function v_(){return this.a}function m_(){return this.b}function w_(e){return e==this?!0:this.q.equals(e.q)&&this.a.equals(e.a)&&this.b.equals(e.b)}function b_(){return this.infinity}function E_(e){return new Gr(this.q,e)}function A_(e){switch(parseInt(e.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:var t=e.substr(0,2),r=e.substr(2),n=this.fromBigInteger(new ae(m,16)),a=this.getA(),u=this.getB(),i=n.square().add(a).multiply(n).add(u),c=i.sqrt();return t=="03"&&(c=c.negate()),new Qt(this,n,c);case 4:case 6:case 7:var l=(e.length-2)/2,m=e.substr(2,l),E=e.substr(l+2,l);return new Qt(this,this.fromBigInteger(new ae(m,16)),this.fromBigInteger(new ae(E,16)));default:return null}}ns.prototype.getQ=g_;ns.prototype.getA=v_;ns.prototype.getB=m_;ns.prototype.equals=w_;ns.prototype.getInfinity=b_;ns.prototype.fromBigInteger=E_;ns.prototype.decodePointHex=A_;Gr.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)};Qt.prototype.getEncoded=function(e){var t=function(u,i){var c=u.toByteArrayUnsigned();if(i<c.length)c=c.slice(c.length-i);else for(;i>c.length;)c.unshift(0);return c},r=this.getX().toBigInteger(),n=this.getY().toBigInteger(),a=t(r,32);return e?n.isEven()?a.unshift(2):a.unshift(3):(a.unshift(4),a=a.concat(t(n,32))),a};Qt.decodeFrom=function(e,t){var r=t[0],n=t.length-1,a=t.slice(1,1+n/2),u=t.slice(1+n/2,1+n);a.unshift(0),u.unshift(0);var i=new ae(a),c=new ae(u);return new Qt(e,e.fromBigInteger(i),e.fromBigInteger(c))};Qt.decodeFromHex=function(e,t){var r=t.substr(0,2),n=t.length-2,a=t.substr(2,n/2),u=t.substr(2+n/2,n/2),i=new ae(a,16),c=new ae(u,16);return new Qt(e,e.fromBigInteger(i),e.fromBigInteger(c))};Qt.prototype.add2D=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;if(this.x.equals(e.x))return this.y.equals(e.y)?this.twice():this.curve.getInfinity();var t=e.x.subtract(this.x),r=e.y.subtract(this.y),n=r.divide(t),a=n.square().subtract(this.x).subtract(e.x),u=n.multiply(this.x.subtract(a)).subtract(this.y);return new Qt(this.curve,a,u)};Qt.prototype.twice2D=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var e=this.curve.fromBigInteger(ae.valueOf(2)),t=this.curve.fromBigInteger(ae.valueOf(3)),r=this.x.square().multiply(t).add(this.curve.a).divide(this.y.multiply(e)),n=r.square().subtract(this.x.multiply(e)),a=r.multiply(this.x.subtract(n)).subtract(this.y);return new Qt(this.curve,n,a)};Qt.prototype.multiply2D=function(e){if(this.isInfinity())return this;if(e.signum()==0)return this.curve.getInfinity();var t=e,r=t.multiply(new ae("3")),n=this.negate(),a=this,u;for(u=r.bitLength()-2;u>0;--u){a=a.twice();var i=r.testBit(u),c=t.testBit(u);i!=c&&(a=a.add2D(i?this:n))}return a};Qt.prototype.isOnCurve=function(){var e=this.getX().toBigInteger(),t=this.getY().toBigInteger(),r=this.curve.getA().toBigInteger(),n=this.curve.getB().toBigInteger(),a=this.curve.getQ(),u=t.multiply(t).mod(a),i=e.multiply(e).multiply(e).add(r.multiply(e)).add(n).mod(a);return u.equals(i)};Qt.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"};Qt.prototype.validate=function(){var e=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var t=this.getX().toBigInteger(),r=this.getY().toBigInteger();if(t.compareTo(ae.ONE)<0||t.compareTo(e.subtract(ae.ONE))>0)throw new Error("x coordinate out of bounds");if(r.compareTo(ae.ONE)<0||r.compareTo(e.subtract(ae.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(e).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var t1=(function(){var e="(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)",t='(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))',r='(?:"'+t+'*")',n=new RegExp("(?:false|true|null|[\\{\\}\\[\\]]|"+e+"|"+r+")","g"),a=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),u={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function i(b,v,g){return v?u[v]:String.fromCharCode(parseInt(g,16))}var c=new String(""),l="\\",m={"{":Object,"[":Array},E=Object.hasOwnProperty;return function(b,v){var g=b.match(n),A,w=g[0],S=!1;w==="{"?A={}:w==="["?A=[]:(A=[],S=!0);for(var y,C=[A],x=1-S,N=g.length;x<N;++x){w=g[x];var L;switch(w.charCodeAt(0)){default:L=C[0],L[y||L.length]=+w,y=void 0;break;case 34:if(w=w.substring(1,w.length-1),w.indexOf(l)!==-1&&(w=w.replace(a,i)),L=C[0],!y)if(L instanceof Array)y=L.length;else{y=w||c;break}L[y]=w,y=void 0;break;case 91:L=C[0],C.unshift(L[y||L.length]=[]),y=void 0;break;case 93:C.shift();break;case 102:L=C[0],L[y||L.length]=!1,y=void 0;break;case 110:L=C[0],L[y||L.length]=null,y=void 0;break;case 116:L=C[0],L[y||L.length]=!0,y=void 0;break;case 123:L=C[0],C.unshift(L[y||L.length]={}),y=void 0;break;case 125:C.shift();break}}if(S){if(C.length!==1)throw new Error;A=A[0]}else if(C.length)throw new Error;if(v){var ne=function(pe,I){var B=pe[I];if(B&&typeof B=="object"){var j=null;for(var R in B)if(E.call(B,R)&&B!==pe){var M=ne(B,R);M!==void 0?B[R]=M:(j||(j=[]),j.push(R))}if(j)for(var Q=j.length;--Q>=0;)delete B[j[Q]]}return v.call(pe,I,B)};A=ne({"":A},"")}return A}})();(typeof p>"u"||!p)&&(p={});(typeof p.asn1>"u"||!p.asn1)&&(p.asn1={});p.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t},this.bigIntToMinTwosComplementsHex=function(e){return Wu(e)},this.getPEMStringFromHex=function(e,t){return cn(e,t)},this.newObject=function(e){var t=p,r=t.asn1,n=r.ASN1Object,a=r.DERBoolean,u=r.DERInteger,i=r.DERBitString,c=r.DEROctetString,l=r.DERNull,m=r.DERObjectIdentifier,E=r.DEREnumerated,b=r.DERUTF8String,v=r.DERNumericString,g=r.DERPrintableString,A=r.DERTeletexString,w=r.DERIA5String,S=r.DERUTCTime,y=r.DERGeneralizedTime,C=r.DERVisibleString,x=r.DERBMPString,N=r.DERSequence,L=r.DERSet,ne=r.DERTaggedObject,pe=r.ASN1Util.newObject;if(e instanceof r.ASN1Object)return e;var I=Object.keys(e);if(I.length!=1)throw new Error("key of param shall be only one.");var B=I[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+B+":")==-1)throw new Error("undefined key: "+B);if(B=="bool")return new a(e[B]);if(B=="int")return new u(e[B]);if(B=="bitstr")return new i(e[B]);if(B=="octstr")return new c(e[B]);if(B=="null")return new l(e[B]);if(B=="oid")return new m(e[B]);if(B=="enum")return new E(e[B]);if(B=="utf8str")return new b(e[B]);if(B=="numstr")return new v(e[B]);if(B=="prnstr")return new g(e[B]);if(B=="telstr")return new A(e[B]);if(B=="ia5str")return new w(e[B]);if(B=="utctime")return new S(e[B]);if(B=="gentime")return new y(e[B]);if(B=="visstr")return new C(e[B]);if(B=="bmpstr")return new x(e[B]);if(B=="asn1")return new n(e[B]);if(B=="seq"){for(var j=e[B],R=[],M=0;M<j.length;M++){var Q=pe(j[M]);R.push(Q)}return new N({array:R})}if(B=="set"){for(var j=e[B],R=[],M=0;M<j.length;M++){var Q=pe(j[M]);R.push(Q)}return new L({array:R})}if(B=="tag"){var V=e[B];if(Object.prototype.toString.call(V)==="[object Array]"&&V.length==3){var z=pe(V[2]);return new ne({tag:V[0],explicit:V[1],obj:z})}else return new ne(V)}},this.jsonToASN1HEX=function(e){var t=this.newObject(e);return t.tohex()}};p.asn1.ASN1Util.oidHexToInt=function(e){for(var a="",t=parseInt(e.substr(0,2),16),r=Math.floor(t/40),n=t%40,a=r+"."+n,u="",i=2;i<e.length;i+=2){var c=parseInt(e.substr(i,2),16),l=("00000000"+c.toString(2)).slice(-8);if(u=u+l.substr(1,7),l.substr(0,1)=="0"){var m=new ae(u,2);a=a+"."+m.toString(10),u=""}}return a};p.asn1.ASN1Util.oidIntToHex=function(e){var t=function(c){var l=c.toString(16);return l.length==1&&(l="0"+l),l},r=function(c){var l="",m=new ae(c,10),E=m.toString(2),b=7-E.length%7;b==7&&(b=0);for(var v="",g=0;g<b;g++)v+="0";E=v+E;for(var g=0;g<E.length-1;g+=7){var A=E.substr(g,7);g!=E.length-7&&(A="1"+A),l+=t(parseInt(A,2))}return l};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var n="",a=e.split("."),u=parseInt(a[0])*40+parseInt(a[1]);n+=t(u),a.splice(0,2);for(var i=0;i<a.length;i++)n+=r(a[i]);return n};p.asn1.ASN1Object=function(e){var t=!0,r=null,n="00",a="00",u="";this.params=null,this.getLengthHexFromValue=function(){if(typeof this.hV>"u"||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+u.length+",v="+this.hV);var i=this.hV.length/2,c=i.toString(16);if(c.length%2==1&&(c="0"+c),i<128)return c;var l=c.length/2;if(l>15)throw new Error("ASN.1 length too long to represent by 8x: n = "+i.toString(16));var m=128+l;return m.toString(16)+c},this.tohex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.getValueHex=function(){return this.tohex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(i){this.params=i},e!=null&&e.tlv!=null&&(this.hTLV=e.tlv,this.isModified=!1)};p.asn1.DERAbstractString=function(e){p.asn1.DERAbstractString.superclass.constructor.call(this);var t=null,r=null;this.getString=function(){return this.s},this.setString=function(n){this.hTLV=null,this.isModified=!0,this.s=n,this.hV=Bc(this.s).toLowerCase()},this.setStringHex=function(n){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=n},this.getFreshValueHex=function(){return this.hV},typeof e<"u"&&(typeof e=="string"?this.setString(e):typeof e.str<"u"?this.setString(e.str):typeof e.hex<"u"&&this.setStringHex(e.hex))};Ce(p.asn1.DERAbstractString,p.asn1.ASN1Object);p.asn1.DERAbstractTime=function(e){p.asn1.DERAbstractTime.superclass.constructor.call(this);var t=null,r=null;this.localDateToUTC=function(n){var a=n.getTime()+n.getTimezoneOffset()*6e4,u=new Date(a);return u},this.formatDate=function(n,a,u){var i=this.zeroPadding,c=this.localDateToUTC(n),l=String(c.getFullYear());a=="utc"&&(l=l.substr(2,2));var m=i(String(c.getMonth()+1),2),E=i(String(c.getDate()),2),b=i(String(c.getHours()),2),v=i(String(c.getMinutes()),2),g=i(String(c.getSeconds()),2),A=l+m+E+b+v+g;if(u===!0){var w=c.getMilliseconds();if(w!=0){var S=i(String(w),3);S=S.replace(/[0]+$/,""),A=A+"."+S}}return A+"Z"},this.zeroPadding=function(n,a){return n.length>=a?n:new Array(a-n.length+1).join("0")+n},this.setByParam=function(n){this.hV=null,this.hTLV=null,this.params=n},this.getString=function(){},this.setString=function(n){this.hTLV=null,this.isModified=!0,this.params==null&&(this.params={}),this.params.str=n},this.setByDate=function(n){this.hTLV=null,this.isModified=!0,this.params==null&&(this.params={}),this.params.date=n},this.setByDateValue=function(n,a,u,i,c,l){var m=new Date(Date.UTC(n,a-1,u,i,c,l,0));this.setByDate(m)},this.getFreshValueHex=function(){return this.hV}};Ce(p.asn1.DERAbstractTime,p.asn1.ASN1Object);p.asn1.DERAbstractStructured=function(e){p.asn1.DERAbstractString.superclass.constructor.call(this);var t=null;this.setByASN1ObjectArray=function(r){this.hTLV=null,this.isModified=!0,this.asn1Array=r},this.appendASN1Object=function(r){this.hTLV=null,this.isModified=!0,this.asn1Array.push(r)},this.asn1Array=new Array,typeof e<"u"&&typeof e.array<"u"&&(this.asn1Array=e.array)};Ce(p.asn1.DERAbstractStructured,p.asn1.ASN1Object);p.asn1.DERBoolean=function(e){p.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",e==!1?this.hTLV="010100":this.hTLV="0101ff"};Ce(p.asn1.DERBoolean,p.asn1.ASN1Object);p.asn1.DERInteger=function(e){p.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.params=null;var t=Wu;this.setByBigInteger=function(r){this.isModified=!0,this.params={bigint:r}},this.setByInteger=function(r){this.isModified=!0,this.params=r},this.setValueHex=function(r){this.isModified=!0,this.params={hex:r}},this.getFreshValueHex=function(){var r=this.params,n=null;if(r==null)throw new Error("value not set");if(typeof r=="object"&&r.hex!=null)return this.hV=r.hex,this.hV;if(typeof r=="number")n=new ae(String(r),10);else if(r.int!=null)n=new ae(String(r.int),10);else if(r.bigint!=null)n=r.bigint;else throw new Error("wrong parameter");return this.hV=t(n),this.hV},e!=null&&(this.params=e)};Ce(p.asn1.DERInteger,p.asn1.ASN1Object);p.asn1.DERBitString=function(e){if(e!==void 0&&typeof e.obj<"u"){var t=p.asn1.ASN1Util.newObject(e.obj);e.hex="00"+t.tohex()}p.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(r){this.hTLV=null,this.isModified=!0,this.hV=r},this.setUnusedBitsAndHexValue=function(r,n){if(r<0||7<r)throw"unused bits shall be from 0 to 7: u = "+r;var a="0"+r;this.hTLV=null,this.isModified=!0,this.hV=a+n},this.setByBinaryString=function(r){r=r.replace(/0+$/,"");var n=8-r.length%8;n==8&&(n=0),r+="0000000".substr(0,n);for(var a="",u=0;u<r.length-1;u+=8){var i=r.substr(u,8),c=parseInt(i,2).toString(16);c.length==1&&(c="0"+c),a+=c}this.hTLV=null,this.isModified=!0,this.hV="0"+n+a},this.setByBooleanArray=function(r){for(var n="",a=0;a<r.length;a++)r[a]==!0?n+="1":n+="0";this.setByBinaryString(n)},this.newFalseArray=function(r){for(var n=new Array(r),a=0;a<r;a++)n[a]=!1;return n},this.getFreshValueHex=function(){return this.hV},typeof e<"u"&&(typeof e=="string"&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):typeof e.hex<"u"?this.setHexValueIncludingUnusedBits(e.hex):typeof e.bin<"u"?this.setByBinaryString(e.bin):typeof e.array<"u"&&this.setByBooleanArray(e.array))};Ce(p.asn1.DERBitString,p.asn1.ASN1Object);p.asn1.DEROctetString=function(e){if(e!==void 0&&typeof e.obj<"u"){var t=p.asn1.ASN1Util.newObject(e.obj);e.hex=t.tohex()}p.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"};Ce(p.asn1.DEROctetString,p.asn1.DERAbstractString);p.asn1.DERNull=function(){p.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"};Ce(p.asn1.DERNull,p.asn1.ASN1Object);p.asn1.DERObjectIdentifier=function(e){p.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueOidString=function(t){var r=o1(t);if(r==null)throw new Error("malformed oid string: "+t);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=r},this.setValueName=function(t){var r=p.asn1.x509.OID.name2oid(t);if(r!=="")this.setValueOidString(r);else throw new Error("DERObjectIdentifier oidName undefined: "+t)},this.setValueNameOrOid=function(t){t.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(t):this.setValueName(t)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(t){typeof t=="string"?this.setValueNameOrOid(t):t.oid!==void 0?this.setValueNameOrOid(t.oid):t.name!==void 0?this.setValueNameOrOid(t.name):t.hex!==void 0&&this.setValueHex(t.hex)},e!==void 0&&this.setByParam(e)};Ce(p.asn1.DERObjectIdentifier,p.asn1.ASN1Object);p.asn1.DEREnumerated=function(e){p.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=Wu(t)},this.setByInteger=function(t){var r=new ae(String(t),10);this.setByBigInteger(r)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},typeof e<"u"&&(typeof e.int<"u"?this.setByInteger(e.int):typeof e=="number"?this.setByInteger(e):typeof e.hex<"u"&&this.setValueHex(e.hex))};Ce(p.asn1.DEREnumerated,p.asn1.ASN1Object);p.asn1.DERUTF8String=function(e){p.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"};Ce(p.asn1.DERUTF8String,p.asn1.DERAbstractString);p.asn1.DERNumericString=function(e){p.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"};Ce(p.asn1.DERNumericString,p.asn1.DERAbstractString);p.asn1.DERPrintableString=function(e){p.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"};Ce(p.asn1.DERPrintableString,p.asn1.DERAbstractString);p.asn1.DERTeletexString=function(e){p.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"};Ce(p.asn1.DERTeletexString,p.asn1.DERAbstractString);p.asn1.DERIA5String=function(e){p.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"};Ce(p.asn1.DERIA5String,p.asn1.DERAbstractString);p.asn1.DERVisibleString=function(e){p.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="1a"};Ce(p.asn1.DERVisibleString,p.asn1.DERAbstractString);p.asn1.DERBMPString=function(e){p.asn1.DERBMPString.superclass.constructor.call(this,e),this.hT="1e"};Ce(p.asn1.DERBMPString,p.asn1.DERAbstractString);p.asn1.DERUTCTime=function(e){p.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.params=void 0,this.getFreshValueHex=function(){var t=this.params;if(this.params==null&&(t={date:new Date}),typeof t=="string")if(t.match(/^[0-9]{12}Z$/)||t.match(/^[0-9]{12}\.[0-9]+Z$/))this.hV=$n(t);else throw new Error("malformed string for UTCTime: "+t);else if(t.str!=null)this.hV=$n(t.str);else if(t.date==null&&t.millis==!0){var r=new Date;this.hV=$n(this.formatDate(r,"utc",!0))}else if(t.date!=null&&t.date instanceof Date){var n=t.millis===!0;this.hV=$n(this.formatDate(t.date,"utc",n))}else t instanceof Date&&(this.hV=$n(this.formatDate(t,"utc")));if(this.hV==null)throw new Error("parameter not specified properly for UTCTime");return this.hV},e!=null&&this.setByParam(e)};Ce(p.asn1.DERUTCTime,p.asn1.DERAbstractTime);p.asn1.DERGeneralizedTime=function(e){p.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.params=e,this.getFreshValueHex=function(){var t=this.params;if(this.params==null&&(t={date:new Date}),typeof t=="string")if(t.match(/^[0-9]{14}Z$/)||t.match(/^[0-9]{14}\.[0-9]+Z$/))this.hV=$n(t);else throw new Error("malformed string for GeneralizedTime: "+t);else if(t.str!=null)this.hV=$n(t.str);else if(t.date==null&&t.millis==!0){var r=new Date;this.hV=$n(this.formatDate(r,"gen",!0))}else if(t.date!=null&&t.date instanceof Date){var n=t.millis===!0;this.hV=$n(this.formatDate(t.date,"gen",n))}else t instanceof Date&&(this.hV=$n(this.formatDate(t,"gen")));if(this.hV==null)throw new Error("parameter not specified properly for GeneralizedTime");return this.hV},e!=null&&this.setByParam(e)};Ce(p.asn1.DERGeneralizedTime,p.asn1.DERAbstractTime);p.asn1.DERSequence=function(e){p.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var t="",r=0;r<this.asn1Array.length;r++){var n=this.asn1Array[r];t+=n.tohex()}return this.hV=t,this.hV}};Ce(p.asn1.DERSequence,p.asn1.DERAbstractStructured);p.asn1.DERSet=function(e){p.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var t=new Array,r=0;r<this.asn1Array.length;r++){var n=this.asn1Array[r];t.push(n.tohex())}return this.sortFlag==!0&&t.sort(),this.hV=t.join(""),this.hV},typeof e<"u"&&typeof e.sortflag<"u"&&e.sortflag==!1&&(this.sortFlag=!1)};Ce(p.asn1.DERSet,p.asn1.DERAbstractStructured);p.asn1.DERTaggedObject=function(e){p.asn1.DERTaggedObject.superclass.constructor.call(this);var t=p.asn1,r=Ue,n=r.getV,a=r.isASN1HEX,u=t.ASN1Util.newObject;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.params={tag:"a0",explicit:!0},this.setASN1Object=function(i,c,l){this.params={tag:c,explicit:i,obj:l}},this.getFreshValueHex=function(){var i=this.params;if(i.explicit==null&&(i.explicit=!0),i.tage!=null&&(i.tag=i.tage,i.explicit=!0),i.tagi!=null&&(i.tag=i.tagi,i.explicit=!1),i.str!=null)this.hV=Bc(i.str);else if(i.hex!=null)this.hV=i.hex;else if(i.obj!=null){var c;i.obj instanceof t.ASN1Object?c=i.obj.tohex():typeof i.obj=="object"&&(c=u(i.obj).tohex()),i.explicit?this.hV=c:this.hV=n(c,0)}else throw new Error("str, hex nor obj not specified");return i.tag==null&&(i.tag="a0"),this.hT=i.tag,this.hTLV=null,this.isModified=!0,this.hV},this.setByParam=function(i){this.params=i},e!==void 0&&this.setByParam(e)};Ce(p.asn1.DERTaggedObject,p.asn1.ASN1Object);var Ue=new function(){};Ue.getLblen=function(e,t){if(e.substr(t+2,1)!="8")return 1;var r=parseInt(e.substr(t+3,1));return r==0?-1:0<r&&r<10?r+1:-2};Ue.getL=function(e,t){var r=Ue.getLblen(e,t);return r<1?"":e.substr(t+2,r*2)};Ue.getVblen=function(e,t){var r,n;return r=Ue.getL(e,t),r==""?-1:(r.substr(0,1)==="8"?n=new ae(r.substr(2),16):n=new ae(r,16),n.intValue())};Ue.getVidx=function(e,t){var r=Ue.getLblen(e,t);return r<0?r:t+(r+1)*2};Ue.getV=function(e,t){var r=Ue.getVidx(e,t),n=Ue.getVblen(e,t);return e.substr(r,n*2)};Ue.getTLV=function(e,t){return e.substr(t,2)+Ue.getL(e,t)+Ue.getV(e,t)};Ue.getTLVblen=function(e,t){return 2+Ue.getLblen(e,t)*2+Ue.getVblen(e,t)*2};Ue.getNextSiblingIdx=function(e,t){var r=Ue.getVidx(e,t),n=Ue.getVblen(e,t);return r+n*2};Ue.getChildIdx=function(e,t){var r=Ue,n=[],a,u,i;a=r.getVidx(e,t),u=r.getVblen(e,t)*2,e.substr(t,2)=="03"&&(a+=2,u-=2),i=0;for(var c=a;i<=u;){var l=r.getTLVblen(e,c);if(i+=l,i<=u&&n.push(c),c+=l,i>=u)break}return n};Ue.getNthChildIdx=function(e,t,r){var n=Ue.getChildIdx(e,t);return n[r]};Ue.getIdxbyList=function(e,t,r,n){var a=Ue,u,i;return r.length==0?n!==void 0&&e.substr(t,2)!==n?-1:t:(u=r.shift(),i=a.getChildIdx(e,t),u>=i.length?-1:a.getIdxbyList(e,i[u],r,n))};Ue.getIdxbyListEx=function(e,t,r,n){var a=Ue,u,i;if(r.length==0)return n!==void 0&&e.substr(t,2)!==n?-1:t;u=r.shift(),i=a.getChildIdx(e,t);for(var c=0,l=0;l<i.length;l++){var m=e.substr(i[l],2);if(typeof u=="number"&&!a.isContextTag(m)&&c==u||typeof u=="string"&&a.isContextTag(m,u))return a.getIdxbyListEx(e,i[l],r,n);a.isContextTag(m)||c++}return-1};Ue.getTLVbyList=function(e,t,r,n){var a=Ue,u=a.getIdxbyList(e,t,r,n);return u==-1||u>=e.length?null:a.getTLV(e,u)};Ue.getTLVbyListEx=function(e,t,r,n){var a=Ue,u=a.getIdxbyListEx(e,t,r,n);return u==-1?null:a.getTLV(e,u)};Ue.getVbyList=function(e,t,r,n,a){var u=Ue,i,c;return i=u.getIdxbyList(e,t,r,n),i==-1||i>=e.length?null:(c=u.getV(e,i),a===!0&&(c=c.substr(2)),c)};Ue.getVbyListEx=function(e,t,r,n,a){var u=Ue,i,c,l;return i=u.getIdxbyListEx(e,t,r,n),i==-1?null:(l=u.getV(e,i),e.substr(i,2)=="03"&&a!==!1&&(l=l.substr(2)),l)};Ue.getInt=function(e,t,r){r==null&&(r=-1);try{var n=e.substr(t,2);if(n!="02"&&n!="03")return r;var a=Ue.getV(e,t);return n=="02"?parseInt(a,16):l1(a)}catch{return r}};Ue.getOID=function(e,t,r){r==null&&(r=null);try{if(e.substr(t,2)!="06")return r;var n=Ue.getV(e,t);return Tc(n)}catch{return r}};Ue.getOIDName=function(e,t,r){r==null&&(r=null);try{var n=Ue.getOID(e,t,r);if(n==r)return r;var a=p.asn1.x509.OID.oid2name(n);return a==""?n:a}catch{return r}};Ue.getString=function(e,t,r){r==null&&(r=null);try{var n=Ue.getV(e,t);return Rn(n)}catch{return r}};Ue.hextooidstr=function(e){var t=function(b,v){return b.length>=v?b:new Array(v-b.length+1).join("0")+b},r=[],n=e.substr(0,2),a=parseInt(n,16);r[0]=new String(Math.floor(a/40)),r[1]=new String(a%40);for(var u=e.substr(2),i=[],c=0;c<u.length/2;c++)i.push(parseInt(u.substr(c*2,2),16));for(var l=[],m="",c=0;c<i.length;c++)i[c]&128?m=m+t((i[c]&127).toString(2),7):(m=m+t((i[c]&127).toString(2),7),l.push(new String(parseInt(m,2))),m="");var E=r.join(".");return l.length>0&&(E=E+"."+l.join(".")),E};Ue.dump=function(e,t,r,n){var a=Ue,u=a.getV,i=a.dump,c=a.getChildIdx,l=e;e instanceof p.asn1.ASN1Object&&(l=e.tohex());var m=function(pe,I){if(pe.length<=I*2)return pe;var B=pe.substr(0,I)+"..(total "+pe.length/2+"bytes).."+pe.substr(pe.length-I,I);return B};t===void 0&&(t={ommit_long_octet:32}),r===void 0&&(r=0),n===void 0&&(n="");var E=t.ommit_long_octet,L=l.substr(r,2);if(L=="01"){var b=u(l,r);return b=="00"?n+`BOOLEAN FALSE
`:n+`BOOLEAN TRUE
`}if(L=="02"){var b=u(l,r);return n+"INTEGER "+m(b,E)+`
`}if(L=="03"){var b=u(l,r);if(a.isASN1HEX(b.substr(2))){var v=n+`BITSTRING, encapsulates
`;return v=v+i(b.substr(2),t,0,n+"  "),v}else return n+"BITSTRING "+m(b,E)+`
`}if(L=="04"){var b=u(l,r);if(a.isASN1HEX(b)){var v=n+`OCTETSTRING, encapsulates
`;return v=v+i(b,t,0,n+"  "),v}else return n+"OCTETSTRING "+m(b,E)+`
`}if(L=="05")return n+`NULL
`;if(L=="06"){var g=u(l,r),A=p.asn1.ASN1Util.oidHexToInt(g),w=p.asn1.x509.OID.oid2name(A),S=A.replace(/\./g," ");return w!=""?n+"ObjectIdentifier "+w+" ("+S+`)
`:n+"ObjectIdentifier ("+S+`)
`}if(L=="0a")return n+"ENUMERATED "+parseInt(u(l,r))+`
`;if(L=="0c")return n+"UTF8String '"+nr(u(l,r))+`'
`;if(L=="13")return n+"PrintableString '"+nr(u(l,r))+`'
`;if(L=="14")return n+"TeletexString '"+nr(u(l,r))+`'
`;if(L=="16")return n+"IA5String '"+nr(u(l,r))+`'
`;if(L=="17")return n+"UTCTime "+nr(u(l,r))+`
`;if(L=="18")return n+"GeneralizedTime "+nr(u(l,r))+`
`;if(L=="1a")return n+"VisualString '"+nr(u(l,r))+`'
`;if(L=="1e")return n+"BMPString '"+Vh(u(l,r))+`'
`;if(L=="30"){if(l.substr(r,4)=="3000")return n+`SEQUENCE {}
`;var v=n+`SEQUENCE
`,y=c(l,r),C=t;if((y.length==2||y.length==3)&&l.substr(y[0],2)=="06"&&l.substr(y[y.length-1],2)=="04"){var w=a.oidname(u(l,y[0])),x=JSON.parse(JSON.stringify(t));x.x509ExtName=w,C=x}for(var N=0;N<y.length;N++)v=v+i(l,C,y[N],n+"  ");return v}if(L=="31"){for(var v=n+`SET
`,y=c(l,r),N=0;N<y.length;N++)v=v+i(l,t,y[N],n+"  ");return v}var L=parseInt(L,16);if((L&128)!=0){var ne=L&31;if((L&32)!=0){for(var v=n+"["+ne+`]
`,y=c(l,r),N=0;N<y.length;N++)v=v+i(l,t,y[N],n+"  ");return v}else{var b=u(l,r);if(Ue.isASN1HEX(b)){var v=n+"["+ne+`]
`;return v=v+i(b,t,0,n+"  "),v}else(b.substr(0,8)=="68747470"||t.x509ExtName==="subjectAltName"&&ne==2)&&(b=nr(b));var v=n+"["+ne+"] "+b+`
`;return v}}return n+"UNKNOWN("+L+") "+u(l,r)+`
`};Ue.parse=function(e){var t=Ue,r=t.parse,n=t.isASN1HEX,a=t.getV,u=t.getTLV,i=t.getChildIdx,c=p.asn1,l=c.ASN1Util.oidHexToInt,m=c.x509.OID.oid2name,E=nr,b=Vh,v=C_,g={"0c":"utf8str",12:"numstr",13:"prnstr",14:"telstr",16:"ia5str",17:"utctime",18:"gentime","1a":"visstr","1e":"bmpstr",30:"seq",31:"set"},A=function(B){for(var j=[],R=i(B,0),M=0;M<R.length;M++){var Q=R[M],V=u(B,Q),z=r(V);j.push(z)}return j},w=e.substr(0,2),S={},y=a(e,0);if(w=="01")return e=="0101ff"?{bool:!0}:{bool:!1};if(w=="02")return{int:{hex:y}};if(w=="03")try{if(y.substr(0,2)!="00")throw"not encap";var C=y.substr(2);if(!n(C))throw"not encap";return{bitstr:{obj:r(C)}}}catch{var x=null;return y.length<=10&&(x=h1(y)),x==null?{bitstr:{hex:y}}:{bitstr:{bin:x}}}else if(w=="04")try{if(!n(y))throw"not encap";return{octstr:{obj:r(y)}}}catch{return{octstr:{hex:y}}}else{if(w=="05")return{null:""};if(w=="06"){var N=l(y),L=m(N);return L==""?{oid:N}:{oid:L}}else{if(w=="0a")return y.length>4?{enum:{hex:y}}:{enum:parseInt(y,16)};if(w=="30"||w=="31")return S[g[w]]=A(e),S;if(w=="14"){var ne=v(y);return S[g[w]]={str:ne},S}else if(w=="1e"){var ne=b(y);return S[g[w]]={str:ne},S}else if(":0c:12:13:16:17:18:1a:".indexOf(w)!=-1){var ne=E(y);return S[g[w]]={str:ne},S}else if(w.match(/^8[0-9]$/)){var ne=E(y);return ne==null|ne==""?{tag:{tag:w,explicit:!1,hex:y}}:ne.match(/[\x00-\x1F\x7F-\x9F]/)!=null||ne.match(/[\u0000-\u001F\u0080–\u009F]/)!=null?{tag:{tag:w,explicit:!1,hex:y}}:{tag:{tag:w,explicit:!1,str:ne}}}else if(w.match(/^a[0-9]$/))try{if(!n(y))throw new Error("not encap");return{tag:{tag:w,explicit:!0,obj:r(y)}}}catch{return{tag:{tag:w,explicit:!0,hex:y}}}else{var pe=new p.asn1.ASN1Object;pe.hV=y;var I=pe.getLengthHexFromValue();return{asn1:{tlv:w+I+y}}}}}};Ue.isContextTag=function(e,t){e=e.toLowerCase();var r,n;try{r=parseInt(e,16)}catch{return-1}if(t===void 0)return(r&192)==128;try{var a=t.match(/^\[[0-9]+\]$/);return a==null||(n=parseInt(t.substr(1,t.length-1),10),n>31)?!1:(r&192)==128&&(r&31)==n}catch{return!1}};Ue.isASN1HEX=function(e){var t=Ue;if(e.length%2==1)return!1;var r=t.getVblen(e,0),n=e.substr(0,2),a=t.getL(e,0),u=e.length-n.length-a.length;return u==r*2};Ue.checkStrictDER=function(e,t,r,n,a){var u=Ue;if(r===void 0){if(typeof e!="string")throw new Error("not hex string");if(e=e.toLowerCase(),!p.lang.String.isHex(e))throw new Error("not hex string");r=e.length,n=e.length/2,n<128?a=1:a=Math.ceil(n.toString(16))+1}var i=u.getL(e,t);if(i.length>a*2)throw new Error("L of TLV too long: idx="+t);var c=u.getVblen(e,t);if(c>n)throw new Error("value of L too long than hex: idx="+t);var l=u.getTLV(e,t),m=l.length-2-u.getL(e,t).length;if(m!==c*2)throw new Error("V string length and L's value not the same:"+m+"/"+c*2);if(t===0&&e.length!=l.length)throw new Error("total length and TLV length unmatch:"+e.length+"!="+l.length);var E=e.substr(t,2);if(E==="02"){var b=u.getVidx(e,t);if(e.substr(b,2)=="00"&&e.charCodeAt(b+2)<56)throw new Error("not least zeros for DER INTEGER")}if(parseInt(E,16)&32){for(var v=u.getVblen(e,t),g=0,A=u.getChildIdx(e,t),w=0;w<A.length;w++){var S=u.getTLV(e,A[w]);g+=S.length,u.checkStrictDER(e,A[w],r,n,a)}if(v*2!=g)throw new Error("sum of children's TLV length and L unmatch: "+v*2+"!="+g)}};Ue.oidname=function(e){var t=p.asn1;p.lang.String.isHex(e)&&(e=t.ASN1Util.oidHexToInt(e));var r=t.x509.OID.oid2name(e);return r===""&&(r=e),r};(typeof p>"u"||!p)&&(p={});(typeof p.asn1>"u"||!p.asn1)&&(p.asn1={});(typeof p.asn1.x509>"u"||!p.asn1.x509)&&(p.asn1.x509={});p.asn1.x509.Certificate=function(e){p.asn1.x509.Certificate.superclass.constructor.call(this);var t=p,r=t.asn1,n=r.DERBitString,a=r.DERSequence,u=r.x509,i=u.TBSCertificate,c=u.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(l){this.params=l},this.sign=function(){var l=this.params,m=l.sigalg;l.sigalg.name!=null&&(m=l.sigalg.name);var E=l.tbsobj.tohex(),b=new p.crypto.Signature({alg:m});b.init(l.cakey),b.updateHex(E),l.sighex=b.sign()},this.getPEM=function(){return cn(this.tohex(),"CERTIFICATE")},this.tohex=function(){var l=this.params;if((l.tbsobj==null||l.tbsobj==null)&&(l.tbsobj=new i(l)),l.sighex==null&&l.cakey!=null&&this.sign(),l.sighex==null)throw new Error("sighex or cakey parameter not defined");var m=[];m.push(l.tbsobj),m.push(new c({name:l.sigalg})),m.push(new n({hex:"00"+l.sighex}));var E=new a({array:m});return E.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&(this.params=e)};Ce(p.asn1.x509.Certificate,p.asn1.ASN1Object);p.asn1.x509.TBSCertificate=function(e){p.asn1.x509.TBSCertificate.superclass.constructor.call(this);var t=p,r=t.asn1,n=r.x509,a=r.DERTaggedObject,u=r.DERInteger,i=r.DERSequence,c=n.AlgorithmIdentifier,l=n.Time,m=n.X500Name,E=n.Extensions,b=n.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(v){this.params=v},this.tohex=function(){var v=[],g=this.params;if(g.version!=null||g.version!=1){var A=2;g.version!=null&&(A=g.version-1);var w=new a({obj:new u({int:A})});v.push(w)}v.push(new u(g.serial)),v.push(new c({name:g.sigalg})),v.push(new m(g.issuer)),v.push(new i({array:[new l(g.notbefore),new l(g.notafter)]})),v.push(new m(g.subject)),v.push(new b(Lt.getKey(g.sbjpubkey))),g.ext!==void 0&&g.ext.length>0&&v.push(new a({tag:"a3",obj:new E(g.ext)}));var S=new p.asn1.DERSequence({array:v});return S.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};Ce(p.asn1.x509.TBSCertificate,p.asn1.ASN1Object);p.asn1.x509.Extensions=function(e){p.asn1.x509.Extensions.superclass.constructor.call(this);var t=p,r=t.asn1,n=r.DERSequence,a=r.x509;this.aParam=[],this.setByParam=function(u){this.aParam=u},this.tohex=function(){for(var u=[],i=0;i<this.aParam.length;i++){var c=this.aParam[i],l=c.extname,m=null;if(c.extn!=null)m=new a.PrivateExtension(c);else if(l=="subjectKeyIdentifier")m=new a.SubjectKeyIdentifier(c);else if(l=="keyUsage")m=new a.KeyUsage(c);else if(l=="subjectAltName")m=new a.SubjectAltName(c);else if(l=="issuerAltName")m=new a.IssuerAltName(c);else if(l=="basicConstraints")m=new a.BasicConstraints(c);else if(l=="nameConstraints")m=new a.NameConstraints(c);else if(l=="cRLDistributionPoints")m=new a.CRLDistributionPoints(c);else if(l=="certificatePolicies")m=new a.CertificatePolicies(c);else if(l=="policyMappings")m=new a.PolicyMappings(c);else if(l=="policyConstraints")m=new a.PolicyConstraints(c);else if(l=="inhibitAnyPolicy")m=new a.InhibitAnyPolicy(c);else if(l=="authorityKeyIdentifier")m=new a.AuthorityKeyIdentifier(c);else if(l=="extKeyUsage")m=new a.ExtKeyUsage(c);else if(l=="authorityInfoAccess")m=new a.AuthorityInfoAccess(c);else if(l=="cRLNumber")m=new a.CRLNumber(c);else if(l=="cRLReason")m=new a.CRLReason(c);else if(l=="ocspNonce")m=new a.OCSPNonce(c);else if(l=="ocspNoCheck")m=new a.OCSPNoCheck(c);else if(l=="adobeTimeStamp")m=new a.AdobeTimeStamp(c);else if(l=="subjectDirectoryAttributes")m=new a.SubjectDirectoryAttributes(c);else throw new Error("extension not supported:"+JSON.stringify(c));m!=null&&u.push(m)}var E=new n({array:u});return E.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Ce(p.asn1.x509.Extensions,p.asn1.ASN1Object);p.asn1.x509.Extension=function(e){p.asn1.x509.Extension.superclass.constructor.call(this);var t=null,r=p,n=r.asn1,a=n.DERObjectIdentifier,u=n.DEROctetString,i=n.DERBitString,c=n.DERBoolean,l=n.DERSequence;this.tohex=function(){var m=new a({oid:this.oid}),E=new u({hex:this.getExtnValueHex()}),b=new Array;b.push(m),this.critical&&b.push(new c),b.push(E);var v=new l({array:b});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},this.critical=!1,e!==void 0&&e.critical!==void 0&&(this.critical=e.critical)};Ce(p.asn1.x509.Extension,p.asn1.ASN1Object);p.asn1.x509.KeyUsage=function(e){p.asn1.x509.KeyUsage.superclass.constructor.call(this,e);var t=Error,r={digitalSignature:0,nonRepudiation:1,keyEncipherment:2,dataEncipherment:3,keyAgreement:4,keyCertSign:5,cRLSign:6,encipherOnly:7,decipherOnly:8};this.getExtnValueHex=function(){var n=this.getBinValue();return this.asn1ExtnValue=new p.asn1.DERBitString({bin:n}),this.asn1ExtnValue.tohex()},this.getBinValue=function(){var n=this.params;if(typeof n!="object"||typeof n.names!="object"&&typeof n.bin!="string")throw new t("parameter not yet set");if(n.names!=null)return Fc(n.names,r);if(n.bin!=null)return n.bin;throw new t("parameter not set properly")},this.oid="2.5.29.15",e!==void 0&&(this.params=e)};Ce(p.asn1.x509.KeyUsage,p.asn1.x509.Extension);p.asn1.x509.BasicConstraints=function(e){p.asn1.x509.BasicConstraints.superclass.constructor.call(this,e);var t=p.asn1,r=t.DERBoolean,n=t.DERInteger,a=t.DERSequence,u=!1,i=-1;this.getExtnValueHex=function(){var c=new Array;this.cA&&c.push(new r),this.pathLen>-1&&c.push(new n({int:this.pathLen}));var l=new a({array:c});return this.asn1ExtnValue=l,this.asn1ExtnValue.tohex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,e!==void 0&&(e.cA!==void 0&&(this.cA=e.cA),e.pathLen!==void 0&&(this.pathLen=e.pathLen))};Ce(p.asn1.x509.BasicConstraints,p.asn1.x509.Extension);p.asn1.x509.CRLDistributionPoints=function(e){p.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,e);var t=p,r=t.asn1,n=r.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.setByDPArray=function(a){for(var u=[],i=0;i<a.length;i++)if(a[i]instanceof p.asn1.ASN1Object)u.push(a[i]);else{var c=new n.DistributionPoint(a[i]);u.push(c)}this.asn1ExtnValue=new r.DERSequence({array:u})},this.setByOneURI=function(a){var u=new n.DistributionPoint({fulluri:a});this.setByDPArray([u])},this.oid="2.5.29.31",e!==void 0&&(e.array!==void 0?this.setByDPArray(e.array):e.uri!==void 0&&this.setByOneURI(e.uri))};Ce(p.asn1.x509.CRLDistributionPoints,p.asn1.x509.Extension);p.asn1.x509.DistributionPoint=function(e){p.asn1.x509.DistributionPoint.superclass.constructor.call(this);var t=null,r=p,n=r.asn1,a=n.x509.DistributionPointName;this.tohex=function(){var u=new n.DERSequence;if(this.asn1DP!=null){var i=new n.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});u.appendASN1Object(i)}return this.hTLV=u.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(e.dpobj!==void 0?this.asn1DP=e.dpobj:e.dpname!==void 0?this.asn1DP=new a(e.dpname):e.fulluri!==void 0&&(this.asn1DP=new a({full:[{uri:e.fulluri}]})))};Ce(p.asn1.x509.DistributionPoint,p.asn1.ASN1Object);p.asn1.x509.DistributionPointName=function(e){p.asn1.x509.DistributionPointName.superclass.constructor.call(this);var t=null,r=null,n=null,a=null,u=p,i=u.asn1,c=i.DERTaggedObject;if(this.tohex=function(){if(this.type!="full")throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new c({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0)if(i.x509.GeneralNames.prototype.isPrototypeOf(e))this.type="full",this.tag="a0",this.asn1V=e;else if(e.full!==void 0)this.type="full",this.tag="a0",this.asn1V=new i.x509.GeneralNames(e.full);else throw new Error("This class supports GeneralNames only as argument")};Ce(p.asn1.x509.DistributionPointName,p.asn1.ASN1Object);p.asn1.x509.CertificatePolicies=function(e){p.asn1.x509.CertificatePolicies.superclass.constructor.call(this,e);var t=p,r=t.asn1,n=r.x509,a=r.DERSequence,u=n.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var i=[],c=0;c<this.params.array.length;c++)i.push(new u(this.params.array[c]));var l=new a({array:i});return this.asn1ExtnValue=l,this.asn1ExtnValue.tohex()},this.oid="2.5.29.32",e!==void 0&&(this.params=e)};Ce(p.asn1.x509.CertificatePolicies,p.asn1.x509.Extension);p.asn1.x509.PolicyInformation=function(e){p.asn1.x509.PolicyInformation.superclass.constructor.call(this,e);var t=p.asn1,r=t.DERSequence,n=t.DERObjectIdentifier,a=t.x509.PolicyQualifierInfo;this.params=null,this.tohex=function(){if(this.params.policyoid===void 0&&this.params.array===void 0)throw new Error("parameter oid and array missing");var u=[new n(this.params.policyoid)];if(this.params.array!==void 0){for(var i=[],c=0;c<this.params.array.length;c++)i.push(new a(this.params.array[c]));i.length>0&&u.push(new r({array:i}))}var l=new r({array:u});return l.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(this.params=e)};Ce(p.asn1.x509.PolicyInformation,p.asn1.ASN1Object);p.asn1.x509.PolicyQualifierInfo=function(e){p.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,e);var t=p.asn1,r=t.DERSequence,n=t.DERIA5String,a=t.DERObjectIdentifier,u=t.x509.UserNotice;this.params=null,this.tohex=function(){if(this.params.cps!==void 0){var i=new r({array:[new a({oid:"1.3.6.1.5.5.7.2.1"}),new n({str:this.params.cps})]});return i.tohex()}if(this.params.unotice!=null){var i=new r({array:[new a({oid:"1.3.6.1.5.5.7.2.2"}),new u(this.params.unotice)]});return i.tohex()}},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(this.params=e)};Ce(p.asn1.x509.PolicyQualifierInfo,p.asn1.ASN1Object);p.asn1.x509.UserNotice=function(e){p.asn1.x509.UserNotice.superclass.constructor.call(this,e);var t=p.asn1.DERSequence,r=p.asn1.DERInteger,n=p.asn1.x509.DisplayText,a=p.asn1.x509.NoticeReference;this.params=null,this.tohex=function(){var u=[];this.params.noticeref!==void 0&&u.push(new a(this.params.noticeref)),this.params.exptext!==void 0&&u.push(new n(this.params.exptext));var i=new t({array:u});return i.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(this.params=e)};Ce(p.asn1.x509.UserNotice,p.asn1.ASN1Object);p.asn1.x509.NoticeReference=function(e){p.asn1.x509.NoticeReference.superclass.constructor.call(this,e);var t=p.asn1.DERSequence,r=p.asn1.DERInteger,n=p.asn1.x509.DisplayText;this.params=null,this.tohex=function(){var a=[];if(this.params.org!==void 0&&a.push(new n(this.params.org)),this.params.noticenum!==void 0){for(var u=[],i=this.params.noticenum,c=0;c<i.length;c++)u.push(new r(i[c]));a.push(new t({array:u}))}if(a.length==0)throw new Error("parameter is empty");var l=new t({array:a});return l.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(this.params=e)};Ce(p.asn1.x509.NoticeReference,p.asn1.ASN1Object);p.asn1.x509.DisplayText=function(e){p.asn1.x509.DisplayText.superclass.constructor.call(this,e),this.hT="0c",e!==void 0&&(e.type==="ia5"?this.hT="16":e.type==="vis"?this.hT="1a":e.type==="bmp"&&(this.hT="1e"))};Ce(p.asn1.x509.DisplayText,p.asn1.DERAbstractString);p.asn1.x509.PolicyMappings=function(e){p.asn1.x509.PolicyMappings.superclass.constructor.call(this,e);var t=p,r=t.asn1,n=r.x509,a=r.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){for(var u=this.params,i=[],c=0;c<u.array.length;c++){var l=u.array[c];i.push({seq:[{oid:l[0]},{oid:l[1]}]})}return this.asn1ExtnValue=a({seq:i}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.33",e!==void 0&&(this.params=e)};Ce(p.asn1.x509.PolicyMappings,p.asn1.x509.Extension);p.asn1.x509.PolicyConstraints=function(e){p.asn1.x509.PolicyConstraints.superclass.constructor.call(this,e);var t=p,r=t.asn1,n=r.x509,a=r.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){var u=this.params,i=[];return u.reqexp!=null&&i.push({tag:{tagi:"80",obj:{int:u.reqexp}}}),u.inhibit!=null&&i.push({tag:{tagi:"81",obj:{int:u.inhibit}}}),this.asn1ExtnValue=a({seq:i}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.36",e!==void 0&&(this.params=e)};Ce(p.asn1.x509.PolicyConstraints,p.asn1.x509.Extension);p.asn1.x509.InhibitAnyPolicy=function(e){p.asn1.x509.InhibitAnyPolicy.superclass.constructor.call(this,e);var t=p,r=t.asn1,n=r.x509,a=r.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=a({int:this.params.skip}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.54",e!==void 0&&(this.params=e)};Ce(p.asn1.x509.InhibitAnyPolicy,p.asn1.x509.Extension);p.asn1.x509.NameConstraints=function(e){p.asn1.x509.NameConstraints.superclass.constructor.call(this,e);var t=p,r=t.asn1,n=r.x509,a=r.ASN1Util.newObject,u=n.GeneralSubtree;this.params=null,this.getExtnValueHex=function(){var i=this.params,c=[];if(i.permit!=null&&i.permit.length!=null){for(var l=[],m=0;m<i.permit.length;m++)l.push(new u(i.permit[m]));c.push({tag:{tagi:"a0",obj:{seq:l}}})}if(i.exclude!=null&&i.exclude.length!=null){for(var E=[],m=0;m<i.exclude.length;m++)E.push(new u(i.exclude[m]));c.push({tag:{tagi:"a1",obj:{seq:E}}})}return this.asn1ExtnValue=a({seq:c}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.30",e!==void 0&&(this.params=e)};Ce(p.asn1.x509.NameConstraints,p.asn1.x509.Extension);p.asn1.x509.GeneralSubtree=function(e){p.asn1.x509.GeneralSubtree.superclass.constructor.call(this);var t=p.asn1,r=t.x509,n=r.GeneralName,a=t.ASN1Util.newObject;this.params=null,this.setByParam=function(u){this.params=u},this.tohex=function(){var u=this.params,i=[new n(u)];u.min!=null&&i.push({tag:{tagi:"80",obj:{int:u.min}}}),u.max!=null&&i.push({tag:{tagi:"81",obj:{int:u.max}}});var c=a({seq:i});return c.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};Ce(p.asn1.x509.GeneralSubtree,p.asn1.ASN1Object);p.asn1.x509.ExtKeyUsage=function(e){p.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,e);var t=p,r=t.asn1;this.setPurposeArray=function(n){this.asn1ExtnValue=new r.DERSequence;for(var a=0;a<n.length;a++){var u=new r.DERObjectIdentifier(n[a]);this.asn1ExtnValue.appendASN1Object(u)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.37",e!==void 0&&e.array!==void 0&&this.setPurposeArray(e.array)};Ce(p.asn1.x509.ExtKeyUsage,p.asn1.x509.Extension);p.asn1.x509.AuthorityKeyIdentifier=function(e){p.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,e);var t=p,r=t.asn1,n=r.DERTaggedObject,a=r.x509.GeneralNames,u=t.crypto.Util.isKey;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var i=new Array;this.asn1KID&&i.push(new n({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&i.push(new n({explicit:!1,tag:"a1",obj:new a([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&i.push(new n({explicit:!1,tag:"82",obj:this.asn1CertSN}));var c=new r.DERSequence({array:i});return this.asn1ExtnValue=c,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(i){if(i.str!==void 0||i.hex!==void 0)this.asn1KID=new p.asn1.DEROctetString(i);else if(typeof i=="object"&&p.crypto.Util.isKey(i)||typeof i=="string"&&i.indexOf("BEGIN ")!=-1){var c=i;typeof i=="string"&&(c=Lt.getKey(i));var l=Lt.getKeyID(c);this.asn1KID=new p.asn1.DEROctetString({hex:l})}},this.setCertIssuerByParam=function(i){i.str!==void 0||i.ldapstr!==void 0||i.hex!==void 0||i.certsubject!==void 0||i.certissuer!==void 0?this.asn1CertIssuer=new p.asn1.x509.X500Name(i):typeof i=="string"&&i.indexOf("BEGIN ")!=-1&&i.indexOf("CERTIFICATE")!=-1&&(this.asn1CertIssuer=new p.asn1.x509.X500Name({certissuer:i}))},this.setCertSNByParam=function(i){if(i.str!==void 0||i.bigint!==void 0||i.hex!==void 0)this.asn1CertSN=new p.asn1.DERInteger(i);else if(typeof i=="string"&&i.indexOf("BEGIN ")!=-1&&i.indexOf("CERTIFICATE")){var c=new pt;c.readCertPEM(i);var l=c.getSerialNumberHex();this.asn1CertSN=new p.asn1.DERInteger({hex:l})}},this.oid="2.5.29.35",e!==void 0&&(e.kid!==void 0&&this.setKIDByParam(e.kid),e.issuer!==void 0&&this.setCertIssuerByParam(e.issuer),e.sn!==void 0&&this.setCertSNByParam(e.sn),e.issuersn!==void 0&&typeof e.issuersn=="string"&&e.issuersn.indexOf("BEGIN ")!=-1&&e.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(e.issuersn),this.setCertIssuerByParam(e.issuersn)))};Ce(p.asn1.x509.AuthorityKeyIdentifier,p.asn1.x509.Extension);p.asn1.x509.SubjectKeyIdentifier=function(e){p.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,e);var t=p,r=t.asn1,n=r.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(a){if(a.str!==void 0||a.hex!==void 0)this.asn1KID=new n(a);else if(typeof a=="object"&&p.crypto.Util.isKey(a)||typeof a=="string"&&a.indexOf("BEGIN")!=-1){var u=a;typeof a=="string"&&(u=Lt.getKey(a));var i=Lt.getKeyID(u);this.asn1KID=new p.asn1.DEROctetString({hex:i})}},this.oid="2.5.29.14",e!==void 0&&e.kid!==void 0&&this.setKIDByParam(e.kid)};Ce(p.asn1.x509.SubjectKeyIdentifier,p.asn1.x509.Extension);p.asn1.x509.AuthorityInfoAccess=function(e){p.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,e),this.setAccessDescriptionArray=function(t){for(var r=new Array,n=p,a=n.asn1,u=a.DERSequence,i=a.DERObjectIdentifier,c=a.x509.GeneralName,l=0;l<t.length;l++){var m,E=t[l];if(E.ocsp!==void 0)m=new u({array:[new i({oid:"1.3.6.1.5.5.7.48.1"}),new c({uri:E.ocsp})]});else if(E.caissuer!==void 0)m=new u({array:[new i({oid:"1.3.6.1.5.5.7.48.2"}),new c({uri:E.caissuer})]});else throw new Error("unknown AccessMethod parameter: "+JSON.stringify(E));r.push(m)}this.asn1ExtnValue=new u({array:r})},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.1.1",e!==void 0&&e.array!==void 0&&this.setAccessDescriptionArray(e.array)};Ce(p.asn1.x509.AuthorityInfoAccess,p.asn1.x509.Extension);p.asn1.x509.SubjectAltName=function(e){p.asn1.x509.SubjectAltName.superclass.constructor.call(this,e),this.setNameArray=function(t){this.asn1ExtnValue=new p.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.17",e!==void 0&&e.array!==void 0&&this.setNameArray(e.array)};Ce(p.asn1.x509.SubjectAltName,p.asn1.x509.Extension);p.asn1.x509.IssuerAltName=function(e){p.asn1.x509.IssuerAltName.superclass.constructor.call(this,e),this.setNameArray=function(t){this.asn1ExtnValue=new p.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.18",e!==void 0&&e.array!==void 0&&this.setNameArray(e.array)};Ce(p.asn1.x509.IssuerAltName,p.asn1.x509.Extension);p.asn1.x509.SubjectDirectoryAttributes=function(e){p.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,e);var t=p.asn1,r=t.DERSequence,n=t.ASN1Util.newObject,a=t.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var u=[],i=0;i<this.params.array.length;i++){var c=this.params.array[i];if(c.attr!=null&&c.array!=null){var l={seq:[{oid:c.attr},{set:c.array}]};u.push(n(l));continue}var m={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if(c.attr=="dateOfBirth")m.seq[0].oid=a(c.attr),m.seq[1].set[0]={gentime:c.str};else if(c.attr=="placeOfBirth")m.seq[0].oid=a(c.attr),m.seq[1].set[0]={utf8str:c.str};else if(c.attr=="gender")m.seq[0].oid=a(c.attr),m.seq[1].set[0]={prnstr:c.str};else if(c.attr=="countryOfCitizenship")m.seq[0].oid=a(c.attr),m.seq[1].set[0]={prnstr:c.str};else if(c.attr=="countryOfResidence")m.seq[0].oid=a(c.attr),m.seq[1].set[0]={prnstr:c.str};else throw new Error("unsupported attribute: "+c.attr);u.push(new n(m))}var E=new r({array:u});return this.asn1ExtnValue=E,this.asn1ExtnValue.tohex()},this.oid="2.5.29.9",e!==void 0&&(this.params=e)};Ce(p.asn1.x509.SubjectDirectoryAttributes,p.asn1.x509.Extension);p.asn1.x509.PrivateExtension=function(e){p.asn1.x509.PrivateExtension.superclass.constructor.call(this,e);var t=p,r=t.lang.String.isHex,n=t.asn1,a=n.x509.OID.name2oid,u=n.ASN1Util.newObject;this.params=null,this.setByParam=function(i){this.oid=a(i.extname),this.params=i},this.getExtnValueHex=function(){if(this.params.extname==null||this.params.extn==null)throw new Error("extname or extnhex not specified");var i=this.params.extn;if(typeof i=="string"&&r(i))return i;if(typeof i=="object")try{return u(i).tohex()}catch{}throw new Error("unsupported extn value")},e!=null&&this.setByParam(e)};Ce(p.asn1.x509.PrivateExtension,p.asn1.x509.Extension);p.asn1.x509.CRL=function(e){p.asn1.x509.CRL.superclass.constructor.call(this);var t=p,r=t.asn1,n=r.DERSequence,a=r.DERBitString,u=r.x509,i=u.AlgorithmIdentifier,c=u.TBSCertList;this.params=void 0,this.setByParam=function(l){this.params=l},this.sign=function(){var l=new c(this.params).tohex(),m=new p.crypto.Signature({alg:this.params.sigalg});m.init(this.params.cakey),m.updateHex(l);var E=m.sign();this.params.sighex=E},this.getPEM=function(){return cn(this.tohex(),"X509 CRL")},this.tohex=function(){var l=this.params;if(l.tbsobj==null&&(l.tbsobj=new c(l)),l.sighex==null&&l.cakey!=null&&this.sign(),l.sighex==null)throw new Error("sighex or cakey parameter not defined");var m=[];m.push(l.tbsobj),m.push(new i({name:l.sigalg})),m.push(new a({hex:"00"+l.sighex}));var E=new n({array:m});return E.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&(this.params=e)};Ce(p.asn1.x509.CRL,p.asn1.ASN1Object);p.asn1.x509.TBSCertList=function(e){p.asn1.x509.TBSCertList.superclass.constructor.call(this);var t=p,r=t.asn1,n=r.DERInteger,a=r.DERSequence,u=r.DERTaggedObject,i=r.DERObjectIdentifier,c=r.x509,l=c.AlgorithmIdentifier,m=c.Time,E=c.Extensions,b=c.X500Name;this.params=null,this.setByParam=function(v){this.params=v},this.getRevCertSequence=function(){for(var v=[],g=this.params.revcert,A=0;A<g.length;A++){var w=[new n(g[A].sn),new m(g[A].date)];g[A].ext!=null&&w.push(new E(g[A].ext)),v.push(new a({array:w}))}return new a({array:v})},this.tohex=function(){var v=[],g=this.params;if(g.version!=null){var A=g.version-1,w=new n({int:A});v.push(w)}if(v.push(new l({name:g.sigalg})),v.push(new b(g.issuer)),v.push(new m(g.thisupdate)),g.nextupdate!=null&&v.push(new m(g.nextupdate)),g.revcert!=null&&v.push(this.getRevCertSequence()),g.ext!=null){var S=new E(g.ext);v.push(new u({tag:"a0",explicit:!0,obj:S}))}var y=new a({array:v});return y.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};Ce(p.asn1.x509.TBSCertList,p.asn1.ASN1Object);p.asn1.x509.CRLEntry=function(e){p.asn1.x509.CRLEntry.superclass.constructor.call(this);var t=null,r=null,n=p,a=n.asn1;this.setCertSerial=function(u){this.sn=new a.DERInteger(u)},this.setRevocationDate=function(u){this.time=new a.x509.Time(u)},this.tohex=function(){var u=new a.DERSequence({array:[this.sn,this.time]});return this.TLV=u.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(e.time!==void 0&&this.setRevocationDate(e.time),e.sn!==void 0&&this.setCertSerial(e.sn))};Ce(p.asn1.x509.CRLEntry,p.asn1.ASN1Object);p.asn1.x509.CRLNumber=function(e){p.asn1.x509.CRLNumber.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new p.asn1.DERInteger(this.params.num),this.asn1ExtnValue.tohex()},this.oid="2.5.29.20",e!=null&&(this.params=e)};Ce(p.asn1.x509.CRLNumber,p.asn1.x509.Extension);p.asn1.x509.CRLReason=function(e){p.asn1.x509.CRLReason.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new p.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.tohex()},this.oid="2.5.29.21",e!=null&&(this.params=e)};Ce(p.asn1.x509.CRLReason,p.asn1.x509.Extension);p.asn1.x509.OCSPNonce=function(e){p.asn1.x509.OCSPNonce.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new p.asn1.DEROctetString(this.params),this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.2",e!=null&&(this.params=e)};Ce(p.asn1.x509.OCSPNonce,p.asn1.x509.Extension);p.asn1.x509.OCSPNoCheck=function(e){p.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new p.asn1.DERNull,this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.5",e!=null&&(this.params=e)};Ce(p.asn1.x509.OCSPNoCheck,p.asn1.x509.Extension);p.asn1.x509.AdobeTimeStamp=function(e){p.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,e);var t=p,r=t.asn1,n=r.DERInteger,a=r.DERBoolean,u=r.DERSequence,i=r.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var c=this.params,l=[new n(1)];return l.push(new i({uri:c.uri})),c.reqauth!=null&&l.push(new a(c.reqauth)),this.asn1ExtnValue=new u({array:l}),this.asn1ExtnValue.tohex()},this.oid="1.2.840.113583.1.1.9.1",e!==void 0&&this.setByParam(e)};Ce(p.asn1.x509.AdobeTimeStamp,p.asn1.x509.Extension);p.asn1.x509.X500Name=function(e){p.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var t=p,r=t.asn1,n=r.x509,a=n.RDN,u=Cr;this.setByString=function(i,c){c!==void 0&&(this.sRule=c);var l=i.split("/");l.shift();for(var m=[],E=0;E<l.length;E++)if(l[E].match(/^[^=]+=.+$/))m.push(l[E]);else{var b=m.length-1;m[b]=m[b]+"/"+l[E]}for(var E=0;E<m.length;E++)this.asn1Array.push(new a({str:m[E],rule:this.sRule}))},this.setByLdapString=function(i,c){c!==void 0&&(this.sRule=c);var l=n.X500Name.ldapToCompat(i);this.setByString(l,c)},this.setByObject=function(i,c){c!==void 0&&(this.sRule=c);for(var l in i)if(i.hasOwnProperty(l)){var m=new a({str:l+"="+i[l],rule:this.sRule});this.asn1Array?this.asn1Array.push(m):this.asn1Array=[m]}},this.setByParam=function(i){if(i.rule!==void 0&&(this.sRule=i.rule),i.array!==void 0)this.paramArray=i.array;else if(i.str!==void 0)this.setByString(i.str);else if(i.ldapstr!==void 0)this.setByLdapString(i.ldapstr);else if(i.hex!==void 0)this.hTLV=i.hex;else if(i.certissuer!==void 0){var c=new pt;c.readCertPEM(i.certissuer),this.hTLV=c.getIssuerHex()}else if(i.certsubject!==void 0){var c=new pt;c.readCertPEM(i.certsubject),this.hTLV=c.getSubjectHex()}else typeof i=="object"&&i.certsubject===void 0&&i.certissuer===void 0&&this.setByObject(i)},this.tohex=function(){if(typeof this.hTLV=="string")return this.hTLV;if(this.asn1Array.length==0&&this.paramArray.length>0)for(var i=0;i<this.paramArray.length;i++){var c={array:this.paramArray[i]};this.sRule!="utf8"&&(c.rule=this.sRule);var l=new a(c);this.asn1Array.push(l)}var m=new r.DERSequence({array:this.asn1Array});return this.hTLV=m.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};Ce(p.asn1.x509.X500Name,p.asn1.ASN1Object);p.asn1.x509.X500Name.compatToLDAP=function(e){if(e.substr(0,1)!=="/")throw"malformed input";var t="";e=e.substr(1);var r=e.split("/");return r.reverse(),r=r.map(function(n){return n.replace(/,/,"\\,")}),r.join(",")};p.asn1.x509.X500Name.onelineToLDAP=function(e){return p.asn1.x509.X500Name.compatToLDAP(e)};p.asn1.x509.X500Name.ldapToCompat=function(e){for(var t=e.split(","),r=!1,n=[],a=0;t.length>0;a++){var u=t.shift();if(r===!0){var i=n.pop(),c=(i+","+u).replace(/\\,/g,",");n.push(c),r=!1}else n.push(u);u.substr(-1,1)==="\\"&&(r=!0)}return n=n.map(function(l){return l.replace("/","\\/")}),n.reverse(),"/"+n.join("/")};p.asn1.x509.X500Name.ldapToOneline=function(e){return p.asn1.x509.X500Name.ldapToCompat(e)};p.asn1.x509.RDN=function(e){p.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var t=p.asn1.x509.AttributeTypeAndValue;this.setByParam=function(r){r.rule!==void 0&&(this.sRule=r.rule),r.str!==void 0&&this.addByMultiValuedString(r.str),r.array!==void 0&&(this.paramArray=r.array)},this.addByString=function(r){this.asn1Array.push(new p.asn1.x509.AttributeTypeAndValue({str:r,rule:this.sRule}))},this.addByMultiValuedString=function(r){for(var n=p.asn1.x509.RDN.parseString(r),a=0;a<n.length;a++)this.addByString(n[a])},this.tohex=function(){if(this.asn1Array.length==0&&this.paramArray.length>0)for(var r=0;r<this.paramArray.length;r++){var n=this.paramArray[r];n.rule!==void 0&&this.sRule!="utf8"&&(n.rule=this.sRule);var a=new t(n);this.asn1Array.push(a)}var u=new p.asn1.DERSet({array:this.asn1Array});return this.TLV=u.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};Ce(p.asn1.x509.RDN,p.asn1.ASN1Object);p.asn1.x509.RDN.parseString=function(e){for(var t=e.split(/\+/),r=!1,n=[],a=0;t.length>0;a++){var u=t.shift();if(r===!0){var i=n.pop(),c=(i+"+"+u).replace(/\\\+/g,"+");n.push(c),r=!1}else n.push(u);u.substr(-1,1)==="\\"&&(r=!0)}for(var l=!1,m=[],a=0;n.length>0;a++){var u=n.shift();if(l===!0){var E=m.pop();if(u.match(/"$/)){var c=(E+"+"+u).replace(/^([^=]+)="(.*)"$/,"$1=$2");m.push(c),l=!1}else m.push(E+"+"+u)}else m.push(u);u.match(/^[^=]+="/)&&(l=!0)}return m};p.asn1.x509.AttributeTypeAndValue=function(e){p.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var t=p,r=t.asn1,n=r.DERSequence,a=r.DERUTF8String,u=r.DERPrintableString,i=r.DERTeletexString,c=r.DERIA5String,l=r.DERVisibleString,m=r.DERBMPString,E=t.lang.String.isMail,b=t.lang.String.isPrintable;this.setByParam=function(v){if(v.rule!==void 0&&(this.sRule=v.rule),v.ds!==void 0&&(this.dsType=v.ds),v.value===void 0&&v.str!==void 0){var g=v.str,A=g.match(/^([^=]+)=(.+)$/);if(A)this.sType=A[1],this.sValue=A[2];else throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr)}else this.sType=v.type,this.sValue=v.value},this.setByString=function(v,g){g!==void 0&&(this.sRule=g);var A=v.match(/^([^=]+)=(.+)$/);if(A)this.setByAttrTypeAndValueStr(A[1],A[2]);else throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr)},this._getDsType=function(){var v=this.sType,g=this.sValue,A=this.sRule;return A==="prn"?v=="CN"&&E(g)?"ia5":b(g)?"prn":"utf8":A==="utf8"?v=="CN"&&E(g)?"ia5":v=="C"?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(v,g,A){A!==void 0&&(this.sRule=A),this.sType=v,this.sValue=g},this.getValueObj=function(v,g){if(v=="utf8")return new a({str:g});if(v=="prn")return new u({str:g});if(v=="tel")return new i({str:g});if(v=="ia5")return new c({str:g});if(v=="vis")return new l({str:g});if(v=="bmp")return new m({str:g});throw new Error("unsupported directory string type: type="+v+" value="+g)},this.tohex=function(){this.dsType==null&&(this.dsType=this._getDsType());var v=p.asn1.x509.OID.atype2obj(this.sType),g=this.getValueObj(this.dsType,this.sValue),A=new n({array:[v,g]});return this.TLV=A.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};Ce(p.asn1.x509.AttributeTypeAndValue,p.asn1.ASN1Object);p.asn1.x509.SubjectPublicKeyInfo=function(e){p.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var t=null,r=null,n=p,a=n.asn1,u=a.DERInteger,i=a.DERBitString,c=a.DERObjectIdentifier,l=a.DERSequence,m=a.ASN1Util.newObject,E=a.x509,b=E.AlgorithmIdentifier,v=n.crypto,g=v.ECDSA,A=v.DSA;this.getASN1Object=function(){if(this.asn1AlgId==null||this.asn1SubjPKey==null)throw"algId and/or subjPubKey not set";var w=new l({array:[this.asn1AlgId,this.asn1SubjPKey]});return w},this.tohex=function(){var w=this.getASN1Object();return this.hTLV=w.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.setPubKey=function(w){try{if(w instanceof At){var S=m({seq:[{int:{bigint:w.n}},{int:{int:w.e}}]}),y=S.tohex();this.asn1AlgId=new b({name:"rsaEncryption"}),this.asn1SubjPKey=new i({hex:"00"+y})}}catch{}try{if(w instanceof p.crypto.ECDSA){var C=new c({name:w.curveName});this.asn1AlgId=new b({name:"ecPublicKey",asn1params:C}),this.asn1SubjPKey=new i({hex:"00"+w.pubKeyHex})}}catch{}try{if(w instanceof p.crypto.DSA){var C=new m({seq:[{int:{bigint:w.p}},{int:{bigint:w.q}},{int:{bigint:w.g}}]});this.asn1AlgId=new b({name:"dsa",asn1params:C});var x=new u({bigint:w.y});this.asn1SubjPKey=new i({hex:"00"+x.tohex()})}}catch{}},e!==void 0&&this.setPubKey(e)};Ce(p.asn1.x509.SubjectPublicKeyInfo,p.asn1.ASN1Object);p.asn1.x509.Time=function(e){p.asn1.x509.Time.superclass.constructor.call(this);var t=null,r=null,n=p,a=n.asn1,u=a.DERUTCTime,i=a.DERGeneralizedTime;this.params=null,this.type=null,this.setTimeParams=function(c){this.timeParams=c},this.setByParam=function(c){this.params=c},this.getType=function(c){return c.match(/^[0-9]{12}Z$/)?"utc":c.match(/^[0-9]{14}Z$/)?"gen":c.match(/^[0-9]{12}\.[0-9]+Z$/)?"utc":c.match(/^[0-9]{14}\.[0-9]+Z$/)?"gen":null},this.tohex=function(){var c=this.params,l=null;if(typeof c=="string"&&(c={str:c}),c!=null&&c.str&&(c.type==null||c.type==null)&&(c.type=this.getType(c.str)),c!=null&&c.str?(c.type=="utc"&&(l=new u(c.str)),c.type=="gen"&&(l=new i(c.str))):this.type=="gen"?l=new i:l=new u,l==null)throw new Error("wrong setting for Time");return this.TLV=l.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};p.asn1.x509.Time_bak=function(e){p.asn1.x509.Time_bak.superclass.constructor.call(this);var t=null,r=null,n=p,a=n.asn1,u=a.DERUTCTime,i=a.DERGeneralizedTime;this.setTimeParams=function(c){this.timeParams=c},this.tohex=function(){var c=null;return this.timeParams!=null?this.type=="utc"?c=new u(this.timeParams):c=new i(this.timeParams):this.type=="utc"?c=new u:c=new i,this.TLV=c.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},this.type="utc",e!==void 0&&(e.type!==void 0?this.type=e.type:e.str!==void 0&&(e.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),e.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=e)};Ce(p.asn1.x509.Time,p.asn1.ASN1Object);p.asn1.x509.AlgorithmIdentifier=function(e){p.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var t=p,r=t.asn1,n=r.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.tohex=function(){if(this.nameAlg===null&&this.asn1Alg===null)throw new Error("algorithm not specified");if(this.nameAlg!==null){var u=null;for(var i in n)i===this.nameAlg&&(u=n[i]);if(u!==null)return this.hTLV=u,this.hTLV}this.nameAlg!==null&&this.asn1Alg===null&&(this.asn1Alg=r.x509.OID.name2obj(this.nameAlg));var c=[this.asn1Alg];this.asn1Params!==null&&c.push(this.asn1Params);var l=new r.DERSequence({array:c});return this.hTLV=l.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(e.name!==void 0&&(this.nameAlg=e.name),e.asn1params!==void 0&&(this.asn1Params=e.asn1params),e.paramempty!==void 0&&(this.paramEmpty=e.paramempty)),this.asn1Params===null&&this.paramEmpty===!1&&this.nameAlg!==null){this.nameAlg.name!==void 0&&(this.nameAlg=this.nameAlg.name);var a=this.nameAlg.toLowerCase();a.substr(-7,7)!=="withdsa"&&a.substr(-9,9)!=="withecdsa"&&(this.asn1Params=new r.DERNull)}};Ce(p.asn1.x509.AlgorithmIdentifier,p.asn1.ASN1Object);p.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"};p.asn1.x509.GeneralName=function(e){p.asn1.x509.GeneralName.superclass.constructor.call(this);var t={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87",otherName:"a0"},r=p,n=r.asn1,a=n.x509,u=a.X500Name,i=a.OtherName,c=n.DERIA5String,l=n.DERPrintableString,m=n.DEROctetString,E=n.DERTaggedObject,b=n.ASN1Object,v=Error;this.params=null,this.setByParam=function(g){this.params=g},this.tohex=function(){var g=this.params,A,S,w,S=!1;if(g.other!==void 0)A="a0",w=new i(g.other);else if(g.rfc822!==void 0)A="81",w=new c({str:g.rfc822});else if(g.dns!==void 0)A="82",w=new c({str:g.dns});else if(g.dn!==void 0)A="a4",S=!0,typeof g.dn=="string"?w=new u({str:g.dn}):g.dn instanceof p.asn1.x509.X500Name?w=g.dn:w=new u(g.dn);else if(g.ldapdn!==void 0)A="a4",S=!0,w=new u({ldapstr:g.ldapdn});else if(g.certissuer!==void 0||g.certsubj!==void 0){A="a4",S=!0;var y,C,x=null;if(g.certsubj!==void 0?(y=!1,C=g.certsubj):(y=!0,C=g.certissuer),C.match(/^[0-9A-Fa-f]+$/)&&x==C,C.indexOf("-----BEGIN ")!=-1&&(x=Cr(C)),x==null)throw new Error("certsubj/certissuer not cert");var N=new pt;N.hex=x;var L;y?L=N.getIssuerHex():L=N.getSubjectHex(),w=new b,w.hTLV=L}else if(g.uri!==void 0)A="86",w=new c({str:g.uri});else if(g.ip!==void 0){A="87";var ne,pe=g.ip;try{if(pe.match(/^[0-9a-f]+$/)){var I=pe.length;if(I==8||I==16||I==32||I==64)ne=pe;else throw"err"}else ne=qh(pe)}catch(j){throw new v("malformed IP address: "+g.ip+":"+j.message)}w=new m({hex:ne})}else throw new v("improper params");var B=new E({tag:A,explicit:S,obj:w});return B.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};Ce(p.asn1.x509.GeneralName,p.asn1.ASN1Object);p.asn1.x509.GeneralNames=function(e){p.asn1.x509.GeneralNames.superclass.constructor.call(this);var t=null,r=p,n=r.asn1;this.setByParamArray=function(a){for(var u=0;u<a.length;u++){var i=new n.x509.GeneralName(a[u]);this.asn1Array.push(i)}},this.tohex=function(){var a=new n.DERSequence({array:this.asn1Array});return a.tohex()},this.getEncodedHex=function(){return this.tohex()},this.asn1Array=new Array,typeof e<"u"&&this.setByParamArray(e)};Ce(p.asn1.x509.GeneralNames,p.asn1.ASN1Object);p.asn1.x509.OtherName=function(e){p.asn1.x509.OtherName.superclass.constructor.call(this);var t=null,r=null,n=p,a=n.asn1,u=a.DERObjectIdentifier,i=a.DERSequence,c=a.ASN1Util.newObject;this.params=null,this.setByParam=function(l){this.params=l},this.tohex=function(){var l=this.params;if(l.oid==null||l.value==null)throw new Error("oid or value not specified");var m=new u({oid:l.oid}),E=c({tag:{tag:"a0",explicit:!0,obj:l.value}}),b=new i({array:[m,E]});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};Ce(p.asn1.x509.OtherName,p.asn1.ASN1Object);p.asn1.x509.OID=new function(){var e=p.asn1.DERObjectIdentifier;this.name2oidList={"aes128-CBC":"2.16.840.1.101.3.4.1.2","aes256-CBC":"2.16.840.1.101.3.4.1.42",sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",hmacWithSHA1:"1.2.840.113549.2.7",hmacWithSHA224:"1.2.840.113549.2.8",hmacWithSHA256:"1.2.840.113549.2.9",hmacWithSHA384:"1.2.840.113549.2.10",hmacWithSHA512:"1.2.840.113549.2.11",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",policyMappings:"2.5.29.33",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",inhibitAnyPolicy:"2.5.29.54",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",smtpUTF8Mailbox:"1.3.6.1.5.5.7.8.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",secp521r1:"1.3.132.0.35",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1",smimeMailboxLegacy:"2.23.140.1.5.1.1",smimeMailboxMulti:"2.23.140.1.5.1.2",smimeMailboxStrict:"2.23.140.1.5.1.3",smimeOrganizationLegacy:"2.23.140.1.5.2.1",smimeOrganizationMulti:"2.23.140.1.5.2.2",smimeOrganizationStrict:"2.23.140.1.5.2.3",smimeSponsorLegacy:"2.23.140.1.5.3.1",smimeSponsorMulti:"2.23.140.1.5.3.2",smimeSponsorStrict:"2.23.140.1.5.3.3",smimeIndividualLegacy:"2.23.140.1.5.4.1",smimeIndividualMulti:"2.23.140.1.5.4.2",smimeIndividualStrict:"2.23.140.1.5.4.3"},this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",GN:"2.5.4.42",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.objCache={},this.name2obj=function(t){if(typeof this.objCache[t]<"u")return this.objCache[t];if(typeof this.name2oidList[t]>"u")throw"Name of ObjectIdentifier not defined: "+t;var r=this.name2oidList[t],n=new e({oid:r});return this.objCache[t]=n,n},this.atype2obj=function(t){if(this.objCache[t]!==void 0)return this.objCache[t];var r;if(t.match(/^\d+\.\d+\.[0-9.]+$/))r=t;else if(this.atype2oidList[t]!==void 0)r=this.atype2oidList[t];else if(this.name2oidList[t]!==void 0)r=this.name2oidList[t];else throw new Error("AttributeType name undefined: "+t);var n=new e({oid:r});return this.objCache[t]=n,n},this.registerOIDs=function(t){if(this.checkOIDs(t))for(var r in t)this.name2oidList[r]=t[r]},this.checkOIDs=function(t){try{var r=Object.keys(t);return r.length==0?!1:(r.map(function(n,a,u){var i=this[n];if(!i.match(/^[0-2]\.[0-9.]+$/))throw new Error("value is not OID")},t),!0)}catch{return!1}}};p.asn1.x509.OID.oid2name=function(e){var t=p.asn1.x509.OID.name2oidList;for(var r in t)if(t[r]==e)return r;return""};p.asn1.x509.OID.oid2atype=function(e){var t=p.asn1.x509.OID.atype2oidList;for(var r in t)if(t[r]==e)return r;return e};p.asn1.x509.OID.name2oid=function(e){if(e.match(/^[0-9.]+$/))return e;var t=p.asn1.x509.OID.name2oidList;return t[e]===void 0?"":t[e]};p.asn1.x509.X509Util={};p.asn1.x509.X509Util.newCertPEM=function(e){var t=p.asn1.x509,r=t.TBSCertificate,n=t.Certificate,a=new n(e);return a.getPEM()};(typeof p>"u"||!p)&&(p={});(typeof p.asn1>"u"||!p.asn1)&&(p.asn1={});(typeof p.asn1.cms>"u"||!p.asn1.cms)&&(p.asn1.cms={});p.asn1.cms.Attribute=function(e){var t=Error,r=p,n=r.asn1,a=n.DERSequence,u=n.DERSet,i=n.DERObjectIdentifier;this.params=null,this.typeOid=null,this.setByParam=function(c){this.params=c},this.getValueArray=function(){throw new t("not yet implemented abstract")},this.tohex=function(){var c=new i({oid:this.typeOid}),l=new u({array:this.getValueArray()}),m=new a({array:[c,l]});return m.tohex()},this.getEncodedHex=function(){return this.tohex()}};Ce(p.asn1.cms.Attribute,p.asn1.ASN1Object);p.asn1.cms.ContentType=function(e){var t=p,r=t.asn1;r.cms.ContentType.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.3",this.getValueArray=function(){var n=new r.DERObjectIdentifier(this.params.type);return[n]},e!=null&&this.setByParam(e)};Ce(p.asn1.cms.ContentType,p.asn1.cms.Attribute);p.asn1.cms.MessageDigest=function(e){var t=p,r=t.asn1,n=r.DEROctetString,a=r.cms;a.MessageDigest.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.4",this.getValueArray=function(){var u=new n(this.params);return[u]},e!=null&&this.setByParam(e)};Ce(p.asn1.cms.MessageDigest,p.asn1.cms.Attribute);p.asn1.cms.SigningTime=function(e){var t=p,r=t.asn1;r.cms.SigningTime.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.5",this.getValueArray=function(){var n=new r.x509.Time(this.params);return[n]},e!=null&&this.setByParam(e)};Ce(p.asn1.cms.SigningTime,p.asn1.cms.Attribute);p.asn1.cms.SigningCertificate=function(e){var t=Error,r=p,n=r.asn1,a=n.DERSequence,u=n.cms,i=u.ESSCertID,c=r.crypto;u.SigningCertificate.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.12",this.getValueArray=function(){if(this.params==null||this.params==null||this.params.array==null)throw new t("parameter 'array' not specified");for(var l=this.params.array,m=[],E=0;E<l.length;E++){var b=l[E];e.hasis==!1&&typeof b=="string"&&(b.indexOf("-----BEGIN")!=-1||Ue.isASN1HEX(b))&&(b={cert:b}),b.hasis!=!1&&e.hasis==!1&&(b.hasis=!1),m.push(new i(b))}var v=new a({array:m}),g=new a({array:[v]});return[g]},e!=null&&this.setByParam(e)};Ce(p.asn1.cms.SigningCertificate,p.asn1.cms.Attribute);p.asn1.cms.ESSCertID=function(e){p.asn1.cms.ESSCertID.superclass.constructor.call(this);var t=Error,r=p,n=r.asn1,a=n.DEROctetString,u=n.DERSequence,i=n.cms.IssuerSerial;this.params=null,this.getCertHash=function(c,l){if(c.hash!=null)return c.hash;if(typeof c=="string"&&c.indexOf("-----BEGIN")==-1&&!Ue.isASN1HEX(c))return c;var m;if(typeof c=="string")m=c;else if(c.cert!=null)m=c.cert;else throw new t("hash nor cert unspecified");var E;m.indexOf("-----BEGIN")!=-1?E=Cr(m):E=m,typeof c=="string"&&(c.indexOf("-----BEGIN")!=-1?E=Cr(c):Ue.isASN1HEX(c)&&(E=c));var b;if(c.alg!=null)b=c.alg;else if(l!=null)b=l;else throw new t("hash alg unspecified");return r.crypto.Util.hashHex(E,b)},this.tohex=function(){var c=this.params,l=this.getCertHash(c,"sha1"),m=[];m.push(new a({hex:l})),(typeof c=="string"&&c.indexOf("-----BEGIN")!=-1||c.cert!=null&&c.hasis!=!1||c.issuer!=null&&c.serial!=null)&&m.push(new i(c));var E=new u({array:m});return E.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Ce(p.asn1.cms.ESSCertID,p.asn1.ASN1Object);p.asn1.cms.SigningCertificateV2=function(e){var t=Error,r=p,n=r.asn1,a=n.DERSequence,u=n.x509,i=n.cms,c=i.ESSCertIDv2,l=r.crypto;i.SigningCertificateV2.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.47",this.getValueArray=function(){if(this.params==null||this.params==null||this.params.array==null)throw new t("parameter 'array' not specified");for(var m=this.params.array,E=[],b=0;b<m.length;b++){var v=m[b];(e.alg!=null||e.hasis==!1)&&typeof v=="string"&&(v.indexOf("-----BEGIN")!=-1||Ue.isASN1HEX(v))&&(v={cert:v}),v.alg==null&&e.alg!=null&&(v.alg=e.alg),v.hasis!=!1&&e.hasis==!1&&(v.hasis=!1),E.push(new c(v))}var g=new a({array:E}),A=new a({array:[g]});return[A]},e!=null&&this.setByParam(e)};Ce(p.asn1.cms.SigningCertificateV2,p.asn1.cms.Attribute);p.asn1.cms.ESSCertIDv2=function(e){p.asn1.cms.ESSCertIDv2.superclass.constructor.call(this);var t=Error,r=p,n=r.asn1,a=n.DEROctetString,u=n.DERSequence,i=n.cms.IssuerSerial,c=n.x509.AlgorithmIdentifier;this.params=null,this.tohex=function(){var l=this.params,m=this.getCertHash(l,"sha256"),E=[];l.alg!=null&&l.alg!="sha256"&&E.push(new c({name:l.alg})),E.push(new a({hex:m})),(typeof l=="string"&&l.indexOf("-----BEGIN")!=-1||l.cert!=null&&l.hasis!=!1||l.issuer!=null&&l.serial!=null)&&E.push(new i(l));var b=new u({array:E});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Ce(p.asn1.cms.ESSCertIDv2,p.asn1.cms.ESSCertID);p.asn1.cms.IssuerSerial=function(e){var t=Error,r=p,n=r.asn1,a=n.DERInteger,u=n.DERSequence,i=n.cms,c=n.x509,l=c.GeneralNames,m=pt;i.IssuerSerial.superclass.constructor.call(this),this.setByParam=function(E){this.params=E},this.tohex=function(){var E=this.params,b,v;if(typeof E=="string"&&E.indexOf("-----BEGIN")!=-1||E.cert!=null){var g;E.cert!=null?g=E.cert:g=E;var A=new m;A.readCertPEM(g),b=A.getIssuer(),v={hex:A.getSerialNumberHex()}}else if(E.issuer!=null&&E.serial)b=E.issuer,v=E.serial;else throw new t("cert or issuer and serial parameter not specified");var w=new l([{dn:b}]),S=new a(v),y=new u({array:[w,S]});return y.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Ce(p.asn1.cms.IssuerSerial,p.asn1.ASN1Object);p.asn1.cms.SignerIdentifier=function(e){var t=p,r=t.asn1,n=r.DERInteger,a=r.DERSequence,u=r.cms,i=u.IssuerAndSerialNumber,c=u.SubjectKeyIdentifier,l=r.x509,m=l.X500Name,E=pt,b=Error;u.SignerIdentifier.superclass.constructor.call(this),this.params=null,this.tohex=function(){var v=this.params;if(v.type=="isssn"){var g=new i(v);return g.tohex()}else if(v.type=="skid"){var A=new c(v);return A.tohex()}else throw new Error("wrong property for isssn or skid")},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Ce(p.asn1.cms.SignerIdentifier,p.asn1.ASN1Object);p.asn1.cms.IssuerAndSerialNumber=function(e){var t=p,r=t.asn1,n=r.DERInteger,a=r.DERSequence,u=r.cms,i=r.x509,c=i.X500Name,l=pt,m=Error;u.IssuerAndSerialNumber.superclass.constructor.call(this),this.params=null,this.tohex=function(){var E=this.params,b,v;if(typeof E=="string"&&E.indexOf("-----BEGIN")!=-1||E.cert!=null){var g;E.cert!=null?g=E.cert:g=E;var A=new l;A.readCertPEM(g),b=A.getIssuer(),v={hex:A.getSerialNumberHex()}}else if(E.issuer!=null&&E.serial)b=E.issuer,v=E.serial;else throw new m("cert or issuer and serial parameter not specified");var w=new c(b),S=new n(v),y=new a({array:[w,S]});return y.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(E){this.params=E},e!=null&&this.setByParam(e)};Ce(p.asn1.cms.IssuerAndSerialNumber,p.asn1.ASN1Object);p.asn1.cms.SubjectKeyIdentifier=function(e){var t=p,r=t.asn1,n=r.DERInteger,a=r.DERSequence,u=r.ASN1Util.newObject,i=r.cms,c=i.IssuerAndSerialName,l=i.SubjectKeyIdentifier,m=r.x509,E=m.X500Name,b=pt,v=Error;i.SubjectKeyIdentifier.superclass.constructor.call(this),this.tohex=function(){var g=this.params;if(g.cert==null&&g.skid==null)throw new v("property cert nor skid undefined");var A;if(g.cert!=null){var w=new b(g.cert),S=w.getExtSubjectKeyIdentifier();A=S.kid.hex}else g.skid!=null&&(A=g.skid);var y=u({tag:{tage:"a0",obj:{octstr:{hex:A}}}});return y.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Ce(p.asn1.cms.SubjectKeyIdentifier,p.asn1.ASN1Object);p.asn1.cms.AttributeList=function(e){var t=Error,r=p,n=r.asn1,a=n.DERSet,u=n.cms;u.AttributeList.superclass.constructor.call(this),this.params=null,this.hTLV=null,this.setByParam=function(i){this.params=i},this.tohex=function(){var i=this.params;if(this.hTLV!=null)return this.hTLV;var c=!0;i.sortflag!=null&&(c=i.sortflag);for(var l=i.array,m=[],E=0;E<l.length;E++){var b=l[E],v=b.attr;if(v=="contentType")m.push(new u.ContentType(b));else if(v=="messageDigest")m.push(new u.MessageDigest(b));else if(v=="signingTime")m.push(new u.SigningTime(b));else if(v=="signingCertificate")m.push(new u.SigningCertificate(b));else if(v=="signingCertificateV2")m.push(new u.SigningCertificateV2(b));else if(v=="signaturePolicyIdentifier")m.push(new p.asn1.cades.SignaturePolicyIdentifier(b));else if(v=="signatureTimeStamp"||v=="timeStampToken")m.push(new p.asn1.cades.SignatureTimeStamp(b));else throw new t("unknown attr: "+v)}var g=new a({array:m,sortflag:c});return this.hTLV=g.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Ce(p.asn1.cms.AttributeList,p.asn1.ASN1Object);p.asn1.cms.SignerInfo=function(e){var t=Error,r=p,n=r.asn1,a=n.DERInteger,u=n.DEROctetString,i=n.DERSequence,c=n.DERTaggedObject,l=n.cms,m=l.SignerIdentifier,E=l.AttributeList,b=l.ContentType,v=l.EncapsulatedContentInfo,g=l.MessageDigest,A=l.SignedData,w=n.x509,S=w.AlgorithmIdentifier,y=r.crypto,C=Lt;l.SignerInfo.superclass.constructor.call(this),this.params=null,this.sign=function(){var x=this.params,N=x.sigalg,L=new E(x.sattrs).tohex(),ne=C.getKey(x.signkey),pe=new y.Signature({alg:N});pe.init(ne),pe.updateHex(L);var I=pe.sign();x.sighex=I},this.tohex=function(){var x=this.params,N=[];if(N.push(new a({int:x.version})),N.push(new m(x.id)),N.push(new S({name:x.hashalg})),x.sattrs!=null){var L=new E(x.sattrs);try{N.push(new c({tag:"a0",explicit:!1,obj:L}))}catch(pe){throw new t("si sattr error: "+pe)}}if(x.sigalgfield!=null?N.push(new S({name:x.sigalgfield})):N.push(new S({name:x.sigalg})),x.sighex==null&&x.signkey!=null&&this.sign(),N.push(new u({hex:x.sighex})),x.uattrs!=null){var L=new E(x.uattrs);try{N.push(new c({tag:"a1",explicit:!1,obj:L}))}catch(I){throw new t("si uattr error: "+I)}}var ne=new i({array:N});return ne.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Ce(p.asn1.cms.SignerInfo,p.asn1.ASN1Object);p.asn1.cms.EncapsulatedContentInfo=function(e){var t=p,r=t.asn1,n=r.DERTaggedObject,a=r.DERSequence,u=r.DERObjectIdentifier,i=r.DEROctetString,c=r.cms;c.EncapsulatedContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var l=this.params,m=[];if(m.push(new u(l.type)),l.content!=null&&(l.content.hex!=null||l.content.str!=null)&&l.isDetached!=!0){var E=new i(l.content),b=new n({tag:"a0",explicit:!0,obj:E});m.push(b)}var v=new a({array:m});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(l){this.params=l},e!=null&&this.setByParam(e)};Ce(p.asn1.cms.EncapsulatedContentInfo,p.asn1.ASN1Object);p.asn1.cms.ContentInfo=function(e){var t=p,r=t.asn1,n=r.DERTaggedObject,a=r.DERSequence,u=r.DERObjectIdentifier,i=r.x509,c=i.OID.name2obj;p.asn1.cms.ContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var l=this.params,m=[];m.push(new u(l.type));var E=new n({tag:"a0",explicit:!0,obj:l.obj});m.push(E);var b=new a({array:m});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(l){this.params=l},e!=null&&this.setByParam(e)};Ce(p.asn1.cms.ContentInfo,p.asn1.ASN1Object);p.asn1.cms.SignedData=function(e){var t=Error,r=p,n=r.asn1,a=n.ASN1Object,u=n.DERInteger,i=n.DERSet,c=n.DERSequence,l=n.DERTaggedObject,m=n.cms,E=m.EncapsulatedContentInfo,b=m.SignerInfo,v=m.ContentInfo,g=m.CertificateSet,A=m.RevocationInfoChoices,w=n.x509,S=w.AlgorithmIdentifier;p.asn1.cms.SignedData.superclass.constructor.call(this),this.params=null,this.checkAndFixParam=function(){var y=this.params;this._setDigestAlgs(y),this._setContentTypeByEContent(y),this._setMessageDigestByEContent(y),this._setSignerInfoVersion(y),this._setSignedDataVersion(y)},this._setDigestAlgs=function(y){for(var C={},x=y.sinfos,N=0;N<x.length;N++){var L=x[N];C[L.hashalg]=1}y.hashalgs=Object.keys(C).sort()},this._setContentTypeByEContent=function(y){for(var C=y.econtent.type,x=y.sinfos,N=0;N<x.length;N++){var L=x[N],ne=this._getAttrParamByName(L,"contentType");ne.type=C}},this._setMessageDigestByEContent=function(y){var C=y.econtent,x=y.econtent.type,N=C.content.hex;N==null&&C.type=="data"&&C.content.str!=null&&(N=Ri(C.content.str));for(var L=y.sinfos,ne=0;ne<L.length;ne++){var pe=L[ne],I=pe.hashalg,B=this._getAttrParamByName(pe,"messageDigest"),j=p.crypto.Util.hashHex(N,I);B.hex=j}},this._getAttrParamByName=function(y,C){for(var x=y.sattrs.array,N=0;N<x.length;N++)if(x[N].attr==C)return x[N]},this._setSignerInfoVersion=function(y){for(var C=y.sinfos,x=0;x<C.length;x++){var N=C[x],L=1;N.id.type=="skid"&&(L=3),N.version=L}},this._setSignedDataVersion=function(y){var C=this._getSignedDataVersion(y);y.version=C},this._getSignedDataVersion=function(y){if(y.revinfos!=null)for(var C=y.revinfos,x=0;x<C.length;x++){var N=C[x];if(N.ocsp!=null)return 5}for(var L=y.sinfos,x=0;x<L.length;x++){var ne=y.sinfos[x];if(ne.version==3)return 3}return y.econtent.type!="data"?3:1},this.tohex=function(){var y=this.params;this.getEncodedHexPrepare!=null&&this.getEncodedHexPrepare(),y.fixed!=!0&&this.checkAndFixParam();var C=[];C.push(new u({int:y.version}));for(var x=[],N=0;N<y.hashalgs.length;N++){var L=y.hashalgs[N];x.push(new S({name:L}))}C.push(new i({array:x})),C.push(new E(y.econtent)),y.certs!=null&&C.push(new g(y.certs)),y.revinfos!=null&&C.push(new A(y.revinfos));for(var ne=[],N=0;N<y.sinfos.length;N++){var pe=y.sinfos[N];ne.push(new b(pe))}C.push(new i({array:ne}));var I=new c({array:C});return I.tohex()},this.getEncodedHex=function(){return this.tohex()},this.getContentInfo=function(){var y=new v({type:"signed-data",obj:this});return y},this.getContentInfoEncodedHex=function(){return this.getContentInfo().tohex()},e!=null&&this.setByParam(e)};Ce(p.asn1.cms.SignedData,p.asn1.ASN1Object);p.asn1.cms.CertificateSet=function(e){p.asn1.cms.CertificateSet.superclass.constructor.call(this);var t=Error,r=p.asn1,n=r.DERTaggedObject,a=r.DERSet,u=r.ASN1Object;this.params=null,this.tohex=function(){var i=this.params,c=[],l;if(i instanceof Array)l=i;else if(i.array!=null)l=i.array;else throw new t("cert array not specified");for(var m=0;m<l.length;m++){var E=l[m],b=Cr(E),v=new u;v.hTLV=b,c.push(v)}var g={array:c};i.sortflag==!1&&(g.sortflag=!1);var A=new a(g),w=new n({tag:"a0",explicit:!1,obj:A});return w.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Ce(p.asn1.cms.CertificateSet,p.asn1.ASN1Object);p.asn1.cms.RevocationInfoChoices=function(e){p.asn1.cms.RevocationInfoChoices.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if(!(t instanceof Array))throw new Error("params is not array");for(var r=[],n=0;n<t.length;n++)r.push(new p.asn1.cms.RevocationInfoChoice(t[n]));var a=p.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:{set:r}}});return a.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Ce(p.asn1.cms.RevocationInfoChoices,p.asn1.ASN1Object);p.asn1.cms.RevocationInfoChoice=function(e){p.asn1.cms.RevocationInfoChoice.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if(t.crl!=null&&typeof t.crl=="string"){var r=t.crl;return t.crl.indexOf("-----BEGIN")!=-1&&(r=Cr(t.crl)),r}else if(t.ocsp!=null){var n=p.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:new p.asn1.cms.OtherRevocationFormat(t)}});return n.tohex()}else throw new Error("property crl or ocsp undefined")},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Ce(p.asn1.cms.RevocationInfoChoice,p.asn1.ASN1Object);p.asn1.cms.OtherRevocationFormat=function(e){p.asn1.cms.OtherRevocationFormat.superclass.constructor.call(this);var t=Error,r=p,n=r.asn1,a=n.ASN1Util.newObject,u=r.lang.String.isHex;this.params=null,this.tohex=function(){var i=this.params;if(i.ocsp==null)throw new t("property ocsp not specified");if(!u(i.ocsp)||!Ue.isASN1HEX(i.ocsp))throw new t("ocsp value not ASN.1 hex string");var c=a({seq:[{oid:"1.3.6.1.5.5.7.16.2"},{asn1:{tlv:i.ocsp}}]});return c.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Ce(p.asn1.cms.OtherRevocationFormat,p.asn1.ASN1Object);p.asn1.cms.CMSUtil=new function(){};p.asn1.cms.CMSUtil.newSignedData=function(e){return new p.asn1.cms.SignedData(e)};p.asn1.cms.CMSUtil.verifySignedData=function(e){var t=p,r=t.asn1,n=r.cms,a=n.SignerInfo,u=n.SignedData,i=n.SigningTime,c=n.SigningCertificate,l=n.SigningCertificateV2,m=r.cades,E=m.SignaturePolicyIdentifier,b=t.lang.String.isHex,v=Ue,g=v.getVbyList,A=v.getTLVbyList,w=v.getIdxbyList,S=v.getChildIdx,y=v.getTLV,C=v.oidname,x=t.crypto.Util.hashHex;e.cms===void 0&&b(e.cms);var N=e.cms,L=function(z,te){for(var me,at=3;at<6;at++)if(me=w(z,0,[1,0,at]),me!==void 0){var st=z.substr(me,2);st==="a0"&&(te.certsIdx=me),st==="a1"&&(te.revinfosIdx=me),st==="31"&&(te.signerinfosIdx=me)}},ne=function(z,te){var me=te.signerinfosIdx;if(me!==void 0){var at=S(z,me);te.signerInfoIdxList=at;for(var st=0;st<at.length;st++){var ct=at[st],It={idx:ct};pe(z,It),te.signerInfos.push(It)}}},pe=function(z,te){var me=te.idx;te.signerid_issuer1=A(z,me,[1,0],"30"),te.signerid_serial1=g(z,me,[1,1],"02"),te.hashalg=C(g(z,me,[2,0],"06"));var at=w(z,me,[3],"a0");te.idxSignedAttrs=at,I(z,te,at);var st=S(z,me),ct=st.length;if(ct<6)throw"malformed SignerInfo";te.sigalg=C(g(z,me,[ct-2,0],"06")),te.sigval=g(z,me,[ct-1],"04")},I=function(z,te,me){var at=S(z,me);te.signedAttrIdxList=at;for(var st=0;st<at.length;st++){var ct=at[st],It=g(z,ct,[0],"06"),Dt;It==="2a864886f70d010905"?(Dt=nr(g(z,ct,[1,0])),te.saSigningTime=Dt):It==="2a864886f70d010904"&&(Dt=g(z,ct,[1,0],"04"),te.saMessageDigest=Dt)}},B=function(z,te){if(g(z,0,[0],"06")!=="2a864886f70d010702")return te;te.cmsType="signedData",te.econtent=g(z,0,[1,0,2,1,0]),L(z,te),te.signerInfos=[],ne(z,te)},j=function(z,te){for(var me=te.parse.signerInfos,at=me.length,st=!0,ct=0;ct<at;ct++){var It=me[ct];M(z,te,It,ct),It.isValid||(st=!1)}te.isValid=st},R=function(z,te,me,at){var st=te.parse.certsIdx,ct;if(te.certs===void 0){ct=[],te.certkeys=[];for(var It=S(z,st),Dt=0;Dt<It.length;Dt++){var Ht=y(z,It[Dt]),jt=new pt;jt.readCertHex(Ht),ct[Dt]=jt,te.certkeys[Dt]=jt.getPublicKey()}te.certs=ct}else ct=te.certs;te.cccc=ct.length,te.cccci=It.length;for(var Dt=0;Dt<ct.length;Dt++){var hn=jt.getIssuerHex(),Ar=jt.getSerialNumberHex();me.signerid_issuer1===hn&&me.signerid_serial1===Ar&&(me.certkey_idx=Dt)}},M=function(z,te,me,at){me.verifyDetail={};var st=me.verifyDetail,ct=te.parse.econtent,It=me.hashalg,Dt=me.saMessageDigest;st.validMessageDigest=!1,x(ct,It)===Dt&&(st.validMessageDigest=!0),R(z,te,me,at),st.validSignatureValue=!1;var Ht=me.sigalg,jt="31"+y(z,me.idxSignedAttrs).substr(2);me.signedattrshex=jt;var hn=te.certs[me.certkey_idx].getPublicKey(),Ar=new p.crypto.Signature({alg:Ht});Ar.init(hn),Ar.updateHex(jt);var lr=Ar.verify(me.sigval);st.validSignatureValue_isValid=lr,lr===!0&&(st.validSignatureValue=!0),me.isValid=!1,st.validMessageDigest&&st.validSignatureValue&&(me.isValid=!0)},Q=function(){},V={isValid:!1,parse:{}};return B(N,V.parse),j(N,V),V};p.asn1.cms.CMSParser=function(){var e=Error,t=pt,r=new t,n=Ue,a=n.getV,u=n.getTLV,i=n.getIdxbyList,c=n.getTLVbyList,l=n.getTLVbyListEx,m=n.getVbyList,E=n.getVbyListEx,b=n.getChildIdx;this.getCMSSignedData=function(v){var g=c(v,0,[1,0]),A=this.getSignedData(g);return A},this.getSignedData=function(v){var g=b(v,0),A={},w=a(v,g[0]),S=parseInt(w,16);A.version=S;var y=u(v,g[1]);A.hashalgs=this.getHashAlgArray(y);var C=u(v,g[2]);A.econtent=this.getEContent(C);var x=l(v,0,["[0]"]);x!=null&&(A.certs=this.getCertificateSet(x));var N=l(v,0,["[1]"]);N!=null;var L=l(v,0,[3]);return A.sinfos=this.getSignerInfos(L),A},this.getHashAlgArray=function(v){for(var g=b(v,0),A=new t,w=[],S=0;S<g.length;S++){var y=u(v,g[S]),C=A.getAlgorithmIdentifierName(y);w.push(C)}return w},this.getEContent=function(v){var g={},A=m(v,0,[0]),w=m(v,0,[1,0]);return g.type=p.asn1.x509.OID.oid2name(Ue.hextooidstr(A)),g.content={hex:w},g},this.getSignerInfos=function(v){for(var g=[],A=b(v,0),w=0;w<A.length;w++){var S=u(v,A[w]),y=this.getSignerInfo(S);g.push(y)}return g},this.getSignerInfo=function(v){var g={},A=b(v,0),w=n.getInt(v,A[0],-1);w!=-1&&(g.version=w);var S=u(v,A[1]),y=this.getIssuerAndSerialNumber(S);g.id=y;var C=u(v,A[2]),x=r.getAlgorithmIdentifierName(C);g.hashalg=x;var N=l(v,0,["[0]"]);if(N!=null){var L=this.getAttributeList(N);g.sattrs=L}var ne=l(v,0,[3]),pe=r.getAlgorithmIdentifierName(ne);g.sigalg=pe;var I=E(v,0,[4]);g.sighex=I;var B=l(v,0,["[1]"]);if(B!=null){var j=this.getAttributeList(B);g.uattrs=j}return g},this.getSignerIdentifier=function(v){if(v.substr(0,2)=="30")return this.getIssuerAndSerialNumber(v);throw new Error("SKID of signerIdentifier not supported")},this.getIssuerAndSerialNumber=function(v){var g={type:"isssn"},A=b(v,0),w=u(v,A[0]);g.issuer=r.getX500Name(w);var S=a(v,A[1]);return g.serial={hex:S},g},this.getAttributeList=function(v){for(var g=[],A=b(v,0),w=0;w<A.length;w++){var S=u(v,A[w]),y=this.getAttribute(S);g.push(y)}return{array:g}},this.getAttribute=function(v){var g={},A=b(v,0),w=n.getOID(v,A[0]),S=p.asn1.x509.OID.oid2name(w);g.attr=S;var y=u(v,A[1]),C=b(y,0);if(C.length==1)g.valhex=u(y,C[0]);else{for(var x=[],N=0;N<C.length;N++)x.push(u(y,C[N]));g.valhex=x}return S=="contentType"?this.setContentType(g):S=="messageDigest"?this.setMessageDigest(g):S=="signingTime"?this.setSigningTime(g):S=="signingCertificate"?this.setSigningCertificate(g):S=="signingCertificateV2"?this.setSigningCertificateV2(g):S=="signaturePolicyIdentifier"&&this.setSignaturePolicyIdentifier(g),g},this.setContentType=function(v){var g=n.getOIDName(v.valhex,0,null);g!=null&&(v.type=g,delete v.valhex)},this.setSigningTime=function(v){var g=a(v.valhex,0),A=nr(g);v.str=A,delete v.valhex},this.setMessageDigest=function(v){var g=a(v.valhex,0);v.hex=g,delete v.valhex},this.setSigningCertificate=function(v){var g=b(v.valhex,0);if(g.length>0){for(var A=u(v.valhex,g[0]),w=b(A,0),S=[],y=0;y<w.length;y++){var C=u(A,w[y]),x=this.getESSCertID(C);S.push(x)}v.array=S}if(g.length>1){var N=u(v.valhex,g[1]);v.polhex=N}delete v.valhex},this.setSignaturePolicyIdentifier=function(v){var g=b(v.valhex,0);if(g.length>0){var A=n.getOID(v.valhex,g[0]);v.oid=A}if(g.length>1){var w=new t,S=b(v.valhex,g[1]),y=u(v.valhex,S[0]),C=w.getAlgorithmIdentifierName(y);v.alg=C;var x=a(v.valhex,S[1]);v.hash=x}delete v.valhex},this.setSigningCertificateV2=function(v){var g=b(v.valhex,0);if(g.length>0){for(var A=u(v.valhex,g[0]),w=b(A,0),S=[],y=0;y<w.length;y++){var C=u(A,w[y]),x=this.getESSCertIDv2(C);S.push(x)}v.array=S}if(g.length>1){var N=u(v.valhex,g[1]);v.polhex=N}delete v.valhex},this.getESSCertID=function(v){var g={},A=b(v,0);if(A.length>0){var w=a(v,A[0]);g.hash=w}if(A.length>1){var S=u(v,A[1]),y=this.getIssuerSerial(S);y.serial!=null&&(g.serial=y.serial),y.issuer!=null&&(g.issuer=y.issuer)}return g},this.getESSCertIDv2=function(v){var g={},A=b(v,0);if(A.length<1||3<A.length)throw new e("wrong number of elements");var w=0;if(v.substr(A[0],2)=="30"){var S=u(v,A[0]);g.alg=r.getAlgorithmIdentifierName(S),w++}else g.alg="sha256";var y=a(v,A[w]);if(g.hash=y,A.length>w+1){var C=u(v,A[w+1]),x=this.getIssuerSerial(C);g.issuer=x.issuer,g.serial=x.serial}return g},this.getIssuerSerial=function(v){var g={},A=b(v,0),w=u(v,A[0]),S=r.getGeneralNames(w),y=S[0].dn;g.issuer=y;var C=a(v,A[1]);return g.serial={hex:C},g},this.getCertificateSet=function(v){for(var g=b(v,0),A=[],w=0;w<g.length;w++){var S=u(v,g[w]);if(S.substr(0,2)=="30"){var y=cn(S,"CERTIFICATE");A.push(y)}}return{array:A,sortflag:!1}}};(typeof p>"u"||!p)&&(p={});(typeof p.asn1>"u"||!p.asn1)&&(p.asn1={});(typeof p.asn1.tsp>"u"||!p.asn1.tsp)&&(p.asn1.tsp={});p.asn1.tsp.TimeStampToken=function(e){var t=p,r=t.asn1,n=r.tsp;n.TimeStampToken.superclass.constructor.call(this),this.params=null,this.getEncodedHexPrepare=function(){var a=new n.TSTInfo(this.params.econtent.content);this.params.econtent.content.hex=a.tohex()},e!=null&&this.setByParam(e)};Ce(p.asn1.tsp.TimeStampToken,p.asn1.cms.SignedData);p.asn1.tsp.TSTInfo=function(e){var t=Error,r=p,n=r.asn1,a=n.DERSequence,u=n.DERInteger,i=n.DERBoolean,c=n.DERGeneralizedTime,l=n.DERObjectIdentifier,m=n.DERTaggedObject,E=n.tsp,b=E.MessageImprint,v=E.Accuracy,g=n.x509.X500Name,A=n.x509.GeneralName;if(E.TSTInfo.superclass.constructor.call(this),this.dVersion=new u({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerial=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.tohex=function(){var w=[this.dVersion];if(this.dPolicy==null)throw new Error("policy shall be specified.");if(w.push(this.dPolicy),this.dMessageImprint==null)throw new Error("messageImprint shall be specified.");if(w.push(this.dMessageImprint),this.dSerial==null)throw new Error("serialNumber shall be specified.");if(w.push(this.dSerial),this.dGenTime==null)throw new Error("genTime shall be specified.");w.push(this.dGenTime),this.dAccuracy!=null&&w.push(this.dAccuracy),this.dOrdering!=null&&w.push(this.dOrdering),this.dNonce!=null&&w.push(this.dNonce),this.dTsa!=null&&w.push(this.dTsa);var S=new a({array:w});return this.hTLV=S.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0){if(typeof e.policy=="string"){if(!e.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new l({oid:e.policy})}e.messageImprint!==void 0&&(this.dMessageImprint=new b(e.messageImprint)),e.serial!==void 0&&(this.dSerial=new u(e.serial)),e.genTime!==void 0&&(this.dGenTime=new c(e.genTime)),e.accuracy!==void 0&&(this.dAccuracy=new v(e.accuracy)),e.ordering!==void 0&&e.ordering==!0&&(this.dOrdering=new i),e.nonce!==void 0&&(this.dNonce=new u(e.nonce)),e.tsa!==void 0&&(this.dTsa=new m({tag:"a0",explicit:!0,obj:new A({dn:e.tsa})}))}};Ce(p.asn1.tsp.TSTInfo,p.asn1.ASN1Object);p.asn1.tsp.Accuracy=function(e){var t=p,r=t.asn1,n=r.ASN1Util.newObject;r.tsp.Accuracy.superclass.constructor.call(this),this.params=null,this.tohex=function(){var a=this.params,u=[];return a.seconds!=null&&typeof a.seconds=="number"&&u.push({int:a.seconds}),a.millis!=null&&typeof a.millis=="number"&&u.push({tag:{tagi:"80",obj:{int:a.millis}}}),a.micros!=null&&typeof a.micros=="number"&&u.push({tag:{tagi:"81",obj:{int:a.micros}}}),n({seq:u}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Ce(p.asn1.tsp.Accuracy,p.asn1.ASN1Object);p.asn1.tsp.MessageImprint=function(e){var t=p,r=t.asn1,n=r.DERSequence,a=r.DEROctetString,u=r.x509,i=u.AlgorithmIdentifier;r.tsp.MessageImprint.superclass.constructor.call(this),this.params=null,this.tohex=function(){var c=this.params,l=new i({name:c.alg}),m=new a({hex:c.hash}),E=new n({array:[l,m]});return E.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};Ce(p.asn1.tsp.MessageImprint,p.asn1.ASN1Object);p.asn1.tsp.TimeStampReq=function(e){var t=p,r=t.asn1,n=r.DERSequence,a=r.DERInteger,u=r.DERBoolean,i=r.ASN1Object,c=r.DERObjectIdentifier,l=r.tsp,m=l.MessageImprint;l.TimeStampReq.superclass.constructor.call(this),this.params=null,this.tohex=function(){var E=this.params,b=[];b.push(new a({int:1})),E.messageImprint instanceof p.asn1.ASN1Object?b.push(E.messageImprint):b.push(new m(E.messageImprint)),E.policy!=null&&b.push(new c(E.policy)),E.nonce!=null&&b.push(new a(E.nonce)),E.certreq==!0&&b.push(new u);var v=new n({array:b});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Ce(p.asn1.tsp.TimeStampReq,p.asn1.ASN1Object);p.asn1.tsp.TimeStampResp=function(e){var t=p,r=t.asn1,n=r.DERSequence,a=r.ASN1Object,u=r.tsp,i=u.PKIStatusInfo;u.TimeStampResp.superclass.constructor.call(this),this.params=null,this.tohex=function(){var c=this.params,l=[];if(c.econtent!=null||c.tst!=null)if(c.statusinfo!=null?l.push(new i(c.statusinfo)):l.push(new i("granted")),c.econtent!=null)l.push(new u.TimeStampToken(c).getContentInfo());else if(c.tst instanceof r.ASN1Object)l.push(c.tst);else throw new Error("improper member tst value");else if(c.statusinfo!=null)l.push(new i(c.statusinfo));else throw new Error("parameter for token nor statusinfo not specified");var m=new n({array:l});return m.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Ce(p.asn1.tsp.TimeStampResp,p.asn1.ASN1Object);p.asn1.tsp.PKIStatusInfo=function(e){var t=Error,r=p,n=r.asn1,a=n.DERSequence,u=n.tsp,i=u.PKIStatus,c=u.PKIFreeText,l=u.PKIFailureInfo;u.PKIStatusInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var m=this.params,E=[];if(typeof m=="string")E.push(new i(m));else{if(m.status==null)throw new t("property 'status' unspecified");E.push(new i(m.status)),m.statusstr!=null&&E.push(new c(m.statusstr)),m.failinfo!=null&&E.push(new l(m.failinfo))}var b=new a({array:E});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Ce(p.asn1.tsp.PKIStatusInfo,p.asn1.ASN1Object);p.asn1.tsp.PKIStatus=function(e){var t=Error,r=p,n=r.asn1,a=n.DERInteger,u=n.tsp;u.PKIStatus.superclass.constructor.call(this);var i={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5};this.params=null,this.tohex=function(){var c=this.params,l,m;if(typeof c=="string")try{m=i[c]}catch{throw new t("undefined name: "+c)}else if(typeof c=="number")m=c;else throw new t("unsupported params");return new a({int:m}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Ce(p.asn1.tsp.PKIStatus,p.asn1.ASN1Object);p.asn1.tsp.PKIFreeText=function(e){var t=Error,r=p,n=r.asn1,a=n.DERSequence,u=n.DERUTF8String,i=n.tsp;i.PKIFreeText.superclass.constructor.call(this),this.params=null,this.tohex=function(){var c=this.params;if(!(c instanceof Array))throw new t("wrong params: not array");for(var l=[],m=0;m<c.length;m++)l.push(new u({str:c[m]}));var E=new a({array:l});return E.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Ce(p.asn1.tsp.PKIFreeText,p.asn1.ASN1Object);p.asn1.tsp.PKIFailureInfo=function(e){var t=Error,r=p,n=r.asn1,a=n.DERBitString,u=n.tsp,i=u.PKIFailureInfo,c={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25};i.superclass.constructor.call(this),this.params=null,this.getBinValue=function(){var l=this.params,m=0;if(typeof l=="number"&&0<=l&&l<=25){m|=1<<l;for(var E=m.toString(2),b="",v=E.length-1;v>=0;v--)b+=E[v];return b}else{if(typeof l=="string"&&c[l]!=null)return Fc([l],c);if(typeof l=="object"&&l.length!=null)return Fc(l,c);throw new t("wrong params")}},this.tohex=function(){var l=this.params,m=this.getBinValue();return new a({bin:m}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Ce(p.asn1.tsp.PKIFailureInfo,p.asn1.ASN1Object);p.asn1.tsp.AbstractTSAAdapter=function(e){this.getTSTHex=function(t,r){throw"not implemented yet"}};p.asn1.tsp.SimpleTSAAdapter=function(e){var t=p,r=t.asn1,n=r.tsp,a=t.crypto.Util.hashHex;n.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(u,i){var c=a(u,i);this.params.econtent.content.messageImprint={alg:i,hash:c},this.params.econtent.content.serial={int:this.serial++};var l=Math.floor(Math.random()*1e9);this.params.econtent.content.nonce={int:l};var m=new n.TimeStampToken(this.params);return m.getContentInfoEncodedHex()},e!==void 0&&(this.params=e)};Ce(p.asn1.tsp.SimpleTSAAdapter,p.asn1.tsp.AbstractTSAAdapter);p.asn1.tsp.FixedTSAAdapter=function(e){var t=p,r=t.asn1,n=r.tsp,a=t.crypto.Util.hashHex;n.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(u,i){var c=a(u,i);this.params.econtent.content.messageImprint={alg:i,hash:c};var l=new n.TimeStampToken(this.params);return l.getContentInfoEncodedHex()},e!==void 0&&(this.params=e)};Ce(p.asn1.tsp.FixedTSAAdapter,p.asn1.tsp.AbstractTSAAdapter);p.asn1.tsp.TSPUtil=new function(){};p.asn1.tsp.TSPUtil.newTimeStampToken=function(e){return new p.asn1.tsp.TimeStampToken(e)};p.asn1.tsp.TSPUtil.parseTimeStampReq=function(e){var t=new p.asn1.tsp.TSPParser;return t.getTimeStampReq(e)};p.asn1.tsp.TSPUtil.parseMessageImprint=function(e){var t=new p.asn1.tsp.TSPParser;return t.getMessageImprint(e)};p.asn1.tsp.TSPParser=function(){var e=Error,t=pt,r=new t,n=Ue,a=n.getV,u=n.getTLV,i=n.getIdxbyList,c=n.getTLVbyListEx,l=n.getChildIdx,m=["granted","grantedWithMods","rejection","waiting","revocationWarning","revocationNotification"],E={0:"badAlg",2:"badRequest",5:"badDataFormat",14:"timeNotAvailable",15:"unacceptedPolicy",16:"unacceptedExtension",17:"addInfoNotAvailable",25:"systemFailure"};this.getResponse=function(b){var v=l(b,0);if(v.length==1)return this.getPKIStatusInfo(u(b,v[0]));if(v.length>1){var g=this.getPKIStatusInfo(u(b,v[0])),A=u(b,v[1]),w=this.getToken(A);return w.statusinfo=g,w}},this.getToken=function(b){var v=new p.asn1.cms.CMSParser,g=v.getCMSSignedData(b);return this.setTSTInfo(g),g},this.setTSTInfo=function(b){var v=b.econtent;if(v.type=="tstinfo"){var g=v.content.hex,A=this.getTSTInfo(g);v.content=A}},this.getTSTInfo=function(b){var v={},g=l(b,0),A=a(b,g[1]);v.policy=Tc(A);var w=u(b,g[2]);v.messageImprint=this.getMessageImprint(w);var S=a(b,g[3]);v.serial={hex:S};var y=a(b,g[4]);v.genTime={str:nr(y)};var C=0;if(g.length>5&&b.substr(g[5],2)=="30"){var x=u(b,g[5]);v.accuracy=this.getAccuracy(x),C++}if(g.length>5+C&&b.substr(g[5+C],2)=="01"){var N=a(b,g[5+C]);N=="ff"&&(v.ordering=!0),C++}if(g.length>5+C&&b.substr(g[5+C],2)=="02"){var L=a(b,g[5+C]);v.nonce={hex:L},C++}if(g.length>5+C&&b.substr(g[5+C],2)=="a0"){var ne=u(b,g[5+C]);ne="30"+ne.substr(2),pGeneralNames=r.getGeneralNames(ne);var pe=pGeneralNames[0].dn;v.tsa=pe,C++}if(g.length>5+C&&b.substr(g[5+C],2)=="a1"){var I=u(b,g[5+C]);I="30"+I.substr(2);var B=r.getExtParamArray(I);v.ext=B,C++}return v},this.getAccuracy=function(b){for(var v={},g=l(b,0),A=0;A<g.length;A++){var w=b.substr(g[A],2),S=a(b,g[A]),y=parseInt(S,16);w=="02"?v.seconds=y:w=="80"?v.millis=y:w=="81"&&(v.micros=y)}return v},this.getMessageImprint=function(b){if(b.substr(0,2)!="30")throw new Error("head of messageImprint hex shall be x30");var v={},g=l(b,0),A=i(b,0,[0,0]),w=a(b,A),S=n.hextooidstr(w),y=p.asn1.x509.OID.oid2name(S);if(y=="")throw new Error("hashAlg name undefined: "+S);var C=y,x=i(b,0,[1]);return v.alg=C,v.hash=a(b,x),v},this.getPKIStatusInfo=function(b){var v={},g=l(b,0),A=0;try{var w=a(b,g[0]),S=parseInt(w,16);v.status=m[S]}catch{}if(g.length>1&&b.substr(g[1],2)=="30"){var y=u(b,g[1]);v.statusstr=this.getPKIFreeText(y),A++}if(g.length>A&&b.substr(g[1+A],2)=="03"){var C=u(b,g[1+A]);v.failinfo=this.getPKIFailureInfo(C)}return v},this.getPKIFreeText=function(b){for(var v=[],g=l(b,0),A=0;A<g.length;A++)v.push(n.getString(b,g[A]));return v},this.getPKIFailureInfo=function(b){var v=n.getInt(b,0);return E[v]!=null?E[v]:v},this.getTimeStampReq=function(b){var v={};v.certreq=!1;var g=l(b,0);if(g.length<2)throw new Error("TimeStampReq must have at least 2 items");var A=u(b,g[1]);v.messageImprint=p.asn1.tsp.TSPUtil.parseMessageImprint(A);for(var w=2;w<g.length;w++){var S=g[w],y=b.substr(S,2);if(y=="06"){var C=a(b,S);v.policy=n.hextooidstr(C)}y=="02"&&(v.nonce=a(b,S)),y=="01"&&(v.certreq=!0)}return v}};(typeof p>"u"||!p)&&(p={});(typeof p.asn1>"u"||!p.asn1)&&(p.asn1={});(typeof p.asn1.cades>"u"||!p.asn1.cades)&&(p.asn1.cades={});p.asn1.cades.SignaturePolicyIdentifier=function(e){var t=p,r=t.asn1,n=r.cades,a=n.SignaturePolicyId;n.SignaturePolicyIdentifier.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.15",this.params=null,this.getValueArray=function(){return[new a(this.params)]},this.setByParam=function(u){this.params=u},e!=null&&this.setByParam(e)};Ce(p.asn1.cades.SignaturePolicyIdentifier,p.asn1.cms.Attribute);p.asn1.cades.SignaturePolicyId=function(e){var t=p,r=t.asn1,n=r.DERSequence,a=r.DERObjectIdentifier,u=r.x509,i=u.AlgorithmIdentifier,c=r.cades,l=c.SignaturePolicyId,m=c.OtherHashAlgAndValue;l.superclass.constructor.call(this),this.params=null,this.tohex=function(){var E=this.params,b=[];b.push(new a(E.oid)),b.push(new m(E));var v=new n({array:b});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(E){this.params=E},e!=null&&this.setByParam(e)};Ce(p.asn1.cades.SignaturePolicyId,p.asn1.ASN1Object);p.asn1.cades.OtherHashAlgAndValue=function(e){var t=Error,r=p,n=r.asn1,a=n.DERSequence,u=n.DEROctetString,i=n.x509,c=i.AlgorithmIdentifier,l=n.cades,m=l.OtherHashAlgAndValue;m.superclass.constructor.call(this),this.params=null,this.tohex=function(){var E=this.params;if(E.alg==null)throw new t("property 'alg' not specified");if(E.hash==null&&E.cert==null)throw new t("property 'hash' nor 'cert' not specified");var b=null;if(E.hash!=null)b=E.hash;else if(E.cert!=null){if(typeof E.cert!="string")throw new t("cert not string");var v=E.cert;E.cert.indexOf("-----BEGIN")!=-1&&(v=Cr(E.cert)),b=p.crypto.Util.hashHex(v,E.alg)}var g=[];g.push(new c({name:E.alg})),g.push(new u({hex:b}));var A=new a({array:g});return A.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Ce(p.asn1.cades.OtherHashAlgAndValue,p.asn1.ASN1Object);p.asn1.cades.OtherHashValue=function(e){p.asn1.cades.OtherHashValue.superclass.constructor.call(this);var t=Error,r=p,n=r.lang.String.isHex,a=r.asn1,u=a.DEROctetString,i=r.crypto.Util.hashHex;this.params=null,this.tohex=function(){var c=this.params;if(c.hash==null&&c.cert==null)throw new t("hash or cert not specified");var l=null;if(c.hash!=null)l=c.hash;else if(c.cert!=null){if(typeof c.cert!="string")throw new t("cert not string");var m=c.cert;c.cert.indexOf("-----BEGIN")!=-1&&(m=Cr(c.cert)),l=p.crypto.Util.hashHex(m,"sha1")}return new u({hex:l}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Ce(p.asn1.cades.OtherHashValue,p.asn1.ASN1Object);p.asn1.cades.SignatureTimeStamp=function(e){var t=Error,r=p,n=r.lang.String.isHex,a=r.asn1,u=a.ASN1Object,i=a.x509,c=a.cades;c.SignatureTimeStamp.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.14",this.params=null,this.getValueArray=function(){var l=this.params;if(l.tst!=null)if(n(l.tst)){var m=new u;return m.hTLV=l.tst,[m]}else{if(l.tst instanceof u)return[l.tst];throw new t("params.tst has wrong value")}else if(l.res!=null){var E=l.res;if(E instanceof u&&(E=E.tohex()),typeof E!="string"||!n(E))throw new t("params.res has wrong value");var b=Ue.getTLVbyList(E,0,[1]),m=new u;return m.hTLV=l.tst,[m]}},e!=null&&this.setByParam(e)};Ce(p.asn1.cades.SignatureTimeStamp,p.asn1.cms.Attribute);p.asn1.cades.CompleteCertificateRefs=function(e){var t=Error,r=p,n=r.asn1,a=n.DERSequence,u=n.cades,i=u.OtherCertID,c=r.lang.String.isHex;u.CompleteCertificateRefs.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.21",this.params=null,this.getValueArray=function(){for(var l=this.params,m=[],E=0;E<l.array.length;E++){var b=l.array[E];if(typeof b=="string")if(b.indexOf("-----BEGIN")!=-1)b={cert:b};else if(c(b))b={hash:b};else throw new t("unsupported value: "+b);l.alg!=null&&b.alg==null&&(b.alg=l.alg),l.hasis!=null&&b.hasis==null&&(b.hasis=l.hasis);var v=new i(b);m.push(v)}var g=new a({array:m});return[g]},e!=null&&this.setByParam(e)};Ce(p.asn1.cades.CompleteCertificateRefs,p.asn1.cms.Attribute);p.asn1.cades.OtherCertID=function(e){var t=p,r=t.asn1,n=r.DERSequence,a=r.cms,u=a.IssuerSerial,i=r.cades,c=i.OtherHashValue,l=i.OtherHashAlgAndValue;i.OtherCertID.superclass.constructor.call(this),this.params=e,this.tohex=function(){var m=this.params;typeof m=="string"&&(m.indexOf("-----BEGIN")!=-1?m={cert:m}:_isHex(m)&&(m={hash:m}));var E=[],b=null;if(m.alg!=null?b=new l(m):b=new c(m),E.push(b),m.cert!=null&&m.hasis==!0||m.issuer!=null&&m.serial!=null){var v=new u(m);E.push(v)}var g=new n({array:E});return g.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Ce(p.asn1.cades.OtherCertID,p.asn1.ASN1Object);p.asn1.cades.OtherHash=function(e){var t=Error,r=p,n=r.asn1,a=n.cms,u=n.cades,i=u.OtherHashAlgAndValue,c=u.OtherHashValue,l=r.crypto.Util.hashHex,m=r.lang.String.isHex;u.OtherHash.superclass.constructor.call(this),this.params=null,this.tohex=function(){var E=this.params;typeof E=="string"&&(E.indexOf("-----BEGIN")!=-1?E={cert:E}:m(E)&&(E={hash:E}));var b=null;return E.alg!=null?b=new i(E):b=new c(E),b.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};Ce(p.asn1.cades.OtherHash,p.asn1.ASN1Object);p.asn1.cades.CAdESUtil=new function(){};p.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(e){var t=new p.asn1.cms.CMSParser,r=t.getCMSSignedData(e);return r};p.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(e,t,r){var n=Ue,a=n.getChildIdx,u=n.getTLV,i=n.getV,c=p,l=c.asn1,m=l.ASN1Object,E=l.cms,b=E.AttributeList,v=E.SignerInfo,g={},A=a(e,t);if(A.length!=6)throw"not supported items for SignerInfo (!=6)";var w=A.shift();g.version=u(e,w);var S=A.shift();g.si=u(e,S);var y=A.shift();g.digalg=u(e,y);var C=A.shift();g.sattrs=u(e,C);var x=A.shift();g.sigalg=u(e,x);var N=A.shift();g.sig=u(e,N),g.sigval=i(e,N);var L=null;return g.obj=new v,L=new m,L.hTLV=g.version,g.obj.dCMSVersion=L,L=new m,L.hTLV=g.si,g.obj.dSignerIdentifier=L,L=new m,L.hTLV=g.digalg,g.obj.dDigestAlgorithm=L,L=new m,L.hTLV=g.sattrs,g.obj.dSignedAttrs=L,L=new m,L.hTLV=g.sigalg,g.obj.dSigAlg=L,L=new m,L.hTLV=g.sig,g.obj.dSig=L,g.obj.dUnsignedAttrs=new b,g};(typeof p.asn1.csr>"u"||!p.asn1.csr)&&(p.asn1.csr={});p.asn1.csr.CertificationRequest=function(e){var t=p,r=t.asn1,n=r.DERBitString,a=r.DERSequence,u=r.csr,i=r.x509,c=u.CertificationRequestInfo;u.CertificationRequest.superclass.constructor.call(this),this.setByParam=function(l){this.params=l},this.sign=function(){var l=new c(this.params).tohex(),m=new p.crypto.Signature({alg:this.params.sigalg});m.init(this.params.sbjprvkey),m.updateHex(l);var E=m.sign();this.params.sighex=E},this.getPEM=function(){return cn(this.tohex(),"CERTIFICATE REQUEST")},this.tohex=function(){var l=this.params,m=new p.asn1.csr.CertificationRequestInfo(this.params),E=new p.asn1.x509.AlgorithmIdentifier({name:l.sigalg});if(l.sighex==null&&l.sbjprvkey!=null&&this.sign(),l.sighex==null)throw new Error("sighex or sbjprvkey parameter not defined");var b=new n({hex:"00"+l.sighex}),v=new a({array:[m,E,b]});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};Ce(p.asn1.csr.CertificationRequest,p.asn1.ASN1Object);p.asn1.csr.CertificationRequestInfo=function(e){var t=p,r=t.asn1,n=r.DERBitString,a=r.DERSequence,u=r.DERInteger,i=r.DERUTF8String,c=r.DERTaggedObject,l=r.ASN1Util.newObject,m=r.csr,E=r.x509,b=E.X500Name,v=E.Extensions,g=E.SubjectPublicKeyInfo,A=m.AttributeList;m.CertificationRequestInfo.superclass.constructor.call(this),this.params=null,this.setByParam=function(S){S!=null&&(this.params=S)},this.tohex=function(){var S=this.params,y=[];if(y.push(new u({int:0})),y.push(new b(S.subject)),y.push(new g(Lt.getKey(S.sbjpubkey))),S.attrs!=null){var C=w(S.attrs),x=l({tag:{tage:"a0",obj:C}});y.push(x)}else if(S.extreq!=null){var N=new v(S.extreq),x=l({tag:{tage:"a0",obj:{seq:[{oid:"1.2.840.113549.1.9.14"},{set:[N]}]}}});y.push(x)}else y.push(new c({tag:"a0",explicit:!1,obj:new i({str:""})}));var L=new a({array:y});return L.tohex()},this.getEncodedHex=function(){return this.tohex()};function w(S){for(var y=Error,C=p.asn1.x509.Extensions,x=[],N=0;N<S.length;N++){var L=S[N],ne=L.attr;if(ne=="extensionRequest"){var pe=new C(L.ext),I={seq:[{oid:"1.2.840.113549.1.9.14"},{set:[pe]}]};x.push(I)}else if(ne=="unstructuredName"){var I={seq:[{oid:"1.2.840.113549.1.9.2"},{set:L.names}]};x.push(I)}else if(ne=="challengePassword"){var I={seq:[{oid:"1.2.840.113549.1.9.7"},{set:[{utf8str:L.password}]}]};x.push(I)}else throw new y("unknown CSR attribute")}return{set:x}}e!=null&&this.setByParam(e)};Ce(p.asn1.csr.CertificationRequestInfo,p.asn1.ASN1Object);p.asn1.csr.AttributeList=function(e){function t(r){}};Ce(p.asn1.csr.AttributeList,p.asn1.ASN1Object);p.asn1.csr.CSRUtil=new function(){};p.asn1.csr.CSRUtil.newCSRPEM=function(e){var t=Lt,r=p.asn1.csr,n=new r.CertificationRequest(e),a=n.getPEM();return a};p.asn1.csr.CSRUtil.getParam=function(e,t){var r=Ue,n=r.getV,a=r.getIdxbyList,u=r.getTLVbyList,i=r.getTLVbyListEx,c=r.getVbyListEx,l=function(C){var x=a(C,0,[0,3,0,0],"06");return n(C,x)!="2a864886f70d01090e"?null:u(C,0,[0,3,0,1,0],"30")},m={};if(e.indexOf("-----BEGIN CERTIFICATE REQUEST")==-1)throw new Error("argument is not PEM file");var E=Cr(e,"CERTIFICATE REQUEST");t&&(m.tbs=u(E,0,[0]));try{var b=i(E,0,[0,1]);if(b=="3000")m.subject={};else{var w=new pt;m.subject=w.getX500Name(b)}}catch{}var v=i(E,0,[0,2]),g=Lt.getKey(v,null,"pkcs8pub");m.sbjpubkey=Lt.getPEM(g,"PKCS8PUB");var A=l(E),w=new pt;A!=null&&(m.extreq=w.getExtParamArray(A));try{var S=i(E,0,[1],"30"),w=new pt;m.sigalg=w.getAlgorithmIdentifierName(S)}catch{}try{var y=c(E,0,[2]);m.sighex=y}catch{}return m};p.asn1.csr.CSRUtil.verifySignature=function(e){try{var t=null;if(typeof e=="string"&&e.indexOf("-----BEGIN CERTIFICATE REQUEST")!=-1?t=p.asn1.csr.CSRUtil.getParam(e,!0):typeof e=="object"&&e.sbjpubkey!=null&&e.sigalg!=null&&e.sighex!=null&&e.tbs!=null&&(t=e),t==null)return!1;var r=new p.crypto.Signature({alg:t.sigalg});return r.init(t.sbjpubkey),r.updateHex(t.tbs),r.verify(t.sighex)}catch(n){return alert(n),!1}};(typeof p>"u"||!p)&&(p={});(typeof p.asn1>"u"||!p.asn1)&&(p.asn1={});(typeof p.asn1.ocsp>"u"||!p.asn1.ocsp)&&(p.asn1.ocsp={});p.asn1.ocsp.DEFAULT_HASH="sha1";p.asn1.ocsp.OCSPResponse=function(e){p.asn1.ocsp.OCSPResponse.superclass.constructor.call(this);var t=p.asn1.DEREnumerated,r=p.asn1.ASN1Util.newObject,n=p.asn1.ocsp.ResponseBytes,a=["successful","malformedRequest","internalError","tryLater","_not_used_","sigRequired","unauthorized"];this.params=null,this._getStatusCode=function(){var u=this.params.resstatus;return typeof u=="number"?u:typeof u!="string"?-1:a.indexOf(u)},this.setByParam=function(u){this.params=u},this.tohex=function(){var u=this.params,i=this._getStatusCode();if(i==-1)throw new Error("responseStatus not supported: "+u.resstatus);if(i!=0)return r({seq:[{enum:{int:i}}]}).tohex();var c=new n(u);return r({seq:[{enum:{int:0}},{tag:{tag:"a0",explicit:!0,obj:c}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};Ce(p.asn1.ocsp.OCSPResponse,p.asn1.ASN1Object);p.asn1.ocsp.ResponseBytes=function(e){p.asn1.ocsp.ResponseBytes.superclass.constructor.call(this);var t=p.asn1,r=t.DERSequence,n=t.DERObjectIdentifier,a=t.DEROctetString,u=t.ocsp.BasicOCSPResponse;this.params=null,this.setByParam=function(i){this.params=i},this.tohex=function(){var i=this.params;if(i.restype!="ocspBasic")throw new Error("not supported responseType: "+i.restype);var c=new u(i),l=[];l.push(new n({name:"ocspBasic"})),l.push(new a({hex:c.tohex()}));var m=new r({array:l});return m.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};Ce(p.asn1.ocsp.ResponseBytes,p.asn1.ASN1Object);p.asn1.ocsp.BasicOCSPResponse=function(e){p.asn1.ocsp.BasicOCSPResponse.superclass.constructor.call(this);var t=Error,r=p.asn1,n=r.ASN1Object,a=r.DERSequence,u=r.DERGeneralizedTime,i=r.DERTaggedObject,c=r.DERBitString,l=r.x509.Extensions,m=r.x509.AlgorithmIdentifier,E=r.ocsp,b=E.ResponderID;_SingleResponseList=E.SingleResponseList,_ResponseData=E.ResponseData,this.params=null,this.setByParam=function(v){this.params=v},this.sign=function(){var v=this.params,g=v.tbsresp.tohex(),A=new p.crypto.Signature({alg:v.sigalg});A.init(v.reskey),A.updateHex(g),v.sighex=A.sign()},this.tohex=function(){var v=this.params;v.tbsresp==null&&(v.tbsresp=new _ResponseData(v)),v.sighex==null&&v.reskey!=null&&this.sign();var g=[];if(g.push(v.tbsresp),g.push(new m({name:v.sigalg})),g.push(new c({hex:"00"+v.sighex})),v.certs!=null&&v.certs.length!=null){for(var A=[],w=0;w<v.certs.length;w++){var S=v.certs[w],y=null;if(Ue.isASN1HEX(S))y=S;else if(S.match(/-----BEGIN/))y=Cr(S);else throw new t("certs["+w+"] not hex or PEM");A.push(new n({tlv:y}))}var C=new a({array:A});g.push(new i({tag:"a0",explicit:!0,obj:C}))}var x=new a({array:g});return x.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};Ce(p.asn1.ocsp.BasicOCSPResponse,p.asn1.ASN1Object);p.asn1.ocsp.ResponseData=function(e){p.asn1.ocsp.ResponseData.superclass.constructor.call(this);var t=Error,r=p.asn1,n=r.DERSequence,a=r.DERGeneralizedTime,u=r.DERTaggedObject,i=r.x509.Extensions,c=r.ocsp,l=c.ResponderID;_SingleResponseList=c.SingleResponseList,this.params=null,this.tohex=function(){var m=this.params;m.respid!=null&&new t("respid not specified"),m.prodat!=null&&new t("prodat not specified"),m.array!=null&&new t("array not specified");var E=[];if(E.push(new l(m.respid)),E.push(new a(m.prodat)),E.push(new _SingleResponseList(m.array)),m.ext!=null){var b=new i(m.ext);E.push(new u({tag:"a1",explicit:!0,obj:b}))}var v=new n({array:E});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(m){this.params=m},e!==void 0&&this.setByParam(e)};Ce(p.asn1.ocsp.ResponseData,p.asn1.ASN1Object);p.asn1.ocsp.ResponderID=function(e){p.asn1.ocsp.ResponderID.superclass.constructor.call(this);var t=p,r=t.asn1,n=r.ASN1Util.newObject,a=r.x509.X500Name,u=t.lang.String.isHex,i=Error;this.params=null,this.tohex=function(){var c=this.params;if(c.key!=null){var l=null;if(typeof c.key=="string"){if(u(c.key)&&(l=c.key),c.key.match(/-----BEGIN CERTIFICATE/)){var m=new pt(c.key),E=m.getExtSubjectKeyIdentifier();E!=null&&(l=E.kid.hex)}}else if(c.key instanceof pt){var E=c.key.getExtSubjectKeyIdentifier();E!=null&&(l=E.kid.hex)}if(l==null)throw new i("wrong key member value");var b=n({tag:{tag:"a2",explicit:!0,obj:{octstr:{hex:l}}}});return b.tohex()}else if(c.name!=null){var v=null;if(typeof c.name=="string"&&c.name.match(/-----BEGIN CERTIFICATE/)){var m=new pt(c.name);v=m.getSubject()}else c.name instanceof pt?v=c.name.getSubject():typeof c.name=="object"&&(c.name.array!=null||c.name.str!=null)&&(v=c.name);if(v==null)throw new i("wrong name member value");var b=n({tag:{tag:"a1",explicit:!0,obj:new a(v)}});return b.tohex()}throw new i("key or name not specified")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(c){this.params=c},e!==void 0&&this.setByParam(e)};Ce(p.asn1.ocsp.ResponderID,p.asn1.ASN1Object);p.asn1.ocsp.SingleResponseList=function(e){p.asn1.ocsp.SingleResponseList.superclass.constructor.call(this);var t=p.asn1,r=t.DERSequence,n=t.ocsp.SingleResponse;this.params=null,this.tohex=function(){var a=this.params;if(typeof a!="object"||a.length==null)throw new Error("params not specified properly");for(var u=[],i=0;i<a.length;i++)u.push(new n(a[i]));var c=new r({array:u});return c.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(a){this.params=a},e!==void 0&&this.setByParam(e)};Ce(p.asn1.ocsp.SingleResponseList,p.asn1.ASN1Object);p.asn1.ocsp.SingleResponse=function(e){var t=Error,r=p,n=r.asn1,a=n.DERSequence,u=n.DERGeneralizedTime,i=n.DERTaggedObject,c=n.ocsp,l=c.CertID,m=c.CertStatus,E=n.x509,b=E.Extensions;c.SingleResponse.superclass.constructor.call(this),this.params=null,this.tohex=function(){var v=this.params,g=[];if(v.certid==null)throw new t("certid unspecified");if(v.status==null)throw new t("status unspecified");if(v.thisupdate==null)throw new t("thisupdate unspecified");if(g.push(new l(v.certid)),g.push(new m(v.status)),g.push(new u(v.thisupdate)),v.nextupdate!=null){var A=new u(v.nextupdate);g.push(new i({tag:"a0",explicit:!0,obj:A}))}if(v.ext!=null){var w=new b(v.ext);g.push(new i({tag:"a1",explicit:!0,obj:w}))}var S=new a({array:g});return S.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(v){this.params=v},e!==void 0&&this.setByParam(e)};Ce(p.asn1.ocsp.SingleResponse,p.asn1.ASN1Object);p.asn1.ocsp.CertID=function(e){var t=p,r=t.asn1,n=r.DEROctetString,a=r.DERInteger,u=r.DERSequence,i=r.x509,c=i.AlgorithmIdentifier,l=r.ocsp,m=l.DEFAULT_HASH,E=t.crypto,b=E.Util.hashHex,v=pt,g=Ue,A=g.getVbyList;l.CertID.superclass.constructor.call(this),this.DEFAULT_HASH="sha1",this.params=null,this.setByValue=function(w,S,y,C){C==null&&(C=this.DEFAULT_HASH),this.params={alg:C,issname:w,isskey:S,sbjsn:y}},this.setByCert=function(w,S,y){y==null&&(y=this.DEFAULT_HASH),this.params={alg:y,issuerCert:w,subjectCert:S}},this.getParamByCerts=function(w,S,y){y==null&&(y=this.DEFAULT_HASH);var C=new v(w),x=new v(S),N=b(C.getSubjectHex(),y),L=C.getPublicKeyHex(),ne=b(A(L,0,[1],"03",!0),y),pe=x.getSerialNumberHex(),I={alg:y,issname:N,isskey:ne,sbjsn:pe};return I},this.tohex=function(){if(typeof this.params!="object")throw new Error("params not set");var w=this.params,S,y,C,x;if(w.alg==null?x=this.DEFAULT_HASH:x=w.alg,w.issuerCert!=null&&w.subjectCert!=null){var N=this.getParamByCerts(w.issuerCert,w.subjectCert,x);S=N.issname,y=N.isskey,C=N.sbjsn}else if(w.issname!=null&&w.isskey!=null&&w.sbjsn!=null)S=w.issname,y=w.isskey,C=w.sbjsn;else throw new Error("required param members not defined");var L=new c({name:x}),ne=new n({hex:S}),pe=new n({hex:y}),I=new a({hex:C}),B=new u({array:[L,ne,pe,I]});return this.hTLV=B.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};Ce(p.asn1.ocsp.CertID,p.asn1.ASN1Object);p.asn1.ocsp.CertStatus=function(e){p.asn1.ocsp.CertStatus.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if(t.status=="good")return"8000";if(t.status=="unknown")return"8200";if(t.status=="revoked"){var r=[{gentime:{str:t.time}}];t.reason!=null&&r.push({tag:{tag:"a0",explicit:!0,obj:{enum:{int:t.reason}}}});var n={tag:"a1",explicit:!1,obj:{seq:r}};return p.asn1.ASN1Util.newObject({tag:n}).tohex()}throw new Error("bad status")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(t){this.params=t},e!==void 0&&this.setByParam(e)};Ce(p.asn1.ocsp.CertStatus,p.asn1.ASN1Object);p.asn1.ocsp.Request=function(e){var t=p,r=t.asn1,n=r.DERSequence,a=r.ocsp;if(a.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.tohex=function(){var i=[];if(this.dReqCert===null)throw"reqCert not set";i.push(this.dReqCert);var c=new n({array:i});return this.hTLV=c.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},typeof e<"u"){var u=new a.CertID(e);this.dReqCert=u}};Ce(p.asn1.ocsp.Request,p.asn1.ASN1Object);p.asn1.ocsp.TBSRequest=function(e){var t=p,r=t.asn1,n=r.DERSequence,a=r.ocsp;a.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(u){for(var i=[],c=0;c<u.length;c++){var l=new a.Request(u[0]);i.push(l)}this.dRequestList=i},this.tohex=function(){var u=[];if(this.version!==0)throw"not supported version: "+this.version;if(this.dRequestorName!==null)throw"requestorName not supported";var i=new n({array:this.dRequestList});if(u.push(i),this.dRequestExt!==null)throw"requestExtensions not supported";var c=new n({array:u});return this.hTLV=c.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&e.reqList!==void 0&&this.setRequestListByParam(e.reqList)};Ce(p.asn1.ocsp.TBSRequest,p.asn1.ASN1Object);p.asn1.ocsp.OCSPRequest=function(e){var t=p,r=t.asn1,n=r.DERSequence,a=r.ocsp;if(a.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.tohex=function(){var i=[];if(this.dTbsRequest!==null)i.push(this.dTbsRequest);else throw"tbsRequest not set";if(this.dOptionalSignature!==null)throw"optionalSignature not supported";var c=new n({array:i});return this.hTLV=c.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&e.reqList!==void 0){var u=new a.TBSRequest(e);this.dTbsRequest=u}};Ce(p.asn1.ocsp.OCSPRequest,p.asn1.ASN1Object);p.asn1.ocsp.OCSPUtil={};p.asn1.ocsp.OCSPUtil.getRequestHex=function(e,t,r){var n=p,a=n.asn1,u=a.ocsp;r===void 0&&(r=u.DEFAULT_HASH);var i={alg:r,issuerCert:e,subjectCert:t},c=new u.OCSPRequest({reqList:[i]});return c.tohex()};p.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(e){var t=Ue,r=t.getVbyList,n=t.getVbyListEx,a=t.getIdxbyList,u=t.getIdxbyListEx,i=t.getV,c={};try{var l=n(e,0,[0],"0a");c.responseStatus=parseInt(l,16)}catch{}if(c.responseStatus!==0)return c;try{var m=a(e,0,[1,0,1,0,0,2,0,1]);e.substr(m,2)==="80"?c.certStatus="good":e.substr(m,2)==="a1"?(c.certStatus="revoked",c.revocationTime=nr(r(e,m,[0]))):e.substr(m,2)==="82"&&(c.certStatus="unknown")}catch{}try{var E=a(e,0,[1,0,1,0,0,2,0,2]);c.thisUpdate=nr(i(e,E))}catch{}try{var b=a(e,0,[1,0,1,0,0,2,0,3]);e.substr(b,2)==="a0"&&(c.nextUpdate=nr(r(e,b,[0])))}catch{}return c};p.asn1.ocsp.OCSPParser=function(){var e=Error,t=pt,r=new t,n=Ue,a=n.getV,u=n.getTLV,i=n.getIdxbyList,c=n.getVbyList,l=n.getTLVbyList,m=n.getVbyListEx,E=n.getTLVbyListEx,b=n.getChildIdx;this.getOCSPRequest=function(v){var g=b(v,0);if(g.length!=1&&g.length!=2)throw new e("wrong number elements: "+g.length);var A=this.getTBSRequest(u(v,g[0]));return A},this.getTBSRequest=function(v){var g={},A=E(v,0,[0],"30");g.array=this.getRequestList(A);var w=E(v,0,["[2]",0],"30");return w!=null&&(g.ext=r.getExtParamArray(w)),g},this.getRequestList=function(v){for(var g=[],A=b(v,0),w=0;w<A.length;w++){var v=u(v,A[w]);g.push(this.getRequest(v))}return g},this.getRequest=function(v){var g=b(v,0);if(g.length!=1&&g.length!=2)throw new e("wrong number elements: "+g.length);var A=this.getCertID(u(v,g[0]));if(g.length==2){var w=i(v,0,[1,0]);A.ext=r.getExtParamArray(u(v,w))}return A},this.getCertID=function(v){var g=b(v,0);if(g.length!=4)throw new e("wrong number elements: "+g.length);var A=new t,w={};return w.alg=A.getAlgorithmIdentifierName(u(v,g[0])),w.issname=a(v,g[1]),w.isskey=a(v,g[2]),w.sbjsn=a(v,g[3]),w},this.getOCSPResponse=function(v){var g=b(v,0),A,w=a(v,g[0]),S=parseInt(w);if(g.length==1)return{resstatus:S};var y=l(v,0,[1,0]);return A=this.getResponseBytes(y),A.resstatus=S,A},this.getResponseBytes=function(v){var g=b(v,0),A,w=l(v,0,[1,0]);A=this.getBasicOCSPResponse(w);var S=a(v,g[0]);return A.restype=p.asn1.x509.OID.oid2name(Tc(S)),A},this.getBasicOCSPResponse=function(v){var g=b(v,0),A;A=this.getResponseData(u(v,g[0]));var w=new pt;A.alg=w.getAlgorithmIdentifierName(u(v,g[1]));var S=a(v,g[2]);A.sighex=S.substr(2);var y=m(v,0,["[0]"]);if(y!=null){for(var C=b(y,0),x=[],N=0;N<C.length;N++){var L=u(y,C[N]);x.push(L)}A.certs=x}return A},this.getResponseData=function(v){var g=b(v,0),A=g.length,w={},S=0;v.substr(g[0],2)=="a0"&&S++,w.respid=this.getResponderID(u(v,g[S++]));var y=a(v,g[S++]);if(w.prodat=nr(y),w.array=this.getSingleResponseList(u(v,g[S++])),v.substr(g[A-1],2)=="a1"){var C=l(v,g[A-1],[0]),x=new pt;w.ext=x.getExtParamArray(C)}return w},this.getResponderID=function(v){var g={};if(v.substr(0,2)=="a2"){var A=c(v,0,[0]);g.key=A}if(v.substr(0,2)=="a1"){var w=l(v,0,[0]),S=new pt;g.name=S.getX500Name(w)}return g},this.getSingleResponseList=function(v){for(var g=b(v,0),A=[],w=0;w<g.length;w++){var S=this.getSingleResponse(u(v,g[w]));A.push(S)}return A},this.getSingleResponse=function(v){var g=b(v,0),A={},w=this.getCertID(u(v,g[0]));A.certid=w;var S=this.getCertStatus(u(v,g[1]));if(A.status=S,v.substr(g[2],2)=="18"){var y=a(v,g[2]);A.thisupdate=nr(y)}for(var C=3;C<g.length;C++){if(v.substr(g[C],2)=="a0"){var x=c(v,g[C],[0],"18");A.nextupdate=nr(x)}if(v.substr(g[C],2)=="a1"){var N=new pt,L=l(v,0,[C,0]);A.ext=N.getExtParamArray(L)}}return A},this.getCertStatus=function(v){var g={};if(v=="8000")return{status:"good"};if(v=="8200")return{status:"unknown"};if(v.substr(0,2)=="a1"){g.status="revoked";var A=c(v,0,[0]),w=nr(A);g.time=w}return g}};var p;(typeof p>"u"||!p)&&(p={});(typeof p.lang>"u"||!p.lang)&&(p.lang={});p.lang.String=function(){};function r1(e){for(var t=new Array,r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function n1(e){for(var t="",r=0;r<e.length;r++)t=t+String.fromCharCode(e[r]);return t}function Pc(e){for(var t="",r=0;r<e.length;r++){var n=e[r].toString(16);n.length==1&&(n="0"+n),t=t+n}return t}function $n(e){return Pc(r1(e))}function y_(e){return rs($n(e))}function S_(e){return Va(rs($n(e)))}function __(e){return n1(J0(Gu(e)))}function Va(e){return e=e.replace(/\=/g,""),e=e.replace(/\+/g,"-"),e=e.replace(/\//g,"_"),e}function Gu(e){return e.length%4==2?e=e+"==":e.length%4==3&&(e=e+"="),e=e.replace(/-/g,"+"),e=e.replace(/_/g,"/"),e}function zr(e){return e.length%2==1&&(e="0"+e),Va(rs(e))}function Er(e){return Ka(Gu(e))}var Ku,mi;typeof Buffer=="function"?(Ku=function(e){return Va(Buffer.from(e,"utf8").toString("base64"))},mi=function(e){return Buffer.from(Gu(e),"base64").toString("utf8")}):(Ku=function(e){return zr(Rc(xc(e)))},mi=function(e){return decodeURIComponent(kc(Er(e)))});function D_(e){return rs(Rc(xc(e)))}function F_(e){return decodeURIComponent(kc(Ka(e)))}function Bc(e){return Rc(xc(e)).toLowerCase()}function nr(e){try{return decodeURIComponent(kc(e))}catch{return null}}function C_(e){return nr(I_(e))}function I_(e){for(var t=e.match(/.{1,2}/g),r=[],n=0;n<t.length;n++){var a=parseInt(t[n],16);161<=a&&a<=191?(r.push("c2"),r.push(t[n])):192<=a&&a<=255?(r.push("c3"),r.push((a-64).toString(16))):r.push(t[n])}return r.join("")}function Rn(e){for(var t="",r=0;r<e.length-1;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t}function Ri(e){for(var t="",r=0;r<e.length;r++)t+=("0"+e.charCodeAt(r).toString(16)).slice(-2);return t}function Uh(e){return rs(e)}function P_(e){return $c(Uh(e),64)}function $c(e,t){return e=e.replace(new RegExp("(.{"+t+"})","g"),`$1\r
`),e=e.replace(/\s+$/,""),e}function i1(e){var t=e.replace(/[^0-9A-Za-z\/+=]*/g,""),r=Ka(t);return r}function B_(e,t){return"-----BEGIN "+t+`-----\r
`+$c(e,64)+`\r
-----END `+t+`-----\r
`}function cn(e,t){return"-----BEGIN "+t+`-----\r
`+$c(Uh(e),64)+`\r
-----END `+t+`-----\r
`}function Cr(e,t){if(e.indexOf("-----BEGIN ")==-1)throw new Error("can't find PEM header");return t!==void 0?(e=e.replace(new RegExp("^[^]*-----BEGIN "+t+"-----"),""),e=e.replace(new RegExp("-----END "+t+"-----[^]*$"),"")):(e=e.replace(/^[^]*-----BEGIN [^-]+-----/,""),e=e.replace(/-----END [^-]+-----[^]*$/,"")),i1(e)}function $_(e){return e.indexOf("-----BEGIN ")==-1||e.indexOf("-----END ")==-1?null:(e=e.replace(/^[\s\S]*?-----BEGIN [^-]+-----/m,""),e=e.replace(/-----END [\s\S]+$/m,""),e=e.replace(/\s+/g,""),e.match(/^[0-9a-zA-Z+/=]+$/)?e:null)}function R_(e){if(e.length%2!=0)throw"input is not even length";if(e.match(/^[0-9A-Fa-f]+$/)==null)throw"input is not hexadecimal";for(var t=new ArrayBuffer(e.length/2),r=new DataView(t),n=0;n<e.length/2;n++)r.setUint8(n,parseInt(e.substr(n*2,2),16));return t}function k_(e){for(var t="",r=new DataView(e),n=0;n<e.byteLength;n++)t+=("00"+r.getUint8(n).toString(16)).slice(-2);return t}function Mh(e){var t,r,n,a,u,i,c,l,m,E,b,v;if(e=a1(e),v=e.match(/^(\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/),v)return t=parseInt(v[1]),r=parseInt(v[2])-1,n=parseInt(v[3]),a=parseInt(v[4]),u=parseInt(v[5]),i=parseInt(v[6]),c=0,E=v[7],E!==""&&(b=(E.substr(1)+"00").substr(0,3),c=parseInt(b)),Date.UTC(t,r,n,a,u,i,c);throw new Error("unsupported zulu format: "+e)}function x_(e){var t=new Date(e),r=("0000"+t.getUTCFullYear()).slice(-4),n=("00"+(t.getUTCMonth()+1)).slice(-2),a=("00"+t.getUTCDate()).slice(-2),u=("00"+t.getUTCHours()).slice(-2),i=("00"+t.getUTCMinutes()).slice(-2),c=("00"+t.getUTCSeconds()).slice(-2),l=("000"+t.getUTCMilliseconds()).slice(-3);return l=l.replace(/0+$/,""),l=l!=""?"."+l:l,r+n+a+u+i+c+l+"Z"}function s1(e){return Math.round(Mh(e)/1e3)}function T_(e){return new Date(Mh(e))}function O_(e,t,r){var n,a=e.getUTCFullYear();if(t){if(a<1950||2049<a)throw"not proper year for UTCTime: "+a;n=(""+a).slice(-2)}else n=("000"+a).slice(-4);if(n+=("0"+(e.getUTCMonth()+1)).slice(-2),n+=("0"+e.getUTCDate()).slice(-2),n+=("0"+e.getUTCHours()).slice(-2),n+=("0"+e.getUTCMinutes()).slice(-2),n+=("0"+e.getUTCSeconds()).slice(-2),r){var u=e.getUTCMilliseconds();u!==0&&(u=("00"+u).slice(-3),u=u.replace(/0+$/g,""),n+="."+u)}return n+="Z",n}function a1(e){return e.match(/^[0-9]{12}Z$/)||e.match(/^[0-9]{12}[.][0-9]*Z$/)?e.match(/^[0-4]/)?"20"+e:"19"+e:e}function Rc(e){return e.replace(/%/g,"")}function kc(e){return e.replace(/(..)/g,"%$1")}function xh(e){var t="malformed IPv6 address";if(!e.match(/^[0-9A-Fa-f:]+$/))throw t;e=e.toLowerCase();var r=e.split(":").length-1;if(r<2)throw t;var n=":".repeat(7-r+2);e=e.replace("::",n);var a=e.split(":");if(a.length!=8)throw t;for(var u=0;u<8;u++)a[u]=("0000"+a[u]).slice(-4);return a.join("")}function Th(e){if(!e.match(/^[0-9A-Fa-f]{32}$/))throw new Error("malformed IPv6 address: "+e);e=e.toLowerCase();var t=e.match(/.{1,4}/g);t=t.map(function(a){return a.replace(/^0+/,"")}),t=t.map(function(a){return a==""?"0":a}),e=":"+t.join(":")+":";var r=e.match(/:(0:){2,}/g);if(r==null)return e.slice(1,-1);var n=r.sort().slice(-1)[0];return e=e.replace(n.substr(0,n.length-1),":"),e.substr(0,2)!="::"&&(e=e.substr(1)),e.substr(-2,2)!="::"&&(e=e.substr(0,e.length-1)),e}function _c(e){var t=new Error("malformed hex value");if(!e.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw t;if(e.length==8){var r;try{return r=parseInt(e.substr(0,2),16)+"."+parseInt(e.substr(2,2),16)+"."+parseInt(e.substr(4,2),16)+"."+parseInt(e.substr(6,2),16),r}catch{throw t}}else if(e.length==16)try{return _c(e.substr(0,8))+"/"+W0(e.substr(8))}catch{throw t}else{if(e.length==32)return Th(e);if(e.length==64){try{return Th(e.substr(0,32))+"/"+W0(e.substr(32))}catch{throw t}return}else return e}}function W0(e){var t=new Error("malformed mask"),r;try{r=new ae(e,16).toString(2)}catch{throw t}if(!r.match(/^1*0*$/))throw t;return r.replace(/0+$/,"").length}function qh(e){var t=new Error("malformed IP address");if(e=e.toLowerCase(e),!e.match(/^[0-9a-f.:/]+$/))throw t;if(e.match(/^[0-9.]+$/)){var r=e.split(".");if(r.length!==4)throw t;var n="";try{for(var a=0;a<4;a++){var u=parseInt(r[a]);n+=("0"+u.toString(16)).slice(-2)}return n}catch{throw t}}else if(e.match(/^[0-9.]+\/[0-9]+$/)){var i=e.split("/");return qh(i[0])+Y0(parseInt(i[1]),32)}else{if(e.match(/^[0-9a-f:]+$/)&&e.indexOf(":")!==-1)return xh(e);if(e.match(/^[0-9a-f:]+\/[0-9]+$/)&&e.indexOf(":")!==-1){var i=e.split("/");return xh(i[0])+Y0(parseInt(i[1]),128)}else throw t}}function Y0(e,t){if(t==32&&e==0)return"00000000";if(t==128&&e==0)return"00000000000000000000000000000000";var r=Array(e+1).join("1")+Array(t-e+1).join("0");return new ae(r,2).toString(16)}function Vh(e){function t(a){var u=parseInt(a.substr(0,2),16),i=parseInt(a.substr(2),16);if(u==0&i<128)return String.fromCharCode(i);if(u<8){var c=192|(u&7)<<3|(i&192)>>6,l=128|i&63;return nr(c.toString(16)+l.toString(16))}var c=224|(u&240)>>4,l=128|(u&15)<<2|(i&192)>>6,m=128|i&63;return nr(c.toString(16)+l.toString(16)+m.toString(16))}var r=e.match(/.{4}/g),n=r.map(t);return n.join("")}function xc(e){for(var t=encodeURIComponent(e),r="",n=0;n<t.length;n++)t[n]=="%"?(r=r+t.substr(n,3),n=n+2):r=r+"%"+$n(t[n]);return r}function N_(e){return e=e.replace(/\r\n/mg,`
`),e}function L_(e){return e=e.replace(/\r\n/mg,`
`),e=e.replace(/\n/mg,`\r
`),e}p.lang.String.isInteger=function(e){return e.match(/^[0-9]+$/)?!0:!!e.match(/^-[0-9]+$/)};p.lang.String.isHex=function(e){return u1(e)};function u1(e){return!!(e.length%2==0&&(e.match(/^[0-9a-f]+$/)||e.match(/^[0-9A-F]+$/)))}p.lang.String.isBase64=function(e){return e=e.replace(/\s+/g,""),!!(e.match(/^[0-9A-Za-z+\/]+={0,3}$/)&&e.length%4==0)};p.lang.String.isBase64URL=function(e){return e.match(/[+/=]/)?!1:(e=Gu(e),p.lang.String.isBase64(e))};function Kh(e){return!!e.match(/^[0-9A-Za-z-_.]+$/)}p.lang.String.isIntegerArray=function(e){return e=e.replace(/\s+/g,""),!!e.match(/^\[[0-9,]+\]$/)};p.lang.String.isPrintable=function(e){return e.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null};p.lang.String.isIA5=function(e){return e.match(/^[\x20-\x21\x23-\x7f]*$/)!==null};p.lang.String.isMail=function(e){return e.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};function Oh(e){return e.length%2==1?"0"+e:e.substr(0,1)>"7"?"00"+e:e}function H_(e){e=e.replace(/^\s*\[\s*/,""),e=e.replace(/\s*\]\s*$/,""),e=e.replace(/\s*/g,"");try{var t=e.split(/,/).map(function(r,n,a){var u=parseInt(r);if(u<0||255<u)throw"integer not in range 0-255";var i=("00"+u.toString(16)).slice(-2);return i}).join("");return t}catch(r){throw"malformed integer array string: "+r}}var j_=function(e,t){var r=e.length;e.length>t.length&&(r=t.length);for(var n=0;n<r;n++)if(e.charCodeAt(n)!=t.charCodeAt(n))return n;return e.length!=t.length?r:-1};function o1(e){var t=function(c){var l=c.toString(16);return l.length==1&&(l="0"+l),l},r=function(c){var l="",m=parseInt(c,10),E=m.toString(2),b=7-E.length%7;b==7&&(b=0);for(var v="",g=0;g<b;g++)v+="0";E=v+E;for(var g=0;g<E.length-1;g+=7){var A=E.substr(g,7);g!=E.length-7&&(A="1"+A),l+=t(parseInt(A,2))}return l};try{if(!e.match(/^[0-9.]+$/))return null;var n="",a=e.split("."),u=parseInt(a[0],10)*40+parseInt(a[1],10);n+=t(u),a.splice(0,2);for(var i=0;i<a.length;i++)n+=r(a[i]);return n}catch{return null}}function Tc(e){if(!u1(e))return null;try{var t=[],r=e.substr(0,2),n=parseInt(r,16);t[0]=new String(Math.floor(n/40)),t[1]=new String(n%40);for(var a=e.substr(2),u=[],i=0;i<a.length/2;i++)u.push(parseInt(a.substr(i*2,2),16));for(var c=[],l="",i=0;i<u.length;i++)u[i]&128?l=l+Dc((u[i]&127).toString(2),7):(l=l+Dc((u[i]&127).toString(2),7),c.push(new String(parseInt(l,2))),l="");var m=t.join(".");return c.length>0&&(m=m+"."+c.join(".")),m}catch{return null}}function c1(e){var t=new ae(String(e),10);return Wu(t)}function Wu(e){var t=e.toString(16);if(t.substr(0,1)!="-")return t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t),t;var r=t.substr(1),n=r.length;n%2==1?n+=1:t.match(/^[0-7]/)||(n+=2);for(var a="",u=0;u<n;u++)a+="f";var i=new ae(a,16),c=i.xor(e).add(ae.ONE);return t=c.toString(16).replace(/^-/,""),t}var Dc=function(e,t,r){return r==null&&(r="0"),e.length>=t?e:new Array(t-e.length+1).join(r)+e};function l1(e){if(e.length%2!=0||(e=e.toLowerCase(),e.match(/^[0-9a-f]+$/)==null))return-1;try{var t=e.substr(0,2);if(t=="00")return parseInt(e.substr(2),16);var r=parseInt(t,16);if(r>7)return-1;var n=e.substr(2),a=parseInt(n,16).toString(2);a=="0"&&(a="00000000"),a=a.slice(0,0-r);var u=parseInt(a,2);return Number.isNaN(u)?-1:u}catch{return-1}}function f1(e){if(typeof e!="number"||e<0)return null;var t=Number(e).toString(2),r=8-t.length%8;r==8&&(r=0),t=t+Dc("",r,"0");var n=parseInt(t,2).toString(16);n.length%2==1&&(n="0"+n);var a="0"+r;return a+n}function h1(e){if(typeof e!="string"||e.length%2!=0||!e.match(/^[0-9a-f]+$/))return null;try{var t=parseInt(e.substr(0,2),16);if(t<0||7<t)return null;for(var r=e.substr(2),n="",a=0;a<r.length;a+=2){var u=r.substr(a,2),i=parseInt(u,16).toString(2);i=("0000000"+i).slice(-8),n+=i}return n.substr(0,n.length-t)}catch{return null}}function U_(e){if(typeof e!="string"||e.match(/^[01]+$/)==null)return null;try{var t=parseInt(e,2);return f1(t)}catch{return null}}function Fc(e,t){for(var r=0,n=0;n<e.length;n++)r|=1<<t[e[n]];for(var a=r.toString(2),u="",n=a.length-1;n>=0;n--)u+=a[n];return u}function cr(e,n,r){if(typeof e=="object"){for(var n=String(n).split("."),a=0;a<n.length&&e;a++){var u=n[a];u.match(/^[0-9]+$/)&&(u=parseInt(u)),e=e[u]}return e||e===!1?e:r}}function Ce(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t)}(typeof p>"u"||!p)&&(p={});(typeof p.crypto>"u"||!p.crypto)&&(p.crypto={});p.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:Ye.algo.MD5,sha1:Ye.algo.SHA1,sha224:Ye.algo.SHA224,sha256:Ye.algo.SHA256,sha384:Ye.algo.SHA384,sha512:Ye.algo.SHA512,ripemd160:Ye.algo.RIPEMD160},this.getDigestInfoHex=function(e,t){if(typeof this.DIGESTINFOHEAD[t]>"u")throw"alg not supported in Util.DIGESTINFOHEAD: "+t;return this.DIGESTINFOHEAD[t]+e},this.getPaddedDigestInfoHex=function(e,t,r){var n=this.getDigestInfoHex(e,t),a=r/4;if(n.length+22>a)throw"key is too short for SigAlg: keylen="+r+","+t;for(var u="0001",i="00"+n,c="",l=a-u.length-i.length,m=0;m<l;m+=2)c+="ff";var E=u+c+i;return E},this.hashString=function(e,t){var r=new p.crypto.MessageDigest({alg:t});return r.digestString(e)},this.hashHex=function(e,t){var r=new p.crypto.MessageDigest({alg:t});return r.digestHex(e)},this.sha1=function(e){return this.hashString(e,"sha1")},this.sha256=function(e){return this.hashString(e,"sha256")},this.sha256Hex=function(e){return this.hashHex(e,"sha256")},this.sha512=function(e){return this.hashString(e,"sha512")},this.sha512Hex=function(e){return this.hashHex(e,"sha512")},this.isKey=function(e){return e instanceof At||e instanceof p.crypto.DSA||e instanceof p.crypto.ECDSA}};p.crypto.Util.md5=function(e){var t=new p.crypto.MessageDigest({alg:"md5",prov:"cryptojs"});return t.digestString(e)};p.crypto.Util.ripemd160=function(e){var t=new p.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"});return t.digestString(e)};p.crypto.Util.SECURERANDOMGEN=new Wa;p.crypto.Util.getRandomHexOfNbytes=function(e){var t=new Array(e);return p.crypto.Util.SECURERANDOMGEN.nextBytes(t),Pc(t)};p.crypto.Util.getRandomBigIntegerOfNbytes=function(e){return new ae(p.crypto.Util.getRandomHexOfNbytes(e),16)};p.crypto.Util.getRandomHexOfNbits=function(e){var t=e%8,r=(e-t)/8,n=new Array(r+1);return p.crypto.Util.SECURERANDOMGEN.nextBytes(n),n[0]=(255<<t&255^255)&n[0],Pc(n)};p.crypto.Util.getRandomBigIntegerOfNbits=function(e){return new ae(p.crypto.Util.getRandomHexOfNbits(e),16)};p.crypto.Util.getRandomBigIntegerZeroToMax=function(e){for(var t=e.bitLength();;){var r=p.crypto.Util.getRandomBigIntegerOfNbits(t);if(e.compareTo(r)!=-1)return r}};p.crypto.Util.getRandomBigIntegerMinToMax=function(e,t){var r=e.compareTo(t);if(r==1)throw"biMin is greater than biMax";if(r==0)return e;var n=t.subtract(e),a=p.crypto.Util.getRandomBigIntegerZeroToMax(n);return a.add(e)};p.crypto.MessageDigest=function(e){var t=null,r=null,n=null;this.setAlgAndProvider=function(a,u){if(a=p.crypto.MessageDigest.getCanonicalAlgName(a),a!==null&&u===void 0&&(u=p.crypto.Util.DEFAULTPROVIDER[a]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(a)!=-1&&u=="cryptojs"){try{this.md=p.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[a].create()}catch(i){throw"setAlgAndProvider hash alg set fail alg="+a+"/"+i}this.updateString=function(i){this.md.update(i)},this.updateHex=function(i){var c=Ye.enc.Hex.parse(i);this.md.update(c)},this.digest=function(){var i=this.md.finalize();return i.toString(Ye.enc.Hex)},this.digestString=function(i){return this.updateString(i),this.digest()},this.digestHex=function(i){return this.updateHex(i),this.digest()}}if(":sha256:".indexOf(a)!=-1&&u=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(i){throw"setAlgAndProvider hash alg set fail alg="+a+"/"+i}this.updateString=function(i){this.md.update(i)},this.updateHex=function(i){var c=sjcl.codec.hex.toBits(i);this.md.update(c)},this.digest=function(){var i=this.md.finalize();return sjcl.codec.hex.fromBits(i)},this.digestString=function(i){return this.updateString(i),this.digest()},this.digestHex=function(i){return this.updateHex(i),this.digest()}}},this.updateString=function(a){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(a){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(a){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(a){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},e!==void 0&&e.alg!==void 0&&(this.algName=e.alg,e.prov===void 0&&(this.provName=p.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))};p.crypto.MessageDigest.getCanonicalAlgName=function(e){return typeof e=="string"&&(e=e.toLowerCase(),e=e.replace(/-/,"")),e};p.crypto.MessageDigest.getHashLength=function(e){var t=p.crypto.MessageDigest,r=t.getCanonicalAlgName(e);if(t.HASHLENGTH[r]===void 0)throw"not supported algorithm: "+e;return t.HASHLENGTH[r]};p.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20};p.crypto.Mac=function(e){var t=null,r=null,n=null,a=null,u=null;this.setAlgAndProvider=function(i,c){if(i=i.toLowerCase(),i==null&&(i="hmacsha1"),i=i.toLowerCase(),i.substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+i;c===void 0&&(c=p.crypto.Util.DEFAULTPROVIDER[i]),this.algProv=i+"/"+c;var l=i.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(l)!=-1&&c=="cryptojs"){try{var m=p.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[l];this.mac=Ye.algo.HMAC.create(m,this.pass)}catch(E){throw"setAlgAndProvider hash alg set fail hashAlg="+l+"/"+E}this.updateString=function(E){this.mac.update(E)},this.updateHex=function(E){var b=Ye.enc.Hex.parse(E);this.mac.update(b)},this.doFinal=function(){var E=this.mac.finalize();return E.toString(Ye.enc.Hex)},this.doFinalString=function(E){return this.updateString(E),this.doFinal()},this.doFinalHex=function(E){return this.updateHex(E),this.doFinal()}}},this.updateString=function(i){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(i){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(i){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(i){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(i){if(typeof i=="string"){var c=i;(i.length%2==1||!i.match(/^[0-9A-Fa-f]+$/))&&(c=Ri(i)),this.pass=Ye.enc.Hex.parse(c);return}if(typeof i!="object")throw"KJUR.crypto.Mac unsupported password type: "+i;var c=null;if(i.hex!==void 0){if(i.hex.length%2!=0||!i.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+i.hex;c=i.hex}if(i.utf8!==void 0&&(c=Bc(i.utf8)),i.rstr!==void 0&&(c=Ri(i.rstr)),i.b64!==void 0&&(c=Ka(i.b64)),i.b64u!==void 0&&(c=Er(i.b64u)),c==null)throw"KJUR.crypto.Mac unsupported password type: "+i;this.pass=Ye.enc.Hex.parse(c)},e!==void 0&&(e.pass!==void 0&&this.setPassword(e.pass),e.alg!==void 0&&(this.algName=e.alg,e.prov===void 0&&(this.provName=p.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))};p.crypto.Signature=function(e){var t=null,r=null,n=null,a=null,u=null,i=null,c=null,l=null,m=null,E=null,b=-1,v=null,g=null,A=null,w=null,S=null;if(this._setAlgNames=function(){var y=this.algName.match(/^(.+)with(.+)$/);y&&(this.mdAlgName=y[1].toLowerCase(),this.pubkeyAlgName=y[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(y,C){for(var x="",N=C/4-y.length,L=0;L<N;L++)x=x+"0";return x+y},this.setAlgAndProvider=function(y,C){if(this._setAlgNames(),C!="cryptojs/jsrsa")throw new Error("provider not supported: "+C);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new p.crypto.MessageDigest({alg:this.mdAlgName})}catch(x){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+x)}this.init=function(x,N){var L=null;try{N===void 0?L=Lt.getKey(x):L=Lt.getKey(x,N)}catch(ne){throw"init failed:"+ne}if(L.isPrivate===!0)this.prvKey=L,this.state="SIGN";else if(L.isPublic===!0)this.pubKey=L,this.state="VERIFY";else throw"init failed.:"+L},this.updateString=function(x){this.md.updateString(x)},this.updateHex=function(x){this.md.updateHex(x)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&p.crypto.ECDSA!==void 0&&(this.prvKey=new p.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof At&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof At&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof p.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else if(this.prvKey instanceof p.crypto.DSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;return this.hSign},this.signString=function(x){return this.updateString(x),this.sign()},this.signHex=function(x){return this.updateHex(x),this.sign()},this.verify=function(x){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&p.crypto.ECDSA!==void 0&&(this.pubKey=new p.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof At&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,x,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof At&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,x);if(p.crypto.ECDSA!==void 0&&this.pubKey instanceof p.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,x);if(p.crypto.DSA!==void 0&&this.pubKey instanceof p.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,x);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(y,C){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(y){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(y){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(y){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(y){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(y){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=e,e!==void 0&&(e.alg!==void 0&&(this.algName=e.alg,e.prov===void 0?this.provName=p.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=e.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),e.psssaltlen!==void 0&&(this.pssSaltLen=e.psssaltlen),e.prvkeypem!==void 0)){if(e.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{var t=Lt.getKey(e.prvkeypem);this.init(t)}catch(y){throw"fatal error to load pem private key: "+y}}};p.crypto.Cipher=function(e){};p.crypto.Cipher.encrypt=function(e,t,r,n){if(cr(n,"enclag")!=null&&(r=n.encalg),typeof r=="string"&&r.substr(-4)=="-CBC"){var a=t,u=e;cr(n,"key")!=null&&(a=n.key),cr(n,"enc")!=null&&(hEnc=n.enc);var i=Ye.enc.Hex.parse(a),c=Ye.enc.Hex.parse(u),l=Ye.enc.Hex.parse(n.iv),m;if(r=="des-EDE3-CBC")m=Ye.TripleDES.encrypt(c,i,{iv:l});else if(r=="aes128-CBC"||r=="aes256-CBC")m=Ye.AES.encrypt(c,i,{iv:l});else throw new Error("unsupported algorithm: "+r);return m+""}else throw new Error("Cipher.encrypt: unsupported key or algorithm")};p.crypto.Cipher.decrypt=function(e,t,r,n){if(cr(n,"enclag")!=null&&(r=n.encalg),typeof r=="string"&&r.substr(-4)=="-CBC"){var a=t,u=e;cr(n,"key")!=null&&(a=n.key),cr(n,"enc")!=null&&(u=n.enc);var i=Ye.enc.Hex.parse(a),c=Ye.enc.Hex.parse(u),l=Ye.enc.Hex.parse(n.iv),m;if(r=="des-EDE3-CBC")m=Ye.TripleDES.decrypt({ciphertext:c},i,{iv:l});else if(r=="aes128-CBC"||r=="aes256-CBC")m=Ye.AES.decrypt({ciphertext:c},i,{iv:l});else throw new Error("unsupported algorithm: "+r);return Ye.enc.Hex.stringify(m)}else throw new Error("Cipher.decrypt: unsupported key or algorithm")};p.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040022":"secp384r1","2b81040023":"secp521r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};(typeof p>"u"||!p)&&(p={});(typeof p.crypto>"u"||!p.crypto)&&(p.crypto={});p.crypto.ECDSA=function(e){var t="secp256r1",r=null,n=null,a=null,u=Error,i=ae,c=Qt,l=p.crypto.ECDSA,m=p.crypto.ECParameterDB,E=l.getName,b=Ue,v=b.getVbyListEx,g=b.isASN1HEX,A=new Wa,w=null;this.type="EC",this.isPrivate=!1,this.isPublic=!1;function S(y,C,x,N){for(var L=Math.max(C.bitLength(),N.bitLength()),ne=y.add2D(x),pe=y.curve.getInfinity(),I=L-1;I>=0;--I)pe=pe.twice2D(),pe.z=i.ONE,C.testBit(I)?N.testBit(I)?pe=pe.add2D(ne):pe=pe.add2D(y):N.testBit(I)&&(pe=pe.add2D(x));return pe}this.getBigRandom=function(y){return new i(y.bitLength(),A).mod(y.subtract(i.ONE)).add(i.ONE)},this.setNamedCurve=function(y){this.ecparams=m.getByName(y),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=y},this.setPrivateKeyHex=function(y){this.isPrivate=!0,this.prvKeyHex=y},this.setPublicKeyHex=function(y){this.isPublic=!0,this.pubKeyHex=y},this.getPublicKeyXYHex=function(){var y=this.pubKeyHex;if(y.substr(0,2)!=="04")throw"this method supports uncompressed format(04) only";var C=this.ecparams.keycharlen;if(y.length!==2+C*2)throw"malformed public key hex length";var x={};return x.x=y.substr(2,C),x.y=y.substr(2+C),x},this.getShortNISTPCurveName=function(){var y=this.curveName;return y==="secp256r1"||y==="NIST P-256"||y==="P-256"||y==="prime256v1"?"P-256":y==="secp384r1"||y==="NIST P-384"||y==="P-384"?"P-384":y==="secp521r1"||y==="NIST P-521"||y==="P-521"?"P-521":null},this.generateKeyPairHex=function(){var y=this.ecparams.n,C=this.getBigRandom(y),x=this.ecparams.keycharlen,N=("0000000000"+C.toString(16)).slice(-x);this.setPrivateKeyHex(N);var L=this.generatePublicKeyHex();return{ecprvhex:N,ecpubhex:L}},this.generatePublicKeyHex=function(){var y=new i(this.prvKeyHex,16),C=this.ecparams.G.multiply(y),x=C.getX().toBigInteger(),N=C.getY().toBigInteger(),L=this.ecparams.keycharlen,ne=("0000000000"+x.toString(16)).slice(-L),pe=("0000000000"+N.toString(16)).slice(-L),I="04"+ne+pe;return this.setPublicKeyHex(I),I},this.signWithMessageHash=function(y){return this.signHex(y,this.prvKeyHex)},this.signHex=function(y,C){var x=new i(C,16),N=this.ecparams.n,L=new i(y.substring(0,this.ecparams.keycharlen),16);do var ne=this.getBigRandom(N),pe=this.ecparams.G,I=pe.multiply(ne),B=I.getX().toBigInteger().mod(N);while(B.compareTo(i.ZERO)<=0);var j=ne.modInverse(N).multiply(L.add(x.multiply(B))).mod(N);return l.biRSSigToASN1Sig(B,j)},this.sign=function(y,C){var x=C,N=this.ecparams.n,L=i.fromByteArrayUnsigned(y);do var ne=this.getBigRandom(N),pe=this.ecparams.G,I=pe.multiply(ne),B=I.getX().toBigInteger().mod(N);while(B.compareTo(ae.ZERO)<=0);var j=ne.modInverse(N).multiply(L.add(x.multiply(B))).mod(N);return this.serializeSig(B,j)},this.verifyWithMessageHash=function(y,C){return this.verifyHex(y,C,this.pubKeyHex)},this.verifyHex=function(y,C,x){try{var N,L,ne=l.parseSigHex(C);N=ne.r,L=ne.s;var pe=c.decodeFromHex(this.ecparams.curve,x),I=new i(y.substring(0,this.ecparams.keycharlen),16);return this.verifyRaw(I,N,L,pe)}catch{return!1}},this.verify=function(y,C,x){var N,L;if(Bitcoin.Util.isArray(C)){var ne=this.parseSig(C);N=ne.r,L=ne.s}else if(typeof C=="object"&&C.r&&C.s)N=C.r,L=C.s;else throw"Invalid value for signature";var pe;if(x instanceof Qt)pe=x;else if(Bitcoin.Util.isArray(x))pe=c.decodeFrom(this.ecparams.curve,x);else throw"Invalid format for pubkey value, must be byte array or ECPointFp";var I=i.fromByteArrayUnsigned(y);return this.verifyRaw(I,N,L,pe)},this.verifyRaw=function(y,C,x,N){var L=this.ecparams.n,ne=this.ecparams.G;if(C.compareTo(i.ONE)<0||C.compareTo(L)>=0||x.compareTo(i.ONE)<0||x.compareTo(L)>=0)return!1;var pe=x.modInverse(L),I=y.multiply(pe).mod(L),B=C.multiply(pe).mod(L),j=ne.multiply(I).add(N.multiply(B)),R=j.getX().toBigInteger().mod(L);return R.equals(C)},this.serializeSig=function(y,C){var x=y.toByteArraySigned(),N=C.toByteArraySigned(),L=[];return L.push(2),L.push(x.length),L=L.concat(x),L.push(2),L.push(N.length),L=L.concat(N),L.unshift(L.length),L.unshift(48),L},this.parseSig=function(y){var C;if(y[0]!=48)throw new Error("Signature not a valid DERSequence");if(C=2,y[C]!=2)throw new Error("First element in signature must be a DERInteger");var x=y.slice(C+2,C+2+y[C+1]);if(C+=2+y[C+1],y[C]!=2)throw new Error("Second element in signature must be a DERInteger");var N=y.slice(C+2,C+2+y[C+1]);C+=2+y[C+1];var L=i.fromByteArrayUnsigned(x),ne=i.fromByteArrayUnsigned(N);return{r:L,s:ne}},this.parseSigCompact=function(y){if(y.length!==65)throw"Signature has the wrong length";var C=y[0]-27;if(C<0||C>7)throw"Invalid signature type";var x=this.ecparams.n,N=i.fromByteArrayUnsigned(y.slice(1,33)).mod(x),L=i.fromByteArrayUnsigned(y.slice(33,65)).mod(x);return{r:N,s:L,i:C}},this.readPKCS5PrvKeyHex=function(y){if(g(y)===!1)throw new Error("not ASN.1 hex string");var C,x,N;try{C=v(y,0,["[0]",0],"06"),x=v(y,0,[1],"04");try{N=v(y,0,["[1]",0],"03")}catch{}}catch{throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=E(C),this.curveName===void 0)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(N),this.setPrivateKeyHex(x),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(y){if(g(y)===!1)throw new u("not ASN.1 hex string");var C,x,N,L;try{C=v(y,0,[1,0],"06"),x=v(y,0,[1,1],"06"),N=v(y,0,[2,0,1],"04");try{L=v(y,0,[2,0,"[1]",0],"03")}catch{}}catch{throw new u("malformed PKCS#8 plain ECC private key")}if(this.curveName=E(x),this.curveName===void 0)throw new u("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(L),this.setPrivateKeyHex(N),this.isPublic=!1},this.readPKCS8PubKeyHex=function(y){if(g(y)===!1)throw new u("not ASN.1 hex string");var C,x,N;try{C=v(y,0,[0,0],"06"),x=v(y,0,[0,1],"06"),N=v(y,0,[1],"03")}catch{throw new u("malformed PKCS#8 ECC public key")}if(this.curveName=E(x),this.curveName===null)throw new u("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(N)},this.readCertPubKeyHex=function(y,C){if(g(y)===!1)throw new u("not ASN.1 hex string");var x,N;try{x=v(y,0,[0,5,0,1],"06"),N=v(y,0,[0,5,1],"03")}catch{throw new u("malformed X.509 certificate ECC public key")}if(this.curveName=E(x),this.curveName===null)throw new u("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(N)},e!==void 0&&e.curve!==void 0&&(this.curveName=e.curve),this.curveName===void 0&&(this.curveName=t),this.setNamedCurve(this.curveName),e!==void 0&&(e.prv!==void 0&&this.setPrivateKeyHex(e.prv),e.pub!==void 0&&this.setPublicKeyHex(e.pub))};p.crypto.ECDSA.parseSigHex=function(e){var t=p.crypto.ECDSA.parseSigHexInHexRS(e),r=new ae(t.r,16),n=new ae(t.s,16);return{r,s:n}};p.crypto.ECDSA.parseSigHexInHexRS=function(e){var t=Ue,r=t.getChildIdx,n=t.getV;if(t.checkStrictDER(e,0),e.substr(0,2)!="30")throw new Error("signature is not a ASN.1 sequence");var a=r(e,0);if(a.length!=2)throw new Error("signature shall have two elements");var u=a[0],i=a[1];if(e.substr(u,2)!="02")throw new Error("1st item not ASN.1 integer");if(e.substr(i,2)!="02")throw new Error("2nd item not ASN.1 integer");var c=n(e,u),l=n(e,i);return{r:c,s:l}};p.crypto.ECDSA.asn1SigToConcatSig=function(e){var t=p.crypto.ECDSA.parseSigHexInHexRS(e),r=t.r,n=t.s;if(r.length>=130&&r.length<=134){if(r.length%2!=0)throw Error("unknown ECDSA sig r length error");if(n.length%2!=0)throw Error("unknown ECDSA sig s length error");r.substr(0,2)=="00"&&(r=r.substr(2)),n.substr(0,2)=="00"&&(n=n.substr(2));var a=Math.max(r.length,n.length);return r=("000000"+r).slice(-a),n=("000000"+n).slice(-a),r+n}if(r.substr(0,2)=="00"&&r.length%32==2&&(r=r.substr(2)),n.substr(0,2)=="00"&&n.length%32==2&&(n=n.substr(2)),r.length%32==30&&(r="00"+r),n.length%32==30&&(n="00"+n),r.length%32!=0)throw Error("unknown ECDSA sig r length error");if(n.length%32!=0)throw Error("unknown ECDSA sig s length error");return r+n};p.crypto.ECDSA.concatSigToASN1Sig=function(e){if(e.length%4!=0)throw Error("unknown ECDSA concatinated r-s sig length error");var t=e.substr(0,e.length/2),r=e.substr(e.length/2);return p.crypto.ECDSA.hexRSSigToASN1Sig(t,r)};p.crypto.ECDSA.hexRSSigToASN1Sig=function(e,t){var r=new ae(e,16),n=new ae(t,16);return p.crypto.ECDSA.biRSSigToASN1Sig(r,n)};p.crypto.ECDSA.biRSSigToASN1Sig=function(e,t){var r=p.asn1,n=new r.DERInteger({bigint:e}),a=new r.DERInteger({bigint:t}),u=new r.DERSequence({array:[n,a]});return u.tohex()};p.crypto.ECDSA.getName=function(e){return e==="2b8104001f"?"secp192k1":e==="2a8648ce3d030107"?"secp256r1":e==="2b8104000a"?"secp256k1":e==="2b81040021"?"secp224r1":e==="2b81040022"?"secp384r1":e==="2b81040023"?"secp521r1":"|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(e)!==-1?"secp256r1":"|secp256k1|".indexOf(e)!==-1?"secp256k1":"|secp224r1|NIST P-224|P-224|".indexOf(e)!==-1?"secp224r1":"|secp384r1|NIST P-384|P-384|".indexOf(e)!==-1?"secp384r1":"|secp521r1|NIST P-521|P-521|".indexOf(e)!==-1?"secp521r1":null};(typeof p>"u"||!p)&&(p={});(typeof p.crypto>"u"||!p.crypto)&&(p.crypto={});p.crypto.ECParameterDB=new function(){var e={},t={};function r(n){return new ae(n,16)}this.getByName=function(n){var a=n;if(typeof t[a]<"u"&&(a=t[n]),typeof e[a]<"u")return e[a];throw"unregistered EC curve name: "+a},this.regist=function(n,a,u,i,c,l,m,E,b,v,g,A){e[n]={};var w=r(u),S=r(i),y=r(c),C=r(l),x=r(m),N=new ns(w,S,y),L=N.decodePointHex("04"+E+b);e[n].name=n,e[n].keylen=a,e[n].keycharlen=Math.ceil(a/8)*2,e[n].curve=N,e[n].G=L,e[n].n=C,e[n].h=x,e[n].oid=g,e[n].info=A;for(var ne=0;ne<v.length;ne++)t[v[ne]]=n}};p.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field");p.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field");p.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field");p.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]);p.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]);p.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]);p.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]);p.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]);p.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]);p.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","00C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);(typeof p>"u"||!p)&&(p={});(typeof p.crypto>"u"||!p.crypto)&&(p.crypto={});p.crypto.DSA=function(){var e=Ue,t=e.getVbyList,r=e.getVbyListEx,n=e.isASN1HEX,a=ae;this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(u,i,c,l,m){this.isPrivate=!0,this.p=u,this.q=i,this.g=c,this.y=l,this.x=m},this.setPrivateHex=function(u,i,c,l,m){var E,b,v,g,A;E=new ae(u,16),b=new ae(i,16),v=new ae(c,16),typeof l=="string"&&l.length>1?g=new ae(l,16):g=null,A=new ae(m,16),this.setPrivate(E,b,v,g,A)},this.setPublic=function(u,i,c,l){this.isPublic=!0,this.p=u,this.q=i,this.g=c,this.y=l,this.x=null},this.setPublicHex=function(u,i,c,l){var m,E,b,v;m=new ae(u,16),E=new ae(i,16),b=new ae(c,16),v=new ae(l,16),this.setPublic(m,E,b,v)},this.signWithMessageHash=function(u){var i=this.p,c=this.q,l=this.g,m=this.y,E=this.x,b=p.crypto.Util.getRandomBigIntegerMinToMax(ae.ONE.add(ae.ONE),c.subtract(ae.ONE)),v=u.substr(0,c.bitLength()/4),g=new ae(v,16),A=l.modPow(b,i).mod(c),w=b.modInverse(c).multiply(g.add(E.multiply(A))).mod(c),S=p.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:A}},{int:{bigint:w}}]});return S},this.verifyWithMessageHash=function(u,i){var c=this.p,l=this.q,m=this.g,E=this.y,b=this.parseASN1Signature(i),v=b[0],g=b[1],A=u.substr(0,l.bitLength()/4),w=new ae(A,16);if(ae.ZERO.compareTo(v)>0||v.compareTo(l)>0||ae.ZERO.compareTo(g)>=0||g.compareTo(l)>0)throw"invalid DSA signature";var S=g.modInverse(l),y=w.multiply(S).mod(l),C=v.multiply(S).mod(l),x=m.modPow(y,c).multiply(E.modPow(C,c)).mod(c).mod(l);return x.compareTo(v)==0},this.parseASN1Signature=function(u){try{var i=new a(r(u,0,[0],"02"),16),c=new a(r(u,0,[1],"02"),16);return[i,c]}catch{throw new Error("malformed ASN.1 DSA signature")}},this.readPKCS5PrvKeyHex=function(u){var i,c,l,m,E;if(n(u)===!1)throw new Error("not ASN.1 hex string");try{i=r(u,0,[1],"02"),c=r(u,0,[2],"02"),l=r(u,0,[3],"02"),m=r(u,0,[4],"02"),E=r(u,0,[5],"02")}catch{throw new Error("malformed PKCS#1/5 plain DSA private key")}this.setPrivateHex(i,c,l,m,E)},this.readPKCS8PrvKeyHex=function(u){var i,c,l,m;if(n(u)===!1)throw new Error("not ASN.1 hex string");try{i=r(u,0,[1,1,0],"02"),c=r(u,0,[1,1,1],"02"),l=r(u,0,[1,1,2],"02"),m=r(u,0,[2,0],"02")}catch{throw new Error("malformed PKCS#8 plain DSA private key")}this.setPrivateHex(i,c,l,null,m)},this.readPKCS8PubKeyHex=function(u){var i,c,l,m;if(n(u)===!1)throw new Error("not ASN.1 hex string");try{i=r(u,0,[0,1,0],"02"),c=r(u,0,[0,1,1],"02"),l=r(u,0,[0,1,2],"02"),m=r(u,0,[1,0],"02")}catch{throw new Error("malformed PKCS#8 DSA public key")}this.setPublicHex(i,c,l,m)},this.readCertPubKeyHex=function(u,i){var c,l,m,E;if(n(u)===!1)throw new Error("not ASN.1 hex string");try{c=r(u,0,[0,5,0,1,0],"02"),l=r(u,0,[0,5,0,1,1],"02"),m=r(u,0,[0,5,0,1,2],"02"),E=r(u,0,[0,5,1,0],"02")}catch{throw new Error("malformed X.509 certificate DSA public key")}this.setPublicHex(c,l,m,E)}};var Lt=(function(){var e=function(w,S,y){return n(Ye.AES,w,S,y)},t=function(w,S,y){return n(Ye.TripleDES,w,S,y)},r=function(w,S,y){return n(Ye.DES,w,S,y)},n=function(w,S,y,C){var x=Ye.enc.Hex.parse(S),N=Ye.enc.Hex.parse(y),L=Ye.enc.Hex.parse(C),ne={};ne.key=N,ne.iv=L,ne.ciphertext=x;var pe=w.decrypt(ne,N,{iv:L});return Ye.enc.Hex.stringify(pe)},a=function(w,S,y){return c(Ye.AES,w,S,y)},u=function(w,S,y){return c(Ye.TripleDES,w,S,y)},i=function(w,S,y){return c(Ye.DES,w,S,y)},c=function(w,S,y,C){var x=Ye.enc.Hex.parse(S),N=Ye.enc.Hex.parse(y),L=Ye.enc.Hex.parse(C),ne=w.encrypt(x,N,{iv:L}),pe=Ye.enc.Hex.parse(ne.toString()),I=Ye.enc.Base64.stringify(pe);return I},l={"AES-256-CBC":{proc:e,eproc:a,keylen:32,ivlen:16},"AES-192-CBC":{proc:e,eproc:a,keylen:24,ivlen:16},"AES-128-CBC":{proc:e,eproc:a,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:t,eproc:u,keylen:24,ivlen:8},"DES-CBC":{proc:r,eproc:i,keylen:8,ivlen:8}},m=function(w){return l[w].proc},E=function(w){var S=Ye.lib.WordArray.random(w),y=Ye.enc.Hex.stringify(S);return y},b=function(w){var S={},y=w.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));y&&(S.cipher=y[1],S.ivsalt=y[2]);var C=w.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));C&&(S.type=C[1]);var x=-1,N=0;w.indexOf(`\r
\r
`)!=-1&&(x=w.indexOf(`\r
\r
`),N=2),w.indexOf(`

`)!=-1&&(x=w.indexOf(`

`),N=1);var L=w.indexOf("-----END");if(x!=-1&&L!=-1){var ne=w.substring(x+N*2,L-N);ne=ne.replace(/\s+/g,""),S.data=ne}return S},v=function(w,S,y){for(var C=y.substring(0,16),x=Ye.enc.Hex.parse(C),N=Ye.enc.Utf8.parse(S),L=l[w].keylen+l[w].ivlen,ne="",pe=null;;){var I=Ye.algo.MD5.create();if(pe!=null&&I.update(pe),I.update(N),I.update(x),pe=I.finalize(),ne=ne+Ye.enc.Hex.stringify(pe),ne.length>=L*2)break}var B={};return B.keyhex=ne.substr(0,l[w].keylen*2),B.ivhex=ne.substr(l[w].keylen*2,l[w].ivlen*2),B},g=function(w,S,y,C){var x=Ye.enc.Base64.parse(w),N=Ye.enc.Hex.stringify(x),L=l[S].proc,ne=L(N,y,C);return ne},A=function(w,S,y,C){var x=l[S].eproc,N=x(w,y,C);return N};return{version:"1.0.0",parsePKCS5PEM:function(w){return b(w)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(w,S,y){return v(w,S,y)},decryptKeyB64:function(w,S,y,C){return g(w,S,y,C)},getDecryptedKeyHex:function(w,S){var y=b(w),C=y.type,x=y.cipher,N=y.ivsalt,L=y.data,ne=v(x,S,N),pe=ne.keyhex,I=g(L,x,pe,N);return I},getEncryptedPKCS5PEMFromPrvKeyHex:function(w,S,y,C,x){var j="";if((typeof C>"u"||C==null)&&(C="AES-256-CBC"),typeof l[C]>"u")throw new Error("KEYUTIL unsupported algorithm: "+C);if(typeof x>"u"||x==null){var N=l[C].ivlen,L=E(N);x=L.toUpperCase()}var ne=v(C,y,x),pe=ne.keyhex,I=A(S,C,pe,x),B=I.replace(/(.{64})/g,`$1\r
`),j="-----BEGIN "+w+` PRIVATE KEY-----\r
`;return j+=`Proc-Type: 4,ENCRYPTED\r
`,j+="DEK-Info: "+C+","+x+`\r
`,j+=`\r
`,j+=B,j+=`\r
-----END `+w+` PRIVATE KEY-----\r
`,j},getEncryptedPKCS8PEM:function(w,S,y){var C=this.getEncryptedPKCS8Hex(w,S,y);return cn(C,"ENCRYPTED PRIVATE KEY")},getEncryptedPKCS8Hex:function(w,S,y){var C;y==null||y==null?C={}:C=JSON.parse(JSON.stringify(y)),C.plain=w,this.initPBES2Param(C),this.encryptPBES2Param(C,S);var x=this.generatePBES2ASN1Param(C);return p.asn1.ASN1Util.newObject(x).tohex()},initPBES2Param:function(w){if(cr(w,"encalg")==null&&(w.encalg="aes256-CBC"),cr(w,"iter")==null&&(w.iter=2048),cr(w,"prf")==null&&(w.prf="hmacWithSHA256"),cr(w,"salt")==null&&(w.salt=Ye.enc.Hex.stringify(Ye.lib.WordArray.random(8))),cr(w,"enciv")==null){var S;w.encalg=="des-EDE3-CBC"&&(S=8),w.encalg=="aes128-CBC"&&(S=16),w.encalg=="aes256-CBC"&&(S=16),w.enciv=Ye.enc.Hex.stringify(Ye.lib.WordArray.random(S))}},encryptPBES2Param:function(w,S){var y=Lt.getDKFromPBES2Param(w,S);try{var C=p.crypto.Cipher.encrypt(w.plain,y,w.encalg,{iv:w.enciv})}catch{throw new Error("encrypt error: "+w.plain+" "+y+" "+w.encalg+" "+w.enciv)}w.enc=C},generatePBES2ASN1Param:function(w){var S={seq:[{seq:[{oid:"pkcs5PBES2"},{seq:[{seq:[{oid:"pkcs5PBKDF2"},{seq:[{octstr:{hex:w.salt}},{int:{hex:c1(w.iter)}}]}]},{seq:[{oid:w.encalg},{octstr:{hex:w.enciv}}]}]}]},{octstr:{hex:w.enc}}]};return w.prf!="hmacWithSHA1"&&S.seq[0].seq[1].seq[0].seq[1].seq.push({seq:[{oid:w.prf},{null:""}]}),S},parseHexOfEncryptedPKCS8:function(w){var S=Ue,y=S.getChildIdx,C=S.getV,x={},N=y(w,0);if(N.length!=2)throw new Error("malformed format: SEQUENCE(0).items != 2: "+N.length);x.ciphertext=C(w,N[1]);var L=y(w,N[0]);if(L.length!=2)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+L.length);if(C(w,L[0])!="2a864886f70d01050d")throw new Error("this only supports pkcs5PBES2");var ne=y(w,L[1]);if(L.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+ne.length);var pe=y(w,ne[1]);if(pe.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+pe.length);if(C(w,pe[0])!="2a864886f70d0307")throw"this only supports TripleDES";x.encryptionSchemeAlg="TripleDES",x.encryptionSchemeIV=C(w,pe[1]);var I=y(w,ne[0]);if(I.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+I.length);if(C(w,I[0])!="2a864886f70d01050c")throw new Error("this only supports pkcs5PBKDF2");var B=y(w,I[1]);if(B.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+B.length);x.pbkdf2Salt=C(w,B[0]);var j=C(w,B[1]);try{x.pbkdf2Iter=parseInt(j,16)}catch{throw new Error("malformed format pbkdf2Iter: "+j)}return x},getPBKDF2KeyHexFromParam:function(w,S){var y=Ye.enc.Hex.parse(w.pbkdf2Salt),C=w.pbkdf2Iter,x=Ye.PBKDF2(S,y,{keySize:192/32,iterations:C}),N=Ye.enc.Hex.stringify(x);return N},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(w,S){var y=Cr(w,"ENCRYPTED PRIVATE KEY"),C=this.parseHexOfEncryptedPKCS8(y),x=Lt.getPBKDF2KeyHexFromParam(C,S),N={};N.ciphertext=Ye.enc.Hex.parse(C.ciphertext);var L=Ye.enc.Hex.parse(x),ne=Ye.enc.Hex.parse(C.encryptionSchemeIV),pe=Ye.TripleDES.decrypt(N,L,{iv:ne}),I=Ye.enc.Hex.stringify(pe);return I},parsePBES2:function(w){var S=Ue.parse(w);if(cr(S,"seq.0.seq.0.oid")!="pkcs5PBES2"||cr(S,"seq.0.seq.1.seq.0.seq.0.oid")!="pkcs5PBKDF2")throw new Error("not pkcs5PBES2 and pkcs5PBKDF2 used");var y=cr(S,"seq.0.seq.1.seq.0.seq.1.seq");if(y==null)throw new Error("PBKDF2 parameter not found");var C=cr(y,"0.octstr.hex"),x=cr(y,"1.int.hex"),N=cr(y,"2.seq.0.oid","hmacWithSHA1"),L=-1;try{L=parseInt(x,16)}catch{throw new Error("iter not proper value")}var ne=cr(S,"seq.0.seq.1.seq.1.seq.0.oid"),pe=cr(S,"seq.0.seq.1.seq.1.seq.1.octstr.hex"),I=cr(S,"seq.1.octstr.hex");if(ne==null||pe==null||I==null)throw new Error("encalg, enciv or enc is undefined");var B={salt:C,iter:L,prf:N,encalg:ne,enciv:pe,enc:I};return B},getDKFromPBES2Param:function(w,S){var y={hmacWithSHA1:Ye.algo.SHA1,hmacWithSHA224:Ye.algo.SHA224,hmacWithSHA256:Ye.algo.SHA256,hmacWithSHA384:Ye.algo.SHA384,hmacWithSHA512:Ye.algo.SHA512},C={"des-EDE3-CBC":192/32,"aes128-CBC":128/32,"aes256-CBC":256/32},x=y[w.prf];if(x==null)throw new Error("unsupported prf");var N=C[w.encalg];if(N==null)throw new Error("unsupported encalg");var L=Ye.enc.Hex.parse(w.salt),ne=w.iter;try{var pe=Ye.PBKDF2(S,L,{keySize:N,iterations:ne,hasher:x});return Ye.enc.Hex.stringify(pe)}catch(I){throw new Error("PBKDF2 error: "+I+" "+JSON.stringify(w)+" "+S)}},getPlainHexFromEncryptedPKCS8PEM:function(w,S){if(w.indexOf("BEGIN ENCRYPTED PRIVATE KEY")==-1)throw new Error("not Encrypted PKCS#8 PEM string");var y=Cr(w),C;try{C=Lt.parsePBES2(y)}catch(N){throw new Error("malformed PBES2 format: "+N.message)}var x=Lt.getDKFromPBES2Param(C,S);return p.crypto.Cipher.decrypt(C.enc,x,C.encalg,{iv:C.enciv})},getKeyFromEncryptedPKCS8PEM:function(w,S){var y=this.getPlainHexFromEncryptedPKCS8PEM(w,S),C=this.getKeyFromPlainPrivatePKCS8Hex(y);return C},parsePlainPrivatePKCS8Hex:function(w){var S=Ue,y=S.getChildIdx,C=S.getV,x={};if(x.algparam=null,w.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var N=y(w,0);if(N.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(w.substr(N[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var L=y(w,N[1]);if(L.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(w.substr(L[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(x.algoid=C(w,L[0]),w.substr(L[1],2)=="06"&&(x.algparam=C(w,L[1])),w.substr(N[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return x.keyidx=S.getVidx(w,N[2]),x},getKeyFromPlainPrivatePKCS8PEM:function(w){var S=Cr(w,"PRIVATE KEY"),y=this.getKeyFromPlainPrivatePKCS8Hex(S);return y},getKeyFromPlainPrivatePKCS8Hex:function(w){var S=this.parsePlainPrivatePKCS8Hex(w),y;if(S.algoid=="2a864886f70d010101")y=new At;else if(S.algoid=="2a8648ce380401")y=new p.crypto.DSA;else if(S.algoid=="2a8648ce3d0201")y=new p.crypto.ECDSA;else throw new Error("unsupported private key algorithm");return y.readPKCS8PrvKeyHex(w),y},_getKeyFromPublicPKCS8Hex:function(w){var S,y=Ue.getVbyList(w,0,[0,0],"06");if(y==="2a864886f70d010101")S=new At;else if(y==="2a8648ce380401")S=new p.crypto.DSA;else if(y==="2a8648ce3d0201")S=new p.crypto.ECDSA;else throw new Error("unsupported PKCS#8 public key hex");return S.readPKCS8PubKeyHex(w),S},parsePublicRawRSAKeyHex:function(w){var S=Ue,y=S.getChildIdx,C=S.getV,x={};if(w.substr(0,2)!="30")throw new Error("malformed RSA key(code:001)");var N=y(w,0);if(N.length!=2)throw new Error("malformed RSA key(code:002)");if(w.substr(N[0],2)!="02")throw new Error("malformed RSA key(code:003)");if(x.n=C(w,N[0]),w.substr(N[1],2)!="02")throw new Error("malformed RSA key(code:004)");return x.e=C(w,N[1]),x},parsePublicPKCS8Hex:function(w){var S=Ue,y=S.getChildIdx,C=S.getV,x={};x.algparam=null;var N=y(w,0);if(N.length!=2)throw new Error("outer DERSequence shall have 2 elements: "+N.length);var L=N[0];if(w.substr(L,2)!="30")throw new Error("malformed PKCS8 public key(code:001)");var ne=y(w,L);if(ne.length!=2)throw new Error("malformed PKCS8 public key(code:002)");if(w.substr(ne[0],2)!="06")throw new Error("malformed PKCS8 public key(code:003)");if(x.algoid=C(w,ne[0]),w.substr(ne[1],2)=="06"?x.algparam=C(w,ne[1]):w.substr(ne[1],2)=="30"&&(x.algparam={},x.algparam.p=S.getVbyList(w,ne[1],[0],"02"),x.algparam.q=S.getVbyList(w,ne[1],[1],"02"),x.algparam.g=S.getVbyList(w,ne[1],[2],"02")),w.substr(N[1],2)!="03")throw new Error("malformed PKCS8 public key(code:004)");return x.key=C(w,N[1]).substr(2),x}}})();Lt.getKey=function(e,t,r){var n=Ue,a=n.getChildIdx,u=n.getV,i=n.getVbyList,c=p.crypto,l=c.ECDSA,m=c.DSA,E=At,b=Cr,v=Lt;if(typeof E<"u"&&e instanceof E||typeof l<"u"&&e instanceof l||typeof m<"u"&&e instanceof m)return e;if(e.curve!==void 0&&e.xy!==void 0&&e.d===void 0)return new l({pub:e.xy,curve:e.curve});if(e.curve!==void 0&&e.d!==void 0)return new l({prv:e.d,curve:e.curve});if(e.kty===void 0&&e.n!==void 0&&e.e!==void 0&&e.d===void 0){var g=new E;return g.setPublic(e.n,e.e),g}if(e.kty===void 0&&e.n!==void 0&&e.e!==void 0&&e.d!==void 0&&e.p!==void 0&&e.q!==void 0&&e.dp!==void 0&&e.dq!==void 0&&e.co!==void 0&&e.qi===void 0){var g=new E;return g.setPrivateEx(e.n,e.e,e.d,e.p,e.q,e.dp,e.dq,e.co),g}if(e.kty===void 0&&e.n!==void 0&&e.e!==void 0&&e.d!==void 0&&e.p===void 0){var g=new E;return g.setPrivate(e.n,e.e,e.d),g}if(e.p!==void 0&&e.q!==void 0&&e.g!==void 0&&e.y!==void 0&&e.x===void 0){var g=new m;return g.setPublic(e.p,e.q,e.g,e.y),g}if(e.p!==void 0&&e.q!==void 0&&e.g!==void 0&&e.y!==void 0&&e.x!==void 0){var g=new m;return g.setPrivate(e.p,e.q,e.g,e.y,e.x),g}if(e.kty==="RSA"&&e.n!==void 0&&e.e!==void 0&&e.d===void 0){var g=new E;return g.setPublic(Er(e.n),Er(e.e)),g}if(e.kty==="RSA"&&e.n!==void 0&&e.e!==void 0&&e.d!==void 0&&e.p!==void 0&&e.q!==void 0&&e.dp!==void 0&&e.dq!==void 0&&e.qi!==void 0){var g=new E;return g.setPrivateEx(Er(e.n),Er(e.e),Er(e.d),Er(e.p),Er(e.q),Er(e.dp),Er(e.dq),Er(e.qi)),g}if(e.kty==="RSA"&&e.n!==void 0&&e.e!==void 0&&e.d!==void 0){var g=new E;return g.setPrivate(Er(e.n),Er(e.e),Er(e.d)),g}if(e.kty==="EC"&&e.crv!==void 0&&e.x!==void 0&&e.y!==void 0&&e.d===void 0){var A=new l({curve:e.crv}),w=A.ecparams.keycharlen,S=("0000000000"+Er(e.x)).slice(-w),y=("0000000000"+Er(e.y)).slice(-w),C="04"+S+y;return A.setPublicKeyHex(C),A}if(e.kty==="EC"&&e.crv!==void 0&&e.x!==void 0&&e.y!==void 0&&e.d!==void 0){var A=new l({curve:e.crv}),w=A.ecparams.keycharlen,S=("0000000000"+Er(e.x)).slice(-w),y=("0000000000"+Er(e.y)).slice(-w),C="04"+S+y,x=("0000000000"+Er(e.d)).slice(-w);return A.setPublicKeyHex(C),A.setPrivateKeyHex(x),A}if(r==="pkcs5prv"){var N=e,n=Ue,L,g;if(L=a(N,0),L.length===9)g=new E,g.readPKCS5PrvKeyHex(N);else if(L.length===6)g=new m,g.readPKCS5PrvKeyHex(N);else if(L.length>2&&N.substr(L[1],2)==="04")g=new l,g.readPKCS5PrvKeyHex(N);else throw new Error("unsupported PKCS#1/5 hexadecimal key");return g}if(r==="pkcs8prv"){var g=v.getKeyFromPlainPrivatePKCS8Hex(e);return g}if(r==="pkcs8pub")return v._getKeyFromPublicPKCS8Hex(e);if(r==="x509pub")return pt.getPublicKeyFromCertHex(e);if(e.indexOf("-END CERTIFICATE-",0)!=-1||e.indexOf("-END X509 CERTIFICATE-",0)!=-1||e.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return pt.getPublicKeyFromCertPEM(e);if(e.indexOf("-END PUBLIC KEY-")!=-1){var ne=Cr(e,"PUBLIC KEY");return v._getKeyFromPublicPKCS8Hex(ne)}if(e.indexOf("-END RSA PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")==-1){var pe=b(e,"RSA PRIVATE KEY");return v.getKey(pe,null,"pkcs5prv")}if(e.indexOf("-END DSA PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")==-1){var I=b(e,"DSA PRIVATE KEY"),B=i(I,0,[1],"02"),j=i(I,0,[2],"02"),R=i(I,0,[3],"02"),M=i(I,0,[4],"02"),Q=i(I,0,[5],"02"),g=new m;return g.setPrivate(new ae(B,16),new ae(j,16),new ae(R,16),new ae(M,16),new ae(Q,16)),g}if(e.indexOf("-END EC PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")==-1){var pe=b(e,"EC PRIVATE KEY");return v.getKey(pe,null,"pkcs5prv")}if(e.indexOf("-END PRIVATE KEY-")!=-1)return v.getKeyFromPlainPrivatePKCS8PEM(e);if(e.indexOf("-END RSA PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")!=-1){var V=v.getDecryptedKeyHex(e,t),z=new At;return z.readPKCS5PrvKeyHex(V),z}if(e.indexOf("-END EC PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")!=-1){var I=v.getDecryptedKeyHex(e,t),g=i(I,0,[1],"04"),te=i(I,0,[2,0],"06"),me=i(I,0,[3,0],"03").substr(2),at="";if(p.crypto.OID.oidhex2name[te]!==void 0)at=p.crypto.OID.oidhex2name[te];else throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+te);var A=new l({curve:at});return A.setPublicKeyHex(me),A.setPrivateKeyHex(g),A.isPublic=!1,A}if(e.indexOf("-END DSA PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")!=-1){var I=v.getDecryptedKeyHex(e,t),B=i(I,0,[1],"02"),j=i(I,0,[2],"02"),R=i(I,0,[3],"02"),M=i(I,0,[4],"02"),Q=i(I,0,[5],"02"),g=new m;return g.setPrivate(new ae(B,16),new ae(j,16),new ae(R,16),new ae(M,16),new ae(Q,16)),g}if(e.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return v.getKeyFromEncryptedPKCS8PEM(e,t);throw new Error("not supported argument")};Lt.generateKeypair=function(e,t){if(e=="RSA"){var r=t,n=new At;n.generate(r,"10001"),n.isPrivate=!0,n.isPublic=!0;var a=new At,u=n.n.toString(16),i=n.e.toString(16);a.setPublic(u,i),a.isPrivate=!1,a.isPublic=!0;var c={};return c.prvKeyObj=n,c.pubKeyObj=a,c}else if(e=="EC"){var l=t,m=new p.crypto.ECDSA({curve:l}),E=m.generateKeyPairHex(),n=new p.crypto.ECDSA({curve:l});n.setPublicKeyHex(E.ecpubhex),n.setPrivateKeyHex(E.ecprvhex),n.isPrivate=!0,n.isPublic=!1;var a=new p.crypto.ECDSA({curve:l});a.setPublicKeyHex(E.ecpubhex),a.isPrivate=!1,a.isPublic=!0;var c={};return c.prvKeyObj=n,c.pubKeyObj=a,c}else throw new Error("unknown algorithm: "+e)};Lt.getPEM=function(e,t,r,n,a,u){var i=p,c=i.asn1,l=c.DERObjectIdentifier,m=c.DERInteger,E=c.ASN1Util.newObject,b=c.x509,v=b.SubjectPublicKeyInfo,g=i.crypto,A=g.DSA,w=g.ECDSA,S=At;function y(z){var te=E({seq:[{int:0},{int:{bigint:z.n}},{int:z.e},{int:{bigint:z.d}},{int:{bigint:z.p}},{int:{bigint:z.q}},{int:{bigint:z.dmp1}},{int:{bigint:z.dmq1}},{int:{bigint:z.coeff}}]});return te}function C(z){var te=E({seq:[{int:1},{octstr:{hex:z.prvKeyHex}},{tag:["a0",!0,{oid:{name:z.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+z.pubKeyHex}}]}]});return te}function x(z){var te=E({seq:[{int:0},{int:{bigint:z.p}},{int:{bigint:z.q}},{int:{bigint:z.g}},{int:{bigint:z.y}},{int:{bigint:z.x}}]});return te}if((S!==void 0&&e instanceof S||A!==void 0&&e instanceof A||w!==void 0&&e instanceof w)&&e.isPublic==!0&&(t===void 0||t=="PKCS8PUB")){var N=new v(e),L=N.tohex();return cn(L,"PUBLIC KEY")}if(t=="PKCS1PRV"&&S!==void 0&&e instanceof S&&(r===void 0||r==null)&&e.isPrivate==!0){var N=y(e),L=N.tohex();return cn(L,"RSA PRIVATE KEY")}if(t=="PKCS1PRV"&&w!==void 0&&e instanceof w&&(r===void 0||r==null)&&e.isPrivate==!0){var ne=new l({name:e.curveName}),pe=ne.tohex(),I=C(e),B=I.tohex(),j="";return j+=cn(pe,"EC PARAMETERS"),j+=cn(B,"EC PRIVATE KEY"),j}if(t=="PKCS1PRV"&&A!==void 0&&e instanceof A&&(r===void 0||r==null)&&e.isPrivate==!0){var N=x(e),L=N.tohex();return cn(L,"DSA PRIVATE KEY")}if(t=="PKCS5PRV"&&S!==void 0&&e instanceof S&&r!==void 0&&r!=null&&e.isPrivate==!0){var N=y(e),L=N.tohex();return n===void 0&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",L,r,n,u)}if(t=="PKCS5PRV"&&w!==void 0&&e instanceof w&&r!==void 0&&r!=null&&e.isPrivate==!0){var N=C(e),L=N.tohex();return n===void 0&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",L,r,n,u)}if(t=="PKCS5PRV"&&A!==void 0&&e instanceof A&&r!==void 0&&r!=null&&e.isPrivate==!0){var N=x(e),L=N.tohex();return n===void 0&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",L,r,n,u)}var R=function(z,te){if(typeof te=="string")return Lt.getEncryptedPKCS8PEM(z,te);if(typeof te=="object"&&cr(te,"passcode")!=null){var me=JSON.parse(JSON.stringify(te)),at=me.passcode;return delete me.passcode,Lt.getEncryptedPKCS8PEM(z,at,me)}};if(t=="PKCS8PRV"&&S!=null&&e instanceof S&&e.isPrivate==!0){var M=y(e),Q=M.tohex(),N=E({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:Q}}]}),L=N.tohex();return r===void 0||r==null?cn(L,"PRIVATE KEY"):R(L,r)}if(t=="PKCS8PRV"&&w!==void 0&&e instanceof w&&e.isPrivate==!0){var V={seq:[{int:1},{octstr:{hex:e.prvKeyHex}}]};typeof e.pubKeyHex=="string"&&V.seq.push({tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]});var M=new E(V),Q=M.tohex(),N=E({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:e.curveName}}]},{octstr:{hex:Q}}]}),L=N.tohex();return r===void 0||r==null?cn(L,"PRIVATE KEY"):R(L,r)}if(t=="PKCS8PRV"&&A!==void 0&&e instanceof A&&e.isPrivate==!0){var M=new m({bigint:e.x}),Q=M.tohex(),N=E({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}]},{octstr:{hex:Q}}]}),L=N.tohex();return r===void 0||r==null?cn(L,"PRIVATE KEY"):R(L,r)}throw new Error("unsupported object nor format")};Lt.getKeyFromCSRPEM=function(e){var t=Cr(e,"CERTIFICATE REQUEST"),r=Lt.getKeyFromCSRHex(t);return r};Lt.getKeyFromCSRHex=function(e){var t=Lt.parseCSRHex(e),r=Lt.getKey(t.p8pubkeyhex,null,"pkcs8pub");return r};Lt.parseCSRHex=function(e){var t=Ue,r=t.getChildIdx,n=t.getTLV,a={},u=e;if(u.substr(0,2)!="30")throw new Error("malformed CSR(code:001)");var i=r(u,0);if(i.length<1)throw new Error("malformed CSR(code:002)");if(u.substr(i[0],2)!="30")throw new Error("malformed CSR(code:003)");var c=r(u,i[0]);if(c.length<3)throw new Error("malformed CSR(code:004)");return a.p8pubkeyhex=n(u,c[2]),a};Lt.getKeyID=function(e){var t=Lt,r=Ue;typeof e=="string"&&e.indexOf("BEGIN ")!=-1&&(e=t.getKey(e));var n=Cr(t.getPEM(e)),a=r.getIdxbyList(n,0,[1]),u=r.getV(n,a).substring(2);return p.crypto.Util.hashHex(u,"sha1")};Lt.getJWK=function(e,t,r,n,a){var u,i={},c,l=p.crypto.Util.hashHex;if(typeof e=="string")u=Lt.getKey(e),e.indexOf("CERTIFICATE")!=-1&&(c=Cr(e));else if(typeof e=="object")e instanceof pt?(u=e.getPublicKey(),c=e.hex):u=e;else throw new Error("unsupported keyinfo type");if(u instanceof At&&u.isPrivate)i.kty="RSA",i.n=zr(u.n.toString(16)),i.e=zr(u.e.toString(16)),i.d=zr(u.d.toString(16)),i.p=zr(u.p.toString(16)),i.q=zr(u.q.toString(16)),i.dp=zr(u.dmp1.toString(16)),i.dq=zr(u.dmq1.toString(16)),i.qi=zr(u.coeff.toString(16));else if(u instanceof At&&u.isPublic)i.kty="RSA",i.n=zr(u.n.toString(16)),i.e=zr(u.e.toString(16));else if(u instanceof p.crypto.ECDSA&&u.isPrivate){var m=u.getShortNISTPCurveName();if(m!=="P-256"&&m!=="P-384"&&m!=="P-521")throw new Error("unsupported curve name for JWT: "+m);var E=u.getPublicKeyXYHex();i.kty="EC",i.crv=m,i.x=zr(E.x),i.y=zr(E.y),i.d=zr(u.prvKeyHex)}else if(u instanceof p.crypto.ECDSA&&u.isPublic){var m=u.getShortNISTPCurveName();if(m!=="P-256"&&m!=="P-384"&&m!=="P-521")throw new Error("unsupported curve name for JWT: "+m);var E=u.getPublicKeyXYHex();i.kty="EC",i.crv=m,i.x=zr(E.x),i.y=zr(E.y)}if(i.kty==null)throw new Error("unsupported keyinfo");return!u.isPrivate&&t!=!0&&(i.kid=p.jws.JWS.getJWKthumbprint(i)),c!=null&&r!=!0&&(i.x5c=[rs(c)]),c!=null&&n!=!0&&(i.x5t=Va(rs(l(c,"sha1")))),c!=null&&a!=!0&&(i["x5t#S256"]=Va(rs(l(c,"sha256")))),i};Lt.getJWKFromKey=function(e){return Lt.getJWK(e,!0,!0,!0,!0)};At.getPosArrayOfChildrenFromHex=function(e){return Ue.getChildIdx(e,0)};At.getHexValueArrayOfChildrenFromHex=function(e){var t=Ue,r=t.getV,v=At.getPosArrayOfChildrenFromHex(e),n=r(e,v[0]),a=r(e,v[1]),u=r(e,v[2]),i=r(e,v[3]),c=r(e,v[4]),l=r(e,v[5]),m=r(e,v[6]),E=r(e,v[7]),b=r(e,v[8]),v=new Array;return v.push(n,a,u,i,c,l,m,E,b),v};At.prototype.readPrivateKeyFromPEMString=function(e){var t=Cr(e),r=At.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])};At.prototype.readPKCS5PrvKeyHex=function(e){var t=At.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])};At.prototype.readPKCS8PrvKeyHex=function(e){var t,r,n,a,u,i,c,l,m=Ue,E=m.getVbyListEx;if(m.isASN1HEX(e)===!1)throw new Error("not ASN.1 hex string");try{t=E(e,0,[2,0,1],"02"),r=E(e,0,[2,0,2],"02"),n=E(e,0,[2,0,3],"02"),a=E(e,0,[2,0,4],"02"),u=E(e,0,[2,0,5],"02"),i=E(e,0,[2,0,6],"02"),c=E(e,0,[2,0,7],"02"),l=E(e,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(t,r,n,a,u,i,c,l)};At.prototype.readPKCS5PubKeyHex=function(e){var t=Ue,r=t.getV;if(t.isASN1HEX(e)===!1)throw new Error("keyHex is not ASN.1 hex string");var n=t.getChildIdx(e,0);if(n.length!==2||e.substr(n[0],2)!=="02"||e.substr(n[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var a=r(e,n[0]),u=r(e,n[1]);this.setPublic(a,u)};At.prototype.readPKCS8PubKeyHex=function(e){var t=Ue;if(t.isASN1HEX(e)===!1)throw new Error("not ASN.1 hex string");if(t.getTLVbyListEx(e,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var r=t.getTLVbyListEx(e,0,[1,0]);this.readPKCS5PubKeyHex(r)};At.prototype.readCertPubKeyHex=function(e,t){var r,n;r=new pt,r.readCertHex(e),n=r.getPublicKeyHex(),this.readPKCS8PubKeyHex(n)};var C3=new RegExp("[^0-9a-f]","gi");function p1(e,t){for(var r="",n=t/4-e.length,a=0;a<n;a++)r=r+"0";return r+e}At.prototype.sign=function(e,t){var r=function(a){return p.crypto.Util.hashString(a,t)},n=r(e);return this.signWithMessageHash(n,t)};At.prototype.signWithMessageHash=function(e,t){var r=p.crypto.Util.getPaddedDigestInfoHex(e,t,this.n.bitLength()),n=Bn(r,16),a=this.doPrivate(n),u=a.toString(16);return p1(u,this.n.bitLength())};function d1(e,t,r){for(var n="",a=0;n.length<t;)n+=Rn(r(Ri(e+String.fromCharCode.apply(String,[(a&4278190080)>>24,(a&16711680)>>16,(a&65280)>>8,a&255])))),a+=1;return n}At.prototype.signPSS=function(e,t,r){var n=function(u){return p.crypto.Util.hashHex(u,t)},a=n(Ri(e));return r===void 0&&(r=-1),this.signWithMessageHashPSS(a,t,r)};At.prototype.signWithMessageHashPSS=function(e,t,r){var n=Rn(e),a=n.length,u=this.n.bitLength()-1,i=Math.ceil(u/8),c,l=function(S){return p.crypto.Util.hashHex(S,t)};if(r===-1||r===void 0)r=a;else if(r===-2)r=i-a-2;else if(r<-2)throw new Error("invalid salt length");if(i<a+r+2)throw new Error("data too long");var m="";r>0&&(m=new Array(r),new Wa().nextBytes(m),m=String.fromCharCode.apply(String,m));var E=Rn(l(Ri("\0\0\0\0\0\0\0\0"+n+m))),b=[];for(c=0;c<i-r-a-2;c+=1)b[c]=0;var v=String.fromCharCode.apply(String,b)+""+m,g=d1(E,v.length,l),A=[];for(c=0;c<v.length;c+=1)A[c]=v.charCodeAt(c)^g.charCodeAt(c);var w=65280>>8*i-u&255;for(A[0]&=~w,c=0;c<a;c++)A.push(E.charCodeAt(c));return A.push(188),p1(this.doPrivate(new ae(A)).toString(16),this.n.bitLength())};function g1(e){for(var t in p.crypto.Util.DIGESTINFOHEAD){var r=p.crypto.Util.DIGESTINFOHEAD[t],n=r.length;if(e.substring(0,n)==r){var a=[t,e.substring(n)];return a}}return[]}At.prototype.verify=function(e,t){if(t=t.toLowerCase(),t.match(/^[0-9a-f]+$/)==null)return!1;var r=Bn(t,16),n=this.n.bitLength();if(r.bitLength()>n)return!1;var a=this.doPublic(r),u=a.toString(16);if(u.length+3!=n/4)return!1;var i=u.replace(/^1f+00/,""),c=g1(i);if(c.length==0)return!1;var l=c[0],m=c[1],E=function(v){return p.crypto.Util.hashString(v,l)},b=E(e);return m==b};At.prototype.verifyWithMessageHash=function(e,t){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var r=Bn(t,16);if(r.bitLength()>this.n.bitLength())return 0;var n=this.doPublic(r),a=n.toString(16).replace(/^1f+00/,""),u=g1(a);if(u.length==0)return!1;var i=u[0],c=u[1];return c==e};At.prototype.verifyPSS=function(e,t,r,n){var a=function(i){return p.crypto.Util.hashHex(i,r)},u=a(Ri(e));return n===void 0&&(n=-1),this.verifyWithMessageHashPSS(u,t,r,n)};At.prototype.verifyWithMessageHashPSS=function(e,t,r,n){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var a=new ae(t,16),u=function(C){return p.crypto.Util.hashHex(C,r)},i=Rn(e),c=i.length,l=this.n.bitLength()-1,m=Math.ceil(l/8),E;if(n===-1||n===void 0)n=c;else if(n===-2)n=m-c-2;else if(n<-2)throw new Error("invalid salt length");if(m<c+n+2)throw new Error("data too long");var b=this.doPublic(a).toByteArray();for(E=0;E<b.length;E+=1)b[E]&=255;for(;b.length<m;)b.unshift(0);if(b[m-1]!==188)throw new Error("encoded message does not end in 0xbc");b=String.fromCharCode.apply(String,b);var v=b.substr(0,m-c-1),g=b.substr(v.length,c),A=65280>>8*m-l&255;if((v.charCodeAt(0)&A)!==0)throw new Error("bits beyond keysize not zero");var w=d1(g,v.length,u),S=[];for(E=0;E<v.length;E+=1)S[E]=v.charCodeAt(E)^w.charCodeAt(E);S[0]&=~A;var y=m-c-n-2;for(E=0;E<y;E+=1)if(S[E]!==0)throw new Error("leftmost octets not zero");if(S[y]!==1)throw new Error("0x01 marker not found");return g===Rn(u(Ri("\0\0\0\0\0\0\0\0"+i+String.fromCharCode.apply(String,S.slice(-n)))))};At.SALT_LEN_HLEN=-1;At.SALT_LEN_MAX=-2;At.SALT_LEN_RECOVER=-2;function pt(e){var t=Ue,r=t.getChildIdx,n=t.getV,a=t.dump,u=t.parse,i=t.getTLV,c=t.getVbyList,l=t.getVbyListEx,m=t.getTLVbyList,E=t.getTLVbyListEx,b=t.getIdxbyList,v=t.getIdxbyListEx,g=t.getVidx,A=t.getInt,w=t.oidname,S=t.hextooidstr,y=pt,C=Cr,x,N=Error;try{x=p.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var I=m(this.hex,0,[0,0]);if(I.substr(0,2)=="a0"){var B=m(I,0,[0]),j=A(B,0);if(j<0||2<j)throw new Error("malformed version field");return this.version=j+1,this.version}else return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return l(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var I=E(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(I)},this.getAlgorithmIdentifierName=function(I){for(var B in x)if(I===x[B])return B;return w(l(I,0,[0],"06"))},this.getIssuer=function(I,B){return this.getX500Name(this.getIssuerHex(),I,B)},this.getIssuerHex=function(){return m(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){var I=this.getIssuer();return I.str},this.getSubject=function(I,B){return this.getX500Name(this.getSubjectHex(),I,B)},this.getSubjectHex=function(){return m(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){var I=this.getSubject();return I.str},this.getNotBefore=function(){var I=c(this.hex,0,[0,4+this.foffset,0]);return I=I.replace(/(..)/g,"%$1"),I=decodeURIComponent(I),I},this.getNotAfter=function(){var I=c(this.hex,0,[0,4+this.foffset,1]);return I=I.replace(/(..)/g,"%$1"),I=decodeURIComponent(I),I},this.getPublicKeyHex=function(){return this.getSPKI()},this.getSPKI=function(){return m(this.hex,0,[0,6+this.foffset],"30")},this.getSPKIValue=function(){var I=this.getSPKI();return I==null?null:c(I,0,[1],"03",!0)},this.getPublicKeyIdx=function(){return b(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var I=this.getPublicKeyIdx();return b(this.hex,I,[1,0],"30")},this.getPublicKey=function(){return Lt.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var I=m(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(I)},this.getSignatureValueHex=function(){return c(this.hex,0,[2],"03",!0)},this.verifySignature=function(I){var B=this.getSignatureAlgorithmField(),j=this.getSignatureValueHex(),R=m(this.hex,0,[0],"30"),M=new p.crypto.Signature({alg:B});return M.init(I),M.updateHex(R),M.verify(j)},this.parseExt=function(I){var B,j,R;if(I===void 0){if(R=this.hex,this.version!==3)return-1;B=b(R,0,[0,7,0],"30"),j=r(R,B)}else{R=Cr(I);var M=b(R,0,[0,3,0,0],"06");if(n(R,M)!="2a864886f70d01090e"){this.aExtInfo=new Array;return}B=b(R,0,[0,3,0,1,0],"30"),j=r(R,B),this.hex=R}this.aExtInfo=new Array;for(var Q=0;Q<j.length;Q++){var V={};V.critical=!1;var z=r(R,j[Q]),te=0;z.length===3&&(V.critical=!0,te=1),V.oid=t.hextooidstr(c(R,j[Q],[0],"06"));var me=b(R,j[Q],[1+te]);V.vidx=g(R,me),this.aExtInfo.push(V)}},this.getExtInfo=function(I){var B=this.aExtInfo,j=I;if(I.match(/^[0-9.]+$/)||(j=p.asn1.x509.OID.name2oid(I)),j!==""){for(var R=0;R<B.length;R++)if(B[R].oid===j)return B[R]}},this.getCriticalExtV=function(I,B,j){if(B!=null)return[B,j];var R=this.getExtInfo(I);return R==null?[null,null]:[i(this.hex,R.vidx),R.critical]},this.getExtBasicConstraints=function(I,B){if(I===void 0&&B===void 0){var j=this.getExtInfo("basicConstraints");if(j===void 0)return;I=i(this.hex,j.vidx),B=j.critical}var R={extname:"basicConstraints"};if(B&&(R.critical=!0),I==="3000")return R;if(I==="30030101ff")return R.cA=!0,R;if(I.substr(0,12)==="30060101ff02"){var M=n(I,10),Q=parseInt(M,16);return R.cA=!0,R.pathLen=Q,R}throw new Error("hExtV parse error: "+I)},this.getExtNameConstraints=function(I,B){var j=this.getCriticalExtV("nameConstraints",I,B);if(I=j[0],B=j[1],I!=null){var R={extname:"nameConstraints"};B&&(R.critical=!0);for(var M=r(I,0),Q=0;Q<M.length;Q++){for(var V=[],z=r(I,M[Q]),te=0;te<z.length;te++){var me=i(I,z[te]),at=this.getGeneralSubtree(me);V.push(at)}var st=I.substr(M[Q],2);st=="a0"?R.permit=V:st=="a1"&&(R.exclude=V)}return R}},this.getGeneralSubtree=function(I){var B=r(I,0),j=B.length;if(j<1||2<j)throw new Error("wrong num elements");for(var R=this.getGeneralName(i(I,B[0])),M=1;M<j;M++){var Q=I.substr(B[M],2),V=n(I,B[M]),z=parseInt(V,16);Q=="80"&&(R.min=z),Q=="81"&&(R.max=z)}return R},this.getExtKeyUsage=function(I,B){var j=this.getCriticalExtV("keyUsage",I,B);if(I=j[0],B=j[1],I!=null){var R={extname:"keyUsage"};return B&&(R.critical=!0),R.names=this.getExtKeyUsageString(I).split(","),R}},this.getExtKeyUsageBin=function(I){if(I===void 0){var B=this.getExtInfo("keyUsage");if(B===void 0)return"";I=i(this.hex,B.vidx)}if(I.length!=8&&I.length!=10)throw new Error("malformed key usage value: "+I);var j="000000000000000"+parseInt(I.substr(6),16).toString(2);return I.length==8&&(j=j.slice(-8)),I.length==10&&(j=j.slice(-16)),j=j.replace(/0+$/,""),j==""&&(j="0"),j},this.getExtKeyUsageString=function(I){for(var B=this.getExtKeyUsageBin(I),j=new Array,R=0;R<B.length;R++)B.substr(R,1)=="1"&&j.push(pt.KEYUSAGE_NAME[R]);return j.join(",")},this.getExtSubjectKeyIdentifier=function(I,B){if(I===void 0&&B===void 0){var j=this.getExtInfo("subjectKeyIdentifier");if(j===void 0)return;I=i(this.hex,j.vidx),B=j.critical}var R={extname:"subjectKeyIdentifier"};B&&(R.critical=!0);var M=n(I,0);return R.kid={hex:M},R},this.getExtAuthorityKeyIdentifier=function(I,B){if(I===void 0&&B===void 0){var j=this.getExtInfo("authorityKeyIdentifier");if(j===void 0)return;I=i(this.hex,j.vidx),B=j.critical}var R={extname:"authorityKeyIdentifier"};B&&(R.critical=!0);for(var M=r(I,0),Q=0;Q<M.length;Q++){var V=I.substr(M[Q],2);if(V==="80"&&(R.kid={hex:n(I,M[Q])}),V==="a1"){var z=i(I,M[Q]),te=this.getGeneralNames(z);R.issuer=te[0].dn}V==="82"&&(R.sn={hex:n(I,M[Q])})}return R},this.getExtExtKeyUsage=function(I,B){if(I===void 0&&B===void 0){var j=this.getExtInfo("extKeyUsage");if(j===void 0)return;I=i(this.hex,j.vidx),B=j.critical}var R={extname:"extKeyUsage",array:[]};B&&(R.critical=!0);for(var M=r(I,0),Q=0;Q<M.length;Q++)R.array.push(w(n(I,M[Q])));return R},this.getExtExtKeyUsageName=function(){var I=this.getExtInfo("extKeyUsage");if(I===void 0)return I;var B=new Array,j=i(this.hex,I.vidx);if(j==="")return B;for(var R=r(j,0),M=0;M<R.length;M++)B.push(w(n(j,R[M])));return B},this.getExtSubjectAltName=function(I,B){if(I===void 0&&B===void 0){var j=this.getExtInfo("subjectAltName");if(j===void 0)return;I=i(this.hex,j.vidx),B=j.critical}var R={extname:"subjectAltName",array:[]};return B&&(R.critical=!0),R.array=this.getGeneralNames(I),R},this.getExtIssuerAltName=function(I,B){if(I===void 0&&B===void 0){var j=this.getExtInfo("issuerAltName");if(j===void 0)return;I=i(this.hex,j.vidx),B=j.critical}var R={extname:"issuerAltName",array:[]};return B&&(R.critical=!0),R.array=this.getGeneralNames(I),R},this.getGeneralNames=function(I){for(var B=r(I,0),j=[],R=0;R<B.length;R++){var M=this.getGeneralName(i(I,B[R]));M!==void 0&&j.push(M)}return j},this.getGeneralName=function(I){var B=I.substr(0,2),j=n(I,0),R=Rn(j);if(B=="81")return{rfc822:R};if(B=="82")return{dns:R};if(B=="86")return{uri:R};if(B=="87")return{ip:_c(j)};if(B=="a4")return{dn:this.getX500Name(j)};if(B=="a0")return{other:this.getOtherName(I)}},this.getExtSubjectAltName2=function(){var I,B,j,R=this.getExtInfo("subjectAltName");if(R===void 0)return R;for(var M=new Array,Q=i(this.hex,R.vidx),V=r(Q,0),z=0;z<V.length;z++)j=Q.substr(V[z],2),I=n(Q,V[z]),j==="81"&&(B=nr(I),M.push(["MAIL",B])),j==="82"&&(B=nr(I),M.push(["DNS",B])),j==="84"&&(B=pt.hex2dn(I,0),M.push(["DN",B])),j==="86"&&(B=nr(I),M.push(["URI",B])),j==="87"&&(B=_c(I),M.push(["IP",B]));return M},this.getExtCRLDistributionPoints=function(I,B){if(I===void 0&&B===void 0){var j=this.getExtInfo("cRLDistributionPoints");if(j===void 0)return;I=i(this.hex,j.vidx),B=j.critical}var R={extname:"cRLDistributionPoints",array:[]};B&&(R.critical=!0);for(var M=r(I,0),Q=0;Q<M.length;Q++){var V=i(I,M[Q]);R.array.push(this.getDistributionPoint(V))}return R},this.getDistributionPoint=function(I){for(var B={},j=r(I,0),R=0;R<j.length;R++){var M=I.substr(j[R],2),Q=i(I,j[R]);M=="a0"&&(B.dpname=this.getDistributionPointName(Q))}return B},this.getDistributionPointName=function(I){for(var B={},j=r(I,0),R=0;R<j.length;R++){var M=I.substr(j[R],2),Q=i(I,j[R]);M=="a0"&&(B.full=this.getGeneralNames(Q))}return B},this.getExtCRLDistributionPointsURI=function(){var I=this.getExtCRLDistributionPoints();if(I==null)return I;for(var B=I.array,j=[],R=0;R<B.length;R++)try{B[R].dpname.full[0].uri!=null&&j.push(B[R].dpname.full[0].uri)}catch{}return j},this.getExtAIAInfo=function(){var I=this.getExtInfo("authorityInfoAccess");if(I===void 0)return I;for(var B={ocsp:[],caissuer:[]},j=r(this.hex,I.vidx),R=0;R<j.length;R++){var M=c(this.hex,j[R],[0],"06"),Q=c(this.hex,j[R],[1],"86");M==="2b06010505073001"&&B.ocsp.push(nr(Q)),M==="2b06010505073002"&&B.caissuer.push(nr(Q))}return B},this.getExtAuthorityInfoAccess=function(I,B){if(I===void 0&&B===void 0){var j=this.getExtInfo("authorityInfoAccess");if(j===void 0)return;I=i(this.hex,j.vidx),B=j.critical}var R={extname:"authorityInfoAccess",array:[]};B&&(R.critical=!0);for(var M=r(I,0),Q=0;Q<M.length;Q++){var V=l(I,M[Q],[0],"06"),z=c(I,M[Q],[1],"86"),te=nr(z);if(V=="2b06010505073001")R.array.push({ocsp:te});else if(V=="2b06010505073002")R.array.push({caissuer:te});else throw new Error("unknown method: "+V)}return R},this.getExtCertificatePolicies=function(I,B){if(I===void 0&&B===void 0){var j=this.getExtInfo("certificatePolicies");if(j===void 0)return;I=i(this.hex,j.vidx),B=j.critical}var R={extname:"certificatePolicies",array:[]};B&&(R.critical=!0);for(var M=r(I,0),Q=0;Q<M.length;Q++){var V=i(I,M[Q]),z=this.getPolicyInformation(V);R.array.push(z)}return R},this.getPolicyInformation=function(I){var B={},j=c(I,0,[0],"06");B.policyoid=w(j);var R=v(I,0,[1],"30");if(R!=-1){B.array=[];for(var M=r(I,R),Q=0;Q<M.length;Q++){var V=i(I,M[Q]),z=this.getPolicyQualifierInfo(V);B.array.push(z)}}return B},this.getOtherName=function(I){var B={},j=r(I,0),R=c(I,j[0],[],"06"),M=c(I,j[1],[]);return B.oid=w(R),B.value=u(M),B},this.getPolicyQualifierInfo=function(I){var B={},j=c(I,0,[0],"06");if(j==="2b06010505070201"){var R=l(I,0,[1],"16");B.cps=Rn(R)}else if(j==="2b06010505070202"){var M=m(I,0,[1],"30");B.unotice=this.getUserNotice(M)}return B},this.getUserNotice=function(I){var B=null,j={};try{B=t.parse(I);var R=this._asn1ToUnotice(B);return R}catch{return}},this._asn1ToUnotice=function(I){try{for(var B={},j=cr(I,"seq"),R=0;R<j.length;R++){var M=this._asn1ToNoticeRef(j[R]);M!=null&&(B.noticeref=M);var Q=this.asn1ToDisplayText(j[R]);Q!=null&&(B.exptext=Q)}return Object.keys(B).length>0?B:void 0}catch{return}},this._asn1ToNoticeRef=function(I){try{for(var B={},j=cr(I,"seq"),R=0;R<j.length;R++){var M=this._asn1ToNoticeNum(j[R]);M!=null&&(B.noticenum=M);var Q=this.asn1ToDisplayText(j[R]);Q!=null&&(B.org=Q)}return Object.keys(B).length>0?B:void 0}catch{return}},this._asn1ToNoticeNum=function(I){try{for(var B=cr(I,"seq"),j=[],R=0;R<B.length;R++){var M=B[R];j.push(parseInt(cr(M,"int.hex"),16))}return j}catch{return}},this.getDisplayText=function(I){var B={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"},j={};return j.type=B[I.substr(0,2)],j.str=Rn(n(I,0)),j},this.asn1ToDisplayText=function(I){if(I.utf8str!=null)return{type:"utf8",str:I.utf8str.str};if(I.ia5str!=null)return{type:"ia5",str:I.ia5str.str};if(I.visstr!=null)return{type:"vis",str:I.visstr.str};if(I.bmpstr!=null)return{type:"bmp",str:I.bmpstr.str};if(I.prnstr!=null)return{type:"prn",str:I.prnstr.str}},this.getExtPolicyMappings=function(I,B){var j=this.getCriticalExtV("policyMappings",I,B);if(I=j[0],B=j[1],I!=null){var R={extname:"policyMappings"};B&&(R.critical=!0);try{for(var M=u(I),Q=M.seq,V=[],z=0;z<Q.length;z++){var te=Q[z].seq;V.push([te[0].oid,te[1].oid])}R.array=V}catch{throw new N("malformed policyMappings")}return R}},this.getExtPolicyConstraints=function(I,B){var j=this.getCriticalExtV("policyConstraints",I,B);if(I=j[0],B=j[1],I!=null){var R={extname:"policyConstraints"};B&&(R.critical=!0);var M=u(I);try{for(var Q=M.seq,V=0;V<Q.length;V++){var z=Q[V].tag;z.explicit==!1&&(z.tag=="80"&&(R.reqexp=parseInt(z.hex,16)),z.tag=="81"&&(R.inhibit=parseInt(z.hex,16)))}}catch{return new N("malformed policyConstraints value")}return R}},this.getExtInhibitAnyPolicy=function(I,B){var j=this.getCriticalExtV("inhibitAnyPolicy",I,B);if(I=j[0],B=j[1],I!=null){var R={extname:"inhibitAnyPolicy"};B&&(R.critical=!0);var M=A(I,0);return M==-1?new N("wrong value"):(R.skip=M,R)}},this.getExtCRLNumber=function(I,B){var j={extname:"cRLNumber"};if(B&&(j.critical=!0),I.substr(0,2)=="02")return j.num={hex:n(I,0)},j;throw new N("hExtV parse error: "+I)},this.getExtCRLReason=function(I,B){var j={extname:"cRLReason"};if(B&&(j.critical=!0),I.substr(0,2)=="0a")return j.code=parseInt(n(I,0),16),j;throw new Error("hExtV parse error: "+I)},this.getExtOcspNonce=function(I,B){var j={extname:"ocspNonce"};B&&(j.critical=!0);var R=n(I,0);return j.hex=R,j},this.getExtOcspNoCheck=function(I,B){var j={extname:"ocspNoCheck"};return B&&(j.critical=!0),j},this.getExtAdobeTimeStamp=function(I,B){if(I===void 0&&B===void 0){var j=this.getExtInfo("adobeTimeStamp");if(j===void 0)return;I=i(this.hex,j.vidx),B=j.critical}var R={extname:"adobeTimeStamp"};B&&(R.critical=!0);var M=r(I,0);if(M.length>1){var Q=i(I,M[1]),V=this.getGeneralName(Q);V.uri!=null&&(R.uri=V.uri)}if(M.length>2){var z=i(I,M[2]);z=="0101ff"&&(R.reqauth=!0),z=="010100"&&(R.reqauth=!1)}return R},this.getExtSubjectDirectoryAttributes=function(I,B){if(I===void 0&&B===void 0){var j=this.getExtInfo("subjectDirectoryAttributes");if(j===void 0)return;I=i(this.hex,j.vidx),B=j.critical}var R={extname:"subjectDirectoryAttributes"};B&&(R.critical=!0);try{for(var M=u(I),Q=[],V=0;V<M.seq.length;V++){var z=M.seq[V],te=cr(z,"seq.0.oid"),me=cr(z,"seq.1.set");if(te==null||me==null)throw"error";Q.push({attr:te,array:me})}return R.array=Q,R}catch{throw new Error("malformed subjectDirectoryAttributes extension value")}};var L=function(I){var B={};try{var j=I.seq[0].oid,R=p.asn1.x509.OID.name2oid(j);B.type=p.asn1.x509.OID.oid2atype(R);var M=I.seq[1];if(M.utf8str!=null)B.ds="utf8",B.value=M.utf8str.str;else if(M.numstr!=null)B.ds="num",B.value=M.numstr.str;else if(M.telstr!=null)B.ds="tel",B.value=M.telstr.str;else if(M.prnstr!=null)B.ds="prn",B.value=M.prnstr.str;else if(M.ia5str!=null)B.ds="ia5",B.value=M.ia5str.str;else if(M.visstr!=null)B.ds="vis",B.value=M.visstr.str;else if(M.bmpstr!=null)B.ds="bmp",B.value=M.bmpstr.str;else throw"error";return B}catch{throw new Erorr("improper ASN.1 parsed AttrTypeAndValue")}},ne=function(I){try{return I.set.map(function(B){return L(B)})}catch(B){throw new Error("improper ASN.1 parsed RDN: "+B)}},pe=function(I){try{return I.seq.map(function(B){return ne(B)})}catch(B){throw new Error("improper ASN.1 parsed X500Name: "+B)}};this.getX500NameRule=function(I){for(var B=!0,j=!0,R=!1,M="",Q="",V=null,z=[],te=0;te<I.length;te++)for(var me=I[te],at=0;at<me.length;at++)z.push(me[at]);for(var te=0;te<z.length;te++){var st=z[te],ct=st.ds,It=st.value,Dt=st.type;if(M+=":"+ct,ct!="prn"&&ct!="utf8"&&ct!="ia5")return"mixed";if(ct=="ia5"){if(Dt!="CN")return"mixed";if(p.lang.String.isMail(It))continue;return"mixed"}if(Dt=="C"){if(ct=="prn")continue;return"mixed"}if(Q+=":"+ct,V==null)V=ct;else if(V!==ct)return"mixed"}return V??"prn"},this.getAttrTypeAndValue=function(I){var B=u(I);return L(B)},this.getRDN=function(I){var B=u(I);return ne(B)},this.getX500NameArray=function(I){var B=u(I);return pe(B)},this.getX500Name=function(I,B,j){var R=this.getX500NameArray(I),M=this.dnarraytostr(R),Q={str:M};return Q.array=R,j==!0&&(Q.hex=I),B==!0&&(Q.canon=this.c14nRDNArray(R)),Q},this.readCertPEM=function(I){this.readCertHex(C(I))},this.readCertHex=function(I){this.hex=I,this.getVersion();try{b(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(I){var B={};return I==null&&(I={}),B.version=this.getVersion(),B.serial={hex:this.getSerialNumberHex()},B.sigalg=this.getSignatureAlgorithmField(),B.issuer=this.getIssuer(I.dncanon,I.dnhex),B.notbefore=this.getNotBefore(),B.notafter=this.getNotAfter(),B.subject=this.getSubject(I.dncanon,I.dnhex),B.sbjpubkey=cn(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo!=null&&this.aExtInfo.length>0&&(B.ext=this.getExtParamArray()),B.sighex=this.getSignatureValueHex(),I.tbshex==!0&&(B.tbshex=m(this.hex,0,[0])),I.nodnarray==!0&&(delete B.issuer.array,delete B.subject.array),B},this.getExtParamArray=function(I){if(I==null){var B=v(this.hex,0,[0,"[3]"]);B!=-1&&(I=E(this.hex,0,[0,"[3]",0],"30"))}for(var j=[],R=r(I,0),M=0;M<R.length;M++){var Q=i(I,R[M]),V=this.getExtParam(Q);V!=null&&j.push(V)}return j},this.getExtParam=function(I){var B={},j=r(I,0),R=j.length;if(R!=2&&R!=3)throw new Error("wrong number elements in Extension: "+R+" "+I);var M=S(c(I,0,[0],"06")),Q=!1;R==3&&m(I,0,[1])=="0101ff"&&(Q=!0);var V=m(I,0,[R-1,0]),z=void 0;if(M=="2.5.29.14"?z=this.getExtSubjectKeyIdentifier(V,Q):M=="2.5.29.15"?z=this.getExtKeyUsage(V,Q):M=="2.5.29.17"?z=this.getExtSubjectAltName(V,Q):M=="2.5.29.18"?z=this.getExtIssuerAltName(V,Q):M=="2.5.29.19"?z=this.getExtBasicConstraints(V,Q):M=="2.5.29.30"?z=this.getExtNameConstraints(V,Q):M=="2.5.29.31"?z=this.getExtCRLDistributionPoints(V,Q):M=="2.5.29.32"?z=this.getExtCertificatePolicies(V,Q):M=="2.5.29.33"?z=this.getExtPolicyMappings(V,Q):M=="2.5.29.35"?z=this.getExtAuthorityKeyIdentifier(V,Q):M=="2.5.29.36"?z=this.getExtPolicyConstraints(V,Q):M=="2.5.29.37"?z=this.getExtExtKeyUsage(V,Q):M=="2.5.29.54"?z=this.getExtInhibitAnyPolicy(V,Q):M=="1.3.6.1.5.5.7.1.1"?z=this.getExtAuthorityInfoAccess(V,Q):M=="2.5.29.20"?z=this.getExtCRLNumber(V,Q):M=="2.5.29.21"?z=this.getExtCRLReason(V,Q):M=="2.5.29.9"?z=this.getExtSubjectDirectoryAttributes(V,Q):M=="1.3.6.1.5.5.7.48.1.2"?z=this.getExtOcspNonce(V,Q):M=="1.3.6.1.5.5.7.48.1.5"?z=this.getExtOcspNoCheck(V,Q):M=="1.2.840.113583.1.1.9.1"?z=this.getExtAdobeTimeStamp(V,Q):pt.EXT_PARSER[M]!=null&&(z=pt.EXT_PARSER[M](M,Q,V)),z!=null)return z;var te={extname:M,extn:V};try{te.extn=u(V)}catch{}return Q&&(te.critical=!0),te},this.findExt=function(I,B){for(var j=0;j<I.length;j++)if(I[j].extname==B)return I[j];return null},this.updateExtCDPFullURI=function(I,B){var j=this.findExt(I,"cRLDistributionPoints");if(j!=null&&j.array!=null){for(var R=j.array,M=0;M<R.length;M++)if(R[M].dpname!=null&&R[M].dpname.full!=null)for(var Q=R[M].dpname.full,V=0;V<Q.length;V++){var z=Q[M];z.uri!=null&&(z.uri=B)}}},this.updateExtAIAOCSP=function(I,B){var j=this.findExt(I,"authorityInfoAccess");if(j!=null&&j.array!=null)for(var R=j.array,M=0;M<R.length;M++)R[M].ocsp!=null&&(R[M].ocsp=B)},this.updateExtAIACAIssuer=function(I,B){var j=this.findExt(I,"authorityInfoAccess");if(j!=null&&j.array!=null)for(var R=j.array,M=0;M<R.length;M++)R[M].caissuer!=null&&(R[M].caissuer=B)},this.dnarraytostr=function(I){function B(R){return R.map(function(M){return j(M).replace(/\+/,"\\+")}).join("+")}function j(R){return R.type+"="+R.value}return"/"+I.map(function(R){return B(R).replace(/\//,"\\/")}).join("/")},this.setCanonicalizedDN=function(I){var B;if(I.str!=null&&I.array==null){var j=new p.asn1.x509.X500Name({str:I.str}),R=j.tohex();B=this.getX500NameArray(R)}else B=I.array;I.canon==null&&(I.canon=this.c14nRDNArray(B))},this.c14nRDNArray=function(I){for(var B=[],j=0;j<I.length;j++){for(var R=I[j],M=[],Q=0;Q<R.length;Q++){var V=R[Q],z=V.value;z=z.replace(/^\s*/,""),z=z.replace(/\s*$/,""),z=z.replace(/\s+/g," "),z=z.toLowerCase(),M.push(V.type.toLowerCase()+"="+z)}B.push(M.join("+"))}return"/"+B.join("/")},this.getInfo=function(){var I=function(_r){for(var xt="",fr="    ",yt=`
`,xe=_r.array,$e=0;$e<xe.length;$e++){var ve=xe[$e];if(ve.dn!=null&&(xt+=fr+"dn: "+ve.dn.str+yt),ve.ip!=null&&(xt+=fr+"ip: "+ve.ip+yt),ve.rfc822!=null&&(xt+=fr+"rfc822: "+ve.rfc822+yt),ve.dns!=null&&(xt+=fr+"dns: "+ve.dns+yt),ve.uri!=null&&(xt+=fr+"uri: "+ve.uri+yt),ve.other!=null){var ye=ve.other.oid,Y=JSON.stringify(ve.other.value).replace(/\"/g,"");xt+=fr+"other: "+ye+"="+Y+yt}}return xt=xt.replace(/\n$/,""),xt},B=function(_r){for(var xt="",fr=_r.array,yt=0;yt<fr.length;yt++){var xe=fr[yt];if(xt+="    policy oid: "+xe.policyoid+`
`,xe.array!==void 0)for(var $e=0;$e<xe.array.length;$e++){var ve=xe.array[$e];ve.cps!==void 0&&(xt+="    cps: "+ve.cps+`
`)}}return xt},j=function(_r){for(var xt="",fr=_r.array,yt=0;yt<fr.length;yt++){var xe=fr[yt];try{xe.dpname.full[0].uri!==void 0&&(xt+="    "+xe.dpname.full[0].uri+`
`)}catch{}try{xe.dname.full[0].dn.hex!==void 0&&(xt+="    "+pt.hex2dn(xe.dpname.full[0].dn.hex)+`
`)}catch{}}return xt},R=function(_r){for(var xt="",fr=_r.array,yt=0;yt<fr.length;yt++){var xe=fr[yt];xe.caissuer!==void 0&&(xt+="    caissuer: "+xe.caissuer+`
`),xe.ocsp!==void 0&&(xt+="    ocsp: "+xe.ocsp+`
`)}return xt},M=pt,Q,V,z;if(Q=`Basic Fields
`,Q+="  serial number: "+this.getSerialNumberHex()+`
`,Q+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,Q+="  issuer: "+this.getIssuerString()+`
`,Q+="  notBefore: "+this.getNotBefore()+`
`,Q+="  notAfter: "+this.getNotAfter()+`
`,Q+="  subject: "+this.getSubjectString()+`
`,Q+=`  subject public key info: 
`,V=this.getPublicKey(),Q+="    key algorithm: "+V.type+`
`,V.type==="RSA"&&(Q+="    n="+Oh(V.n.toString(16)).substr(0,16)+`...
`,Q+="    e="+Oh(V.e.toString(16))+`
`),z=this.aExtInfo,z!=null){Q+=`X509v3 Extensions:
`;for(var te=0;te<z.length;te++){var me=z[te],at=p.asn1.x509.OID.oid2name(me.oid);at===""&&(at=me.oid);var st="";if(me.critical===!0&&(st="CRITICAL"),Q+="  "+at+" "+st+`:
`,at==="basicConstraints"){var ct=this.getExtBasicConstraints();ct.cA===void 0?Q+=`    {}
`:(Q+="    cA=true",ct.pathLen!==void 0&&(Q+=", pathLen="+ct.pathLen),Q+=`
`)}else if(at=="policyMappings"){var It=this.getExtPolicyMappings().array,Dt=It.map(function(_r){var xt=_r;return xt[0]+":"+xt[1]}).join(", ");Q+="    "+Dt+`
`}else if(at=="policyConstraints"){var Ht=this.getExtPolicyConstraints();Q+="    ",Ht.reqexp!=null&&(Q+=" reqexp="+Ht.reqexp),Ht.inhibit!=null&&(Q+=" inhibit="+Ht.inhibit),Q+=`
`}else if(at=="inhibitAnyPolicy"){var Ht=this.getExtInhibitAnyPolicy();Q+="    skip="+Ht.skip+`
`}else if(at=="keyUsage")Q+="    "+this.getExtKeyUsageString()+`
`;else if(at=="subjectKeyIdentifier")Q+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(at=="authorityKeyIdentifier"){var jt=this.getExtAuthorityKeyIdentifier();jt.kid!==void 0&&(Q+="    kid="+jt.kid.hex+`
`)}else if(at=="extKeyUsage"){var hn=this.getExtExtKeyUsage().array;Q+="    "+hn.join(", ")+`
`}else if(at=="subjectAltName"){var Ar=I(this.getExtSubjectAltName());Q+=Ar+`
`}else if(at=="cRLDistributionPoints"){var lr=this.getExtCRLDistributionPoints();Q+=j(lr)}else if(at=="authorityInfoAccess"){var Nr=this.getExtAuthorityInfoAccess();Q+=R(Nr)}else at=="certificatePolicies"&&(Q+=B(this.getExtCertificatePolicies()))}}return Q+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,Q+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`,Q},typeof e=="string"&&(e.indexOf("-----BEGIN")!=-1?this.readCertPEM(e):p.lang.String.isHex(e)&&this.readCertHex(e))}pt.EXT_PARSER={};pt.registExtParser=function(e,t){pt.EXT_PARSER[e]=t};pt.hex2dn=function(e,t){t===void 0&&(t=0);var r=new pt,n=Ue.getTLV(e,t),a=r.getX500Name(e);return a.str};pt.hex2rdn=function(e,t){if(t===void 0&&(t=0),e.substr(t,2)!=="31")throw new Error("malformed RDN");for(var r=new Array,n=Ue.getChildIdx(e,t),a=0;a<n.length;a++)r.push(pt.hex2attrTypeValue(e,n[a]));return r=r.map(function(u){return u.replace("+","\\+")}),r.join("+")};pt.hex2attrTypeValue=function(e,t){var r=Ue,n=r.getV;if(t===void 0&&(t=0),e.substr(t,2)!=="30")throw new Error("malformed attribute type and value");var a=r.getChildIdx(e,t);a.length!==2||e.substr(a[0],2);var u=n(e,a[0]),i=p.asn1.ASN1Util.oidHexToInt(u),c=p.asn1.x509.OID.oid2atype(i),l=n(e,a[1]),m=Rn(l);return c+"="+m};pt.getPublicKeyFromCertHex=function(e){var t=new pt;return t.readCertHex(e),t.getPublicKey()};pt.getPublicKeyFromCertPEM=function(e){var t=new pt;return t.readCertPEM(e),t.getPublicKey()};pt.getPublicKeyInfoPropOfCertPEM=function(e){var t=Ue,r=t.getVbyList,n={},a,u,i;return n.algparam=null,a=new pt,a.readCertPEM(e),u=a.getPublicKeyHex(),n.keyhex=r(u,0,[1],"03").substr(2),n.algoid=r(u,0,[0,0],"06"),n.algoid==="2a8648ce3d0201"&&(n.algparam=r(u,0,[0,1],"06")),n};pt.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];var M_=function(e){var t=p,r=t.lang.String.isHex,n=Ue,a=n.getV,u=n.getTLV,i=n.getVbyList,c=n.getTLVbyList,l=n.getTLVbyListEx,m=n.getIdxbyList,E=n.getIdxbyListEx,b=n.getChildIdx,v=new pt;this.hex=null,this.posSigAlg=null,this.posRevCert=null,this.parsed=null,this._setPos=function(){var g=m(this.hex,0,[0,0]),A=this.hex.substr(g,2);if(A=="02")this.posSigAlg=1;else if(A=="30")this.posSigAlg=0;else throw new Error("malformed 1st item of TBSCertList: "+A);var w=m(this.hex,0,[0,this.posSigAlg+3]),S=this.hex.substr(w,2);if(S=="17"||S=="18"){var y,C;y=m(this.hex,0,[0,this.posSigAlg+4]),this.posRevCert=null,y!=-1&&(C=this.hex.substr(y,2),C=="30"&&(this.posRevCert=this.posSigAlg+4))}else if(S=="30")this.posRevCert=this.posSigAlg+3;else if(S=="a0")this.posRevCert=null;else throw new Error("malformed nextUpdate or revCert tag: "+S)},this.getVersion=function(){return this.posSigAlg==0?null:parseInt(i(this.hex,0,[0,0],"02"),16)+1},this.getSignatureAlgorithmField=function(){var g=c(this.hex,0,[0,this.posSigAlg],"30");return v.getAlgorithmIdentifierName(g)},this.getIssuer=function(){return v.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return c(this.hex,0,[0,this.posSigAlg+1],"30")},this.getThisUpdate=function(){var g=i(this.hex,0,[0,this.posSigAlg+2]);return result=Rn(g)},this.getNextUpdate=function(){var g=m(this.hex,0,[0,this.posSigAlg+3]),A=this.hex.substr(g,2);return A!="17"&&A!="18"?null:Rn(a(this.hex,g))},this.getRevCertArray=function(){if(this.posRevCert==null)return null;for(var g=[],A=m(this.hex,0,[0,this.posRevCert]),w=b(this.hex,A),S=0;S<w.length;S++){var y=u(this.hex,w[S]);g.push(this.getRevCert(y))}return g},this.getRevCert=function(g){var A={},w=b(g,0);return A.sn={hex:i(g,0,[0],"02")},A.date=Rn(i(g,0,[1])),w.length==3&&(A.ext=v.getExtParamArray(c(g,0,[2]))),A},this.findRevCert=function(g){var A=new pt(g),w=A.getSerialNumberHex();return this.findRevCertBySN(w)},this.findRevCertBySN=function(g){if(this.parsed==null&&this.getParam(),this.parsed.revcert==null)return null;for(var A=this.parsed.revcert,w=0;w<A.length;w++)if(g==A[w].sn.hex)return A[w];return null},this.getSignatureValueHex=function(){return i(this.hex,0,[2],"03",!0)},this.verifySignature=function(g){var A=this.getSignatureAlgorithmField(),w=this.getSignatureValueHex(),S=c(this.hex,0,[0],"30"),y=new p.crypto.Signature({alg:A});return y.init(g),y.updateHex(S),y.verify(w)},this.getParam=function(g){var A={},w=this.getVersion();w!=null&&(A.version=w),A.sigalg=this.getSignatureAlgorithmField(),A.issuer=this.getIssuer(),A.thisupdate=this.getThisUpdate();var S=this.getNextUpdate();S!=null&&(A.nextupdate=S);var y=this.getRevCertArray();y!=null&&(A.revcert=y);var C=E(this.hex,0,[0,"[0]"]);if(C!=-1){var x=l(this.hex,0,[0,"[0]",0]);A.ext=v.getExtParamArray(x)}return A.sighex=this.getSignatureValueHex(),this.parsed=A,typeof g=="object"&&(g.tbshex==!0&&(A.tbshex=c(this.hex,0,[0])),g.nodnarray==!0&&delete A.issuer.array),A},typeof e=="string"&&(r(e)?this.hex=e:e.match(/-----BEGIN X509 CRL/)&&(this.hex=Cr(e)),this._setPos())};(typeof p>"u"||!p)&&(p={});(typeof p.jws>"u"||!p.jws)&&(p.jws={});p.jws.JWS=function(){var e=p,t=e.jws.JWS,r=t.isSafeJSONString;this.parseJWS=function(n,a){if(!(this.parsedJWS!==void 0&&(a||this.parsedJWS.sigvalH!==void 0))){var u=n.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(u==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var i=u[1],c=u[2],l=u[3],m=i+"."+c;if(this.parsedJWS={},this.parsedJWS.headB64U=i,this.parsedJWS.payloadB64U=c,this.parsedJWS.sigvalB64U=l,this.parsedJWS.si=m,!a){var E=Er(l),b=Bn(E,16);this.parsedJWS.sigvalH=E,this.parsedJWS.sigvalBI=b}var v=mi(i),g=mi(c);if(this.parsedJWS.headS=v,this.parsedJWS.payloadS=g,!r(v,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+v}}};p.jws.JWS.sign=function(e,t,r,n,a){var u=p,i=u.jws,c=i.JWS,l=c.readSafeJSONString,m=c.isSafeJSONString,E=u.crypto,b=E.ECDSA,v=E.Mac,g=E.Signature,A=JSON,w,S,y;if(typeof t!="string"&&typeof t!="object")throw"spHeader must be JSON string or object: "+t;if(typeof t=="object"&&(S=t,w=A.stringify(S)),typeof t=="string"){if(w=t,!m(w))throw"JWS Head is not safe JSON string: "+w;S=l(w)}if(y=r,typeof r=="object"&&(y=A.stringify(r)),(e==""||e==null)&&S.alg!==void 0&&(e=S.alg),e!=""&&e!=null&&S.alg===void 0&&(S.alg=e,w=A.stringify(S)),e!==S.alg)throw"alg and sHeader.alg doesn't match: "+e+"!="+S.alg;var C=null;if(c.jwsalg2sigalg[e]===void 0)throw"unsupported alg name: "+e;C=c.jwsalg2sigalg[e];var x=Ku(w),N=Ku(y),L=x+"."+N,ne="";if(C.substr(0,4)=="Hmac"){if(n===void 0)throw"mac key shall be specified for HS* alg";var pe=new v({alg:C,prov:"cryptojs",pass:n});pe.updateString(L),ne=pe.doFinal()}else if(C.indexOf("withECDSA")!=-1){var I=new g({alg:C});I.init(n,a),I.updateString(L);var B=I.sign();ne=p.crypto.ECDSA.asn1SigToConcatSig(B)}else if(C!="none"){var I=new g({alg:C});I.init(n,a),I.updateString(L),ne=I.sign()}var j=zr(ne);return L+"."+j};p.jws.JWS.verify=function(e,t,r){var n=p,a=n.jws,u=a.JWS,i=u.readSafeJSONString,c=n.crypto,l=c.ECDSA,m=c.Mac,E=c.Signature,b;if(typeof At!==void 0&&(b=At),!Kh(e))return!1;var v=e.split(".");if(v.length!==3)return!1;var g=v[0],A=v[1],w=g+"."+A,S=Er(v[2]),y=i(mi(v[0])),C=null,x=null;if(y.alg===void 0)throw"algorithm not specified in header";if(C=y.alg,x=C.substr(0,2),r!=null&&Object.prototype.toString.call(r)==="[object Array]"&&r.length>0){var N=":"+r.join(":")+":";if(N.indexOf(":"+C+":")==-1)throw"algorithm '"+C+"' not accepted in the list"}if(C!="none"&&t===null)throw"key shall be specified to verify.";if(typeof t=="string"&&t.indexOf("-----BEGIN ")!=-1&&(t=Lt.getKey(t)),(x=="RS"||x=="PS")&&!(t instanceof b))throw"key shall be a RSAKey obj for RS* and PS* algs";if(x=="ES"&&!(t instanceof l))throw"key shall be a ECDSA obj for ES* algs";C=="none";var L=null;if(u.jwsalg2sigalg[y.alg]===void 0)throw"unsupported alg name: "+C;if(L=u.jwsalg2sigalg[C],L=="none")throw"not supported";if(L.substr(0,4)=="Hmac"){var ne=null;if(t===void 0)throw"hexadecimal key shall be specified for HMAC";var pe=new m({alg:L,pass:t});return pe.updateString(w),ne=pe.doFinal(),S==ne}else if(L.indexOf("withECDSA")!=-1){var I=null;try{I=l.concatSigToASN1Sig(S)}catch{return!1}var B=new E({alg:L});return B.init(t),B.updateString(w),B.verify(I)}else{var B=new E({alg:L});return B.init(t),B.updateString(w),B.verify(S)}};p.jws.JWS.parse=function(e){var t=e.split("."),r={},n,a,u;if(t.length!=2&&t.length!=3)throw"malformed sJWS: wrong number of '.' splitted elements";return n=t[0],a=t[1],t.length==3&&(u=t[2]),r.headerObj=p.jws.JWS.readSafeJSONString(mi(n)),r.payloadObj=p.jws.JWS.readSafeJSONString(mi(a)),r.headerPP=JSON.stringify(r.headerObj,null,"  "),r.payloadObj==null?r.payloadPP=mi(a):r.payloadPP=JSON.stringify(r.payloadObj,null,"  "),u!==void 0&&(r.sigHex=Er(u)),r};p.jws.JWS.verifyJWT=function(e,t,r){var n=p,a=n.jws,u=a.JWS,i=u.readSafeJSONString,c=u.inArray,l=u.includedArray;if(!Kh(e))return!1;var m=e.split(".");if(m.length!=3)return!1;var E=m[0],b=m[1],v=E+"."+b,g=Er(m[2]),A=i(mi(E)),w=i(mi(b));if(A.alg===void 0)return!1;if(r.alg===void 0)throw"acceptField.alg shall be specified";if(!c(A.alg,r.alg)||w.iss!==void 0&&typeof r.iss=="object"&&!c(w.iss,r.iss)||w.sub!==void 0&&typeof r.sub=="object"&&!c(w.sub,r.sub))return!1;if(w.aud!==void 0&&typeof r.aud=="object"){if(typeof w.aud=="string"){if(!c(w.aud,r.aud))return!1}else if(typeof w.aud=="object"&&!l(w.aud,r.aud))return!1}var S=a.IntDate.getNow();return r.verifyAt!==void 0&&typeof r.verifyAt=="number"&&(S=r.verifyAt),(r.gracePeriod===void 0||typeof r.gracePeriod!="number")&&(r.gracePeriod=0),!(w.exp!==void 0&&typeof w.exp=="number"&&w.exp+r.gracePeriod<S||w.nbf!==void 0&&typeof w.nbf=="number"&&S<w.nbf-r.gracePeriod||w.iat!==void 0&&typeof w.iat=="number"&&S<w.iat-r.gracePeriod||w.jti!==void 0&&r.jti!==void 0&&w.jti!==r.jti||!u.verify(e,t,r.alg))};p.jws.JWS.includedArray=function(e,t){var r=p.jws.JWS.inArray;if(e===null||typeof e!="object"||typeof e.length!="number")return!1;for(var n=0;n<e.length;n++)if(!r(e[n],t))return!1;return!0};p.jws.JWS.inArray=function(e,t){if(t===null||typeof t!="object"||typeof t.length!="number")return!1;for(var r=0;r<t.length;r++)if(t[r]==e)return!0;return!1};p.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",ES512:"SHA512withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"};p.jws.JWS.isSafeJSONString=function(e,t,r){var n=null;try{return n=t1(e),typeof n!="object"||n.constructor===Array?0:(t&&(t[r]=n),1)}catch{return 0}};p.jws.JWS.readSafeJSONString=function(e){var t=null;try{return t=t1(e),typeof t!="object"||t.constructor===Array?null:t}catch{return null}};p.jws.JWS.getEncodedSignatureValueFromJWS=function(e){var t=e.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(t==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return t[1]};p.jws.JWS.getJWKthumbprint=function(e){if(e.kty!=="RSA"&&e.kty!=="EC"&&e.kty!=="oct")throw"unsupported algorithm for JWK Thumprint";var t="{";if(e.kty==="RSA"){if(typeof e.n!="string"||typeof e.e!="string")throw"wrong n and e value for RSA key";t+='"e":"'+e.e+'",',t+='"kty":"'+e.kty+'",',t+='"n":"'+e.n+'"}'}else if(e.kty==="EC"){if(typeof e.crv!="string"||typeof e.x!="string"||typeof e.y!="string")throw"wrong crv, x and y value for EC key";t+='"crv":"'+e.crv+'",',t+='"kty":"'+e.kty+'",',t+='"x":"'+e.x+'",',t+='"y":"'+e.y+'"}'}else if(e.kty==="oct"){if(typeof e.k!="string")throw"wrong k value for oct(symmetric) key";t+='"kty":"'+e.kty+'",',t+='"k":"'+e.k+'"}'}var r=Ri(t),n=p.crypto.Util.hashHex(r,"sha256"),a=zr(n);return a};p.jws.IntDate={};p.jws.IntDate.get=function(e){var t=p.jws.IntDate,r=t.getNow,n=t.getZulu;if(e=="now")return r();if(e=="now + 1hour")return r()+3600;if(e=="now + 1day")return r()+3600*24;if(e=="now + 1month")return r()+3600*24*30;if(e=="now + 1year")return r()+3600*24*365;if(e.match(/Z$/))return n(e);if(e.match(/^[0-9]+$/))return parseInt(e);throw"unsupported format: "+e};p.jws.IntDate.getZulu=function(e){return s1(e)};p.jws.IntDate.getNow=function(){var e=~~(new Date/1e3);return e};p.jws.IntDate.intDate2UTCString=function(e){var t=new Date(e*1e3);return t.toUTCString()};p.jws.IntDate.intDate2Zulu=function(e){var t=new Date(e*1e3),r=("0000"+t.getUTCFullYear()).slice(-4),n=("00"+(t.getUTCMonth()+1)).slice(-2),a=("00"+t.getUTCDate()).slice(-2),u=("00"+t.getUTCHours()).slice(-2),i=("00"+t.getUTCMinutes()).slice(-2),c=("00"+t.getUTCSeconds()).slice(-2);return r+n+a+u+i+c+"Z"};(typeof p>"u"||!p)&&(p={});(typeof p.jws>"u"||!p.jws)&&(p.jws={});p.jws.JWSJS=function(){var e=p,t=e.jws,r=t.JWS,n=r.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(a){this.init();var u=a.split(".");if(u.length!=3)throw"malformed input JWS";this.aHeader.push(u[0]),this.sPayload=u[1],this.aSignature.push(u[2])},this.addSignature=function(a,u,i,c){if(this.sPayload===void 0||this.sPayload===null)throw"there's no JSON-JS signature to add.";var l=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var m=p.jws.JWS.sign(a,u,this.sPayload,i,c),E=m.split("."),b=E[0],v=E[2];this.aHeader.push(E[0]),this.aSignature.push(E[2])}catch(g){throw this.aHeader.length>l&&this.aHeader.pop(),this.aSignature.length>l&&this.aSignature.pop(),"addSignature failed: "+g}},this.verifyAll=function(a){if(this.aHeader.length!==a.length||this.aSignature.length!==a.length)return!1;for(var u=0;u<a.length;u++){var i=a[u];if(i.length!==2)return!1;var c=this.verifyNth(u,i[0],i[1]);if(c===!1)return!1}return!0},this.verifyNth=function(a,u,i){if(this.aHeader.length<=a||this.aSignature.length<=a)return!1;var c=this.aHeader[a],l=this.aSignature[a],m=c+"."+this.sPayload+"."+l,E=!1;try{E=r.verify(m,u,i)}catch{return!1}return E},this.readJWSJS=function(a){if(typeof a=="string"){var u=n(a);if(u==null)throw"argument is not safe JSON object string";this.aHeader=u.headers,this.sPayload=u.payload,this.aSignature=u.signatures}else try{if(a.headers.length>0)this.aHeader=a.headers;else throw"malformed header";if(typeof a.payload=="string")this.sPayload=a.payload;else throw"malformed signatures";if(a.signatures.length>0)this.aSignature=a.signatures;else throw"malformed signatures"}catch(i){throw"malformed JWS-JS JSON object: "+i}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return this.aHeader.length==0?1:0}};Ge.SecureRandom=Wa;Ge.rng_seed_time=jh;Ge.BigInteger=ae;Ge.RSAKey=At;Ge.ECDSA=p.crypto.ECDSA;Ge.DSA=p.crypto.DSA;Ge.Signature=p.crypto.Signature;Ge.MessageDigest=p.crypto.MessageDigest;Ge.Mac=p.crypto.Mac;Ge.KEYUTIL=Lt;Ge.ASN1HEX=Ue;Ge.X509=pt;Ge.X509CRL=M_;Ge.CryptoJS=Ye;Ge.b64tohex=Ka;Ge.b64toBA=J0;Ge.ECFieldElementFp=Gr;Ge.ECPointFp=Qt;Ge.ECCurveFp=ns;Ge.stoBA=r1;Ge.BAtos=n1;Ge.BAtohex=Pc;Ge.stohex=$n;Ge.stob64=y_;Ge.stob64u=S_;Ge.b64utos=__;Ge.b64tob64u=Va;Ge.b64utob64=Gu;Ge.hex2b64=rs;Ge.hextob64u=zr;Ge.b64utohex=Er;Ge.utf8tob64u=Ku;Ge.b64utoutf8=mi;Ge.utf8tob64=D_;Ge.b64toutf8=F_;Ge.utf8tohex=Bc;Ge.hextoutf8=nr;Ge.hextorstr=Rn;Ge.rstrtohex=Ri;Ge.hextob64=Uh;Ge.hextob64nl=P_;Ge.b64nltohex=i1;Ge.hextopem=cn;Ge.pemtohex=Cr;Ge.hextoArrayBuffer=R_;Ge.ArrayBuffertohex=k_;Ge.zulutomsec=Mh;Ge.msectozulu=x_;Ge.zulutosec=s1;Ge.zulutodate=T_;Ge.datetozulu=O_;Ge.uricmptohex=Rc;Ge.hextouricmp=kc;Ge.ipv6tohex=xh;Ge.hextoipv6=Th;Ge.hextoip=_c;Ge.iptohex=qh;Ge.ucs2hextoutf8=Vh;Ge.encodeURIComponentAll=xc;Ge.newline_toUnix=N_;Ge.newline_toDos=L_;Ge.hextoposhex=Oh;Ge.intarystrtohex=H_;Ge.strdiffidx=j_;Ge.oidtohex=o1;Ge.hextooid=Tc;Ge.strpad=Dc;Ge.bitstrtoint=l1;Ge.inttobitstr=f1;Ge.bitstrtobinstr=h1;Ge.binstrtobitstr=U_;Ge.isBase64URLDot=Kh;Ge.namearraytobinstr=Fc;Ge.extendClass=Ce;Ge.foldnl=$c;Ge.b64topem=B_;Ge.pemtob64=$_;Ge.timeogen=a1;Ge.aryval=cr;Ge.inttohex=c1;Ge.twoscompl=Wu;Ge.KJUR=p;Ge.crypto=p.crypto;Ge.asn1=p.asn1;Ge.jws=p.jws;Ge.lang=p.lang;Ge.VERSION=XA;Ge.VERSION_FULL=ZA});var Oc=Et(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});Js.isInSubnet=V_;Js.isCorrect=K_;Js.numberToPaddedHex=w1;Js.stringToPaddedHex=z_;Js.testBit=G_;function V_(e){return this.subnetMask<e.subnetMask?!1:this.mask(e.subnetMask)===e.mask()}function K_(e){return function(){return this.addressMinusSuffix!==this.correctForm()?!1:this.subnetMask===e&&!this.parsedSubnet?!0:this.parsedSubnet===String(this.subnetMask)}}function w1(e){return e.toString(16).padStart(2,"0")}function z_(e){return w1(parseInt(e,10))}function G_(e,t){let{length:r}=e;if(t>r)return!1;let n=r-t;return e.substring(n,n+1)==="1"}});var Gh=Et(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});ki.RE_SUBNET_STRING=ki.RE_ADDRESS=ki.GROUPS=ki.BITS=void 0;ki.BITS=32;ki.GROUPS=4;ki.RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g;ki.RE_SUBNET_STRING=/\/\d{1,2}$/});var Lc=Et(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});Nc.AddressError=void 0;var Wh=class extends Error{constructor(t,r){super(t),this.name="AddressError",this.parseMessage=r}};Nc.AddressError=Wh});var Jh=Et(xi=>{"use strict";var W_=xi&&xi.__createBinding||(Object.create?(function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}):(function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]})),Y_=xi&&xi.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t}),E1=xi&&xi.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&W_(t,e,r);return Y_(t,e),t};Object.defineProperty(xi,"__esModule",{value:!0});xi.Address4=void 0;var Ya=E1(Oc()),wi=E1(Gh()),b1=Lc(),Yh=class e{constructor(t){this.groups=wi.GROUPS,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=Ya.isCorrect(wi.BITS),this.isInSubnet=Ya.isInSubnet,this.address=t;let r=wi.RE_SUBNET_STRING.exec(t);if(r){if(this.parsedSubnet=r[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,this.subnetMask<0||this.subnetMask>wi.BITS)throw new b1.AddressError("Invalid subnet mask.");t=t.replace(wi.RE_SUBNET_STRING,"")}this.addressMinusSuffix=t,this.parsedAddress=this.parse(t)}static isValid(t){try{return new e(t),!0}catch{return!1}}parse(t){let r=t.split(".");if(!t.match(wi.RE_ADDRESS))throw new b1.AddressError("Invalid IPv4 address.");return r}correctForm(){return this.parsedAddress.map(t=>parseInt(t,10)).join(".")}static fromHex(t){let r=t.replace(/:/g,"").padStart(8,"0"),n=[],a;for(a=0;a<8;a+=2){let u=r.slice(a,a+2);n.push(parseInt(u,16))}return new e(n.join("."))}static fromInteger(t){return e.fromHex(t.toString(16))}static fromArpa(t){let n=t.replace(/(\.in-addr\.arpa)?\.$/,"").split(".").reverse().join(".");return new e(n)}toHex(){return this.parsedAddress.map(t=>Ya.stringToPaddedHex(t)).join(":")}toArray(){return this.parsedAddress.map(t=>parseInt(t,10))}toGroup6(){let t=[],r;for(r=0;r<wi.GROUPS;r+=2)t.push(`${Ya.stringToPaddedHex(this.parsedAddress[r])}${Ya.stringToPaddedHex(this.parsedAddress[r+1])}`);return t.join(":")}bigInt(){return BigInt(`0x${this.parsedAddress.map(t=>Ya.stringToPaddedHex(t)).join("")}`)}_startAddress(){return BigInt(`0b${this.mask()+"0".repeat(wi.BITS-this.subnetMask)}`)}startAddress(){return e.fromBigInt(this._startAddress())}startAddressExclusive(){let t=BigInt("1");return e.fromBigInt(this._startAddress()+t)}_endAddress(){return BigInt(`0b${this.mask()+"1".repeat(wi.BITS-this.subnetMask)}`)}endAddress(){return e.fromBigInt(this._endAddress())}endAddressExclusive(){let t=BigInt("1");return e.fromBigInt(this._endAddress()-t)}static fromBigInt(t){return e.fromHex(t.toString(16))}mask(t){return t===void 0&&(t=this.subnetMask),this.getBitsBase2(0,t)}getBitsBase2(t,r){return this.binaryZeroPad().slice(t,r)}reverseForm(t){t||(t={});let r=this.correctForm().split(".").reverse().join(".");return t.omitSuffix?r:`${r}.in-addr.arpa.`}isMulticast(){return this.isInSubnet(new e("224.0.0.0/4"))}binaryZeroPad(){return this.bigInt().toString(2).padStart(wi.BITS,"0")}groupForV6(){let t=this.parsedAddress;return this.address.replace(wi.RE_ADDRESS,`<span class="hover-group group-v4 group-6">${t.slice(0,2).join(".")}</span>.<span class="hover-group group-v4 group-7">${t.slice(2,4).join(".")}</span>`)}};xi.Address4=Yh});var Xh=Et(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});Br.RE_URL_WITH_PORT=Br.RE_URL=Br.RE_ZONE_STRING=Br.RE_SUBNET_STRING=Br.RE_BAD_ADDRESS=Br.RE_BAD_CHARACTERS=Br.TYPES=Br.SCOPES=Br.GROUPS=Br.BITS=void 0;Br.BITS=128;Br.GROUPS=8;Br.SCOPES={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"};Br.TYPES={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"};Br.RE_BAD_CHARACTERS=/([^0-9a-f:/%])/gi;Br.RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi;Br.RE_SUBNET_STRING=/\/\d{1,3}(?=%|$)/;Br.RE_ZONE_STRING=/%.*$/;Br.RE_URL=/^\[{0,1}([0-9a-f:]+)\]{0,1}/;Br.RE_URL_WITH_PORT=/\[([0-9a-f:]+)\]:([0-9]{1,5})/});var Zh=Et(Ja=>{"use strict";Object.defineProperty(Ja,"__esModule",{value:!0});Ja.spanAllZeroes=A1;Ja.spanAll=J_;Ja.spanLeadingZeroes=X_;Ja.simpleGroup=Z_;function A1(e){return e.replace(/(0+)/g,'<span class="zero">$1</span>')}function J_(e,t=0){return e.split("").map((n,a)=>`<span class="digit value-${n} position-${a+t}">${A1(n)}</span>`).join("")}function y1(e){return e.replace(/^(0+)/,'<span class="zero">$1</span>')}function X_(e){return e.split(":").map(r=>y1(r)).join(":")}function Z_(e,t=0){return e.split(":").map((n,a)=>/group-v4/.test(n)?n:`<span class="hover-group group-${a+t}">${y1(n)}</span>`)}});var S1=Et(kn=>{"use strict";var Q_=kn&&kn.__createBinding||(Object.create?(function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}):(function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]})),eD=kn&&kn.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t}),tD=kn&&kn.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Q_(t,e,r);return eD(t,e),t};Object.defineProperty(kn,"__esModule",{value:!0});kn.ADDRESS_BOUNDARY=void 0;kn.groupPossibilities=jc;kn.padGroup=Hc;kn.simpleRegularExpression=nD;kn.possibleElisions=iD;var rD=tD(Xh());function jc(e){return`(${e.join("|")})`}function Hc(e){return e.length<4?`0{0,${4-e.length}}${e}`:e}kn.ADDRESS_BOUNDARY="[^A-Fa-f0-9:]";function nD(e){let t=[];e.forEach((n,a)=>{parseInt(n,16)===0&&t.push(a)});let r=t.map(n=>e.map((a,u)=>{if(u===n){let i=u===0||u===rD.GROUPS-1?":":"";return jc([Hc(a),i])}return Hc(a)}).join(":"));return r.push(e.map(Hc).join(":")),jc(r)}function iD(e,t,r){let n=t?"":":",a=r?"":":",u=[];!t&&!r&&u.push("::"),t&&r&&u.push(""),(r&&!t||!r&&t)&&u.push(":"),u.push(`${n}(:0{1,4}){1,${e-1}}`),u.push(`(0{1,4}:){1,${e-1}}${a}`),u.push(`(0{1,4}:){${e-1}}0{1,4}`);for(let i=1;i<e-1;i++)for(let c=1;c<e-i;c++)u.push(`(0{1,4}:){${c}}:(0{1,4}:){${e-c-i-1}}0{1,4}`);return jc(u)}});var C1=Et(Ti=>{"use strict";var sD=Ti&&Ti.__createBinding||(Object.create?(function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}):(function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]})),aD=Ti&&Ti.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t}),qc=Ti&&Ti.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&sD(t,e,r);return aD(t,e),t};Object.defineProperty(Ti,"__esModule",{value:!0});Ti.Address6=void 0;var _1=qc(Oc()),Qh=qc(Gh()),wr=qc(Xh()),ep=qc(Zh()),Xs=Jh(),Zs=S1(),is=Lc(),Uc=Oc();function Mc(e){if(!e)throw new Error("Assertion failed.")}function uD(e){let t=/(\d+)(\d{3})/;for(;t.test(e);)e=e.replace(t,"$1,$2");return e}function oD(e){return e=e.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2'),e=e.replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2'),e}function cD(e,t){let r=[],n=[],a;for(a=0;a<e.length;a++)a<t[0]?r.push(e[a]):a>t[1]&&n.push(e[a]);return r.concat(["compact"]).concat(n)}function D1(e){return parseInt(e,16).toString(16).padStart(4,"0")}function F1(e){return e&255}var tp=class e{constructor(t,r){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=_1.isInSubnet,this.isCorrect=_1.isCorrect(wr.BITS),r===void 0?this.groups=wr.GROUPS:this.groups=r,this.address=t;let n=wr.RE_SUBNET_STRING.exec(t);if(n){if(this.parsedSubnet=n[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>wr.BITS)throw new is.AddressError("Invalid subnet mask.");t=t.replace(wr.RE_SUBNET_STRING,"")}else if(/\//.test(t))throw new is.AddressError("Invalid subnet mask.");let a=wr.RE_ZONE_STRING.exec(t);a&&(this.zone=a[0],t=t.replace(wr.RE_ZONE_STRING,"")),this.addressMinusSuffix=t,this.parsedAddress=this.parse(this.addressMinusSuffix)}static isValid(t){try{return new e(t),!0}catch{return!1}}static fromBigInt(t){let r=t.toString(16).padStart(32,"0"),n=[],a;for(a=0;a<wr.GROUPS;a++)n.push(r.slice(a*4,(a+1)*4));return new e(n.join(":"))}static fromURL(t){let r,n=null,a;if(t.indexOf("[")!==-1&&t.indexOf("]:")!==-1){if(a=wr.RE_URL_WITH_PORT.exec(t),a===null)return{error:"failed to parse address with port",address:null,port:null};r=a[1],n=a[2]}else if(t.indexOf("/")!==-1){if(t=t.replace(/^[a-z0-9]+:\/\//,""),a=wr.RE_URL.exec(t),a===null)return{error:"failed to parse address from URL",address:null,port:null};r=a[1]}else r=t;return n?(n=parseInt(n,10),(n<0||n>65536)&&(n=null)):n=null,{address:new e(r),port:n}}static fromAddress4(t){let r=new Xs.Address4(t),n=wr.BITS-(Qh.BITS-r.subnetMask);return new e(`::ffff:${r.correctForm()}/${n}`)}static fromArpa(t){let r=t.replace(/(\.ip6\.arpa)?\.$/,""),n=7;if(r.length!==63)throw new is.AddressError("Invalid 'ip6.arpa' form.");let a=r.split(".").reverse();for(let u=n;u>0;u--){let i=u*4;a.splice(i,0,":")}return r=a.join(""),new e(r)}microsoftTranscription(){return`${this.correctForm().replace(/:/g,"-")}.ipv6-literal.net`}mask(t=this.subnetMask){return this.getBitsBase2(0,t)}possibleSubnets(t=128){let r=wr.BITS-this.subnetMask,n=Math.abs(t-wr.BITS),a=r-n;return a<0?"0":uD((BigInt("2")**BigInt(a)).toString(10))}_startAddress(){return BigInt(`0b${this.mask()+"0".repeat(wr.BITS-this.subnetMask)}`)}startAddress(){return e.fromBigInt(this._startAddress())}startAddressExclusive(){let t=BigInt("1");return e.fromBigInt(this._startAddress()+t)}_endAddress(){return BigInt(`0b${this.mask()+"1".repeat(wr.BITS-this.subnetMask)}`)}endAddress(){return e.fromBigInt(this._endAddress())}endAddressExclusive(){let t=BigInt("1");return e.fromBigInt(this._endAddress()-t)}getScope(){let t=wr.SCOPES[parseInt(this.getBits(12,16).toString(10),10)];return this.getType()==="Global unicast"&&t!=="Link local"&&(t="Global"),t||"Unknown"}getType(){for(let t of Object.keys(wr.TYPES))if(this.isInSubnet(new e(t)))return wr.TYPES[t];return"Global unicast"}getBits(t,r){return BigInt(`0b${this.getBitsBase2(t,r)}`)}getBitsBase2(t,r){return this.binaryZeroPad().slice(t,r)}getBitsBase16(t,r){let n=r-t;if(n%4!==0)throw new Error("Length of bits to retrieve must be divisible by four");return this.getBits(t,r).toString(16).padStart(n/4,"0")}getBitsPastSubnet(){return this.getBitsBase2(this.subnetMask,wr.BITS)}reverseForm(t){t||(t={});let r=Math.floor(this.subnetMask/4),n=this.canonicalForm().replace(/:/g,"").split("").slice(0,r).reverse().join(".");return r>0?t.omitSuffix?n:`${n}.ip6.arpa.`:t.omitSuffix?"":"ip6.arpa."}correctForm(){let t,r=[],n=0,a=[];for(t=0;t<this.parsedAddress.length;t++){let c=parseInt(this.parsedAddress[t],16);c===0&&n++,c!==0&&n>0&&(n>1&&a.push([t-n,t-1]),n=0)}n>1&&a.push([this.parsedAddress.length-n,this.parsedAddress.length-1]);let u=a.map(c=>c[1]-c[0]+1);if(a.length>0){let c=u.indexOf(Math.max(...u));r=cD(this.parsedAddress,a[c])}else r=this.parsedAddress;for(t=0;t<r.length;t++)r[t]!=="compact"&&(r[t]=parseInt(r[t],16).toString(16));let i=r.join(":");return i=i.replace(/^compact$/,"::"),i=i.replace(/(^compact)|(compact$)/,":"),i=i.replace(/compact/,""),i}binaryZeroPad(){return this.bigInt().toString(2).padStart(wr.BITS,"0")}parse4in6(t){let r=t.split(":"),a=r.slice(-1)[0].match(Qh.RE_ADDRESS);if(a){this.parsedAddress4=a[0],this.address4=new Xs.Address4(this.parsedAddress4);for(let u=0;u<this.address4.groups;u++)if(/^0[0-9]+/.test(this.address4.parsedAddress[u]))throw new is.AddressError("IPv4 addresses can't have leading zeroes.",t.replace(Qh.RE_ADDRESS,this.address4.parsedAddress.map(oD).join(".")));this.v4=!0,r[r.length-1]=this.address4.toGroup6(),t=r.join(":")}return t}parse(t){t=this.parse4in6(t);let r=t.match(wr.RE_BAD_CHARACTERS);if(r)throw new is.AddressError(`Bad character${r.length>1?"s":""} detected in address: ${r.join("")}`,t.replace(wr.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>'));let n=t.match(wr.RE_BAD_ADDRESS);if(n)throw new is.AddressError(`Address failed regex: ${n.join("")}`,t.replace(wr.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>'));let a=[],u=t.split("::");if(u.length===2){let i=u[0].split(":"),c=u[1].split(":");i.length===1&&i[0]===""&&(i=[]),c.length===1&&c[0]===""&&(c=[]);let l=this.groups-(i.length+c.length);if(!l)throw new is.AddressError("Error parsing groups");this.elidedGroups=l,this.elisionBegin=i.length,this.elisionEnd=i.length+this.elidedGroups,a=a.concat(i);for(let m=0;m<l;m++)a.push("0");a=a.concat(c)}else if(u.length===1)a=t.split(":"),this.elidedGroups=0;else throw new is.AddressError("Too many :: groups found");if(a=a.map(i=>parseInt(i,16).toString(16)),a.length!==this.groups)throw new is.AddressError("Incorrect number of groups found");return a}canonicalForm(){return this.parsedAddress.map(D1).join(":")}decimal(){return this.parsedAddress.map(t=>parseInt(t,16).toString(10).padStart(5,"0")).join(":")}bigInt(){return BigInt(`0x${this.parsedAddress.map(D1).join("")}`)}to4(){let t=this.binaryZeroPad().split("");return Xs.Address4.fromHex(BigInt(`0b${t.slice(96,128).join("")}`).toString(16))}to4in6(){let t=this.to4(),n=new e(this.parsedAddress.slice(0,6).join(":"),6).correctForm(),a="";return/:$/.test(n)||(a=":"),n+a+t.address}inspectTeredo(){let t=this.getBitsBase16(0,32),n=(this.getBits(80,96)^BigInt("0xffff")).toString(),a=Xs.Address4.fromHex(this.getBitsBase16(32,64)),u=this.getBits(96,128),i=Xs.Address4.fromHex((u^BigInt("0xffffffff")).toString(16)),c=this.getBitsBase2(64,80),l=(0,Uc.testBit)(c,15),m=(0,Uc.testBit)(c,14),E=(0,Uc.testBit)(c,8),b=(0,Uc.testBit)(c,9),v=BigInt(`0b${c.slice(2,6)+c.slice(8,16)}`).toString(10);return{prefix:`${t.slice(0,4)}:${t.slice(4,8)}`,server4:a.address,client4:i.address,flags:c,coneNat:l,microsoft:{reserved:m,universalLocal:b,groupIndividual:E,nonce:v},udpPort:n}}inspect6to4(){let t=this.getBitsBase16(0,16),r=Xs.Address4.fromHex(this.getBitsBase16(16,48));return{prefix:t.slice(0,4),gateway:r.address}}to6to4(){if(!this.is4())return null;let t=["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":");return new e(t)}toByteArray(){let t=this.bigInt().toString(16),n=`${"0".repeat(t.length%2)}${t}`,a=[];for(let u=0,i=n.length;u<i;u+=2)a.push(parseInt(n.substring(u,u+2),16));return a}toUnsignedByteArray(){return this.toByteArray().map(F1)}static fromByteArray(t){return this.fromUnsignedByteArray(t.map(F1))}static fromUnsignedByteArray(t){let r=BigInt("256"),n=BigInt("0"),a=BigInt("1");for(let u=t.length-1;u>=0;u--)n+=a*BigInt(t[u].toString(10)),a*=r;return e.fromBigInt(n)}isCanonical(){return this.addressMinusSuffix===this.canonicalForm()}isLinkLocal(){return this.getBitsBase2(0,64)==="1111111010000000000000000000000000000000000000000000000000000000"}isMulticast(){return this.getType()==="Multicast"}is4(){return this.v4}isTeredo(){return this.isInSubnet(new e("2001::/32"))}is6to4(){return this.isInSubnet(new e("2002::/16"))}isLoopback(){return this.getType()==="Loopback"}href(t){return t===void 0?t="":t=`:${t}`,`http://[${this.correctForm()}]${t}/`}link(t){t||(t={}),t.className===void 0&&(t.className=""),t.prefix===void 0&&(t.prefix="/#address="),t.v4===void 0&&(t.v4=!1);let r=this.correctForm;t.v4&&(r=this.to4in6);let n=r.call(this);return t.className?`<a href="${t.prefix}${n}" class="${t.className}">${n}</a>`:`<a href="${t.prefix}${n}">${n}</a>`}group(){if(this.elidedGroups===0)return ep.simpleGroup(this.address).join(":");Mc(typeof this.elidedGroups=="number"),Mc(typeof this.elisionBegin=="number");let t=[],[r,n]=this.address.split("::");r.length?t.push(...ep.simpleGroup(r)):t.push("");let a=["hover-group"];for(let u=this.elisionBegin;u<this.elisionBegin+this.elidedGroups;u++)a.push(`group-${u}`);return t.push(`<span class="${a.join(" ")}"></span>`),n.length?t.push(...ep.simpleGroup(n,this.elisionEnd)):t.push(""),this.is4()&&(Mc(this.address4 instanceof Xs.Address4),t.pop(),t.push(this.address4.groupForV6())),t.join(":")}regularExpressionString(t=!1){let r=[],n=new e(this.correctForm());if(n.elidedGroups===0)r.push((0,Zs.simpleRegularExpression)(n.parsedAddress));else if(n.elidedGroups===wr.GROUPS)r.push((0,Zs.possibleElisions)(wr.GROUPS));else{let a=n.address.split("::");a[0].length&&r.push((0,Zs.simpleRegularExpression)(a[0].split(":"))),Mc(typeof n.elidedGroups=="number"),r.push((0,Zs.possibleElisions)(n.elidedGroups,a[0].length!==0,a[1].length!==0)),a[1].length&&r.push((0,Zs.simpleRegularExpression)(a[1].split(":"))),r=[r.join(":")]}return t||(r=["(?=^|",Zs.ADDRESS_BOUNDARY,"|[^\\w\\:])(",...r,")(?=[^\\w\\:]|",Zs.ADDRESS_BOUNDARY,"|$)"]),r.join("")}regularExpression(t=!1){return new RegExp(this.regularExpressionString(t),"i")}};Ti.Address6=tp});var I1=Et(ln=>{"use strict";var lD=ln&&ln.__createBinding||(Object.create?(function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}):(function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]})),fD=ln&&ln.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t}),hD=ln&&ln.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&lD(t,e,r);return fD(t,e),t};Object.defineProperty(ln,"__esModule",{value:!0});ln.v6=ln.AddressError=ln.Address6=ln.Address4=void 0;var pD=Jh();Object.defineProperty(ln,"Address4",{enumerable:!0,get:function(){return pD.Address4}});var dD=C1();Object.defineProperty(ln,"Address6",{enumerable:!0,get:function(){return dD.Address6}});var gD=Lc();Object.defineProperty(ln,"AddressError",{enumerable:!0,get:function(){return gD.AddressError}});var vD=hD(Zh());ln.v6={helpers:vD}});var ea=Et((U3,Qs)=>{"use strict";function R1(e){return typeof e>"u"||e===null}function ED(e){return typeof e=="object"&&e!==null}function AD(e){return Array.isArray(e)?e:R1(e)?[]:[e]}function yD(e,t){var r,n,a,u;if(t)for(u=Object.keys(t),r=0,n=u.length;r<n;r+=1)a=u[r],e[a]=t[a];return e}function SD(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}function _D(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}Qs.exports.isNothing=R1;Qs.exports.isObject=ED;Qs.exports.toArray=AD;Qs.exports.repeat=SD;Qs.exports.isNegativeZero=_D;Qs.exports.extend=yD});var Za=Et((M3,k1)=>{"use strict";function Ju(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Ju.prototype=Object.create(Error.prototype);Ju.prototype.constructor=Ju;Ju.prototype.toString=function(t){var r=this.name+": ";return r+=this.reason||"(unknown reason)",!t&&this.mark&&(r+=" "+this.mark.toString()),r};k1.exports=Ju});var O1=Et((q3,T1)=>{"use strict";var x1=ea();function rp(e,t,r,n,a){this.name=e,this.buffer=t,this.position=r,this.line=n,this.column=a}rp.prototype.getSnippet=function(t,r){var n,a,u,i,c;if(!this.buffer)return null;for(t=t||4,r=r||75,n="",a=this.position;a>0&&`\0\r
\x85\u2028\u2029`.indexOf(this.buffer.charAt(a-1))===-1;)if(a-=1,this.position-a>r/2-1){n=" ... ",a+=5;break}for(u="",i=this.position;i<this.buffer.length&&`\0\r
\x85\u2028\u2029`.indexOf(this.buffer.charAt(i))===-1;)if(i+=1,i-this.position>r/2-1){u=" ... ",i-=5;break}return c=this.buffer.slice(a,i),x1.repeat(" ",t)+n+c+u+`
`+x1.repeat(" ",t+this.position-a+n.length)+"^"};rp.prototype.toString=function(t){var r,n="";return this.name&&(n+='in "'+this.name+'" '),n+="at line "+(this.line+1)+", column "+(this.column+1),t||(r=this.getSnippet(),r&&(n+=`:
`+r)),n};T1.exports=rp});var Wr=Et((V3,L1)=>{"use strict";var N1=Za(),DD=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],FD=["scalar","sequence","mapping"];function CD(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}function ID(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(DD.indexOf(r)===-1)throw new N1('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.defaultStyle=t.defaultStyle||null,this.styleAliases=CD(t.styleAliases||null),FD.indexOf(this.kind)===-1)throw new N1('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}L1.exports=ID});var ta=Et((K3,j1)=>{"use strict";var H1=ea(),Kc=Za(),PD=Wr();function np(e,t,r){var n=[];return e.include.forEach(function(a){r=np(a,t,r)}),e[t].forEach(function(a){r.forEach(function(u,i){u.tag===a.tag&&u.kind===a.kind&&n.push(i)}),r.push(a)}),r.filter(function(a,u){return n.indexOf(u)===-1})}function BD(){var e={scalar:{},sequence:{},mapping:{},fallback:{}},t,r;function n(a){e[a.kind][a.tag]=e.fallback[a.tag]=a}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}function Qa(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach(function(t){if(t.loadKind&&t.loadKind!=="scalar")throw new Kc("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=np(this,"implicit",[]),this.compiledExplicit=np(this,"explicit",[]),this.compiledTypeMap=BD(this.compiledImplicit,this.compiledExplicit)}Qa.DEFAULT=null;Qa.create=function(){var t,r;switch(arguments.length){case 1:t=Qa.DEFAULT,r=arguments[0];break;case 2:t=arguments[0],r=arguments[1];break;default:throw new Kc("Wrong number of arguments for Schema.create function")}if(t=H1.toArray(t),r=H1.toArray(r),!t.every(function(n){return n instanceof Qa}))throw new Kc("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!r.every(function(n){return n instanceof PD}))throw new Kc("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new Qa({include:t,explicit:r})};j1.exports=Qa});var M1=Et((z3,U1)=>{"use strict";var $D=Wr();U1.exports=new $D("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}})});var V1=Et((G3,q1)=>{"use strict";var RD=Wr();q1.exports=new RD("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}})});var z1=Et((W3,K1)=>{"use strict";var kD=Wr();K1.exports=new kD("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}})});var zc=Et((Y3,G1)=>{"use strict";var xD=ta();G1.exports=new xD({explicit:[M1(),V1(),z1()]})});var Y1=Et((J3,W1)=>{"use strict";var TD=Wr();function OD(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function ND(){return null}function LD(e){return e===null}W1.exports=new TD("tag:yaml.org,2002:null",{kind:"scalar",resolve:OD,construct:ND,predicate:LD,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})});var X1=Et((X3,J1)=>{"use strict";var HD=Wr();function jD(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function UD(e){return e==="true"||e==="True"||e==="TRUE"}function MD(e){return Object.prototype.toString.call(e)==="[object Boolean]"}J1.exports=new HD("tag:yaml.org,2002:bool",{kind:"scalar",resolve:jD,construct:UD,predicate:MD,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"})});var Q1=Et((Z3,Z1)=>{"use strict";var qD=ea(),VD=Wr();function KD(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function zD(e){return 48<=e&&e<=55}function GD(e){return 48<=e&&e<=57}function WD(e){if(e===null)return!1;var t=e.length,r=0,n=!1,a;if(!t)return!1;if(a=e[r],(a==="-"||a==="+")&&(a=e[++r]),a==="0"){if(r+1===t)return!0;if(a=e[++r],a==="b"){for(r++;r<t;r++)if(a=e[r],a!=="_"){if(a!=="0"&&a!=="1")return!1;n=!0}return n&&a!=="_"}if(a==="x"){for(r++;r<t;r++)if(a=e[r],a!=="_"){if(!KD(e.charCodeAt(r)))return!1;n=!0}return n&&a!=="_"}for(;r<t;r++)if(a=e[r],a!=="_"){if(!zD(e.charCodeAt(r)))return!1;n=!0}return n&&a!=="_"}if(a==="_")return!1;for(;r<t;r++)if(a=e[r],a!=="_"){if(a===":")break;if(!GD(e.charCodeAt(r)))return!1;n=!0}return!n||a==="_"?!1:a!==":"?!0:/^(:[0-5]?[0-9])+$/.test(e.slice(r))}function YD(e){var t=e,r=1,n,a,u=[];return t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0"?0:n==="0"?t[1]==="b"?r*parseInt(t.slice(2),2):t[1]==="x"?r*parseInt(t,16):r*parseInt(t,8):t.indexOf(":")!==-1?(t.split(":").forEach(function(i){u.unshift(parseInt(i,10))}),t=0,a=1,u.forEach(function(i){t+=i*a,a*=60}),r*t):r*parseInt(t,10)}function JD(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!qD.isNegativeZero(e)}Z1.exports=new VD("tag:yaml.org,2002:int",{kind:"scalar",resolve:WD,construct:YD,predicate:JD,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0"+e.toString(8):"-0"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})});var rg=Et((Q3,tg)=>{"use strict";var eg=ea(),XD=Wr(),ZD=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function QD(e){return!(e===null||!ZD.test(e)||e[e.length-1]==="_")}function eF(e){var t,r,n,a;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,a=[],"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:t.indexOf(":")>=0?(t.split(":").forEach(function(u){a.unshift(parseFloat(u,10))}),t=0,n=1,a.forEach(function(u){t+=u*n,n*=60}),r*t):r*parseFloat(t,10)}var tF=/^[-+]?[0-9]+e/;function rF(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(eg.isNegativeZero(e))return"-0.0";return r=e.toString(10),tF.test(r)?r.replace("e",".e"):r}function nF(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||eg.isNegativeZero(e))}tg.exports=new XD("tag:yaml.org,2002:float",{kind:"scalar",resolve:QD,construct:eF,predicate:nF,represent:rF,defaultStyle:"lowercase"})});var ip=Et((e8,ng)=>{"use strict";var iF=ta();ng.exports=new iF({include:[zc()],implicit:[Y1(),X1(),Q1(),rg()]})});var sp=Et((t8,ig)=>{"use strict";var sF=ta();ig.exports=new sF({include:[ip()]})});var og=Et((r8,ug)=>{"use strict";var aF=Wr(),sg=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),ag=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function uF(e){return e===null?!1:sg.exec(e)!==null||ag.exec(e)!==null}function oF(e){var t,r,n,a,u,i,c,l=0,m=null,E,b,v;if(t=sg.exec(e),t===null&&(t=ag.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,a=+t[3],!t[4])return new Date(Date.UTC(r,n,a));if(u=+t[4],i=+t[5],c=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(E=+t[10],b=+(t[11]||0),m=(E*60+b)*6e4,t[9]==="-"&&(m=-m)),v=new Date(Date.UTC(r,n,a,u,i,c,l)),m&&v.setTime(v.getTime()-m),v}function cF(e){return e.toISOString()}ug.exports=new aF("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:uF,construct:oF,instanceOf:Date,represent:cF})});var lg=Et((n8,cg)=>{"use strict";var lF=Wr();function fF(e){return e==="<<"||e===null}cg.exports=new lF("tag:yaml.org,2002:merge",{kind:"scalar",resolve:fF})});var pg=Et((i8,hg)=>{"use strict";var ra;try{fg=mc,ra=fg("buffer").Buffer}catch{}var fg,hF=Wr(),ap=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function pF(e){if(e===null)return!1;var t,r,n=0,a=e.length,u=ap;for(r=0;r<a;r++)if(t=u.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}function dF(e){var t,r,n=e.replace(/[\r\n=]/g,""),a=n.length,u=ap,i=0,c=[];for(t=0;t<a;t++)t%4===0&&t&&(c.push(i>>16&255),c.push(i>>8&255),c.push(i&255)),i=i<<6|u.indexOf(n.charAt(t));return r=a%4*6,r===0?(c.push(i>>16&255),c.push(i>>8&255),c.push(i&255)):r===18?(c.push(i>>10&255),c.push(i>>2&255)):r===12&&c.push(i>>4&255),ra?ra.from?ra.from(c):new ra(c):c}function gF(e){var t="",r=0,n,a,u=e.length,i=ap;for(n=0;n<u;n++)n%3===0&&n&&(t+=i[r>>18&63],t+=i[r>>12&63],t+=i[r>>6&63],t+=i[r&63]),r=(r<<8)+e[n];return a=u%3,a===0?(t+=i[r>>18&63],t+=i[r>>12&63],t+=i[r>>6&63],t+=i[r&63]):a===2?(t+=i[r>>10&63],t+=i[r>>4&63],t+=i[r<<2&63],t+=i[64]):a===1&&(t+=i[r>>2&63],t+=i[r<<4&63],t+=i[64],t+=i[64]),t}function vF(e){return ra&&ra.isBuffer(e)}hg.exports=new hF("tag:yaml.org,2002:binary",{kind:"scalar",resolve:pF,construct:dF,predicate:vF,represent:gF})});var gg=Et((a8,dg)=>{"use strict";var mF=Wr(),wF=Object.prototype.hasOwnProperty,bF=Object.prototype.toString;function EF(e){if(e===null)return!0;var t=[],r,n,a,u,i,c=e;for(r=0,n=c.length;r<n;r+=1){if(a=c[r],i=!1,bF.call(a)!=="[object Object]")return!1;for(u in a)if(wF.call(a,u))if(!i)i=!0;else return!1;if(!i)return!1;if(t.indexOf(u)===-1)t.push(u);else return!1}return!0}function AF(e){return e!==null?e:[]}dg.exports=new mF("tag:yaml.org,2002:omap",{kind:"sequence",resolve:EF,construct:AF})});var mg=Et((u8,vg)=>{"use strict";var yF=Wr(),SF=Object.prototype.toString;function _F(e){if(e===null)return!0;var t,r,n,a,u,i=e;for(u=new Array(i.length),t=0,r=i.length;t<r;t+=1){if(n=i[t],SF.call(n)!=="[object Object]"||(a=Object.keys(n),a.length!==1))return!1;u[t]=[a[0],n[a[0]]]}return!0}function DF(e){if(e===null)return[];var t,r,n,a,u,i=e;for(u=new Array(i.length),t=0,r=i.length;t<r;t+=1)n=i[t],a=Object.keys(n),u[t]=[a[0],n[a[0]]];return u}vg.exports=new yF("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:_F,construct:DF})});var bg=Et((o8,wg)=>{"use strict";var FF=Wr(),CF=Object.prototype.hasOwnProperty;function IF(e){if(e===null)return!0;var t,r=e;for(t in r)if(CF.call(r,t)&&r[t]!==null)return!1;return!0}function PF(e){return e!==null?e:{}}wg.exports=new FF("tag:yaml.org,2002:set",{kind:"mapping",resolve:IF,construct:PF})});var eu=Et((c8,Eg)=>{"use strict";var BF=ta();Eg.exports=new BF({include:[sp()],implicit:[og(),lg()],explicit:[pg(),gg(),mg(),bg()]})});var yg=Et((l8,Ag)=>{"use strict";var $F=Wr();function RF(){return!0}function kF(){}function xF(){return""}function TF(e){return typeof e>"u"}Ag.exports=new $F("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:RF,construct:kF,predicate:TF,represent:xF})});var _g=Et((f8,Sg)=>{"use strict";var OF=Wr();function NF(e){if(e===null||e.length===0)return!1;var t=e,r=/\/([gim]*)$/.exec(e),n="";return!(t[0]==="/"&&(r&&(n=r[1]),n.length>3||t[t.length-n.length-1]!=="/"))}function LF(e){var t=e,r=/\/([gim]*)$/.exec(e),n="";return t[0]==="/"&&(r&&(n=r[1]),t=t.slice(1,t.length-n.length-1)),new RegExp(t,n)}function HF(e){var t="/"+e.source+"/";return e.global&&(t+="g"),e.multiline&&(t+="m"),e.ignoreCase&&(t+="i"),t}function jF(e){return Object.prototype.toString.call(e)==="[object RegExp]"}Sg.exports=new OF("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:NF,construct:LF,predicate:jF,represent:HF})});var Cg=Et((h8,Fg)=>{"use strict";var Gc;try{Dg=mc,Gc=Dg("esprima")}catch{typeof window<"u"&&(Gc=window.esprima)}var Dg,UF=Wr();function MF(e){if(e===null)return!1;try{var t="("+e+")",r=Gc.parse(t,{range:!0});return!(r.type!=="Program"||r.body.length!==1||r.body[0].type!=="ExpressionStatement"||r.body[0].expression.type!=="ArrowFunctionExpression"&&r.body[0].expression.type!=="FunctionExpression")}catch{return!1}}function qF(e){var t="("+e+")",r=Gc.parse(t,{range:!0}),n=[],a;if(r.type!=="Program"||r.body.length!==1||r.body[0].type!=="ExpressionStatement"||r.body[0].expression.type!=="ArrowFunctionExpression"&&r.body[0].expression.type!=="FunctionExpression")throw new Error("Failed to resolve function");return r.body[0].expression.params.forEach(function(u){n.push(u.name)}),a=r.body[0].expression.body.range,r.body[0].expression.body.type==="BlockStatement"?new Function(n,t.slice(a[0]+1,a[1]-1)):new Function(n,"return "+t.slice(a[0],a[1]))}function VF(e){return e.toString()}function KF(e){return Object.prototype.toString.call(e)==="[object Function]"}Fg.exports=new UF("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:MF,construct:qF,predicate:KF,represent:VF})});var Xu=Et((d8,Pg)=>{"use strict";var Ig=ta();Pg.exports=Ig.DEFAULT=new Ig({include:[eu()],explicit:[yg(),_g(),Cg()]})});var Wg=Et((g8,Zu)=>{"use strict";var ss=ea(),Og=Za(),zF=O1(),Ng=eu(),GF=Xu(),ks=Object.prototype.hasOwnProperty,Wc=1,Lg=2,Hg=3,Yc=4,up=1,WF=2,Bg=3,YF=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,JF=/[\x85\u2028\u2029]/,XF=/[,\[\]\{\}]/,jg=/^(?:!|!!|![a-z\-]+!)$/i,Ug=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function $g(e){return Object.prototype.toString.call(e)}function Ni(e){return e===10||e===13}function ia(e){return e===9||e===32}function xn(e){return e===9||e===32||e===10||e===13}function tu(e){return e===44||e===91||e===93||e===123||e===125}function ZF(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function QF(e){return e===120?2:e===117?4:e===85?8:0}function e5(e){return 48<=e&&e<=57?e-48:-1}function Rg(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function t5(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var Mg=new Array(256),qg=new Array(256);for(na=0;na<256;na++)Mg[na]=Rg(na)?1:0,qg[na]=Rg(na);var na;function r5(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||GF,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function Vg(e,t){return new Og(t,new zF(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function gt(e,t){throw Vg(e,t)}function Jc(e,t){e.onWarning&&e.onWarning.call(null,Vg(e,t))}var kg={YAML:function(t,r,n){var a,u,i;t.version!==null&&gt(t,"duplication of %YAML directive"),n.length!==1&&gt(t,"YAML directive accepts exactly one argument"),a=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),a===null&&gt(t,"ill-formed argument of the YAML directive"),u=parseInt(a[1],10),i=parseInt(a[2],10),u!==1&&gt(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=i<2,i!==1&&i!==2&&Jc(t,"unsupported YAML version of the document")},TAG:function(t,r,n){var a,u;n.length!==2&&gt(t,"TAG directive accepts exactly two arguments"),a=n[0],u=n[1],jg.test(a)||gt(t,"ill-formed tag handle (first argument) of the TAG directive"),ks.call(t.tagMap,a)&&gt(t,'there is a previously declared suffix for "'+a+'" tag handle'),Ug.test(u)||gt(t,"ill-formed tag prefix (second argument) of the TAG directive"),t.tagMap[a]=u}};function Rs(e,t,r,n){var a,u,i,c;if(t<r){if(c=e.input.slice(t,r),n)for(a=0,u=c.length;a<u;a+=1)i=c.charCodeAt(a),i===9||32<=i&&i<=1114111||gt(e,"expected valid JSON character");else YF.test(c)&&gt(e,"the stream contains non-printable characters");e.result+=c}}function xg(e,t,r,n){var a,u,i,c;for(ss.isObject(r)||gt(e,"cannot merge mappings; the provided source object is unacceptable"),a=Object.keys(r),i=0,c=a.length;i<c;i+=1)u=a[i],ks.call(t,u)||(t[u]=r[u],n[u]=!0)}function ru(e,t,r,n,a,u,i,c){var l,m;if(Array.isArray(a))for(a=Array.prototype.slice.call(a),l=0,m=a.length;l<m;l+=1)Array.isArray(a[l])&&gt(e,"nested arrays are not supported inside keys"),typeof a=="object"&&$g(a[l])==="[object Object]"&&(a[l]="[object Object]");if(typeof a=="object"&&$g(a)==="[object Object]"&&(a="[object Object]"),a=String(a),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(u))for(l=0,m=u.length;l<m;l+=1)xg(e,t,u[l],r);else xg(e,t,u,r);else!e.json&&!ks.call(r,a)&&ks.call(t,a)&&(e.line=i||e.line,e.position=c||e.position,gt(e,"duplicated mapping key")),t[a]=u,delete r[a];return t}function op(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):gt(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function Ur(e,t,r){for(var n=0,a=e.input.charCodeAt(e.position);a!==0;){for(;ia(a);)a=e.input.charCodeAt(++e.position);if(t&&a===35)do a=e.input.charCodeAt(++e.position);while(a!==10&&a!==13&&a!==0);if(Ni(a))for(op(e),a=e.input.charCodeAt(e.position),n++,e.lineIndent=0;a===32;)e.lineIndent++,a=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&Jc(e,"deficient indentation"),n}function Xc(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||xn(r)))}function cp(e,t){t===1?e.result+=" ":t>1&&(e.result+=ss.repeat(`
`,t-1))}function n5(e,t,r){var n,a,u,i,c,l,m,E,b=e.kind,v=e.result,g;if(g=e.input.charCodeAt(e.position),xn(g)||tu(g)||g===35||g===38||g===42||g===33||g===124||g===62||g===39||g===34||g===37||g===64||g===96||(g===63||g===45)&&(a=e.input.charCodeAt(e.position+1),xn(a)||r&&tu(a)))return!1;for(e.kind="scalar",e.result="",u=i=e.position,c=!1;g!==0;){if(g===58){if(a=e.input.charCodeAt(e.position+1),xn(a)||r&&tu(a))break}else if(g===35){if(n=e.input.charCodeAt(e.position-1),xn(n))break}else{if(e.position===e.lineStart&&Xc(e)||r&&tu(g))break;if(Ni(g))if(l=e.line,m=e.lineStart,E=e.lineIndent,Ur(e,!1,-1),e.lineIndent>=t){c=!0,g=e.input.charCodeAt(e.position);continue}else{e.position=i,e.line=l,e.lineStart=m,e.lineIndent=E;break}}c&&(Rs(e,u,i,!1),cp(e,e.line-l),u=i=e.position,c=!1),ia(g)||(i=e.position+1),g=e.input.charCodeAt(++e.position)}return Rs(e,u,i,!1),e.result?!0:(e.kind=b,e.result=v,!1)}function i5(e,t){var r,n,a;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=a=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(Rs(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,a=e.position;else return!0;else Ni(r)?(Rs(e,n,a,!0),cp(e,Ur(e,!1,t)),n=a=e.position):e.position===e.lineStart&&Xc(e)?gt(e,"unexpected end of the document within a single quoted scalar"):(e.position++,a=e.position);gt(e,"unexpected end of the stream within a single quoted scalar")}function s5(e,t){var r,n,a,u,i,c;if(c=e.input.charCodeAt(e.position),c!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(c=e.input.charCodeAt(e.position))!==0;){if(c===34)return Rs(e,r,e.position,!0),e.position++,!0;if(c===92){if(Rs(e,r,e.position,!0),c=e.input.charCodeAt(++e.position),Ni(c))Ur(e,!1,t);else if(c<256&&Mg[c])e.result+=qg[c],e.position++;else if((i=QF(c))>0){for(a=i,u=0;a>0;a--)c=e.input.charCodeAt(++e.position),(i=ZF(c))>=0?u=(u<<4)+i:gt(e,"expected hexadecimal character");e.result+=t5(u),e.position++}else gt(e,"unknown escape sequence");r=n=e.position}else Ni(c)?(Rs(e,r,n,!0),cp(e,Ur(e,!1,t)),r=n=e.position):e.position===e.lineStart&&Xc(e)?gt(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}gt(e,"unexpected end of the stream within a double quoted scalar")}function a5(e,t){var r=!0,n,a=e.tag,u,i=e.anchor,c,l,m,E,b,v={},g,A,w,S;if(S=e.input.charCodeAt(e.position),S===91)l=93,b=!1,u=[];else if(S===123)l=125,b=!0,u={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=u),S=e.input.charCodeAt(++e.position);S!==0;){if(Ur(e,!0,t),S=e.input.charCodeAt(e.position),S===l)return e.position++,e.tag=a,e.anchor=i,e.kind=b?"mapping":"sequence",e.result=u,!0;r||gt(e,"missed comma between flow collection entries"),A=g=w=null,m=E=!1,S===63&&(c=e.input.charCodeAt(e.position+1),xn(c)&&(m=E=!0,e.position++,Ur(e,!0,t))),n=e.line,nu(e,t,Wc,!1,!0),A=e.tag,g=e.result,Ur(e,!0,t),S=e.input.charCodeAt(e.position),(E||e.line===n)&&S===58&&(m=!0,S=e.input.charCodeAt(++e.position),Ur(e,!0,t),nu(e,t,Wc,!1,!0),w=e.result),b?ru(e,u,v,A,g,w):m?u.push(ru(e,null,v,A,g,w)):u.push(g),Ur(e,!0,t),S=e.input.charCodeAt(e.position),S===44?(r=!0,S=e.input.charCodeAt(++e.position)):r=!1}gt(e,"unexpected end of the stream within a flow collection")}function u5(e,t){var r,n,a=up,u=!1,i=!1,c=t,l=0,m=!1,E,b;if(b=e.input.charCodeAt(e.position),b===124)n=!1;else if(b===62)n=!0;else return!1;for(e.kind="scalar",e.result="";b!==0;)if(b=e.input.charCodeAt(++e.position),b===43||b===45)up===a?a=b===43?Bg:WF:gt(e,"repeat of a chomping mode identifier");else if((E=e5(b))>=0)E===0?gt(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):i?gt(e,"repeat of an indentation width identifier"):(c=t+E-1,i=!0);else break;if(ia(b)){do b=e.input.charCodeAt(++e.position);while(ia(b));if(b===35)do b=e.input.charCodeAt(++e.position);while(!Ni(b)&&b!==0)}for(;b!==0;){for(op(e),e.lineIndent=0,b=e.input.charCodeAt(e.position);(!i||e.lineIndent<c)&&b===32;)e.lineIndent++,b=e.input.charCodeAt(++e.position);if(!i&&e.lineIndent>c&&(c=e.lineIndent),Ni(b)){l++;continue}if(e.lineIndent<c){a===Bg?e.result+=ss.repeat(`
`,u?1+l:l):a===up&&u&&(e.result+=`
`);break}for(n?ia(b)?(m=!0,e.result+=ss.repeat(`
`,u?1+l:l)):m?(m=!1,e.result+=ss.repeat(`
`,l+1)):l===0?u&&(e.result+=" "):e.result+=ss.repeat(`
`,l):e.result+=ss.repeat(`
`,u?1+l:l),u=!0,i=!0,l=0,r=e.position;!Ni(b)&&b!==0;)b=e.input.charCodeAt(++e.position);Rs(e,r,e.position,!1)}return!0}function Tg(e,t){var r,n=e.tag,a=e.anchor,u=[],i,c=!1,l;for(e.anchor!==null&&(e.anchorMap[e.anchor]=u),l=e.input.charCodeAt(e.position);l!==0&&!(l!==45||(i=e.input.charCodeAt(e.position+1),!xn(i)));){if(c=!0,e.position++,Ur(e,!0,-1)&&e.lineIndent<=t){u.push(null),l=e.input.charCodeAt(e.position);continue}if(r=e.line,nu(e,t,Hg,!1,!0),u.push(e.result),Ur(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&l!==0)gt(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return c?(e.tag=n,e.anchor=a,e.kind="sequence",e.result=u,!0):!1}function o5(e,t,r){var n,a,u,i,c=e.tag,l=e.anchor,m={},E={},b=null,v=null,g=null,A=!1,w=!1,S;for(e.anchor!==null&&(e.anchorMap[e.anchor]=m),S=e.input.charCodeAt(e.position);S!==0;){if(n=e.input.charCodeAt(e.position+1),u=e.line,i=e.position,(S===63||S===58)&&xn(n))S===63?(A&&(ru(e,m,E,b,v,null),b=v=g=null),w=!0,A=!0,a=!0):A?(A=!1,a=!0):gt(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,S=n;else if(nu(e,r,Lg,!1,!0))if(e.line===u){for(S=e.input.charCodeAt(e.position);ia(S);)S=e.input.charCodeAt(++e.position);if(S===58)S=e.input.charCodeAt(++e.position),xn(S)||gt(e,"a whitespace character is expected after the key-value separator within a block mapping"),A&&(ru(e,m,E,b,v,null),b=v=g=null),w=!0,A=!1,a=!1,b=e.tag,v=e.result;else if(w)gt(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=c,e.anchor=l,!0}else if(w)gt(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=c,e.anchor=l,!0;else break;if((e.line===u||e.lineIndent>t)&&(nu(e,t,Yc,!0,a)&&(A?v=e.result:g=e.result),A||(ru(e,m,E,b,v,g,u,i),b=v=g=null),Ur(e,!0,-1),S=e.input.charCodeAt(e.position)),e.lineIndent>t&&S!==0)gt(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return A&&ru(e,m,E,b,v,null),w&&(e.tag=c,e.anchor=l,e.kind="mapping",e.result=m),w}function c5(e){var t,r=!1,n=!1,a,u,i;if(i=e.input.charCodeAt(e.position),i!==33)return!1;if(e.tag!==null&&gt(e,"duplication of a tag property"),i=e.input.charCodeAt(++e.position),i===60?(r=!0,i=e.input.charCodeAt(++e.position)):i===33?(n=!0,a="!!",i=e.input.charCodeAt(++e.position)):a="!",t=e.position,r){do i=e.input.charCodeAt(++e.position);while(i!==0&&i!==62);e.position<e.length?(u=e.input.slice(t,e.position),i=e.input.charCodeAt(++e.position)):gt(e,"unexpected end of the stream within a verbatim tag")}else{for(;i!==0&&!xn(i);)i===33&&(n?gt(e,"tag suffix cannot contain exclamation marks"):(a=e.input.slice(t-1,e.position+1),jg.test(a)||gt(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),i=e.input.charCodeAt(++e.position);u=e.input.slice(t,e.position),XF.test(u)&&gt(e,"tag suffix cannot contain flow indicator characters")}return u&&!Ug.test(u)&&gt(e,"tag name cannot contain such characters: "+u),r?e.tag=u:ks.call(e.tagMap,a)?e.tag=e.tagMap[a]+u:a==="!"?e.tag="!"+u:a==="!!"?e.tag="tag:yaml.org,2002:"+u:gt(e,'undeclared tag handle "'+a+'"'),!0}function l5(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&gt(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!xn(r)&&!tu(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&gt(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function f5(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!xn(n)&&!tu(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&gt(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),ks.call(e.anchorMap,r)||gt(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],Ur(e,!0,-1),!0}function nu(e,t,r,n,a){var u,i,c,l=1,m=!1,E=!1,b,v,g,A,w;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,u=i=c=Yc===r||Hg===r,n&&Ur(e,!0,-1)&&(m=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;c5(e)||l5(e);)Ur(e,!0,-1)?(m=!0,c=u,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):c=!1;if(c&&(c=m||a),(l===1||Yc===r)&&(Wc===r||Lg===r?A=t:A=t+1,w=e.position-e.lineStart,l===1?c&&(Tg(e,w)||o5(e,w,A))||a5(e,A)?E=!0:(i&&u5(e,A)||i5(e,A)||s5(e,A)?E=!0:f5(e)?(E=!0,(e.tag!==null||e.anchor!==null)&&gt(e,"alias node should not have any properties")):n5(e,A,Wc===r)&&(E=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(E=c&&Tg(e,w))),e.tag!==null&&e.tag!=="!")if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&gt(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),b=0,v=e.implicitTypes.length;b<v;b+=1)if(g=e.implicitTypes[b],g.resolve(e.result)){e.result=g.construct(e.result),e.tag=g.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else ks.call(e.typeMap[e.kind||"fallback"],e.tag)?(g=e.typeMap[e.kind||"fallback"][e.tag],e.result!==null&&g.kind!==e.kind&&gt(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+g.kind+'", not "'+e.kind+'"'),g.resolve(e.result)?(e.result=g.construct(e.result),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):gt(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):gt(e,"unknown tag !<"+e.tag+">");return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||E}function h5(e){var t=e.position,r,n,a,u=!1,i;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};(i=e.input.charCodeAt(e.position))!==0&&(Ur(e,!0,-1),i=e.input.charCodeAt(e.position),!(e.lineIndent>0||i!==37));){for(u=!0,i=e.input.charCodeAt(++e.position),r=e.position;i!==0&&!xn(i);)i=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),a=[],n.length<1&&gt(e,"directive name must not be less than one character in length");i!==0;){for(;ia(i);)i=e.input.charCodeAt(++e.position);if(i===35){do i=e.input.charCodeAt(++e.position);while(i!==0&&!Ni(i));break}if(Ni(i))break;for(r=e.position;i!==0&&!xn(i);)i=e.input.charCodeAt(++e.position);a.push(e.input.slice(r,e.position))}i!==0&&op(e),ks.call(kg,n)?kg[n](e,n,a):Jc(e,'unknown document directive "'+n+'"')}if(Ur(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Ur(e,!0,-1)):u&&gt(e,"directives end mark is expected"),nu(e,e.lineIndent-1,Yc,!1,!0),Ur(e,!0,-1),e.checkLineBreaks&&JF.test(e.input.slice(t,e.position))&&Jc(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Xc(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Ur(e,!0,-1));return}if(e.position<e.length-1)gt(e,"end of the stream or a document separator is expected");else return}function Kg(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new r5(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,gt(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)h5(r);return r.documents}function zg(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=Kg(e,r);if(typeof t!="function")return n;for(var a=0,u=n.length;a<u;a+=1)t(n[a])}function Gg(e,t){var r=Kg(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new Og("expected a single document in the stream, but found more")}}function p5(e,t,r){return typeof t=="object"&&t!==null&&typeof r>"u"&&(r=t,t=null),zg(e,t,ss.extend({schema:Ng},r))}function d5(e,t){return Gg(e,ss.extend({schema:Ng},t))}Zu.exports.loadAll=zg;Zu.exports.load=Gg;Zu.exports.safeLoadAll=p5;Zu.exports.safeLoad=d5});var mv=Et((v8,pp)=>{"use strict";var eo=ea(),to=Za(),g5=Xu(),v5=eu(),rv=Object.prototype.toString,nv=Object.prototype.hasOwnProperty,m5=9,Qu=10,w5=13,b5=32,E5=33,A5=34,iv=35,y5=37,S5=38,_5=39,D5=42,sv=44,F5=45,av=58,C5=61,I5=62,P5=63,B5=64,uv=91,ov=93,$5=96,cv=123,R5=124,lv=125,fn={};fn[0]="\\0";fn[7]="\\a";fn[8]="\\b";fn[9]="\\t";fn[10]="\\n";fn[11]="\\v";fn[12]="\\f";fn[13]="\\r";fn[27]="\\e";fn[34]='\\"';fn[92]="\\\\";fn[133]="\\N";fn[160]="\\_";fn[8232]="\\L";fn[8233]="\\P";var k5=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function x5(e,t){var r,n,a,u,i,c,l;if(t===null)return{};for(r={},n=Object.keys(t),a=0,u=n.length;a<u;a+=1)i=n[a],c=String(t[i]),i.slice(0,2)==="!!"&&(i="tag:yaml.org,2002:"+i.slice(2)),l=e.compiledTypeMap.fallback[i],l&&nv.call(l.styleAliases,c)&&(c=l.styleAliases[c]),r[i]=c;return r}function Yg(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new to("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+eo.repeat("0",n-t.length)+t}function T5(e){this.schema=e.schema||g5,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=eo.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=x5(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Jg(e,t){for(var r=eo.repeat(" ",t),n=0,a=-1,u="",i,c=e.length;n<c;)a=e.indexOf(`
`,n),a===-1?(i=e.slice(n),n=c):(i=e.slice(n,a+1),n=a+1),i.length&&i!==`
`&&(u+=r),u+=i;return u}function lp(e,t){return`
`+eo.repeat(" ",e.indent*t)}function O5(e,t){var r,n,a;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(a=e.implicitTypes[r],a.resolve(t))return!0;return!1}function hp(e){return e===b5||e===m5}function iu(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==65279||65536<=e&&e<=1114111}function N5(e){return iu(e)&&!hp(e)&&e!==65279&&e!==w5&&e!==Qu}function Xg(e,t){return iu(e)&&e!==65279&&e!==sv&&e!==uv&&e!==ov&&e!==cv&&e!==lv&&e!==av&&(e!==iv||t&&N5(t))}function L5(e){return iu(e)&&e!==65279&&!hp(e)&&e!==F5&&e!==P5&&e!==av&&e!==sv&&e!==uv&&e!==ov&&e!==cv&&e!==lv&&e!==iv&&e!==S5&&e!==D5&&e!==E5&&e!==R5&&e!==C5&&e!==I5&&e!==_5&&e!==A5&&e!==y5&&e!==B5&&e!==$5}function fv(e){var t=/^\n* /;return t.test(e)}var hv=1,pv=2,dv=3,gv=4,Zc=5;function H5(e,t,r,n,a){var u,i,c,l=!1,m=!1,E=n!==-1,b=-1,v=L5(e.charCodeAt(0))&&!hp(e.charCodeAt(e.length-1));if(t)for(u=0;u<e.length;u++){if(i=e.charCodeAt(u),!iu(i))return Zc;c=u>0?e.charCodeAt(u-1):null,v=v&&Xg(i,c)}else{for(u=0;u<e.length;u++){if(i=e.charCodeAt(u),i===Qu)l=!0,E&&(m=m||u-b-1>n&&e[b+1]!==" ",b=u);else if(!iu(i))return Zc;c=u>0?e.charCodeAt(u-1):null,v=v&&Xg(i,c)}m=m||E&&u-b-1>n&&e[b+1]!==" "}return!l&&!m?v&&!a(e)?hv:pv:r>9&&fv(e)?Zc:m?gv:dv}function j5(e,t,r,n){e.dump=(function(){if(t.length===0)return"''";if(!e.noCompatMode&&k5.indexOf(t)!==-1)return"'"+t+"'";var a=e.indent*Math.max(1,r),u=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-a),i=n||e.flowLevel>-1&&r>=e.flowLevel;function c(l){return O5(e,l)}switch(H5(t,i,e.indent,u,c)){case hv:return t;case pv:return"'"+t.replace(/'/g,"''")+"'";case dv:return"|"+Zg(t,e.indent)+Qg(Jg(t,a));case gv:return">"+Zg(t,e.indent)+Qg(Jg(U5(t,u),a));case Zc:return'"'+M5(t,u)+'"';default:throw new to("impossible error: invalid scalar style")}})()}function Zg(e,t){var r=fv(e)?String(t):"",n=e[e.length-1]===`
`,a=n&&(e[e.length-2]===`
`||e===`
`),u=a?"+":n?"":"-";return r+u+`
`}function Qg(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function U5(e,t){for(var r=/(\n+)([^\n]*)/g,n=(function(){var m=e.indexOf(`
`);return m=m!==-1?m:e.length,r.lastIndex=m,ev(e.slice(0,m),t)})(),a=e[0]===`
`||e[0]===" ",u,i;i=r.exec(e);){var c=i[1],l=i[2];u=l[0]===" ",n+=c+(!a&&!u&&l!==""?`
`:"")+ev(l,t),a=u}return n}function ev(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,a=0,u,i=0,c=0,l="";n=r.exec(e);)c=n.index,c-a>t&&(u=i>a?i:c,l+=`
`+e.slice(a,u),a=u+1),i=c;return l+=`
`,e.length-a>t&&i>a?l+=e.slice(a,i)+`
`+e.slice(i+1):l+=e.slice(a),l.slice(1)}function M5(e){for(var t="",r,n,a,u=0;u<e.length;u++){if(r=e.charCodeAt(u),r>=55296&&r<=56319&&(n=e.charCodeAt(u+1),n>=56320&&n<=57343)){t+=Yg((r-55296)*1024+n-56320+65536),u++;continue}a=fn[r],t+=!a&&iu(r)?e[u]:a||Yg(r)}return t}function q5(e,t,r){var n="",a=e.tag,u,i;for(u=0,i=r.length;u<i;u+=1)sa(e,t,r[u],!1,!1)&&(u!==0&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=a,e.dump="["+n+"]"}function V5(e,t,r,n){var a="",u=e.tag,i,c;for(i=0,c=r.length;i<c;i+=1)sa(e,t+1,r[i],!0,!0)&&((!n||i!==0)&&(a+=lp(e,t)),e.dump&&Qu===e.dump.charCodeAt(0)?a+="-":a+="- ",a+=e.dump);e.tag=u,e.dump=a||"[]"}function K5(e,t,r){var n="",a=e.tag,u=Object.keys(r),i,c,l,m,E;for(i=0,c=u.length;i<c;i+=1)E="",i!==0&&(E+=", "),e.condenseFlow&&(E+='"'),l=u[i],m=r[l],sa(e,t,l,!1,!1)&&(e.dump.length>1024&&(E+="? "),E+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),sa(e,t,m,!1,!1)&&(E+=e.dump,n+=E));e.tag=a,e.dump="{"+n+"}"}function z5(e,t,r,n){var a="",u=e.tag,i=Object.keys(r),c,l,m,E,b,v;if(e.sortKeys===!0)i.sort();else if(typeof e.sortKeys=="function")i.sort(e.sortKeys);else if(e.sortKeys)throw new to("sortKeys must be a boolean or a function");for(c=0,l=i.length;c<l;c+=1)v="",(!n||c!==0)&&(v+=lp(e,t)),m=i[c],E=r[m],sa(e,t+1,m,!0,!0,!0)&&(b=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,b&&(e.dump&&Qu===e.dump.charCodeAt(0)?v+="?":v+="? "),v+=e.dump,b&&(v+=lp(e,t)),sa(e,t+1,E,!0,b)&&(e.dump&&Qu===e.dump.charCodeAt(0)?v+=":":v+=": ",v+=e.dump,a+=v));e.tag=u,e.dump=a||"{}"}function tv(e,t,r){var n,a,u,i,c,l;for(a=r?e.explicitTypes:e.implicitTypes,u=0,i=a.length;u<i;u+=1)if(c=a[u],(c.instanceOf||c.predicate)&&(!c.instanceOf||typeof t=="object"&&t instanceof c.instanceOf)&&(!c.predicate||c.predicate(t))){if(e.tag=r?c.tag:"?",c.represent){if(l=e.styleMap[c.tag]||c.defaultStyle,rv.call(c.represent)==="[object Function]")n=c.represent(t,l);else if(nv.call(c.represent,l))n=c.represent[l](t,l);else throw new to("!<"+c.tag+'> tag resolver accepts not "'+l+'" style');e.dump=n}return!0}return!1}function sa(e,t,r,n,a,u){e.tag=null,e.dump=r,tv(e,r,!1)||tv(e,r,!0);var i=rv.call(e.dump);n&&(n=e.flowLevel<0||e.flowLevel>t);var c=i==="[object Object]"||i==="[object Array]",l,m;if(c&&(l=e.duplicates.indexOf(r),m=l!==-1),(e.tag!==null&&e.tag!=="?"||m||e.indent!==2&&t>0)&&(a=!1),m&&e.usedDuplicates[l])e.dump="*ref_"+l;else{if(c&&m&&!e.usedDuplicates[l]&&(e.usedDuplicates[l]=!0),i==="[object Object]")n&&Object.keys(e.dump).length!==0?(z5(e,t,e.dump,a),m&&(e.dump="&ref_"+l+e.dump)):(K5(e,t,e.dump),m&&(e.dump="&ref_"+l+" "+e.dump));else if(i==="[object Array]"){var E=e.noArrayIndent&&t>0?t-1:t;n&&e.dump.length!==0?(V5(e,E,e.dump,a),m&&(e.dump="&ref_"+l+e.dump)):(q5(e,E,e.dump),m&&(e.dump="&ref_"+l+" "+e.dump))}else if(i==="[object String]")e.tag!=="?"&&j5(e,e.dump,t,u);else{if(e.skipInvalid)return!1;throw new to("unacceptable kind of an object to dump "+i)}e.tag!==null&&e.tag!=="?"&&(e.dump="!<"+e.tag+"> "+e.dump)}return!0}function G5(e,t){var r=[],n=[],a,u;for(fp(e,r,n),a=0,u=n.length;a<u;a+=1)t.duplicates.push(r[n[a]]);t.usedDuplicates=new Array(u)}function fp(e,t,r){var n,a,u;if(e!==null&&typeof e=="object")if(a=t.indexOf(e),a!==-1)r.indexOf(a)===-1&&r.push(a);else if(t.push(e),Array.isArray(e))for(a=0,u=e.length;a<u;a+=1)fp(e[a],t,r);else for(n=Object.keys(e),a=0,u=n.length;a<u;a+=1)fp(e[n[a]],t,r)}function vv(e,t){t=t||{};var r=new T5(t);return r.noRefs||G5(e,r),sa(r,0,e,!0,!0)?r.dump+`
`:""}function W5(e,t){return vv(e,eo.extend({schema:v5},t))}pp.exports.dump=vv;pp.exports.safeDump=W5});var bv=Et((m8,$r)=>{"use strict";var Qc=Wg(),wv=mv();function el(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}$r.exports.Type=Wr();$r.exports.Schema=ta();$r.exports.FAILSAFE_SCHEMA=zc();$r.exports.JSON_SCHEMA=ip();$r.exports.CORE_SCHEMA=sp();$r.exports.DEFAULT_SAFE_SCHEMA=eu();$r.exports.DEFAULT_FULL_SCHEMA=Xu();$r.exports.load=Qc.load;$r.exports.loadAll=Qc.loadAll;$r.exports.safeLoad=Qc.safeLoad;$r.exports.safeLoadAll=Qc.safeLoadAll;$r.exports.dump=wv.dump;$r.exports.safeDump=wv.safeDump;$r.exports.YAMLException=Za();$r.exports.MINIMAL_SCHEMA=zc();$r.exports.SAFE_SCHEMA=eu();$r.exports.DEFAULT_SCHEMA=Xu();$r.exports.scan=el("scan");$r.exports.parse=el("parse");$r.exports.compose=el("compose");$r.exports.addConstructor=el("addConstructor")});var Av=Et((w8,Ev)=>{"use strict";var Y5=bv();Ev.exports=Y5});var Sv=Et((b8,yv)=>{"use strict";var tl=Av();yv.exports={safeLoad:tl.safeLoad,load:tl.load,safeDump:tl.safeDump,dump:tl.dump}});var Iv=Et((su,no)=>{(function(){var e,t="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",u="Invalid `variable` option passed into `_.template`",i="__lodash_hash_undefined__",c=500,l="__lodash_placeholder__",m=1,E=2,b=4,v=1,g=2,A=1,w=2,S=4,y=8,C=16,x=32,N=64,L=128,ne=256,pe=512,I=30,B="...",j=800,R=16,M=1,Q=2,V=3,z=1/0,te=9007199254740991,me=17976931348623157e292,at=NaN,st=4294967295,ct=st-1,It=st>>>1,Dt=[["ary",L],["bind",A],["bindKey",w],["curry",y],["curryRight",C],["flip",pe],["partial",x],["partialRight",N],["rearg",ne]],Ht="[object Arguments]",jt="[object Array]",hn="[object AsyncFunction]",Ar="[object Boolean]",lr="[object Date]",Nr="[object DOMException]",_r="[object Error]",xt="[object Function]",fr="[object GeneratorFunction]",yt="[object Map]",xe="[object Number]",$e="[object Null]",ve="[object Object]",ye="[object Promise]",Y="[object Proxy]",de="[object RegExp]",W="[object Set]",P="[object String]",U="[object Symbol]",f="[object Undefined]",q="[object WeakMap]",G="[object WeakSet]",X="[object ArrayBuffer]",re="[object DataView]",Se="[object Float32Array]",ue="[object Float64Array]",Ee="[object Int8Array]",Ne="[object Int16Array]",Ae="[object Int32Array]",Z="[object Uint8Array]",Ie="[object Uint8ClampedArray]",Pe="[object Uint16Array]",je="[object Uint32Array]",oe=/\b__p \+= '';/g,Te=/\b(__p \+=) '' \+/g,Ke=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Xe=/&(?:amp|lt|gt|quot|#39);/g,We=/[&<>"']/g,Rt=RegExp(Xe.source),ut=RegExp(We.source),ur=/<%-([\s\S]+?)%>/g,br=/<%([\s\S]+?)%>/g,Qr=/<%=([\s\S]+?)%>/g,gr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Yr=/^\w*$/,Tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,se=/[\\^$.*+?()[\]{}|]/g,Re=RegExp(se.source),Je=/^\s+/,K=/\s/,fe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ve=/\{\n\/\* \[wrapped with (.+)\] \*/,ze=/,? & /,_e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ze=/[()=,{}\[\]\/\s]/,Qe=/\\(\\)?/g,Mt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Me=/\w*$/,ht=/^[-+]0x[0-9a-f]+$/i,qe=/^0b[01]+$/i,qt=/^\[object .+?Constructor\]$/,Kt=/^0o[0-7]+$/i,tt=/^(?:0|[1-9]\d*)$/,Lr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Le=/($^)/,Ui=/['\n\r\u2028\u2029\\]/g,bt="\\ud800-\\udfff",Rr="\\u0300-\\u036f",_t="\\ufe20-\\ufe2f",vr="\\u20d0-\\u20ff",ft=Rr+_t+vr,tr="\\u2700-\\u27bf",Hr="a-z\\xdf-\\xf6\\xf8-\\xff",yr="\\xac\\xb1\\xd7\\xf7",Xt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Zt="\\u2000-\\u206f",ir=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",hr="A-Z\\xc0-\\xd6\\xd8-\\xde",Sr="\\ufe0e\\ufe0f",Mr=yr+Xt+Zt+ir,An="['\u2019]",sr="["+bt+"]",Xn="["+Mr+"]",kr="["+ft+"]",li="\\d+",ou="["+tr+"]",cu="["+Hr+"]",Ts="[^"+bt+Mr+li+tr+Hr+hr+"]",os="\\ud83c[\\udffb-\\udfff]",hl="(?:"+kr+"|"+os+")",lu="[^"+bt+"]",Zn="(?:\\ud83c[\\udde6-\\uddff]){2}",Qn="[\\ud800-\\udbff][\\udc00-\\udfff]",cs="["+hr+"]",ca="\\u200d",fu="(?:"+cu+"|"+Ts+")",pl="(?:"+cs+"|"+Ts+")",fo="(?:"+An+"(?:d|ll|m|re|s|t|ve))?",ho="(?:"+An+"(?:D|LL|M|RE|S|T|VE))?",po=hl+"?",hu="["+Sr+"]?",dl="(?:"+ca+"(?:"+[lu,Zn,Qn].join("|")+")"+hu+po+")*",gl="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",vl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",pu=hu+po+dl,ml="(?:"+[ou,Zn,Qn].join("|")+")"+pu,wl="(?:"+[lu+kr+"?",kr,Zn,Qn,sr].join("|")+")",bl=RegExp(An,"g"),El=RegExp(kr,"g"),du=RegExp(os+"(?="+os+")|"+wl+pu,"g"),Al=RegExp([cs+"?"+cu+"+"+fo+"(?="+[Xn,cs,"$"].join("|")+")",pl+"+"+ho+"(?="+[Xn,cs+fu,"$"].join("|")+")",cs+"?"+fu+"+"+fo,cs+"+"+ho,vl,gl,li,ml].join("|"),"g"),yl=RegExp("["+ca+bt+ft+Sr+"]"),Sl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_l=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Dl=-1,pr={};pr[Se]=pr[ue]=pr[Ee]=pr[Ne]=pr[Ae]=pr[Z]=pr[Ie]=pr[Pe]=pr[je]=!0,pr[Ht]=pr[jt]=pr[X]=pr[Ar]=pr[re]=pr[lr]=pr[_r]=pr[xt]=pr[yt]=pr[xe]=pr[ve]=pr[de]=pr[W]=pr[P]=pr[q]=!1;var or={};or[Ht]=or[jt]=or[X]=or[re]=or[Ar]=or[lr]=or[Se]=or[ue]=or[Ee]=or[Ne]=or[Ae]=or[yt]=or[xe]=or[ve]=or[de]=or[W]=or[P]=or[U]=or[Z]=or[Ie]=or[Pe]=or[je]=!0,or[_r]=or[xt]=or[q]=!1;var Fl={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},go={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ls={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Cl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Il=parseFloat,Pl=parseInt,Mi=typeof global=="object"&&global&&global.Object===Object&&global,Bl=typeof self=="object"&&self&&self.Object===Object&&self,jr=Mi||Bl||Function("return this")(),la=typeof su=="object"&&su&&!su.nodeType&&su,qi=la&&typeof no=="object"&&no&&!no.nodeType&&no,gu=qi&&qi.exports===la,fa=gu&&Mi.process,yn=(function(){try{var le=qi&&qi.require&&qi.require("util").types;return le||fa&&fa.binding&&fa.binding("util")}catch{}})(),vo=yn&&yn.isArrayBuffer,mo=yn&&yn.isDate,wo=yn&&yn.isMap,bo=yn&&yn.isRegExp,Eo=yn&&yn.isSet,Ao=yn&&yn.isTypedArray;function pn(le,Fe,be){switch(be.length){case 0:return le.call(Fe);case 1:return le.call(Fe,be[0]);case 2:return le.call(Fe,be[0],be[1]);case 3:return le.call(Fe,be[0],be[1],be[2])}return le.apply(Fe,be)}function $l(le,Fe,be,nt){for(var St=-1,Jt=le==null?0:le.length;++St<Jt;){var xr=le[St];Fe(nt,xr,be(xr),le)}return nt}function tn(le,Fe){for(var be=-1,nt=le==null?0:le.length;++be<nt&&Fe(le[be],be,le)!==!1;);return le}function Rl(le,Fe){for(var be=le==null?0:le.length;be--&&Fe(le[be],be,le)!==!1;);return le}function yo(le,Fe){for(var be=-1,nt=le==null?0:le.length;++be<nt;)if(!Fe(le[be],be,le))return!1;return!0}function yi(le,Fe){for(var be=-1,nt=le==null?0:le.length,St=0,Jt=[];++be<nt;){var xr=le[be];Fe(xr,be,le)&&(Jt[St++]=xr)}return Jt}function ha(le,Fe){var be=le==null?0:le.length;return!!be&&fi(le,Fe,0)>-1}function vu(le,Fe,be){for(var nt=-1,St=le==null?0:le.length;++nt<St;)if(be(Fe,le[nt]))return!0;return!1}function mr(le,Fe){for(var be=-1,nt=le==null?0:le.length,St=Array(nt);++be<nt;)St[be]=Fe(le[be],be,le);return St}function Si(le,Fe){for(var be=-1,nt=Fe.length,St=le.length;++be<nt;)le[St+be]=Fe[be];return le}function mu(le,Fe,be,nt){var St=-1,Jt=le==null?0:le.length;for(nt&&Jt&&(be=le[++St]);++St<Jt;)be=Fe(be,le[St],St,le);return be}function kl(le,Fe,be,nt){var St=le==null?0:le.length;for(nt&&St&&(be=le[--St]);St--;)be=Fe(be,le[St],St,le);return be}function wu(le,Fe){for(var be=-1,nt=le==null?0:le.length;++be<nt;)if(Fe(le[be],be,le))return!0;return!1}var xl=bu("length");function Tl(le){return le.split("")}function Ol(le){return le.match(_e)||[]}function So(le,Fe,be){var nt;return be(le,function(St,Jt,xr){if(Fe(St,Jt,xr))return nt=Jt,!1}),nt}function pa(le,Fe,be,nt){for(var St=le.length,Jt=be+(nt?1:-1);nt?Jt--:++Jt<St;)if(Fe(le[Jt],Jt,le))return Jt;return-1}function fi(le,Fe,be){return Fe===Fe?Wl(le,Fe,be):pa(le,_o,be)}function Nl(le,Fe,be,nt){for(var St=be-1,Jt=le.length;++St<Jt;)if(nt(le[St],Fe))return St;return-1}function _o(le){return le!==le}function Do(le,Fe){var be=le==null?0:le.length;return be?Au(le,Fe)/be:at}function bu(le){return function(Fe){return Fe==null?e:Fe[le]}}function Eu(le){return function(Fe){return le==null?e:le[Fe]}}function Fo(le,Fe,be,nt,St){return St(le,function(Jt,xr,ar){be=nt?(nt=!1,Jt):Fe(be,Jt,xr,ar)}),be}function Ll(le,Fe){var be=le.length;for(le.sort(Fe);be--;)le[be]=le[be].value;return le}function Au(le,Fe){for(var be,nt=-1,St=le.length;++nt<St;){var Jt=Fe(le[nt]);Jt!==e&&(be=be===e?Jt:be+Jt)}return be}function yu(le,Fe){for(var be=-1,nt=Array(le);++be<le;)nt[be]=Fe(be);return nt}function Hl(le,Fe){return mr(Fe,function(be){return[be,le[be]]})}function Co(le){return le&&le.slice(0,$o(le)+1).replace(Je,"")}function dn(le){return function(Fe){return le(Fe)}}function Su(le,Fe){return mr(Fe,function(be){return le[be]})}function Os(le,Fe){return le.has(Fe)}function Io(le,Fe){for(var be=-1,nt=le.length;++be<nt&&fi(Fe,le[be],0)>-1;);return be}function Po(le,Fe){for(var be=le.length;be--&&fi(Fe,le[be],0)>-1;);return be}function jl(le,Fe){for(var be=le.length,nt=0;be--;)le[be]===Fe&&++nt;return nt}var Ul=Eu(Fl),Ml=Eu(go);function ql(le){return"\\"+Cl[le]}function Vl(le,Fe){return le==null?e:le[Fe]}function fs(le){return yl.test(le)}function Kl(le){return Sl.test(le)}function zl(le){for(var Fe,be=[];!(Fe=le.next()).done;)be.push(Fe.value);return be}function _u(le){var Fe=-1,be=Array(le.size);return le.forEach(function(nt,St){be[++Fe]=[St,nt]}),be}function Bo(le,Fe){return function(be){return le(Fe(be))}}function _i(le,Fe){for(var be=-1,nt=le.length,St=0,Jt=[];++be<nt;){var xr=le[be];(xr===Fe||xr===l)&&(le[be]=l,Jt[St++]=be)}return Jt}function da(le){var Fe=-1,be=Array(le.size);return le.forEach(function(nt){be[++Fe]=nt}),be}function Gl(le){var Fe=-1,be=Array(le.size);return le.forEach(function(nt){be[++Fe]=[nt,nt]}),be}function Wl(le,Fe,be){for(var nt=be-1,St=le.length;++nt<St;)if(le[nt]===Fe)return nt;return-1}function Yl(le,Fe,be){for(var nt=be+1;nt--;)if(le[nt]===Fe)return nt;return nt}function hs(le){return fs(le)?Xl(le):xl(le)}function Nn(le){return fs(le)?Zl(le):Tl(le)}function $o(le){for(var Fe=le.length;Fe--&&K.test(le.charAt(Fe)););return Fe}var Jl=Eu(ls);function Xl(le){for(var Fe=du.lastIndex=0;du.test(le);)++Fe;return Fe}function Zl(le){return le.match(du)||[]}function Ql(le){return le.match(Al)||[]}var ef=(function le(Fe){Fe=Fe==null?jr:Di.defaults(jr.Object(),Fe,Di.pick(jr,_l));var be=Fe.Array,nt=Fe.Date,St=Fe.Error,Jt=Fe.Function,xr=Fe.Math,ar=Fe.Object,Du=Fe.RegExp,tf=Fe.String,Sn=Fe.TypeError,ga=be.prototype,rf=Jt.prototype,ps=ar.prototype,va=Fe["__core-js_shared__"],ma=rf.toString,er=ps.hasOwnProperty,nf=0,Ro=(function(){var s=/[^.]+$/.exec(va&&va.keys&&va.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""})(),wa=ps.toString,sf=ma.call(ar),af=jr._,_=Du("^"+ma.call(er).replace(se,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rt=gu?Fe.Buffer:e,gn=Fe.Symbol,rn=Fe.Uint8Array,Ns=rt?rt.allocUnsafe:e,ge=Bo(ar.getPrototypeOf,ar),ds=ar.create,ko=ps.propertyIsEnumerable,Fu=ga.splice,uf=gn?gn.isConcatSpreadable:e,Bt=gn?gn.iterator:e,gs=gn?gn.toStringTag:e,ei=(function(){try{var s=qs(ar,"defineProperty");return s({},"",{}),s}catch{}})(),ba=Fe.clearTimeout!==jr.clearTimeout&&Fe.clearTimeout,Ft=nt&&nt.now!==jr.Date.now&&nt.now,Dr=Fe.setTimeout!==jr.setTimeout&&Fe.setTimeout,Ea=xr.ceil,Aa=xr.floor,Ln=ar.getOwnPropertySymbols,xo=rt?rt.isBuffer:e,vs=Fe.isFinite,Be=ga.join,of=Bo(ar.keys,ar),Ir=xr.max,qr=xr.min,cf=nt.now,lf=Fe.parseInt,To=xr.random,Oo=ga.reverse,ya=qs(Fe,"DataView"),Ls=qs(Fe,"Map"),Cu=qs(Fe,"Promise"),Vi=qs(Fe,"Set"),ms=qs(Fe,"WeakMap"),Hs=qs(ar,"create"),Sa=ms&&new ms,Ki={},No=Vs(ya),_a=Vs(Ls),ff=Vs(Cu),hf=Vs(Vi),pf=Vs(ms),Da=gn?gn.prototype:e,ws=Da?Da.valueOf:e,Fa=Da?Da.toString:e;function O(s){if(Pr(s)&&!Ct(s)&&!(s instanceof Ot)){if(s instanceof _n)return s;if(er.call(s,"__wrapped__"))return _d(s)}return new _n(s)}var bs=(function(){function s(){}return function(o){if(!Fr(o))return{};if(ds)return ds(o);s.prototype=o;var d=new s;return s.prototype=e,d}})();function Es(){}function _n(s,o){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!o,this.__index__=0,this.__values__=e}O.templateSettings={escape:ur,evaluate:br,interpolate:Qr,variable:"",imports:{_:O}},O.prototype=Es.prototype,O.prototype.constructor=O,_n.prototype=bs(Es.prototype),_n.prototype.constructor=_n;function Ot(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=st,this.__views__=[]}function Iu(){var s=new Ot(this.__wrapped__);return s.__actions__=Dn(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=Dn(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=Dn(this.__views__),s}function df(){if(this.__filtered__){var s=new Ot(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function Lo(){var s=this.__wrapped__.value(),o=this.__dir__,d=Ct(s),D=o<0,$=d?s.length:0,H=Bm(0,$,this.__views__),J=H.start,ee=H.end,he=ee-J,ke=D?ee:J-1,Oe=this.__iteratees__,He=Oe.length,et=0,lt=qr(he,this.__takeCount__);if(!d||!D&&$==he&&lt==he)return Gp(s,this.__actions__);var vt=[];e:for(;he--&&et<lt;){ke+=o;for(var kt=-1,mt=s[ke];++kt<He;){var Ut=Oe[kt],zt=Ut.iteratee,qn=Ut.type,wn=zt(mt);if(qn==Q)mt=wn;else if(!wn){if(qn==M)continue e;break e}}vt[et++]=mt}return vt}Ot.prototype=bs(Es.prototype),Ot.prototype.constructor=Ot;function zi(s){var o=-1,d=s==null?0:s.length;for(this.clear();++o<d;){var D=s[o];this.set(D[0],D[1])}}function gf(){this.__data__=Hs?Hs(null):{},this.size=0}function vf(s){var o=this.has(s)&&delete this.__data__[s];return this.size-=o?1:0,o}function Pu(s){var o=this.__data__;if(Hs){var d=o[s];return d===i?e:d}return er.call(o,s)?o[s]:e}function Bu(s){var o=this.__data__;return Hs?o[s]!==e:er.call(o,s)}function mf(s,o){var d=this.__data__;return this.size+=this.has(s)?0:1,d[s]=Hs&&o===e?i:o,this}zi.prototype.clear=gf,zi.prototype.delete=vf,zi.prototype.get=Pu,zi.prototype.has=Bu,zi.prototype.set=mf;function hi(s){var o=-1,d=s==null?0:s.length;for(this.clear();++o<d;){var D=s[o];this.set(D[0],D[1])}}function wf(){this.__data__=[],this.size=0}function nn(s){var o=this.__data__,d=As(o,s);if(d<0)return!1;var D=o.length-1;return d==D?o.pop():Fu.call(o,d,1),--this.size,!0}function bf(s){var o=this.__data__,d=As(o,s);return d<0?e:o[d][1]}function Ef(s){return As(this.__data__,s)>-1}function Ca(s,o){var d=this.__data__,D=As(d,s);return D<0?(++this.size,d.push([s,o])):d[D][1]=o,this}hi.prototype.clear=wf,hi.prototype.delete=nn,hi.prototype.get=bf,hi.prototype.has=Ef,hi.prototype.set=Ca;function vn(s){var o=-1,d=s==null?0:s.length;for(this.clear();++o<d;){var D=s[o];this.set(D[0],D[1])}}function Ia(){this.size=0,this.__data__={hash:new zi,map:new(Ls||hi),string:new zi}}function Ho(s){var o=uc(this,s).delete(s);return this.size-=o?1:0,o}function Af(s){return uc(this,s).get(s)}function jo(s){return uc(this,s).has(s)}function Uo(s,o){var d=uc(this,s),D=d.size;return d.set(s,o),this.size+=d.size==D?0:1,this}vn.prototype.clear=Ia,vn.prototype.delete=Ho,vn.prototype.get=Af,vn.prototype.has=jo,vn.prototype.set=Uo;function sn(s){var o=-1,d=s==null?0:s.length;for(this.__data__=new vn;++o<d;)this.add(s[o])}function yf(s){return this.__data__.set(s,i),this}function Mo(s){return this.__data__.has(s)}sn.prototype.add=sn.prototype.push=yf,sn.prototype.has=Mo;function Hn(s){var o=this.__data__=new hi(s);this.size=o.size}function js(){this.__data__=new hi,this.size=0}function qo(s){var o=this.__data__,d=o.delete(s);return this.size=o.size,d}function Vo(s){return this.__data__.get(s)}function Sf(s){return this.__data__.has(s)}function Ko(s,o){var d=this.__data__;if(d instanceof hi){var D=d.__data__;if(!Ls||D.length<r-1)return D.push([s,o]),this.size=++d.size,this;d=this.__data__=new vn(D)}return d.set(s,o),this.size=d.size,this}Hn.prototype.clear=js,Hn.prototype.delete=qo,Hn.prototype.get=Vo,Hn.prototype.has=Sf,Hn.prototype.set=Ko;function zo(s,o){var d=Ct(s),D=!d&&Ks(s),$=!d&&!D&&Is(s),H=!d&&!D&&!$&&xa(s),J=d||D||$||H,ee=J?yu(s.length,tf):[],he=ee.length;for(var ke in s)(o||er.call(s,ke))&&!(J&&(ke=="length"||$&&(ke=="offset"||ke=="parent")||H&&(ke=="buffer"||ke=="byteLength"||ke=="byteOffset")||Ji(ke,he)))&&ee.push(ke);return ee}function Go(s){var o=s.length;return o?s[xf(0,o-1)]:e}function _f(s,o){return oc(Dn(s),pi(o,0,s.length))}function Df(s){return oc(Dn(s))}function $u(s,o,d){(d!==e&&!di(s[o],d)||d===e&&!(o in s))&&ti(s,o,d)}function Fi(s,o,d){var D=s[o];(!(er.call(s,o)&&di(D,d))||d===e&&!(o in s))&&ti(s,o,d)}function As(s,o){for(var d=s.length;d--;)if(di(s[d][0],o))return d;return-1}function Ff(s,o,d,D){return Ci(s,function($,H,J){o(D,$,d($),J)}),D}function Wo(s,o){return s&&Ii(o,Jr(o),s)}function Yo(s,o){return s&&Ii(o,Cn(o),s)}function ti(s,o,d){o=="__proto__"&&ei?ei(s,o,{configurable:!0,enumerable:!0,value:d,writable:!0}):s[o]=d}function ys(s,o){for(var d=-1,D=o.length,$=be(D),H=s==null;++d<D;)$[d]=H?e:sh(s,o[d]);return $}function pi(s,o,d){return s===s&&(d!==e&&(s=s<=d?s:d),o!==e&&(s=s>=o?s:o)),s}function an(s,o,d,D,$,H){var J,ee=o&m,he=o&E,ke=o&b;if(d&&(J=$?d(s,D,$,H):d(s)),J!==e)return J;if(!Fr(s))return s;var Oe=Ct(s);if(Oe){if(J=Rm(s),!ee)return Dn(s,J)}else{var He=on(s),et=He==xt||He==fr;if(Is(s))return Jp(s,ee);if(He==ve||He==Ht||et&&!$){if(J=he||et?{}:gd(s),!ee)return he?Am(s,Yo(J,s)):Em(s,Wo(J,s))}else{if(!or[He])return $?s:{};J=km(s,He,ee)}}H||(H=new Hn);var lt=H.get(s);if(lt)return lt;H.set(s,J),Vd(s)?s.forEach(function(mt){J.add(an(mt,o,d,mt,s,H))}):Md(s)&&s.forEach(function(mt,Ut){J.set(Ut,an(mt,o,d,Ut,s,H))});var vt=ke?he?Kf:Vf:he?Cn:Jr,kt=Oe?e:vt(s);return tn(kt||s,function(mt,Ut){kt&&(Ut=mt,mt=s[Ut]),Fi(J,Ut,an(mt,o,d,Ut,s,H))}),J}function Cf(s){var o=Jr(s);return function(d){return Ru(d,s,o)}}function Ru(s,o,d){var D=d.length;if(s==null)return!D;for(s=ar(s);D--;){var $=d[D],H=o[$],J=s[$];if(J===e&&!($ in s)||!H(J))return!1}return!0}function Jo(s,o,d){if(typeof s!="function")throw new Sn(a);return ju(function(){s.apply(e,d)},o)}function Us(s,o,d,D){var $=-1,H=ha,J=!0,ee=s.length,he=[],ke=o.length;if(!ee)return he;d&&(o=mr(o,dn(d))),D?(H=vu,J=!1):o.length>=r&&(H=Os,J=!1,o=new sn(o));e:for(;++$<ee;){var Oe=s[$],He=d==null?Oe:d(Oe);if(Oe=D||Oe!==0?Oe:0,J&&He===He){for(var et=ke;et--;)if(o[et]===He)continue e;he.push(Oe)}else H(o,He,D)||he.push(Oe)}return he}var Ci=td(ot),ku=td(xu,!0);function Pa(s,o){var d=!0;return Ci(s,function(D,$,H){return d=!!o(D,$,H),d}),d}function jn(s,o,d){for(var D=-1,$=s.length;++D<$;){var H=s[D],J=o(H);if(J!=null&&(ee===e?J===J&&!Mn(J):d(J,ee)))var ee=J,he=H}return he}function If(s,o,d,D){var $=s.length;for(d=$t(d),d<0&&(d=-d>$?0:$+d),D=D===e||D>$?$:$t(D),D<0&&(D+=$),D=d>D?0:zd(D);d<D;)s[d++]=o;return s}function Ss(s,o){var d=[];return Ci(s,function(D,$,H){o(D,$,H)&&d.push(D)}),d}function Vr(s,o,d,D,$){var H=-1,J=s.length;for(d||(d=Tm),$||($=[]);++H<J;){var ee=s[H];o>0&&d(ee)?o>1?Vr(ee,o-1,d,D,$):Si($,ee):D||($[$.length]=ee)}return $}var Ms=rd(),Xo=rd(!0);function ot(s,o){return s&&Ms(s,o,Jr)}function xu(s,o){return s&&Xo(s,o,Jr)}function _s(s,o){return yi(o,function(d){return Xi(s[d])})}function Gi(s,o){o=Fs(o,s);for(var d=0,D=o.length;s!=null&&d<D;)s=s[Pi(o[d++])];return d&&d==D?s:e}function Tu(s,o,d){var D=o(s);return Ct(s)?D:Si(D,d(s))}function Kr(s){return s==null?s===e?f:$e:gs&&gs in ar(s)?Pm(s):Mm(s)}function Ba(s,o){return s>o}function h(s,o){return s!=null&&er.call(s,o)}function F(s,o){return s!=null&&o in ar(s)}function T(s,o,d){return s>=qr(o,d)&&s<Ir(o,d)}function k(s,o,d){for(var D=d?vu:ha,$=s[0].length,H=s.length,J=H,ee=be(H),he=1/0,ke=[];J--;){var Oe=s[J];J&&o&&(Oe=mr(Oe,dn(o))),he=qr(Oe.length,he),ee[J]=!d&&(o||$>=120&&Oe.length>=120)?new sn(J&&Oe):e}Oe=s[0];var He=-1,et=ee[0];e:for(;++He<$&&ke.length<he;){var lt=Oe[He],vt=o?o(lt):lt;if(lt=d||lt!==0?lt:0,!(et?Os(et,vt):D(ke,vt,d))){for(J=H;--J;){var kt=ee[J];if(!(kt?Os(kt,vt):D(s[J],vt,d)))continue e}et&&et.push(vt),ke.push(lt)}}return ke}function ie(s,o,d,D){return ot(s,function($,H,J){o(D,d($),H,J)}),D}function ce(s,o,d){o=Fs(o,s),s=bd(s,o);var D=s==null?s:s[Pi(ii(o))];return D==null?e:pn(D,s,d)}function it(s){return Pr(s)&&Kr(s)==Ht}function wt(s){return Pr(s)&&Kr(s)==X}function un(s){return Pr(s)&&Kr(s)==lr}function ri(s,o,d,D,$){return s===o?!0:s==null||o==null||!Pr(s)&&!Pr(o)?s!==s&&o!==o:Ou(s,o,d,D,ri,$)}function Ou(s,o,d,D,$,H){var J=Ct(s),ee=Ct(o),he=J?jt:on(s),ke=ee?jt:on(o);he=he==Ht?ve:he,ke=ke==Ht?ve:ke;var Oe=he==ve,He=ke==ve,et=he==ke;if(et&&Is(s)){if(!Is(o))return!1;J=!0,Oe=!1}if(et&&!Oe)return H||(H=new Hn),J||xa(s)?hd(s,o,d,D,$,H):Cm(s,o,he,d,D,$,H);if(!(d&v)){var lt=Oe&&er.call(s,"__wrapped__"),vt=He&&er.call(o,"__wrapped__");if(lt||vt){var kt=lt?s.value():s,mt=vt?o.value():o;return H||(H=new Hn),$(kt,mt,d,D,H)}}return et?(H||(H=new Hn),Im(s,o,d,D,$,H)):!1}function Pf(s){return Pr(s)&&on(s)==yt}function Bf(s,o,d,D){var $=d.length,H=$,J=!D;if(s==null)return!H;for(s=ar(s);$--;){var ee=d[$];if(J&&ee[2]?ee[1]!==s[ee[0]]:!(ee[0]in s))return!1}for(;++$<H;){ee=d[$];var he=ee[0],ke=s[he],Oe=ee[1];if(J&&ee[2]){if(ke===e&&!(he in s))return!1}else{var He=new Hn;if(D)var et=D(ke,Oe,he,s,o,He);if(!(et===e?ri(Oe,ke,v|g,D,He):et))return!1}}return!0}function xp(s){if(!Fr(s)||Nm(s))return!1;var o=Xi(s)?_:qt;return o.test(Vs(s))}function rm(s){return Pr(s)&&Kr(s)==de}function nm(s){return Pr(s)&&on(s)==W}function im(s){return Pr(s)&&dc(s.length)&&!!pr[Kr(s)]}function Tp(s){return typeof s=="function"?s:s==null?In:typeof s=="object"?Ct(s)?Lp(s[0],s[1]):Np(s):n0(s)}function $f(s){if(!Hu(s))return of(s);var o=[];for(var d in ar(s))er.call(s,d)&&d!="constructor"&&o.push(d);return o}function sm(s){if(!Fr(s))return Um(s);var o=Hu(s),d=[];for(var D in s)D=="constructor"&&(o||!er.call(s,D))||d.push(D);return d}function Rf(s,o){return s<o}function Op(s,o){var d=-1,D=Fn(s)?be(s.length):[];return Ci(s,function($,H,J){D[++d]=o($,H,J)}),D}function Np(s){var o=Gf(s);return o.length==1&&o[0][2]?md(o[0][0],o[0][1]):function(d){return d===s||Bf(d,s,o)}}function Lp(s,o){return Yf(s)&&vd(o)?md(Pi(s),o):function(d){var D=sh(d,s);return D===e&&D===o?ah(d,s):ri(o,D,v|g)}}function Zo(s,o,d,D,$){s!==o&&Ms(o,function(H,J){if($||($=new Hn),Fr(H))am(s,o,J,d,Zo,D,$);else{var ee=D?D(Xf(s,J),H,J+"",s,o,$):e;ee===e&&(ee=H),$u(s,J,ee)}},Cn)}function am(s,o,d,D,$,H,J){var ee=Xf(s,d),he=Xf(o,d),ke=J.get(he);if(ke){$u(s,d,ke);return}var Oe=H?H(ee,he,d+"",s,o,J):e,He=Oe===e;if(He){var et=Ct(he),lt=!et&&Is(he),vt=!et&&!lt&&xa(he);Oe=he,et||lt||vt?Ct(ee)?Oe=ee:Tr(ee)?Oe=Dn(ee):lt?(He=!1,Oe=Jp(he,!0)):vt?(He=!1,Oe=Xp(he,!0)):Oe=[]:Uu(he)||Ks(he)?(Oe=ee,Ks(ee)?Oe=Gd(ee):(!Fr(ee)||Xi(ee))&&(Oe=gd(he))):He=!1}He&&(J.set(he,Oe),$(Oe,he,D,H,J),J.delete(he)),$u(s,d,Oe)}function Hp(s,o){var d=s.length;if(d)return o+=o<0?d:0,Ji(o,d)?s[o]:e}function jp(s,o,d){o.length?o=mr(o,function(H){return Ct(H)?function(J){return Gi(J,H.length===1?H[0]:H)}:H}):o=[In];var D=-1;o=mr(o,dn(dt()));var $=Op(s,function(H,J,ee){var he=mr(o,function(ke){return ke(H)});return{criteria:he,index:++D,value:H}});return Ll($,function(H,J){return bm(H,J,d)})}function um(s,o){return Up(s,o,function(d,D){return ah(s,D)})}function Up(s,o,d){for(var D=-1,$=o.length,H={};++D<$;){var J=o[D],ee=Gi(s,J);d(ee,J)&&Nu(H,Fs(J,s),ee)}return H}function om(s){return function(o){return Gi(o,s)}}function kf(s,o,d,D){var $=D?Nl:fi,H=-1,J=o.length,ee=s;for(s===o&&(o=Dn(o)),d&&(ee=mr(s,dn(d)));++H<J;)for(var he=0,ke=o[H],Oe=d?d(ke):ke;(he=$(ee,Oe,he,D))>-1;)ee!==s&&Fu.call(ee,he,1),Fu.call(s,he,1);return s}function Mp(s,o){for(var d=s?o.length:0,D=d-1;d--;){var $=o[d];if(d==D||$!==H){var H=$;Ji($)?Fu.call(s,$,1):Nf(s,$)}}return s}function xf(s,o){return s+Aa(To()*(o-s+1))}function cm(s,o,d,D){for(var $=-1,H=Ir(Ea((o-s)/(d||1)),0),J=be(H);H--;)J[D?H:++$]=s,s+=d;return J}function Tf(s,o){var d="";if(!s||o<1||o>te)return d;do o%2&&(d+=s),o=Aa(o/2),o&&(s+=s);while(o);return d}function Nt(s,o){return Zf(wd(s,o,In),s+"")}function lm(s){return Go(Ta(s))}function fm(s,o){var d=Ta(s);return oc(d,pi(o,0,d.length))}function Nu(s,o,d,D){if(!Fr(s))return s;o=Fs(o,s);for(var $=-1,H=o.length,J=H-1,ee=s;ee!=null&&++$<H;){var he=Pi(o[$]),ke=d;if(he==="__proto__"||he==="constructor"||he==="prototype")return s;if($!=J){var Oe=ee[he];ke=D?D(Oe,he,ee):e,ke===e&&(ke=Fr(Oe)?Oe:Ji(o[$+1])?[]:{})}Fi(ee,he,ke),ee=ee[he]}return s}var qp=Sa?function(s,o){return Sa.set(s,o),s}:In,hm=ei?function(s,o){return ei(s,"toString",{configurable:!0,enumerable:!1,value:oh(o),writable:!0})}:In;function pm(s){return oc(Ta(s))}function ni(s,o,d){var D=-1,$=s.length;o<0&&(o=-o>$?0:$+o),d=d>$?$:d,d<0&&(d+=$),$=o>d?0:d-o>>>0,o>>>=0;for(var H=be($);++D<$;)H[D]=s[D+o];return H}function dm(s,o){var d;return Ci(s,function(D,$,H){return d=o(D,$,H),!d}),!!d}function Qo(s,o,d){var D=0,$=s==null?D:s.length;if(typeof o=="number"&&o===o&&$<=It){for(;D<$;){var H=D+$>>>1,J=s[H];J!==null&&!Mn(J)&&(d?J<=o:J<o)?D=H+1:$=H}return $}return Of(s,o,In,d)}function Of(s,o,d,D){var $=0,H=s==null?0:s.length;if(H===0)return 0;o=d(o);for(var J=o!==o,ee=o===null,he=Mn(o),ke=o===e;$<H;){var Oe=Aa(($+H)/2),He=d(s[Oe]),et=He!==e,lt=He===null,vt=He===He,kt=Mn(He);if(J)var mt=D||vt;else ke?mt=vt&&(D||et):ee?mt=vt&&et&&(D||!lt):he?mt=vt&&et&&!lt&&(D||!kt):lt||kt?mt=!1:mt=D?He<=o:He<o;mt?$=Oe+1:H=Oe}return qr(H,ct)}function Vp(s,o){for(var d=-1,D=s.length,$=0,H=[];++d<D;){var J=s[d],ee=o?o(J):J;if(!d||!di(ee,he)){var he=ee;H[$++]=J===0?0:J}}return H}function Kp(s){return typeof s=="number"?s:Mn(s)?at:+s}function Un(s){if(typeof s=="string")return s;if(Ct(s))return mr(s,Un)+"";if(Mn(s))return Fa?Fa.call(s):"";var o=s+"";return o=="0"&&1/s==-z?"-0":o}function Ds(s,o,d){var D=-1,$=ha,H=s.length,J=!0,ee=[],he=ee;if(d)J=!1,$=vu;else if(H>=r){var ke=o?null:Dm(s);if(ke)return da(ke);J=!1,$=Os,he=new sn}else he=o?[]:ee;e:for(;++D<H;){var Oe=s[D],He=o?o(Oe):Oe;if(Oe=d||Oe!==0?Oe:0,J&&He===He){for(var et=he.length;et--;)if(he[et]===He)continue e;o&&he.push(He),ee.push(Oe)}else $(he,He,d)||(he!==ee&&he.push(He),ee.push(Oe))}return ee}function Nf(s,o){return o=Fs(o,s),s=bd(s,o),s==null||delete s[Pi(ii(o))]}function zp(s,o,d,D){return Nu(s,o,d(Gi(s,o)),D)}function ec(s,o,d,D){for(var $=s.length,H=D?$:-1;(D?H--:++H<$)&&o(s[H],H,s););return d?ni(s,D?0:H,D?H+1:$):ni(s,D?H+1:0,D?$:H)}function Gp(s,o){var d=s;return d instanceof Ot&&(d=d.value()),mu(o,function(D,$){return $.func.apply($.thisArg,Si([D],$.args))},d)}function Lf(s,o,d){var D=s.length;if(D<2)return D?Ds(s[0]):[];for(var $=-1,H=be(D);++$<D;)for(var J=s[$],ee=-1;++ee<D;)ee!=$&&(H[$]=Us(H[$]||J,s[ee],o,d));return Ds(Vr(H,1),o,d)}function Wp(s,o,d){for(var D=-1,$=s.length,H=o.length,J={};++D<$;){var ee=D<H?o[D]:e;d(J,s[D],ee)}return J}function Hf(s){return Tr(s)?s:[]}function jf(s){return typeof s=="function"?s:In}function Fs(s,o){return Ct(s)?s:Yf(s,o)?[s]:Sd(rr(s))}var gm=Nt;function Cs(s,o,d){var D=s.length;return d=d===e?D:d,!o&&d>=D?s:ni(s,o,d)}var Yp=ba||function(s){return jr.clearTimeout(s)};function Jp(s,o){if(o)return s.slice();var d=s.length,D=Ns?Ns(d):new s.constructor(d);return s.copy(D),D}function Uf(s){var o=new s.constructor(s.byteLength);return new rn(o).set(new rn(s)),o}function vm(s,o){var d=o?Uf(s.buffer):s.buffer;return new s.constructor(d,s.byteOffset,s.byteLength)}function mm(s){var o=new s.constructor(s.source,Me.exec(s));return o.lastIndex=s.lastIndex,o}function wm(s){return ws?ar(ws.call(s)):{}}function Xp(s,o){var d=o?Uf(s.buffer):s.buffer;return new s.constructor(d,s.byteOffset,s.length)}function Zp(s,o){if(s!==o){var d=s!==e,D=s===null,$=s===s,H=Mn(s),J=o!==e,ee=o===null,he=o===o,ke=Mn(o);if(!ee&&!ke&&!H&&s>o||H&&J&&he&&!ee&&!ke||D&&J&&he||!d&&he||!$)return 1;if(!D&&!H&&!ke&&s<o||ke&&d&&$&&!D&&!H||ee&&d&&$||!J&&$||!he)return-1}return 0}function bm(s,o,d){for(var D=-1,$=s.criteria,H=o.criteria,J=$.length,ee=d.length;++D<J;){var he=Zp($[D],H[D]);if(he){if(D>=ee)return he;var ke=d[D];return he*(ke=="desc"?-1:1)}}return s.index-o.index}function Qp(s,o,d,D){for(var $=-1,H=s.length,J=d.length,ee=-1,he=o.length,ke=Ir(H-J,0),Oe=be(he+ke),He=!D;++ee<he;)Oe[ee]=o[ee];for(;++$<J;)(He||$<H)&&(Oe[d[$]]=s[$]);for(;ke--;)Oe[ee++]=s[$++];return Oe}function ed(s,o,d,D){for(var $=-1,H=s.length,J=-1,ee=d.length,he=-1,ke=o.length,Oe=Ir(H-ee,0),He=be(Oe+ke),et=!D;++$<Oe;)He[$]=s[$];for(var lt=$;++he<ke;)He[lt+he]=o[he];for(;++J<ee;)(et||$<H)&&(He[lt+d[J]]=s[$++]);return He}function Dn(s,o){var d=-1,D=s.length;for(o||(o=be(D));++d<D;)o[d]=s[d];return o}function Ii(s,o,d,D){var $=!d;d||(d={});for(var H=-1,J=o.length;++H<J;){var ee=o[H],he=D?D(d[ee],s[ee],ee,d,s):e;he===e&&(he=s[ee]),$?ti(d,ee,he):Fi(d,ee,he)}return d}function Em(s,o){return Ii(s,Wf(s),o)}function Am(s,o){return Ii(s,pd(s),o)}function tc(s,o){return function(d,D){var $=Ct(d)?$l:Ff,H=o?o():{};return $(d,s,dt(D,2),H)}}function $a(s){return Nt(function(o,d){var D=-1,$=d.length,H=$>1?d[$-1]:e,J=$>2?d[2]:e;for(H=s.length>3&&typeof H=="function"?($--,H):e,J&&mn(d[0],d[1],J)&&(H=$<3?e:H,$=1),o=ar(o);++D<$;){var ee=d[D];ee&&s(o,ee,D,H)}return o})}function td(s,o){return function(d,D){if(d==null)return d;if(!Fn(d))return s(d,D);for(var $=d.length,H=o?$:-1,J=ar(d);(o?H--:++H<$)&&D(J[H],H,J)!==!1;);return d}}function rd(s){return function(o,d,D){for(var $=-1,H=ar(o),J=D(o),ee=J.length;ee--;){var he=J[s?ee:++$];if(d(H[he],he,H)===!1)break}return o}}function ym(s,o,d){var D=o&A,$=Lu(s);function H(){var J=this&&this!==jr&&this instanceof H?$:s;return J.apply(D?d:this,arguments)}return H}function nd(s){return function(o){o=rr(o);var d=fs(o)?Nn(o):e,D=d?d[0]:o.charAt(0),$=d?Cs(d,1).join(""):o.slice(1);return D[s]()+$}}function Ra(s){return function(o){return mu(t0(e0(o).replace(bl,"")),s,"")}}function Lu(s){return function(){var o=arguments;switch(o.length){case 0:return new s;case 1:return new s(o[0]);case 2:return new s(o[0],o[1]);case 3:return new s(o[0],o[1],o[2]);case 4:return new s(o[0],o[1],o[2],o[3]);case 5:return new s(o[0],o[1],o[2],o[3],o[4]);case 6:return new s(o[0],o[1],o[2],o[3],o[4],o[5]);case 7:return new s(o[0],o[1],o[2],o[3],o[4],o[5],o[6])}var d=bs(s.prototype),D=s.apply(d,o);return Fr(D)?D:d}}function Sm(s,o,d){var D=Lu(s);function $(){for(var H=arguments.length,J=be(H),ee=H,he=ka($);ee--;)J[ee]=arguments[ee];var ke=H<3&&J[0]!==he&&J[H-1]!==he?[]:_i(J,he);if(H-=ke.length,H<d)return od(s,o,rc,$.placeholder,e,J,ke,e,e,d-H);var Oe=this&&this!==jr&&this instanceof $?D:s;return pn(Oe,this,J)}return $}function id(s){return function(o,d,D){var $=ar(o);if(!Fn(o)){var H=dt(d,3);o=Jr(o),d=function(ee){return H($[ee],ee,$)}}var J=s(o,d,D);return J>-1?$[H?o[J]:J]:e}}function sd(s){return Yi(function(o){var d=o.length,D=d,$=_n.prototype.thru;for(s&&o.reverse();D--;){var H=o[D];if(typeof H!="function")throw new Sn(a);if($&&!J&&ac(H)=="wrapper")var J=new _n([],!0)}for(D=J?D:d;++D<d;){H=o[D];var ee=ac(H),he=ee=="wrapper"?zf(H):e;he&&Jf(he[0])&&he[1]==(L|y|x|ne)&&!he[4].length&&he[9]==1?J=J[ac(he[0])].apply(J,he[3]):J=H.length==1&&Jf(H)?J[ee]():J.thru(H)}return function(){var ke=arguments,Oe=ke[0];if(J&&ke.length==1&&Ct(Oe))return J.plant(Oe).value();for(var He=0,et=d?o[He].apply(this,ke):Oe;++He<d;)et=o[He].call(this,et);return et}})}function rc(s,o,d,D,$,H,J,ee,he,ke){var Oe=o&L,He=o&A,et=o&w,lt=o&(y|C),vt=o&pe,kt=et?e:Lu(s);function mt(){for(var Ut=arguments.length,zt=be(Ut),qn=Ut;qn--;)zt[qn]=arguments[qn];if(lt)var wn=ka(mt),Vn=jl(zt,wn);if(D&&(zt=Qp(zt,D,$,lt)),H&&(zt=ed(zt,H,J,lt)),Ut-=Vn,lt&&Ut<ke){var Or=_i(zt,wn);return od(s,o,rc,mt.placeholder,d,zt,Or,ee,he,ke-Ut)}var gi=He?d:this,Qi=et?gi[s]:s;return Ut=zt.length,ee?zt=qm(zt,ee):vt&&Ut>1&&zt.reverse(),Oe&&he<Ut&&(zt.length=he),this&&this!==jr&&this instanceof mt&&(Qi=kt||Lu(Qi)),Qi.apply(gi,zt)}return mt}function ad(s,o){return function(d,D){return ie(d,s,o(D),{})}}function nc(s,o){return function(d,D){var $;if(d===e&&D===e)return o;if(d!==e&&($=d),D!==e){if($===e)return D;typeof d=="string"||typeof D=="string"?(d=Un(d),D=Un(D)):(d=Kp(d),D=Kp(D)),$=s(d,D)}return $}}function Mf(s){return Yi(function(o){return o=mr(o,dn(dt())),Nt(function(d){var D=this;return s(o,function($){return pn($,D,d)})})})}function ic(s,o){o=o===e?" ":Un(o);var d=o.length;if(d<2)return d?Tf(o,s):o;var D=Tf(o,Ea(s/hs(o)));return fs(o)?Cs(Nn(D),0,s).join(""):D.slice(0,s)}function _m(s,o,d,D){var $=o&A,H=Lu(s);function J(){for(var ee=-1,he=arguments.length,ke=-1,Oe=D.length,He=be(Oe+he),et=this&&this!==jr&&this instanceof J?H:s;++ke<Oe;)He[ke]=D[ke];for(;he--;)He[ke++]=arguments[++ee];return pn(et,$?d:this,He)}return J}function ud(s){return function(o,d,D){return D&&typeof D!="number"&&mn(o,d,D)&&(d=D=e),o=Zi(o),d===e?(d=o,o=0):d=Zi(d),D=D===e?o<d?1:-1:Zi(D),cm(o,d,D,s)}}function sc(s){return function(o,d){return typeof o=="string"&&typeof d=="string"||(o=si(o),d=si(d)),s(o,d)}}function od(s,o,d,D,$,H,J,ee,he,ke){var Oe=o&y,He=Oe?J:e,et=Oe?e:J,lt=Oe?H:e,vt=Oe?e:H;o|=Oe?x:N,o&=~(Oe?N:x),o&S||(o&=~(A|w));var kt=[s,o,$,lt,He,vt,et,ee,he,ke],mt=d.apply(e,kt);return Jf(s)&&Ed(mt,kt),mt.placeholder=D,Ad(mt,s,o)}function qf(s){var o=xr[s];return function(d,D){if(d=si(d),D=D==null?0:qr($t(D),292),D&&vs(d)){var $=(rr(d)+"e").split("e"),H=o($[0]+"e"+(+$[1]+D));return $=(rr(H)+"e").split("e"),+($[0]+"e"+(+$[1]-D))}return o(d)}}var Dm=Vi&&1/da(new Vi([,-0]))[1]==z?function(s){return new Vi(s)}:fh;function cd(s){return function(o){var d=on(o);return d==yt?_u(o):d==W?Gl(o):Hl(o,s(o))}}function Wi(s,o,d,D,$,H,J,ee){var he=o&w;if(!he&&typeof s!="function")throw new Sn(a);var ke=D?D.length:0;if(ke||(o&=~(x|N),D=$=e),J=J===e?J:Ir($t(J),0),ee=ee===e?ee:$t(ee),ke-=$?$.length:0,o&N){var Oe=D,He=$;D=$=e}var et=he?e:zf(s),lt=[s,o,d,D,$,Oe,He,H,J,ee];if(et&&jm(lt,et),s=lt[0],o=lt[1],d=lt[2],D=lt[3],$=lt[4],ee=lt[9]=lt[9]===e?he?0:s.length:Ir(lt[9]-ke,0),!ee&&o&(y|C)&&(o&=~(y|C)),!o||o==A)var vt=ym(s,o,d);else o==y||o==C?vt=Sm(s,o,ee):(o==x||o==(A|x))&&!$.length?vt=_m(s,o,d,D):vt=rc.apply(e,lt);var kt=et?qp:Ed;return Ad(kt(vt,lt),s,o)}function ld(s,o,d,D){return s===e||di(s,ps[d])&&!er.call(D,d)?o:s}function fd(s,o,d,D,$,H){return Fr(s)&&Fr(o)&&(H.set(o,s),Zo(s,o,e,fd,H),H.delete(o)),s}function Fm(s){return Uu(s)?e:s}function hd(s,o,d,D,$,H){var J=d&v,ee=s.length,he=o.length;if(ee!=he&&!(J&&he>ee))return!1;var ke=H.get(s),Oe=H.get(o);if(ke&&Oe)return ke==o&&Oe==s;var He=-1,et=!0,lt=d&g?new sn:e;for(H.set(s,o),H.set(o,s);++He<ee;){var vt=s[He],kt=o[He];if(D)var mt=J?D(kt,vt,He,o,s,H):D(vt,kt,He,s,o,H);if(mt!==e){if(mt)continue;et=!1;break}if(lt){if(!wu(o,function(Ut,zt){if(!Os(lt,zt)&&(vt===Ut||$(vt,Ut,d,D,H)))return lt.push(zt)})){et=!1;break}}else if(!(vt===kt||$(vt,kt,d,D,H))){et=!1;break}}return H.delete(s),H.delete(o),et}function Cm(s,o,d,D,$,H,J){switch(d){case re:if(s.byteLength!=o.byteLength||s.byteOffset!=o.byteOffset)return!1;s=s.buffer,o=o.buffer;case X:return!(s.byteLength!=o.byteLength||!H(new rn(s),new rn(o)));case Ar:case lr:case xe:return di(+s,+o);case _r:return s.name==o.name&&s.message==o.message;case de:case P:return s==o+"";case yt:var ee=_u;case W:var he=D&v;if(ee||(ee=da),s.size!=o.size&&!he)return!1;var ke=J.get(s);if(ke)return ke==o;D|=g,J.set(s,o);var Oe=hd(ee(s),ee(o),D,$,H,J);return J.delete(s),Oe;case U:if(ws)return ws.call(s)==ws.call(o)}return!1}function Im(s,o,d,D,$,H){var J=d&v,ee=Vf(s),he=ee.length,ke=Vf(o),Oe=ke.length;if(he!=Oe&&!J)return!1;for(var He=he;He--;){var et=ee[He];if(!(J?et in o:er.call(o,et)))return!1}var lt=H.get(s),vt=H.get(o);if(lt&&vt)return lt==o&&vt==s;var kt=!0;H.set(s,o),H.set(o,s);for(var mt=J;++He<he;){et=ee[He];var Ut=s[et],zt=o[et];if(D)var qn=J?D(zt,Ut,et,o,s,H):D(Ut,zt,et,s,o,H);if(!(qn===e?Ut===zt||$(Ut,zt,d,D,H):qn)){kt=!1;break}mt||(mt=et=="constructor")}if(kt&&!mt){var wn=s.constructor,Vn=o.constructor;wn!=Vn&&"constructor"in s&&"constructor"in o&&!(typeof wn=="function"&&wn instanceof wn&&typeof Vn=="function"&&Vn instanceof Vn)&&(kt=!1)}return H.delete(s),H.delete(o),kt}function Yi(s){return Zf(wd(s,e,Cd),s+"")}function Vf(s){return Tu(s,Jr,Wf)}function Kf(s){return Tu(s,Cn,pd)}var zf=Sa?function(s){return Sa.get(s)}:fh;function ac(s){for(var o=s.name+"",d=Ki[o],D=er.call(Ki,o)?d.length:0;D--;){var $=d[D],H=$.func;if(H==null||H==s)return $.name}return o}function ka(s){var o=er.call(O,"placeholder")?O:s;return o.placeholder}function dt(){var s=O.iteratee||ch;return s=s===ch?Tp:s,arguments.length?s(arguments[0],arguments[1]):s}function uc(s,o){var d=s.__data__;return Om(o)?d[typeof o=="string"?"string":"hash"]:d.map}function Gf(s){for(var o=Jr(s),d=o.length;d--;){var D=o[d],$=s[D];o[d]=[D,$,vd($)]}return o}function qs(s,o){var d=Vl(s,o);return xp(d)?d:e}function Pm(s){var o=er.call(s,gs),d=s[gs];try{s[gs]=e;var D=!0}catch{}var $=wa.call(s);return D&&(o?s[gs]=d:delete s[gs]),$}var Wf=Ln?function(s){return s==null?[]:(s=ar(s),yi(Ln(s),function(o){return ko.call(s,o)}))}:hh,pd=Ln?function(s){for(var o=[];s;)Si(o,Wf(s)),s=ge(s);return o}:hh,on=Kr;(ya&&on(new ya(new ArrayBuffer(1)))!=re||Ls&&on(new Ls)!=yt||Cu&&on(Cu.resolve())!=ye||Vi&&on(new Vi)!=W||ms&&on(new ms)!=q)&&(on=function(s){var o=Kr(s),d=o==ve?s.constructor:e,D=d?Vs(d):"";if(D)switch(D){case No:return re;case _a:return yt;case ff:return ye;case hf:return W;case pf:return q}return o});function Bm(s,o,d){for(var D=-1,$=d.length;++D<$;){var H=d[D],J=H.size;switch(H.type){case"drop":s+=J;break;case"dropRight":o-=J;break;case"take":o=qr(o,s+J);break;case"takeRight":s=Ir(s,o-J);break}}return{start:s,end:o}}function $m(s){var o=s.match(Ve);return o?o[1].split(ze):[]}function dd(s,o,d){o=Fs(o,s);for(var D=-1,$=o.length,H=!1;++D<$;){var J=Pi(o[D]);if(!(H=s!=null&&d(s,J)))break;s=s[J]}return H||++D!=$?H:($=s==null?0:s.length,!!$&&dc($)&&Ji(J,$)&&(Ct(s)||Ks(s)))}function Rm(s){var o=s.length,d=new s.constructor(o);return o&&typeof s[0]=="string"&&er.call(s,"index")&&(d.index=s.index,d.input=s.input),d}function gd(s){return typeof s.constructor=="function"&&!Hu(s)?bs(ge(s)):{}}function km(s,o,d){var D=s.constructor;switch(o){case X:return Uf(s);case Ar:case lr:return new D(+s);case re:return vm(s,d);case Se:case ue:case Ee:case Ne:case Ae:case Z:case Ie:case Pe:case je:return Xp(s,d);case yt:return new D;case xe:case P:return new D(s);case de:return mm(s);case W:return new D;case U:return wm(s)}}function xm(s,o){var d=o.length;if(!d)return s;var D=d-1;return o[D]=(d>1?"& ":"")+o[D],o=o.join(d>2?", ":" "),s.replace(fe,`{
/* [wrapped with `+o+`] */
`)}function Tm(s){return Ct(s)||Ks(s)||!!(uf&&s&&s[uf])}function Ji(s,o){var d=typeof s;return o=o??te,!!o&&(d=="number"||d!="symbol"&&tt.test(s))&&s>-1&&s%1==0&&s<o}function mn(s,o,d){if(!Fr(d))return!1;var D=typeof o;return(D=="number"?Fn(d)&&Ji(o,d.length):D=="string"&&o in d)?di(d[o],s):!1}function Yf(s,o){if(Ct(s))return!1;var d=typeof s;return d=="number"||d=="symbol"||d=="boolean"||s==null||Mn(s)?!0:Yr.test(s)||!gr.test(s)||o!=null&&s in ar(o)}function Om(s){var o=typeof s;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?s!=="__proto__":s===null}function Jf(s){var o=ac(s),d=O[o];if(typeof d!="function"||!(o in Ot.prototype))return!1;if(s===d)return!0;var D=zf(d);return!!D&&s===D[0]}function Nm(s){return!!Ro&&Ro in s}var Lm=va?Xi:ph;function Hu(s){var o=s&&s.constructor,d=typeof o=="function"&&o.prototype||ps;return s===d}function vd(s){return s===s&&!Fr(s)}function md(s,o){return function(d){return d==null?!1:d[s]===o&&(o!==e||s in ar(d))}}function Hm(s){var o=hc(s,function(D){return d.size===c&&d.clear(),D}),d=o.cache;return o}function jm(s,o){var d=s[1],D=o[1],$=d|D,H=$<(A|w|L),J=D==L&&d==y||D==L&&d==ne&&s[7].length<=o[8]||D==(L|ne)&&o[7].length<=o[8]&&d==y;if(!(H||J))return s;D&A&&(s[2]=o[2],$|=d&A?0:S);var ee=o[3];if(ee){var he=s[3];s[3]=he?Qp(he,ee,o[4]):ee,s[4]=he?_i(s[3],l):o[4]}return ee=o[5],ee&&(he=s[5],s[5]=he?ed(he,ee,o[6]):ee,s[6]=he?_i(s[5],l):o[6]),ee=o[7],ee&&(s[7]=ee),D&L&&(s[8]=s[8]==null?o[8]:qr(s[8],o[8])),s[9]==null&&(s[9]=o[9]),s[0]=o[0],s[1]=$,s}function Um(s){var o=[];if(s!=null)for(var d in ar(s))o.push(d);return o}function Mm(s){return wa.call(s)}function wd(s,o,d){return o=Ir(o===e?s.length-1:o,0),function(){for(var D=arguments,$=-1,H=Ir(D.length-o,0),J=be(H);++$<H;)J[$]=D[o+$];$=-1;for(var ee=be(o+1);++$<o;)ee[$]=D[$];return ee[o]=d(J),pn(s,this,ee)}}function bd(s,o){return o.length<2?s:Gi(s,ni(o,0,-1))}function qm(s,o){for(var d=s.length,D=qr(o.length,d),$=Dn(s);D--;){var H=o[D];s[D]=Ji(H,d)?$[H]:e}return s}function Xf(s,o){if(!(o==="constructor"&&typeof s[o]=="function")&&o!="__proto__")return s[o]}var Ed=yd(qp),ju=Dr||function(s,o){return jr.setTimeout(s,o)},Zf=yd(hm);function Ad(s,o,d){var D=o+"";return Zf(s,xm(D,Vm($m(D),d)))}function yd(s){var o=0,d=0;return function(){var D=cf(),$=R-(D-d);if(d=D,$>0){if(++o>=j)return arguments[0]}else o=0;return s.apply(e,arguments)}}function oc(s,o){var d=-1,D=s.length,$=D-1;for(o=o===e?D:o;++d<o;){var H=xf(d,$),J=s[H];s[H]=s[d],s[d]=J}return s.length=o,s}var Sd=Hm(function(s){var o=[];return s.charCodeAt(0)===46&&o.push(""),s.replace(Tt,function(d,D,$,H){o.push($?H.replace(Qe,"$1"):D||d)}),o});function Pi(s){if(typeof s=="string"||Mn(s))return s;var o=s+"";return o=="0"&&1/s==-z?"-0":o}function Vs(s){if(s!=null){try{return ma.call(s)}catch{}try{return s+""}catch{}}return""}function Vm(s,o){return tn(Dt,function(d){var D="_."+d[0];o&d[1]&&!ha(s,D)&&s.push(D)}),s.sort()}function _d(s){if(s instanceof Ot)return s.clone();var o=new _n(s.__wrapped__,s.__chain__);return o.__actions__=Dn(s.__actions__),o.__index__=s.__index__,o.__values__=s.__values__,o}function Km(s,o,d){(d?mn(s,o,d):o===e)?o=1:o=Ir($t(o),0);var D=s==null?0:s.length;if(!D||o<1)return[];for(var $=0,H=0,J=be(Ea(D/o));$<D;)J[H++]=ni(s,$,$+=o);return J}function zm(s){for(var o=-1,d=s==null?0:s.length,D=0,$=[];++o<d;){var H=s[o];H&&($[D++]=H)}return $}function Gm(){var s=arguments.length;if(!s)return[];for(var o=be(s-1),d=arguments[0],D=s;D--;)o[D-1]=arguments[D];return Si(Ct(d)?Dn(d):[d],Vr(o,1))}var Wm=Nt(function(s,o){return Tr(s)?Us(s,Vr(o,1,Tr,!0)):[]}),Ym=Nt(function(s,o){var d=ii(o);return Tr(d)&&(d=e),Tr(s)?Us(s,Vr(o,1,Tr,!0),dt(d,2)):[]}),Jm=Nt(function(s,o){var d=ii(o);return Tr(d)&&(d=e),Tr(s)?Us(s,Vr(o,1,Tr,!0),e,d):[]});function Xm(s,o,d){var D=s==null?0:s.length;return D?(o=d||o===e?1:$t(o),ni(s,o<0?0:o,D)):[]}function Zm(s,o,d){var D=s==null?0:s.length;return D?(o=d||o===e?1:$t(o),o=D-o,ni(s,0,o<0?0:o)):[]}function Qm(s,o){return s&&s.length?ec(s,dt(o,3),!0,!0):[]}function e2(s,o){return s&&s.length?ec(s,dt(o,3),!0):[]}function t2(s,o,d,D){var $=s==null?0:s.length;return $?(d&&typeof d!="number"&&mn(s,o,d)&&(d=0,D=$),If(s,o,d,D)):[]}function Dd(s,o,d){var D=s==null?0:s.length;if(!D)return-1;var $=d==null?0:$t(d);return $<0&&($=Ir(D+$,0)),pa(s,dt(o,3),$)}function Fd(s,o,d){var D=s==null?0:s.length;if(!D)return-1;var $=D-1;return d!==e&&($=$t(d),$=d<0?Ir(D+$,0):qr($,D-1)),pa(s,dt(o,3),$,!0)}function Cd(s){var o=s==null?0:s.length;return o?Vr(s,1):[]}function r2(s){var o=s==null?0:s.length;return o?Vr(s,z):[]}function n2(s,o){var d=s==null?0:s.length;return d?(o=o===e?1:$t(o),Vr(s,o)):[]}function i2(s){for(var o=-1,d=s==null?0:s.length,D={};++o<d;){var $=s[o];D[$[0]]=$[1]}return D}function Id(s){return s&&s.length?s[0]:e}function s2(s,o,d){var D=s==null?0:s.length;if(!D)return-1;var $=d==null?0:$t(d);return $<0&&($=Ir(D+$,0)),fi(s,o,$)}function a2(s){var o=s==null?0:s.length;return o?ni(s,0,-1):[]}var u2=Nt(function(s){var o=mr(s,Hf);return o.length&&o[0]===s[0]?k(o):[]}),o2=Nt(function(s){var o=ii(s),d=mr(s,Hf);return o===ii(d)?o=e:d.pop(),d.length&&d[0]===s[0]?k(d,dt(o,2)):[]}),c2=Nt(function(s){var o=ii(s),d=mr(s,Hf);return o=typeof o=="function"?o:e,o&&d.pop(),d.length&&d[0]===s[0]?k(d,e,o):[]});function l2(s,o){return s==null?"":Be.call(s,o)}function ii(s){var o=s==null?0:s.length;return o?s[o-1]:e}function f2(s,o,d){var D=s==null?0:s.length;if(!D)return-1;var $=D;return d!==e&&($=$t(d),$=$<0?Ir(D+$,0):qr($,D-1)),o===o?Yl(s,o,$):pa(s,_o,$,!0)}function h2(s,o){return s&&s.length?Hp(s,$t(o)):e}var p2=Nt(Pd);function Pd(s,o){return s&&s.length&&o&&o.length?kf(s,o):s}function d2(s,o,d){return s&&s.length&&o&&o.length?kf(s,o,dt(d,2)):s}function g2(s,o,d){return s&&s.length&&o&&o.length?kf(s,o,e,d):s}var v2=Yi(function(s,o){var d=s==null?0:s.length,D=ys(s,o);return Mp(s,mr(o,function($){return Ji($,d)?+$:$}).sort(Zp)),D});function m2(s,o){var d=[];if(!(s&&s.length))return d;var D=-1,$=[],H=s.length;for(o=dt(o,3);++D<H;){var J=s[D];o(J,D,s)&&(d.push(J),$.push(D))}return Mp(s,$),d}function Qf(s){return s==null?s:Oo.call(s)}function w2(s,o,d){var D=s==null?0:s.length;return D?(d&&typeof d!="number"&&mn(s,o,d)?(o=0,d=D):(o=o==null?0:$t(o),d=d===e?D:$t(d)),ni(s,o,d)):[]}function b2(s,o){return Qo(s,o)}function E2(s,o,d){return Of(s,o,dt(d,2))}function A2(s,o){var d=s==null?0:s.length;if(d){var D=Qo(s,o);if(D<d&&di(s[D],o))return D}return-1}function y2(s,o){return Qo(s,o,!0)}function S2(s,o,d){return Of(s,o,dt(d,2),!0)}function _2(s,o){var d=s==null?0:s.length;if(d){var D=Qo(s,o,!0)-1;if(di(s[D],o))return D}return-1}function D2(s){return s&&s.length?Vp(s):[]}function F2(s,o){return s&&s.length?Vp(s,dt(o,2)):[]}function C2(s){var o=s==null?0:s.length;return o?ni(s,1,o):[]}function I2(s,o,d){return s&&s.length?(o=d||o===e?1:$t(o),ni(s,0,o<0?0:o)):[]}function P2(s,o,d){var D=s==null?0:s.length;return D?(o=d||o===e?1:$t(o),o=D-o,ni(s,o<0?0:o,D)):[]}function B2(s,o){return s&&s.length?ec(s,dt(o,3),!1,!0):[]}function $2(s,o){return s&&s.length?ec(s,dt(o,3)):[]}var R2=Nt(function(s){return Ds(Vr(s,1,Tr,!0))}),k2=Nt(function(s){var o=ii(s);return Tr(o)&&(o=e),Ds(Vr(s,1,Tr,!0),dt(o,2))}),x2=Nt(function(s){var o=ii(s);return o=typeof o=="function"?o:e,Ds(Vr(s,1,Tr,!0),e,o)});function T2(s){return s&&s.length?Ds(s):[]}function O2(s,o){return s&&s.length?Ds(s,dt(o,2)):[]}function N2(s,o){return o=typeof o=="function"?o:e,s&&s.length?Ds(s,e,o):[]}function eh(s){if(!(s&&s.length))return[];var o=0;return s=yi(s,function(d){if(Tr(d))return o=Ir(d.length,o),!0}),yu(o,function(d){return mr(s,bu(d))})}function Bd(s,o){if(!(s&&s.length))return[];var d=eh(s);return o==null?d:mr(d,function(D){return pn(o,e,D)})}var L2=Nt(function(s,o){return Tr(s)?Us(s,o):[]}),H2=Nt(function(s){return Lf(yi(s,Tr))}),j2=Nt(function(s){var o=ii(s);return Tr(o)&&(o=e),Lf(yi(s,Tr),dt(o,2))}),U2=Nt(function(s){var o=ii(s);return o=typeof o=="function"?o:e,Lf(yi(s,Tr),e,o)}),M2=Nt(eh);function q2(s,o){return Wp(s||[],o||[],Fi)}function V2(s,o){return Wp(s||[],o||[],Nu)}var K2=Nt(function(s){var o=s.length,d=o>1?s[o-1]:e;return d=typeof d=="function"?(s.pop(),d):e,Bd(s,d)});function $d(s){var o=O(s);return o.__chain__=!0,o}function z2(s,o){return o(s),s}function cc(s,o){return o(s)}var G2=Yi(function(s){var o=s.length,d=o?s[0]:0,D=this.__wrapped__,$=function(H){return ys(H,s)};return o>1||this.__actions__.length||!(D instanceof Ot)||!Ji(d)?this.thru($):(D=D.slice(d,+d+(o?1:0)),D.__actions__.push({func:cc,args:[$],thisArg:e}),new _n(D,this.__chain__).thru(function(H){return o&&!H.length&&H.push(e),H}))});function W2(){return $d(this)}function Y2(){return new _n(this.value(),this.__chain__)}function J2(){this.__values__===e&&(this.__values__=Kd(this.value()));var s=this.__index__>=this.__values__.length,o=s?e:this.__values__[this.__index__++];return{done:s,value:o}}function X2(){return this}function Z2(s){for(var o,d=this;d instanceof Es;){var D=_d(d);D.__index__=0,D.__values__=e,o?$.__wrapped__=D:o=D;var $=D;d=d.__wrapped__}return $.__wrapped__=s,o}function Q2(){var s=this.__wrapped__;if(s instanceof Ot){var o=s;return this.__actions__.length&&(o=new Ot(this)),o=o.reverse(),o.__actions__.push({func:cc,args:[Qf],thisArg:e}),new _n(o,this.__chain__)}return this.thru(Qf)}function ew(){return Gp(this.__wrapped__,this.__actions__)}var tw=tc(function(s,o,d){er.call(s,d)?++s[d]:ti(s,d,1)});function rw(s,o,d){var D=Ct(s)?yo:Pa;return d&&mn(s,o,d)&&(o=e),D(s,dt(o,3))}function nw(s,o){var d=Ct(s)?yi:Ss;return d(s,dt(o,3))}var iw=id(Dd),sw=id(Fd);function aw(s,o){return Vr(lc(s,o),1)}function uw(s,o){return Vr(lc(s,o),z)}function ow(s,o,d){return d=d===e?1:$t(d),Vr(lc(s,o),d)}function Rd(s,o){var d=Ct(s)?tn:Ci;return d(s,dt(o,3))}function kd(s,o){var d=Ct(s)?Rl:ku;return d(s,dt(o,3))}var cw=tc(function(s,o,d){er.call(s,d)?s[d].push(o):ti(s,d,[o])});function lw(s,o,d,D){s=Fn(s)?s:Ta(s),d=d&&!D?$t(d):0;var $=s.length;return d<0&&(d=Ir($+d,0)),gc(s)?d<=$&&s.indexOf(o,d)>-1:!!$&&fi(s,o,d)>-1}var fw=Nt(function(s,o,d){var D=-1,$=typeof o=="function",H=Fn(s)?be(s.length):[];return Ci(s,function(J){H[++D]=$?pn(o,J,d):ce(J,o,d)}),H}),hw=tc(function(s,o,d){ti(s,d,o)});function lc(s,o){var d=Ct(s)?mr:Op;return d(s,dt(o,3))}function pw(s,o,d,D){return s==null?[]:(Ct(o)||(o=o==null?[]:[o]),d=D?e:d,Ct(d)||(d=d==null?[]:[d]),jp(s,o,d))}var dw=tc(function(s,o,d){s[d?0:1].push(o)},function(){return[[],[]]});function gw(s,o,d){var D=Ct(s)?mu:Fo,$=arguments.length<3;return D(s,dt(o,4),d,$,Ci)}function vw(s,o,d){var D=Ct(s)?kl:Fo,$=arguments.length<3;return D(s,dt(o,4),d,$,ku)}function mw(s,o){var d=Ct(s)?yi:Ss;return d(s,pc(dt(o,3)))}function ww(s){var o=Ct(s)?Go:lm;return o(s)}function bw(s,o,d){(d?mn(s,o,d):o===e)?o=1:o=$t(o);var D=Ct(s)?_f:fm;return D(s,o)}function Ew(s){var o=Ct(s)?Df:pm;return o(s)}function Aw(s){if(s==null)return 0;if(Fn(s))return gc(s)?hs(s):s.length;var o=on(s);return o==yt||o==W?s.size:$f(s).length}function yw(s,o,d){var D=Ct(s)?wu:dm;return d&&mn(s,o,d)&&(o=e),D(s,dt(o,3))}var Sw=Nt(function(s,o){if(s==null)return[];var d=o.length;return d>1&&mn(s,o[0],o[1])?o=[]:d>2&&mn(o[0],o[1],o[2])&&(o=[o[0]]),jp(s,Vr(o,1),[])}),fc=Ft||function(){return jr.Date.now()};function _w(s,o){if(typeof o!="function")throw new Sn(a);return s=$t(s),function(){if(--s<1)return o.apply(this,arguments)}}function xd(s,o,d){return o=d?e:o,o=s&&o==null?s.length:o,Wi(s,L,e,e,e,e,o)}function Td(s,o){var d;if(typeof o!="function")throw new Sn(a);return s=$t(s),function(){return--s>0&&(d=o.apply(this,arguments)),s<=1&&(o=e),d}}var th=Nt(function(s,o,d){var D=A;if(d.length){var $=_i(d,ka(th));D|=x}return Wi(s,D,o,d,$)}),Od=Nt(function(s,o,d){var D=A|w;if(d.length){var $=_i(d,ka(Od));D|=x}return Wi(o,D,s,d,$)});function Nd(s,o,d){o=d?e:o;var D=Wi(s,y,e,e,e,e,e,o);return D.placeholder=Nd.placeholder,D}function Ld(s,o,d){o=d?e:o;var D=Wi(s,C,e,e,e,e,e,o);return D.placeholder=Ld.placeholder,D}function Hd(s,o,d){var D,$,H,J,ee,he,ke=0,Oe=!1,He=!1,et=!0;if(typeof s!="function")throw new Sn(a);o=si(o)||0,Fr(d)&&(Oe=!!d.leading,He="maxWait"in d,H=He?Ir(si(d.maxWait)||0,o):H,et="trailing"in d?!!d.trailing:et);function lt(Or){var gi=D,Qi=$;return D=$=e,ke=Or,J=s.apply(Qi,gi),J}function vt(Or){return ke=Or,ee=ju(Ut,o),Oe?lt(Or):J}function kt(Or){var gi=Or-he,Qi=Or-ke,i0=o-gi;return He?qr(i0,H-Qi):i0}function mt(Or){var gi=Or-he,Qi=Or-ke;return he===e||gi>=o||gi<0||He&&Qi>=H}function Ut(){var Or=fc();if(mt(Or))return zt(Or);ee=ju(Ut,kt(Or))}function zt(Or){return ee=e,et&&D?lt(Or):(D=$=e,J)}function qn(){ee!==e&&Yp(ee),ke=0,D=he=$=ee=e}function wn(){return ee===e?J:zt(fc())}function Vn(){var Or=fc(),gi=mt(Or);if(D=arguments,$=this,he=Or,gi){if(ee===e)return vt(he);if(He)return Yp(ee),ee=ju(Ut,o),lt(he)}return ee===e&&(ee=ju(Ut,o)),J}return Vn.cancel=qn,Vn.flush=wn,Vn}var Dw=Nt(function(s,o){return Jo(s,1,o)}),Fw=Nt(function(s,o,d){return Jo(s,si(o)||0,d)});function Cw(s){return Wi(s,pe)}function hc(s,o){if(typeof s!="function"||o!=null&&typeof o!="function")throw new Sn(a);var d=function(){var D=arguments,$=o?o.apply(this,D):D[0],H=d.cache;if(H.has($))return H.get($);var J=s.apply(this,D);return d.cache=H.set($,J)||H,J};return d.cache=new(hc.Cache||vn),d}hc.Cache=vn;function pc(s){if(typeof s!="function")throw new Sn(a);return function(){var o=arguments;switch(o.length){case 0:return!s.call(this);case 1:return!s.call(this,o[0]);case 2:return!s.call(this,o[0],o[1]);case 3:return!s.call(this,o[0],o[1],o[2])}return!s.apply(this,o)}}function Iw(s){return Td(2,s)}var Pw=gm(function(s,o){o=o.length==1&&Ct(o[0])?mr(o[0],dn(dt())):mr(Vr(o,1),dn(dt()));var d=o.length;return Nt(function(D){for(var $=-1,H=qr(D.length,d);++$<H;)D[$]=o[$].call(this,D[$]);return pn(s,this,D)})}),rh=Nt(function(s,o){var d=_i(o,ka(rh));return Wi(s,x,e,o,d)}),jd=Nt(function(s,o){var d=_i(o,ka(jd));return Wi(s,N,e,o,d)}),Bw=Yi(function(s,o){return Wi(s,ne,e,e,e,o)});function $w(s,o){if(typeof s!="function")throw new Sn(a);return o=o===e?o:$t(o),Nt(s,o)}function Rw(s,o){if(typeof s!="function")throw new Sn(a);return o=o==null?0:Ir($t(o),0),Nt(function(d){var D=d[o],$=Cs(d,0,o);return D&&Si($,D),pn(s,this,$)})}function kw(s,o,d){var D=!0,$=!0;if(typeof s!="function")throw new Sn(a);return Fr(d)&&(D="leading"in d?!!d.leading:D,$="trailing"in d?!!d.trailing:$),Hd(s,o,{leading:D,maxWait:o,trailing:$})}function xw(s){return xd(s,1)}function Tw(s,o){return rh(jf(o),s)}function Ow(){if(!arguments.length)return[];var s=arguments[0];return Ct(s)?s:[s]}function Nw(s){return an(s,b)}function Lw(s,o){return o=typeof o=="function"?o:e,an(s,b,o)}function Hw(s){return an(s,m|b)}function jw(s,o){return o=typeof o=="function"?o:e,an(s,m|b,o)}function Uw(s,o){return o==null||Ru(s,o,Jr(o))}function di(s,o){return s===o||s!==s&&o!==o}var Mw=sc(Ba),qw=sc(function(s,o){return s>=o}),Ks=it((function(){return arguments})())?it:function(s){return Pr(s)&&er.call(s,"callee")&&!ko.call(s,"callee")},Ct=be.isArray,Vw=vo?dn(vo):wt;function Fn(s){return s!=null&&dc(s.length)&&!Xi(s)}function Tr(s){return Pr(s)&&Fn(s)}function Kw(s){return s===!0||s===!1||Pr(s)&&Kr(s)==Ar}var Is=xo||ph,zw=mo?dn(mo):un;function Gw(s){return Pr(s)&&s.nodeType===1&&!Uu(s)}function Ww(s){if(s==null)return!0;if(Fn(s)&&(Ct(s)||typeof s=="string"||typeof s.splice=="function"||Is(s)||xa(s)||Ks(s)))return!s.length;var o=on(s);if(o==yt||o==W)return!s.size;if(Hu(s))return!$f(s).length;for(var d in s)if(er.call(s,d))return!1;return!0}function Yw(s,o){return ri(s,o)}function Jw(s,o,d){d=typeof d=="function"?d:e;var D=d?d(s,o):e;return D===e?ri(s,o,e,d):!!D}function nh(s){if(!Pr(s))return!1;var o=Kr(s);return o==_r||o==Nr||typeof s.message=="string"&&typeof s.name=="string"&&!Uu(s)}function Xw(s){return typeof s=="number"&&vs(s)}function Xi(s){if(!Fr(s))return!1;var o=Kr(s);return o==xt||o==fr||o==hn||o==Y}function Ud(s){return typeof s=="number"&&s==$t(s)}function dc(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=te}function Fr(s){var o=typeof s;return s!=null&&(o=="object"||o=="function")}function Pr(s){return s!=null&&typeof s=="object"}var Md=wo?dn(wo):Pf;function Zw(s,o){return s===o||Bf(s,o,Gf(o))}function Qw(s,o,d){return d=typeof d=="function"?d:e,Bf(s,o,Gf(o),d)}function eb(s){return qd(s)&&s!=+s}function tb(s){if(Lm(s))throw new St(n);return xp(s)}function rb(s){return s===null}function nb(s){return s==null}function qd(s){return typeof s=="number"||Pr(s)&&Kr(s)==xe}function Uu(s){if(!Pr(s)||Kr(s)!=ve)return!1;var o=ge(s);if(o===null)return!0;var d=er.call(o,"constructor")&&o.constructor;return typeof d=="function"&&d instanceof d&&ma.call(d)==sf}var ih=bo?dn(bo):rm;function ib(s){return Ud(s)&&s>=-te&&s<=te}var Vd=Eo?dn(Eo):nm;function gc(s){return typeof s=="string"||!Ct(s)&&Pr(s)&&Kr(s)==P}function Mn(s){return typeof s=="symbol"||Pr(s)&&Kr(s)==U}var xa=Ao?dn(Ao):im;function sb(s){return s===e}function ab(s){return Pr(s)&&on(s)==q}function ub(s){return Pr(s)&&Kr(s)==G}var ob=sc(Rf),cb=sc(function(s,o){return s<=o});function Kd(s){if(!s)return[];if(Fn(s))return gc(s)?Nn(s):Dn(s);if(Bt&&s[Bt])return zl(s[Bt]());var o=on(s),d=o==yt?_u:o==W?da:Ta;return d(s)}function Zi(s){if(!s)return s===0?s:0;if(s=si(s),s===z||s===-z){var o=s<0?-1:1;return o*me}return s===s?s:0}function $t(s){var o=Zi(s),d=o%1;return o===o?d?o-d:o:0}function zd(s){return s?pi($t(s),0,st):0}function si(s){if(typeof s=="number")return s;if(Mn(s))return at;if(Fr(s)){var o=typeof s.valueOf=="function"?s.valueOf():s;s=Fr(o)?o+"":o}if(typeof s!="string")return s===0?s:+s;s=Co(s);var d=qe.test(s);return d||Kt.test(s)?Pl(s.slice(2),d?2:8):ht.test(s)?at:+s}function Gd(s){return Ii(s,Cn(s))}function lb(s){return s?pi($t(s),-te,te):s===0?s:0}function rr(s){return s==null?"":Un(s)}var fb=$a(function(s,o){if(Hu(o)||Fn(o)){Ii(o,Jr(o),s);return}for(var d in o)er.call(o,d)&&Fi(s,d,o[d])}),Wd=$a(function(s,o){Ii(o,Cn(o),s)}),vc=$a(function(s,o,d,D){Ii(o,Cn(o),s,D)}),hb=$a(function(s,o,d,D){Ii(o,Jr(o),s,D)}),pb=Yi(ys);function db(s,o){var d=bs(s);return o==null?d:Wo(d,o)}var gb=Nt(function(s,o){s=ar(s);var d=-1,D=o.length,$=D>2?o[2]:e;for($&&mn(o[0],o[1],$)&&(D=1);++d<D;)for(var H=o[d],J=Cn(H),ee=-1,he=J.length;++ee<he;){var ke=J[ee],Oe=s[ke];(Oe===e||di(Oe,ps[ke])&&!er.call(s,ke))&&(s[ke]=H[ke])}return s}),vb=Nt(function(s){return s.push(e,fd),pn(Yd,e,s)});function mb(s,o){return So(s,dt(o,3),ot)}function wb(s,o){return So(s,dt(o,3),xu)}function bb(s,o){return s==null?s:Ms(s,dt(o,3),Cn)}function Eb(s,o){return s==null?s:Xo(s,dt(o,3),Cn)}function Ab(s,o){return s&&ot(s,dt(o,3))}function yb(s,o){return s&&xu(s,dt(o,3))}function Sb(s){return s==null?[]:_s(s,Jr(s))}function _b(s){return s==null?[]:_s(s,Cn(s))}function sh(s,o,d){var D=s==null?e:Gi(s,o);return D===e?d:D}function Db(s,o){return s!=null&&dd(s,o,h)}function ah(s,o){return s!=null&&dd(s,o,F)}var Fb=ad(function(s,o,d){o!=null&&typeof o.toString!="function"&&(o=wa.call(o)),s[o]=d},oh(In)),Cb=ad(function(s,o,d){o!=null&&typeof o.toString!="function"&&(o=wa.call(o)),er.call(s,o)?s[o].push(d):s[o]=[d]},dt),Ib=Nt(ce);function Jr(s){return Fn(s)?zo(s):$f(s)}function Cn(s){return Fn(s)?zo(s,!0):sm(s)}function Pb(s,o){var d={};return o=dt(o,3),ot(s,function(D,$,H){ti(d,o(D,$,H),D)}),d}function Bb(s,o){var d={};return o=dt(o,3),ot(s,function(D,$,H){ti(d,$,o(D,$,H))}),d}var $b=$a(function(s,o,d){Zo(s,o,d)}),Yd=$a(function(s,o,d,D){Zo(s,o,d,D)}),Rb=Yi(function(s,o){var d={};if(s==null)return d;var D=!1;o=mr(o,function(H){return H=Fs(H,s),D||(D=H.length>1),H}),Ii(s,Kf(s),d),D&&(d=an(d,m|E|b,Fm));for(var $=o.length;$--;)Nf(d,o[$]);return d});function kb(s,o){return Jd(s,pc(dt(o)))}var xb=Yi(function(s,o){return s==null?{}:um(s,o)});function Jd(s,o){if(s==null)return{};var d=mr(Kf(s),function(D){return[D]});return o=dt(o),Up(s,d,function(D,$){return o(D,$[0])})}function Tb(s,o,d){o=Fs(o,s);var D=-1,$=o.length;for($||($=1,s=e);++D<$;){var H=s==null?e:s[Pi(o[D])];H===e&&(D=$,H=d),s=Xi(H)?H.call(s):H}return s}function Ob(s,o,d){return s==null?s:Nu(s,o,d)}function Nb(s,o,d,D){return D=typeof D=="function"?D:e,s==null?s:Nu(s,o,d,D)}var Xd=cd(Jr),Zd=cd(Cn);function Lb(s,o,d){var D=Ct(s),$=D||Is(s)||xa(s);if(o=dt(o,4),d==null){var H=s&&s.constructor;$?d=D?new H:[]:Fr(s)?d=Xi(H)?bs(ge(s)):{}:d={}}return($?tn:ot)(s,function(J,ee,he){return o(d,J,ee,he)}),d}function Hb(s,o){return s==null?!0:Nf(s,o)}function jb(s,o,d){return s==null?s:zp(s,o,jf(d))}function Ub(s,o,d,D){return D=typeof D=="function"?D:e,s==null?s:zp(s,o,jf(d),D)}function Ta(s){return s==null?[]:Su(s,Jr(s))}function Mb(s){return s==null?[]:Su(s,Cn(s))}function qb(s,o,d){return d===e&&(d=o,o=e),d!==e&&(d=si(d),d=d===d?d:0),o!==e&&(o=si(o),o=o===o?o:0),pi(si(s),o,d)}function Vb(s,o,d){return o=Zi(o),d===e?(d=o,o=0):d=Zi(d),s=si(s),T(s,o,d)}function Kb(s,o,d){if(d&&typeof d!="boolean"&&mn(s,o,d)&&(o=d=e),d===e&&(typeof o=="boolean"?(d=o,o=e):typeof s=="boolean"&&(d=s,s=e)),s===e&&o===e?(s=0,o=1):(s=Zi(s),o===e?(o=s,s=0):o=Zi(o)),s>o){var D=s;s=o,o=D}if(d||s%1||o%1){var $=To();return qr(s+$*(o-s+Il("1e-"+(($+"").length-1))),o)}return xf(s,o)}var zb=Ra(function(s,o,d){return o=o.toLowerCase(),s+(d?Qd(o):o)});function Qd(s){return uh(rr(s).toLowerCase())}function e0(s){return s=rr(s),s&&s.replace(Lr,Ul).replace(El,"")}function Gb(s,o,d){s=rr(s),o=Un(o);var D=s.length;d=d===e?D:pi($t(d),0,D);var $=d;return d-=o.length,d>=0&&s.slice(d,$)==o}function Wb(s){return s=rr(s),s&&ut.test(s)?s.replace(We,Ml):s}function Yb(s){return s=rr(s),s&&Re.test(s)?s.replace(se,"\\$&"):s}var Jb=Ra(function(s,o,d){return s+(d?"-":"")+o.toLowerCase()}),Xb=Ra(function(s,o,d){return s+(d?" ":"")+o.toLowerCase()}),Zb=nd("toLowerCase");function Qb(s,o,d){s=rr(s),o=$t(o);var D=o?hs(s):0;if(!o||D>=o)return s;var $=(o-D)/2;return ic(Aa($),d)+s+ic(Ea($),d)}function eE(s,o,d){s=rr(s),o=$t(o);var D=o?hs(s):0;return o&&D<o?s+ic(o-D,d):s}function tE(s,o,d){s=rr(s),o=$t(o);var D=o?hs(s):0;return o&&D<o?ic(o-D,d)+s:s}function rE(s,o,d){return d||o==null?o=0:o&&(o=+o),lf(rr(s).replace(Je,""),o||0)}function nE(s,o,d){return(d?mn(s,o,d):o===e)?o=1:o=$t(o),Tf(rr(s),o)}function iE(){var s=arguments,o=rr(s[0]);return s.length<3?o:o.replace(s[1],s[2])}var sE=Ra(function(s,o,d){return s+(d?"_":"")+o.toLowerCase()});function aE(s,o,d){return d&&typeof d!="number"&&mn(s,o,d)&&(o=d=e),d=d===e?st:d>>>0,d?(s=rr(s),s&&(typeof o=="string"||o!=null&&!ih(o))&&(o=Un(o),!o&&fs(s))?Cs(Nn(s),0,d):s.split(o,d)):[]}var uE=Ra(function(s,o,d){return s+(d?" ":"")+uh(o)});function oE(s,o,d){return s=rr(s),d=d==null?0:pi($t(d),0,s.length),o=Un(o),s.slice(d,d+o.length)==o}function cE(s,o,d){var D=O.templateSettings;d&&mn(s,o,d)&&(o=e),s=rr(s),o=vc({},o,D,ld);var $=vc({},o.imports,D.imports,ld),H=Jr($),J=Su($,H),ee,he,ke=0,Oe=o.interpolate||Le,He="__p += '",et=Du((o.escape||Le).source+"|"+Oe.source+"|"+(Oe===Qr?Mt:Le).source+"|"+(o.evaluate||Le).source+"|$","g"),lt="//# sourceURL="+(er.call(o,"sourceURL")?(o.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Dl+"]")+`
`;s.replace(et,function(mt,Ut,zt,qn,wn,Vn){return zt||(zt=qn),He+=s.slice(ke,Vn).replace(Ui,ql),Ut&&(ee=!0,He+=`' +
__e(`+Ut+`) +
'`),wn&&(he=!0,He+=`';
`+wn+`;
__p += '`),zt&&(He+=`' +
((__t = (`+zt+`)) == null ? '' : __t) +
'`),ke=Vn+mt.length,mt}),He+=`';
`;var vt=er.call(o,"variable")&&o.variable;if(!vt)He=`with (obj) {
`+He+`
}
`;else if(Ze.test(vt))throw new St(u);He=(he?He.replace(oe,""):He).replace(Te,"$1").replace(Ke,"$1;"),He="function("+(vt||"obj")+`) {
`+(vt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ee?", __e = _.escape":"")+(he?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+He+`return __p
}`;var kt=r0(function(){return Jt(H,lt+"return "+He).apply(e,J)});if(kt.source=He,nh(kt))throw kt;return kt}function lE(s){return rr(s).toLowerCase()}function fE(s){return rr(s).toUpperCase()}function hE(s,o,d){if(s=rr(s),s&&(d||o===e))return Co(s);if(!s||!(o=Un(o)))return s;var D=Nn(s),$=Nn(o),H=Io(D,$),J=Po(D,$)+1;return Cs(D,H,J).join("")}function pE(s,o,d){if(s=rr(s),s&&(d||o===e))return s.slice(0,$o(s)+1);if(!s||!(o=Un(o)))return s;var D=Nn(s),$=Po(D,Nn(o))+1;return Cs(D,0,$).join("")}function dE(s,o,d){if(s=rr(s),s&&(d||o===e))return s.replace(Je,"");if(!s||!(o=Un(o)))return s;var D=Nn(s),$=Io(D,Nn(o));return Cs(D,$).join("")}function gE(s,o){var d=I,D=B;if(Fr(o)){var $="separator"in o?o.separator:$;d="length"in o?$t(o.length):d,D="omission"in o?Un(o.omission):D}s=rr(s);var H=s.length;if(fs(s)){var J=Nn(s);H=J.length}if(d>=H)return s;var ee=d-hs(D);if(ee<1)return D;var he=J?Cs(J,0,ee).join(""):s.slice(0,ee);if($===e)return he+D;if(J&&(ee+=he.length-ee),ih($)){if(s.slice(ee).search($)){var ke,Oe=he;for($.global||($=Du($.source,rr(Me.exec($))+"g")),$.lastIndex=0;ke=$.exec(Oe);)var He=ke.index;he=he.slice(0,He===e?ee:He)}}else if(s.indexOf(Un($),ee)!=ee){var et=he.lastIndexOf($);et>-1&&(he=he.slice(0,et))}return he+D}function vE(s){return s=rr(s),s&&Rt.test(s)?s.replace(Xe,Jl):s}var mE=Ra(function(s,o,d){return s+(d?" ":"")+o.toUpperCase()}),uh=nd("toUpperCase");function t0(s,o,d){return s=rr(s),o=d?e:o,o===e?Kl(s)?Ql(s):Ol(s):s.match(o)||[]}var r0=Nt(function(s,o){try{return pn(s,e,o)}catch(d){return nh(d)?d:new St(d)}}),wE=Yi(function(s,o){return tn(o,function(d){d=Pi(d),ti(s,d,th(s[d],s))}),s});function bE(s){var o=s==null?0:s.length,d=dt();return s=o?mr(s,function(D){if(typeof D[1]!="function")throw new Sn(a);return[d(D[0]),D[1]]}):[],Nt(function(D){for(var $=-1;++$<o;){var H=s[$];if(pn(H[0],this,D))return pn(H[1],this,D)}})}function EE(s){return Cf(an(s,m))}function oh(s){return function(){return s}}function AE(s,o){return s==null||s!==s?o:s}var yE=sd(),SE=sd(!0);function In(s){return s}function ch(s){return Tp(typeof s=="function"?s:an(s,m))}function _E(s){return Np(an(s,m))}function DE(s,o){return Lp(s,an(o,m))}var FE=Nt(function(s,o){return function(d){return ce(d,s,o)}}),CE=Nt(function(s,o){return function(d){return ce(s,d,o)}});function lh(s,o,d){var D=Jr(o),$=_s(o,D);d==null&&!(Fr(o)&&($.length||!D.length))&&(d=o,o=s,s=this,$=_s(o,Jr(o)));var H=!(Fr(d)&&"chain"in d)||!!d.chain,J=Xi(s);return tn($,function(ee){var he=o[ee];s[ee]=he,J&&(s.prototype[ee]=function(){var ke=this.__chain__;if(H||ke){var Oe=s(this.__wrapped__),He=Oe.__actions__=Dn(this.__actions__);return He.push({func:he,args:arguments,thisArg:s}),Oe.__chain__=ke,Oe}return he.apply(s,Si([this.value()],arguments))})}),s}function IE(){return jr._===this&&(jr._=af),this}function fh(){}function PE(s){return s=$t(s),Nt(function(o){return Hp(o,s)})}var BE=Mf(mr),$E=Mf(yo),RE=Mf(wu);function n0(s){return Yf(s)?bu(Pi(s)):om(s)}function kE(s){return function(o){return s==null?e:Gi(s,o)}}var xE=ud(),TE=ud(!0);function hh(){return[]}function ph(){return!1}function OE(){return{}}function NE(){return""}function LE(){return!0}function HE(s,o){if(s=$t(s),s<1||s>te)return[];var d=st,D=qr(s,st);o=dt(o),s-=st;for(var $=yu(D,o);++d<s;)o(d);return $}function jE(s){return Ct(s)?mr(s,Pi):Mn(s)?[s]:Dn(Sd(rr(s)))}function UE(s){var o=++nf;return rr(s)+o}var ME=nc(function(s,o){return s+o},0),qE=qf("ceil"),VE=nc(function(s,o){return s/o},1),KE=qf("floor");function zE(s){return s&&s.length?jn(s,In,Ba):e}function GE(s,o){return s&&s.length?jn(s,dt(o,2),Ba):e}function WE(s){return Do(s,In)}function YE(s,o){return Do(s,dt(o,2))}function JE(s){return s&&s.length?jn(s,In,Rf):e}function XE(s,o){return s&&s.length?jn(s,dt(o,2),Rf):e}var ZE=nc(function(s,o){return s*o},1),QE=qf("round"),eA=nc(function(s,o){return s-o},0);function tA(s){return s&&s.length?Au(s,In):0}function rA(s,o){return s&&s.length?Au(s,dt(o,2)):0}return O.after=_w,O.ary=xd,O.assign=fb,O.assignIn=Wd,O.assignInWith=vc,O.assignWith=hb,O.at=pb,O.before=Td,O.bind=th,O.bindAll=wE,O.bindKey=Od,O.castArray=Ow,O.chain=$d,O.chunk=Km,O.compact=zm,O.concat=Gm,O.cond=bE,O.conforms=EE,O.constant=oh,O.countBy=tw,O.create=db,O.curry=Nd,O.curryRight=Ld,O.debounce=Hd,O.defaults=gb,O.defaultsDeep=vb,O.defer=Dw,O.delay=Fw,O.difference=Wm,O.differenceBy=Ym,O.differenceWith=Jm,O.drop=Xm,O.dropRight=Zm,O.dropRightWhile=Qm,O.dropWhile=e2,O.fill=t2,O.filter=nw,O.flatMap=aw,O.flatMapDeep=uw,O.flatMapDepth=ow,O.flatten=Cd,O.flattenDeep=r2,O.flattenDepth=n2,O.flip=Cw,O.flow=yE,O.flowRight=SE,O.fromPairs=i2,O.functions=Sb,O.functionsIn=_b,O.groupBy=cw,O.initial=a2,O.intersection=u2,O.intersectionBy=o2,O.intersectionWith=c2,O.invert=Fb,O.invertBy=Cb,O.invokeMap=fw,O.iteratee=ch,O.keyBy=hw,O.keys=Jr,O.keysIn=Cn,O.map=lc,O.mapKeys=Pb,O.mapValues=Bb,O.matches=_E,O.matchesProperty=DE,O.memoize=hc,O.merge=$b,O.mergeWith=Yd,O.method=FE,O.methodOf=CE,O.mixin=lh,O.negate=pc,O.nthArg=PE,O.omit=Rb,O.omitBy=kb,O.once=Iw,O.orderBy=pw,O.over=BE,O.overArgs=Pw,O.overEvery=$E,O.overSome=RE,O.partial=rh,O.partialRight=jd,O.partition=dw,O.pick=xb,O.pickBy=Jd,O.property=n0,O.propertyOf=kE,O.pull=p2,O.pullAll=Pd,O.pullAllBy=d2,O.pullAllWith=g2,O.pullAt=v2,O.range=xE,O.rangeRight=TE,O.rearg=Bw,O.reject=mw,O.remove=m2,O.rest=$w,O.reverse=Qf,O.sampleSize=bw,O.set=Ob,O.setWith=Nb,O.shuffle=Ew,O.slice=w2,O.sortBy=Sw,O.sortedUniq=D2,O.sortedUniqBy=F2,O.split=aE,O.spread=Rw,O.tail=C2,O.take=I2,O.takeRight=P2,O.takeRightWhile=B2,O.takeWhile=$2,O.tap=z2,O.throttle=kw,O.thru=cc,O.toArray=Kd,O.toPairs=Xd,O.toPairsIn=Zd,O.toPath=jE,O.toPlainObject=Gd,O.transform=Lb,O.unary=xw,O.union=R2,O.unionBy=k2,O.unionWith=x2,O.uniq=T2,O.uniqBy=O2,O.uniqWith=N2,O.unset=Hb,O.unzip=eh,O.unzipWith=Bd,O.update=jb,O.updateWith=Ub,O.values=Ta,O.valuesIn=Mb,O.without=L2,O.words=t0,O.wrap=Tw,O.xor=H2,O.xorBy=j2,O.xorWith=U2,O.zip=M2,O.zipObject=q2,O.zipObjectDeep=V2,O.zipWith=K2,O.entries=Xd,O.entriesIn=Zd,O.extend=Wd,O.extendWith=vc,lh(O,O),O.add=ME,O.attempt=r0,O.camelCase=zb,O.capitalize=Qd,O.ceil=qE,O.clamp=qb,O.clone=Nw,O.cloneDeep=Hw,O.cloneDeepWith=jw,O.cloneWith=Lw,O.conformsTo=Uw,O.deburr=e0,O.defaultTo=AE,O.divide=VE,O.endsWith=Gb,O.eq=di,O.escape=Wb,O.escapeRegExp=Yb,O.every=rw,O.find=iw,O.findIndex=Dd,O.findKey=mb,O.findLast=sw,O.findLastIndex=Fd,O.findLastKey=wb,O.floor=KE,O.forEach=Rd,O.forEachRight=kd,O.forIn=bb,O.forInRight=Eb,O.forOwn=Ab,O.forOwnRight=yb,O.get=sh,O.gt=Mw,O.gte=qw,O.has=Db,O.hasIn=ah,O.head=Id,O.identity=In,O.includes=lw,O.indexOf=s2,O.inRange=Vb,O.invoke=Ib,O.isArguments=Ks,O.isArray=Ct,O.isArrayBuffer=Vw,O.isArrayLike=Fn,O.isArrayLikeObject=Tr,O.isBoolean=Kw,O.isBuffer=Is,O.isDate=zw,O.isElement=Gw,O.isEmpty=Ww,O.isEqual=Yw,O.isEqualWith=Jw,O.isError=nh,O.isFinite=Xw,O.isFunction=Xi,O.isInteger=Ud,O.isLength=dc,O.isMap=Md,O.isMatch=Zw,O.isMatchWith=Qw,O.isNaN=eb,O.isNative=tb,O.isNil=nb,O.isNull=rb,O.isNumber=qd,O.isObject=Fr,O.isObjectLike=Pr,O.isPlainObject=Uu,O.isRegExp=ih,O.isSafeInteger=ib,O.isSet=Vd,O.isString=gc,O.isSymbol=Mn,O.isTypedArray=xa,O.isUndefined=sb,O.isWeakMap=ab,O.isWeakSet=ub,O.join=l2,O.kebabCase=Jb,O.last=ii,O.lastIndexOf=f2,O.lowerCase=Xb,O.lowerFirst=Zb,O.lt=ob,O.lte=cb,O.max=zE,O.maxBy=GE,O.mean=WE,O.meanBy=YE,O.min=JE,O.minBy=XE,O.stubArray=hh,O.stubFalse=ph,O.stubObject=OE,O.stubString=NE,O.stubTrue=LE,O.multiply=ZE,O.nth=h2,O.noConflict=IE,O.noop=fh,O.now=fc,O.pad=Qb,O.padEnd=eE,O.padStart=tE,O.parseInt=rE,O.random=Kb,O.reduce=gw,O.reduceRight=vw,O.repeat=nE,O.replace=iE,O.result=Tb,O.round=QE,O.runInContext=le,O.sample=ww,O.size=Aw,O.snakeCase=sE,O.some=yw,O.sortedIndex=b2,O.sortedIndexBy=E2,O.sortedIndexOf=A2,O.sortedLastIndex=y2,O.sortedLastIndexBy=S2,O.sortedLastIndexOf=_2,O.startCase=uE,O.startsWith=oE,O.subtract=eA,O.sum=tA,O.sumBy=rA,O.template=cE,O.times=HE,O.toFinite=Zi,O.toInteger=$t,O.toLength=zd,O.toLower=lE,O.toNumber=si,O.toSafeInteger=lb,O.toString=rr,O.toUpper=fE,O.trim=hE,O.trimEnd=pE,O.trimStart=dE,O.truncate=gE,O.unescape=vE,O.uniqueId=UE,O.upperCase=mE,O.upperFirst=uh,O.each=Rd,O.eachRight=kd,O.first=Id,lh(O,(function(){var s={};return ot(O,function(o,d){er.call(O.prototype,d)||(s[d]=o)}),s})(),{chain:!1}),O.VERSION=t,tn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){O[s].placeholder=O}),tn(["drop","take"],function(s,o){Ot.prototype[s]=function(d){d=d===e?1:Ir($t(d),0);var D=this.__filtered__&&!o?new Ot(this):this.clone();return D.__filtered__?D.__takeCount__=qr(d,D.__takeCount__):D.__views__.push({size:qr(d,st),type:s+(D.__dir__<0?"Right":"")}),D},Ot.prototype[s+"Right"]=function(d){return this.reverse()[s](d).reverse()}}),tn(["filter","map","takeWhile"],function(s,o){var d=o+1,D=d==M||d==V;Ot.prototype[s]=function($){var H=this.clone();return H.__iteratees__.push({iteratee:dt($,3),type:d}),H.__filtered__=H.__filtered__||D,H}}),tn(["head","last"],function(s,o){var d="take"+(o?"Right":"");Ot.prototype[s]=function(){return this[d](1).value()[0]}}),tn(["initial","tail"],function(s,o){var d="drop"+(o?"":"Right");Ot.prototype[s]=function(){return this.__filtered__?new Ot(this):this[d](1)}}),Ot.prototype.compact=function(){return this.filter(In)},Ot.prototype.find=function(s){return this.filter(s).head()},Ot.prototype.findLast=function(s){return this.reverse().find(s)},Ot.prototype.invokeMap=Nt(function(s,o){return typeof s=="function"?new Ot(this):this.map(function(d){return ce(d,s,o)})}),Ot.prototype.reject=function(s){return this.filter(pc(dt(s)))},Ot.prototype.slice=function(s,o){s=$t(s);var d=this;return d.__filtered__&&(s>0||o<0)?new Ot(d):(s<0?d=d.takeRight(-s):s&&(d=d.drop(s)),o!==e&&(o=$t(o),d=o<0?d.dropRight(-o):d.take(o-s)),d)},Ot.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},Ot.prototype.toArray=function(){return this.take(st)},ot(Ot.prototype,function(s,o){var d=/^(?:filter|find|map|reject)|While$/.test(o),D=/^(?:head|last)$/.test(o),$=O[D?"take"+(o=="last"?"Right":""):o],H=D||/^find/.test(o);$&&(O.prototype[o]=function(){var J=this.__wrapped__,ee=D?[1]:arguments,he=J instanceof Ot,ke=ee[0],Oe=he||Ct(J),He=function(Ut){var zt=$.apply(O,Si([Ut],ee));return D&&et?zt[0]:zt};Oe&&d&&typeof ke=="function"&&ke.length!=1&&(he=Oe=!1);var et=this.__chain__,lt=!!this.__actions__.length,vt=H&&!et,kt=he&&!lt;if(!H&&Oe){J=kt?J:new Ot(this);var mt=s.apply(J,ee);return mt.__actions__.push({func:cc,args:[He],thisArg:e}),new _n(mt,et)}return vt&&kt?s.apply(this,ee):(mt=this.thru(He),vt?D?mt.value()[0]:mt.value():mt)})}),tn(["pop","push","shift","sort","splice","unshift"],function(s){var o=ga[s],d=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",D=/^(?:pop|shift)$/.test(s);O.prototype[s]=function(){var $=arguments;if(D&&!this.__chain__){var H=this.value();return o.apply(Ct(H)?H:[],$)}return this[d](function(J){return o.apply(Ct(J)?J:[],$)})}}),ot(Ot.prototype,function(s,o){var d=O[o];if(d){var D=d.name+"";er.call(Ki,D)||(Ki[D]=[]),Ki[D].push({name:o,func:d})}}),Ki[rc(e,w).name]=[{name:"wrapper",func:e}],Ot.prototype.clone=Iu,Ot.prototype.reverse=df,Ot.prototype.value=Lo,O.prototype.at=G2,O.prototype.chain=W2,O.prototype.commit=Y2,O.prototype.next=J2,O.prototype.plant=Z2,O.prototype.reverse=Q2,O.prototype.toJSON=O.prototype.valueOf=O.prototype.value=ew,O.prototype.first=O.prototype.head,Bt&&(O.prototype[Bt]=X2),O}),Di=ef();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(jr._=Di,define(function(){return Di})):qi?((qi.exports=Di)._=Di,la._=Di):jr._=Di}).call(su)});var co=Et((ol,cl)=>{function Ep(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o6(e){if(Array.isArray(e))return e}function c6(e){if(Array.isArray(e))return Ep(e)}function l6(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hv(e,t,r){return t=oa(t),b6(e,Ap()?Reflect.construct(t,r||[],oa(e).constructor):t.apply(e,r))}function bi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uo(e,t,r){return Ap()?uo=Reflect.construct:uo=function(n,a,u){var i=[null];i.push.apply(i,a);var c=Function.bind.apply(n,i),l=new c;return u&&oo(l,u.prototype),l},uo.apply(null,arguments)}function jv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ei(e,t,r){return t&&jv(e.prototype,t),r&&jv(e,r),e}function f6(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ul(e,t,r){return typeof Reflect<"u"&&Reflect.get?ul=Reflect.get:ul=function(n,a,u){var i=E6(n,a);if(i){var c=Object.getOwnPropertyDescriptor(i,a);return c.get?c.get.call(u||n):c.value}},ul(e,t,r||e)}function oa(e){return oa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},oa(e)}function Uv(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oo(e,t)}function al(e,t){return t!=null&&typeof Symbol<"u"&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function h6(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function p6(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function d6(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],a=!0,u=!1,i,c;try{for(r=r.call(e);!(a=(i=r.next()).done)&&(n.push(i.value),!(t&&n.length===t));a=!0);}catch(l){u=!0,c=l}finally{try{!a&&r.return!=null&&r.return()}finally{if(u)throw c}}return n}}function g6(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v6(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Mv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){f6(e,a,r[a])})}return e}function m6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function w6(e,t){return t=t??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m6(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function b6(e,t){return t&&(Ai(t)==="object"||typeof t=="function")?t:l6(e)}function oo(e,t){return oo=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r},oo(e,t)}function ua(e,t){return o6(e)||d6(e,t)||qv(e,t)||g6()}function E6(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=oa(e),e!==null););return e}function Vt(e){return c6(e)||p6(e)||qv(e)||v6()}function Ai(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}function qv(e,t){if(e){if(typeof e=="string")return Ep(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ep(e,t)}}function ll(e){var t=typeof Map=="function"?new Map:void 0;return ll=function(r){if(r===null||!h6(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(r))return t.get(r);t.set(r,n)}function n(){return uo(r,arguments,oa(this).constructor)}return n.prototype=Object.create(r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),oo(n,r)},ll(e)}function Ap(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ap=function(){return!!e})()}(function(e,t){(typeof ol>"u"?"undefined":Ai(ol))=="object"&&(typeof cl>"u"?"undefined":Ai(cl))<"u"?cl.exports=t():typeof define=="function"&&define.amd?define("peggy",t):e.peggy=t()})((typeof globalThis>"u"?"undefined":Ai(globalThis))<"u"?globalThis:(typeof self>"u"?"undefined":Ai(self))<"u"?self:ol,function(){var e={},t=e,r={exports:e},n=function(xe,$e){return function(){return $e||xe(($e={exports:{}}).exports,$e),$e.exports}},a=n(function(xe,$e){"use strict";var ve=(function(){function ye(Y,de){bi(this,ye),this.source=Y,this.start=de}return Ei(ye,[{key:"toString",value:function(){return String(this.source)}},{key:"offset",value:function(Y){return{line:Y.line+this.start.line-1,column:Y.line===1?Y.column+this.start.column-1:Y.column,offset:Y.offset+this.start.offset}}}],[{key:"offsetStart",value:function(Y){return Y.source&&typeof Y.source.offset=="function"?Y.source.offset(Y.start):Y.start}},{key:"offsetEnd",value:function(Y){return Y.source&&typeof Y.source.offset=="function"?Y.source.offset(Y.end):Y.end}}]),ye})();$e.exports=ve}),u=n(function(xe,$e){"use strict";var ve=a(),ye=(function(Y){Uv(de,Y);function de(W,P,U){bi(this,de);var f;return f=Hv(this,de,[W]),f.name="GrammarError",f.location=P,U===void 0&&(U=[]),f.diagnostics=U,f.stage=null,f.problems=[["error",W,P,U]],f}return Ei(de,[{key:"toString",value:function(){var P=ul(oa(de.prototype),"toString",this).call(this);this.location&&(P+=`
 at `,this.location.source!==void 0&&this.location.source!==null&&(P+="".concat(this.location.source,":")),P+="".concat(this.location.start.line,":").concat(this.location.start.column));var U=!0,f=!1,q=void 0;try{for(var G=this.diagnostics[Symbol.iterator](),X;!(U=(X=G.next()).done);U=!0){var re=X.value;P+=`
 from `,re.location.source!==void 0&&re.location.source!==null&&(P+="".concat(re.location.source,":")),P+="".concat(re.location.start.line,":").concat(re.location.start.column,": ").concat(re.message)}}catch(Se){f=!0,q=Se}finally{try{!U&&G.return!=null&&G.return()}finally{if(f)throw q}}return P}},{key:"format",value:function(W){var P=W.map(function(q){var G=q.source,X=q.text;return{source:G,text:X!=null?String(X).split(/\r\n|\n|\r/g):[]}});function U(q,G){var X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",re="",Se=P.find(function(Ie){var Pe=Ie.source;return Pe===q.source}),ue=q.start,Ee=ve.offsetStart(q);if(Se){var Ne=q.end,Ae=Se.text[ue.line-1],Z=(ue.line===Ne.line?Ne.column:Ae.length+1)-ue.column||1;X&&(re+=`
note: `.concat(X)),re+=`
 --> `.concat(q.source,":").concat(Ee.line,":").concat(Ee.column,`
`).concat("".padEnd(G),` |
`).concat(Ee.line.toString().padStart(G)," | ").concat(Ae,`
`).concat("".padEnd(G)," | ").concat("".padEnd(ue.column-1)).concat("".padEnd(Z,"^"))}else re+=`
 at `.concat(q.source,":").concat(Ee.line,":").concat(Ee.column),X&&(re+=": ".concat(X));return re}function f(q,G,X){var re=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],Se=-1/0;X?Se=re.reduce(function(je,oe){var Te=oe.location;return Math.max(je,ve.offsetStart(Te).line)},X.start.line):Se=Math.max.apply(null,re.map(function(je){return je.location.start.line})),Se=Se.toString().length;var ue="".concat(q,": ").concat(G);X&&(ue+=U(X,Se));var Ee=!0,Ne=!1,Ae=void 0;try{for(var Z=re[Symbol.iterator](),Ie;!(Ee=(Ie=Z.next()).done);Ee=!0){var Pe=Ie.value;ue+=U(Pe.location,Se,Pe.message)}}catch(je){Ne=!0,Ae=je}finally{try{!Ee&&Z.return!=null&&Z.return()}finally{if(Ne)throw Ae}}return ue}return this.problems.filter(function(q){return q[0]!=="info"}).map(function(q){return f.apply(void 0,Vt(q))}).join(`

`)}}]),de})(ll(SyntaxError));$e.exports=ye}),i=n(function(xe,$e){"use strict";var ve={build:function(ye){function Y(f){for(var q=arguments.length,G=new Array(q>1?q-1:0),X=1;X<q;X++)G[X-1]=arguments[X];var re;return(re=ye)[f.type].apply(re,[f].concat(Vt(G)))}function de(){}function W(f){for(var q=arguments.length,G=new Array(q>1?q-1:0),X=1;X<q;X++)G[X-1]=arguments[X];return Y.apply(void 0,[f.expression].concat(Vt(G)))}function P(f){return function(q){for(var G=arguments.length,X=new Array(G>1?G-1:0),re=1;re<G;re++)X[re-1]=arguments[re];q[f].forEach(function(Se){return Y.apply(void 0,[Se].concat(Vt(X)))})}}var U={grammar:function(f){for(var q=arguments.length,G=new Array(q>1?q-1:0),X=1;X<q;X++)G[X-1]=arguments[X];var re=!0,Se=!1,ue=void 0;try{for(var Ee=f.imports[Symbol.iterator](),Ne;!(re=(Ne=Ee.next()).done);re=!0){var Ae=Ne.value;Y.apply(void 0,[Ae].concat(Vt(G)))}}catch(br){Se=!0,ue=br}finally{try{!re&&Ee.return!=null&&Ee.return()}finally{if(Se)throw ue}}var Z=!0,Ie=!1,Pe=void 0;if(f.topLevelInitializer)if(Array.isArray(f.topLevelInitializer))try{for(var je=f.topLevelInitializer[Symbol.iterator](),oe;!(Z=(oe=je.next()).done);Z=!0){var Te=oe.value;Y.apply(void 0,[Te].concat(Vt(G)))}}catch(br){Ie=!0,Pe=br}finally{try{!Z&&je.return!=null&&je.return()}finally{if(Ie)throw Pe}}else Y.apply(void 0,[f.topLevelInitializer].concat(Vt(G)));var Ke=!0,Xe=!1,We=void 0;if(f.initializer)if(Array.isArray(f.initializer))try{for(var Rt=f.initializer[Symbol.iterator](),ut;!(Ke=(ut=Rt.next()).done);Ke=!0){var ur=ut.value;Y.apply(void 0,[ur].concat(Vt(G)))}}catch(br){Xe=!0,We=br}finally{try{!Ke&&Rt.return!=null&&Rt.return()}finally{if(Xe)throw We}}else Y.apply(void 0,[f.initializer].concat(Vt(G)));f.rules.forEach(function(br){return Y.apply(void 0,[br].concat(Vt(G)))})},grammar_import:de,top_level_initializer:de,initializer:de,rule:W,named:W,choice:P("alternatives"),action:W,sequence:P("elements"),labeled:W,text:W,simple_and:W,simple_not:W,optional:W,zero_or_more:W,one_or_more:W,repeated:function(f){for(var q=arguments.length,G=new Array(q>1?q-1:0),X=1;X<q;X++)G[X-1]=arguments[X];return f.delimiter&&Y.apply(void 0,[f.delimiter].concat(Vt(G))),Y.apply(void 0,[f.expression].concat(Vt(G)))},group:W,semantic_and:de,semantic_not:de,rule_ref:de,library_ref:de,literal:de,class:de,any:de};return Object.keys(U).forEach(function(f){Object.prototype.hasOwnProperty.call(ye,f)||(ye[f]=U[f])}),Y}};$e.exports=ve}),c=n(function(xe,$e){"use strict";var ve=function(de,W){if(!(de&&W))return de||W;var P=Array.isArray(de)?de:[de];return P.push(W),P},ye=i(),Y={findRule:function(de,W){for(var P=0;P<de.rules.length;P++)if(de.rules[P].name===W)return de.rules[P]},indexOfRule:function(de,W){for(var P=0;P<de.rules.length;P++)if(de.rules[P].name===W)return P;return-1},alwaysConsumesOnSuccess:function(de,W){function P(){return!0}function U(){return!1}var f=ye.build({choice:function(q){return q.alternatives.every(f)},sequence:function(q){return q.elements.some(f)},simple_and:U,simple_not:U,optional:U,zero_or_more:U,repeated:function(q){var G=q.min?q.min:q.max;return G.type!=="constant"||G.value===0?!1:!!(f(q.expression)||G.value>1&&q.delimiter&&f(q.delimiter))},semantic_and:U,semantic_not:U,rule_ref:function(q){var G=Y.findRule(de,q.name);return G?f(G):void 0},library_ref:U,literal:function(q){return q.value!==""},class:P,any:P});return f(W)},combine:function(de){return de.reduce(function(W,P){return W.topLevelInitializer=ve(W.topLevelInitializer,P.topLevelInitializer),W.initializer=ve(W.initializer,P.initializer),W.rules=W.rules.concat(P.rules),W})}};$e.exports=Y}),l=n(function(xe,$e){"use strict";var ve=function(ye){var Y=0,de=!0,W=!1,P=void 0;try{for(var U=ye.imports[Symbol.iterator](),f;!(de=(f=U.next()).done);de=!0){var q=f.value,G=!0,X=!1,re=void 0;try{for(var Se=q.what[Symbol.iterator](),ue;!(G=(ue=Se.next()).done);G=!0){var Ee=ue.value,Ne=void 0;switch(Ee.type){case"import_binding_all":continue;case"import_binding_default":break;case"import_binding":Ne=Ee.binding;break;case"import_binding_rename":Ne=Ee.rename;break;default:throw new TypeError("Unknown binding type")}ye.rules.push({type:"rule",name:Ee.binding,nameLocation:Ee.location,expression:{type:"library_ref",name:Ne,library:q.from.module,libraryNumber:Y,location:Ee.location},location:q.from.location})}}catch(Ae){X=!0,re=Ae}finally{try{!G&&Se.return!=null&&Se.return()}finally{if(X)throw re}}Y++}}catch(Ae){W=!0,P=Ae}finally{try{!de&&U.return!=null&&U.return()}finally{if(W)throw P}}};$e.exports=ve}),m=n(function(xe,$e){"use strict";var ve=function(de,W){var P=0,U=!0,f=!1,q=void 0;try{for(var G=de.imports[Symbol.iterator](),X;!(U=(X=G.next()).done);U=!0){var re=X.value,Se=!0,ue=!1,Ee=void 0;try{for(var Ne=re.what[Symbol.iterator](),Ae;!(Se=(Ae=Ne.next()).done);Se=!0){var Z=Ae.value;if(Z.type==="import_binding_all"&&Z.binding===W)return P}}catch(Ie){ue=!0,Ee=Ie}finally{try{!Se&&Ne.return!=null&&Ne.return()}finally{if(ue)throw Ee}}P++}}catch(Ie){f=!0,q=Ie}finally{try{!U&&G.return!=null&&G.return()}finally{if(f)throw q}}return-1},ye=function(de,W,P){Y.build({library_ref:function(U){U.libraryNumber===-1&&(U.libraryNumber=ve(de,U.library),U.libraryNumber===-1&&P.error('Unknown module "'.concat(U.library,'"'),U.location))}})(de)},Y=i();$e.exports=ye}),E=n(function(xe,$e){"use strict";var ve={PUSH:0,PUSH_EMPTY_STRING:35,PUSH_UNDEFINED:1,PUSH_NULL:2,PUSH_FAILED:3,PUSH_EMPTY_ARRAY:4,PUSH_CURR_POS:5,POP:6,POP_CURR_POS:7,POP_N:8,NIP:9,APPEND:10,WRAP:11,TEXT:12,PLUCK:36,IF:13,IF_ERROR:14,IF_NOT_ERROR:15,IF_LT:30,IF_GE:31,IF_LT_DYNAMIC:32,IF_GE_DYNAMIC:33,WHILE_NOT_ERROR:16,MATCH_ANY:17,MATCH_STRING:18,MATCH_STRING_IC:19,MATCH_CHAR_CLASS:20,MATCH_UNICODE_CLASS:42,MATCH_REGEXP:20,ACCEPT_N:21,ACCEPT_STRING:22,FAIL:23,LOAD_SAVED_POS:24,UPDATE_SAVED_POS:25,CALL:26,RULE:27,LIBRARY_RULE:41,SILENT_FAILS_ON:28,SILENT_FAILS_OFF:29,SOURCE_MAP_PUSH:37,SOURCE_MAP_POP:38,SOURCE_MAP_LABEL_PUSH:39,SOURCE_MAP_LABEL_POP:40};$e.exports=ve}),b=n(function(xe,$e){"use strict";var ve=(function(){function ye(Y){bi(this,ye),this.options=Mv({stringify:String,convert:function(de){return de}},Y),this.items=[],this.offsets=Object.create(null)}return Ei(ye,[{key:"add",value:function(Y){var de=this.options.convert(Y);if(!de)return-1;var W=this.options.stringify(de),P=this.offsets[W];return P===void 0&&(P=this.items.push(de)-1,this.offsets[W]=P),P}},{key:"get",value:function(Y){return this.items[Y]}},{key:"map",value:function(Y){return this.items.map(Y)}}]),ye})();$e.exports=ve}),v=n(function(xe,$e){"use strict";var ve=function(f){function q(ue){return ue.match=P}function G(ue){return Se(ue.expression),ue.match=W}function X(ue){return ue.match=Se(ue.expression)}function re(ue,Ee){for(var Ne=ue.length,Ae=0,Z=0,Ie=0;Ie<Ne;++Ie){var Pe=Se(ue[Ie]);Pe===W&&++Ae,Pe===U&&++Z}return Ae===Ne?W:Ee?Z===Ne?U:P:Z>0?U:P}var Se=ye.build({rule:function(ue){var Ee,Ne=0;if(Ai(ue.match)>"u"){ue.match=P;do if(Ee=ue.match,ue.match=Se(ue.expression),++Ne>6)throw new de("Infinity cycle detected when trying to evaluate node match result",ue.location);while(Ee!==ue.match)}return ue.match},named:X,choice:function(ue){return ue.match=re(ue.alternatives,!0)},action:X,sequence:function(ue){return ue.match=re(ue.elements,!1)},labeled:X,text:X,simple_and:X,simple_not:function(ue){return ue.match=-Se(ue.expression)},optional:G,zero_or_more:G,one_or_more:X,repeated:function(ue){var Ee=Se(ue.expression),Ne=ue.delimiter?Se(ue.delimiter):U,Ae=ue.min?ue.min:ue.max;return Ae.type!=="constant"||ue.max.type!=="constant"?ue.match=P:ue.max.value===0||ue.max.value!==null&&Ae.value>ue.max.value?ue.match=U:Ee===U?ue.match=Ae.value===0?W:U:Ee===W?ue.delimiter&&Ae.value>=2?ue.match=Ne:ue.match=W:ue.delimiter&&Ae.value>=2?ue.match=Ne===U?U:P:ue.match=Ae.value===0?W:P},group:X,semantic_and:q,semantic_not:q,rule_ref:function(ue){var Ee=Y.findRule(f,ue.name);return Ee?ue.match=Se(Ee):P},library_ref:function(){return 0},literal:function(ue){var Ee=ue.value.length===0?W:P;return ue.match=Ee},class:function(ue){var Ee=ue.parts.length===0?U:P;return ue.match=Ee},any:q});Se(f)},ye=i(),Y=c(),de=u(),W=1,P=0,U=-1;ve.ALWAYS_MATCH=W,ve.SOMETIMES_MATCH=P,ve.NEVER_MATCH=U,$e.exports=ve}),g=n(function(xe,$e){"use strict";var ve=function(G,X){var re=new W,Se=new W({stringify:JSON.stringify,convert:function(se){return{value:se.parts,inverted:se.inverted,ignoreCase:se.ignoreCase,unicode:se.unicode}}}),ue=new W({stringify:JSON.stringify}),Ee=new W,Ne=[],Ae=[];function Z(se,Re,Je){var K={predicate:se,params:Re,body:Je.code,location:Je.codeLocation},fe=JSON.stringify(K),Ve=Ne.findIndex(function(ze){return JSON.stringify(ze)===fe});return Ve===-1?Ne.push(K)-1:Ve}function Ie(se){return Ae.push(se)-1}function Pe(se){var Re={};return Object.keys(se).forEach(function(Je){Re[Je]=se[Je]}),Re}function je(se){for(var Re=arguments.length,Je=new Array(Re>1?Re-1:0),K=1;K<Re;K++)Je[K-1]=arguments[K];var fe;return(fe=se).concat.apply(fe,Vt(Je))}function oe(se,Re,Je,K){return se===U?Je:se===q?K:Re.concat([Je.length,K.length],Je,K)}function Te(se,Re){return se.concat([Re.length],Re)}function Ke(se,Re,Je,K){var fe=Object.keys(Je).map(function(Ve){return K-Je[Ve]});return[Y.CALL,se,Re,fe.length].concat(fe)}function Xe(se,Re,Je){var K=se.match||0;return je([Y.PUSH_CURR_POS],[Y.SILENT_FAILS_ON],Tt(se,{sp:Je.sp+1,env:Pe(Je.env),action:null}),[Y.SILENT_FAILS_OFF],oe(Re?-K:K,[Re?Y.IF_ERROR:Y.IF_NOT_ERROR],je([Y.POP],[Re?Y.POP:Y.POP_CURR_POS],[Y.PUSH_UNDEFINED]),je([Y.POP],[Re?Y.POP_CURR_POS:Y.POP],[Y.PUSH_FAILED])))}function We(se,Re,Je){var K=Z(!0,Object.keys(Je.env),se);return je([Y.UPDATE_SAVED_POS],Ke(K,0,Je.env,Je.sp),oe(se.match||0,[Y.IF],je([Y.POP],Re?[Y.PUSH_FAILED]:[Y.PUSH_UNDEFINED]),je([Y.POP],Re?[Y.PUSH_UNDEFINED]:[Y.PUSH_FAILED])))}function Rt(se){return Te([Y.WHILE_NOT_ERROR],je([Y.APPEND],se))}function ut(se){var Re=se;return new Error('Unknown boundary type "'.concat(Re.type,'" for the "repeated" node'))}function ur(se,Re,Je,K){switch(se.type){case"constant":return{pre:[],post:[],sp:Je};case"variable":return se.sp=K+Je-Re[se.value],{pre:[],post:[],sp:Je};case"function":{se.sp=K;var fe=Z(!0,Object.keys(Re),{code:se.value,codeLocation:se.codeLocation});return{pre:Ke(fe,0,Re,Je),post:[Y.NIP],sp:Je+1}}default:throw ut(se)}}function br(se,Re){if(Re.value!==null){var Je=Re.type==="constant"?[Y.IF_GE,Re.value]:[Y.IF_GE_DYNAMIC,Re.sp||0];return oe(f,Je,[Y.PUSH_FAILED],se)}return se}function Qr(se,Re){var Je=Re.type==="constant"?[Y.IF_LT,Re.value]:[Y.IF_LT_DYNAMIC,Re.sp||0];return je(se,oe(f,Je,[Y.POP,Y.POP_CURR_POS,Y.PUSH_FAILED],[Y.NIP]))}function gr(se,Re,Je,K,fe){return se?je([Y.PUSH_CURR_POS],Tt(se,{sp:K.sp+fe+1,env:Pe(K.env),action:null}),oe(se.match||0,[Y.IF_NOT_ERROR],je([Y.POP],Je,oe(-Re,[Y.IF_ERROR],[Y.POP,Y.POP_CURR_POS,Y.PUSH_FAILED],[Y.NIP])),[Y.NIP])):Je}function Yr(se){return X&&X.output==="source-and-map"&&Object.keys(se).forEach(function(Re){var Je=se[Re];se[Re]=function(K){for(var fe=arguments.length,Ve=new Array(fe>1?fe-1:0),ze=1;ze<fe;ze++)Ve[ze-1]=arguments[ze];var _e=Je.apply(void 0,[K].concat(Vt(Ve)));return _e===void 0||!K.location?_e:je([Y.SOURCE_MAP_PUSH,Ie(K.location)],_e,[Y.SOURCE_MAP_POP])}}),de.build(se)}var Tt=Yr({grammar:function(se){se.rules.forEach(Tt),se.literals=re.items,se.classes=Se.items,se.expectations=ue.items,se.importedNames=Ee.items,se.functions=Ne,se.locations=Ae},rule:function(se){se.bytecode=Tt(se.expression,{sp:-1,env:{},pluck:[],action:null})},named:function(se,Re){var Je=se.match||0,K=Je===U?-1:ue.add({type:"rule",value:se.name});return je([Y.SILENT_FAILS_ON],Tt(se.expression,Re),[Y.SILENT_FAILS_OFF],oe(-Je,[Y.IF_ERROR],[Y.FAIL,K],[]))},choice:function(se,Re){function Je(K,fe){var Ve=K[0].match||0,ze=Tt(K[0],{sp:fe.sp,env:Pe(fe.env),action:null});return Ve===U?ze:je(ze,K.length>1?oe(f,[Y.IF_ERROR],je([Y.POP],Je(K.slice(1),fe)),[]):[])}return Je(se.alternatives,Re)},action:function(se,Re){var Je=Pe(Re.env),K=se.expression.type!=="sequence"||se.expression.elements.length===0,fe=Tt(se.expression,{sp:Re.sp+(K?1:0),env:Je,action:se}),Ve=se.expression.match||0,ze=K&&Ve!==q?Z(!1,Object.keys(Je),se):-1;return K?je([Y.PUSH_CURR_POS],fe,oe(Ve,[Y.IF_NOT_ERROR],je([Y.LOAD_SAVED_POS,1],Ke(ze,1,Je,Re.sp+2)),[]),[Y.NIP]):fe},sequence:function(se,Re){function Je(K,fe){if(K.length>0){var Ve=se.elements.length-K.length+1;return je(Tt(K[0],{sp:fe.sp,env:fe.env,pluck:fe.pluck,action:null}),oe(K[0].match||0,[Y.IF_NOT_ERROR],Je(K.slice(1),{sp:fe.sp+1,env:fe.env,pluck:fe.pluck,action:fe.action}),je(Ve>1?[Y.POP_N,Ve]:[Y.POP],[Y.POP_CURR_POS],[Y.PUSH_FAILED])))}else{if(fe.pluck&&fe.pluck.length>0)return je([Y.PLUCK,se.elements.length+1,fe.pluck.length],fe.pluck.map(function(_e){return fe.sp-_e}));if(fe.action){var ze=Z(!1,Object.keys(fe.env),fe.action);return je([Y.LOAD_SAVED_POS,se.elements.length],Ke(ze,se.elements.length+1,fe.env,fe.sp))}else return je([Y.WRAP,se.elements.length],[Y.NIP])}}return je([Y.PUSH_CURR_POS],Je(se.elements,{sp:Re.sp+1,env:Re.env,pluck:[],action:Re.action}))},labeled:function(se,Re){var Je=Re.env,K=se.label,fe=Re.sp+1;K&&(Je=Pe(Re.env),Re.env[K]=fe),se.pick&&Re.pluck.push(fe);var Ve=Tt(se.expression,{sp:Re.sp,env:Je,action:null});return K&&se.labelLocation&&X&&X.output==="source-and-map"?je([Y.SOURCE_MAP_LABEL_PUSH,fe,re.add(K),Ie(se.labelLocation)],Ve,[Y.SOURCE_MAP_LABEL_POP,fe]):Ve},text:function(se,Re){return je([Y.PUSH_CURR_POS],Tt(se.expression,{sp:Re.sp+1,env:Pe(Re.env),action:null}),oe(se.match||0,[Y.IF_NOT_ERROR],je([Y.POP],[Y.TEXT]),[Y.NIP]))},simple_and:function(se,Re){return Xe(se.expression,!1,Re)},simple_not:function(se,Re){return Xe(se.expression,!0,Re)},optional:function(se,Re){return je(Tt(se.expression,{sp:Re.sp,env:Pe(Re.env),action:null}),oe(-(se.expression.match||0),[Y.IF_ERROR],je([Y.POP],[Y.PUSH_NULL]),[]))},zero_or_more:function(se,Re){var Je=Tt(se.expression,{sp:Re.sp+1,env:Pe(Re.env),action:null});return je([Y.PUSH_EMPTY_ARRAY],Je,Rt(Je),[Y.POP])},one_or_more:function(se,Re){var Je=Tt(se.expression,{sp:Re.sp+1,env:Pe(Re.env),action:null});return je([Y.PUSH_EMPTY_ARRAY],Je,oe(se.expression.match||0,[Y.IF_NOT_ERROR],je(Rt(Je),[Y.POP]),je([Y.POP],[Y.POP],[Y.PUSH_FAILED])))},repeated:function(se,Re){var Je=se.min?se.min:se.max,K=Je.type!=="constant"||Je.value>0,fe=se.max.type!=="constant"&&se.max.value!==null,Ve=K?2:1,ze=se.min?ur(se.min,Re.env,Re.sp,2+(se.max.type==="function"?1:0)):{pre:[],post:[],sp:Re.sp},_e=ur(se.max,Re.env,ze.sp,Ve),Ze=Tt(se.expression,{sp:_e.sp+Ve,env:Pe(Re.env),action:null}),Qe=se.delimiter!==null?Tt(se.expression,{sp:_e.sp+Ve+1,env:Pe(Re.env),action:null}):Ze,Mt=gr(se.delimiter,se.expression.match||0,Qe,Re,Ve),Me=br(Mt,se.max),ht=fe?br(Ze,se.max):Ze,qe=je(K?[Y.PUSH_CURR_POS]:[],[Y.PUSH_EMPTY_ARRAY],ht,Rt(Me),[Y.POP]);return je(ze.pre,_e.pre,K?Qr(qe,Je):qe,_e.post,ze.post)},group:function(se,Re){return Tt(se.expression,{sp:Re.sp,env:Pe(Re.env),action:null})},semantic_and:function(se,Re){return We(se,!1,Re)},semantic_not:function(se,Re){return We(se,!0,Re)},rule_ref:function(se){return[Y.RULE,ye.indexOfRule(G,se.name)]},library_ref:function(se){return[Y.LIBRARY_RULE,se.libraryNumber,Ee.add(se.name)]},literal:function(se){if(se.value.length>0){var Re=se.match||0,Je=Re===f||Re===U&&!se.ignoreCase?re.add(se.ignoreCase?se.value.toLowerCase():se.value):-1,K=Re!==U?ue.add({type:"literal",value:se.value,ignoreCase:se.ignoreCase}):-1;return oe(Re,se.ignoreCase?[Y.MATCH_STRING_IC,Je]:[Y.MATCH_STRING,Je],se.ignoreCase?[Y.ACCEPT_N,se.value.length]:[Y.ACCEPT_STRING,Je],[Y.FAIL,K])}return[Y.PUSH_EMPTY_STRING]},class:function(se){var Re=se.match||0,Je=Re===f?Se.add(se):-1,K=Re!==U?ue.add({type:"class",value:se.parts,inverted:se.inverted,ignoreCase:se.ignoreCase,unicode:se.unicode}):-1;return oe(Re,[se.unicode?Y.MATCH_UNICODE_CLASS:Y.MATCH_CHAR_CLASS,Je],[Y.ACCEPT_N,se.unicode?-1:1],[Y.FAIL,K])},any:function(se){var Re=se.match||0,Je=Re!==U?ue.add({type:"any"}):-1;return oe(Re,[Y.MATCH_ANY],[Y.ACCEPT_N,1],[Y.FAIL,Je])}});Tt(G)},ye=c(),Y=E(),de=i(),W=b(),P=v(),U=P.ALWAYS_MATCH,f=P.SOMETIMES_MATCH,q=P.NEVER_MATCH;$e.exports=ve}),A=n(function(xe){var $e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");xe.encode=function(ve){if(0<=ve&&ve<$e.length)return $e[ve];throw new TypeError("Must be between 0 and 63: "+ve)}}),w=n(function(xe){var $e=function(P){return P<0?(-P<<1)+1:(P<<1)+0},ve=A(),ye=5,Y=1<<ye,de=Y-1,W=Y;xe.encode=function(P){var U="",f,q=$e(P);do f=q&de,q>>>=ye,q>0&&(f|=W),U+=ve.encode(f);while(q>0);return U}}),S=n(function(xe){var $e=function(oe,Te,Ke){if(Te in oe)return oe[Te];if(arguments.length===3)return Ke;throw new Error('"'+Te+'" is a required argument.')},ve=function(oe){return oe},ye=function(oe){return de(oe)?"$"+oe:oe},Y=function(oe){return de(oe)?oe.slice(1):oe},de=function(oe){if(!oe)return!1;var Te=oe.length;if(Te<9||oe.charCodeAt(Te-1)!==95||oe.charCodeAt(Te-2)!==95||oe.charCodeAt(Te-3)!==111||oe.charCodeAt(Te-4)!==116||oe.charCodeAt(Te-5)!==111||oe.charCodeAt(Te-6)!==114||oe.charCodeAt(Te-7)!==112||oe.charCodeAt(Te-8)!==95||oe.charCodeAt(Te-9)!==95)return!1;for(var Ke=Te-10;Ke>=0;Ke--)if(oe.charCodeAt(Ke)!==36)return!1;return!0},W=function(oe,Te){return oe===Te?0:oe===null?1:Te===null?-1:oe>Te?1:-1},P=function(oe,Te){var Ke=oe.generatedLine-Te.generatedLine;return Ke!==0||(Ke=oe.generatedColumn-Te.generatedColumn,Ke!==0)||(Ke=W(oe.source,Te.source),Ke!==0)||(Ke=oe.originalLine-Te.originalLine,Ke!==0)||(Ke=oe.originalColumn-Te.originalColumn,Ke!==0)?Ke:W(oe.name,Te.name)},U=function(oe){return function(Te){var Ke=X(Te),Xe=G(Te),We=new URL(Te,Xe);oe(We);var Rt=We.toString();return Ke==="absolute"?Rt:Ke==="scheme-relative"?Rt.slice(Ae.length):Ke==="path-absolute"?Rt.slice(Z.length):re(Xe,Rt)}},f=function(oe,Te){return new URL(oe,Te).toString()},q=function(oe,Te){var Ke=0;do{var Xe=oe+Ke++;if(Te.indexOf(Xe)===-1)return Xe}while(!0)},G=function(oe){for(var Te=oe.split("..").length-1,Ke=q("p",oe),Xe="".concat(Z,"/"),We=0;We<Te;We++)Xe+="".concat(Ke,"/");return Xe},X=function(oe){return oe[0]==="/"?oe[1]==="/"?"scheme-relative":"path-absolute":Ie.test(oe)?"absolute":"path-relative"},re=function(oe,Te){typeof oe=="string"&&(oe=new URL(oe)),typeof Te=="string"&&(Te=new URL(Te));var Ke=Te.pathname.split("/"),Xe=oe.pathname.split("/");for(Xe.length>0&&!Xe[Xe.length-1]&&Xe.pop();Ke.length>0&&Xe.length>0&&Ke[0]===Xe[0];)Ke.shift(),Xe.shift();return Xe.map(function(){return".."}).concat(Ke).join("/")+Te.search+Te.hash},Se=function(oe,Te){var Ke=X(Te),Xe=X(oe);if(oe=Pe(oe),Ke==="absolute")return f(Te,void 0);if(Xe==="absolute")return f(Te,oe);if(Ke==="scheme-relative")return je(Te);if(Xe==="scheme-relative")return f(Te,f(oe,Z)).slice(Ae.length);if(Ke==="path-absolute")return je(Te);if(Xe==="path-absolute")return f(Te,f(oe,Z)).slice(Z.length);var We=G(Te+oe),Rt=f(Te,f(oe,We));return re(We,Rt)},ue=function(oe,Te){var Ke=Ee(oe,Te);return typeof Ke=="string"?Ke:je(Te)},Ee=function(oe,Te){if(X(oe)!==X(Te))return null;var Ke=G(oe+Te),Xe=new URL(oe,Ke),We=new URL(Te,Ke);try{new URL("",We.toString())}catch{return null}return We.protocol!==Xe.protocol||We.user!==Xe.user||We.password!==Xe.password||We.hostname!==Xe.hostname||We.port!==Xe.port?null:re(Xe,We)};xe.getArg=$e;var Ne=(function(){return!("__proto__"in Object.create(null))})();xe.toSetString=Ne?ve:ye,xe.fromSetString=Ne?ve:Y,xe.compareByGeneratedPositionsInflated=P;var Ae="http:",Z="".concat(Ae,"//host"),Ie=/^[A-Za-z0-9\+\-\.]+:/,Pe=U(function(oe){oe.pathname=oe.pathname.replace(/\/?$/,"/")}),je=U(function(oe){});xe.normalize=je,xe.join=Se,xe.relative=ue}),y=n(function(xe){var $e=(function(){"use strict";function ve(){bi(this,ve),this._array=[],this._set=new Map}return Ei(ve,[{key:"size",value:function(){return this._set.size}},{key:"add",value:function(ye,Y){var de=this.has(ye),W=this._array.length;(!de||Y)&&this._array.push(ye),de||this._set.set(ye,W)}},{key:"has",value:function(ye){return this._set.has(ye)}},{key:"indexOf",value:function(ye){var Y=this._set.get(ye);if(Y>=0)return Y;throw new Error('"'+ye+'" is not in the set.')}},{key:"at",value:function(ye){if(ye>=0&&ye<this._array.length)return this._array[ye];throw new Error("No element indexed by "+ye)}},{key:"toArray",value:function(){return this._array.slice()}}],[{key:"fromArray",value:function(ye,Y){for(var de=new ve,W=0,P=ye.length;W<P;W++)de.add(ye[W],Y);return de}}]),ve})();xe.ArraySet=$e}),C=n(function(xe){var $e=function(Y,de){var W=Y.generatedLine,P=de.generatedLine,U=Y.generatedColumn,f=de.generatedColumn;return P>W||P==W&&f>=U||ve.compareByGeneratedPositionsInflated(Y,de)<=0},ve=S(),ye=(function(){"use strict";function Y(){bi(this,Y),this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return Ei(Y,[{key:"unsortedForEach",value:function(de,W){this._array.forEach(de,W)}},{key:"add",value:function(de){$e(this._last,de)?(this._last=de,this._array.push(de)):(this._sorted=!1,this._array.push(de))}},{key:"toArray",value:function(){return this._sorted||(this._array.sort(ve.compareByGeneratedPositionsInflated),this._sorted=!0),this._array}}]),Y})();xe.MappingList=ye}),x=n(function(xe){var $e=w(),ve=S(),ye=y().ArraySet,Y=C().MappingList,de=(function(){"use strict";function W(P){bi(this,W),P||(P={}),this._file=ve.getArg(P,"file",null),this._sourceRoot=ve.getArg(P,"sourceRoot",null),this._skipValidation=ve.getArg(P,"skipValidation",!1),this._sources=new ye,this._names=new ye,this._mappings=new Y,this._sourcesContents=null}return Ei(W,[{key:"addMapping",value:function(P){var U=ve.getArg(P,"generated"),f=ve.getArg(P,"original",null),q=ve.getArg(P,"source",null),G=ve.getArg(P,"name",null);this._skipValidation||this._validateMapping(U,f,q,G),q!=null&&(q=String(q),this._sources.has(q)||this._sources.add(q)),G!=null&&(G=String(G),this._names.has(G)||this._names.add(G)),this._mappings.add({generatedLine:U.line,generatedColumn:U.column,originalLine:f&&f.line,originalColumn:f&&f.column,source:q,name:G})}},{key:"setSourceContent",value:function(P,U){var f=P;this._sourceRoot!=null&&(f=ve.relative(this._sourceRoot,f)),U!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[ve.toSetString(f)]=U):this._sourcesContents&&(delete this._sourcesContents[ve.toSetString(f)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))}},{key:"applySourceMap",value:function(P,U,f){var q=U;if(U==null){if(P.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);q=P.file}var G=this._sourceRoot;G!=null&&(q=ve.relative(G,q));var X=this._mappings.toArray().length>0?new ye:this._sources,re=new ye;this._mappings.unsortedForEach(function(Se){if(Se.source===q&&Se.originalLine!=null){var ue=P.originalPositionFor({line:Se.originalLine,column:Se.originalColumn});ue.source!=null&&(Se.source=ue.source,f!=null&&(Se.source=ve.join(f,Se.source)),G!=null&&(Se.source=ve.relative(G,Se.source)),Se.originalLine=ue.line,Se.originalColumn=ue.column,ue.name!=null&&(Se.name=ue.name))}var Ee=Se.source;Ee!=null&&!X.has(Ee)&&X.add(Ee);var Ne=Se.name;Ne!=null&&!re.has(Ne)&&re.add(Ne)},this),this._sources=X,this._names=re,P.sources.forEach(function(Se){var ue=P.sourceContentFor(Se);ue!=null&&(f!=null&&(Se=ve.join(f,Se)),G!=null&&(Se=ve.relative(G,Se)),this.setSourceContent(Se,ue))},this)}},{key:"_validateMapping",value:function(P,U,f,q){if(U&&typeof U.line!="number"&&typeof U.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(P&&"line"in P&&"column"in P&&P.line>0&&P.column>=0&&!U&&!f&&!q)&&!(P&&"line"in P&&"column"in P&&U&&"line"in U&&"column"in U&&P.line>0&&P.column>=0&&U.line>0&&U.column>=0&&f))throw new Error("Invalid mapping: "+JSON.stringify({generated:P,source:f,original:U,name:q}))}},{key:"_serializeMappings",value:function(){for(var U=0,f=1,q=0,G=0,X=0,re=0,Se="",ue,Ee,Ne,Ae,Z=this._mappings.toArray(),Ie=0,Pe=Z.length;Ie<Pe;Ie++){if(Ee=Z[Ie],ue="",Ee.generatedLine!==f)for(U=0;Ee.generatedLine!==f;)ue+=";",f++;else if(Ie>0){if(!ve.compareByGeneratedPositionsInflated(Ee,Z[Ie-1]))continue;ue+=","}ue+=$e.encode(Ee.generatedColumn-U),U=Ee.generatedColumn,Ee.source!=null&&(Ae=this._sources.indexOf(Ee.source),ue+=$e.encode(Ae-re),re=Ae,ue+=$e.encode(Ee.originalLine-1-G),G=Ee.originalLine-1,ue+=$e.encode(Ee.originalColumn-q),q=Ee.originalColumn,Ee.name!=null&&(Ne=this._names.indexOf(Ee.name),ue+=$e.encode(Ne-X),X=Ne)),Se+=ue}return Se}},{key:"_generateSourcesContent",value:function(P,U){return P.map(function(f){if(!this._sourcesContents)return null;U!=null&&(f=ve.relative(U,f));var q=ve.toSetString(f);return Object.prototype.hasOwnProperty.call(this._sourcesContents,q)?this._sourcesContents[q]:null},this)}},{key:"toJSON",value:function(){var U={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(U.file=this._file),this._sourceRoot!=null&&(U.sourceRoot=this._sourceRoot),this._sourcesContents&&(U.sourcesContent=this._generateSourcesContent(U.sources,U.sourceRoot)),U}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}],[{key:"fromSourceMap",value:function(P){var U=P.sourceRoot,f=new W({file:P.file,sourceRoot:U});return P.eachMapping(function(q){var G={generated:{line:q.generatedLine,column:q.generatedColumn}};q.source!=null&&(G.source=q.source,U!=null&&(G.source=ve.relative(U,G.source)),G.original={line:q.originalLine,column:q.originalColumn},q.name!=null&&(G.name=q.name)),f.addMapping(G)}),P.sources.forEach(function(q){var G=q;U!=null&&(G=ve.relative(U,q)),f._sources.has(G)||f._sources.add(G);var X=P.sourceContentFor(q);X!=null&&f.setSourceContent(q,X)}),f}}]),W})();de.prototype._version=3,xe.SourceMapGenerator=de}),N=n(function(xe){var $e=x().SourceMapGenerator,ve=S(),ye=/(\r?\n)/,Y=10,de="$$$isSourceNode$$$",W=(function(){"use strict";function P(U,f,q,G,X){bi(this,P),this.children=[],this.sourceContents={},this.line=U??null,this.column=f??null,this.source=q??null,this.name=X??null,this[de]=!0,G!=null&&this.add(G)}return Ei(P,[{key:"add",value:function(U){if(Array.isArray(U))U.forEach(function(f){this.add(f)},this);else if(U[de]||typeof U=="string")U&&this.children.push(U);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+U);return this}},{key:"prepend",value:function(U){if(Array.isArray(U))for(var f=U.length-1;f>=0;f--)this.prepend(U[f]);else if(U[de]||typeof U=="string")this.children.unshift(U);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+U);return this}},{key:"walk",value:function(U){for(var f,q=0,G=this.children.length;q<G;q++)f=this.children[q],f[de]?f.walk(U):f!==""&&U(f,{source:this.source,line:this.line,column:this.column,name:this.name})}},{key:"join",value:function(U){var f,q,G=this.children.length;if(G>0){for(f=[],q=0;q<G-1;q++)f.push(this.children[q]),f.push(U);f.push(this.children[q]),this.children=f}return this}},{key:"replaceRight",value:function(U,f){var q=this.children[this.children.length-1];return q[de]?q.replaceRight(U,f):typeof q=="string"?this.children[this.children.length-1]=q.replace(U,f):this.children.push("".replace(U,f)),this}},{key:"setSourceContent",value:function(U,f){this.sourceContents[ve.toSetString(U)]=f}},{key:"walkSourceContents",value:function(U){for(var f=0,q=this.children.length;f<q;f++)this.children[f][de]&&this.children[f].walkSourceContents(U);for(var G=Object.keys(this.sourceContents),X=0,re=G.length;X<re;X++)U(ve.fromSetString(G[X]),this.sourceContents[G[X]])}},{key:"toString",value:function(){var f="";return this.walk(function(q){f+=q}),f}},{key:"toStringWithSourceMap",value:function(U){var f={code:"",line:1,column:0},q=new $e(U),G=!1,X=null,re=null,Se=null,ue=null;return this.walk(function(Ee,Ne){f.code+=Ee,Ne.source!==null&&Ne.line!==null&&Ne.column!==null?((X!==Ne.source||re!==Ne.line||Se!==Ne.column||ue!==Ne.name)&&q.addMapping({source:Ne.source,original:{line:Ne.line,column:Ne.column},generated:{line:f.line,column:f.column},name:Ne.name}),X=Ne.source,re=Ne.line,Se=Ne.column,ue=Ne.name,G=!0):G&&(q.addMapping({generated:{line:f.line,column:f.column}}),X=null,G=!1);for(var Ae=0,Z=Ee.length;Ae<Z;Ae++)Ee.charCodeAt(Ae)===Y?(f.line++,f.column=0,Ae+1===Z?(X=null,G=!1):G&&q.addMapping({source:Ne.source,original:{line:Ne.line,column:Ne.column},generated:{line:f.line,column:f.column},name:Ne.name})):f.column++}),this.walkSourceContents(function(Ee,Ne){q.setSourceContent(Ee,Ne)}),{code:f.code,map:q}}}],[{key:"fromStringWithSourceMap",value:function(U,f,q){var G=new P,X=U.split(ye),re=0,Se=function(){var Pe=oe(),je=oe()||"";return Pe+je;function oe(){return re<X.length?X[re++]:void 0}},ue=1,Ee=0,Ne=null,Ae;return f.eachMapping(function(Ie){if(Ne!==null)if(ue<Ie.generatedLine)Z(Ne,Se()),ue++,Ee=0;else{Ae=X[re]||"";var Pe=Ae.substr(0,Ie.generatedColumn-Ee);X[re]=Ae.substr(Ie.generatedColumn-Ee),Ee=Ie.generatedColumn,Z(Ne,Pe),Ne=Ie;return}for(;ue<Ie.generatedLine;)G.add(Se()),ue++;Ee<Ie.generatedColumn&&(Ae=X[re]||"",G.add(Ae.substr(0,Ie.generatedColumn)),X[re]=Ae.substr(Ie.generatedColumn),Ee=Ie.generatedColumn),Ne=Ie},this),re<X.length&&(Ne&&Z(Ne,Se()),G.add(X.splice(re).join(""))),f.sources.forEach(function(Ie){var Pe=f.sourceContentFor(Ie);Pe!=null&&(q!=null&&(Ie=ve.join(q,Ie)),G.setSourceContent(Ie,Pe))}),G;function Z(Ie,Pe){if(Ie===null||Ie.source===void 0)G.add(Pe);else{var je=q?ve.join(q,Ie.source):Ie.source;G.add(new P(Ie.originalLine,Ie.originalColumn,je,Pe,Ie.name))}}}}]),P})();xe.SourceNode=W}),L=n(function(xe){xe.SourceMapGenerator=x().SourceMapGenerator,xe.SourceNode=N().SourceNode}),ne=n(function(xe,$e){"use strict";var ve=L(),ye=ve.SourceNode,Y=a(),de=(function(){function W(P,U,f,q){bi(this,W),this.sp=-1,this.maxSp=-1,this.varName=U,this.ruleName=P,this.type=f,this.bytecode=q,this.labels={},this.sourceMapStack=[]}return Ei(W,[{key:"name",value:function(P){if(P<0)throw new RangeError("Rule '".concat(this.ruleName,"': The variable stack underflow: attempt to use a variable '").concat(this.varName,"<x>' at an index ").concat(P,`.
Bytecode: `).concat(this.bytecode));return this.varName+P}},{key:"push",value:function(P){++this.sp>this.maxSp&&(this.maxSp=this.sp);var U=this.labels[this.sp],f=[this.name(this.sp)," = ",P,";"];if(U)if(this.sourceMapStack.length){var q=W.sourceNode(U.location,f.splice(0,2),U.label),G=this.sourceMapPopInternal(),X=G.parts,re=G.location,Se=re.start.offset<U.location.end.offset?{start:U.location.end,end:re.end,source:re.source}:re,ue=W.sourceNode(Se,f.concat(`
`));return this.sourceMapStack.push([X,X.length+1,re]),new ye(null,null,U.location.source,[q,ue])}else return W.sourceNode(U.location,f.concat(`
`));return f.join("")}},{key:"pop",value:function(P){var U=this;return P!==void 0?(this.sp-=P,Array.from({length:P},function(f,q){return U.name(U.sp+1+q)})):this.name(this.sp--)}},{key:"top",value:function(){return this.name(this.sp)}},{key:"index",value:function(P){if(P<0)throw new RangeError("Rule '".concat(this.ruleName,"': The variable stack overflow: attempt to get a variable at a negative index ").concat(P,`.
Bytecode: `).concat(this.bytecode));return this.name(this.sp-P)}},{key:"result",value:function(){if(this.maxSp<0)throw new RangeError("Rule '".concat(this.ruleName,`': The variable stack is empty, can't get the result.
Bytecode: `).concat(this.bytecode));return this.name(0)}},{key:"defines",value:function(){var U=this;return this.maxSp<0?"":this.type+" "+Array.from({length:this.maxSp+1},function(f,q){return U.name(q)}).join(", ")+";"}},{key:"checkedIf",value:function(P,U,f){var q=this.sp,G=U();if(!f)return[G];var X=this.sp;this.sp=q;var re=f();if(X!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+P+": Branches of a condition can't move the stack pointer differently (before: "+q+", after then: "+X+", after else: "+this.sp+"). Bytecode: "+this.bytecode);return[G,re]}},{key:"checkedLoop",value:function(P,U){var f=this.sp,q=U();if(f!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+P+": Body of a loop can't move the stack pointer (before: "+f+", after: "+this.sp+"). Bytecode: "+this.bytecode);return q}},{key:"sourceMapPush",value:function(P,U){if(this.sourceMapStack.length){var f=this.sourceMapStack[this.sourceMapStack.length-1];f[2].start.offset===U.start.offset&&f[2].end.offset>U.end.offset&&(f[2]={start:U.end,end:f[2].end,source:f[2].source})}this.sourceMapStack.push([P,P.length,U])}},{key:"sourceMapPopInternal",value:function(){var U=this.sourceMapStack.pop();if(!U)throw new RangeError("Rule '".concat(this.ruleName,`': Attempting to pop an empty source map stack.
Bytecode: `).concat(this.bytecode));var f=ua(U,3),q=f[0],G=f[1],X=f[2],re=q.splice(G).map(function(ue){return al(ue,ye)?ue:ue+`
`});if(re.length){var Se=Y.offsetStart(X);q.push(new ye(Se.line,Se.column-1,String(X.source),re))}return{parts:q,location:X}}},{key:"sourceMapPop",value:function(P){var U=this.sourceMapPopInternal(),f=U.location;if(this.sourceMapStack.length&&f.end.offset<this.sourceMapStack[this.sourceMapStack.length-1][2].end.offset){var q=this.sourceMapPopInternal(),G=q.parts,X=q.location,re=X.start.offset<f.end.offset?{start:f.end,end:X.end,source:X.source}:X;this.sourceMapStack.push([G,G.length+(P||0),re])}}}],[{key:"sourceNode",value:function(P,U,f){var q=Y.offsetStart(P);return new ye(q.line,q.column?q.column-1:null,String(P.source),U,f)}}]),W})();$e.exports=de}),pe=n(function(xe){"use strict";xe.version="5.0.6"}),I=n(function(xe){"use strict";var $e=function(W){return W.codePointAt(0).toString(16).toUpperCase()},ve=function(W){return(typeof W>"u"?"undefined":Ai(W))=="object"?"\\\\".concat(W.value):W.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(RegExp("[\\u{10000}-\\u{10FFFF}]","gu"),function(P){return"\\u{".concat($e(P),"}")}).replace(/[\x00-\x0F]/g,function(P){return"\\x0"+$e(P)}).replace(/[\x10-\x1F\x7F-\xFF]/g,function(P){return"\\x"+$e(P)}).replace(/[\u0100-\u0FFF]/g,function(P){return"\\u0"+$e(P)}).replace(/[\u1000-\uFFFF]/g,function(P){return"\\u"+$e(P)})},ye=function(W){return(typeof W>"u"?"undefined":Ai(W))=="object"?"\\".concat(W.value):W.replace(/\\/g,"\\\\").replace(/\//g,"\\/").replace(/]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(P){return"\\x0"+$e(P)}).replace(/[\x10-\x1F\x7F-\xFF]/g,function(P){return"\\x"+$e(P)}).replace(RegExp("[\\u{10000}-\\u{10FFFF}]","gu"),function(P){return"\\u{"+$e(P)+"}"}).replace(/[\u0100-\u0FFF]/g,function(P){return"\\u0"+$e(P)}).replace(/[\u1000-\uFFFF]/g,function(P){return"\\u"+$e(P)})},Y=function(W){for(var P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",U=W.length%3,f=W.length-U,q="",G=0;G<f;G+=3)q+=P[W[G]>>2],q+=P[(W[G]&3)<<4|W[G+1]>>4],q+=P[(W[G+1]&15)<<2|W[G+2]>>6],q+=P[W[G+2]&63];return U===1?(q+=P[W[f]>>2],q+=P[(W[f]&3)<<4],q+="=="):U===2&&(q+=P[W[f]>>2],q+=P[(W[f]&3)<<4|W[f+1]>>4],q+=P[(W[f+1]&15)<<2],q+="="),q},de=function(W){var P=W[Symbol.iterator](),U=P.next();return U.done||!P.next().done?-1:U.value.codePointAt(0)};xe.hex=$e,xe.stringEscape=ve,xe.regexpClassEscape=ye,xe.base64=Y,xe.codePointLen1=de}),B=n(function(xe,$e){"use strict";var ve=function(P,U){U=U!==void 0?U:{};var f={},q=U.grammarSource,G={Grammar:qr,ImportsAndSource:cf},X=qr,re="import",Se=";",ue=",",Ee="*",Ne="as",Ae="{",Z="}",Ie="from",Pe="=",je="/",oe="@",Te=":",Ke="|",Xe="..",We="(",Rt=")",ut=".",ur=`
`,br=`\r
`,Qr="/*",gr="*/",Yr="//",Tt="\\",se="i",Re='"',Je="'",K="[",fe="^",Ve="]",ze="p",_e="_",Ze="u",Qe="-",Mt="0",Me="b",ht="f",qe="n",qt="r",Kt="t",tt="v",Lr="x",Le=/^[!$&]/,Ui=/^[*-+?]/,bt=/^[!&]/,Rr=/^[\0-\uD7FF\uE000-\uFFFF]/,_t=/^[\uD800-\uDBFF]/,vr=/^[\uDC00-\uDFFF]/,ft=/^[\uD800-\uDFFF]/,tr=RegExp("^[\\t\\v-\\f \\p{Zs}\\xA0\\uFEFF]","u"),Hr=/^[\n\r\u2028\u2029]/,yr=/^[\r\u2028-\u2029]/,Xt=RegExp("^[\\p{ID_Start}_]","u"),Zt=RegExp("^[$\\p{ID_Continue}]","u"),ir=/^[\n\r"\\\u2028-\u2029]/,hr=/^[\n\r'\\\u2028-\u2029]/,Sr=/^[a-z]/i,Mr=/^[\n\r\\-\]\u2028-\u2029]/,An=/^["'\\]/,sr=/^[0-9pux]/,Xn=/^[0-9]/,kr=/^[0-9a-f]/i,li=/^[{}]/,ou=Ea(),cu=Ft("import",!1),Ts=Ft(";",!1),os=Ft(",",!1),hl=Ft("*",!1),lu=Ft("as",!1),Zn=Ft("{",!1),Qn=Ft("}",!1),cs=Ft("from",!1),ca=Ft("=",!1),fu=Ft("/",!1),pl=Ft("@",!1),fo=Ft(":",!1),ho=Dr(["!","$","&"],!1,!1,!1),po=Dr([["*","+"],"?"],!1,!1,!1),hu=Ft("|",!1),dl=Ft("..",!1),gl=Ft("(",!1),vl=Ft(")",!1),pu=Ft(".",!1),ml=Dr(["!","&"],!1,!1,!1),wl=Dr([["\0","\uD7FF"],["\uE000","\uFFFF"]],!1,!1,!1),bl=Dr([["\uD800","\uDBFF"]],!1,!1,!1),El=Dr([["\uDC00","\uDFFF"]],!1,!1,!1),du=Dr([["\uD800","\uDFFF"]],!1,!1,!1),Al=Ln("whitespace"),yl=Dr(["	",["\v","\f"]," ","\\p{Zs}","\xA0","\uFEFF"],!1,!1,!0),Sl=Dr([`
`,"\r","\u2028","\u2029"],!1,!1,!1),_l=Ln("end of line"),Dl=Ft(`
`,!1),pr=Ft(`\r
`,!1),or=Dr(["\r",["\u2028","\u2029"]],!1,!1,!1),Fl=Ln("comment"),go=Ft("/*",!1),ls=Ft("*/",!1),Cl=Ft("//",!1),Il=Ln("identifier"),Pl=Dr(["\\p{ID_Start}","_"],!1,!1,!0),Mi=Ft("\\",!1),Bl=Dr(["$","\\p{ID_Continue}"],!1,!1,!0),jr=Ln("literal"),la=Ft("i",!1),qi=Ln("string"),gu=Ft('"',!1),fa=Ft("'",!1),yn=Dr([`
`,"\r",'"',"\\",["\u2028","\u2029"]],!1,!1,!1),vo=Dr([`
`,"\r","'","\\",["\u2028","\u2029"]],!1,!1,!1),mo=Ln("character class"),wo=Ft("[",!1),bo=Ft("^",!1),Eo=Ft("]",!1),Ao=Ft("p",!0),pn=Ft("_",!1),$l=Dr([["a","z"]],!1,!0,!1),tn=Ft("u",!1),Rl=Ft("-",!1),yo=Dr([`
`,"\r",["\\","]"],["\u2028","\u2029"]],!1,!1,!1),yi=Ft("0",!1),ha=Dr(['"',"'","\\"],!1,!1,!1),vu=Ft("b",!1),mr=Ft("f",!1),Si=Ft("n",!1),mu=Ft("r",!1),kl=Ft("t",!1),wu=Ft("v",!1),xl=Dr([["0","9"],"p","u","x"],!1,!1,!1),Tl=Ft("x",!1),Ol=Dr([["0","9"]],!1,!1,!1),So=Dr([["0","9"],["a","f"]],!1,!0,!1),pa=Ln("code block"),fi=Dr(["{","}"],!1,!1,!1);function Nl(h,F,T,k){return{type:"grammar",imports:h,topLevelInitializer:F,initializer:T,rules:k,location:Bt()}}function _o(h,F){return[h,F]}function Do(h){return{type:"top_level_initializer",code:h,codeLocation:Bt()}}function bu(h){return{type:"top_level_initializer",code:h,codeLocation:Bt()}}function Eu(h,F){return{type:"grammar_import",what:h,from:F,location:Bt()}}function Fo(h){return{type:"grammar_import",what:[],from:h,location:Bt()}}function Ll(h,F){return F?(F.unshift(h),F):[h]}function Au(h){return{type:"import_binding_default",binding:h[0],location:h[1]}}function yu(h){return[{type:"import_binding_all",binding:h[0],location:h[1]}]}function Hl(){return[]}function Co(h,F){return{type:"import_binding_rename",rename:h[0],renameLocation:h[1],binding:F[0],location:F[1]}}function dn(h){return{type:"import_binding",binding:h[0],location:h[1]}}function Su(h){return{type:"import_module_specifier",module:h,location:Bt()}}function Os(h){return[h,Bt()]}function Io(h){return[h,Bt()]}function Po(h){return Tu.has(h[0])&&ei(`Binding identifier can't be a reserved word "`.concat(h[0],'"'),h[1]),h[0]}function jl(h){return{type:"top_level_initializer",code:h[0],codeLocation:h[1],location:Bt()}}function Ul(h){return{type:"initializer",code:h[0],codeLocation:h[1],location:Bt()}}function Ml(h,F,T){return{type:"rule",name:h[0],nameLocation:h[1],expression:F!==null?{type:"named",name:F,expression:T,location:Bt()}:T,location:Bt()}}function ql(h,F){return F.length>0?{type:"choice",alternatives:[h].concat(F),location:Bt()}:h}function Vl(h,F){return F!==null?{type:"action",expression:h,code:F[0],codeLocation:F[1],location:Bt()}:h}function fs(h,F){return F.length>0||h.type==="labeled"&&h.pick?{type:"sequence",elements:[h].concat(F),location:Bt()}:h}function Kl(h,F,T){return T.type.startsWith("semantic_")&&ei('"@" cannot be used on a semantic predicate',h),{type:"labeled",label:F!==null?F[0]:null,labelLocation:F!==null?F[1]:h,pick:!0,expression:T,location:Bt()}}function zl(h,F){return{type:"labeled",label:h[0],labelLocation:h[1],expression:F,location:Bt()}}function _u(){return Bt()}function Bo(h){return Tu.has(h[0])&&ei(`Label can't be a reserved word "`.concat(h[0],'"'),h[1]),h}function _i(h,F){return{type:ye[h],expression:F,location:Bt()}}function da(h,F){return{type:Y[F],expression:h,location:Bt()}}function Gl(h,F,T){var k=F[0],ie=F[1];return ie.type==="constant"&&ie.value===0&&ei("The maximum count of repetitions of the rule must be > 0",ie.location),{type:"repeated",min:k,max:ie,expression:h,delimiter:T,location:Bt()}}function Wl(h,F){return[h!==null?h:{type:"constant",value:0},F!==null?F:{type:"constant",value:null}]}function Yl(h){return[null,h]}function hs(h){return{type:"constant",value:h,location:Bt()}}function Nn(h){return{type:"variable",value:h[0],location:Bt()}}function $o(h){return{type:"function",value:h[0],codeLocation:h[1],location:Bt()}}function Jl(h){return h.type==="labeled"||h.type==="sequence"?{type:"group",expression:h,location:Bt()}:h}function Xl(h,F){return{type:"library_ref",name:F[0],library:h[0],libraryNumber:-1,location:Bt()}}function Zl(h){return{type:"rule_ref",name:h[0],location:Bt()}}function Ql(h,F){return{type:de[h],code:F[0],codeLocation:F[1],location:Bt()}}function ef(h,F){return[h+F.join(""),Bt()]}function Di(h,F){return{type:"literal",value:h,ignoreCase:F!==null,location:Bt()}}function le(h){return h.join("")}function Fe(h){return h.join("")}function be(h,F,T){if(h&&F.length===0)if(T.unicode)F=[["\uD800","\uDFFF"]];else return{type:"any",location:Bt()};return{type:"class",parts:F.filter(function(k){return k!==""}),inverted:!!h,ignoreCase:!!T.ignoreCase,location:Bt(),unicode:!!T.unicode||F.flat().some(function(k){return(typeof k>"u"?"undefined":Ai(k))=="object"&&k.unicode||k.codePointAt(0)>65535})}}function nt(h){try{new RegExp("[\\".concat(h,"]"),"u")}catch{ei("Invalid Unicode property escape")}return{type:"classEscape",value:h,unicode:!0,location:Bt()}}function St(h){var F=Object.fromEntries(h);return Object.keys(F).length!==h.length&&ei("Invalid flags"),F}function Jt(){return["ignoreCase",!0]}function xr(){return["unicode",!0]}function ar(h,F){return h.codePointAt(0)>F.codePointAt(0)&&ei("Invalid character range: "+ko()+"."),[h,F]}function Du(){return""}function tf(){return"\0"}function Sn(){return"\b"}function ga(){return"\f"}function rf(){return`
`}function ps(){return"\r"}function va(){return"	"}function ma(){return"\v"}function er(h){return String.fromCharCode(parseInt(h,16))}function nf(h){return String.fromCharCode(parseInt(h,16))}function Ro(h){return String.fromCodePoint(parseInt(h,16))}function wa(){return{type:"any",location:Bt()}}function sf(h){return[h,Bt()]}function af(h){return parseInt(h,10)}var _=U.peg$currPos|0,rt=_,gn=[{line:1,column:1}],rn=_,Ns=U.peg$maxFailExpected||[],ge=U.peg$silentFails|0,ds;if(U.startRule){if(!(U.startRule in G))throw new Error(`Can't start parsing from rule "`+U.startRule+'".');X=G[U.startRule]}function ko(){return P.substring(rt,_)}function Fu(){return rt}function uf(){return{source:q,start:rt,end:_}}function Bt(){return vs(rt,_)}function gs(h,F){throw F=F!==void 0?F:vs(rt,_),Ir([Ln(h)],P.substring(rt,_),F)}function ei(h,F){throw F=F!==void 0?F:vs(rt,_),of(h,F)}function ba(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_,F=P.codePointAt(h);return F===void 0?"":String.fromCodePoint(F)}function Ft(h,F){return{type:"literal",text:h,ignoreCase:F}}function Dr(h,F,T,k){return{type:"class",parts:h,inverted:F,ignoreCase:T,unicode:k}}function Ea(){return{type:"any"}}function Aa(){return{type:"end"}}function Ln(h){return{type:"other",description:h}}function xo(h){var F=gn[h],T;if(F)return F;if(h>=gn.length)T=gn.length-1;else for(T=h;!gn[--T];);for(F=gn[T],F={line:F.line,column:F.column};T<h;)P.charCodeAt(T)===10?(F.line++,F.column=1):F.column++,T++;return gn[h]=F,F}function vs(h,F,T){var k=xo(h),ie=xo(F),ce={source:q,start:{offset:h,line:k.line,column:k.column},end:{offset:F,line:ie.line,column:ie.column}};return T&&q&&typeof q.offset=="function"&&(ce.start=q.offset(ce.start),ce.end=q.offset(ce.end)),ce}function Be(h){_<rn||(_>rn&&(rn=_,Ns=[]),Ns.push(h))}function of(h,F){return new W(h,null,null,F)}function Ir(h,F,T){return new W(W.buildMessage(h,F),h,F,T)}function qr(){var h,F,T,k,ie,ce,it,wt,un;if(h=_,F=Oo(),T=_,k=ot(),ie=pf(),ie!==f?T=ie:(_=T,T=f),T===f&&(T=null),k=_,ie=ot(),ce=Da(),ce!==f?k=ce:(_=k,k=f),k===f&&(k=null),ie=ot(),ce=[],it=_,wt=ws(),wt!==f?(un=ot(),it=wt):(_=it,it=f),it!==f)for(;it!==f;)ce.push(it),it=_,wt=ws(),wt!==f?(un=ot(),it=wt):(_=it,it=f);else ce=f;return ce!==f?(rt=h,h=Nl(F,T,k,ce)):(_=h,h=f),h}function cf(){var h,F,T;return h=_,F=To(),T=lf(),rt=h,h=_o(F,T),h}function lf(){var h,F,T,k;for(h=_,F=_,T=[],P.length>_?(k=P.charAt(_),_++):(k=f,ge===0&&Be(ou));k!==f;)T.push(k),P.length>_?(k=P.charAt(_),_++):(k=f,ge===0&&Be(ou));return F=P.substring(F,_),rt=h,F=Do(F),h=F,h}function To(){var h,F,T;return h=_,F=_,T=Oo(),F=P.substring(F,_),rt=h,F=bu(F),h=F,h}function Oo(){var h,F;for(h=[],F=ya();F!==f;)h.push(F),F=ya();return h}function ya(){var h,F,T,k,ie,ce,it,wt,un,ri;return h=_,F=ot(),P.substr(_,6)===re?(T=re,_+=6):(T=f,ge===0&&Be(cu)),T!==f?(k=ot(),ie=Ls(),ie!==f?(ce=ot(),it=Hs(),it!==f?(wt=_,un=ot(),P.charCodeAt(_)===59?(ri=Se,_++):(ri=f,ge===0&&Be(Ts)),ri!==f?(un=[un,ri],wt=un):(_=wt,wt=f),wt===f&&(wt=null),rt=h,h=Eu(ie,it)):(_=h,h=f)):(_=h,h=f)):(_=h,h=f),h===f&&(h=_,F=ot(),P.substr(_,6)===re?(T=re,_+=6):(T=f,ge===0&&Be(cu)),T!==f?(k=ot(),ie=No(),ie!==f?(ce=_,it=ot(),P.charCodeAt(_)===59?(wt=Se,_++):(wt=f,ge===0&&Be(Ts)),wt!==f?(it=[it,wt],ce=it):(_=ce,ce=f),ce===f&&(ce=null),rt=h,h=Fo(ie)):(_=h,h=f)):(_=h,h=f)),h}function Ls(){var h,F,T,k,ie,ce,it;return h=Vi(),h===f&&(h=ms(),h===f&&(h=_,F=Cu(),F!==f?(T=_,k=ot(),P.charCodeAt(_)===44?(ie=ue,_++):(ie=f,ge===0&&Be(os)),ie!==f?(ce=ot(),it=Vi(),it===f&&(it=ms()),it!==f?T=it:(_=T,T=f)):(_=T,T=f),T===f&&(T=null),rt=h,h=Ll(F,T)):(_=h,h=f))),h}function Cu(){var h,F;return h=_,F=_a(),F!==f&&(rt=h,F=Au(F)),h=F,h}function Vi(){var h,F,T,k,ie,ce;return h=_,P.charCodeAt(_)===42?(F=Ee,_++):(F=f,ge===0&&Be(hl)),F!==f?(T=ot(),P.substr(_,2)===Ne?(k=Ne,_+=2):(k=f,ge===0&&Be(lu)),k!==f?(ie=ot(),ce=_a(),ce!==f?(rt=h,h=yu(ce)):(_=h,h=f)):(_=h,h=f)):(_=h,h=f),h}function ms(){var h,F,T,k,ie,ce,it,wt;return h=_,P.charCodeAt(_)===123?(F=Ae,_++):(F=f,ge===0&&Be(Zn)),F!==f?(T=ot(),P.charCodeAt(_)===125?(k=Z,_++):(k=f,ge===0&&Be(Qn)),k!==f?(rt=h,h=Hl()):(_=h,h=f)):(_=h,h=f),h===f&&(h=_,P.charCodeAt(_)===123?(F=Ae,_++):(F=f,ge===0&&Be(Zn)),F!==f?(T=ot(),k=Sa(),k!==f?(ie=ot(),ce=_,P.charCodeAt(_)===44?(it=ue,_++):(it=f,ge===0&&Be(os)),it!==f?(wt=ot(),it=[it,wt],ce=it):(_=ce,ce=f),ce===f&&(ce=null),P.charCodeAt(_)===125?(it=Z,_++):(it=f,ge===0&&Be(Qn)),it!==f?h=k:(_=h,h=f)):(_=h,h=f)):(_=h,h=f)),h}function Hs(){var h,F,T,k;return h=_,P.substr(_,4)===Ie?(F=Ie,_+=4):(F=f,ge===0&&Be(cs)),F!==f?(T=ot(),k=No(),k!==f?h=k:(_=h,h=f)):(_=h,h=f),h}function Sa(){var h,F,T,k,ie,ce,it;for(h=_,F=[],T=Ki();T!==f;)F.push(T),T=_,k=_,ie=ot(),P.charCodeAt(_)===44?(ce=ue,_++):(ce=f,ge===0&&Be(os)),ce!==f?(it=ot(),ie=[ie,ce,it],k=ie):(_=k,k=f),k!==f?(k=Ki(),k===f?(_=T,T=f):T=k):T=k;return F.length<1?(_=h,h=f):h=F,h}function Ki(){var h,F,T,k,ie,ce;return h=_,F=ff(),F!==f?(T=ot(),P.substr(_,2)===Ne?(k=Ne,_+=2):(k=f,ge===0&&Be(lu)),k!==f?(ie=ot(),ce=_a(),ce!==f?(rt=h,h=Co(F,ce)):(_=h,h=f)):(_=h,h=f)):(_=h,h=f),h===f&&(h=_,F=_a(),F!==f&&(rt=h,F=dn(F)),h=F),h}function No(){var h,F;return h=_,F=js(),F!==f&&(rt=h,F=Su(F)),h=F,h}function _a(){var h,F;return h=_,F=hf(),F!==f&&(rt=h,F=Os(F)),h=F,h}function ff(){var h,F;return h=sn(),h===f&&(h=_,F=js(),F!==f&&(rt=h,F=Io(F)),h=F),h}function hf(){var h,F;return h=_,F=sn(),F!==f&&(rt=h,F=Po(F)),h=F,h}function pf(){var h,F,T,k,ie;return h=_,P.charCodeAt(_)===123?(F=Ae,_++):(F=f,ge===0&&Be(Zn)),F!==f?(T=Ss(),T!==f?(P.charCodeAt(_)===125?(k=Z,_++):(k=f,ge===0&&Be(Qn)),k!==f?(ie=_s(),ie!==f?(rt=h,h=jl(T)):(_=h,h=f)):(_=h,h=f)):(_=h,h=f)):(_=h,h=f),h}function Da(){var h,F,T;return h=_,F=Ss(),F!==f?(T=_s(),T!==f?(rt=h,h=Ul(F)):(_=h,h=f)):(_=h,h=f),h}function ws(){var h,F,T,k,ie,ce,it,wt;return h=_,F=sn(),F!==f?(T=ot(),k=_,ie=js(),ie!==f?(ce=ot(),k=ie):(_=k,k=f),k===f&&(k=null),P.charCodeAt(_)===61?(ie=Pe,_++):(ie=f,ge===0&&Be(ca)),ie!==f?(ce=ot(),it=Fa(),it!==f?(wt=_s(),wt!==f?(rt=h,h=Ml(F,k,it)):(_=h,h=f)):(_=h,h=f)):(_=h,h=f)):(_=h,h=f),h}function Fa(){var h,F,T,k,ie,ce,it,wt;if(h=_,F=O(),F!==f){for(T=[],k=_,ie=ot(),P.charCodeAt(_)===47?(ce=je,_++):(ce=f,ge===0&&Be(fu)),ce!==f?(it=ot(),wt=O(),wt!==f?k=wt:(_=k,k=f)):(_=k,k=f);k!==f;)T.push(k),k=_,ie=ot(),P.charCodeAt(_)===47?(ce=je,_++):(ce=f,ge===0&&Be(fu)),ce!==f?(it=ot(),wt=O(),wt!==f?k=wt:(_=k,k=f)):(_=k,k=f);rt=h,h=ql(F,T)}else _=h,h=f;return h}function O(){var h,F,T,k,ie;return h=_,F=bs(),F!==f?(T=_,k=ot(),ie=Ss(),ie!==f?T=ie:(_=T,T=f),T===f&&(T=null),rt=h,h=Vl(F,T)):(_=h,h=f),h}function bs(){var h,F,T,k,ie,ce;if(h=_,F=Es(),F!==f){for(T=[],k=_,ie=ot(),ce=Es(),ce!==f?k=ce:(_=k,k=f);k!==f;)T.push(k),k=_,ie=ot(),ce=Es(),ce!==f?k=ce:(_=k,k=f);rt=h,h=fs(F,T)}else _=h,h=f;return h}function Es(){var h,F,T,k;return h=_,F=_n(),F!==f?(T=Ot(),T===f&&(T=null),k=Iu(),k!==f?(rt=h,h=Kl(F,T,k)):(_=h,h=f)):(_=h,h=f),h===f&&(h=_,F=Ot(),F!==f?(T=Iu(),T!==f?(rt=h,h=zl(F,T)):(_=h,h=f)):(_=h,h=f),h===f&&(h=Iu())),h}function _n(){var h,F;return h=_,P.charCodeAt(_)===64?(F=oe,_++):(F=f,ge===0&&Be(pl)),F!==f&&(rt=h,F=_u()),h=F,h}function Ot(){var h,F,T,k,ie;return h=_,F=sn(),F!==f?(T=ot(),P.charCodeAt(_)===58?(k=Te,_++):(k=f,ge===0&&Be(fo)),k!==f?(ie=ot(),rt=h,h=Bo(F)):(_=h,h=f)):(_=h,h=f),h}function Iu(){var h,F,T,k;return h=_,F=df(),F!==f?(T=ot(),k=Lo(),k!==f?(rt=h,h=_i(F,k)):(_=h,h=f)):(_=h,h=f),h===f&&(h=Lo()),h}function df(){var h;return h=P.charAt(_),Le.test(h)?_++:(h=f,ge===0&&Be(ho)),h}function Lo(){var h,F,T,k;return h=_,F=Bu(),F!==f?(T=ot(),k=zi(),k!==f?(rt=h,h=da(F,k)):(_=h,h=f)):(_=h,h=f),h===f&&(h=gf(),h===f&&(h=Bu())),h}function zi(){var h;return h=P.charAt(_),Ui.test(h)?_++:(h=f,ge===0&&Be(po)),h}function gf(){var h,F,T,k,ie,ce,it,wt,un,ri,Ou,Pf;return h=_,F=Bu(),F!==f?(T=ot(),P.charCodeAt(_)===124?(k=Ke,_++):(k=f,ge===0&&Be(hu)),k!==f?(ie=ot(),ce=vf(),ce!==f?(it=ot(),wt=_,P.charCodeAt(_)===44?(un=ue,_++):(un=f,ge===0&&Be(os)),un!==f?(ri=ot(),Ou=Fa(),Ou!==f?(Pf=ot(),wt=Ou):(_=wt,wt=f)):(_=wt,wt=f),wt===f&&(wt=null),P.charCodeAt(_)===124?(un=Ke,_++):(un=f,ge===0&&Be(hu)),un!==f?(rt=h,h=Gl(F,ce,wt)):(_=h,h=f)):(_=h,h=f)):(_=h,h=f)):(_=h,h=f),h}function vf(){var h,F,T,k,ie,ce;return h=_,F=Pu(),F===f&&(F=null),T=ot(),P.substr(_,2)===Xe?(k=Xe,_+=2):(k=f,ge===0&&Be(dl)),k!==f?(ie=ot(),ce=Pu(),ce===f&&(ce=null),rt=h,h=Wl(F,ce)):(_=h,h=f),h===f&&(h=_,F=Pu(),F!==f&&(rt=h,F=Yl(F)),h=F),h}function Pu(){var h,F;return h=_,F=Xo(),F!==f&&(rt=h,F=hs(F)),h=F,h===f&&(h=_,F=sn(),F!==f&&(rt=h,F=Nn(F)),h=F,h===f&&(h=_,F=Ss(),F!==f&&(rt=h,F=$o(F)),h=F)),h}function Bu(){var h,F,T,k,ie,ce;return h=Hn(),h===f&&(h=Sf(),h===f&&(h=If(),h===f&&(h=mf(),h===f&&(h=hi(),h===f&&(h=_,P.charCodeAt(_)===40?(F=We,_++):(F=f,ge===0&&Be(gl)),F!==f?(T=ot(),k=Fa(),k!==f?(ie=ot(),P.charCodeAt(_)===41?(ce=Rt,_++):(ce=f,ge===0&&Be(vl)),ce!==f?(rt=h,h=Jl(k)):(_=h,h=f)):(_=h,h=f)):(_=h,h=f)))))),h}function mf(){var h,F,T,k,ie,ce,it,wt;return h=_,F=sn(),F!==f?(P.charCodeAt(_)===46?(T=ut,_++):(T=f,ge===0&&Be(pu)),T!==f?(k=sn(),k!==f?(rt=h,h=Xl(F,k)):(_=h,h=f)):(_=h,h=f)):(_=h,h=f),h===f&&(h=_,F=sn(),F!==f?(T=_,ge++,k=_,ie=ot(),ce=_,it=js(),it!==f?(wt=ot(),it=[it,wt],ce=it):(_=ce,ce=f),ce===f&&(ce=null),P.charCodeAt(_)===61?(it=Pe,_++):(it=f,ge===0&&Be(ca)),it!==f?(ie=[ie,ce,it],k=ie):(_=k,k=f),ge--,k===f?T=void 0:(_=T,T=f),T!==f?(rt=h,h=Zl(F)):(_=h,h=f)):(_=h,h=f)),h}function hi(){var h,F,T,k;return h=_,F=wf(),F!==f?(T=ot(),k=Ss(),k!==f?(rt=h,h=Ql(F,k)):(_=h,h=f)):(_=h,h=f),h}function wf(){var h;return h=P.charAt(_),bt.test(h)?_++:(h=f,ge===0&&Be(ml)),h}function nn(){var h;return h=bf(),h===f&&(h=Ef()),h}function bf(){var h;return h=P.charAt(_),Rr.test(h)?_++:(h=f,ge===0&&Be(wl)),h}function Ef(){var h,F,T,k;return h=_,F=_,T=P.charAt(_),_t.test(T)?_++:(T=f,ge===0&&Be(bl)),T!==f?(k=P.charAt(_),vr.test(k)?_++:(k=f,ge===0&&Be(El)),k!==f?(T=[T,k],F=T):(_=F,F=f)):(_=F,F=f),F!==f?h=P.substring(h,_):h=F,h===f&&(h=P.charAt(_),ft.test(h)?_++:(h=f,ge===0&&Be(du))),h}function Ca(){var h,F;return ge++,h=ba(),tr.test(h)?_+=h.length:(h=f,ge===0&&Be(yl)),ge--,h===f&&(F=f,ge===0&&Be(Al)),h}function vn(){var h;return h=P.charAt(_),Hr.test(h)?_++:(h=f,ge===0&&Be(Sl)),h}function Ia(){var h,F;return ge++,P.charCodeAt(_)===10?(h=ur,_++):(h=f,ge===0&&Be(Dl)),h===f&&(P.substr(_,2)===br?(h=br,_+=2):(h=f,ge===0&&Be(pr)),h===f&&(h=P.charAt(_),yr.test(h)?_++:(h=f,ge===0&&Be(or)))),ge--,h===f&&(F=f,ge===0&&Be(_l)),h}function Ho(){var h,F;return ge++,h=Af(),h===f&&(h=Uo()),ge--,h===f&&(F=f,ge===0&&Be(Fl)),h}function Af(){var h,F,T,k,ie,ce;if(h=_,P.substr(_,2)===Qr?(F=Qr,_+=2):(F=f,ge===0&&Be(go)),F!==f){for(T=[],k=_,ie=_,ge++,P.substr(_,2)===gr?(ce=gr,_+=2):(ce=f,ge===0&&Be(ls)),ge--,ce===f?ie=void 0:(_=ie,ie=f),ie!==f?(ce=nn(),ce!==f?(ie=[ie,ce],k=ie):(_=k,k=f)):(_=k,k=f);k!==f;)T.push(k),k=_,ie=_,ge++,P.substr(_,2)===gr?(ce=gr,_+=2):(ce=f,ge===0&&Be(ls)),ge--,ce===f?ie=void 0:(_=ie,ie=f),ie!==f?(ce=nn(),ce!==f?(ie=[ie,ce],k=ie):(_=k,k=f)):(_=k,k=f);P.substr(_,2)===gr?(k=gr,_+=2):(k=f,ge===0&&Be(ls)),k!==f?(F=[F,T,k],h=F):(_=h,h=f)}else _=h,h=f;return h}function jo(){var h,F,T,k,ie,ce;if(h=_,P.substr(_,2)===Qr?(F=Qr,_+=2):(F=f,ge===0&&Be(go)),F!==f){for(T=[],k=_,ie=_,ge++,P.substr(_,2)===gr?(ce=gr,_+=2):(ce=f,ge===0&&Be(ls)),ce===f&&(ce=vn()),ge--,ce===f?ie=void 0:(_=ie,ie=f),ie!==f?(ce=nn(),ce!==f?(ie=[ie,ce],k=ie):(_=k,k=f)):(_=k,k=f);k!==f;)T.push(k),k=_,ie=_,ge++,P.substr(_,2)===gr?(ce=gr,_+=2):(ce=f,ge===0&&Be(ls)),ce===f&&(ce=vn()),ge--,ce===f?ie=void 0:(_=ie,ie=f),ie!==f?(ce=nn(),ce!==f?(ie=[ie,ce],k=ie):(_=k,k=f)):(_=k,k=f);P.substr(_,2)===gr?(k=gr,_+=2):(k=f,ge===0&&Be(ls)),k!==f?(F=[F,T,k],h=F):(_=h,h=f)}else _=h,h=f;return h}function Uo(){var h,F,T,k,ie,ce;if(h=_,P.substr(_,2)===Yr?(F=Yr,_+=2):(F=f,ge===0&&Be(Cl)),F!==f){for(T=[],k=_,ie=_,ge++,ce=vn(),ge--,ce===f?ie=void 0:(_=ie,ie=f),ie!==f?(ce=nn(),ce!==f?(ie=[ie,ce],k=ie):(_=k,k=f)):(_=k,k=f);k!==f;)T.push(k),k=_,ie=_,ge++,ce=vn(),ge--,ce===f?ie=void 0:(_=ie,ie=f),ie!==f?(ce=nn(),ce!==f?(ie=[ie,ce],k=ie):(_=k,k=f)):(_=k,k=f);F=[F,T],h=F}else _=h,h=f;return h}function sn(){var h,F,T,k;if(ge++,h=_,F=yf(),F!==f){for(T=[],k=Mo();k!==f;)T.push(k),k=Mo();rt=h,h=ef(F,T)}else _=h,h=f;return ge--,h===f&&(F=f,ge===0&&Be(Il)),h}function yf(){var h,F,T;return h=ba(),Xt.test(h)?_+=h.length:(h=f,ge===0&&Be(Pl)),h===f&&(h=_,P.charCodeAt(_)===92?(F=Tt,_++):(F=f,ge===0&&Be(Mi)),F!==f?(T=ku(),T!==f?h=T:(_=h,h=f)):(_=h,h=f)),h}function Mo(){var h;return h=ba(),Zt.test(h)?_+=h.length:(h=f,ge===0&&Be(Bl)),h}function Hn(){var h,F,T;return ge++,h=_,F=js(),F!==f?(P.charCodeAt(_)===105?(T=se,_++):(T=f,ge===0&&Be(la)),T===f&&(T=null),rt=h,h=Di(F,T)):(_=h,h=f),ge--,h===f&&(F=f,ge===0&&Be(jr)),h}function js(){var h,F,T,k;if(ge++,h=_,P.charCodeAt(_)===34?(F=Re,_++):(F=f,ge===0&&Be(gu)),F!==f){for(T=[],k=qo();k!==f;)T.push(k),k=qo();P.charCodeAt(_)===34?(k=Re,_++):(k=f,ge===0&&Be(gu)),k!==f?(rt=h,h=le(T)):(_=h,h=f)}else _=h,h=f;if(h===f)if(h=_,P.charCodeAt(_)===39?(F=Je,_++):(F=f,ge===0&&Be(fa)),F!==f){for(T=[],k=Vo();k!==f;)T.push(k),k=Vo();P.charCodeAt(_)===39?(k=Je,_++):(k=f,ge===0&&Be(fa)),k!==f?(rt=h,h=Fe(T)):(_=h,h=f)}else _=h,h=f;return ge--,h===f&&(F=f,ge===0&&Be(qi)),h}function qo(){var h,F,T,k;return h=_,F=_,T=_,ge++,k=P.charAt(_),ir.test(k)?_++:(k=f,ge===0&&Be(yn)),ge--,k===f?T=void 0:(_=T,T=f),T!==f?(k=nn(),k!==f?(T=[T,k],F=T):(_=F,F=f)):(_=F,F=f),F!==f?h=P.substring(h,_):h=F,h===f&&(h=_,P.charCodeAt(_)===92?(F=Tt,_++):(F=f,ge===0&&Be(Mi)),F!==f?(T=an(),T!==f?h=T:(_=h,h=f)):(_=h,h=f),h===f&&(h=pi())),h}function Vo(){var h,F,T,k;return h=_,F=_,T=_,ge++,k=P.charAt(_),hr.test(k)?_++:(k=f,ge===0&&Be(vo)),ge--,k===f?T=void 0:(_=T,T=f),T!==f?(k=nn(),k!==f?(T=[T,k],F=T):(_=F,F=f)):(_=F,F=f),F!==f?h=P.substring(h,_):h=F,h===f&&(h=_,P.charCodeAt(_)===92?(F=Tt,_++):(F=f,ge===0&&Be(Mi)),F!==f?(T=an(),T!==f?h=T:(_=h,h=f)):(_=h,h=f),h===f&&(h=pi())),h}function Sf(){var h,F,T,k,ie,ce;if(ge++,h=_,P.charCodeAt(_)===91?(F=K,_++):(F=f,ge===0&&Be(wo)),F!==f){for(P.charCodeAt(_)===94?(T=fe,_++):(T=f,ge===0&&Be(bo)),T===f&&(T=null),k=[],ie=Ko(),ie===f&&(ie=ti(),ie===f&&(ie=ys()));ie!==f;)k.push(ie),ie=Ko(),ie===f&&(ie=ti(),ie===f&&(ie=ys()));P.charCodeAt(_)===93?(ie=Ve,_++):(ie=f,ge===0&&Be(Eo)),ie!==f?(ce=Wo(),rt=h,h=be(T,k,ce)):(_=h,h=f)}else _=h,h=f;return ge--,h===f&&(F=f,ge===0&&Be(mo)),h}function Ko(){var h,F,T;return h=_,P.charCodeAt(_)===92?(F=Tt,_++):(F=f,ge===0&&Be(Mi)),F!==f?(T=zo(),T!==f?h=T:(_=h,h=f)):(_=h,h=f),h}function zo(){var h,F,T,k,ie,ce,it;return h=_,F=_,T=_,k=P.charAt(_),k.toLowerCase()===ze?_++:(k=f,ge===0&&Be(Ao)),k!==f?(P.charCodeAt(_)===123?(ie=Ae,_++):(ie=f,ge===0&&Be(Zn)),ie!==f?(ce=Go(),ce!==f?(P.charCodeAt(_)===125?(it=Z,_++):(it=f,ge===0&&Be(Qn)),it!==f?(k=[k,ie,ce,it],T=k):(_=T,T=f)):(_=T,T=f)):(_=T,T=f)):(_=T,T=f),T!==f?F=P.substring(F,_):F=T,F!==f&&(rt=h,F=nt(F)),h=F,h}function Go(){var h,F,T,k;return h=_,F=_f(),F!==f?(P.charCodeAt(_)===61?(T=Pe,_++):(T=f,ge===0&&Be(ca)),T!==f?(k=Df(),k!==f?(F=[F,T,k],h=F):(_=h,h=f)):(_=h,h=f)):(_=h,h=f),h===f&&(h=$u()),h}function _f(){var h,F,T;if(h=_,F=[],T=As(),T!==f)for(;T!==f;)F.push(T),T=As();else F=f;return F!==f?h=P.substring(h,_):h=F,h}function Df(){var h,F,T;if(h=_,F=[],T=Fi(),T!==f)for(;T!==f;)F.push(T),T=Fi();else F=f;return F!==f?h=P.substring(h,_):h=F,h}function $u(){var h,F,T;if(h=_,F=[],T=Fi(),T!==f)for(;T!==f;)F.push(T),T=Fi();else F=f;return F!==f?h=P.substring(h,_):h=F,h}function Fi(){var h;return h=As(),h===f&&(h=Pa()),h}function As(){var h;return h=Ff(),h===f&&(P.charCodeAt(_)===95?(h=_e,_++):(h=f,ge===0&&Be(pn))),h}function Ff(){var h;return h=P.charAt(_),Sr.test(h)?_++:(h=f,ge===0&&Be($l)),h}function Wo(){var h,F,T;for(h=_,F=[],T=Yo();T!==f;)F.push(T),T=Yo();return rt=h,F=St(F),h=F,h}function Yo(){var h,F;return h=_,P.charCodeAt(_)===105?(F=se,_++):(F=f,ge===0&&Be(la)),F!==f&&(rt=h,F=Jt()),h=F,h===f&&(h=_,P.charCodeAt(_)===117?(F=Ze,_++):(F=f,ge===0&&Be(tn)),F!==f&&(rt=h,F=xr()),h=F),h}function ti(){var h,F,T,k;return h=_,F=ys(),F!==f?(P.charCodeAt(_)===45?(T=Qe,_++):(T=f,ge===0&&Be(Rl)),T!==f?(k=ys(),k!==f?(rt=h,h=ar(F,k)):(_=h,h=f)):(_=h,h=f)):(_=h,h=f),h}function ys(){var h,F,T,k;return h=_,F=_,T=_,ge++,k=P.charAt(_),Mr.test(k)?_++:(k=f,ge===0&&Be(yo)),ge--,k===f?T=void 0:(_=T,T=f),T!==f?(k=nn(),k!==f?(T=[T,k],F=T):(_=F,F=f)):(_=F,F=f),F!==f?h=P.substring(h,_):h=F,h===f&&(h=_,P.charCodeAt(_)===92?(F=Tt,_++):(F=f,ge===0&&Be(Mi)),F!==f?(T=an(),T!==f?h=T:(_=h,h=f)):(_=h,h=f),h===f&&(h=pi())),h}function pi(){var h,F,T;return h=_,P.charCodeAt(_)===92?(F=Tt,_++):(F=f,ge===0&&Be(Mi)),F!==f?(T=Ia(),T!==f?(rt=h,h=Du()):(_=h,h=f)):(_=h,h=f),h}function an(){var h,F,T,k;return h=Cf(),h===f&&(h=_,P.charCodeAt(_)===48?(F=Mt,_++):(F=f,ge===0&&Be(yi)),F!==f?(T=_,ge++,k=Pa(),ge--,k===f?T=void 0:(_=T,T=f),T!==f?(rt=h,h=tf()):(_=h,h=f)):(_=h,h=f),h===f&&(h=Ci(),h===f&&(h=ku()))),h}function Cf(){var h;return h=Ru(),h===f&&(h=Jo()),h}function Ru(){var h,F;return h=P.charAt(_),An.test(h)?_++:(h=f,ge===0&&Be(ha)),h===f&&(h=_,P.charCodeAt(_)===98?(F=Me,_++):(F=f,ge===0&&Be(vu)),F!==f&&(rt=h,F=Sn()),h=F,h===f&&(h=_,P.charCodeAt(_)===102?(F=ht,_++):(F=f,ge===0&&Be(mr)),F!==f&&(rt=h,F=ga()),h=F,h===f&&(h=_,P.charCodeAt(_)===110?(F=qe,_++):(F=f,ge===0&&Be(Si)),F!==f&&(rt=h,F=rf()),h=F,h===f&&(h=_,P.charCodeAt(_)===114?(F=qt,_++):(F=f,ge===0&&Be(mu)),F!==f&&(rt=h,F=ps()),h=F,h===f&&(h=_,P.charCodeAt(_)===116?(F=Kt,_++):(F=f,ge===0&&Be(kl)),F!==f&&(rt=h,F=va()),h=F,h===f&&(h=_,P.charCodeAt(_)===118?(F=tt,_++):(F=f,ge===0&&Be(wu)),F!==f&&(rt=h,F=ma()),h=F)))))),h}function Jo(){var h,F,T,k;return h=_,F=_,T=_,ge++,k=Us(),k===f&&(k=vn()),ge--,k===f?T=void 0:(_=T,T=f),T!==f?(k=nn(),k!==f?(T=[T,k],F=T):(_=F,F=f)):(_=F,F=f),F!==f?h=P.substring(h,_):h=F,h}function Us(){var h;return h=Ru(),h===f&&(h=P.charAt(_),sr.test(h)?_++:(h=f,ge===0&&Be(xl))),h}function Ci(){var h,F,T,k,ie,ce;return h=_,P.charCodeAt(_)===120?(F=Lr,_++):(F=f,ge===0&&Be(Tl)),F!==f?(T=_,k=_,ie=jn(),ie!==f?(ce=jn(),ce!==f?(ie=[ie,ce],k=ie):(_=k,k=f)):(_=k,k=f),k!==f?T=P.substring(T,_):T=k,T!==f?(rt=h,h=er(T)):(_=h,h=f)):(_=h,h=f),h}function ku(){var h,F,T,k,ie,ce,it,wt;if(h=_,P.charCodeAt(_)===117?(F=Ze,_++):(F=f,ge===0&&Be(tn)),F!==f?(T=_,k=_,ie=jn(),ie!==f?(ce=jn(),ce!==f?(it=jn(),it!==f?(wt=jn(),wt!==f?(ie=[ie,ce,it,wt],k=ie):(_=k,k=f)):(_=k,k=f)):(_=k,k=f)):(_=k,k=f),k!==f?T=P.substring(T,_):T=k,T!==f?(rt=h,h=nf(T)):(_=h,h=f)):(_=h,h=f),h===f)if(h=_,P.charCodeAt(_)===117?(F=Ze,_++):(F=f,ge===0&&Be(tn)),F!==f)if(P.charCodeAt(_)===123?(T=Ae,_++):(T=f,ge===0&&Be(Zn)),T!==f){if(k=_,ie=[],ce=jn(),ce!==f)for(;ce!==f;)ie.push(ce),ce=jn();else ie=f;ie!==f?k=P.substring(k,_):k=ie,k!==f?(P.charCodeAt(_)===125?(ie=Z,_++):(ie=f,ge===0&&Be(Qn)),ie!==f?(rt=h,h=Ro(k)):(_=h,h=f)):(_=h,h=f)}else _=h,h=f;else _=h,h=f;return h}function Pa(){var h;return h=P.charAt(_),Xn.test(h)?_++:(h=f,ge===0&&Be(Ol)),h}function jn(){var h;return h=P.charAt(_),kr.test(h)?_++:(h=f,ge===0&&Be(So)),h}function If(){var h,F;return h=_,P.charCodeAt(_)===46?(F=ut,_++):(F=f,ge===0&&Be(pu)),F!==f&&(rt=h,F=wa()),h=F,h}function Ss(){var h,F,T,k;return ge++,h=_,P.charCodeAt(_)===123?(F=Ae,_++):(F=f,ge===0&&Be(Zn)),F!==f?(T=Vr(),P.charCodeAt(_)===125?(k=Z,_++):(k=f,ge===0&&Be(Qn)),k!==f?h=T:(_=h,h=f)):(_=h,h=f),ge--,h===f&&(F=f,ge===0&&Be(pa)),h}function Vr(){var h,F;return h=_,F=Ms(),rt=h,F=sf(F),h=F,h}function Ms(){var h,F,T,k,ie,ce;if(h=_,F=[],T=[],k=_,ie=_,ge++,ce=P.charAt(_),li.test(ce)?_++:(ce=f,ge===0&&Be(fi)),ge--,ce===f?ie=void 0:(_=ie,ie=f),ie!==f?(ce=nn(),ce!==f?(ie=[ie,ce],k=ie):(_=k,k=f)):(_=k,k=f),k!==f)for(;k!==f;)T.push(k),k=_,ie=_,ge++,ce=P.charAt(_),li.test(ce)?_++:(ce=f,ge===0&&Be(fi)),ge--,ce===f?ie=void 0:(_=ie,ie=f),ie!==f?(ce=nn(),ce!==f?(ie=[ie,ce],k=ie):(_=k,k=f)):(_=k,k=f);else T=f;for(T===f&&(T=_,P.charCodeAt(_)===123?(k=Ae,_++):(k=f,ge===0&&Be(Zn)),k!==f?(ie=Ms(),P.charCodeAt(_)===125?(ce=Z,_++):(ce=f,ge===0&&Be(Qn)),ce!==f?(k=[k,ie,ce],T=k):(_=T,T=f)):(_=T,T=f));T!==f;){if(F.push(T),T=[],k=_,ie=_,ge++,ce=P.charAt(_),li.test(ce)?_++:(ce=f,ge===0&&Be(fi)),ge--,ce===f?ie=void 0:(_=ie,ie=f),ie!==f?(ce=nn(),ce!==f?(ie=[ie,ce],k=ie):(_=k,k=f)):(_=k,k=f),k!==f)for(;k!==f;)T.push(k),k=_,ie=_,ge++,ce=P.charAt(_),li.test(ce)?_++:(ce=f,ge===0&&Be(fi)),ge--,ce===f?ie=void 0:(_=ie,ie=f),ie!==f?(ce=nn(),ce!==f?(ie=[ie,ce],k=ie):(_=k,k=f)):(_=k,k=f);else T=f;T===f&&(T=_,P.charCodeAt(_)===123?(k=Ae,_++):(k=f,ge===0&&Be(Zn)),k!==f?(ie=Ms(),P.charCodeAt(_)===125?(ce=Z,_++):(ce=f,ge===0&&Be(Qn)),ce!==f?(k=[k,ie,ce],T=k):(_=T,T=f)):(_=T,T=f))}return h=P.substring(h,_),h}function Xo(){var h,F,T,k;if(h=_,F=_,T=[],k=Pa(),k!==f)for(;k!==f;)T.push(k),k=Pa();else T=f;return T!==f?F=P.substring(F,_):F=T,F!==f&&(rt=h,F=af(F)),h=F,h}function ot(){var h,F;for(h=[],F=Ca(),F===f&&(F=Ia(),F===f&&(F=Ho()));F!==f;)h.push(F),F=Ca(),F===f&&(F=Ia(),F===f&&(F=Ho()));return h}function xu(){var h,F;for(h=[],F=Ca(),F===f&&(F=jo());F!==f;)h.push(F),F=Ca(),F===f&&(F=jo());return h}function _s(){var h,F,T,k;if(h=[],F=_,T=ot(),P.charCodeAt(_)===59?(k=Se,_++):(k=f,ge===0&&Be(Ts)),k!==f?(T=[T,k],F=T):(_=F,F=f),F!==f)for(;F!==f;)h.push(F),F=_,T=ot(),P.charCodeAt(_)===59?(k=Se,_++):(k=f,ge===0&&Be(Ts)),k!==f?(T=[T,k],F=T):(_=F,F=f);else h=f;return h===f&&(h=_,F=xu(),T=Uo(),T===f&&(T=null),k=Ia(),k!==f?(F=[F,T,k],h=F):(_=h,h=f),h===f&&(h=_,F=ot(),T=Gi(),T!==f?(F=[F,T],h=F):(_=h,h=f))),h}function Gi(){var h,F;return h=_,ge++,P.length>_?(F=P.charAt(_),_++):(F=f,ge===0&&Be(ou)),ge--,F===f?h=void 0:(_=h,h=f),h}var Tu=new Set(U.reservedWords);ds=X();var Kr=ds!==f&&_===P.length;function Ba(){throw ds!==f&&_<P.length&&Be(Aa()),Ir(Ns,rn<P.length?ba(rn):null,rn<P.length?vs(rn,rn+1):vs(rn,rn))}if(U.peg$library)return{peg$result:ds,peg$currPos:_,peg$FAILED:f,peg$maxFailExpected:Ns,peg$maxFailPos:rn,peg$success:Kr,peg$throw:Kr?void 0:Ba};if(Kr)return ds;Ba()},ye={$:"text","&":"simple_and","!":"simple_not"},Y={"?":"optional","*":"zero_or_more","+":"one_or_more"},de={"&":"semantic_and","!":"semantic_not"},W=(function(P){Uv(U,P);function U(f,q,G,X){bi(this,U);var re;return re=Hv(this,U,[f]),re.expected=q,re.found=G,re.location=X,re.name="SyntaxError",re}return Ei(U,[{key:"format",value:function(f){var q=this,G="Error: "+this.message;if(this.location){var X=null,re=f.find(function(Pe){return Pe.source===q.location.source});re&&(X=re.text.split(/\r\n|\n|\r/g));var Se=this.location.start,ue=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(Se):Se,Ee=this.location.source+":"+ue.line+":"+ue.column;if(X){var Ne=this.location.end,Ae="".padEnd(ue.line.toString().length," "),Z=X[Se.line-1],Ie=(Se.line===Ne.line?Ne.column:Z.length+1)-Se.column||1;G+=`
 --> `+Ee+`
`+Ae+` |
`+ue.line+" | "+Z+`
`+Ae+" | "+"".padEnd(Se.column-1," ")+"".padEnd(Ie,"^")}else G+=`
 at `+Ee}return G}}],[{key:"buildMessage",value:function(f,q){function G(Ie){return Ie.codePointAt(0).toString(16).toUpperCase()}var X=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function re(Ie){return X?Ie.replace(X,function(Pe){return"\\u{"+G(Pe)+"}"}):Ie}function Se(Ie){return re(Ie.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(Pe){return"\\x0"+G(Pe)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(Pe){return"\\x"+G(Pe)}))}function ue(Ie){return re(Ie.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(Pe){return"\\x0"+G(Pe)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(Pe){return"\\x"+G(Pe)}))}var Ee={literal:function(Ie){return'"'+Se(Ie.text)+'"'},class:function(Ie){var Pe=Ie.parts.map(function(je){return Array.isArray(je)?ue(je[0])+"-"+ue(je[1]):ue(je)});return"["+(Ie.inverted?"^":"")+Pe.join("")+"]"+(Ie.unicode?"u":"")},any:function(){return"any character"},end:function(){return"end of input"},other:function(Ie){return Ie.description}};function Ne(Ie){return Ee[Ie.type](Ie)}function Ae(Ie){var Pe=Ie.map(Ne);if(Pe.sort(),Pe.length>0){for(var je=1,oe=1;oe<Pe.length;oe++)Pe[oe-1]!==Pe[oe]&&(Pe[je]=Pe[oe],je++);Pe.length=je}switch(Pe.length){case 1:return Pe[0];case 2:return Pe[0]+" or "+Pe[1];default:return Pe.slice(0,-1).join(", ")+", or "+Pe[Pe.length-1]}}function Z(Ie){return Ie?'"'+Se(Ie)+'"':"end of input"}return"Expected "+Ae(f)+" but "+Z(q)+" found."}}]),U})(ll(SyntaxError));$e.exports={StartRules:["Grammar","ImportsAndSource"],SyntaxError:W,parse:ve}}),j=n(function(xe,$e){"use strict";var ve=function(Ae,Z,Ie){var Pe=ue.offsetStart(Z),je=Pe.line,oe=Pe.column-1,Te=Ae.split(`
`);return Te.length===1?new Se(je,oe,String(Z.source),Ae,Ie):new Se(null,null,String(Z.source),Te.map(function(Ke,Xe){return new Se(je+Xe,Xe===0?oe:0,String(Z.source),Xe===Te.length-1?Ke:[Ke,`
`],Ie)}))},ye=function(Ae,Z,Ie,Pe,je){if(Ie){var oe=ue.offsetEnd(Ie);return new Se(null,null,String(Ie.source),[Ae,ve(Z,Ie,je),new Se(oe.line,oe.column-1,String(Ie.source),Pe)])}return new Se(null,null,null,[Ae,Z,Pe])},Y=function(Ae,Z){if(!Ae.literals||!Ae.locations||!Ae.classes||!Ae.expectations||!Ae.functions||!Ae.importedNames)throw new Error("generateJS: generate bytecode was not called.");var Ie=Ae.literals,Pe=Ae.locations,je=Ae.classes,oe=Ae.expectations,Te=Ae.functions,Ke=Ae.importedNames;if(!Z.allowedStartRules)throw new Error("generateJS: options.allowedStartRules was not set.");var Xe=Z.allowedStartRules,We=Z.dependencies||{};function Rt(_e){var Ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",Qe=_e.match(/^\n*([ \t]+)/);return(Qe?_e.replace(new RegExp("^".concat(Qe[1]),"gm"),Ze):_e).replace(/[ \t]+$/,"")}function ut(_e){var Ze=!0,Qe=0;function Mt(Me){return Array.isArray(Me)?Me.map(function(ht){return Mt(ht)}):al(Me,Se)?(Qe++,Me.children=Mt(Me.children),Qe--,Me):(Ze?Me=Me.replace(/^(.+)$/gm,"  $1"):Me=Me.replace(/\n(\s*\S)/g,`
  $1`),Ze=!Qe||Me.endsWith(`
`),Me)}return Mt(_e)}function ur(_e){return"peg$c"+_e}function br(_e){return"peg$r"+_e}function Qr(_e){return"peg$e"+_e}function gr(_e){return"peg$f"+_e}function Yr(_e){return"peg$import"+_e}function Tt(_e){return"peg$parse"+_e}function se(){function _e(Me){return'"'+G(Me)+'"'}function Ze(Me){return"/^["+(Me.inverted?"^":"")+Me.value.map(function(ht){return Array.isArray(ht)?X(ht[0])+"-"+X(ht[1]):X(ht)}).join("")+"]/"+(Me.ignoreCase?"i":"")+(Me.unicode?"u":"")}function Qe(Me){switch(Me.type){case"rule":return'peg$otherExpectation("'+G(Me.value)+'")';case"literal":return'peg$literalExpectation("'+G(Me.value)+'", '+Me.ignoreCase+")";case"class":return"peg$classExpectation(["+Me.value.map(function(ht){return Array.isArray(ht)?'["'+G(ht[0])+'", "'+G(ht[1])+'"]':'"'+G(ht)+'"'}).join(", ")+"], "+Me.inverted+", "+Me.ignoreCase+", "+Me.unicode+")";case"any":return"peg$anyExpectation()";default:throw new Error("Unknown expectation type ("+JSON.stringify(Me)+")")}}function Mt(Me,ht){return ye(`
  function `.concat(gr(ht),"(").concat(Me.params.join(", "),") {"),Rt(Me.body,"    "),Me.location,"  }")}return new Se(null,null,Z.grammarSource,[Ie.map(function(Me,ht){return"  const "+ur(ht)+" = "+_e(Me)+";"}).concat("",je.map(function(Me,ht){return"  const "+br(ht)+" = "+Ze(Me)+";"})).concat("",oe.map(function(Me,ht){return"  const "+Qr(ht)+" = "+Qe(Me)+";"})).concat("").join(`
`)].concat(Vt(Te.map(Mt))))}function Re(_e,Ze){var Qe=[];return Qe.push(""),Z.trace&&Qe.push("peg$tracer.trace({",'  type: "rule.enter",',"  rule: "+_e+",","  location: peg$computeLocation(startPos, startPos, true)","});",""),Z.cache&&(Qe.push("const key = peg$currPos * "+Ae.rules.length+" + "+Ze+";","const cached = peg$resultsCache[key];","","if (cached) {","  peg$currPos = cached.nextPos;",""),Z.trace&&Qe.push("if (cached.result !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+_e+",","    result: cached.result,","    location: peg$computeLocation(startPos, peg$currPos, true)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+_e+",","    location: peg$computeLocation(startPos, startPos, true)","  });","}",""),Qe.push("  return cached.result;","}","")),Qe}function Je(_e,Ze){var Qe=[];return Z.cache&&Qe.push("","peg$resultsCache[key] = { nextPos: peg$currPos, result: "+Ze+" };"),Z.trace&&Qe.push("","if ("+Ze+" !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+_e+",","    result: "+Ze+",","    location: peg$computeLocation(startPos, peg$currPos, true)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+_e+",","    location: peg$computeLocation(startPos, startPos, true)","  });","}"),Qe.push("","return "+Ze+";"),Qe}function K(_e){var Ze,Qe,Mt,Me=[],ht=_e.bytecode,qe=new P(_e.name,"s","let",ht);function qt(tt){var Lr=function(){switch(tt[Le]){case W.PUSH_EMPTY_STRING:bt.push(qe.push("''")),Le++;break;case W.PUSH_CURR_POS:bt.push(qe.push("peg$currPos")),Le++;break;case W.PUSH_UNDEFINED:bt.push(qe.push("undefined")),Le++;break;case W.PUSH_NULL:bt.push(qe.push("null")),Le++;break;case W.PUSH_FAILED:bt.push(qe.push("peg$FAILED")),Le++;break;case W.PUSH_EMPTY_ARRAY:bt.push(qe.push("[]")),Le++;break;case W.POP:qe.pop(),Le++;break;case W.POP_CURR_POS:bt.push("peg$currPos = "+qe.pop()+";"),Le++;break;case W.POP_N:qe.pop(tt[Le+1]),Le+=2;break;case W.NIP:Rr=qe.pop(),qe.pop(),bt.push(qe.push(Rr)),Le++;break;case W.APPEND:Rr=qe.pop(),bt.push(qe.top()+".push("+Rr+");"),Le++;break;case W.WRAP:bt.push(qe.push("["+qe.pop(tt[Le+1]).join(", ")+"]")),Le+=2;break;case W.TEXT:bt.push(qe.push("input.substring("+qe.pop()+", peg$currPos)")),Le++;break;case W.PLUCK:{var Xt=tt[Le+3-1],Zt=3+Xt;Rr=tt.slice(Le+3,Le+Zt),Rr=Xt===1?qe.index(Rr[0]):"[ ".concat(Rr.map(function(kr){return qe.index(kr)}).join(", ")," ]"),qe.pop(tt[Le+1]),bt.push(qe.push(Rr)),Le+=Zt;break}case W.IF:_t(qe.top(),0);break;case W.IF_ERROR:_t(qe.top()+" === peg$FAILED",0);break;case W.IF_NOT_ERROR:_t(qe.top()+" !== peg$FAILED",0);break;case W.IF_LT:_t(qe.top()+".length < "+tt[Le+1],1);break;case W.IF_GE:_t(qe.top()+".length >= "+tt[Le+1],1);break;case W.IF_LT_DYNAMIC:_t(qe.top()+".length < ("+qe.index(tt[Le+1])+"|0)",1);break;case W.IF_GE_DYNAMIC:_t(qe.top()+".length >= ("+qe.index(tt[Le+1])+"|0)",1);break;case W.WHILE_NOT_ERROR:Hr(qe.top()+" !== peg$FAILED");break;case W.MATCH_ANY:_t("input.length > peg$currPos",0);break;case W.MATCH_STRING:{var ir=tt[Le+1],hr=Ie[ir];tr(function(kr,li){return hr.length>1?"".concat(kr," === ").concat(ur(ir)):(kr=li?"".concat(kr,".charCodeAt(0)"):"input.charCodeAt(peg$currPos)","".concat(kr," === ").concat(hr.charCodeAt(0)))},1,hr.length);break}case W.MATCH_STRING_IC:{var Sr=tt[Le+1];tr(function(kr){return"".concat(kr,".toLowerCase() === ").concat(ur(Sr))},1,Ie[Sr].length);break}case W.MATCH_CHAR_CLASS:{var Mr=tt[Le+1];tr(function(kr){return"".concat(br(Mr),".test(").concat(kr,")")},1,1);break}case W.MATCH_UNICODE_CLASS:{var An=tt[Le+1];tr(function(kr){return"".concat(br(An),".test(").concat(kr,")")},1,-1);break}case W.ACCEPT_N:bt.push(qe.push(vr(tt[Le+1]))),bt.push(ft(tt[Le+1],qe.top())),Le+=2;break;case W.ACCEPT_STRING:bt.push(qe.push(ur(tt[Le+1]))),bt.push(Ie[tt[Le+1]].length>1?"peg$currPos += "+Ie[tt[Le+1]].length+";":"peg$currPos++;"),Le+=2;break;case W.FAIL:bt.push(qe.push("peg$FAILED")),bt.push("if (peg$silentFails === 0) { peg$fail("+Qr(tt[Le+1])+"); }"),Le+=2;break;case W.LOAD_SAVED_POS:bt.push("peg$savedPos = "+qe.index(tt[Le+1])+";"),Le+=2;break;case W.UPDATE_SAVED_POS:bt.push("peg$savedPos = peg$currPos;"),Le++;break;case W.CALL:Rr=yr(4),qe.pop(tt[Le+2]),bt.push(qe.push(Rr)),Le+=4+tt[Le+3];break;case W.RULE:bt.push(qe.push(Tt(Ae.rules[tt[Le+1]].name)+"()")),Le+=2;break;case W.LIBRARY_RULE:{var sr=tt[Le+2],Xn=sr===-1?"":', "'+Ke[sr]+'"';bt.push(qe.push("peg$callLibrary("+Yr(tt[Le+1])+Xn+")")),Le+=3;break}case W.SILENT_FAILS_ON:bt.push("peg$silentFails++;"),Le++;break;case W.SILENT_FAILS_OFF:bt.push("peg$silentFails--;"),Le++;break;case W.SOURCE_MAP_PUSH:qe.sourceMapPush(bt,Pe[tt[Le+1]]),Le+=2;break;case W.SOURCE_MAP_POP:{qe.sourceMapPop(),Le++;break}case W.SOURCE_MAP_LABEL_PUSH:qe.labels[tt[Le+1]]={label:Ie[tt[Le+2]],location:Pe[tt[Le+3]]},Le+=4;break;case W.SOURCE_MAP_LABEL_POP:delete qe.labels[tt[Le+1]],Le+=2;break;default:throw new Error("Invalid opcode: "+tt[Le]+".")}},Le=0,Ui=tt.length,bt=[],Rr;function _t(Xt,Zt,ir){var hr,Sr,Mr=Zt+3,An=tt[Le+Mr-2],sr=tt[Le+Mr-1],Xn=ua(qe.checkedIf(Le,function(){return Le+=Mr+An,(ir||qt)(tt.slice(Le-An,Le))},sr>0?function(){return Le+=sr,qt(tt.slice(Le-sr,Le))}:null),2),kr=Xn[0],li=Xn[1];bt.push("if ("+Xt+") {"),(hr=bt).push.apply(hr,Vt(ut(kr))),sr>0&&(bt.push("} else {"),(Sr=bt).push.apply(Sr,Vt(ut(li)))),bt.push("}")}function vr(Xt){switch(Xt){case-1:return"peg$getUnicode()";case 1:return"input.charAt(peg$currPos)";default:return"input.substr(peg$currPos, ".concat(Xt,")")}}function ft(Xt,Zt){switch(Xt){case-1:return"peg$currPos += ".concat(Zt,".length;");case 1:return"peg$currPos++;";default:return"peg$currPos += ("+Xt+");"}}function tr(Xt,Zt,ir){var hr=Zt+3,Sr=vr(ir),Mr=null;tt[Le+hr]===W.ACCEPT_N&&tt[Le+hr+1]===ir&&(bt.push(qe.push(Sr)),Sr=qe.pop(),Mr=function(An){qe.sp++;var sr=qt(An.slice(2));return sr.unshift(ft(ir,Sr)),sr}),_t(Xt(Sr,Mr!==null),Zt,Mr)}function Hr(Xt){var Zt,ir=tt[Le+2-1],hr=qe.checkedLoop(Le,function(){return Le+=2+ir,qt(tt.slice(Le-ir,Le))});bt.push("while ("+Xt+") {"),(Zt=bt).push.apply(Zt,Vt(ut(hr))),bt.push("}")}function yr(Xt){var Zt=tt[Le+Xt-1];return gr(tt[Le+1])+"("+tt.slice(Le+Xt,Le+Xt+Zt).map(function(ir){return qe.index(ir)}).join(", ")+")"}for(;Le<Ui;)Lr();return bt}var Kt=qt(ht);return Me.push(ye("function ",Tt(_e.name),_e.nameLocation,`() {
`,_e.name)),Z.trace&&Me.push("  var startPos = peg$currPos;"),Me.push(ut(qe.defines())),(Ze=Me).push.apply(Ze,Vt(ut(Re('"'+G(_e.name)+'"',de.indexOfRule(Ae,_e.name))))),(Qe=Me).push.apply(Qe,Vt(ut(Kt))),(Mt=Me).push.apply(Mt,Vt(ut(Je('"'+G(_e.name)+'"',qe.result())))),Me.push("}"),Me.push(""),Me}function fe(_e){return _e.codeLocation?ve(_e.code,_e.codeLocation,"$"+_e.type):_e.code}function Ve(){var _e=[],Ze=Ae.topLevelInitializer;if(Ze)if(Array.isArray(Ze)){if(Z.format==="es"){var Qe=[],Mt=[],Me=!0,ht=!1,qe=void 0;try{for(var qt=Ze[Symbol.iterator](),Kt;!(Me=(Kt=qt.next()).done);Me=!0){var tt=Kt.value,Lr=ua(Ne(tt.code,{startRule:"ImportsAndSource",grammarSource:new ue(tt.codeLocation.source,tt.codeLocation.start)}),2),Le=Lr[0],Ui=Lr[1];Le.code?(Qe.push(Le),Mt.push(Ui)):Mt.push(tt)}}catch(sr){ht=!0,qe=sr}finally{try{!Me&&qt.return!=null&&qt.return()}finally{if(ht)throw qe}}Ze=Mt.concat(Qe)}var bt=Ze.slice(0).reverse(),Rr=!0,_t=!1,vr=void 0;try{for(var ft=bt[Symbol.iterator](),tr;!(Rr=(tr=ft.next()).done);Rr=!0){var Hr=tr.value;_e.push(fe(Hr)),_e.push("")}}catch(sr){_t=!0,vr=sr}finally{try{!Rr&&ft.return!=null&&ft.return()}finally{if(_t)throw vr}}}else _e.push(fe(Ze)),_e.push("");_e.push("class peg$SyntaxError extends SyntaxError {","  constructor(message, expected, found, location) {","    super(message);","    this.expected = expected;","    this.found = found;","    this.location = location;",'    this.name = "SyntaxError";',"  }","","  format(sources) {",'    let str = "Error: " + this.message;',"    if (this.location) {","      let src = null;","      const st = sources.find(s => s.source === this.location.source);","      if (st) {","        src = st.text.split(/\\r\\n|\\n|\\r/g);","      }","      const s = this.location.start;",'      const offset_s = (this.location.source && (typeof this.location.source.offset === "function"))',"        ? this.location.source.offset(s)","        : s;",'      const loc = this.location.source + ":" + offset_s.line + ":" + offset_s.column;',"      if (src) {","        const e = this.location.end;",'        const filler = "".padEnd(offset_s.line.toString().length, " ");',"        const line = src[s.line - 1];","        const last = s.line === e.line ? e.column : line.length + 1;","        const hatLen = (last - s.column) || 1;",'        str += "\\n --> " + loc + "\\n"','            + filler + " |\\n"','            + offset_s.line + " | " + line + "\\n"','            + filler + " | " + "".padEnd(s.column - 1, " ")','            + "".padEnd(hatLen, "^");',"      } else {",'        str += "\\n at " + loc;',"      }","    }","    return str;","  }","","  static buildMessage(expected, found) {","    function hex(ch) {","      return ch.codePointAt(0).toString(16).toUpperCase();","    }","",'    const nonPrintable = Object.prototype.hasOwnProperty.call(RegExp.prototype, "unicode")','      ? new RegExp("[\\\\p{C}\\\\p{Mn}\\\\p{Mc}]", "gu")',"      : null;","    function unicodeEscape(s) {","      if (nonPrintable) {",'        return s.replace(nonPrintable,  ch => "\\\\u{" + hex(ch) + "}");',"      }","      return s;","    }","","    function literalEscape(s) {","      return unicodeEscape(s",'        .replace(/\\\\/g, "\\\\\\\\")','        .replace(/"/g,  "\\\\\\"")','        .replace(/\\0/g, "\\\\0")','        .replace(/\\t/g, "\\\\t")','        .replace(/\\n/g, "\\\\n")','        .replace(/\\r/g, "\\\\r")','        .replace(/[\\x00-\\x0F]/g,          ch => "\\\\x0" + hex(ch))','        .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, ch => "\\\\x"  + hex(ch)));',"    }","","    function classEscape(s) {","      return unicodeEscape(s",'        .replace(/\\\\/g, "\\\\\\\\")','        .replace(/\\]/g, "\\\\]")','        .replace(/\\^/g, "\\\\^")','        .replace(/-/g,  "\\\\-")','        .replace(/\\0/g, "\\\\0")','        .replace(/\\t/g, "\\\\t")','        .replace(/\\n/g, "\\\\n")','        .replace(/\\r/g, "\\\\r")','        .replace(/[\\x00-\\x0F]/g,          ch => "\\\\x0" + hex(ch))','        .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, ch => "\\\\x"  + hex(ch)));',"    }","","    const DESCRIBE_EXPECTATION_FNS = {","      literal(expectation) {",'        return "\\"" + literalEscape(expectation.text) + "\\"";',"      },","","      class(expectation) {","        const escapedParts = expectation.parts.map(","          part => (Array.isArray(part)",'            ? classEscape(part[0]) + "-" + classEscape(part[1])',"            : classEscape(part))","        );","",'        return "[" + (expectation.inverted ? "^" : "") + escapedParts.join("") + "]" + (expectation.unicode ? "u" : "");',"      },","","      any() {",'        return "any character";',"      },","","      end() {",'        return "end of input";',"      },","","      other(expectation) {","        return expectation.description;","      },","    };","","    function describeExpectation(expectation) {","      return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);","    }","","    function describeExpected(expected) {","      const descriptions = expected.map(describeExpectation);","      descriptions.sort();","","      if (descriptions.length > 0) {","        let j = 1;","        for (let i = 1; i < descriptions.length; i++) {","          if (descriptions[i - 1] !== descriptions[i]) {","            descriptions[j] = descriptions[i];","            j++;","          }","        }","        descriptions.length = j;","      }","","      switch (descriptions.length) {","        case 1:","          return descriptions[0];","","        case 2:",'          return descriptions[0] + " or " + descriptions[1];',"","        default:",'          return descriptions.slice(0, -1).join(", ")','            + ", or "',"            + descriptions[descriptions.length - 1];","      }","    }","","    function describeFound(found) {",'      return found ? "\\"" + literalEscape(found) + "\\"" : "end of input";',"    }","",'    return "Expected " + describeExpected(expected) + " but " + describeFound(found) + " found.";',"  }","}",""),Z.trace&&_e.push("class peg$DefaultTracer {","  constructor() {","    this.indentLevel = 0;","  }","","  trace(event) {","    const that = this;","","    function log(event) {","      console?.log?.(",'        event.location.start.line + ":" + event.location.start.column + "-"','          + event.location.end.line + ":" + event.location.end.column + " "','          + event.type.padEnd(10, " ")','          + "".padEnd((that.indentLevel * 2) + 1, " ") + event.rule',"       );","    }","","    switch (event.type) {",'      case "rule.enter":',"        log(event);","        this.indentLevel++;","        break;","",'      case "rule.match":',"        this.indentLevel--;","        log(event);","        break;","",'      case "rule.fail":',"        this.indentLevel--;","        log(event);","        break;","","      default:",'        throw new Error("Invalid event type: " + event.type + ".");',"    }","  }","}","");var yr=`{
`+Xe.map(function(sr){return"    ".concat(sr,": ").concat(Tt(sr),`,
`)}).join("")+"  }",Xt=Tt(Xe[0]),Zt=!0,ir=!1,hr=void 0;if(_e.push("function peg$parse(input, options) {","  options = options !== undefined ? options : {};","","  const peg$FAILED = {};","  const peg$source = options.grammarSource;","","  const peg$startRuleFunctions = "+yr+";","  let peg$startRuleFunction = "+Xt+";","",se(),"","  let peg$currPos = options.peg$currPos | 0;","  let peg$savedPos = peg$currPos;","  const peg$posDetailsCache = [{ line: 1, column: 1 }];","  let peg$maxFailPos = peg$currPos;","  let peg$maxFailExpected = options.peg$maxFailExpected || [];","  let peg$silentFails = options.peg$silentFails | 0;",""),Z.cache&&_e.push("  let peg$resultsCache = {};",""),Z.trace&&_e.push('  let peg$tracer = "tracer" in options ? options.tracer : new peg$DefaultTracer();',""),_e.push("  let peg$result;","","  if (options.startRule) {","    if (!(options.startRule in peg$startRuleFunctions)) {",`      throw new Error("Can't start parsing from rule \\"" + options.startRule + "\\".");`,"    }","","    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];","  }","","  function text() {","    return input.substring(peg$savedPos, peg$currPos);","  }","","  function offset() {","    return peg$savedPos;","  }","","  function range() {","    return {","      source: peg$source,","      start: peg$savedPos,","      end: peg$currPos,","    };","  }","","  function location() {","    return peg$computeLocation(peg$savedPos, peg$currPos);","  }","","  function expected(description, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildStructuredError(","      [peg$otherExpectation(description)],","      input.substring(peg$savedPos, peg$currPos),","      location","    );","  }","","  function error(message, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildSimpleError(message, location);","  }","","  function peg$getUnicode(pos = peg$currPos) {","    const cp = input.codePointAt(pos);","    if (cp === undefined) {",'      return "";',"    }","    return String.fromCodePoint(cp);","  }","","  function peg$literalExpectation(text, ignoreCase) {",'    return { type: "literal", text, ignoreCase };',"  }","","  function peg$classExpectation(parts, inverted, ignoreCase, unicode) {",'    return { type: "class", parts, inverted, ignoreCase, unicode };',"  }","","  function peg$anyExpectation() {",'    return { type: "any" };',"  }","","  function peg$endExpectation() {",'    return { type: "end" };',"  }","","  function peg$otherExpectation(description) {",'    return { type: "other", description };',"  }","","  function peg$computePosDetails(pos) {","    let details = peg$posDetailsCache[pos];","    let p;","","    if (details) {","      return details;","    } else {","      if (pos >= peg$posDetailsCache.length) {","        p = peg$posDetailsCache.length - 1;","      } else {","        p = pos;","        while (!peg$posDetailsCache[--p]) {}","      }","","      details = peg$posDetailsCache[p];","      details = {","        line: details.line,","        column: details.column,","      };","","      while (p < pos) {","        if (input.charCodeAt(p) === 10) {","          details.line++;","          details.column = 1;","        } else {","          details.column++;","        }","","        p++;","      }","","      peg$posDetailsCache[pos] = details;","","      return details;","    }","  }","","  function peg$computeLocation(startPos, endPos, offset) {","    const startPosDetails = peg$computePosDetails(startPos);","    const endPosDetails = peg$computePosDetails(endPos);","","    const res = {","      source: peg$source,","      start: {","        offset: startPos,","        line: startPosDetails.line,","        column: startPosDetails.column,","      },","      end: {","        offset: endPos,","        line: endPosDetails.line,","        column: endPosDetails.column,","      },","    };",'    if (offset && peg$source && (typeof peg$source.offset === "function")) {',"      res.start = peg$source.offset(res.start);","      res.end = peg$source.offset(res.end);","    }","    return res;","  }","","  function peg$fail(expected) {","    if (peg$currPos < peg$maxFailPos) { return; }","","    if (peg$currPos > peg$maxFailPos) {","      peg$maxFailPos = peg$currPos;","      peg$maxFailExpected = [];","    }","","    peg$maxFailExpected.push(expected);","  }","","  function peg$buildSimpleError(message, location) {","    return new peg$SyntaxError(message, null, null, location);","  }","","  function peg$buildStructuredError(expected, found, location) {","    return new peg$SyntaxError(","      peg$SyntaxError.buildMessage(expected, found),","      expected,","      found,","      location","    );","  }",""),Ae.imports.length>0&&_e.push("  function peg$callLibrary(lib, startRule) {","    const opts = Object.assign({}, options, {","      startRule: startRule,","      peg$currPos: peg$currPos,","      peg$silentFails: peg$silentFails,","      peg$library: true,","      peg$maxFailExpected: peg$maxFailExpected","    });","    const res = lib.parse(input, opts);","    peg$currPos = res.peg$currPos;","    peg$maxFailPos = res.peg$maxFailPos;","    peg$maxFailExpected = res.peg$maxFailExpected;","    return (res.peg$result === res.peg$FAILED) ? peg$FAILED : res.peg$result;","  }",""),Ae.rules.forEach(function(sr){var Xn;(Xn=_e).push.apply(Xn,Vt(ut(K(sr))))}),Ae.initializer)if(Array.isArray(Ae.initializer))try{for(var Sr=Ae.initializer[Symbol.iterator](),Mr;!(Zt=(Mr=Sr.next()).done);Zt=!0){var An=Mr.value;_e.push(fe(An)),_e.push("")}}catch(sr){ir=!0,hr=sr}finally{try{!Zt&&Sr.return!=null&&Sr.return()}finally{if(ir)throw hr}}else _e.push(fe(Ae.initializer)),_e.push("");return _e.push("  peg$result = peg$startRuleFunction();","","  const peg$success = (peg$result !== peg$FAILED && peg$currPos === input.length);","  function peg$throw() {","    if (peg$result !== peg$FAILED && peg$currPos < input.length) {","      peg$fail(peg$endExpectation());","    }","","    throw peg$buildStructuredError(","      peg$maxFailExpected,","      peg$maxFailPos < input.length ? peg$getUnicode(peg$maxFailPos) : null,","      peg$maxFailPos < input.length","        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)","        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)","    );","  }","  if (options.peg$library) {","    return /** @type {any} */ ({","      peg$result,","      peg$currPos,","      peg$FAILED,","      peg$maxFailExpected,","      peg$maxFailPos,","      peg$success,","      peg$throw: peg$success ? undefined : peg$throw,","    });","  }","  if (peg$success) {","    return peg$result;","  } else {","    peg$throw();","  }","}"),new Se(null,null,Z.grammarSource,_e.map(function(sr){return al(sr,Se)?sr:sr+`
`}))}function ze(_e){function Ze(){return["// @generated by Peggy ".concat(f,"."),"//","// https://peggyjs.org/"]}function Qe(){var Me=["{"];return Z.trace&&Me.push("  DefaultTracer: peg$DefaultTracer,"),Z.allowedStartRules&&Me.push("  StartRules: ["+Z.allowedStartRules.map(function(ht){return'"'+ht+'"'}).join(", ")+"],"),Me.push("  SyntaxError: peg$SyntaxError,","  parse: peg$parse,"),Me.push("}"),Me.join(`
`)}var Mt={bare:function(){if(Object.keys(We).length>0||Ae.imports.length>0)throw new Error("Dependencies not supported in format 'bare'.");return Vt(Ze()).concat(["(function() {",'  "use strict";',_e,ut("return "+Qe()+";"),"})()"])},commonjs:function(){var ht=Object.keys(We),qe=Ze();qe.push("",'"use strict";'),ht.length>0&&(ht.forEach(function(tt){qe.push("const "+tt+' = require("'+G(We[tt])+'");')}),qe.push(""));for(var qt=Ae.imports.length,Kt=0;Kt<qt;Kt++)qe.push("const "+Yr(Kt)+' = require("'+G(Ae.imports[Kt].from.module)+'");');return qe.push("",_e,"","module.exports = "+Qe()+";"),qe},es:function(){var ht=Object.keys(We),qe=Ze();qe.push(""),ht.length>0&&(ht.forEach(function(Kt){qe.push("import "+Kt+' from "'+G(We[Kt])+'";')}),qe.push(""));for(var qt=0;qt<Ae.imports.length;qt++)qe.push("import * as "+Yr(qt)+' from "'+G(Ae.imports[qt].from.module)+'";');return qe.push("",_e,""),qe.push("const peg$allowedStartRules = [","  "+(Z.allowedStartRules?Z.allowedStartRules.map(function(Kt){return'"'+Kt+'"'}).join(`,
  `):""),"];",""),qe.push("export {"),Z.trace&&qe.push("  peg$DefaultTracer as DefaultTracer,"),qe.push("  peg$allowedStartRules as StartRules,","  peg$SyntaxError as SyntaxError,","  peg$parse as parse","};"),qe},amd:function(){if(Ae.imports.length>0)throw new Error("Imports are not supported in format 'amd'.");var ht=Object.keys(We),qe="["+ht.map(function(Kt){return We[Kt]}).map(function(Kt){return'"'+G(Kt)+'"'}).join(", ")+"]",qt=ht.join(", ");return Vt(Ze()).concat(["define("+qe+", function("+qt+") {",'  "use strict";',_e,"",ut("return "+Qe()+";"),"});"])},globals:function(){if(Object.keys(We).length>0||Ae.imports.length>0)throw new Error("Dependencies not supported in format 'globals'.");if(!Z.exportVar)throw new Error("No export variable defined for format 'globals'.");return Vt(Ze()).concat(["(function(root) {",'  "use strict";',_e,"",ut("root."+Z.exportVar+" = "+Qe()+";"),"})(this);"])},umd:function(){if(Ae.imports.length>0)throw new Error("Imports are not supported in format 'umd'.");var ht=Object.keys(We),qe=ht.map(function(Le){return We[Le]}),qt="["+qe.map(function(Le){return'"'+G(Le)+'"'}).join(", ")+"]",Kt=qe.map(function(Le){return'require("'+G(Le)+'")'}).join(", "),tt=ht.join(", "),Lr=Ze();return Lr.push("(function(root, factory) {",'  if (typeof define === "function" && define.amd) {',"    define("+qt+", factory);",'  } else if (typeof module === "object" && module.exports) {',"    module.exports = factory("+Kt+");"),Z.exportVar&&Lr.push("  } else {","    root."+Z.exportVar+" = factory();"),Lr.push("  }","})(this, function("+tt+") {",'  "use strict";',_e,"",ut("return "+Qe()+";"),"});"),Lr}}[Z.format||"bare"]();return new Se(null,null,Z.grammarSource,Mt.map(function(Me){return al(Me,Se)?Me:Me+`
`}))}Ae.code=ze(Ve())},de=c(),W=E(),P=ne(),U=pe(),f=U.version,q=I(),G=q.stringEscape,X=q.regexpClassEscape,re=L(),Se=re.SourceNode,ue=a(),Ee=B(),Ne=Ee.parse;$e.exports=Y}),R=n(function(xe,$e){"use strict";var ve=function(de,W,P){function U(q){return q.type==="rule"&&q.expression.type==="rule_ref"}function f(q,G,X){Y.build({rule_ref:function(re){re.name===G&&(re.name=X,P.info('Proxy rule "'.concat(G,'" replaced by the rule "').concat(X,'"'),re.location,[{message:"This rule will be used",location:ye.findRule(q,X).nameLocation}]))}})(q)}de.rules.forEach(function(q){U(q)&&f(de,q.name,q.expression.name)})},ye=c(),Y=i();$e.exports=ve}),M=n(function(xe,$e){"use strict";var ve=function(ue,Ee){var Ne=ue,Ae=Ee;Object.keys(Ne).forEach(function(Z){return delete Ne[Z]}),Object.keys(Ae).forEach(function(Z){Ne[Z]=Ae[Z]})},ye=function(ue){ue.sort(function(oe,Te){var Ke=ua(Array.isArray(oe)?oe:[oe,oe],2),Xe=Ke[0],We=Ke[1],Rt=ua(Array.isArray(Te)?Te:[Te,Te],2),ut=Rt[0],ur=Rt[1];return Xe!==ut?Xe<ut?-1:1:We!==ur?We>ur?-1:1:0});for(var Ee="",Ne="",Ae=0;Ae<ue.length;Ae++){var Z=ue[Ae],Ie=ua(Array.isArray(Z)?Z:[Z,Z],2),Pe=Ie[0],je=Ie[1];if(typeof Pe=="string"&&typeof je=="string"&&typeof Ee=="string"&&typeof Ne=="string"){if(je<=Ne){ue.splice(Ae--,1);continue}if(Ne.charCodeAt(0)+1>=Pe.charCodeAt(0)){ue.splice(Ae--,1),ue[Ae]=[Ee,Ne=je];continue}}Ee=Pe,Ne=je}return ue},Y=function(ue,Ee){U.build({class:function(Ne){var Ae;if(Ne.unicode){var Z=[],Ie=!0,Pe=!1,je=void 0;try{for(var oe=Ne.parts[Symbol.iterator](),Te;!(Ie=(Te=oe.next()).done);Ie=!0){var Ke=Te.value;if(Array.isArray(Ke)){var Xe=ua(Ke.map(function(ut){return ut.codePointAt(0)}),2),We=Xe[0],Rt=Xe[1];We<X&&Rt>re&&(Ee.info("Removing surrogate range from [".concat(P(Ke[0]),"-").concat(P(Ke[1]),"]"),Ne.location),Z.push([Se,Ke[1]]),Ke[1]=G)}}}catch(ut){Pe=!0,je=ut}finally{try{!Ie&&oe.return!=null&&oe.return()}finally{if(Pe)throw je}}(Ae=Ne.parts).push.apply(Ae,Vt(Z))}}})(ue)},de=function(ue,Ee,Ne){var Ae=Object.create(null);ue.rules.forEach(function(oe){return Ae[oe.name]=oe.expression});var Z=new Set;Y(ue,Ne);var Ie=[function(oe){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;switch(oe.type){case"class":if(oe.inverted)break;return Te?w6(Mv({},oe),{parts:Vt(oe.parts)}):oe;case"literal":{var Ke=q(oe.value);if(Ke<0)break;return{type:"class",parts:[oe.value],inverted:!1,ignoreCase:oe.ignoreCase,location:oe.location,unicode:Ke>65535}}case"rule_ref":{var Xe=Ae[oe.name];if(!Xe)break;Z.has(oe.name)||(Z.add(oe.name),je(Xe));var We=Pe(Xe,!0);return We&&(We.location=oe.location),We}}return null},U.build({choice:function(oe){var Te=null,Ke=!1;oe.alternatives.forEach(function(Xe,We){var Rt;je(Xe);var ut=Pe(Xe);if(!ut){Te=null;return}Te&&Te.ignoreCase===ut.ignoreCase?((Rt=Te.parts).push.apply(Rt,Vt(ut.parts)),oe.alternatives[We-1]=Te,oe.alternatives[We]=Te,Te.unicode=Te.unicode||ut.unicode,Te.location={source:Te.location.source,start:Te.location.start,end:ut.location.end},Ke=!0):Te=ut}),Ke&&(oe.alternatives=oe.alternatives.filter(function(Xe,We,Rt){return!We||Xe!==Rt[We-1]}),oe.alternatives.forEach(function(Xe,We){Xe.type==="class"&&(Xe.parts=ye(Xe.parts),Xe.parts.length===1&&!Array.isArray(Xe.parts[0])&&typeof Xe.parts[0]=="string"&&!Xe.inverted&&(oe.alternatives[We]={type:"literal",value:Xe.parts[0],ignoreCase:Xe.ignoreCase,location:Xe.location}))}),oe.alternatives.length===1&&ve(oe,oe.alternatives[0]))},text:function(oe){if(je(oe.expression),oe.expression.type==="class"||oe.expression.type==="literal"){var Te=oe.location;ve(oe,oe.expression),oe.location=Te}}})],Pe=Ie[0],je=Ie[1];ue.rules.forEach(function(oe){Z.add(oe.name),je(oe.expression)})},W=I(),P=W.stringEscape,U=i(),f=I(),q=f.codePointLen1,G=String.fromCodePoint(55295),X=55296,re=57343,Se=String.fromCodePoint(57344);$e.exports=de}),Q=n(function(xe,$e){"use strict";var ve=function(Y,de,W){var P=Object.create(null);Y.rules.forEach(function(X){P[X.name]=X});for(var U=Vt(de.allowedStartRules),f=new Set,q=ye.build({rule_ref:function(X){U.push(X.name)}});U.length;){var G=U.shift();f.has(G)||(f.add(G),q(P[G]))}Y.rules=Y.rules.filter(function(X){return f.has(X.name)?!0:(W.info('Removing unused rule: "'.concat(X.name,'"'),X.location),!1)})},ye=i();$e.exports=ve}),V=n(function(xe,$e){"use strict";var ve=function(ye,Y,de){var W={},P=!0,U=!1,f=void 0,q=!0,G=!1,X=void 0;try{for(var re=ye.imports[Symbol.iterator](),Se;!(q=(Se=re.next()).done);q=!0){var ue=Se.value;try{for(var Ee=ue.what[Symbol.iterator](),Ne;!(P=(Ne=Ee.next()).done);P=!0){var Ae=Ne.value;Ae.type==="import_binding_all"&&(Object.prototype.hasOwnProperty.call(W,Ae.binding)&&de.error('Module "'.concat(Ae.binding,'" is already imported'),Ae.location,[{message:"Original module location",location:W[Ae.binding]}]),W[Ae.binding]=Ae.location)}}catch(Z){U=!0,f=Z}finally{try{!P&&Ee.return!=null&&Ee.return()}finally{if(U)throw f}}}}catch(Z){G=!0,X=Z}finally{try{!q&&re.return!=null&&re.return()}finally{if(G)throw X}}};$e.exports=ve}),z=n(function(xe,$e){"use strict";var ve=function(Y,de,W){function P(q){var G={};return Object.keys(q).forEach(function(X){G[X]=q[X]}),G}function U(q,G){f(q.expression,P(G))}var f=ye.build({rule:function(q){f(q.expression,{})},choice:function(q,G){q.alternatives.forEach(function(X){f(X,P(G))})},action:U,labeled:function(q,G){var X=q.label;X&&Object.prototype.hasOwnProperty.call(G,X)&&W.error('Label "'.concat(q.label,'" is already defined'),q.labelLocation,[{message:"Original label location",location:G[X]}]),f(q.expression,G),G[q.label]=q.labelLocation},text:U,simple_and:U,simple_not:U,optional:U,zero_or_more:U,one_or_more:U,repeated:function(q,G){q.delimiter&&f(q.delimiter,P(G)),f(q.expression,P(G))},group:U});f(Y)},ye=i();$e.exports=ve}),te=n(function(xe,$e){"use strict";var ve=function(Y,de,W){var P={};ye.build({rule:function(U){if(Object.prototype.hasOwnProperty.call(P,U.name)){W.error('Rule "'.concat(U.name,'" is already defined'),U.nameLocation,[{message:"Original rule location",location:P[U.name]}]);return}P[U.name]=U.nameLocation}})(Y)},ye=i();$e.exports=ve}),me=n(function(xe,$e){"use strict";var ve=function(de,W,P){var U=[],f=[],q=new Set,G=Y.build({rule:function(X){P.errors>0||q.has(X.name)||(q.add(X.name),U.push(X.name),G(X.expression),U.pop())},sequence:function(X){P.errors>0||X.elements.every(function(re){return G(re),P.errors>0?!1:!ye.alwaysConsumesOnSuccess(de,re)})},repeated:function(X){P.errors>0||(G(X.expression),X.delimiter&&!ye.alwaysConsumesOnSuccess(de,X.expression)&&G(X.delimiter))},rule_ref:function(X){if(!(P.errors>0)){f.push(X);var re=ye.findRule(de,X.name);if(U.indexOf(X.name)!==-1){U.push(X.name),P.error("Possible infinite loop when parsing (left recursion: "+U.join(" -> ")+")",re.nameLocation,f.map(function(Se,ue,Ee){return{message:ue+1!==Ee.length?"Step ".concat(ue+1,': call of the rule "').concat(Se.name,'" without input consumption'):"Step ".concat(ue+1,": calls itself without input consumption - left recursion"),location:Se.location}}));return}re&&G(re),f.pop()}}});G(de)},ye=c(),Y=i();$e.exports=ve}),at=n(function(xe,$e){"use strict";var ve=function(de,W,P){var U=Y.build({zero_or_more:function(f){ye.alwaysConsumesOnSuccess(de,f.expression)||P.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",f.location)},one_or_more:function(f){ye.alwaysConsumesOnSuccess(de,f.expression)||P.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",f.location)},repeated:function(f){if(f.delimiter&&U(f.delimiter),!(ye.alwaysConsumesOnSuccess(de,f.expression)||f.delimiter&&ye.alwaysConsumesOnSuccess(de,f.delimiter)))if(f.max.value===null)P.error("Possible infinite loop when parsing (unbounded range repetition used with an expression that may not consume any input)",f.location);else{var q=f.min?f.min:f.max;P.warning(q.type==="constant"&&f.max.type==="constant"?"An expression may not consume any input and may always match ".concat(f.max.value," times"):"An expression may not consume any input and may always match with a maximum repetition count",f.location)}}});U(de)},ye=c(),Y=i();$e.exports=ve}),st=n(function(xe,$e){"use strict";var ve=function(de,W,P){Y.build({rule_ref:function(U){ye.findRule(de,U.name)||P.error('Rule "'.concat(U.name,'" is not defined'),U.location)}})(de)},ye=c(),Y=i();$e.exports=ve}),ct=n(function(xe,$e){"use strict";var ve=function(Y,de,W){var P=ye.build({action:function(U){P(U.expression,U)},labeled:function(U,f){U.pick&&f&&W.error('"@" cannot be used with an action block',U.labelLocation,[{message:"Action block location",location:f.codeLocation}]),P(U.expression)}});P(Y)},ye=i();$e.exports=ve}),It=n(function(xe,$e){"use strict";var ve=function(P,U,f){var q=ye.build({choice:function(G){G.alternatives.forEach(function(Se){return q(Se)});for(var X=0;X<G.alternatives.length-1;X++){var re=G.alternatives[X];re.match===de&&f.warning("Always matches.  Following alternatives may not be reachable.",re.location)}},simple_and:function(G){q(G.expression),G.expression.match===de?f.warning("Always matches, making the & predicate redundant.",G.expression.location):G.expression.match===W&&f.warning("Never matches, making the & predicate always fail.",G.expression.location)},simple_not:function(G){q(G.expression),G.expression.match===de?f.warning("Always matches, making the ! predicate always fail.",G.expression.location):G.expression.match===W&&f.warning("Never matches, making the ! predicate redundant.",G.expression.location)}});q(P)},ye=i(),Y=v(),de=Y.ALWAYS_MATCH,W=Y.NEVER_MATCH;$e.exports=ve}),Dt=n(function(xe,$e){"use strict";var ve=u(),ye=(function(){function de(W){bi(this,de),W=(typeof W>"u"?"undefined":Ai(W))<"u"?W:{},typeof W.error=="function"&&(this.error=W.error),typeof W.warning=="function"&&(this.warning=W.warning),typeof W.info=="function"&&(this.info=W.info)}return Ei(de,[{key:"error",value:function(){}},{key:"warning",value:function(){}},{key:"info",value:function(){}}]),de})(),Y=(function(){function de(W){bi(this,de),this._callbacks=new ye(W),this._firstError=null,this.errors=0,this.problems=[],this.stage=null}return Ei(de,[{key:"error",value:function(){for(var P=arguments.length,U=new Array(P),f=0;f<P;f++)U[f]=arguments[f];var q;++this.errors,this._firstError===null&&(this._firstError=uo(ve,Vt(U)),this._firstError.stage=this.stage,this._firstError.problems=this.problems),this.problems.push(["error"].concat(Vt(U))),(q=this._callbacks).error.apply(q,[this.stage].concat(Vt(U)))}},{key:"warning",value:function(){for(var P=arguments.length,U=new Array(P),f=0;f<P;f++)U[f]=arguments[f];var q;this.problems.push(["warning"].concat(Vt(U))),(q=this._callbacks).warning.apply(q,[this.stage].concat(Vt(U)))}},{key:"info",value:function(){for(var P=arguments.length,U=new Array(P),f=0;f<P;f++)U[f]=arguments[f];var q;this.problems.push(["info"].concat(Vt(U))),(q=this._callbacks).info.apply(q,[this.stage].concat(Vt(U)))}},{key:"checkErrors",value:function(){if(this.errors!==0)throw this._firstError}}]),de})();$e.exports=Y}),Ht=n(function(xe,$e){"use strict";var ve=function(Te,Ke){var Xe={};return Object.keys(Te).forEach(function(We){Xe[We]=Te[We]}),Object.keys(Ke).forEach(function(We){Object.prototype.hasOwnProperty.call(Xe,We)||(Xe[We]=Ke[We])}),Xe},ye=function(Te){return typeof Te=="string"?Te.length>0:Te&&typeof Te.offset=="function"},Y=l(),de=m(),W=g(),P=j(),U=v(),f=R(),q=M(),G=Q(),X=V(),re=z(),Se=te(),ue=me(),Ee=at(),Ne=st(),Ae=ct(),Z=It(),Ie=Dt(),Pe=i(),je=I().base64,oe={visitor:Pe,passes:{prepare:[Y,ue],check:[Ne,Se,re,Ee,Ae,X],transform:[de,f,q,G,U],semantic:[Z],generate:[W,P]},compile:function(Ke,Xe,We){We=We!==void 0?We:{};var Rt=[Ke.rules[0].name];if(We=ve(We,{allowedStartRules:Rt,cache:!1,dependencies:{},exportVar:null,format:"bare",output:"parser",trace:!1}),(We.allowedStartRules===null||We.allowedStartRules===void 0)&&(We.allowedStartRules=Rt),!Array.isArray(We.allowedStartRules))throw new Error("allowedStartRules must be an array");We.allowedStartRules.length===0&&(We.allowedStartRules=Rt);var ut=Ke.rules.map(function(K){return K.name}),ur=!0,br=!1,Qr=void 0;if(We.allowedStartRules.some(function(K){return K==="*"}))We.allowedStartRules=ut;else try{for(var gr=We.allowedStartRules[Symbol.iterator](),Yr;!(ur=(Yr=gr.next()).done);ur=!0){var Tt=Yr.value;if(ut.indexOf(Tt)===-1)throw new Error('Unknown start rule "'.concat(Tt,'"'))}}catch(K){br=!0,Qr=K}finally{try{!ur&&gr.return!=null&&gr.return()}finally{if(br)throw Qr}}if((We.output==="source-and-map"||We.output==="source-with-inline-map")&&!ye(We.grammarSource))throw new Error("Must provide grammarSource (as a string or GrammarLocation) in order to generate source maps");var se=new Ie(We);switch(Object.keys(Xe).forEach(function(K){se.stage=K,se.info("Process stage ".concat(K)),Xe[K].forEach(function(fe){se.info("Process pass ".concat(K,".").concat(fe.name)),fe(Ke,We,se)}),se.checkErrors()}),We.output){case"parser":return new Function(Ke.code.toString()());case"source":return Ke.code.toString();case"source-and-map":return Ke.code;case"source-with-inline-map":{if((typeof TextEncoder>"u"?"undefined":Ai(TextEncoder))>"u")throw new Error("TextEncoder is not supported by this platform");var Tt=Ke.code.toStringWithSourceMap(),Re=new TextEncoder,Je=je(Re.encode(JSON.stringify(Tt.map.toJSON())));return Tt.code+"//# sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(Je,`
`)}case"ast":return Ke;default:throw new Error("Invalid output format: "+We.output+".")}}};$e.exports=oe}),jt=u(),hn=a(),Ar=c(),lr=Ht(),Nr=B(),_r=pe(),xt=_r.version,fr=["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","null","true","false","enum","implements","interface","let","package","private","protected","public","static","yield","await","arguments","eval"],yt={VERSION:xt,RESERVED_WORDS:fr,GrammarError:jt,GrammarLocation:hn,parser:Nr,compiler:lr,generate:function(xe,$e){$e=$e!==void 0?$e:{};function ve(W){var P={};return Object.keys(W).forEach(function(U){P[U]=W[U].slice()}),P}var ye="plugins"in $e?$e.plugins:[],Y={parser:yt.parser,passes:ve(yt.compiler.passes),reservedWords:yt.RESERVED_WORDS.slice()};ye.forEach(function(W){W.use(Y,$e)}),Array.isArray(xe)||(xe=[{source:$e.grammarSource,text:xe}]);var de=Ar.combine(xe.map(function(W){var P=W.source,U=W.text;return Y.parser.parse(U,{grammarSource:P,reservedWords:Y.reservedWords})}));return yt.compiler.compile(de,Y.passes,$e)}};return r.exports=yt,t!=e&&(r.exports=e),r.exports})});var Pp=Et((Cp,Ip)=>{(function(e,t){typeof Cp=="object"&&typeof Ip<"u"?Ip.exports=t():typeof define=="function"&&define.amd?define(t):e.JSON5=t()})(Cp,(function(){"use strict";function e(K,fe){return fe={exports:{}},K(fe,fe.exports),fe.exports}var t=e(function(K){var fe=K.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=fe)}),r=e(function(K){var fe=K.exports={version:"2.6.5"};typeof __e=="number"&&(__e=fe)}),n=r.version,a=function(K){return typeof K=="object"?K!==null:typeof K=="function"},u=function(K){if(!a(K))throw TypeError(K+" is not an object!");return K},i=function(K){try{return!!K()}catch{return!0}},c=!i(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),l=t.document,m=a(l)&&a(l.createElement),E=function(K){return m?l.createElement(K):{}},b=!c&&!i(function(){return Object.defineProperty(E("div"),"a",{get:function(){return 7}}).a!=7}),v=function(K,fe){if(!a(K))return K;var Ve,ze;if(fe&&typeof(Ve=K.toString)=="function"&&!a(ze=Ve.call(K))||typeof(Ve=K.valueOf)=="function"&&!a(ze=Ve.call(K))||!fe&&typeof(Ve=K.toString)=="function"&&!a(ze=Ve.call(K)))return ze;throw TypeError("Can't convert object to primitive value")},g=Object.defineProperty,A=c?Object.defineProperty:function(fe,Ve,ze){if(u(fe),Ve=v(Ve,!0),u(ze),b)try{return g(fe,Ve,ze)}catch{}if("get"in ze||"set"in ze)throw TypeError("Accessors not supported!");return"value"in ze&&(fe[Ve]=ze.value),fe},w={f:A},S=function(K,fe){return{enumerable:!(K&1),configurable:!(K&2),writable:!(K&4),value:fe}},y=c?function(K,fe,Ve){return w.f(K,fe,S(1,Ve))}:function(K,fe,Ve){return K[fe]=Ve,K},C={}.hasOwnProperty,x=function(K,fe){return C.call(K,fe)},N=0,L=Math.random(),ne=function(K){return"Symbol(".concat(K===void 0?"":K,")_",(++N+L).toString(36))},pe=!1,I=e(function(K){var fe="__core-js_shared__",Ve=t[fe]||(t[fe]={});(K.exports=function(ze,_e){return Ve[ze]||(Ve[ze]=_e!==void 0?_e:{})})("versions",[]).push({version:r.version,mode:pe?"pure":"global",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})}),B=I("native-function-to-string",Function.toString),j=e(function(K){var fe=ne("src"),Ve="toString",ze=(""+B).split(Ve);r.inspectSource=function(_e){return B.call(_e)},(K.exports=function(_e,Ze,Qe,Mt){var Me=typeof Qe=="function";Me&&(x(Qe,"name")||y(Qe,"name",Ze)),_e[Ze]!==Qe&&(Me&&(x(Qe,fe)||y(Qe,fe,_e[Ze]?""+_e[Ze]:ze.join(String(Ze)))),_e===t?_e[Ze]=Qe:Mt?_e[Ze]?_e[Ze]=Qe:y(_e,Ze,Qe):(delete _e[Ze],y(_e,Ze,Qe)))})(Function.prototype,Ve,function(){return typeof this=="function"&&this[fe]||B.call(this)})}),R=function(K){if(typeof K!="function")throw TypeError(K+" is not a function!");return K},M=function(K,fe,Ve){if(R(K),fe===void 0)return K;switch(Ve){case 1:return function(ze){return K.call(fe,ze)};case 2:return function(ze,_e){return K.call(fe,ze,_e)};case 3:return function(ze,_e,Ze){return K.call(fe,ze,_e,Ze)}}return function(){return K.apply(fe,arguments)}},Q="prototype",V=function(K,fe,Ve){var ze=K&V.F,_e=K&V.G,Ze=K&V.S,Qe=K&V.P,Mt=K&V.B,Me=_e?t:Ze?t[fe]||(t[fe]={}):(t[fe]||{})[Q],ht=_e?r:r[fe]||(r[fe]={}),qe=ht[Q]||(ht[Q]={}),qt,Kt,tt,Lr;_e&&(Ve=fe);for(qt in Ve)Kt=!ze&&Me&&Me[qt]!==void 0,tt=(Kt?Me:Ve)[qt],Lr=Mt&&Kt?M(tt,t):Qe&&typeof tt=="function"?M(Function.call,tt):tt,Me&&j(Me,qt,tt,K&V.U),ht[qt]!=tt&&y(ht,qt,Lr),Qe&&qe[qt]!=tt&&(qe[qt]=tt)};t.core=r,V.F=1,V.G=2,V.S=4,V.P=8,V.B=16,V.W=32,V.U=64,V.R=128;var z=V,te=Math.ceil,me=Math.floor,at=function(K){return isNaN(K=+K)?0:(K>0?me:te)(K)},st=function(K){if(K==null)throw TypeError("Can't call method on  "+K);return K},ct=function(K){return function(fe,Ve){var ze=String(st(fe)),_e=at(Ve),Ze=ze.length,Qe,Mt;return _e<0||_e>=Ze?K?"":void 0:(Qe=ze.charCodeAt(_e),Qe<55296||Qe>56319||_e+1===Ze||(Mt=ze.charCodeAt(_e+1))<56320||Mt>57343?K?ze.charAt(_e):Qe:K?ze.slice(_e,_e+2):(Qe-55296<<10)+(Mt-56320)+65536)}},It=ct(!1);z(z.P,"String",{codePointAt:function(fe){return It(this,fe)}});var Dt=r.String.codePointAt,Ht=Math.max,jt=Math.min,hn=function(K,fe){return K=at(K),K<0?Ht(K+fe,0):jt(K,fe)},Ar=String.fromCharCode,lr=String.fromCodePoint;z(z.S+z.F*(!!lr&&lr.length!=1),"String",{fromCodePoint:function(fe){for(var Ve=arguments,ze=[],_e=arguments.length,Ze=0,Qe;_e>Ze;){if(Qe=+Ve[Ze++],hn(Qe,1114111)!==Qe)throw RangeError(Qe+" is not a valid code point");ze.push(Qe<65536?Ar(Qe):Ar(((Qe-=65536)>>10)+55296,Qe%1024+56320))}return ze.join("")}});var Nr=r.String.fromCodePoint,_r=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,xt=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,fr=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,yt={Space_Separator:_r,ID_Start:xt,ID_Continue:fr},xe={isSpaceSeparator:function(fe){return typeof fe=="string"&&yt.Space_Separator.test(fe)},isIdStartChar:function(fe){return typeof fe=="string"&&(fe>="a"&&fe<="z"||fe>="A"&&fe<="Z"||fe==="$"||fe==="_"||yt.ID_Start.test(fe))},isIdContinueChar:function(fe){return typeof fe=="string"&&(fe>="a"&&fe<="z"||fe>="A"&&fe<="Z"||fe>="0"&&fe<="9"||fe==="$"||fe==="_"||fe==="\u200C"||fe==="\u200D"||yt.ID_Continue.test(fe))},isDigit:function(fe){return typeof fe=="string"&&/[0-9]/.test(fe)},isHexDigit:function(fe){return typeof fe=="string"&&/[0-9A-Fa-f]/.test(fe)}},$e,ve,ye,Y,de,W,P,U,f,q=function(fe,Ve){$e=String(fe),ve="start",ye=[],Y=0,de=1,W=0,P=void 0,U=void 0,f=void 0;do P=Ne(),Xe[ve]();while(P.type!=="eof");return typeof Ve=="function"?G({"":f},"",Ve):f};function G(K,fe,Ve){var ze=K[fe];if(ze!=null&&typeof ze=="object")if(Array.isArray(ze))for(var _e=0;_e<ze.length;_e++){var Ze=String(_e),Qe=G(ze,Ze,Ve);Qe===void 0?delete ze[Ze]:Object.defineProperty(ze,Ze,{value:Qe,writable:!0,enumerable:!0,configurable:!0})}else for(var Mt in ze){var Me=G(ze,Mt,Ve);Me===void 0?delete ze[Mt]:Object.defineProperty(ze,Mt,{value:Me,writable:!0,enumerable:!0,configurable:!0})}return Ve.call(K,fe,ze)}var X,re,Se,ue,Ee;function Ne(){for(X="default",re="",Se=!1,ue=1;;){Ee=Ae();var K=Ie[X]();if(K)return K}}function Ae(){if($e[Y])return String.fromCodePoint($e.codePointAt(Y))}function Z(){var K=Ae();return K===`
`?(de++,W=0):K?W+=K.length:W++,K&&(Y+=K.length),K}var Ie={default:function(){switch(Ee){case"	":case"\v":case"\f":case" ":case"\xA0":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":Z();return;case"/":Z(),X="comment";return;case void 0:return Z(),Pe("eof")}if(xe.isSpaceSeparator(Ee)){Z();return}return Ie[ve]()},comment:function(){switch(Ee){case"*":Z(),X="multiLineComment";return;case"/":Z(),X="singleLineComment";return}throw ut(Z())},multiLineComment:function(){switch(Ee){case"*":Z(),X="multiLineCommentAsterisk";return;case void 0:throw ut(Z())}Z()},multiLineCommentAsterisk:function(){switch(Ee){case"*":Z();return;case"/":Z(),X="default";return;case void 0:throw ut(Z())}Z(),X="multiLineComment"},singleLineComment:function(){switch(Ee){case`
`:case"\r":case"\u2028":case"\u2029":Z(),X="default";return;case void 0:return Z(),Pe("eof")}Z()},value:function(){switch(Ee){case"{":case"[":return Pe("punctuator",Z());case"n":return Z(),je("ull"),Pe("null",null);case"t":return Z(),je("rue"),Pe("boolean",!0);case"f":return Z(),je("alse"),Pe("boolean",!1);case"-":case"+":Z()==="-"&&(ue=-1),X="sign";return;case".":re=Z(),X="decimalPointLeading";return;case"0":re=Z(),X="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":re=Z(),X="decimalInteger";return;case"I":return Z(),je("nfinity"),Pe("numeric",1/0);case"N":return Z(),je("aN"),Pe("numeric",NaN);case'"':case"'":Se=Z()==='"',re="",X="string";return}throw ut(Z())},identifierNameStartEscape:function(){if(Ee!=="u")throw ut(Z());Z();var fe=Ke();switch(fe){case"$":case"_":break;default:if(!xe.isIdStartChar(fe))throw br();break}re+=fe,X="identifierName"},identifierName:function(){switch(Ee){case"$":case"_":case"\u200C":case"\u200D":re+=Z();return;case"\\":Z(),X="identifierNameEscape";return}if(xe.isIdContinueChar(Ee)){re+=Z();return}return Pe("identifier",re)},identifierNameEscape:function(){if(Ee!=="u")throw ut(Z());Z();var fe=Ke();switch(fe){case"$":case"_":case"\u200C":case"\u200D":break;default:if(!xe.isIdContinueChar(fe))throw br();break}re+=fe,X="identifierName"},sign:function(){switch(Ee){case".":re=Z(),X="decimalPointLeading";return;case"0":re=Z(),X="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":re=Z(),X="decimalInteger";return;case"I":return Z(),je("nfinity"),Pe("numeric",ue*(1/0));case"N":return Z(),je("aN"),Pe("numeric",NaN)}throw ut(Z())},zero:function(){switch(Ee){case".":re+=Z(),X="decimalPoint";return;case"e":case"E":re+=Z(),X="decimalExponent";return;case"x":case"X":re+=Z(),X="hexadecimal";return}return Pe("numeric",ue*0)},decimalInteger:function(){switch(Ee){case".":re+=Z(),X="decimalPoint";return;case"e":case"E":re+=Z(),X="decimalExponent";return}if(xe.isDigit(Ee)){re+=Z();return}return Pe("numeric",ue*Number(re))},decimalPointLeading:function(){if(xe.isDigit(Ee)){re+=Z(),X="decimalFraction";return}throw ut(Z())},decimalPoint:function(){switch(Ee){case"e":case"E":re+=Z(),X="decimalExponent";return}if(xe.isDigit(Ee)){re+=Z(),X="decimalFraction";return}return Pe("numeric",ue*Number(re))},decimalFraction:function(){switch(Ee){case"e":case"E":re+=Z(),X="decimalExponent";return}if(xe.isDigit(Ee)){re+=Z();return}return Pe("numeric",ue*Number(re))},decimalExponent:function(){switch(Ee){case"+":case"-":re+=Z(),X="decimalExponentSign";return}if(xe.isDigit(Ee)){re+=Z(),X="decimalExponentInteger";return}throw ut(Z())},decimalExponentSign:function(){if(xe.isDigit(Ee)){re+=Z(),X="decimalExponentInteger";return}throw ut(Z())},decimalExponentInteger:function(){if(xe.isDigit(Ee)){re+=Z();return}return Pe("numeric",ue*Number(re))},hexadecimal:function(){if(xe.isHexDigit(Ee)){re+=Z(),X="hexadecimalInteger";return}throw ut(Z())},hexadecimalInteger:function(){if(xe.isHexDigit(Ee)){re+=Z();return}return Pe("numeric",ue*Number(re))},string:function(){switch(Ee){case"\\":Z(),re+=oe();return;case'"':if(Se)return Z(),Pe("string",re);re+=Z();return;case"'":if(!Se)return Z(),Pe("string",re);re+=Z();return;case`
`:case"\r":throw ut(Z());case"\u2028":case"\u2029":Qr(Ee);break;case void 0:throw ut(Z())}re+=Z()},start:function(){switch(Ee){case"{":case"[":return Pe("punctuator",Z())}X="value"},beforePropertyName:function(){switch(Ee){case"$":case"_":re=Z(),X="identifierName";return;case"\\":Z(),X="identifierNameStartEscape";return;case"}":return Pe("punctuator",Z());case'"':case"'":Se=Z()==='"',X="string";return}if(xe.isIdStartChar(Ee)){re+=Z(),X="identifierName";return}throw ut(Z())},afterPropertyName:function(){if(Ee===":")return Pe("punctuator",Z());throw ut(Z())},beforePropertyValue:function(){X="value"},afterPropertyValue:function(){switch(Ee){case",":case"}":return Pe("punctuator",Z())}throw ut(Z())},beforeArrayValue:function(){if(Ee==="]")return Pe("punctuator",Z());X="value"},afterArrayValue:function(){switch(Ee){case",":case"]":return Pe("punctuator",Z())}throw ut(Z())},end:function(){throw ut(Z())}};function Pe(K,fe){return{type:K,value:fe,line:de,column:W}}function je(K){for(var fe=0,Ve=K;fe<Ve.length;fe+=1){var ze=Ve[fe],_e=Ae();if(_e!==ze)throw ut(Z());Z()}}function oe(){var K=Ae();switch(K){case"b":return Z(),"\b";case"f":return Z(),"\f";case"n":return Z(),`
`;case"r":return Z(),"\r";case"t":return Z(),"	";case"v":return Z(),"\v";case"0":if(Z(),xe.isDigit(Ae()))throw ut(Z());return"\0";case"x":return Z(),Te();case"u":return Z(),Ke();case`
`:case"\u2028":case"\u2029":return Z(),"";case"\r":return Z(),Ae()===`
`&&Z(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw ut(Z());case void 0:throw ut(Z())}return Z()}function Te(){var K="",fe=Ae();if(!xe.isHexDigit(fe)||(K+=Z(),fe=Ae(),!xe.isHexDigit(fe)))throw ut(Z());return K+=Z(),String.fromCodePoint(parseInt(K,16))}function Ke(){for(var K="",fe=4;fe-- >0;){var Ve=Ae();if(!xe.isHexDigit(Ve))throw ut(Z());K+=Z()}return String.fromCodePoint(parseInt(K,16))}var Xe={start:function(){if(P.type==="eof")throw ur();We()},beforePropertyName:function(){switch(P.type){case"identifier":case"string":U=P.value,ve="afterPropertyName";return;case"punctuator":Rt();return;case"eof":throw ur()}},afterPropertyName:function(){if(P.type==="eof")throw ur();ve="beforePropertyValue"},beforePropertyValue:function(){if(P.type==="eof")throw ur();We()},beforeArrayValue:function(){if(P.type==="eof")throw ur();if(P.type==="punctuator"&&P.value==="]"){Rt();return}We()},afterPropertyValue:function(){if(P.type==="eof")throw ur();switch(P.value){case",":ve="beforePropertyName";return;case"}":Rt()}},afterArrayValue:function(){if(P.type==="eof")throw ur();switch(P.value){case",":ve="beforeArrayValue";return;case"]":Rt()}},end:function(){}};function We(){var K;switch(P.type){case"punctuator":switch(P.value){case"{":K={};break;case"[":K=[];break}break;case"null":case"boolean":case"numeric":case"string":K=P.value;break}if(f===void 0)f=K;else{var fe=ye[ye.length-1];Array.isArray(fe)?fe.push(K):Object.defineProperty(fe,U,{value:K,writable:!0,enumerable:!0,configurable:!0})}if(K!==null&&typeof K=="object")ye.push(K),Array.isArray(K)?ve="beforeArrayValue":ve="beforePropertyName";else{var Ve=ye[ye.length-1];Ve==null?ve="end":Array.isArray(Ve)?ve="afterArrayValue":ve="afterPropertyValue"}}function Rt(){ye.pop();var K=ye[ye.length-1];K==null?ve="end":Array.isArray(K)?ve="afterArrayValue":ve="afterPropertyValue"}function ut(K){return Yr(K===void 0?"JSON5: invalid end of input at "+de+":"+W:"JSON5: invalid character '"+gr(K)+"' at "+de+":"+W)}function ur(){return Yr("JSON5: invalid end of input at "+de+":"+W)}function br(){return W-=5,Yr("JSON5: invalid identifier character at "+de+":"+W)}function Qr(K){console.warn("JSON5: '"+gr(K)+"' in strings is not valid ECMAScript; consider escaping")}function gr(K){var fe={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(fe[K])return fe[K];if(K<" "){var Ve=K.charCodeAt(0).toString(16);return"\\x"+("00"+Ve).substring(Ve.length)}return K}function Yr(K){var fe=new SyntaxError(K);return fe.lineNumber=de,fe.columnNumber=W,fe}var Tt=function(fe,Ve,ze){var _e=[],Ze="",Qe,Mt,Me="",ht;if(Ve!=null&&typeof Ve=="object"&&!Array.isArray(Ve)&&(ze=Ve.space,ht=Ve.quote,Ve=Ve.replacer),typeof Ve=="function")Mt=Ve;else if(Array.isArray(Ve)){Qe=[];for(var qe=0,qt=Ve;qe<qt.length;qe+=1){var Kt=qt[qe],tt=void 0;typeof Kt=="string"?tt=Kt:(typeof Kt=="number"||Kt instanceof String||Kt instanceof Number)&&(tt=String(Kt)),tt!==void 0&&Qe.indexOf(tt)<0&&Qe.push(tt)}}return ze instanceof Number?ze=Number(ze):ze instanceof String&&(ze=String(ze)),typeof ze=="number"?ze>0&&(ze=Math.min(10,Math.floor(ze)),Me="          ".substr(0,ze)):typeof ze=="string"&&(Me=ze.substr(0,10)),Lr("",{"":fe});function Lr(_t,vr){var ft=vr[_t];switch(ft!=null&&(typeof ft.toJSON5=="function"?ft=ft.toJSON5(_t):typeof ft.toJSON=="function"&&(ft=ft.toJSON(_t))),Mt&&(ft=Mt.call(vr,_t,ft)),ft instanceof Number?ft=Number(ft):ft instanceof String?ft=String(ft):ft instanceof Boolean&&(ft=ft.valueOf()),ft){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof ft=="string")return Le(ft,!1);if(typeof ft=="number")return String(ft);if(typeof ft=="object")return Array.isArray(ft)?Rr(ft):Ui(ft)}function Le(_t){for(var vr={"'":.1,'"':.2},ft={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},tr="",Hr=0;Hr<_t.length;Hr++){var yr=_t[Hr];switch(yr){case"'":case'"':vr[yr]++,tr+=yr;continue;case"\0":if(xe.isDigit(_t[Hr+1])){tr+="\\x00";continue}}if(ft[yr]){tr+=ft[yr];continue}if(yr<" "){var Xt=yr.charCodeAt(0).toString(16);tr+="\\x"+("00"+Xt).substring(Xt.length);continue}tr+=yr}var Zt=ht||Object.keys(vr).reduce(function(ir,hr){return vr[ir]<vr[hr]?ir:hr});return tr=tr.replace(new RegExp(Zt,"g"),ft[Zt]),Zt+tr+Zt}function Ui(_t){if(_e.indexOf(_t)>=0)throw TypeError("Converting circular structure to JSON5");_e.push(_t);var vr=Ze;Ze=Ze+Me;for(var ft=Qe||Object.keys(_t),tr=[],Hr=0,yr=ft;Hr<yr.length;Hr+=1){var Xt=yr[Hr],Zt=Lr(Xt,_t);if(Zt!==void 0){var ir=bt(Xt)+":";Me!==""&&(ir+=" "),ir+=Zt,tr.push(ir)}}var hr;if(tr.length===0)hr="{}";else{var Sr;if(Me==="")Sr=tr.join(","),hr="{"+Sr+"}";else{var Mr=`,
`+Ze;Sr=tr.join(Mr),hr=`{
`+Ze+Sr+`,
`+vr+"}"}}return _e.pop(),Ze=vr,hr}function bt(_t){if(_t.length===0)return Le(_t,!0);var vr=String.fromCodePoint(_t.codePointAt(0));if(!xe.isIdStartChar(vr))return Le(_t,!0);for(var ft=vr.length;ft<_t.length;ft++)if(!xe.isIdContinueChar(String.fromCodePoint(_t.codePointAt(ft))))return Le(_t,!0);return _t}function Rr(_t){if(_e.indexOf(_t)>=0)throw TypeError("Converting circular structure to JSON5");_e.push(_t);var vr=Ze;Ze=Ze+Me;for(var ft=[],tr=0;tr<_t.length;tr++){var Hr=Lr(String(tr),_t);ft.push(Hr!==void 0?Hr:"null")}var yr;if(ft.length===0)yr="[]";else if(Me===""){var Xt=ft.join(",");yr="["+Xt+"]"}else{var Zt=`,
`+Ze,ir=ft.join(Zt);yr=`[
`+Ze+ir+`,
`+vr+"]"}return _e.pop(),Ze=vr,yr}},se={parse:q,stringify:Tt},Re=se,Je=Re;return Je}))});var dh=e=>e.length%4==0&&/^[A-Za-z0-9+/]+[=]{0,3}$/.test(e);function a0(e){let t=new TextEncoder("utf-8").encode(e),r=String.fromCharCode.apply(null,t);return btoa(r)}function u0(e){let t=atob(e),r=Uint8Array.from(t,n=>n.charCodeAt(0));return new TextDecoder("utf-8").decode(r)}var p0="3.7.8",cA=p0,Na=typeof Buffer=="function",o0=typeof TextDecoder=="function"?new TextDecoder:void 0,c0=typeof TextEncoder=="function"?new TextEncoder:void 0,lA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Mu=Array.prototype.slice.call(lA),wc=(e=>{let t={};return e.forEach((r,n)=>t[r]=n),t})(Mu),fA=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,en=String.fromCharCode.bind(String),l0=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),d0=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),g0=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),v0=e=>{let t,r,n,a,u="",i=e.length%3;for(let c=0;c<e.length;){if((r=e.charCodeAt(c++))>255||(n=e.charCodeAt(c++))>255||(a=e.charCodeAt(c++))>255)throw new TypeError("invalid character found");t=r<<16|n<<8|a,u+=Mu[t>>18&63]+Mu[t>>12&63]+Mu[t>>6&63]+Mu[t&63]}return i?u.slice(0,i-3)+"===".substring(i):u},mh=typeof btoa=="function"?e=>btoa(e):Na?e=>Buffer.from(e,"binary").toString("base64"):v0,gh=Na?e=>Buffer.from(e).toString("base64"):e=>{let r=[];for(let n=0,a=e.length;n<a;n+=4096)r.push(en.apply(null,e.subarray(n,n+4096)));return mh(r.join(""))},bc=(e,t=!1)=>t?d0(gh(e)):gh(e),hA=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?en(192|t>>>6)+en(128|t&63):en(224|t>>>12&15)+en(128|t>>>6&63)+en(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return en(240|t>>>18&7)+en(128|t>>>12&63)+en(128|t>>>6&63)+en(128|t&63)}},pA=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,m0=e=>e.replace(pA,hA),f0=Na?e=>Buffer.from(e,"utf8").toString("base64"):c0?e=>gh(c0.encode(e)):e=>mh(m0(e)),Oa=(e,t=!1)=>t?d0(f0(e)):f0(e),h0=e=>Oa(e,!0),dA=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,gA=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),r=t-65536;return en((r>>>10)+55296)+en((r&1023)+56320);case 3:return en((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return en((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},w0=e=>e.replace(dA,gA),b0=e=>{if(e=e.replace(/\s+/g,""),!fA.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,r,n,a=[];for(let u=0;u<e.length;)t=wc[e.charAt(u++)]<<18|wc[e.charAt(u++)]<<12|(r=wc[e.charAt(u++)])<<6|(n=wc[e.charAt(u++)]),r===64?a.push(en(t>>16&255)):n===64?a.push(en(t>>16&255,t>>8&255)):a.push(en(t>>16&255,t>>8&255,t&255));return a.join("")},wh=typeof atob=="function"?e=>atob(g0(e)):Na?e=>Buffer.from(e,"base64").toString("binary"):b0,E0=Na?e=>l0(Buffer.from(e,"base64")):e=>l0(wh(e).split("").map(t=>t.charCodeAt(0))),A0=e=>E0(y0(e)),vA=Na?e=>Buffer.from(e,"base64").toString("utf8"):o0?e=>o0.decode(E0(e)):e=>w0(wh(e)),y0=e=>g0(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),vh=e=>vA(y0(e)),mA=e=>{if(typeof e!="string")return!1;let t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},S0=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),_0=function(){let e=(t,r)=>Object.defineProperty(String.prototype,t,S0(r));e("fromBase64",function(){return vh(this)}),e("toBase64",function(t){return Oa(this,t)}),e("toBase64URI",function(){return Oa(this,!0)}),e("toBase64URL",function(){return Oa(this,!0)}),e("toUint8Array",function(){return A0(this)})},D0=function(){let e=(t,r)=>Object.defineProperty(Uint8Array.prototype,t,S0(r));e("toBase64",function(t){return bc(this,t)}),e("toBase64URI",function(){return bc(this,!0)}),e("toBase64URL",function(){return bc(this,!0)})},wA=()=>{_0(),D0()},Yt={version:p0,VERSION:cA,atob:wh,atobPolyfill:b0,btoa:mh,btoaPolyfill:v0,fromBase64:vh,toBase64:Oa,encode:Oa,encodeURI:h0,encodeURL:h0,utob:m0,btou:w0,decode:vh,isValid:mA,fromUint8Array:bc,toUint8Array:A0,extendString:_0,extendUint8Array:D0,extendBuiltins:wA};var fl=vi(z0());var zh=vi(v1());function q_(e){let t=zh.default.pemtohex(e);return zh.default.KJUR.crypto.Util.hashHex(t,"sha256").match(/.{2}/g).join(":").toUpperCase()}var m1={generateFingerprint:q_};var P1=vi(I1()),mD=/^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)(\.(?!$)|$)){4}$/,wD=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/;function zn(e){return mD.test(e)}function En(e){return wD.test(e)}function B1(e){return/^((6553[0-5])|(655[0-2][0-9])|(65[0-4][0-9]{2})|(6[0-4][0-9]{3})|([1-5][0-9]{4})|([0-5]{0,5})|([0-9]{1,4}))$/.test(e)}function Oi(e){return typeof e=="string"&&e.trim().length>0}function dr(e,t){return Oi(e)?e:t}function we(e){return typeof e<"u"&&e!==null}function Xa(e,t){return we(e)?e:t}function bD(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function Yu(e){let t=e.split(/,|\//),r=t[Math.floor(Math.random()*t.length)];if(r.includes("-")){let[n,a]=r.split("-").map(Number);return bD(n,a)}else return Number(r)}function $1(e){return Number.isSafeInteger(e)?String(e):BigInt(e).toString()}function Vc(e){return typeof e=="string"&&/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(e)}var Wt={log(...e){console.log(`[LOG]: ${e.join(" ")}`)},info(...e){console.log(`[INFO]: ${e.join(" ")}`)},error(...e){console.log(`[ERROR]: ${e.join(" ")}`)}};var ro=vi(Sv());function Dv(e,t,...r){try{return e(t,...r)}catch{return e(Fv(e(t.replace(/!<str>\s*/g,"__SubStoreJSYAMLString__"),...r)).replace(/__SubStoreJSYAMLString__/g,""),...r)}}function aa(e,...t){return Dv(ro.default.safeLoad,JSON.parse(JSON.stringify(e)),...t)}function J5(e,...t){return Dv(ro.default.load,JSON.parse(JSON.stringify(e)),...t)}function _v(e,...t){return ro.default.safeDump(JSON.parse(JSON.stringify(e)),...t)}function Fv(e,...t){return ro.default.dump(JSON.parse(JSON.stringify(e)),...t)}var dp={safeLoad:aa,load:J5,safeDump:_v,dump:Fv,parse:aa,stringify:_v};function X5(){return{name:"HTML",test:n=>/^<!DOCTYPE html>/.test(n),parse:()=>""}}function Z5(){let e="Base64 Pre-processor",t=["dm1lc3M","c3NyOi8v","c29ja3M6Ly","dHJvamFu","c3M6Ly","c3NkOi8v","c2hhZG93","aHR0c","dmxlc3M=","aHlzdGVyaWEy","aHkyOi8v","d2lyZWd1YXJkOi8v","d2c6Ly8=","dHVpYzovLw=="];return{name:e,test:function(a){return!/^\w+:\/\/\w+/im.test(a)&&t.some(u=>a.indexOf(u)!==-1)},parse:function(a){let u=Yt.decode(a);return/^\w+(:\/\/|\s*?=\s*?)\w+/m.test(u)?u:(Wt.error("Base64 Pre-processor error: decoded line does not start with protocol"),a)}}}function Q5(){return{name:"Fallback Base64 Pre-processor",test:function(n){return!0},parse:function(n){let a=Yt.decode(n);return/^\w+(:\/\/|\s*?=\s*?)\w+/m.test(a)?a:(Wt.error("Fallback Base64 Pre-processor error: decoded line does not start with protocol"),n)}}}function e4(){return{name:"Clash Pre-processor",test:function(n){if(!/proxies/.test(n))return!1;let a=aa(n);return a.proxies&&Array.isArray(a.proxies)},parse:function(n,a){let u=n.replace(/short-id:([ \t]*[^#\n,}]*)/g,(l,m)=>{let E=m.trim();return!E||E===""?'short-id: ""':/^(['"]).*\1$/.test(E)?`short-id: ${E}`:["null"].includes(E)?`short-id: ${E}`:`short-id: "${E}"`}),{proxies:i,"global-client-fingerprint":c}=aa(u);return(a?`proxies:
`:"")+i.map(l=>(c&&!l["client-fingerprint"]&&(l["client-fingerprint"]=c),`${a?"  - ":""}${JSON.stringify(l)}
`)).join("")}}}function t4(){return{name:"SSD Pre-processor",test:function(n){return n.indexOf("ssd://")===0},parse:function(n){let a=[],u=JSON.parse(Yt.decode(n.split("ssd://")[1])),i=u.port,c=u.encryption,l=u.password,m=u.servers;for(let E=0;E<m.length;E++){let b=m[E];c=b.encryption?b.encryption:c,l=b.password?b.password:l;let v=Yt.encode(c+":"+l),g=b.server;i=b.port?b.port:i;let A=b.remarks?b.remarks:E,w=b.plugin_options?"/?plugin="+encodeURIComponent(b.plugin+";"+b.plugin_options):"";a[E]="ss://"+v+"@"+g+":"+i+w+"#"+A}return a.join(`
`)}}}function r4(){return{name:"Full Config Preprocessor",test:function(n){return/^(\[server_local\]|\[Proxy\])/gm.test(n)},parse:function(n){return n.match(/^\[server_local|Proxy\]([\s\S]+?)^\[.+?\](\r?\n|$)/im)?.[1]||n}}}var Cv=[X5(),e4(),Z5(),t4(),r4(),Q5()];var Pv=vi(Iv()),Pt=class{constructor(t){this.proxy=t,this.output=[]}append(t){if(typeof t>"u")throw new Error("required field is missing");this.output.push(t)}appendIfPresent(t,r){n4(this.proxy,r)&&this.append(t)}toString(){return this.output.join("")}};function n4(e,t){let r=Pv.default.get(e,t);return typeof r<"u"&&r!==null}var i4="Surge",ci={dual:"dual",ipv4:"v4-only",ipv6:"v6-only","ipv4-prefer":"prefer-v4","ipv6-prefer":"prefer-v6"};function au(){return{produce:(t,r,n={})=>{switch(t.name=t.name.replace(/=|,/g,""),t.ports&&(t.ports=String(t.ports)),t.type){case"ss":return s4(t,n["include-unsupported-proxy"]);case"trojan":return a4(t);case"vmess":return u4(t,n["include-unsupported-proxy"]);case"http":return c4(t);case"direct":return l4(t);case"socks5":return f4(t);case"snell":return h4(t);case"tuic":return p4(t);case"wireguard-surge":return g4(t);case"hysteria2":return v4(t);case"ssh":return o4(t)}if(n["include-unsupported-proxy"]&&t.type==="wireguard")return d4(t);throw new Error(`Platform ${i4} does not support proxy type: ${t.type}`)}}}function s4(e){let t=new Pt(e);if(t.append(`${e.name}=${e.type},${e.server},${e.port}`),e.cipher||(e.cipher="none"),!["aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","cast5-cfb","des-cfb","idea-cfb","rc2-cfb","seed-cfb","salsa20","chacha20","chacha20-ietf","none","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(e.cipher))throw new Error(`cipher ${e.cipher} is not supported`);t.append(`,encrypt-method=${e.cipher}`),t.appendIfPresent(`,password="${e.password}"`,"password");let r=ci[e["ip-version"]]||e["ip-version"];if(t.appendIfPresent(`,ip-version=${r}`,"ip-version"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),we(e,"plugin")){if(e.plugin==="obfs")t.append(`,obfs=${e["plugin-opts"].mode}`),t.appendIfPresent(`,obfs-host=${e["plugin-opts"].host}`,"plugin-opts.host"),t.appendIfPresent(`,obfs-uri=${e["plugin-opts"].path}`,"plugin-opts.path");else if(!["shadow-tls"].includes(e.plugin))throw new Error(`plugin ${e.plugin} is not supported`)}if(t.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),we(e,"shadow-tls-password"))t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni"),t.appendIfPresent(`,udp-port=${e["udp-port"]}`,"udp-port");else if(["shadow-tls"].includes(e.plugin)&&e["plugin-opts"]){let n=e["plugin-opts"].password,a=e["plugin-opts"].host,u=e["plugin-opts"].version;if(n){if(t.append(`,shadow-tls-password=${n}`),a&&t.append(`,shadow-tls-sni=${a}`),u){if(u<2)throw new Error(`shadow-tls version ${u} is not supported`);t.append(`,shadow-tls-version=${u}`)}t.appendIfPresent(`,udp-port=${e["udp-port"]}`,"udp-port")}}return t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.toString()}function a4(e){let t=new Pt(e);t.append(`${e.name}=${e.type},${e.server},${e.port}`),t.appendIfPresent(`,password="${e.password}"`,"password");let r=ci[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-version=${r}`,"ip-version"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),Bv(t,e),t.appendIfPresent(`,tls=${e.tls}`,"tls"),t.appendIfPresent(`,server-cert-fingerprint-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),we(e,"shadow-tls-password")&&(t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni")),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.toString()}function u4(e,t){let r=new Pt(e);r.append(`${e.name}=${e.type},${e.server},${e.port}`),r.appendIfPresent(`,username=${e.uuid}`,"uuid");let n=ci[e["ip-version"]]||e["ip-version"];return r.appendIfPresent(`,ip-version=${n}`,"ip-version"),r.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),Bv(r,e,t),we(e,"aead")?r.append(`,vmess-aead=${e.aead}`):r.append(`,vmess-aead=${e.alterId===0}`),r.appendIfPresent(`,server-cert-fingerprint-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),r.appendIfPresent(`,tls=${e.tls}`,"tls"),r.appendIfPresent(`,sni=${e.sni}`,"sni"),r.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),r.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),r.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),r.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),r.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),r.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),r.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),r.appendIfPresent(`,tos=${e.tos}`,"tos"),r.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),r.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),we(e,"shadow-tls-password")&&(r.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),r.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),r.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni")),r.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),r.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),r.toString()}function o4(e){let t=new Pt(e);t.append(`${e.name}=ssh,${e.server},${e.port}`),t.appendIfPresent(`,username="${e.username}"`,"username"),t.appendIfPresent(`,password="${e.password}"`,"password"),t.appendIfPresent(`,private-key=${e["keystore-private-key"]}`,"keystore-private-key"),t.appendIfPresent(`,idle-timeout=${e["idle-timeout"]}`,"idle-timeout"),t.appendIfPresent(`,server-fingerprint="${e["server-fingerprint"]}"`,"server-fingerprint");let r=ci[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-version=${r}`,"ip-version"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),t.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.toString()}function c4(e){if(e.headers&&Object.keys(e.headers).length>0)throw new Error("headers is unsupported");let t=new Pt(e),r=e.tls?"https":"http";t.append(`${e.name}=${r},${e.server},${e.port}`),t.appendIfPresent(`,username="${e.username}"`,"username"),t.appendIfPresent(`,password="${e.password}"`,"password");let n=ci[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-version=${n}`,"ip-version"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),t.appendIfPresent(`,server-cert-fingerprint-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),we(e,"shadow-tls-password")&&(t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni")),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.toString()}function l4(e){let t=new Pt(e);t.append(`${e.name}=direct`);let n=ci[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-version=${n}`,"ip-version"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),t.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.toString()}function f4(e){let t=new Pt(e),r=e.tls?"socks5-tls":"socks5";t.append(`${e.name}=${r},${e.server},${e.port}`),t.appendIfPresent(`,username="${e.username}"`,"username"),t.appendIfPresent(`,password="${e.password}"`,"password");let n=ci[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-version=${n}`,"ip-version"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),t.appendIfPresent(`,server-cert-fingerprint-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),e.tfo&&Wt.info("Option tfo is not supported by Surge, thus omitted"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),we(e,"shadow-tls-password")&&(t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni")),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.toString()}function h4(e){let t=new Pt(e);t.append(`${e.name}=${e.type},${e.server},${e.port}`),t.appendIfPresent(`,version=${e.version}`,"version"),t.appendIfPresent(`,psk=${e.psk}`,"psk");let r=ci[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-version=${r}`,"ip-version"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),t.appendIfPresent(`,obfs=${e["obfs-opts"]?.mode}`,"obfs-opts.mode"),t.appendIfPresent(`,obfs-host=${e["obfs-opts"]?.host}`,"obfs-opts.host"),t.appendIfPresent(`,obfs-uri=${e["obfs-opts"]?.path}`,"obfs-opts.path"),t.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),we(e,"shadow-tls-password")&&(t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni")),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.appendIfPresent(`,reuse=${e.reuse}`,"reuse"),t.toString()}function p4(e){let t=new Pt(e),r=e.type;(!e.token||e.token.length===0)&&(r="tuic-v5"),t.append(`${e.name}=${r},${e.server},${e.port}`),t.appendIfPresent(`,uuid=${e.uuid}`,"uuid"),t.appendIfPresent(`,password="${e.password}"`,"password"),t.appendIfPresent(`,token=${e.token}`,"token"),t.appendIfPresent(`,alpn=${Array.isArray(e.alpn)?e.alpn[0]:e.alpn}`,"alpn"),we(e,"ports")&&t.append(`,port-hopping="${e.ports.replace(/,/g,";")}"`),t.appendIfPresent(`,port-hopping-interval=${e["hop-interval"]}`,"hop-interval");let n=ci[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-version=${n}`,"ip-version"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,server-cert-fingerprint-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),we(e,"tfo")?t.append(`,tfo=${e.tfo}`):we(e,"fast-open")&&t.append(`,tfo=${e["fast-open"]}`),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),we(e,"shadow-tls-password")&&(t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni")),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.appendIfPresent(`,ecn=${e.ecn}`,"ecn"),t.toString()}function d4(e){Array.isArray(e.peers)&&e.peers.length>0&&(e.server=e.peers[0].server,e.port=e.peers[0].port,e.ip=e.peers[0].ip,e.ipv6=e.peers[0].ipv6,e["public-key"]=e.peers[0]["public-key"],e["preshared-key"]=e.peers[0]["pre-shared-key"],e["allowed-ips"]=e.peers[0]["allowed-ips"],e.reserved=e.peers[0].reserved);let t=new Pt(e);t.append(`# > WireGuard Proxy ${e.name}
# ${e.name}=wireguard`),e["section-name"]=dr(e["section-name"],e.name),t.appendIfPresent(`,section-name=${e["section-name"]}`,"section-name"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert");let r=ci[e["ip-version"]]||e["ip-version"];t.appendIfPresent(`,ip-version=${r}`,"ip-version"),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),we(e,"shadow-tls-password")&&(t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni")),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.append(`
# > WireGuard Section ${e.name}
[WireGuard ${e["section-name"]}]
private-key = ${e["private-key"]}`),t.appendIfPresent(`
self-ip = ${e.ip}`,"ip"),t.appendIfPresent(`
self-ip-v6 = ${e.ipv6}`,"ipv6"),e.dns&&(Array.isArray(e.dns)&&(e.dns=e.dns.join(", ")),t.append(`
dns-server = ${e.dns}`)),t.appendIfPresent(`
mtu = ${e.mtu}`,"mtu"),r==="prefer-v6"&&t.append(`
prefer-ipv6 = true`);let n=Array.isArray(e["allowed-ips"])?e["allowed-ips"].join(","):e["allowed-ips"],a=Array.isArray(e.reserved)?e.reserved.join("/"):e.reserved,u=e["preshared-key"]??e["pre-shared-key"];u&&(u=`,preshared-key="${u}"`);let i={"public-key":e["public-key"],"allowed-ips":n?`"${n}"`:void 0,endpoint:`${e.server}:${e.port}`,keepalive:e["persistent-keepalive"]||e.keepalive,"client-id":a,"preshared-key":u};return t.append(`
peer = (${Object.keys(i).filter(c=>i[c]!=null).map(c=>`${c} = ${i[c]}`).join(", ")})`),t.toString()}function g4(e){let t=new Pt(e);t.append(`${e.name}=wireguard`),t.appendIfPresent(`,section-name=${e["section-name"]}`,"section-name"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert");let r=ci[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-version=${r}`,"ip-version"),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),we(e,"shadow-tls-password")&&(t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni")),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.toString()}function v4(e){if(e.obfs||e["obfs-password"])throw new Error("obfs is unsupported");let t=new Pt(e);t.append(`${e.name}=hysteria2,${e.server},${e.port}`),t.appendIfPresent(`,password="${e.password}"`,"password"),we(e,"ports")&&t.append(`,port-hopping="${e.ports.replace(/,/g,";")}"`),t.appendIfPresent(`,port-hopping-interval=${e["hop-interval"]}`,"hop-interval");let r=ci[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-version=${r}`,"ip-version"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,server-cert-fingerprint-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),we(e,"tfo")?t.append(`,tfo=${e.tfo}`):we(e,"fast-open")&&t.append(`,tfo=${e["fast-open"]}`),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),we(e,"shadow-tls-password")&&(t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni")),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.appendIfPresent(`,download-bandwidth=${`${e.down}`.match(/\d+/)?.[0]||0}`,"down"),t.appendIfPresent(`,ecn=${e.ecn}`,"ecn"),t.toString()}function Bv(e,t,r){if(we(t,"network"))if(t.network==="ws"){if(e.append(",ws=true"),we(t,"ws-opts")&&(e.appendIfPresent(`,ws-path=${t["ws-opts"].path}`,"ws-opts.path"),we(t,"ws-opts.headers"))){let n=t["ws-opts"].headers,a=Object.keys(n).map(u=>{let i=n[u];return i=`"${i}"`,`${u}:${i}`}).join("|");Oi(a)&&e.append(`,ws-headers=${a}`)}}else if(r&&["http"].includes(t.network))Wt.info(`Include Unsupported Proxy: nework ${t.network} -> tcp`);else throw new Error(`network ${t.network} is unsupported`)}var m4={dual:"dual","v4-only":"ipv4","v6-only":"ipv6","prefer-v4":"ipv4-prefer","prefer-v6":"ipv6-prefer"};function Gn(){return{type:"ALL",produce:(r,n,a={})=>{let u=r.filter(i=>a["include-unsupported-proxy"]?!0:i.type==="snell"&&i.version>=4||["juicity"].includes(i.type)||["ss"].includes(i.type)&&!["aes-128-ctr","aes-192-ctr","aes-256-ctr","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-gcm","aes-192-gcm","aes-256-gcm","aes-128-ccm","aes-192-ccm","aes-256-ccm","aes-128-gcm-siv","aes-256-gcm-siv","chacha20-ietf","chacha20","xchacha20","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","chacha8-ietf-poly1305","xchacha8-ietf-poly1305","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm","2022-blake3-chacha20-poly1305","lea-128-gcm","lea-192-gcm","lea-256-gcm","rabbit128-poly1305","aegis-128l","aegis-256","aez-384","deoxys-ii-256-128","rc4-md5","none"].includes(i.cipher)?!1:!(["anytls"].includes(i.type)&&i.network&&(!["tcp"].includes(i.network)||["tcp"].includes(i.network)&&i["reality-opts"]))).map(i=>{if(i.type==="vmess"?(we(i,"aead")&&(i.aead&&(i.alterId=0),delete i.aead),we(i,"sni")&&(i.servername=i.sni,delete i.sni),we(i,"cipher")&&!["auto","none","zero","aes-128-gcm","chacha20-poly1305"].includes(i.cipher)&&(i.cipher="auto")):i.type==="tuic"?(we(i,"alpn")?i.alpn=Array.isArray(i.alpn)?i.alpn:[i.alpn]:i.alpn=["h3"],we(i,"tfo")&&!we(i,"fast-open")&&(i["fast-open"]=i.tfo),(!i.token||i.token.length===0)&&!we(i,"version")&&(i.version=5)):i.type==="hysteria"?(we(i,"auth_str")&&!we(i,"auth-str")&&(i["auth-str"]=i.auth_str),we(i,"alpn")&&(i.alpn=Array.isArray(i.alpn)?i.alpn:[i.alpn]),we(i,"tfo")&&!we(i,"fast-open")&&(i["fast-open"]=i.tfo)):i.type==="wireguard"?(i.keepalive=i.keepalive??i["persistent-keepalive"],i["persistent-keepalive"]=i.keepalive,i["preshared-key"]=i["preshared-key"]??i["pre-shared-key"],i["pre-shared-key"]=i["preshared-key"]):i.type==="snell"&&i.version<3?delete i.udp:i.type==="vless"?we(i,"sni")&&(i.servername=i.sni,delete i.sni):i.type==="ss"&&we(i,"shadow-tls-password")&&!we(i,"plugin")&&(i.plugin="shadow-tls",i["plugin-opts"]={host:i["shadow-tls-sni"],password:i["shadow-tls-password"],version:i["shadow-tls-version"]},delete i["shadow-tls-password"],delete i["shadow-tls-sni"],delete i["shadow-tls-version"]),["vmess","vless"].includes(i.type)&&i.network==="http"){let c=i["http-opts"]?.path;we(i,"http-opts.path")&&!Array.isArray(c)&&(i["http-opts"].path=[c]);let l=i["http-opts"]?.headers?.Host;we(i,"http-opts.headers.Host")&&!Array.isArray(l)&&(i["http-opts"].headers.Host=[l])}if(["vmess","vless"].includes(i.type)&&i.network==="h2"){let c=i["h2-opts"]?.path;we(i,"h2-opts.path")&&Array.isArray(c)&&(i["h2-opts"].path=c[0]);let l=i["h2-opts"]?.headers?.host;we(i,"h2-opts.headers.Host")&&!Array.isArray(l)&&(i["h2-opts"].headers.host=[l])}if(["ws"].includes(i.network)){let c=i[`${i.network}-opts`]?.path;if(c){let l=/^(.*?)(?:\?ed=(\d+))?$/,[m,E="",b=""]=l.exec(c);i[`${i.network}-opts`].path=E,b!==""&&(i["ws-opts"]["early-data-header-name"]="Sec-WebSocket-Protocol",i["ws-opts"]["max-early-data"]=parseInt(b,10))}else i[`${i.network}-opts`]=i[`${i.network}-opts`]||{},i[`${i.network}-opts`].path="/"}if(i["plugin-opts"]?.tls&&we(i,"skip-cert-verify")&&(i["plugin-opts"]["skip-cert-verify"]=i["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity","anytls"].includes(i.type)&&delete i.tls,i["tls-fingerprint"]&&(i.fingerprint=i["tls-fingerprint"]),delete i["tls-fingerprint"],i["underlying-proxy"]&&(i["dialer-proxy"]=i["underlying-proxy"]),delete i["underlying-proxy"],we(i,"tls")&&typeof i.tls!="boolean"&&delete i.tls,delete i.subName,delete i.collectionName,delete i.id,delete i.resolved,delete i["no-resolve"],n!=="internal"||a["delete-underscore-fields"])for(let c in i)(i[c]==null||/^_/i.test(c))&&delete i[c];return["grpc"].includes(i.network)&&i[`${i.network}-opts`]&&(delete i[`${i.network}-opts`]["_grpc-type"],delete i[`${i.network}-opts`]["_grpc-authority"]),i["ip-version"]&&(i["ip-version"]=m4[i["ip-version"]]||i["ip-version"]),i});return n==="internal"?u:`proxies:
`+u.map(i=>"  - "+JSON.stringify(i)+`
`).join("")}}}var $v="SurgeMac",w4=au();function gp(){return{produce:(t,r,n={})=>{switch(t.type){case"external":return Rv(t);default:try{return w4.produce(t,r,n)}catch{if(n.useMihomoExternal)return Wt.log(`${t.name} is not supported on ${$v}, try to use Mihomo(SurgeMac - External Proxy Program) instead`),b4(t,r,n);throw new Error("Surge for macOS \u53EF\u624B\u52A8\u6307\u5B9A\u94FE\u63A5\u53C2\u6570 target=SurgeMac \u6216\u5728 \u540C\u6B65\u914D\u7F6E \u4E2D\u6307\u5B9A SurgeMac \u6765\u542F\u7528 mihomo \u652F\u63F4 Surge \u672C\u8EAB\u4E0D\u652F\u6301\u7684\u534F\u8BAE")}}}}}function Rv(e){let t=new Pt(e);if(!e.exec||!e["local-port"])throw new Error(`${e.type}: exec and local-port are required`);return t.append(`${e.name}=external,exec="${e.exec}",local-port=${e["local-port"]}`),Array.isArray(e.args)&&e.args.map(r=>{t.append(`,args="${r}"`)}),Array.isArray(e.addresses)&&e.addresses.map(r=>{t.append(`,addresses=${r}`)}),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),we(e,"tfo")?t.append(`,tfo=${e.tfo}`):we(e,"fast-open")&&t.append(`,tfo=${e["fast-open"]}`),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.toString()}function b4(e,t,r){let n=Gn().produce([e],"internal")?.[0];if(n){let a=r?.localPort||e._localPort||65535,u=!["ipv4","v4-only"].includes(e["ip-version"]),i={name:e.name,type:"external",exec:e._exec||"/usr/local/bin/mihomo","local-port":a,args:["-config",Yt.encode(JSON.stringify({"mixed-port":a,ipv6:u,mode:"global",dns:{enable:!0,ipv6:u,"default-nameserver":r?.defaultNameserver||e._defaultNameserver||["180.76.76.76","52.80.52.52","119.28.28.28","223.6.6.6"],nameserver:r?.nameserver||e._nameserver||["https://doh.pub/dns-query","https://dns.alidns.com/dns-query","https://doh-pure.onedns.net/dns-query"]},proxies:[{...n,name:"proxy"}],"proxy-groups":[{name:"GLOBAL",type:"select",proxies:["proxy"]}]}))],addresses:[]};return E4(e.server)?i.addresses.push(e.server):Wt.log(`Platform ${$v}, proxy type ${e.type}: addresses should be an IP address, but got ${e.server}`),r.localPort=a-1,Rv(i)}}function E4(e){return zn(e)||En(e)}function vp(){return{type:"ALL",produce:(r,n,a={})=>{let u=r.filter(i=>a["include-unsupported-proxy"]?!0:!["ss","ssr","vmess","vless","socks5","http","snell","trojan","wireguard"].includes(i.type)||i.type==="ss"&&!["aes-128-gcm","aes-192-gcm","aes-256-gcm","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","rc4-md5","chacha20-ietf","xchacha20","chacha20-ietf-poly1305","xchacha20-ietf-poly1305"].includes(i.cipher)||i.type==="snell"&&i.version>=4||i.type==="vless"&&(typeof i.flow<"u"||i["reality-opts"])?!1:i["underlying-proxy"]||i["dialer-proxy"]?(Wt.error(`Clash \u4E0D\u652F\u6301\u524D\u7F6E\u4EE3\u7406\u5B57\u6BB5. \u5DF2\u8FC7\u6EE4\u8282\u70B9 ${i.name}`),!1):!0).map(i=>{if(i.type==="vmess"?(we(i,"aead")&&(i.aead&&(i.alterId=0),delete i.aead),we(i,"sni")&&(i.servername=i.sni,delete i.sni),we(i,"cipher")&&!["auto","aes-128-gcm","chacha20-poly1305","none"].includes(i.cipher)&&(i.cipher="auto")):i.type==="wireguard"?(i.keepalive=i.keepalive??i["persistent-keepalive"],i["persistent-keepalive"]=i.keepalive,i["preshared-key"]=i["preshared-key"]??i["pre-shared-key"],i["pre-shared-key"]=i["preshared-key"]):i.type==="snell"&&i.version<3?delete i.udp:i.type==="vless"&&we(i,"sni")&&(i.servername=i.sni,delete i.sni),["vmess","vless"].includes(i.type)&&i.network==="http"){let c=i["http-opts"]?.path;we(i,"http-opts.path")&&!Array.isArray(c)&&(i["http-opts"].path=[c]);let l=i["http-opts"]?.headers?.Host;we(i,"http-opts.headers.Host")&&!Array.isArray(l)&&(i["http-opts"].headers.Host=[l])}if(["vmess","vless"].includes(i.type)&&i.network==="h2"){let c=i["h2-opts"]?.path;we(i,"h2-opts.path")&&Array.isArray(c)&&(i["h2-opts"].path=c[0]);let l=i["h2-opts"]?.headers?.host;we(i,"h2-opts.headers.Host")&&!Array.isArray(l)&&(i["h2-opts"].headers.host=[l])}if(["ws"].includes(i.network)){let c=i[`${i.network}-opts`]?.path;if(c){let l=/^(.*?)(?:\?ed=(\d+))?$/,[m,E="",b=""]=l.exec(c);i[`${i.network}-opts`].path=E,b!==""&&(i["ws-opts"]["early-data-header-name"]="Sec-WebSocket-Protocol",i["ws-opts"]["max-early-data"]=parseInt(b,10))}else i[`${i.network}-opts`]=i[`${i.network}-opts`]||{},i[`${i.network}-opts`].path="/"}if(i["plugin-opts"]?.tls&&we(i,"skip-cert-verify")&&(i["plugin-opts"]["skip-cert-verify"]=i["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity","anytls"].includes(i.type)&&delete i.tls,i["tls-fingerprint"]&&(i.fingerprint=i["tls-fingerprint"]),delete i["tls-fingerprint"],we(i,"tls")&&typeof i.tls!="boolean"&&delete i.tls,delete i.subName,delete i.collectionName,delete i.id,delete i.resolved,delete i["no-resolve"],n!=="internal")for(let c in i)(i[c]==null||/^_/i.test(c))&&delete i[c];return["grpc"].includes(i.network)&&i[`${i.network}-opts`]&&(delete i[`${i.network}-opts`]["_grpc-type"],delete i[`${i.network}-opts`]["_grpc-authority"]),i});return n==="internal"?u:`proxies:
`+u.map(i=>"  - "+JSON.stringify(i)+`
`).join("")}}}function rl(){return{type:"ALL",produce:(r,n,a={})=>{let u=r.filter(i=>!["ss","ssr","vmess","socks5","http","snell","trojan","tuic","vless","wireguard","hysteria","hysteria2","ssh","juicity"].includes(i.type)||i.type==="ss"&&!["aes-128-gcm","aes-192-gcm","aes-256-gcm","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","rc4-md5","chacha20-ietf","xchacha20","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(i.cipher)||i.type==="snell"&&i.version>=4||i.type==="vless"&&i["reality-opts"]&&!["xtls-rprx-vision"].includes(i.flow)?!1:i["underlying-proxy"]||i["dialer-proxy"]?(Wt.error(`Stash \u6682\u4E0D\u652F\u6301\u524D\u7F6E\u4EE3\u7406\u5B57\u6BB5. \u5DF2\u8FC7\u6EE4\u8282\u70B9 ${i.name}. \u8BF7\u4F7F\u7528 \u4EE3\u7406\u7684\u8F6C\u53D1\u94FE https://stash.wiki/proxy-protocols/proxy-groups#relay`),!1):!0).map(i=>{if(i.type==="vmess"?(we(i,"aead")&&(i.aead&&(i.alterId=0),delete i.aead),we(i,"sni")&&(i.servername=i.sni,delete i.sni),we(i,"cipher")&&!["auto","aes-128-gcm","chacha20-poly1305","none"].includes(i.cipher)&&(i.cipher="auto")):i.type==="tuic"?(we(i,"alpn")?i.alpn=Array.isArray(i.alpn)?i.alpn:[i.alpn]:i.alpn=["h3"],we(i,"tfo")&&!we(i,"fast-open")&&(i["fast-open"]=i.tfo,delete i.tfo),(!i.token||i.token.length===0)&&!we(i,"version")&&(i.version=5)):i.type==="hysteria"?(we(i,"auth_str")&&!we(i,"auth-str")&&(i["auth-str"]=i.auth_str),we(i,"alpn")&&(i.alpn=Array.isArray(i.alpn)?i.alpn:[i.alpn]),we(i,"tfo")&&!we(i,"fast-open")&&(i["fast-open"]=i.tfo,delete i.tfo),we(i,"down")&&!we(i,"down-speed")&&(i["down-speed"]=i.down,delete i.down),we(i,"up")&&!we(i,"up-speed")&&(i["up-speed"]=i.up,delete i.up),we(i,"down-speed")&&(i["down-speed"]=`${i["down-speed"]}`.match(/\d+/)?.[0]||0),we(i,"up-speed")&&(i["up-speed"]=`${i["up-speed"]}`.match(/\d+/)?.[0]||0)):i.type==="hysteria2"?(we(i,"password")&&!we(i,"auth")&&(i.auth=i.password,delete i.password),we(i,"tfo")&&!we(i,"fast-open")&&(i["fast-open"]=i.tfo,delete i.tfo),we(i,"down")&&!we(i,"down-speed")&&(i["down-speed"]=i.down,delete i.down),we(i,"up")&&!we(i,"up-speed")&&(i["up-speed"]=i.up,delete i.up),we(i,"down-speed")&&(i["down-speed"]=`${i["down-speed"]}`.match(/\d+/)?.[0]||0),we(i,"up-speed")&&(i["up-speed"]=`${i["up-speed"]}`.match(/\d+/)?.[0]||0)):i.type==="wireguard"?(i.keepalive=i.keepalive??i["persistent-keepalive"],i["persistent-keepalive"]=i.keepalive,i["preshared-key"]=i["preshared-key"]??i["pre-shared-key"],i["pre-shared-key"]=i["preshared-key"]):i.type==="snell"&&i.version<3?delete i.udp:i.type==="vless"&&we(i,"sni")&&(i.servername=i.sni,delete i.sni),["vmess","vless"].includes(i.type)&&i.network==="http"){let c=i["http-opts"]?.path;we(i,"http-opts.path")&&!Array.isArray(c)&&(i["http-opts"].path=[c]);let l=i["http-opts"]?.headers?.Host;we(i,"http-opts.headers.Host")&&!Array.isArray(l)&&(i["http-opts"].headers.Host=[l])}if(["vmess","vless"].includes(i.type)&&i.network==="h2"){let c=i["h2-opts"]?.path;we(i,"h2-opts.path")&&Array.isArray(c)&&(i["h2-opts"].path=c[0]);let l=i["h2-opts"]?.headers?.host;we(i,"h2-opts.headers.Host")&&!Array.isArray(l)&&(i["h2-opts"].headers.host=[l])}if(["ws"].includes(i.network)){let c=i[`${i.network}-opts`]?.path;if(c){let l=/^(.*?)(?:\?ed=(\d+))?$/,[m,E="",b=""]=l.exec(c);i[`${i.network}-opts`].path=E,b!==""&&(i["ws-opts"]["early-data-header-name"]="Sec-WebSocket-Protocol",i["ws-opts"]["max-early-data"]=parseInt(b,10))}else i[`${i.network}-opts`]=i[`${i.network}-opts`]||{},i[`${i.network}-opts`].path="/"}if(i["plugin-opts"]?.tls&&we(i,"skip-cert-verify")&&(i["plugin-opts"]["skip-cert-verify"]=i["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity","anytls"].includes(i.type)&&delete i.tls,i["tls-fingerprint"]&&(i["server-cert-fingerprint"]=i["tls-fingerprint"]),delete i["tls-fingerprint"],we(i,"tls")&&typeof i.tls!="boolean"&&delete i.tls,i["test-url"]&&(i["benchmark-url"]=i["test-url"],delete i["test-url"]),i["test-timeout"]&&(i["benchmark-timeout"]=i["test-timeout"],delete i["test-timeout"]),delete i.subName,delete i.collectionName,delete i.id,delete i.resolved,delete i["no-resolve"],n!=="internal")for(let c in i)(i[c]==null||/^_/i.test(c))&&delete i[c];return["grpc"].includes(i.network)&&i[`${i.network}-opts`]&&(delete i[`${i.network}-opts`]["_grpc-type"],delete i[`${i.network}-opts`]["_grpc-authority"]),i});return n==="internal"?u:`proxies:
`+u.map(i=>"  - "+JSON.stringify(i)+`
`).join("")}}}var A4="Loon",as={dual:"dual",ipv4:"v4-only",ipv6:"v6-only","ipv4-prefer":"prefer-v4","ipv6-prefer":"prefer-v6"};function mp(){return{produce:(t,r,n={})=>{switch(t.type){case"ss":return y4(t);case"ssr":return S4(t);case"trojan":return _4(t);case"vmess":return D4(t,n["include-unsupported-proxy"]);case"vless":return F4(t,n["include-unsupported-proxy"]);case"http":return C4(t);case"socks5":return I4(t);case"wireguard":return P4(t);case"hysteria2":return B4(t)}throw new Error(`Platform ${A4} does not support proxy type: ${t.type}`)}}}function y4(e){let t=new Pt(e);if(!["rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","salsa20","chacha20","chacha20-ietf","aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(e.cipher))throw new Error(`cipher ${e.cipher} is not supported`);if(t.append(`${e.name}=shadowsocks,${e.server},${e.port},${e.cipher},"${e.password}"`),we(e,"plugin")){if(e.plugin==="obfs")t.append(`,obfs-name=${e["plugin-opts"].mode}`),t.appendIfPresent(`,obfs-host=${e["plugin-opts"].host}`,"plugin-opts.host"),t.appendIfPresent(`,obfs-uri=${e["plugin-opts"].path}`,"plugin-opts.path");else if(!["shadow-tls"].includes(e.plugin))throw new Error(`plugin ${e.plugin} is not supported`)}if(we(e,"shadow-tls-password"))t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni"),t.appendIfPresent(`,udp-port=${e["udp-port"]}`,"udp-port");else if(["shadow-tls"].includes(e.plugin)&&e["plugin-opts"]){let n=e["plugin-opts"].password,a=e["plugin-opts"].host,u=e["plugin-opts"].version;if(n){if(t.append(`,shadow-tls-password=${n}`),a&&t.append(`,shadow-tls-sni=${a}`),u){if(u<2)throw new Error(`shadow-tls version ${u} is not supported`);t.append(`,shadow-tls-version=${u}`)}t.appendIfPresent(`,udp-port=${e["udp-port"]}`,"udp-port")}}t.appendIfPresent(`,fast-open=${e.tfo}`,"tfo"),e["block-quic"]==="on"?t.append(",block-quic=true"):e["block-quic"]==="off"&&t.append(",block-quic=false"),e.udp&&t.append(",udp=true");let r=as[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-mode=${r}`,"ip-version"),t.toString()}function S4(e){let t=new Pt(e);if(t.append(`${e.name}=shadowsocksr,${e.server},${e.port},${e.cipher},"${e.password}"`),t.append(`,protocol=${e.protocol}`),t.appendIfPresent(`,protocol-param=${e["protocol-param"]}`,"protocol-param"),t.appendIfPresent(`,obfs=${e.obfs}`,"obfs"),t.appendIfPresent(`,obfs-param=${e["obfs-param"]}`,"obfs-param"),we(e,"shadow-tls-password"))t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni"),t.appendIfPresent(`,udp-port=${e["udp-port"]}`,"udp-port");else if(["shadow-tls"].includes(e.plugin)&&e["plugin-opts"]){let n=e["plugin-opts"].password,a=e["plugin-opts"].host,u=e["plugin-opts"].version;if(n){if(t.append(`,shadow-tls-password=${n}`),a&&t.append(`,shadow-tls-sni=${a}`),u){if(u<2)throw new Error(`shadow-tls version ${u} is not supported`);t.append(`,shadow-tls-version=${u}`)}t.appendIfPresent(`,udp-port=${e["udp-port"]}`,"udp-port")}}t.appendIfPresent(`,fast-open=${e.tfo}`,"tfo"),e["block-quic"]==="on"?t.append(",block-quic=true"):e["block-quic"]==="off"&&t.append(",block-quic=false"),e.udp&&t.append(",udp=true");let r=as[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-mode=${r}`,"ip-version"),t.toString()}function _4(e){let t=new Pt(e);if(t.append(`${e.name}=trojan,${e.server},${e.port},"${e.password}"`),e.network==="tcp"&&delete e.network,we(e,"network"))if(e.network==="ws")t.append(",transport=ws"),t.appendIfPresent(`,path=${e["ws-opts"]?.path}`,"ws-opts.path"),t.appendIfPresent(`,host=${e["ws-opts"]?.headers?.Host}`,"ws-opts.headers.Host");else throw new Error(`network ${e.network} is unsupported`);t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,tls-name=${e.sni}`,"sni"),t.appendIfPresent(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),t.appendIfPresent(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),t.appendIfPresent(`,fast-open=${e.tfo}`,"tfo"),e["block-quic"]==="on"?t.append(",block-quic=true"):e["block-quic"]==="off"&&t.append(",block-quic=false"),e.udp&&t.append(",udp=true");let r=as[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-mode=${r}`,"ip-version"),t.toString()}function D4(e){let t=!!e["reality-opts"],r=new Pt(e);if(r.append(`${e.name}=vmess,${e.server},${e.port},${e.cipher},"${e.uuid}"`),e.network==="tcp"&&delete e.network,we(e,"network"))if(e.network==="ws")r.append(",transport=ws"),r.appendIfPresent(`,path=${e["ws-opts"]?.path}`,"ws-opts.path"),r.appendIfPresent(`,host=${e["ws-opts"]?.headers?.Host}`,"ws-opts.headers.Host");else if(e.network==="http"){r.append(",transport=http");let a=e["http-opts"]?.path,u=e["http-opts"]?.headers?.Host;r.appendIfPresent(`,path=${Array.isArray(a)?a[0]:a}`,"http-opts.path"),r.appendIfPresent(`,host=${Array.isArray(u)?u[0]:u}`,"http-opts.headers.Host")}else throw new Error(`network ${e.network} is unsupported`);else r.append(",transport=tcp");r.appendIfPresent(`,over-tls=${e.tls}`,"tls"),r.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t?(r.appendIfPresent(`,sni=${e.sni}`,"sni"),r.appendIfPresent(`,public-key="${e["reality-opts"]["public-key"]}"`,"reality-opts.public-key"),r.appendIfPresent(`,short-id=${e["reality-opts"]["short-id"]}`,"reality-opts.short-id")):(r.appendIfPresent(`,tls-name=${e.sni}`,"sni"),r.appendIfPresent(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),r.appendIfPresent(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256")),we(e,"aead")?r.append(`,alterId=${e.aead?0:1}`):r.append(`,alterId=${e.alterId}`),r.appendIfPresent(`,fast-open=${e.tfo}`,"tfo"),e["block-quic"]==="on"?r.append(",block-quic=true"):e["block-quic"]==="off"&&r.append(",block-quic=false"),e.udp&&r.append(",udp=true");let n=as[e["ip-version"]]||e["ip-version"];return r.appendIfPresent(`,ip-mode=${n}`,"ip-version"),r.toString()}function F4(e){let t=!1,r=!!e["reality-opts"];if(typeof e.flow<"u")if(["xtls-rprx-vision"].includes(e.flow))t=!0;else throw new Error(`VLESS flow(${e.flow}) is not supported`);let n=new Pt(e);if(n.append(`${e.name}=vless,${e.server},${e.port},"${e.uuid}"`),e.network==="tcp"&&delete e.network,we(e,"network"))if(e.network==="ws")n.append(",transport=ws"),n.appendIfPresent(`,path=${e["ws-opts"]?.path}`,"ws-opts.path"),n.appendIfPresent(`,host=${e["ws-opts"]?.headers?.Host}`,"ws-opts.headers.Host");else if(e.network==="http"){n.append(",transport=http");let u=e["http-opts"]?.path,i=e["http-opts"]?.headers?.Host;n.appendIfPresent(`,path=${Array.isArray(u)?u[0]:u}`,"http-opts.path"),n.appendIfPresent(`,host=${Array.isArray(i)?i[0]:i}`,"http-opts.headers.Host")}else throw new Error(`network ${e.network} is unsupported`);else n.append(",transport=tcp");n.appendIfPresent(`,over-tls=${e.tls}`,"tls"),n.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t&&n.appendIfPresent(`,flow=${e.flow}`,"flow"),r?(n.appendIfPresent(`,sni=${e.sni}`,"sni"),n.appendIfPresent(`,public-key="${e["reality-opts"]["public-key"]}"`,"reality-opts.public-key"),n.appendIfPresent(`,short-id=${e["reality-opts"]["short-id"]}`,"reality-opts.short-id")):(n.appendIfPresent(`,tls-name=${e.sni}`,"sni"),n.appendIfPresent(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),n.appendIfPresent(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256")),n.appendIfPresent(`,fast-open=${e.tfo}`,"tfo"),e["block-quic"]==="on"?n.append(",block-quic=true"):e["block-quic"]==="off"&&n.append(",block-quic=false"),e.udp&&n.append(",udp=true");let a=as[e["ip-version"]]||e["ip-version"];return n.appendIfPresent(`,ip-mode=${a}`,"ip-version"),n.toString()}function C4(e){let t=new Pt(e),r=e.tls?"https":"http";t.append(`${e.name}=${r},${e.server},${e.port}`),t.appendIfPresent(`,${e.username}`,"username"),t.appendIfPresent(`,"${e.password}"`,"password"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),e["block-quic"]==="on"?t.append(",block-quic=true"):e["block-quic"]==="off"&&t.append(",block-quic=false");let n=as[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-mode=${n}`,"ip-version"),t.toString()}function I4(e){let t=new Pt(e);t.append(`${e.name}=socks5,${e.server},${e.port}`),t.appendIfPresent(`,${e.username}`,"username"),t.appendIfPresent(`,"${e.password}"`,"password"),t.appendIfPresent(`,over-tls=${e.tls}`,"tls"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),e["block-quic"]==="on"?t.append(",block-quic=true"):e["block-quic"]==="off"&&t.append(",block-quic=false"),e.udp&&t.append(",udp=true");let r=as[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-mode=${r}`,"ip-version"),t.toString()}function P4(e){Array.isArray(e.peers)&&e.peers.length>0&&(e.server=e.peers[0].server,e.port=e.peers[0].port,e.ip=e.peers[0].ip,e.ipv6=e.peers[0].ipv6,e["public-key"]=e.peers[0]["public-key"],e["preshared-key"]=e.peers[0]["pre-shared-key"],e["allowed-ips"]=e.peers[0]["allowed-ips"],e.reserved=e.peers[0].reserved);let t=new Pt(e);if(t.append(`${e.name}=wireguard`),t.appendIfPresent(`,interface-ip=${e.ip}`,"ip"),t.appendIfPresent(`,interface-ipv6=${e.ipv6}`,"ipv6"),t.appendIfPresent(`,private-key="${e["private-key"]}"`,"private-key"),t.appendIfPresent(`,mtu=${e.mtu}`,"mtu"),e.dns&&Array.isArray(e.dns)){e.dnsv6=e.dns.find(c=>En(c));let i=e.dns.find(c=>zn(c));i||(i=e.dns.find(c=>!zn(c)&&!En(c))),e.dns=i}t.appendIfPresent(`,dns=${e.dns}`,"dns"),t.appendIfPresent(`,dnsv6=${e.dnsv6}`,"dnsv6"),t.appendIfPresent(`,keepalive=${e["persistent-keepalive"]}`,"persistent-keepalive"),t.appendIfPresent(`,keepalive=${e.keepalive}`,"keepalive");let r=Array.isArray(e["allowed-ips"])?e["allowed-ips"].join(","):e["allowed-ips"],n=Array.isArray(e.reserved)?e.reserved.join(","):e.reserved;n&&(n=`,reserved=[${n}]`);let a=e["preshared-key"]??e["pre-shared-key"];a&&(a=`,preshared-key="${a}"`),t.append(`,peers=[{public-key="${e["public-key"]}",allowed-ips="${r??"0.0.0.0/0,::/0"}",endpoint=${e.server}:${e.port}${n??""}${a??""}}]`);let u=as[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-mode=${u}`,"ip-version"),e["block-quic"]==="on"?t.append(",block-quic=true"):e["block-quic"]==="off"&&t.append(",block-quic=false"),t.toString()}function B4(e){if(e["obfs-password"]&&e.obfs!="salamander")throw new Error("only salamander obfs is supported");let t=new Pt(e);t.append(`${e.name}=Hysteria2,${e.server},${e.port}`),t.appendIfPresent(`,"${e.password}"`,"password"),t.appendIfPresent(`,tls-name=${e.sni}`,"sni"),t.appendIfPresent(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),t.appendIfPresent(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),e["obfs-password"]&&e.obfs=="salamander"&&t.append(`,salamander-password=${e["obfs-password"]}`),t.appendIfPresent(`,fast-open=${e.tfo}`,"tfo"),e["block-quic"]==="on"?t.append(",block-quic=true"):e["block-quic"]==="off"&&t.append(",block-quic=false"),e.udp&&t.append(",udp=true"),t.appendIfPresent(`,download-bandwidth=${`${e.down}`.match(/\d+/)?.[0]||0}`,"down"),t.appendIfPresent(`,ecn=${e.ecn}`,"ecn");let r=as[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-mode=${r}`,"ip-version"),t.toString()}function kv(e){let t="none",r=e["reality-opts"],n="",a="",u="";if(r){t="reality";let C=e["reality-opts"]?.["public-key"];C&&(a=`&pbk=${encodeURIComponent(C)}`);let x=e["reality-opts"]?.["short-id"];x&&(n=`&sid=${encodeURIComponent(x)}`);let N=e["reality-opts"]?.["_spider-x"];N&&(u=`&spx=${encodeURIComponent(N)}`)}else e.tls&&(t="tls");let i="";e.alpn&&(i=`&alpn=${encodeURIComponent(Array.isArray(e.alpn)?e.alpn:e.alpn.join(","))}`);let c="";e["skip-cert-verify"]&&(c="&allowInsecure=1");let l="";e.sni&&(l=`&sni=${encodeURIComponent(e.sni)}`);let m="";e["client-fingerprint"]&&(m=`&fp=${encodeURIComponent(e["client-fingerprint"])}`);let E="";e.flow&&(E=`&flow=${encodeURIComponent(e.flow)}`);let b="";e._extra&&(b=`&extra=${encodeURIComponent(e._extra)}`);let v="";e._mode&&(v=`&mode=${encodeURIComponent(e._mode)}`);let g=e.network;e.network==="ws"&&e["ws-opts"]?.["v2ray-http-upgrade"]&&(g="httpupgrade");let A=`&type=${encodeURIComponent(g)}`;if(["grpc"].includes(e.network)){A+=`&mode=${encodeURIComponent(e[`${e.network}-opts`]?.["_grpc-type"]||"gun")}`;let C=e[`${e.network}-opts`]?.["_grpc-authority"];C&&(A+=`&authority=${encodeURIComponent(C)}`)}let w=e[`${e.network}-opts`]?.[`${e.network}-service-name`],S=e[`${e.network}-opts`]?.path,y=e[`${e.network}-opts`]?.headers?.Host;return S&&(A+=`&path=${encodeURIComponent(Array.isArray(S)?S[0]:S)}`),y&&(A+=`&host=${encodeURIComponent(Array.isArray(y)?y[0]:y)}`),w&&(A+=`&serviceName=${encodeURIComponent(w)}`),e.network==="kcp"&&(e.seed&&(A+=`&seed=${encodeURIComponent(e.seed)}`),e.headerType&&(A+=`&headerType=${encodeURIComponent(e.headerType)}`)),`vless://${e.uuid}@${e.server}:${e.port}?security=${encodeURIComponent(t)}${A}${i}${c}${l}${m}${E}${n}${u}${a}${v}${b}#${encodeURIComponent(e.name)}`}function uu(){return{type:"SINGLE",produce:r=>{let n="";delete r.subName,delete r.collectionName,delete r.id,delete r.resolved,delete r["no-resolve"];for(let a in r)r[a]==null&&delete r[a];switch(["trojan","tuic","hysteria","hysteria2","juicity"].includes(r.type)&&delete r.tls,!["vmess"].includes(r.type)&&r.server&&En(r.server)&&(r.server=`[${r.server}]`),r.type){case"socks5":n=`socks://${encodeURIComponent(Yt.encode(`${r.username??""}:${r.password??""}`))}@${r.server}:${r.port}#${r.name}`;break;case"ss":let a=`${r.cipher}:${r.password}`;if(n=`ss://${r.cipher?.startsWith("2022-blake3-")?`${encodeURIComponent(r.cipher)}:${encodeURIComponent(r.password)}`:Yt.encode(a)}@${r.server}:${r.port}${r.plugin?"/":""}`,r.plugin){n+="?plugin=";let R=r["plugin-opts"];switch(r.plugin){case"obfs":n+=encodeURIComponent(`simple-obfs;obfs=${R.mode}${R.host?";obfs-host="+R.host:""}`);break;case"v2ray-plugin":n+=encodeURIComponent(`v2ray-plugin;obfs=${R.mode}${R.host?";obfs-host"+R.host:""}${R.tls?";tls":""}`);break;case"shadow-tls":n+=encodeURIComponent(`shadow-tls;host=${R.host};password=${R.password};version=${R.version}`);break;default:throw new Error(`Unsupported plugin option: ${r.plugin}`)}}r["udp-over-tcp"]&&(n=`${n}${r.plugin?"&":"?"}uot=1`),r.tfo&&(n=`${n}${r.plugin||r["udp-over-tcp"]?"&":"?"}tfo=1`),n+=`#${encodeURIComponent(r.name)}`;break;case"ssr":n=`${r.server}:${r.port}:${r.protocol}:${r.cipher}:${r.obfs}:${Yt.encode(r.password)}/`,n+=`?remarks=${Yt.encode(r.name)}${r["obfs-param"]?"&obfsparam="+Yt.encode(r["obfs-param"]):""}${r["protocol-param"]?"&protocolparam="+Yt.encode(r["protocol-param"]):""}`,n="ssr://"+Yt.encode(n);break;case"vmess":let u="",i=r.network||"tcp";if(r.network==="http"?(i="tcp",u="http"):r.network==="ws"&&r["ws-opts"]?.["v2ray-http-upgrade"]&&(i="httpupgrade"),n={v:"2",ps:r.name,add:r.server,port:`${r.port}`,id:r.uuid,aid:`${r.alterId||0}`,scy:r.cipher,net:i,type:u,tls:r.tls?"tls":"",alpn:Array.isArray(r.alpn)?r.alpn.join(","):r.alpn,fp:r["client-fingerprint"]},r.tls&&r.sni&&(n.sni=r.sni),r.network){let R=r[`${r.network}-opts`]?.path,M=r[`${r.network}-opts`]?.headers?.Host;["grpc"].includes(r.network)?(n.path=r[`${r.network}-opts`]?.["grpc-service-name"],n.type=r[`${r.network}-opts`]?.["_grpc-type"]||"gun",n.host=r[`${r.network}-opts`]?.["_grpc-authority"]):["kcp","quic"].includes(r.network)?(n.type=r[`${r.network}-opts`]?.[`_${r.network}-type`]||"none",n.host=r[`${r.network}-opts`]?.[`_${r.network}-host`],n.path=r[`${r.network}-opts`]?.[`_${r.network}-path`]):(R&&(n.path=Array.isArray(R)?R[0]:R),M&&(n.host=Array.isArray(M)?M[0]:M))}n="vmess://"+Yt.encode(JSON.stringify(n));break;case"vless":n=kv(r);break;case"trojan":let c="";if(r.network){let R=r.network;if(r.network==="ws"&&r["ws-opts"]?.["v2ray-http-upgrade"]&&(R="httpupgrade"),c=`&type=${encodeURIComponent(R)}`,["grpc"].includes(r.network)){let V=r[`${r.network}-opts`]?.[`${r.network}-service-name`],z=r[`${r.network}-opts`]?.["_grpc-authority"];V&&(c+=`&serviceName=${encodeURIComponent(V)}`),z&&(c+=`&authority=${encodeURIComponent(z)}`),c+=`&mode=${encodeURIComponent(r[`${r.network}-opts`]?.["_grpc-type"]||"gun")}`}let M=r[`${r.network}-opts`]?.path,Q=r[`${r.network}-opts`]?.headers?.Host;M&&(c+=`&path=${encodeURIComponent(Array.isArray(M)?M[0]:M)}`),Q&&(c+=`&host=${encodeURIComponent(Array.isArray(Q)?Q[0]:Q)}`)}let l="";r["client-fingerprint"]&&(l=`&fp=${encodeURIComponent(r["client-fingerprint"])}`);let m="";r.alpn&&(m=`&alpn=${encodeURIComponent(Array.isArray(r.alpn)?r.alpn:r.alpn.join(","))}`);let E=r["reality-opts"],b="",v="",g="",A="",w="",S="";if(E){A="&security=reality";let R=r["reality-opts"]?.["public-key"];R&&(v=`&pbk=${encodeURIComponent(R)}`);let M=r["reality-opts"]?.["short-id"];M&&(b=`&sid=${encodeURIComponent(M)}`);let Q=r["reality-opts"]?.["_spider-x"];Q&&(g=`&spx=${encodeURIComponent(Q)}`),r._extra&&(S=`&extra=${encodeURIComponent(r._extra)}`),r._mode&&(w=`&mode=${encodeURIComponent(r._mode)}`)}n=`trojan://${r.password}@${r.server}:${r.port}?sni=${encodeURIComponent(r.sni||r.server)}${r["skip-cert-verify"]?"&allowInsecure=1":""}${c}${m}${l}${A}${b}${v}${g}${w}${S}#${encodeURIComponent(r.name)}`;break;case"hysteria2":let y=[];r["hop-interval"]&&y.push(`hop-interval=${r["hop-interval"]}`),r.keepalive&&y.push(`keepalive=${r.keepalive}`),r["skip-cert-verify"]&&y.push("insecure=1"),r.obfs&&(y.push(`obfs=${encodeURIComponent(r.obfs)}`),r["obfs-password"]&&y.push(`obfs-password=${encodeURIComponent(r["obfs-password"])}`)),r.sni&&y.push(`sni=${encodeURIComponent(r.sni)}`),r.ports&&y.push(`mport=${r.ports}`),r["tls-fingerprint"]&&y.push(`pinSHA256=${encodeURIComponent(r["tls-fingerprint"])}`),r.tfo&&y.push("fastopen=1"),n=`hysteria2://${encodeURIComponent(r.password)}@${r.server}:${r.port}?${y.join("&")}#${encodeURIComponent(r.name)}`;break;case"hysteria":let C=[];Object.keys(r).forEach(R=>{if(!["name","type","server","port"].includes(R)){let M=R.replace(/-/,"_");["alpn"].includes(R)?r[R]&&C.push(`${M}=${encodeURIComponent(Array.isArray(r[R])?r[R][0]:r[R])}`):["skip-cert-verify"].includes(R)?r[R]&&C.push("insecure=1"):["tfo","fast-open"].includes(R)?r[R]&&!C.includes("fastopen=1")&&C.push("fastopen=1"):["ports"].includes(R)?C.push(`mport=${r[R]}`):["auth-str"].includes(R)?C.push(`auth=${r[R]}`):["up"].includes(R)?C.push(`upmbps=${r[R]}`):["down"].includes(R)?C.push(`downmbps=${r[R]}`):["_obfs"].includes(R)?C.push(`obfs=${r[R]}`):["obfs"].includes(R)?C.push(`obfsParam=${r[R]}`):["sni"].includes(R)?C.push(`peer=${r[R]}`):r[R]&&!/^_/i.test(R)&&C.push(`${M}=${encodeURIComponent(r[R])}`)}}),n=`hysteria://${r.server}:${r.port}?${C.join("&")}#${encodeURIComponent(r.name)}`;break;case"tuic":if(!r.token||r.token.length===0){let R=[];Object.keys(r).forEach(M=>{if(!["name","type","uuid","password","server","port","tls"].includes(M)){let Q=M.replace(/-/,"_");["alpn"].includes(M)?r[M]&&R.push(`${Q}=${encodeURIComponent(Array.isArray(r[M])?r[M][0]:r[M])}`):["skip-cert-verify"].includes(M)?r[M]&&R.push("allow_insecure=1"):["tfo","fast-open"].includes(M)?r[M]&&!R.includes("fast_open=1")&&R.push("fast_open=1"):["disable-sni","reduce-rtt"].includes(M)&&r[M]?R.push(`${Q.replace(/-/g,"_")}=1`):["congestion-controller"].includes(M)?R.push(`congestion_control=${r[M]}`):r[M]&&!/^_/i.test(M)&&R.push(`${Q.replace(/-/g,"_")}=${encodeURIComponent(r[M])}`)}}),n=`tuic://${encodeURIComponent(r.uuid)}:${encodeURIComponent(r.password)}@${r.server}:${r.port}?${R.join("&")}#${encodeURIComponent(r.name)}`}break;case"anytls":n=kv({...r,uuid:r.password,network:r.network||"tcp"}).replace("vless","anytls");let x=[];Object.keys(r).forEach(R=>{if(!["name","type","password","server","port","tls"].includes(R)){let M=R.replace(/-/,"_");["alpn"].includes(R)?r[R]&&x.push(`${M}=${encodeURIComponent(Array.isArray(r[R])?r[R][0]:r[R])}`):["skip-cert-verify"].includes(R)?r[R]&&x.push("insecure=1"):["udp"].includes(R)?r[R]&&x.push("udp=1"):r[R]&&!/^_|client-fingerprint/i.test(R)&&["number","string","boolean"].includes(typeof r[R])&&x.push(`${M.replace(/-/g,"_")}=${encodeURIComponent(r[R])}`)}});let N=n.split("?"),L=N[0],ne={};N.length>1&&N[1].split("#")[0].split("&").forEach(Q=>{let[V,z]=Q.split("=");V&&(ne[V]=z)}),x.forEach(R=>{let[M,Q]=R.split("=");M&&(ne[M]=Q)});let pe=Object.keys(ne).map(R=>`${R}=${ne[R]}`).join("&"),I=n.match(/#(.*)$/),B=I?`#${I[1]}`:"";n=`${L}?${pe}${B}`;break;case"wireguard":let j=[];Object.keys(r).forEach(R=>{["name","type","server","port","ip","ipv6","private-key"].includes(R)||(["public-key"].includes(R)?j.push(`publickey=${r[R]}`):["udp"].includes(R)?r[R]&&j.push(`${R}=1`):r[R]&&!/^_/i.test(R)&&j.push(`${R}=${encodeURIComponent(r[R])}`))}),r.ip&&r.ipv6?j.push(`address=${r.ip}/32,${r.ipv6}/128`):r.ip?j.push(`address=${r.ip}/32`):r.ipv6&&j.push(`address=${r.ipv6}/128`),n=`wireguard://${encodeURIComponent(r["private-key"])}@${r.server}:${r.port}/?${j.join("&")}#${encodeURIComponent(r.name)}`;break}return n}}}var $4=uu();function io(){return{type:"ALL",produce:r=>{let n=[];return r.map(a=>{try{n.push($4.produce(a))}catch(u){Wt.error(`Cannot produce proxy: ${JSON.stringify(a,null,2)}
Reason: ${u}`)}}),Yt.encode(n.join(`
`))}}}var R4="QX";function so(){return{produce:(t,r,n={})=>{switch(t.type){case"ss":return k4(t);case"ssr":return x4(t);case"trojan":return T4(t);case"vmess":return O4(t);case"http":return L4(t);case"socks5":return H4(t);case"vless":return N4(t)}throw new Error(`Platform ${R4} does not support proxy type: ${t.type}`)}}}function k4(e){let t=new Pt(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);if(e.cipher||(e.cipher="none"),!["none","rc4-md5","rc4-md5-6","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","cast5-cfb","des-cfb","rc2-cfb","salsa20","chacha20","chacha20-ietf","aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(e.cipher))throw new Error(`cipher ${e.cipher} is not supported`);if(r(`shadowsocks=${e.server}:${e.port}`),r(`,method=${e.cipher}`),r(`,password=${e.password}`),Wn(e)&&(e.tls=!0),we(e,"plugin")){if(e.plugin==="obfs"){let a=e["plugin-opts"];r(`,obfs=${a.mode}`)}else if(e.plugin==="v2ray-plugin"&&e["plugin-opts"].mode==="websocket")e["plugin-opts"].tls?r(",obfs=wss"):r(",obfs=ws");else throw new Error("plugin is not supported");n(`,obfs-host=${e["plugin-opts"].host}`,"plugin-opts.host"),n(`,obfs-uri=${e["plugin-opts"].path}`,"plugin-opts.path")}return Wn(e)&&(n(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),n(`,tls-alpn=${e["tls-alpn"]}`,"tls-alpn"),n(`,tls-no-session-ticket=${e["tls-no-session-ticket"]}`,"tls-no-session-ticket"),n(`,tls-no-session-reuse=${e["tls-no-session-reuse"]}`,"tls-no-session-reuse"),n(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),n(`,tls-verification=${!e["skip-cert-verify"]}`,"skip-cert-verify"),n(`,tls-host=${e.sni}`,"sni")),n(`,fast-open=${e.tfo}`,"tfo"),n(`,udp-relay=${e.udp}`,"udp"),e._ssr_python_uot?r(",udp-over-tcp=true"):e["udp-over-tcp"]&&(!e["udp-over-tcp-version"]||e["udp-over-tcp-version"]===1?r(",udp-over-tcp=sp.v1"):e["udp-over-tcp-version"]===2&&r(",udp-over-tcp=sp.v2")),t.appendIfPresent(`,server_check_url=${e["test-url"]}`,"test-url"),r(`,tag=${e.name}`),t.toString()}function x4(e){let t=new Pt(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);return r(`shadowsocks=${e.server}:${e.port}`),r(`,method=${e.cipher}`),r(`,password=${e.password}`),r(`,ssr-protocol=${e.protocol}`),n(`,ssr-protocol-param=${e["protocol-param"]}`,"protocol-param"),n(`,obfs=${e.obfs}`,"obfs"),n(`,obfs-host=${e["obfs-param"]}`,"obfs-param"),n(`,fast-open=${e.tfo}`,"tfo"),n(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,server_check_url=${e["test-url"]}`,"test-url"),r(`,tag=${e.name}`),t.toString()}function T4(e){let t=new Pt(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);if(r(`trojan=${e.server}:${e.port}`),r(`,password=${e.password}`),we(e,"network"))if(e.network==="ws")Wn(e)?r(",obfs=wss"):r(",obfs=ws"),n(`,obfs-uri=${e["ws-opts"]?.path}`,"ws-opts.path"),n(`,obfs-host=${e["ws-opts"]?.headers?.Host}`,"ws-opts.headers.Host");else throw new Error(`network ${e.network} is unsupported`);return e.network!=="ws"&&Wn(e)&&r(",over-tls=true"),Wn(e)&&(n(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),n(`,tls-alpn=${e["tls-alpn"]}`,"tls-alpn"),n(`,tls-no-session-ticket=${e["tls-no-session-ticket"]}`,"tls-no-session-ticket"),n(`,tls-no-session-reuse=${e["tls-no-session-reuse"]}`,"tls-no-session-reuse"),n(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),n(`,tls-verification=${!e["skip-cert-verify"]}`,"skip-cert-verify"),n(`,tls-host=${e.sni}`,"sni")),n(`,fast-open=${e.tfo}`,"tfo"),n(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,server_check_url=${e["test-url"]}`,"test-url"),r(`,tag=${e.name}`),t.toString()}function O4(e){let t=new Pt(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);r(`vmess=${e.server}:${e.port}`);let a;if(e.cipher==="auto"?a="chacha20-ietf-poly1305":a=e.cipher,r(`,method=${a}`),r(`,password=${e.uuid}`),Wn(e)&&(e.tls=!0),we(e,"network")){if(e.network==="ws")e.tls?r(",obfs=wss"):r(",obfs=ws");else if(e.network==="http")r(",obfs=http");else throw new Error(`network ${e.network} is unsupported`);let u=e[`${e.network}-opts`]?.path,i=e[`${e.network}-opts`]?.headers?.Host;n(`,obfs-uri=${Array.isArray(u)?u[0]:u}`,`${e.network}-opts.path`),n(`,obfs-host=${Array.isArray(i)?i[0]:i}`,`${e.network}-opts.headers.Host`)}else e.tls&&r(",obfs=over-tls");return Wn(e)&&(n(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),n(`,tls-alpn=${e["tls-alpn"]}`,"tls-alpn"),n(`,tls-no-session-ticket=${e["tls-no-session-ticket"]}`,"tls-no-session-ticket"),n(`,tls-no-session-reuse=${e["tls-no-session-reuse"]}`,"tls-no-session-reuse"),n(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),n(`,tls-verification=${!e["skip-cert-verify"]}`,"skip-cert-verify"),n(`,tls-host=${e.sni}`,"sni")),we(e,"aead")?r(`,aead=${e.aead}`):r(`,aead=${e.alterId===0}`),n(`,fast-open=${e.tfo}`,"tfo"),n(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,server_check_url=${e["test-url"]}`,"test-url"),r(`,tag=${e.name}`),t.toString()}function N4(e){if(typeof e.flow<"u"||e["reality-opts"])throw new Error("VLESS XTLS/REALITY is not supported");let t=new Pt(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);if(r(`vless=${e.server}:${e.port}`),r(",method=none"),r(`,password=${e.uuid}`),Wn(e)&&(e.tls=!0),we(e,"network")){if(e.network==="ws")e.tls?r(",obfs=wss"):r(",obfs=ws");else if(e.network==="http")r(",obfs=http");else if(["tcp"].includes(e.network))e.tls&&r(",obfs=over-tls");else if(!["tcp"].includes(e.network))throw new Error(`network ${e.network} is unsupported`);let u=e[`${e.network}-opts`]?.path,i=e[`${e.network}-opts`]?.headers?.Host;n(`,obfs-uri=${Array.isArray(u)?u[0]:u}`,`${e.network}-opts.path`),n(`,obfs-host=${Array.isArray(i)?i[0]:i}`,`${e.network}-opts.headers.Host`)}else e.tls&&r(",obfs=over-tls");return Wn(e)&&(n(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),n(`,tls-alpn=${e["tls-alpn"]}`,"tls-alpn"),n(`,tls-no-session-ticket=${e["tls-no-session-ticket"]}`,"tls-no-session-ticket"),n(`,tls-no-session-reuse=${e["tls-no-session-reuse"]}`,"tls-no-session-reuse"),n(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),n(`,tls-verification=${!e["skip-cert-verify"]}`,"skip-cert-verify"),n(`,tls-host=${e.sni}`,"sni")),n(`,fast-open=${e.tfo}`,"tfo"),n(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,server_check_url=${e["test-url"]}`,"test-url"),r(`,tag=${e.name}`),t.toString()}function L4(e){let t=new Pt(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);return r(`http=${e.server}:${e.port}`),n(`,username=${e.username}`,"username"),n(`,password=${e.password}`,"password"),Wn(e)&&(e.tls=!0),n(`,over-tls=${e.tls}`,"tls"),Wn(e)&&(n(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),n(`,tls-alpn=${e["tls-alpn"]}`,"tls-alpn"),n(`,tls-no-session-ticket=${e["tls-no-session-ticket"]}`,"tls-no-session-ticket"),n(`,tls-no-session-reuse=${e["tls-no-session-reuse"]}`,"tls-no-session-reuse"),n(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),n(`,tls-verification=${!e["skip-cert-verify"]}`,"skip-cert-verify"),n(`,tls-host=${e.sni}`,"sni")),n(`,fast-open=${e.tfo}`,"tfo"),n(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,server_check_url=${e["test-url"]}`,"test-url"),r(`,tag=${e.name}`),t.toString()}function H4(e){let t=new Pt(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);return r(`socks5=${e.server}:${e.port}`),n(`,username=${e.username}`,"username"),n(`,password=${e.password}`,"password"),Wn(e)&&(e.tls=!0),n(`,over-tls=${e.tls}`,"tls"),Wn(e)&&(n(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),n(`,tls-alpn=${e["tls-alpn"]}`,"tls-alpn"),n(`,tls-no-session-ticket=${e["tls-no-session-ticket"]}`,"tls-no-session-ticket"),n(`,tls-no-session-reuse=${e["tls-no-session-reuse"]}`,"tls-no-session-reuse"),n(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),n(`,tls-verification=${!e["skip-cert-verify"]}`,"skip-cert-verify"),n(`,tls-host=${e.sni}`,"sni")),n(`,fast-open=${e.tfo}`,"tfo"),n(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,server_check_url=${e["test-url"]}`,"test-url"),r(`,tag=${e.name}`),t.toString()}function Wn(e){return e.tls}function ao(){return{type:"ALL",produce:(r,n,a={})=>{let u=r.filter(i=>a["include-unsupported-proxy"]?!0:i.type==="snell"&&i.version>=4?!1:!["mieru"].includes(i.type)).map(i=>{if(i.type==="vmess")we(i,"aead")&&(i.aead&&(i.alterId=0),delete i.aead),we(i,"sni")&&(i.servername=i.sni,delete i.sni),we(i,"cipher")&&!["auto","none","zero","aes-128-gcm","chacha20-poly1305"].includes(i.cipher)&&(i.cipher="auto");else if(i.type==="tuic")we(i,"alpn")?i.alpn=Array.isArray(i.alpn)?i.alpn:[i.alpn]:i.alpn=["h3"],we(i,"tfo")&&!we(i,"fast-open")&&(i["fast-open"]=i.tfo),(!i.token||i.token.length===0)&&!we(i,"version")&&(i.version=5);else if(i.type==="hysteria")we(i,"auth_str")&&!we(i,"auth-str")&&(i["auth-str"]=i.auth_str),we(i,"alpn")&&(i.alpn=Array.isArray(i.alpn)?i.alpn:[i.alpn]),we(i,"tfo")&&!we(i,"fast-open")&&(i["fast-open"]=i.tfo);else if(i.type==="hysteria2")we(i,"alpn")&&(i.alpn=Array.isArray(i.alpn)?i.alpn:[i.alpn]),we(i,"tfo")&&!we(i,"fast-open")&&(i["fast-open"]=i.tfo);else if(i.type==="wireguard")i.keepalive=i.keepalive??i["persistent-keepalive"],i["persistent-keepalive"]=i.keepalive,i["preshared-key"]=i["preshared-key"]??i["pre-shared-key"],i["pre-shared-key"]=i["preshared-key"];else if(i.type==="snell"&&i.version<3)delete i.udp;else if(i.type==="vless")we(i,"sni")&&(i.servername=i.sni,delete i.sni);else if(i.type==="ss")we(i,"shadow-tls-password")&&!we(i,"plugin")&&(i.plugin="shadow-tls",i["plugin-opts"]={host:i["shadow-tls-sni"],password:i["shadow-tls-password"],version:i["shadow-tls-version"]},delete i["shadow-tls-password"],delete i["shadow-tls-sni"],delete i["shadow-tls-version"]);else if(["anytls"].includes(i.type)&&i.network&&(!["tcp"].includes(i.network)||["tcp"].includes(i.network)&&i["reality-opts"]))return!1;if(["vmess","vless"].includes(i.type)&&i.network==="http"){let c=i["http-opts"]?.path;we(i,"http-opts.path")&&!Array.isArray(c)&&(i["http-opts"].path=[c]);let l=i["http-opts"]?.headers?.Host;we(i,"http-opts.headers.Host")&&!Array.isArray(l)&&(i["http-opts"].headers.Host=[l])}if(["vmess","vless"].includes(i.type)&&i.network==="h2"){let c=i["h2-opts"]?.path;we(i,"h2-opts.path")&&Array.isArray(c)&&(i["h2-opts"].path=c[0]);let l=i["h2-opts"]?.headers?.host;we(i,"h2-opts.headers.Host")&&!Array.isArray(l)&&(i["h2-opts"].headers.host=[l])}if(["ws"].includes(i.network)){let c=i[`${i.network}-opts`]?.path;if(c){let l=/^(.*?)(?:\?ed=(\d+))?$/,[m,E="",b=""]=l.exec(c);i[`${i.network}-opts`].path=E,b!==""&&(i["ws-opts"]["early-data-header-name"]="Sec-WebSocket-Protocol",i["ws-opts"]["max-early-data"]=parseInt(b,10))}else i[`${i.network}-opts`]=i[`${i.network}-opts`]||{},i[`${i.network}-opts`].path="/"}if(i["plugin-opts"]?.tls&&we(i,"skip-cert-verify")&&(i["plugin-opts"]["skip-cert-verify"]=i["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity","anytls"].includes(i.type)&&delete i.tls,i["tls-fingerprint"]&&(i.fingerprint=i["tls-fingerprint"]),delete i["tls-fingerprint"],i["underlying-proxy"]&&(i["dialer-proxy"]=i["underlying-proxy"]),delete i["underlying-proxy"],we(i,"tls")&&typeof i.tls!="boolean"&&delete i.tls,delete i.subName,delete i.collectionName,delete i.id,delete i.resolved,delete i["no-resolve"],n!=="internal")for(let c in i)(i[c]==null||/^_/i.test(c))&&delete i[c];return["grpc"].includes(i.network)&&i[`${i.network}-opts`]&&(delete i[`${i.network}-opts`]["_grpc-type"],delete i[`${i.network}-opts`]["_grpc-authority"]),i});return n==="internal"?u:`proxies:
`+u.map(i=>"  - "+JSON.stringify(i)+`
`).join("")}}}var j4="Surfboard";function nl(){return{produce:t=>{switch(t.name=t.name.replace(/=|,/g,""),t.type){case"ss":return U4(t);case"trojan":return M4(t);case"vmess":return q4(t);case"http":return V4(t);case"socks5":return K4(t);case"wireguard-surge":return z4(t)}throw new Error(`Platform ${j4} does not support proxy type: ${t.type}`)}}}function U4(e){let t=new Pt(e);if(t.append(`${e.name}=${e.type},${e.server},${e.port}`),!["aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","salsa20","chacha20","chacha20-ietf"].includes(e.cipher))throw new Error(`cipher ${e.cipher} is not supported`);if(t.append(`,encrypt-method=${e.cipher}`),t.appendIfPresent(`,password=${e.password}`,"password"),we(e,"plugin"))if(e.plugin==="obfs")t.append(`,obfs=${e["plugin-opts"].mode}`),t.appendIfPresent(`,obfs-host=${e["plugin-opts"].host}`,"plugin-opts.host"),t.appendIfPresent(`,obfs-uri=${e["plugin-opts"].path}`,"plugin-opts.path");else throw new Error(`plugin ${e.plugin} is not supported`);return t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.toString()}function M4(e){let t=new Pt(e);return t.append(`${e.name}=${e.type},${e.server},${e.port}`),t.appendIfPresent(`,password=${e.password}`,"password"),xv(t,e),t.appendIfPresent(`,tls=${e.tls}`,"tls"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.toString()}function q4(e){let t=new Pt(e);return t.append(`${e.name}=${e.type},${e.server},${e.port}`),t.appendIfPresent(`,username=${e.uuid}`,"uuid"),xv(t,e),we(e,"aead")?t.append(`,vmess-aead=${e.aead}`):t.append(`,vmess-aead=${e.alterId===0}`),t.appendIfPresent(`,tls=${e.tls}`,"tls"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.toString()}function V4(e){let t=new Pt(e),r=e.tls?"https":"http";return t.append(`${e.name}=${r},${e.server},${e.port}`),t.appendIfPresent(`,${e.username}`,"username"),t.appendIfPresent(`,${e.password}`,"password"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.toString()}function K4(e){let t=new Pt(e),r=e.tls?"socks5-tls":"socks5";return t.append(`${e.name}=${r},${e.server},${e.port}`),t.appendIfPresent(`,${e.username}`,"username"),t.appendIfPresent(`,${e.password}`,"password"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.toString()}function z4(e){let t=new Pt(e);return t.append(`${e.name}=wireguard`),t.appendIfPresent(`,section-name=${e["section-name"]}`,"section-name"),t.toString()}function xv(e,t){if(we(t,"network"))if(t.network==="ws"){if(e.append(",ws=true"),we(t,"ws-opts")&&(e.appendIfPresent(`,ws-path=${t["ws-opts"].path}`,"ws-opts.path"),we(t,"ws-opts.headers"))){let r=t["ws-opts"].headers,n=Object.keys(r).map(a=>{let u=r[a];return["Host"].includes(a)&&(u=`"${u}"`),`${a}:${u}`}).join("|");Oi(n)&&e.append(`,ws-headers=${n}`)}}else throw new Error(`network ${t.network} is unsupported`)}var G4={ipv4:"ipv4_only",ipv6:"ipv6_only","v4-only":"ipv4_only","v6-only":"ipv6_only","ipv4-prefer":"prefer_ipv4","ipv6-prefer":"prefer_ipv6","prefer-v4":"prefer_ipv4","prefer-v6":"prefer_ipv6"},Tn=(e,t)=>{let r=G4[e["ip-version"]];e._dns_server&&r&&(t.domain_resolver={server:e._dns_server,strategy:r})},On=(e,t)=>{t.detour=e["dialer-proxy"]||e.detour},Li=(e,t)=>{["tcp","udp"].includes(e._network)&&(t.network=e._network)},Yn=(e,t)=>{t.tcp_fast_open=!1,e.tfo&&(t.tcp_fast_open=!0),e.tcp_fast_open&&(t.tcp_fast_open=!0),e["tcp-fast-open"]&&(t.tcp_fast_open=!0),t.tcp_fast_open||delete t.tcp_fast_open},Hi=(e,t)=>{!e||!e.enabled||(t.multiplex={enabled:!0},t.multiplex.protocol=e.protocol,e["max-connections"]&&(t.multiplex.max_connections=parseInt(`${e["max-connections"]}`,10)),e["max-streams"]&&(t.multiplex.max_streams=parseInt(`${e["max-streams"]}`,10)),e["min-streams"]&&(t.multiplex.min_streams=parseInt(`${e["min-streams"]}`,10)),e.padding&&(t.multiplex.padding=!0),(e["brutal-opts"]?.up||e["brutal-opts"]?.down)&&(t.multiplex.brutal={enabled:!0},e["brutal-opts"]?.up&&(t.multiplex.brutal.up_mbps=parseInt(`${e["brutal-opts"]?.up}`,10)),e["brutal-opts"]?.down&&(t.multiplex.brutal.down_mbps=parseInt(`${e["brutal-opts"]?.down}`,10))))},wp=(e,t)=>{let r={type:"ws",headers:{}};if(e["ws-opts"]){let{path:n="",headers:a={},"max-early-data":u,"early-data-header-name":i}=e["ws-opts"];if(r.early_data_header_name=i,r.max_early_data=parseInt(u,10),n!==""&&(r.path=`${n}`),Object.keys(a).length>0){let c={};for(let m of Object.keys(a)){let E=a[m];E!==""&&(Array.isArray(E)||(E=[`${E}`]),E.length>0&&(c[m]=E))}let{Host:l}=c;if(l.length===1)for(let m of`Host:${l[0]}`.split(`
`)){let[E,b]=m.split(":");b.trim()!==""&&(c[E.trim()]=b.trim().split(","))}r.headers=c}}if(e["ws-headers"]){let n={};for(let u of Object.keys(e["ws-headers"])){let i=e["ws-headers"][u];i!==""&&(Array.isArray(i)||(i=[`${i}`]),i.length>0&&(n[u]=i))}let{Host:a}=n;if(a.length===1)for(let u of`Host:${a[0]}`.split(`
`)){let[i,c]=u.split(":");c.trim()!==""&&(n[i.trim()]=c.trim().split(","))}for(let u of Object.keys(n))r.headers[u]=n[u]}if(e["ws-path"]&&e["ws-path"]!==""&&(r.path=`${e["ws-path"]}`),r.path){let n=/^(.*?)(?:\?ed=(\d+))?$/,[a,u="",i=""]=n.exec(r.path);r.path=u,i!==""&&(r.early_data_header_name="Sec-WebSocket-Protocol",r.max_early_data=parseInt(i,10))}t.tls.insecure&&(t.tls.server_name=r.headers.Host[0]),e["ws-opts"]&&e["ws-opts"]["v2ray-http-upgrade"]&&(r.type="httpupgrade",r.headers.Host&&(r.host=r.headers.Host[0],delete r.headers.Host),r.max_early_data&&delete r.max_early_data,r.early_data_header_name&&delete r.early_data_header_name);for(let n of Object.keys(r.headers)){let a=r.headers[n];a.length===1&&(r.headers[n]=a[0])}t.transport=r},Tv=(e,t)=>{let r={type:"http",headers:{}};if(e["http-opts"]){let{method:n="",path:a="",headers:u={}}=e["http-opts"];n!==""&&(r.method=n),Array.isArray(a)?r.path=`${a[0]}`:a!==""&&(r.path=`${a}`);for(let i of Object.keys(u)){let c=u[i];if(c!==""){if(i.toLowerCase()==="host"){let l=c;Array.isArray(l)||(l=`${l}`.split(",").map(m=>m.trim())),l.length>0&&(r.host=l);continue}Array.isArray(c)||(c=`${c}`.split(",").map(l=>l.trim())),c.length>0&&(r.headers[i]=c)}}}if(e["http-host"]&&e["http-host"]!==""){let n=e["http-host"];Array.isArray(n)||(n=`${n}`.split(",").map(a=>a.trim())),n.length>0&&(r.host=n)}if(e["http-path"]&&e["http-path"]!==""){let n=e["http-path"];Array.isArray(n)?r.path=`${n[0]}`:n!==""&&(r.path=`${n}`)}t.tls.insecure&&(t.tls.server_name=r.host[0]),r.host?.length===1&&(r.host=r.host[0]);for(let n of Object.keys(r.headers)){let a=r.headers[n];a.length===1&&(r.headers[n]=a[0])}t.transport=r},Ov=(e,t)=>{let r={type:"http"};if(e["h2-opts"]){let{host:n="",path:a=""}=e["h2-opts"];a!==""&&(r.path=`${a}`),n!==""&&(Array.isArray(n)||(n=`${n}`.split(",").map(u=>u.trim())),n.length>0&&(r.host=n))}if(e["h2-host"]&&e["h2-host"]!==""){let n=e["h2-host"];Array.isArray(n)||(n=`${n}`.split(",").map(a=>a.trim())),n.length>0&&(r.host=n)}e["h2-path"]&&e["h2-path"]!==""&&(r.path=`${e["h2-path"]}`),t.tls.enabled=!0,t.tls.insecure&&(t.tls.server_name=r.host[0]),r.host.length===1&&(r.host=r.host[0]),t.transport=r},bp=(e,t)=>{let r={type:"grpc"};if(e["grpc-opts"]){let n=e["grpc-opts"]["grpc-service-name"];n!=null&&n!==""&&(r.service_name=`${n}`)}t.transport=r},xs=(e,t)=>{e.tls&&(t.tls.enabled=!0),e.servername&&e.servername!==""&&(t.tls.server_name=e.servername),e.peer&&e.peer!==""&&(t.tls.server_name=e.peer),e.sni&&e.sni!==""&&(t.tls.server_name=e.sni),e["skip-cert-verify"]&&(t.tls.insecure=!0),e.insecure&&(t.tls.insecure=!0),e["disable-sni"]&&(t.tls.disable_sni=!0),typeof e.alpn=="string"?t.tls.alpn=[e.alpn]:Array.isArray(e.alpn)&&(t.tls.alpn=e.alpn),e.ca&&(t.tls.certificate_path=`${e.ca}`),e.ca_str&&(t.tls.certificate=[e.ca_str]),e["ca-str"]&&(t.tls.certificate=[e["ca-str"]]),e["reality-opts"]&&(t.tls.reality={enabled:!0},e["reality-opts"]["public-key"]&&(t.tls.reality.public_key=e["reality-opts"]["public-key"]),e["reality-opts"]["short-id"]&&(t.tls.reality.short_id=e["reality-opts"]["short-id"]),t.tls.utls={enabled:!0}),!["hysteria","hysteria2","tuic"].includes(e.type)&&e["client-fingerprint"]&&e["client-fingerprint"]!==""&&(t.tls.utls={enabled:!0,fingerprint:e["client-fingerprint"]}),t.tls.enabled||delete t.tls},W4=(e={})=>{let t={tag:e.name,type:"ssh",server:e.server,server_port:parseInt(`${e.port}`,10)};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e.username&&(t.user=e.username),e.password&&(t.password=e.password),e.privateKey&&(t.private_key_path=e.privateKey),e["private-key"]&&(t.private_key_path=e["private-key"]),e["private-key-passphrase"]&&(t.private_key_passphrase=e["private-key-passphrase"]),e["server-fingerprint"]&&(t.host_key=[e["server-fingerprint"]],t.host_key_algorithms=[e["server-fingerprint"].split(" ")[0]]),e["host-key"]&&(t.host_key=e["host-key"]),e["host-key-algorithms"]&&(t.host_key_algorithms=e["host-key-algorithms"]),e["fast-open"]&&(t.udp_fragment=!0),Yn(e,t),On(e,t),Tn(e,t),t},Y4=(e={})=>{let t={tag:e.name,type:"http",server:e.server,server_port:parseInt(`${e.port}`,10),tls:{enabled:!1,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";if(e.username&&(t.username=e.username),e.password&&(t.password=e.password),e.headers){t.headers={};for(let r of Object.keys(e.headers))t.headers[r]=`${e.headers[r]}`;Object.keys(t.headers).length===0&&delete t.headers}return e["fast-open"]&&(t.udp_fragment=!0),Yn(e,t),On(e,t),xs(e,t),Tn(e,t),t},J4=(e={})=>{let t={tag:e.name,type:"socks",server:e.server,server_port:parseInt(`${e.port}`,10),password:e.password,version:"5"};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e.username&&(t.username=e.username),e.password&&(t.password=e.password),e.uot&&(t.udp_over_tcp=!0),e["udp-over-tcp"]&&(t.udp_over_tcp=!0),e["fast-open"]&&(t.udp_fragment=!0),Li(e,t),Yn(e,t),On(e,t),Tn(e,t),t},X4=(e={})=>{let t={tag:e.name,type:"shadowsocks",method:e.cipher,password:e.password,detour:`${e.name}_shadowtls`};e.uot&&(t.udp_over_tcp=!0),e["udp-over-tcp"]&&(t.udp_over_tcp={enabled:!0,version:!e["udp-over-tcp-version"]||e["udp-over-tcp-version"]===1?1:2});let r={tag:`${e.name}_shadowtls`,type:"shadowtls",server:e.server,server_port:parseInt(`${e.port}`,10),version:e["plugin-opts"].version,password:e["plugin-opts"].password,tls:{enabled:!0,server_name:e["plugin-opts"].host,utls:{enabled:!0,fingerprint:e["client-fingerprint"]}}};if(r.server_port<0||r.server_port>65535)throw"\u7AEF\u53E3\u503C\u975E\u6CD5";return e["fast-open"]===!0&&(r.udp_fragment=!0),Yn(e,r),On(e,r),Hi(e.smux,t),Tn(e,r),{type:"ss-with-st",ssPart:t,stPart:r}},Z4=(e={})=>{let t={tag:e.name,type:"shadowsocks",server:e.server,server_port:parseInt(`${e.port}`,10),method:e.cipher,password:e.password};if(t.server_port<0||t.server_port>65535)throw"invalid port";if(e.uot&&(t.udp_over_tcp=!0),e["udp-over-tcp"]&&(t.udp_over_tcp={enabled:!0,version:!e["udp-over-tcp-version"]||e["udp-over-tcp-version"]===1?1:2}),e["fast-open"]&&(t.udp_fragment=!0),Li(e,t),Yn(e,t),On(e,t),Hi(e.smux,t),Tn(e,t),e.plugin){let r=[];e.plugin==="obfs"&&(t.plugin="obfs-local",t.plugin_opts="",e["obfs-host"]&&(e["plugin-opts"].host=e["obfs-host"]),Object.keys(e["plugin-opts"]).forEach(n=>{switch(n){case"mode":r.push(`obfs=${e["plugin-opts"].mode}`);break;case"host":r.push(`obfs-host=${e["plugin-opts"].host}`);break;default:r.push(`${n}=${e["plugin-opts"][n]}`);break}})),e.plugin==="v2ray-plugin"&&(t.plugin="v2ray-plugin",e["ws-host"]&&(e["plugin-opts"].host=e["ws-host"]),e["ws-path"]&&(e["plugin-opts"].path=e["ws-path"]),Object.keys(e["plugin-opts"]).forEach(n=>{switch(n){case"tls":e["plugin-opts"].tls&&r.push("tls");break;case"host":r.push(`host=${e["plugin-opts"].host}`);break;case"path":r.push(`path=${e["plugin-opts"].path}`);break;case"headers":r.push(`headers=${JSON.stringify(e["plugin-opts"].headers)}`);break;case"mux":e["plugin-opts"].mux&&(t.multiplex={enabled:!0});break;default:r.push(`${n}=${e["plugin-opts"][n]}`)}})),t.plugin_opts=r.join(";")}return t},Q4=(e={})=>{let t={tag:e.name,type:"shadowsocksr",server:e.server,server_port:parseInt(`${e.port}`,10),method:e.cipher,password:e.password,obfs:e.obfs,protocol:e.protocol};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e["obfs-param"]&&(t.obfs_param=e["obfs-param"]),e["protocol-param"]&&e["protocol-param"]!==""&&(t.protocol_param=e["protocol-param"]),e["fast-open"]&&(t.udp_fragment=!0),Yn(e,t),On(e,t),Hi(e.smux,t),Tn(e,t),t},e6=(e={})=>{let t={tag:e.name,type:"vmess",server:e.server,server_port:parseInt(`${e.port}`,10),uuid:e.uuid,security:e.cipher,alter_id:parseInt(`${e.alterId}`,10),tls:{enabled:!1,server_name:e.server,insecure:!1}};if(["auto","none","zero","aes-128-gcm","chacha20-poly1305","aes-128-ctr"].indexOf(t.security)===-1&&(t.security="auto"),t.server_port<0||t.server_port>65535)throw"invalid port";return e.xudp&&(t.packet_encoding="xudp"),e["fast-open"]&&(t.udp_fragment=!0),e.network==="ws"&&wp(e,t),e.network==="h2"&&Ov(e,t),e.network==="http"&&Tv(e,t),e.network==="grpc"&&bp(e,t),Li(e,t),Yn(e,t),On(e,t),xs(e,t),Hi(e.smux,t),Tn(e,t),t},t6=(e={})=>{let t={tag:e.name,type:"vless",server:e.server,server_port:parseInt(`${e.port}`,10),uuid:e.uuid,tls:{enabled:!1,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e.xudp&&(t.packet_encoding="xudp"),e["fast-open"]&&(t.udp_fragment=!0),e.flow!=null&&(t.flow=e.flow),e.network==="ws"&&wp(e,t),e.network==="h2"&&Ov(e,t),e.network==="http"&&Tv(e,t),e.network==="grpc"&&bp(e,t),Li(e,t),Yn(e,t),On(e,t),Hi(e.smux,t),xs(e,t),Tn(e,t),t},r6=(e={})=>{let t={tag:e.name,type:"trojan",server:e.server,server_port:parseInt(`${e.port}`,10),password:e.password,tls:{enabled:!0,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e["fast-open"]&&(t.udp_fragment=!0),e.network==="grpc"&&bp(e,t),e.network==="ws"&&wp(e,t),Li(e,t),Yn(e,t),On(e,t),xs(e,t),Hi(e.smux,t),Tn(e,t),t},n6=(e={})=>{let t={tag:e.name,type:"hysteria",server:e.server,server_port:parseInt(`${e.port}`,10),disable_mtu_discovery:!1,tls:{enabled:!0,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";e.auth_str&&(t.auth_str=`${e.auth_str}`),e["auth-str"]&&(t.auth_str=`${e["auth-str"]}`),e["fast-open"]&&(t.udp_fragment=!0);let r=new RegExp("^[0-9]+[ 	]*[KMGT]*[Bb]ps$");return r.test(`${e.up}`)&&!`${e.up}`.endsWith("Mbps")?t.up=`${e.up}`:t.up_mbps=parseInt(`${e.up}`,10),r.test(`${e.down}`)&&!`${e.down}`.endsWith("Mbps")?t.down=`${e.down}`:t.down_mbps=parseInt(`${e.down}`,10),e.obfs&&(t.obfs=e.obfs),e.recv_window_conn&&(t.recv_window_conn=e.recv_window_conn),e["recv-window-conn"]&&(t.recv_window_conn=e["recv-window-conn"]),e.recv_window&&(t.recv_window=e.recv_window),e["recv-window"]&&(t.recv_window=e["recv-window"]),e.disable_mtu_discovery&&(typeof e.disable_mtu_discovery=="boolean"?t.disable_mtu_discovery=e.disable_mtu_discovery:e.disable_mtu_discovery===1&&(t.disable_mtu_discovery=!0)),Li(e,t),xs(e,t),On(e,t),Yn(e,t),Hi(e.smux,t),Tn(e,t),t},i6=(e={})=>{let t={tag:e.name,type:"hysteria2",server:e.server,server_port:parseInt(`${e.port}`,10),password:e.password,obfs:{},tls:{enabled:!0,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e["hop-interval"]&&(t.hop_interval=/^\d+$/.test(e["hop-interval"])?`${e["hop-interval"]}s`:e["hop-interval"]),e.ports&&(t.server_ports=e.ports.split(/\s*,\s*/).map(r=>r.replace(/\s*-\s*/g,":"))),e.up&&(t.up_mbps=parseInt(`${e.up}`,10)),e.down&&(t.down_mbps=parseInt(`${e.down}`,10)),e.obfs==="salamander"&&(t.obfs.type="salamander"),e["obfs-password"]&&(t.obfs.password=e["obfs-password"]),t.obfs.type||delete t.obfs,Li(e,t),xs(e,t),Yn(e,t),On(e,t),Hi(e.smux,t),Tn(e,t),t},s6=(e={})=>{let t={tag:e.name,type:"tuic",server:e.server,server_port:parseInt(`${e.port}`,10),uuid:e.uuid,password:e.password,tls:{enabled:!0,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e["fast-open"]&&(t.udp_fragment=!0),e["congestion-controller"]&&e["congestion-controller"]!=="cubic"&&(t.congestion_control=e["congestion-controller"]),e["udp-relay-mode"]&&e["udp-relay-mode"]!=="native"&&(t.udp_relay_mode=e["udp-relay-mode"]),e["reduce-rtt"]&&(t.zero_rtt_handshake=!0),e["udp-over-stream"]&&(t.udp_over_stream=!0),e["heartbeat-interval"]&&(t.heartbeat=`${e["heartbeat-interval"]}ms`),Li(e,t),Yn(e,t),On(e,t),xs(e,t),Hi(e.smux,t),Tn(e,t),t},a6=(e={})=>{let t={tag:e.name,type:"anytls",server:e.server,server_port:parseInt(`${e.port}`,10),password:e.password,tls:{enabled:!0,server_name:e.server,insecure:!1}};return/^\d+$/.test(e["idle-session-check-interval"])&&(t.idle_session_check_interval=`${e["idle-session-check-interval"]}s`),/^\d+$/.test(e["idle-session-timeout"])&&(t.idle_session_timeout=`${e["idle-session-timeout"]}s`),/^\d+$/.test(e["min-idle-session"])&&(t.min_idle_session=parseInt(`${e["min-idle-session"]}`,10)),Li(e,t),On(e,t),xs(e,t),Tn(e,t),t},u6=(e={})=>{let t=["ip","ipv6"].map(n=>e[n]).map(n=>{if(zn(n))return`${n}/32`;if(En(n))return`${n}/128`}).filter(n=>n),r={tag:e.name,type:"wireguard",server:e.server,server_port:parseInt(`${e.port}`,10),local_address:t,private_key:e["private-key"],peer_public_key:e["public-key"],pre_shared_key:e["pre-shared-key"],reserved:[]};if(r.server_port<0||r.server_port>65535)throw"invalid port";if(e["fast-open"]&&(r.udp_fragment=!0),typeof e.reserved=="string")r.reserved=e.reserved;else if(Array.isArray(e.reserved))for(let n of e.reserved)r.reserved.push(n);else delete r.reserved;if(e.peers&&e.peers.length>0){r.peers=[];for(let n of e.peers){let a={server:n.server,server_port:parseInt(`${n.port}`,10),public_key:n["public-key"],allowed_ips:n["allowed-ips"]||n.allowed_ips,reserved:[]};if(typeof n.reserved=="string")a.reserved.push(n.reserved);else if(Array.isArray(n.reserved))for(let u of n.reserved)a.reserved.push(u);else delete a.reserved;n["pre-shared-key"]&&(a.pre_shared_key=n["pre-shared-key"]),r.peers.push(a)}}return Li(e,r),Yn(e,r),On(e,r),Hi(e.smux,r),Tn(e,r),r};function il(){return{type:"ALL",produce:(r,n,a={})=>{let u=[];return Gn().produce(r,"internal",{"include-unsupported-proxy":!0}).map(i=>{try{switch(i.type){case"ssh":u.push(W4(i));break;case"http":u.push(Y4(i));break;case"socks5":if(i.tls)throw new Error(`Platform sing-box does not support proxy type: ${i.type} with tls`);u.push(J4(i));break;case"ss":if(i.plugin==="shadow-tls"){let{ssPart:c,stPart:l}=X4(i);u.push(c),u.push(l)}else u.push(Z4(i));break;case"ssr":if(a["include-unsupported-proxy"])u.push(Q4(i));else throw new Error(`Platform sing-box does not support proxy type: ${i.type}`);break;case"vmess":if(!i.network||["ws","grpc","h2","http"].includes(i.network))u.push(e6(i));else throw new Error(`Platform sing-box does not support proxy type: ${i.type} with network ${i.network}`);break;case"vless":if(!i.flow||["xtls-rprx-vision"].includes(i.flow))u.push(t6(i));else throw new Error(`Platform sing-box does not support proxy type: ${i.type} with flow ${i.flow}`);break;case"trojan":if(!i.flow)u.push(r6(i));else throw new Error(`Platform sing-box does not support proxy type: ${i.type} with flow ${i.flow}`);break;case"hysteria":u.push(n6(i));break;case"hysteria2":u.push(i6(i,a["include-unsupported-proxy"]));break;case"tuic":if(!i.token||i.token.length===0)u.push(s6(i));else throw new Error("Platform sing-box does not support proxy type: TUIC v4");break;case"wireguard":u.push(u6(i));break;case"anytls":u.push(a6(i));break;default:throw new Error(`Platform sing-box does not support proxy type: ${i.type}`)}}catch(c){Wt.error(c.message??c)}}),n==="internal"?u:JSON.stringify({outbounds:u},null,2)}}}function sl(){return{type:"ALL",produce:(r,n)=>{let a=r.filter(u=>!(!["http","socks5","ss","trojan","hysteria2","vless","vmess","tuic"].includes(u.type)||u.type==="ss"&&(u.plugin==="obfs"&&!["http","tls"].includes(u["plugin-opts"]?.mode)||!["chacha20-ietf-poly1305","chacha20-poly1305","aes-256-gcm","aes-128-gcm","none","tbale","rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","cast5-cfb","des-cfb","idea-cfb","rc2-cfb","seed-cfb","salsa20","chacha20","chacha20-ietf","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(u.cipher))||u.type==="vmess"&&!["http","ws","tcp"].includes(u.network)&&u.network||u.type==="trojan"&&!["http","ws","tcp"].includes(u.network)&&u.network||u.type==="vless"&&(typeof u.flow<"u"||u["reality-opts"]||!["http","ws","tcp"].includes(u.network)&&u.network)||u.type==="tuic"&&u.token&&u.token.length!==0)).map(u=>{let i={...u};u.tls&&!u.sni&&(u.sni=u.server);let c=u.prev_hop||u["underlying-proxy"]||u["dialer-proxy"]||u.detour;if(u.type==="http")u={type:"http",name:u.name,server:u.server,port:u.port,username:u.username,password:u.password,tfo:u.tfo||u["fast-open"],next_hop:u.next_hop};else if(u.type==="socks5")u={type:"socks5",name:u.name,server:u.server,port:u.port,username:u.username,password:u.password,tfo:u.tfo||u["fast-open"],udp_relay:u.udp||u.udp_relay||u.udp_relay,next_hop:u.next_hop};else if(u.type==="ss")u={type:"shadowsocks",name:u.name,method:u.cipher==="chacha20-ietf-poly1305"?"chacha20-poly1305":u.cipher,server:u.server,port:u.port,password:u.password,tfo:u.tfo||u["fast-open"],udp_relay:u.udp||u.udp_relay||u.udp_relay,next_hop:u.next_hop},i.plugin==="obfs"&&(u.obfs=i["plugin-opts"].mode,u.obfs_host=i["plugin-opts"].host,u.obfs_uri=i["plugin-opts"].path);else if(u.type==="hysteria2")u={type:"hysteria2",name:u.name,server:u.server,port:u.port,auth:u.password,tfo:u.tfo||u["fast-open"],udp_relay:u.udp||u.udp_relay||u.udp_relay,next_hop:u.next_hop,sni:u.sni,skip_tls_verify:u["skip-cert-verify"],port_hopping:u.ports,port_hopping_interval:u["hop-interval"]},i["obfs-password"]&&i.obfs=="salamander"&&(u.obfs="salamander",u.obfs_password=i["obfs-password"]);else if(u.type==="tuic")u={type:"tuic",name:u.name,server:u.server,port:u.port,uuid:u.uuid,password:u.password,next_hop:u.next_hop,sni:u.sni,alpn:Array.isArray(u.alpn)?u.alpn:[u.alpn||"h3"],skip_tls_verify:u["skip-cert-verify"],port_hopping:u.ports,port_hopping_interval:u["hop-interval"]};else if(u.type==="trojan")u.network==="ws"&&(u.websocket={path:u["ws-opts"]?.path,host:u["ws-opts"]?.headers?.Host}),u={type:"trojan",name:u.name,server:u.server,port:u.port,password:u.password,tfo:u.tfo||u["fast-open"],udp_relay:u.udp||u.udp_relay||u.udp_relay,next_hop:u.next_hop,sni:u.sni,skip_tls_verify:u["skip-cert-verify"],websocket:u.websocket};else if(u.type==="vmess"){let l=u.cipher;l&&!["auto","none","zero","aes-128-gcm","chacha20-poly1305"].includes(l)&&(l="auto"),u.network==="ws"?u.transport={[u.tls?"wss":"ws"]:{path:u["ws-opts"]?.path,headers:{Host:u["ws-opts"]?.headers?.Host},sni:u.tls?u.sni:void 0,skip_tls_verify:u.tls?u["skip-cert-verify"]:void 0}}:u.network==="http"?u.transport={http1:{method:u["http-opts"]?.method,path:Array.isArray(u["http-opts"]?.path)?u["http-opts"]?.path[0]:u["http-opts"]?.path,headers:{Host:Array.isArray(u["http-opts"]?.headers?.Host)?u["http-opts"]?.headers?.Host[0]:u["http-opts"]?.headers?.Host},skip_tls_verify:u["skip-cert-verify"]}}:u.network==="h2"?u.transport={http2:{method:u["h2-opts"]?.method,path:Array.isArray(u["h2-opts"]?.path)?u["h2-opts"]?.path[0]:u["h2-opts"]?.path,headers:{Host:Array.isArray(u["h2-opts"]?.headers?.Host)?u["h2-opts"]?.headers?.Host[0]:u["h2-opts"]?.headers?.Host},skip_tls_verify:u["skip-cert-verify"]}}:(u.network==="tcp"||!u.network)&&u.tls&&(u.transport={tls:{sni:u.tls?u.sni:void 0,skip_tls_verify:u.tls?u["skip-cert-verify"]:void 0}}),u={type:"vmess",name:u.name,server:u.server,port:u.port,user_id:u.uuid,security:l,tfo:u.tfo||u["fast-open"],legacy:u.legacy,udp_relay:u.udp||u.udp_relay||u.udp_relay,next_hop:u.next_hop,transport:u.transport}}else u.type==="vless"&&(u.network==="ws"?u.transport={[u.tls?"wss":"ws"]:{path:u["ws-opts"]?.path,headers:{Host:u["ws-opts"]?.headers?.Host},sni:u.tls?u.sni:void 0,skip_tls_verify:u.tls?u["skip-cert-verify"]:void 0}}:u.network==="http"?u.transport={http:{method:u["http-opts"]?.method,path:Array.isArray(u["http-opts"]?.path)?u["http-opts"]?.path[0]:u["http-opts"]?.path,headers:{Host:Array.isArray(u["http-opts"]?.headers?.Host)?u["http-opts"]?.headers?.Host[0]:u["http-opts"]?.headers?.Host},skip_tls_verify:u["skip-cert-verify"]}}:(u.network==="tcp"||!u.network)&&(u.transport={[u.tls?"tls":"tcp"]:{sni:u.tls?u.sni:void 0,skip_tls_verify:u.tls?u["skip-cert-verify"]:void 0}}),u={type:"vless",name:u.name,server:u.server,port:u.port,user_id:u.uuid,security:u.cipher,tfo:u.tfo||u["fast-open"],legacy:u.legacy,udp_relay:u.udp||u.udp_relay||u.udp_relay,next_hop:u.next_hop,transport:u.transport});if(["http","socks5","ss","trojan","vless","vmess"].includes(i.type)){if(we(i,"shadow-tls-password")){if(i["shadow-tls-version"]!=3)throw new Error(`shadow-tls version ${i["shadow-tls-version"]} is not supported`);u.shadow_tls={password:i["shadow-tls-password"],sni:i["shadow-tls-sni"]}}else if(["shadow-tls"].includes(i.plugin)&&i["plugin-opts"]){if(i["plugin-opts"].version!=3)throw new Error(`shadow-tls version ${i["plugin-opts"].version} is not supported`);u.shadow_tls={password:i["plugin-opts"].password,sni:i["plugin-opts"].host}}}if(["ss"].includes(i.type)&&u.shadow_tls&&i["udp-port"]>0&&i["udp-port"]<=65535&&(u.udp_port=i["udp-port"]),delete u.subName,delete u.collectionName,delete u.id,delete u.resolved,delete u["no-resolve"],u.transport){for(let l in u.transport)(Object.keys(u.transport[l]).length===0||Object.values(u.transport[l]).every(m=>m==null))&&delete u.transport[l];Object.keys(u.transport).length===0&&delete u.transport}if(n!=="internal")for(let l in u)(u[l]==null||/^_/i.test(l))&&delete u[l];return{[u.type]:{...u,type:void 0,prev_hop:c}}});return n==="internal"?a:`proxies:
`+a.map(u=>"  - "+JSON.stringify(u)+`
`).join("")}}}function Nv(){return{type:"ALL",produce:(r,n)=>n==="internal"?r:JSON.stringify(r,null,2)}}var Lv={qx:so(),QX:so(),QuantumultX:so(),surge:au(),Surge:au(),SurgeMac:gp(),Loon:mp(),Clash:vp(),meta:Gn(),clashmeta:Gn(),"clash.meta":Gn(),"Clash.Meta":Gn(),ClashMeta:Gn(),mihomo:Gn(),Mihomo:Gn(),uri:uu(),URI:uu(),v2:io(),v2ray:io(),V2Ray:io(),json:Nv(),JSON:Nv(),stash:rl(),Stash:rl(),shadowrocket:ao(),Shadowrocket:ao(),ShadowRocket:ao(),surfboard:nl(),Surfboard:nl(),singbox:il(),"sing-box":il(),egern:sl(),Egern:sl()};var Vv=vi(co()),A6=String.raw`
// global initializer
{{
    function $set(obj, path, value) {
      if (Object(obj) !== obj) return obj;
      if (!Array.isArray(path)) path = path.toString().match(/[^.[\]]+/g) || [];
      path
        .slice(0, -1)
        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[
        path[path.length - 1]
      ] = value;
      return obj;
    }
}}

// per-parser initializer
{
    const proxy = {};
    const obfs = {};
    const $ = {};

    function handleWebsocket() {
        if (obfs.type === "ws") {
            proxy.network = "ws";
            $set(proxy, "ws-opts.path", obfs.path);
            $set(proxy, "ws-opts.headers", obfs['ws-headers']);
            if (proxy['ws-opts'] && proxy['ws-opts']['headers'] && proxy['ws-opts']['headers'].Host) {
                proxy['ws-opts']['headers'].Host = proxy['ws-opts']['headers'].Host.replace(/^"(.*)"$/, '$1')
            }
        }
    }
    function handleShadowTLS() {
        if (proxy['shadow-tls-password'] && !proxy['shadow-tls-version']) {
            proxy['shadow-tls-version'] = 2;
        }
    }
}

start = (shadowsocks/vmess/trojan/https/http/snell/socks5/socks5_tls/tuic/tuic_v5/wireguard/hysteria2/ssh/direct) {
    return proxy;
}

shadowsocks = tag equals "ss" address (method/passwordk/obfs/obfs_host/obfs_uri/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/udp_port/others)* {
    proxy.type = "ss";
    // handle obfs
    if (obfs.type == "http" || obfs.type === "tls") {
        proxy.plugin = "obfs";
        $set(proxy, "plugin-opts.mode", obfs.type);
        $set(proxy, "plugin-opts.host", obfs.host);
        $set(proxy, "plugin-opts.path", obfs.path);
    }
    handleShadowTLS();
}
vmess = tag equals "vmess" address (vmess_uuid/vmess_aead/ws/ws_path/ws_headers/method/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls/sni/tls_fingerprint/tls_verification/fast_open/tfo/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "vmess";
    proxy.cipher = proxy.cipher || "none";
    // Surfboard 与 Surge 默认不一致, 不管 Surfboard https://getsurfboard.com/docs/profile-format/proxy/external-proxy/vmess
    if (proxy.aead) {
        proxy.alterId = 0;
    } else {
        proxy.alterId = 1;
    }
    handleWebsocket();
    handleShadowTLS();
}
trojan = tag equals "trojan" address (passwordk/ws/ws_path/ws_headers/tls/sni/tls_fingerprint/tls_verification/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "trojan";
    handleWebsocket();
    handleShadowTLS();
}
https = tag equals "https" address (username password)? (usernamek passwordk)? (sni/tls_fingerprint/tls_verification/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "http";
    proxy.tls = true;
    handleShadowTLS();
}
http = tag equals "http" address (username password)? (usernamek passwordk)? (ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "http";
    handleShadowTLS();
}
ssh = tag equals "ssh" address (username password)? (usernamek passwordk)? (server_fingerprint/idle_timeout/private_key/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "ssh";
    handleShadowTLS();
}
snell = tag equals "snell" address (snell_version/snell_psk/obfs/obfs_host/obfs_uri/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/udp_relay/reuse/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "snell";
    // handle obfs
    if (obfs.type == "http" || obfs.type === "tls") {
        $set(proxy, "obfs-opts.mode", obfs.type);
        $set(proxy, "obfs-opts.host", obfs.host);
        $set(proxy, "obfs-opts.path", obfs.path);
    }
    handleShadowTLS();
}
tuic = tag equals "tuic" address (alpn/token/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls_fingerprint/tls_verification/sni/fast_open/tfo/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/port_hopping_interval/others)* {
    proxy.type = "tuic";
    handleShadowTLS();
}
tuic_v5 = tag equals "tuic-v5" address (alpn/passwordk/uuidk/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls_fingerprint/tls_verification/sni/fast_open/tfo/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/port_hopping_interval/others)* {
    proxy.type = "tuic";
    proxy.version = 5;
    handleShadowTLS();
}
wireguard = tag equals "wireguard" (section_name/no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "wireguard-surge";
    handleShadowTLS();
}
hysteria2 = tag equals "hysteria2" address (no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/sni/tls_verification/passwordk/tls_fingerprint/download_bandwidth/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/port_hopping_interval/others)* {
    proxy.type = "hysteria2";
    handleShadowTLS();
}
socks5 = tag equals "socks5" address (username password)? (usernamek passwordk)? (udp_relay/no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "socks5";
    handleShadowTLS();
}
socks5_tls = tag equals "socks5-tls" address (username password)? (usernamek passwordk)? (udp_relay/no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/sni/tls_fingerprint/tls_verification/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "socks5";
    proxy.tls = true;
    handleShadowTLS();
}
direct = tag equals "direct" (udp_relay/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/block_quic/others)* {
    proxy.type = "direct";
}
address = comma server:server comma port:port {
    proxy.server = server;
    proxy.port = port;
}

server = ip/domain

ip = & {
    const start = peg$currPos;
    let j = start;
    while (j < input.length) {
        if (input[j] === ",") break;
        j++;
    }
    peg$currPos = j;
    $.ip = input.substring(start, j).trim();
    return true;
} { return $.ip; }

domain = match:[0-9a-zA-z-_.]+ { 
    const domain = match.join(""); 
    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {
        return domain;
    }
}

port = digits:[0-9]+ { 
    const port = parseInt(digits.join(""), 10); 
    if (port >= 0 && port <= 65535) {
    	return port;
    }
}

port_hopping_interval = comma "port-hopping-interval" equals match:$[0-9]+ { proxy["hop-interval"] = parseInt(match.trim()); }

username = & {
    let j = peg$currPos; 
    let start, end;
    let first = true;
    while (j < input.length) {
        if (input[j] === ',') {
            if (first) {
                start = j + 1;
                first = false;
            } else {
                end = j;
                break;
            }
        }
        j++;
    }
    const match = input.substring(start, end);
    if (match.indexOf("=") === -1) {
        $.username = match;
        peg$currPos = end;
        return true;
    }
} { proxy.username = $.username.trim().replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }
password = comma match:[^,]+ { proxy.password = match.join("").replace(/^"(.*)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }

tls = comma "tls" equals flag:bool { proxy.tls = flag; }
sni = comma "sni" equals sni:("off"/domain) { 
    if (sni === "off") {
        proxy["disable-sni"] = true;
    } else {
        proxy.sni = sni;
    }
}
tls_verification = comma "skip-cert-verify" equals flag:bool { proxy["skip-cert-verify"] = flag; }
tls_fingerprint = comma "server-cert-fingerprint-sha256" equals tls_fingerprint:$[^,]+ { proxy["tls-fingerprint"] = tls_fingerprint.trim(); }

snell_psk = comma "psk" equals match:[^,]+ { proxy.psk = match.join(""); }
snell_version = comma "version" equals match:$[0-9]+ { proxy.version = parseInt(match.trim()); }

usernamek = comma "username" equals match:[^,]+ { proxy.username = match.join("").replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }
passwordk = comma "password" equals match:[^,]+ { proxy.password = match.join("").replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }
vmess_uuid = comma "username" equals match:[^,]+ { proxy.uuid = match.join(""); }
vmess_aead = comma "vmess-aead" equals flag:bool { proxy.aead = flag; }

method = comma "encrypt-method" equals cipher:cipher {
    proxy.cipher = cipher;
}
cipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"bf-cfb"/"camellia-128-cfb"/"camellia-192-cfb"/"camellia-256-cfb"/"cast5-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"des-cfb"/"idea-cfb"/"none"/"rc2-cfb"/"rc4-md5"/"rc4"/"salsa20"/"seed-cfb"/"xchacha20-ietf-poly1305"/"2022-blake3-aes-128-gcm"/"2022-blake3-aes-256-gcm");

ws = comma "ws" equals flag:bool { obfs.type = "ws"; }
ws_headers = comma "ws-headers" equals headers:$[^,]+ {
    const pairs = headers.split("|");
    const result = {};
    pairs.forEach(pair => {
        const [key, value] = pair.trim().split(":");
        result[key.trim()] = value.trim().replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1');
    })
    obfs["ws-headers"] = result;
}
ws_path = comma "ws-path" equals path:uri { obfs.path = path.trim().replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }

obfs = comma "obfs" equals type:("http"/"tls") { obfs.type = type; }
obfs_host = comma "obfs-host" equals host:domain { obfs.host = host; };
obfs_uri = comma "obfs-uri" equals path:uri { obfs.path = path }
uri = $[^,]+

udp_relay = comma "udp-relay" equals flag:bool { proxy.udp = flag; }
fast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }
reuse = comma "reuse" equals flag:bool { proxy.reuse = flag; }
ecn = comma "ecn" equals flag:bool { proxy.ecn = flag; }
tfo = comma "tfo" equals flag:bool { proxy.tfo = flag; }
ip_version = comma "ip-version" equals match:[^,]+ { proxy["ip-version"] = match.join(""); }
section_name = comma "section-name" equals match:[^,]+ { proxy["section-name"] = match.join(""); }
no_error_alert = comma "no-error-alert" equals match:[^,]+ { proxy["no-error-alert"] = match.join(""); }
underlying_proxy = comma "underlying-proxy" equals match:[^,]+ { proxy["underlying-proxy"] = match.join(""); }
download_bandwidth = comma "download-bandwidth" equals match:[^,]+ { proxy.down = match.join(""); }
test_url = comma "test-url" equals match:[^,]+ { proxy["test-url"] = match.join(""); }
test_udp = comma "test-udp" equals match:[^,]+ { proxy["test-udp"] = match.join(""); }
test_timeout = comma "test-timeout" equals match:$[0-9]+ { proxy["test-timeout"] = parseInt(match.trim()); }
tos = comma "tos" equals match:$[0-9]+ { proxy.tos = parseInt(match.trim()); }
interface = comma "interface" equals match:[^,]+ { proxy.interface = match.join(""); }
allow_other_interface = comma "allow-other-interface" equals flag:bool { proxy["allow-other-interface"] = flag; }
hybrid = comma "hybrid" equals flag:bool { proxy.hybrid = flag; }
idle_timeout = comma "idle-timeout" equals match:$[0-9]+ { proxy["idle-timeout"] = parseInt(match.trim()); }
private_key = comma "private-key" equals match:[^,]+ { proxy["keystore-private-key"] = match.join("").replace(/^"(.*)"$/, '$1'); }
server_fingerprint = comma "server-fingerprint" equals match:[^,]+ { proxy["server-fingerprint"] = match.join("").replace(/^"(.*)"$/, '$1'); }
block_quic = comma "block-quic" equals match:[^,]+ { proxy["block-quic"] = match.join(""); }
udp_port = comma "udp-port" equals match:$[0-9]+ { proxy["udp-port"] = parseInt(match.trim()); }
shadow_tls_version = comma "shadow-tls-version" equals match:$[0-9]+ { proxy["shadow-tls-version"] = parseInt(match.trim()); }
shadow_tls_sni = comma "shadow-tls-sni" equals match:[^,]+ { proxy["shadow-tls-sni"] = match.join(""); }
shadow_tls_password = comma "shadow-tls-password" equals match:[^,]+ { proxy["shadow-tls-password"] = match.join("").replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }
token = comma "token" equals match:[^,]+ { proxy.token = match.join(""); }
alpn = comma "alpn" equals match:[^,]+ { proxy.alpn = match.join(""); }
uuidk = comma "uuid" equals match:[^,]+ { proxy.uuid = match.join(""); }

tag = match:[^=,]* { proxy.name = match.join("").trim(); }
comma = _ "," _
equals = _ "=" _
_ = [ \r\t]*
bool = b:("true"/"false") { return b === "true" }
others = comma [^=,]+ equals [^=,]+
`,yp;function Jn(){return yp||(yp=Vv.generate(A6)),yp}var Kv=vi(co()),y6=String.raw`
// global initializer
{{
    function $set(obj, path, value) {
      if (Object(obj) !== obj) return obj;
      if (!Array.isArray(path)) path = path.toString().match(/[^.[\]]+/g) || [];
      path
        .slice(0, -1)
        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[
        path[path.length - 1]
      ] = value;
      return obj;
    }
}}

// per-parser initializer
{
    const proxy = {};
    const obfs = {};
    const transport = {};
    const $ = {};

    function handleTransport() {
        if (transport.type === "tcp") { /* do nothing */ }
        else if (transport.type === "ws") {
            proxy.network = "ws";
            $set(proxy, "ws-opts.path", transport.path);
            $set(proxy, "ws-opts.headers.Host", transport.host);
        } else if (transport.type === "http") {
            proxy.network = "http";
            $set(proxy, "http-opts.path", transport.path);
            $set(proxy, "http-opts.headers.Host", transport.host);
        }
    }
}

start = (shadowsocksr/shadowsocks/vmess/vless/trojan/https/http/socks5/hysteria2) {
    return proxy;
}

shadowsocksr = tag equals "shadowsocksr"i address method password (ssr_protocol/ssr_protocol_param/obfs_ssr/obfs_ssr_param/obfs_host/obfs_uri/fast_open/udp_relay/udp_port/shadow_tls_version/shadow_tls_sni/shadow_tls_password/ip_mode/block_quic/others)*{
    proxy.type = "ssr";
    // handle ssr obfs
    proxy.obfs = obfs.type;
}
shadowsocks = tag equals "shadowsocks"i address method password (obfs_typev obfs_hostv)? (obfs_ss/obfs_host/obfs_uri/fast_open/udp_relay/udp_port/shadow_tls_version/shadow_tls_sni/shadow_tls_password/ip_mode/block_quic/others)* {
    proxy.type = "ss";
    // handle ss obfs
    if (obfs.type == "http" || obfs.type === "tls") {
        proxy.plugin = "obfs";
        $set(proxy, "plugin-opts.mode", obfs.type);
        $set(proxy, "plugin-opts.host", obfs.host);
        $set(proxy, "plugin-opts.path", obfs.path);
    }
}
vmess = tag equals "vmess"i address method uuid (transport/transport_host/transport_path/over_tls/tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/vmess_alterId/fast_open/udp_relay/ip_mode/public_key/short_id/block_quic/others)* {
    proxy.type = "vmess";
    proxy.cipher = proxy.cipher || "none";
    proxy.alterId = proxy.alterId || 0;
    handleTransport();
}
vless = tag equals "vless"i address uuid (transport/transport_host/transport_path/over_tls/tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/ip_mode/flow/public_key/short_id/block_quic/others)* {
    proxy.type = "vless";
    handleTransport();
}
trojan = tag equals "trojan"i address password (transport/transport_host/transport_path/over_tls/tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/ip_mode/block_quic/others)* {
    proxy.type = "trojan";
    handleTransport();
}
hysteria2 = tag equals "hysteria2"i address password (tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/udp_relay/fast_open/download_bandwidth/salamander_password/ecn/ip_mode/block_quic/others)* {
    proxy.type = "hysteria2";
}
https = tag equals "https"i address (username password)? (tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/ip_mode/block_quic/others)* {
    proxy.type = "http";
    proxy.tls = true;
}
http = tag equals "http"i address (username password)? (fast_open/udp_relay/ip_mode/block_quic/others)* {
    proxy.type = "http";
}
socks5 = tag equals "socks5"i address (username password)? (over_tls/tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/ip_mode/block_quic/others)* {
    proxy.type = "socks5";
}

address = comma server:server comma port:port {
    proxy.server = server;
    proxy.port = port;
}

server = ip/domain

ip = & {
    const start = peg$currPos;
    let j = start;
    while (j < input.length) {
        if (input[j] === ",") break;
        j++;
    }
    peg$currPos = j;
    $.ip = input.substring(start, j).trim();
    return true;
} { return $.ip; }

domain = match:[0-9a-zA-z-_.]+ { 
    const domain = match.join(""); 
    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {
        return domain;
    }
    throw new Error("Invalid domain: " + domain);
}

port = digits:[0-9]+ { 
    const port = parseInt(digits.join(""), 10); 
    if (port >= 0 && port <= 65535) {
    	return port;
    }
    throw new Error("Invalid port number: " + port);
}

method = comma cipher:cipher { 
    proxy.cipher = cipher;
}
cipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"auto"/"bf-cfb"/"camellia-128-cfb"/"camellia-192-cfb"/"camellia-256-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"none"/"rc4-md5"/"rc4"/"salsa20"/"xchacha20-ietf-poly1305"/"2022-blake3-aes-128-gcm"/"2022-blake3-aes-256-gcm");

username = & {
    let j = peg$currPos; 
    let start, end;
    let first = true;
    while (j < input.length) {
        if (input[j] === ',') {
            if (first) {
                start = j + 1;
                first = false;
            } else {
                end = j;
                break;
            }
        }
        j++;
    }
    const match = input.substring(start, end);
    if (match.indexOf("=") === -1) {
        $.username = match;
        peg$currPos = end;
        return true;
    }
} { proxy.username = $.username; }
password = comma '"' match:[^"]* '"' { proxy.password = match.join(""); }
uuid = comma '"' match:[^"]+ '"' { proxy.uuid = match.join(""); }

obfs_typev = comma type:("http"/"tls") { obfs.type = type; }
obfs_hostv = comma match:[^,]+ { obfs.host = match.join(""); }

obfs_ss = comma "obfs-name" equals type:("http"/"tls") { obfs.type = type; }

obfs_ssr = comma "obfs" equals type:("plain"/"http_simple"/"http_post"/"random_head"/"tls1.2_ticket_auth"/"tls1.2_ticket_fastauth") { obfs.type = type; }
obfs_ssr_param = comma "obfs-param" equals match:$[^,]+ { proxy["obfs-param"] = match; }

obfs_host = comma "obfs-host" equals host:domain { obfs.host = host; }
obfs_uri = comma "obfs-uri" equals uri:uri { obfs.path = uri; }
uri = $[^,]+

transport = comma "transport" equals type:("tcp"/"ws"/"http") { transport.type = type; }
transport_host = comma "host" equals host:domain { transport.host = host; }
transport_path = comma "path" equals path:uri { transport.path = path; }

ssr_protocol = comma "protocol" equals protocol:("origin"/"auth_sha1_v4"/"auth_aes128_md5"/"auth_aes128_sha1"/"auth_chain_a"/"auth_chain_b") { proxy.protocol = protocol; }
ssr_protocol_param = comma "protocol-param" equals param:$[^=,]+ { proxy["protocol-param"] = param; }

vmess_alterId = comma "alterId" equals alterId:$[0-9]+ { proxy.alterId = parseInt(alterId); } 

udp_port = comma "udp-port" equals match:$[0-9]+ { proxy["udp-port"] = parseInt(match.trim()); }
shadow_tls_version = comma "shadow-tls-version" equals match:$[0-9]+ { proxy["shadow-tls-version"] = parseInt(match.trim()); }
shadow_tls_sni = comma "shadow-tls-sni" equals match:[^,]+ { proxy["shadow-tls-sni"] = match.join(""); }
shadow_tls_password = comma "shadow-tls-password" equals match:[^,]+ { proxy["shadow-tls-password"] = match.join(""); }

over_tls = comma "over-tls" equals flag:bool { proxy.tls = flag; }
tls_name = comma sni:("tls-name") equals host:domain { proxy.sni = host; }
sni = comma sni:("sni") equals host:domain { proxy.sni = host; }
tls_verification = comma "skip-cert-verify" equals flag:bool { proxy["skip-cert-verify"] = flag; }
tls_cert_sha256 = comma "tls-cert-sha256" equals match:[^,]+ { proxy["tls-fingerprint"] = match.join("").replace(/^"(.*)"$/, '$1'); }
tls_pubkey_sha256 = comma "tls-pubkey-sha256" equals match:[^,]+ { proxy["tls-pubkey-sha256"] = match.join("").replace(/^"(.*)"$/, '$1'); }

flow = comma "flow" equals match:[^,]+ { proxy["flow"] = match.join("").replace(/^"(.*)"$/, '$1'); }
public_key = comma "public-key" equals match:[^,]+ { proxy["reality-opts"] = proxy["reality-opts"] || {}; proxy["reality-opts"]["public-key"] = match.join("").replace(/^"(.*)"$/, '$1'); }
short_id = comma "short-id" equals match:[^,]+ { proxy["reality-opts"] = proxy["reality-opts"] || {}; proxy["reality-opts"]["short-id"] = match.join("").replace(/^"(.*)"$/, '$1'); }

fast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }
udp_relay = comma "udp" equals flag:bool { proxy.udp = flag; }
ip_mode = comma "ip-mode" equals match:[^,]+ { proxy["ip-version"] = match.join(""); }

ecn = comma "ecn" equals flag:bool { proxy.ecn = flag; }
download_bandwidth = comma "download-bandwidth" equals match:[^,]+ { proxy.down = match.join(""); }
salamander_password = comma "salamander-password" equals match:[^,]+ { proxy['obfs-password'] = match.join(""); proxy.obfs = 'salamander'; }

block_quic = comma "block-quic" equals flag:bool { if(flag) proxy["block-quic"] = "on"; else proxy["block-quic"] = "off"; }

tag = match:[^=,]* { proxy.name = match.join("").trim(); }
comma = _ "," _
equals = _ "=" _
_ = [ \r\t]*
bool = b:("true"/"false") { return b === "true" }
others = comma [^=,]+ equals [^=,]+
`,Sp;function ji(){return Sp||(Sp=Kv.generate(y6)),Sp}var zv=vi(co()),S6=String.raw`
// global initializer
{{
    function $set(obj, path, value) {
      if (Object(obj) !== obj) return obj;
      if (!Array.isArray(path)) path = path.toString().match(/[^.[\]]+/g) || [];
      path
        .slice(0, -1)
        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[
        path[path.length - 1]
      ] = value;
      return obj;
    }
}}

// per-parse initializer
{
	const proxy = {};
    const obfs = {};
    const $ = {};

    function handleObfs() {
        if (obfs.type === "ws" || obfs.type === "wss") {
            proxy.network = "ws";
            if (obfs.type === 'wss') {
                proxy.tls = true;
            }
            $set(proxy, "ws-opts.path", obfs.path);
            $set(proxy, "ws-opts.headers.Host", obfs.host);
        } else if (obfs.type === "over-tls") {
            proxy.tls = true;
        } else if (obfs.type === "http") {
            proxy.network = "http";
            $set(proxy, "http-opts.path", obfs.path);
            $set(proxy, "http-opts.headers.Host", obfs.host);
        }
    }
}

start = (trojan/shadowsocks/vmess/vless/http/socks5) {
    return proxy
}

trojan = "trojan" equals address
    (password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/obfs/obfs_host/obfs_uri/tag/udp_relay/udp_over_tcp/fast_open/server_check_url/others)* {
    proxy.type = "trojan";
    handleObfs();
}

shadowsocks = "shadowsocks" equals address
    (password/method/obfs_ssr/obfs_ss/obfs_host/obfs_uri/ssr_protocol/ssr_protocol_param/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/udp_relay/udp_over_tcp_new/fast_open/tag/server_check_url/others)* {
    if (proxy.protocol || proxy.type === "ssr") {
        proxy.type = "ssr";
        if (!proxy.protocol) {
            proxy.protocol = "origin";
        }
        // handle ssr obfs
        if (obfs.host) proxy["obfs-param"] = obfs.host;
        if (obfs.type) proxy.obfs = obfs.type;
    } else {
        proxy.type = "ss";
        // handle ss obfs
        if (obfs.type == "http" || obfs.type === "tls") {
            proxy.plugin = "obfs";
            $set(proxy, "plugin-opts", {
                mode: obfs.type
            });
        } else if (obfs.type === "ws" || obfs.type === "wss") {
            proxy.plugin = "v2ray-plugin";
            $set(proxy, "plugin-opts.mode", "websocket");
            if (obfs.type === "wss") {
                $set(proxy, "plugin-opts.tls", true);
            }
        } else if (obfs.type === 'over-tls') {
            throw new Error('ss over-tls is not supported');
        }
        if (obfs.type) {
            $set(proxy, "plugin-opts.host", obfs.host);
            $set(proxy, "plugin-opts.path", obfs.path);
        }
    }
}

vmess = "vmess" equals address
    (uuid/method/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/obfs/obfs_host/obfs_uri/udp_relay/udp_over_tcp/fast_open/aead/server_check_url/others)* {
    proxy.type = "vmess";
    proxy.cipher = proxy.cipher || "none";
    if (proxy.aead === false) {
        proxy.alterId = 1;
    } else {
        proxy.alterId = 0;
    }
    handleObfs();
}

vless = "vless" equals address
    (uuid/method/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/obfs/obfs_host/obfs_uri/udp_relay/udp_over_tcp/fast_open/aead/server_check_url/others)* {
    proxy.type = "vless";
    proxy.cipher = proxy.cipher || "none";
    handleObfs();
}

http = "http" equals address 
    (username/password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/fast_open/udp_relay/udp_over_tcp/server_check_url/others)*{
    proxy.type = "http";
}

socks5 = "socks5" equals address
    (username/password/password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/fast_open/udp_relay/udp_over_tcp/server_check_url/others)* {
    proxy.type = "socks5";
}
    
address = server:server ":" port:port {
    proxy.server = server;
    proxy.port = port;
}
server = ip/domain

domain = match:[0-9a-zA-z-_.]+ { 
    const domain = match.join(""); 
    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {
        return domain;
    }
}

ip = & {
    const start = peg$currPos;
    let end;
    let j = start;
    while (j < input.length) {
        if (input[j] === ",") break;
        if (input[j] === ":") end = j;
        j++;
    }
    peg$currPos = end || j;
    $.ip = input.substring(start, end).trim();
    return true;
} { return $.ip; }

port = digits:[0-9]+ { 
    const port = parseInt(digits.join(""), 10); 
    if (port >= 0 && port <= 65535) {
    	return port;
    }
}

username = comma "username" equals username:[^,]+ { proxy.username = username.join("").trim(); }
password = comma "password" equals password:[^,]+ { proxy.password = password.join("").trim(); }
uuid = comma "password" equals uuid:[^,]+ { proxy.uuid = uuid.join("").trim(); }

method = comma "method" equals cipher:cipher { 
    proxy.cipher = cipher;
};
cipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"bf-cfb"/"cast5-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"des-cfb"/"none"/"rc2-cfb"/"rc4-md5-6"/"rc4-md5"/"salsa20"/"xchacha20-ietf-poly1305"/"2022-blake3-aes-128-gcm"/"2022-blake3-aes-256-gcm");
aead = comma "aead" equals flag:bool { proxy.aead = flag; }

udp_relay = comma "udp-relay" equals flag:bool { proxy.udp = flag; }
udp_over_tcp = comma "udp-over-tcp" equals flag:bool { throw new Error("UDP over TCP is not supported"); }
udp_over_tcp_new = comma "udp-over-tcp" equals param:$[^=,]+ { if (param === "sp.v1") { proxy["udp-over-tcp"] = true; proxy["udp-over-tcp-version"] = 1; } else if (param === "sp.v2") { proxy["udp-over-tcp"] = true; proxy["udp-over-tcp-version"] = 2; } else if (param === "true") { proxy["_ssr_python_uot"] = true; } else { throw new Error("Invalid value for udp-over-tcp"); } }

fast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }

over_tls = comma "over-tls" equals flag:bool { proxy.tls = flag; }
tls_host = comma "tls-host" equals sni:domain { proxy.sni = sni; }
tls_verification = comma "tls-verification" equals flag:bool { 
    proxy["skip-cert-verify"] = !flag;
}
tls_fingerprint = comma "tls-cert-sha256" equals tls_fingerprint:$[^,]+ { proxy["tls-fingerprint"] = tls_fingerprint.trim(); }
tls_pubkey_sha256 = comma "tls-pubkey-sha256" equals param:$[^=,]+ { proxy["tls-pubkey-sha256"] = param; }
tls_alpn = comma "tls-alpn" equals param:$[^=,]+ { proxy["tls-alpn"] = param; }
tls_no_session_ticket = comma "tls-no-session-ticket" equals flag:bool { 
    proxy["tls-no-session-ticket"] = flag;
}
tls_no_session_reuse = comma "tls-no-session-reuse" equals flag:bool { 
    proxy["tls-no-session-reuse"] = flag;
}

obfs_ss = comma "obfs" equals type:("http"/"tls"/"wss"/"ws"/"over-tls") { obfs.type = type; return type; }
obfs_ssr = comma "obfs" equals type:("plain"/"http_simple"/"http_post"/"random_head"/"tls1.2_ticket_auth"/"tls1.2_ticket_fastauth") { proxy.type = "ssr"; obfs.type = type; return type; }
obfs = comma "obfs" equals type:("wss"/"ws"/"over-tls"/"http") { obfs.type = type; return type; };

obfs_host = comma "obfs-host" equals host:domain { obfs.host = host; }
obfs_uri = comma "obfs-uri" equals uri:uri { obfs.path = uri; }

ssr_protocol = comma "ssr-protocol" equals protocol:("origin"/"auth_sha1_v4"/"auth_aes128_md5"/"auth_aes128_sha1"/"auth_chain_a"/"auth_chain_b") { proxy.protocol = protocol; return protocol; }
ssr_protocol_param = comma "ssr-protocol-param" equals param:$[^=,]+ { proxy["protocol-param"] = param; }

server_check_url = comma "server_check_url" equals param:$[^=,]+ { proxy["test-url"] = param; }

uri = $[^,]+

tag = comma "tag" equals tag:[^=,]+ { proxy.name = tag.join(""); }
others = comma [^=,]+ equals [^=,]+
comma = _ "," _
equals = _ "=" _
_ = [ \r\t]*
bool = b:("true"/"false") { return b === "true" }
`,_p;function us(){return _p||(_p=zv.generate(S6)),_p}var Gv=vi(co()),_6=String.raw`
// global initializer
{{
  function $set(obj, path, value) {
    if (Object(obj) !== obj) return obj;
    if (!Array.isArray(path)) path = path.toString().match(/[^.[\]]+/g) || [];
    path
      .slice(0, -1)
      .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[
      path[path.length - 1]
    ] = value;
    return obj;
  }

  function toBool(str) {
    if (typeof str === 'undefined' || str === null) return undefined;
    return /(TRUE)|1/i.test(str);
  }
}}

{
  const proxy = {};
  const obfs = {};
  const $ = {};
  const params = {};
}

start = (trojan) {
  return proxy
}

trojan = "trojan://" password:password "@" server:server ":" port:port "/"? params? name:name?{
  proxy.type = "trojan";
  proxy.password = password;
  proxy.server = server;
  proxy.port = port;
  proxy.name = name;

  // name may be empty
  if (!proxy.name) {
    proxy.name = server + ":" + port;
  }
};

password = match:$[^@]+ {
  return decodeURIComponent(match);
};

server = ip/domain;

domain = match:[0-9a-zA-z-_.]+ { 
  const domain = match.join(""); 
  if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {
    return domain;
  }
}

ip = & {
  const start = peg$currPos;
  let end;
  let j = start;
  while (j < input.length) {
    if (input[j] === ",") break;
    if (input[j] === ":") end = j;
    j++;
  }
  peg$currPos = end || j;
  $.ip = input.substring(start, end).trim();
  return true;
} { return $.ip; }

port = digits:[0-9]+ { 
  const port = parseInt(digits.join(""), 10); 
  if (port >= 0 && port <= 65535) {
    return port;
  } else {
    throw new Error("Invalid port: " + port);
  }
}

params = "?" head:param tail:("&"@param)* {
  for (const [key, value] of Object.entries(params)) {
    params[key] = decodeURIComponent(value);
  }
  proxy["skip-cert-verify"] = toBool(params["allowInsecure"]);
  proxy.sni = params["sni"] || params["peer"];
  proxy['client-fingerprint'] = params.fp;
  proxy.alpn = params.alpn ? decodeURIComponent(params.alpn).split(',') : undefined;

  if (toBool(params["ws"])) {
    proxy.network = "ws";
    $set(proxy, "ws-opts.path", params["wspath"]);
  }
  
  if (params["type"]) {
    let httpupgrade
    proxy.network = params["type"]
    if(proxy.network === 'httpupgrade') {
      proxy.network = 'ws'
      httpupgrade = true
    }
    if (['grpc'].includes(proxy.network)) {
        proxy[proxy.network + '-opts'] = {
            'grpc-service-name': params["serviceName"],
            '_grpc-type': params["mode"],
            '_grpc-authority': params["authority"],
        };
    } else {
      if (params["path"]) {
        $set(proxy, proxy.network+"-opts.path", decodeURIComponent(params["path"]));  
      }
      if (params["host"]) {
        $set(proxy, proxy.network+"-opts.headers.Host", decodeURIComponent(params["host"])); 
      }
      if (httpupgrade) {
        $set(proxy, proxy.network+"-opts.v2ray-http-upgrade", true); 
        $set(proxy, proxy.network+"-opts.v2ray-http-upgrade-fast-open", true); 
      }
    }
    if (['reality'].includes(params.security)) {
      const opts = {};
      if (params.pbk) {
        opts['public-key'] = params.pbk;
      }
      if (params.sid) {
        opts['short-id'] = params.sid;
      }
      if (params.spx) {
        opts['_spider-x'] = params.spx;
      }
      if (params.mode) {
        proxy._mode = params.mode;
      }
      if (params.extra) {
        proxy._extra = params.extra;
      }
      if (Object.keys(opts).length > 0) {
        $set(proxy, params.security+"-opts", opts); 
      }
    }
  }

  proxy.udp = toBool(params["udp"]);
  proxy.tfo = toBool(params["tfo"]);
}

param = kv/single;

kv = key:$[a-z]i+ "=" value:$[^&#]i* {
  params[key] = value;
}

single = key:$[a-z]i+ {
  params[key] = true;
};

name = "#" + match:$.* {
  return decodeURIComponent(match);
}
`,Dp;function Fp(){return Dp||(Dp=Gv.generate(_6)),Dp}var Bp=vi(Pp());function Wv(e){let[t,r]=e.match(/,\s*?port-hopping\s*?=\s*?["']?\s*?((\d+(-\d+)?)([,;]\d+(-\d+)?)*)\s*?["']?\s*?/)||[];return{port_hopping:r?r.replace(/;/g,","):void 0,line:t?e.replace(t,""):e}}function D6(){return{name:"URI PROXY Parser",test:n=>/^(socks5\+tls|socks5|http|https):\/\//.test(n),parse:n=>{let[a,u,i,c,l,m,E,b,v]=n.match(/^(socks5|http|http)(\+tls|s)?:\/\/(?:(.*?):(.*?)@)?(.*?)(?::(\d+?))?(\?.*?)?(?:#(.*?))?$/);if(E)E=parseInt(E,10);else{if(i)E=443;else if(u==="http")E=80;else throw Wt.error(`port is not present in line: ${n}`),new Error(`port is not present in line: ${n}`);Wt.info(`port is not present in line: ${n}, set to ${E}`)}return{name:v!=null?decodeURIComponent(v):`${u} ${m}:${E}`,type:u,tls:!!i,server:m,port:E,username:c!=null?decodeURIComponent(c):void 0,password:l!=null?decodeURIComponent(l):void 0}}}}function F6(){return{name:"URI SOCKS Parser",test:n=>/^socks:\/\//.test(n),parse:n=>{let[a,u,i,c,l,m,E]=n.match(/^(socks)?:\/\/(?:(.*)@)?(.*?)(?::(\d+?))?(\?.*?)?(?:#(.*?))?$/);if(l)l=parseInt(l,10);else throw Wt.error(`port is not present in line: ${n}`),new Error(`port is not present in line: ${n}`);let b,v;if(i){let A=Yt.decode(decodeURIComponent(i)).split(":");b=A[0],v=A[1]}return{name:E!=null?decodeURIComponent(E):`${u} ${c}:${l}`,type:"socks5",server:c,port:l,username:b,password:v}}}}function C6(){return{name:"URI SS Parser",test:n=>/^ss:\/\//.test(n),parse:n=>{let a=n.split("ss://")[1],u=n.split("#")[1],i={type:"ss"};a=a.split("#")[0];let c=a.match(/@([^/?]*)(\/|\?|$)/),l=decodeURIComponent(a.split("@")[0]),m;l?.startsWith("2022-blake3-")?m=l:m=Yt.decode(l);let E="";if(c)a.includes("?")&&(E=a.match(/(\?.*)$/)[1]);else{if(a.includes("?")){let S=a.match(/^(.*)(\?.*)$/);a=S[1],E=S[2]}if(a=Yt.decode(a),E){if(/(&|\?)v2ray-plugin=/.test(E)){let y=E.match(/(&|\?)v2ray-plugin=(.*?)(&|$)/)[2];y&&(i.plugin="v2ray-plugin",i["plugin-opts"]=JSON.parse(Yt.decode(y)))}a=`${a}${E}`}m=a.match(/(^.*)@/)?.[1],c=a.match(/@([^/@]*)(\/|$)/)}let b=c[1],v=b.lastIndexOf(":");i.server=b.substring(0,v),i.port=`${b.substring(v+1)}`.match(/\d+/)?.[0];let g=m.match(/(^.*?):(.*$)/);i.cipher=g?.[1],i.password=g?.[2];let A=a.match(/[?&]plugin=([^&]+)/),w=a.match(/[?&]shadow-tls=([^&]+)/);if(A){let S=("plugin="+decodeURIComponent(A[1])).split(";"),y={};for(let C of S){let[x,N]=C.split("=");x&&(y[x]=N||!0)}switch(y.plugin){case"obfs-local":case"simple-obfs":i.plugin="obfs",i["plugin-opts"]={mode:y.obfs,host:dr(y["obfs-host"])};break;case"v2ray-plugin":i.plugin="v2ray-plugin",i["plugin-opts"]={mode:"websocket",host:dr(y["obfs-host"]),path:dr(y.path),tls:Xa(y.tls)};break;case"shadow-tls":{i.plugin="shadow-tls";let C=dr(y.version);i["plugin-opts"]={host:dr(y.host),password:dr(y.password),version:C?parseInt(C,10):void 0};break}default:throw new Error(`Unsupported plugin option: ${y.plugin}`)}}if(w){let S=JSON.parse(Yt.decode(w[1])),y=dr(S.version),C=dr(S.address),x=dr(S.port);i.plugin="shadow-tls",i["plugin-opts"]={host:dr(S.host),password:dr(S.password),version:y?parseInt(y,10):void 0},C&&(i.server=C),x&&(i.port=parseInt(x,10))}return/(&|\?)uot=(1|true)/i.test(E)&&(i["udp-over-tcp"]=!0),/(&|\?)tfo=(1|true)/i.test(E)&&(i.tfo=!0),u!=null&&(u=decodeURIComponent(u)),i.name=u??`SS ${i.server}:${i.port}`,i}}}function I6(){return{name:"URI SSR Parser",test:n=>/^ssr:\/\//.test(n),parse:n=>{n=Yt.decode(n.split("ssr://")[1]);let a=n.indexOf(":origin");a===-1&&(a=n.indexOf(":auth_"));let u=n.substring(0,a),i=u.substring(0,u.lastIndexOf(":")),c=u.substring(u.lastIndexOf(":")+1),l=n.substring(a+1).split("/?")[0].split(":"),m={type:"ssr",server:i,port:c,protocol:l[0],cipher:l[1],obfs:l[2],password:Yt.decode(l[3])},E={};if(n=n.split("/?")[1].split("&"),n.length>1)for(let b of n){let[v,g]=b.split("=");g=g.trim(),g.length>0&&g!=="(null)"&&(E[v]=g)}return m={...m,name:E.remarks?Yt.decode(E.remarks):m.server,"protocol-param":dr(Yt.decode(E.protoparam||"").replace(/\s/g,"")),"obfs-param":dr(Yt.decode(E.obfsparam||"").replace(/\s/g,""))},m}}}function P6(){return{name:"URI VMess Parser",test:n=>/^vmess:\/\//.test(n),parse:n=>{n=n.split("vmess://")[1];let a=Yt.decode(n.replace(/\?.*?$/,""));if(/=\s*vmess/.test(a)){let u=a.split(",").map(l=>l.trim()),i={};for(let l of u)if(l.indexOf("=")!==-1){let[m,E]=l.split("=");i[m.trim()]=E.trim()}let c={name:u[0].split("=")[0].trim(),type:"vmess",server:u[1],port:u[2],cipher:dr(u[3],"auto"),uuid:u[4].match(/^"(.*)"$/)[1],tls:i.obfs==="wss",udp:Xa(i["udp-relay"]),tfo:Xa(i["fast-open"]),"skip-cert-verify":we(i["tls-verification"])?!i["tls-verification"]:void 0};if(we(i.obfs))if(i.obfs==="ws"||i.obfs==="wss"){c.network="ws",c["ws-opts"].path=(dr(i["obfs-path"])||'"/"').match(/^"(.*)"$/)[1];let l=i["obfs-header"];l&&l.indexOf("Host")!==-1&&(l=l.match(/Host:\s*([a-zA-Z0-9-.]*)/)[1]),Oi(l)&&(c["ws-opts"].headers={Host:l})}else throw new Error(`Unsupported obfs: ${i.obfs}`);return c}else{let u={};try{u=JSON.parse(a)}catch{let[b,v,g]=/(^[^?]+?)\/?\?(.*)$/.exec(n);a=Yt.decode(v);for(let x of g.split("&")){let[N,L]=x.split("="),ne=L;ne=decodeURIComponent(L),ne.indexOf(",")===-1?u[N]=ne:u[N]=ne.split(",")}let[A,w,S,y,C]=/(^[^:]+?):([^:]+?)@(.*):(\d+)$/.exec(a);u.scy=w,u.id=S,u.port=C,u.add=y}let i=u.add,c=parseInt(Xa(u.port),10),l={name:u.ps??u.remarks??u.remark??`VMess ${i}:${c}`,type:"vmess",server:i,port:c,cipher:["auto","aes-128-gcm","chacha20-poly1305","none"].includes(u.scy)?u.scy:"auto",uuid:u.id,alterId:parseInt(Xa(u.aid??u.alterId,0),10),tls:["tls",!0,1,"1"].includes(u.tls),"skip-cert-verify":we(u.verify_cert)?!u.verify_cert:void 0};!l["skip-cert-verify"]&&we(u.allowInsecure)&&(l["skip-cert-verify"]=/(TRUE)|1/i.test(u.allowInsecure)),l.tls&&(u.sni&&u.sni!==""?l.sni=u.sni:u.peer&&u.peer!==""&&(l.sni=u.peer));let m=!1;if(u.net==="ws"||u.obfs==="websocket"?l.network="ws":["http"].includes(u.net)||["http"].includes(u.obfs)||["http"].includes(u.type)?l.network="http":["grpc","kcp","quic"].includes(u.net)?l.network=u.net:u.net==="httpupgrade"||l.network==="httpupgrade"?(l.network="ws",m=!0):(u.net==="h2"||l.network==="h2")&&(l.network="h2"),l.network){let E=u.host??u.obfsParam;try{let g=JSON.parse(E)?.Host;g&&(E=g)}catch{}let b=u.path;if(["ws"].includes(l.network)&&(b=b||"/"),l.network==="http"&&(E&&(E=E.split(",").map(v=>v.trim()),E=Array.isArray(E)?E[0]:E),b?b=Array.isArray(b)?b[0]:b:b="/"),b||E||["kcp","quic"].includes(l.network))if(["grpc"].includes(l.network))l[`${l.network}-opts`]={"grpc-service-name":dr(b),"_grpc-type":dr(u.type),"_grpc-authority":dr(u.authority)};else if(["kcp","quic"].includes(l.network))l[`${l.network}-opts`]={[`_${l.network}-type`]:dr(u.type),[`_${l.network}-host`]:dr(dr(E)),[`_${l.network}-path`]:dr(b)};else{let v={path:dr(b),headers:{Host:dr(E)}};m&&(v["v2ray-http-upgrade"]=!0,v["v2ray-http-upgrade-fast-open"]=!0),l[`${l.network}-opts`]=v}else delete l.network}return l["client-fingerprint"]=u.fp,l.alpn=u.alpn?u.alpn.split(","):void 0,l}}}}function Yv(){return{name:"URI VLESS Parser",test:n=>/^vless:\/\//.test(n),parse:n=>{n=n.split("vless://")[1];let a,u=/^(.*?)@(.*?):(\d+)\/?(\?(.*?))?(?:#(.*?))?$/.exec(n);if(!u){let[S,y,C]=/^(.*?)(\?.*?$)/.exec(n);n=`${Yt.decode(y)}${C}`,u=/^(.*?)@(.*?):(\d+)\/?(\?(.*?))?(?:#(.*?))?$/.exec(n),a=!0}let[i,c,l,m,E,b="",v]=u;a&&(c=c.replace(/^.*?:/g,"")),m=parseInt(`${m}`,10),c=decodeURIComponent(c),v!=null&&(v=decodeURIComponent(v));let g={type:"vless",name:v,server:l,port:m,uuid:c},A={};for(let S of b.split("&"))if(S){let[y,C]=S.split("="),x=C;x=decodeURIComponent(C),A[y]=x}if(g.name=v??A.remarks??A.remark??`VLESS ${l}:${m}`,g.tls=A.security&&A.security!=="none",a&&/TRUE|1/i.test(A.tls)&&(g.tls=!0,A.security=A.security??"reality"),g.sni=A.sni||A.peer,g.flow=A.flow,!g.flow&&a&&A.xtls){let S=[void 0,"xtls-rprx-direct","xtls-rprx-vision"][A.xtls];S&&(g.flow=S)}if(g["client-fingerprint"]=A.fp,g.alpn=A.alpn?A.alpn.split(","):void 0,g["skip-cert-verify"]=/(TRUE)|1/i.test(A.allowInsecure),["reality"].includes(A.security)){let S={};A.pbk&&(S["public-key"]=A.pbk),A.sid&&(S["short-id"]=A.sid),A.spx&&(S["_spider-x"]=A.spx),Object.keys(S).length>0&&(g[`${A.security}-opts`]=S)}let w=!1;if(g.network=A.type,g.network==="tcp"&&A.headerType==="http"?g.network="http":g.network==="httpupgrade"&&(g.network="ws",w=!0),!g.network&&a&&A.obfs&&(g.network=A.obfs,["none"].includes(g.network)&&(g.network="tcp")),["websocket"].includes(g.network)&&(g.network="ws"),g.network&&!["tcp","none"].includes(g.network)){let S={},y=A.host??A.obfsParam;if(y)if(A.obfsParam)try{let C=JSON.parse(y);S.headers=C}catch{S.headers={Host:y}}else S.headers={Host:y};A.serviceName?(S[`${g.network}-service-name`]=A.serviceName,["grpc"].includes(g.network)&&A.authority&&(S["_grpc-authority"]=A.authority)):a&&A.path&&(["ws","http","h2"].includes(g.network)||(S[`${g.network}-service-name`]=A.path,delete A.path)),A.path&&(S.path=A.path),["grpc"].includes(g.network)&&(S["_grpc-type"]=A.mode||"gun"),w&&(S["v2ray-http-upgrade"]=!0,S["v2ray-http-upgrade-fast-open"]=!0),Object.keys(S).length>0&&(g[`${g.network}-opts`]=S),g.network==="kcp"&&(A.seed&&(g.seed=A.seed),g.headerType=A.headerType||"none"),A.mode&&(g._mode=A.mode),A.extra&&(g._extra=A.extra)}return g}}}function B6(){return{name:"URI AnyTLS Parser",test:n=>/^anytls:\/\//.test(n),parse:n=>{let a=Yv().parse(n.replace("anytls","vless"));n=n.split(/anytls:\/\//)[1];let[u,i,c,l,m="",E]=/^(.*?)@(.*?)(?::(\d+))?\/?(?:\?(.*?))?(?:#(.*?))?$/.exec(n);i=decodeURIComponent(i),l=parseInt(`${l}`,10),isNaN(l)&&(l=443),i=decodeURIComponent(i),E!=null&&(E=decodeURIComponent(E)),E=E??`AnyTLS ${c}:${l}`;let b={...a,uuid:void 0,type:"anytls",name:E,server:c,port:l,password:i};for(let v of m.split("&"))if(v){let[g,A]=v.split("=");g=g.replace(/_/g,"-"),A=decodeURIComponent(A),["alpn"].includes(g)?b[g]=A?A.split(","):void 0:["insecure"].includes(g)?b["skip-cert-verify"]=/(TRUE)|1/i.test(A):["udp"].includes(g)?b[g]=/(TRUE)|1/i.test(A):Object.keys(b).includes(g)||(b[g]=A)}return["tcp"].includes(b.network)&&!b["reality-opts"]&&(delete b.network,delete b.security),b}}}function $6(){return{name:"URI Hysteria2 Parser",test:n=>/^(hysteria2|hy2):\/\//.test(n),parse:n=>{n=n.split(/(hysteria2|hy2):\/\//)[2];let a,[u,i,c,l,m,E,b,v,g,A,w="",S]=/^(.*?)@(.*?)(:((\d+(-\d+)?)([,;]\d+(-\d+)?)*))?\/?(\?(.*?))?(?:#(.*?))?$/.exec(n);/^\d+$/.test(m)?(m=parseInt(`${m}`,10),isNaN(m)&&(m=443)):m?(a=m,m=Yu(a)):m=443,i=decodeURIComponent(i),S!=null&&(S=decodeURIComponent(S)),S=S??`Hysteria2 ${c}:${m}`;let y={type:"hysteria2",name:S,server:c,port:m,ports:a,password:i},C={};for(let L of w.split("&"))if(L){let[ne,pe]=L.split("="),I=pe;I=decodeURIComponent(pe),C[ne]=I}y.sni=C.sni,!y.sni&&C.peer&&(y.sni=C.peer),C.obfs&&C.obfs!=="none"&&(y.obfs=C.obfs),C.mport&&(y.ports=C.mport),y["obfs-password"]=C["obfs-password"],y["skip-cert-verify"]=/(TRUE)|1/i.test(C.insecure),y.tfo=/(TRUE)|1/i.test(C.fastopen),y["tls-fingerprint"]=C.pinSHA256;let x=C["hop-interval"]||C.hop_interval;/^\d+$/.test(x)&&(y["hop-interval"]=parseInt(`${x}`,10));let N=C.keepalive;return/^\d+$/.test(N)&&(y.keepalive=parseInt(`${N}`,10)),y}}}function R6(){return{name:"URI Hysteria Parser",test:n=>/^(hysteria|hy):\/\//.test(n),parse:n=>{n=n.split(/(hysteria|hy):\/\//)[2];let[a,u,i,c,l,m="",E]=/^(.*?)(:(\d+))?\/?(\?(.*?))?(?:#(.*?))?$/.exec(n);c=parseInt(`${c}`,10),isNaN(c)&&(c=443),E!=null&&(E=decodeURIComponent(E)),E=E??`Hysteria ${u}:${c}`;let b={type:"hysteria",name:E,server:u,port:c},v={};for(let g of m.split("&"))if(g){let[A,w]=g.split("=");A=A.replace(/_/,"-"),w=decodeURIComponent(w),["alpn"].includes(A)?b[A]=w?w.split(","):void 0:["insecure"].includes(A)?b["skip-cert-verify"]=/(TRUE)|1/i.test(w):["auth"].includes(A)?b["auth-str"]=w:["mport"].includes(A)?b.ports=w:["obfsParam"].includes(A)?b.obfs=w:["upmbps"].includes(A)?b.up=w:["downmbps"].includes(A)?b.down=w:["obfs"].includes(A)?b._obfs=w||"":["fast-open","peer"].includes(A)?v[A]=w:Object.keys(b).includes(A)||(b[A]=w)}return!b.sni&&v.peer&&(b.sni=v.peer),!b["fast-open"]&&v.fastopen&&(b["fast-open"]=!0),b.protocol||(b.protocol="udp"),b}}}function k6(){return{name:"URI TUIC Parser",test:n=>/^tuic:\/\//.test(n),parse:n=>{n=n.split(/tuic:\/\//)[1];let[a,u,i,c,l="",m]=/^(.*?)@(.*?)(?::(\d+))?\/?(?:\?(.*?))?(?:#(.*?))?$/.exec(n);u=decodeURIComponent(u);let[E,...b]=u.split(":"),v=b.join(":");c=parseInt(`${c}`,10),isNaN(c)&&(c=443),v=decodeURIComponent(v),m!=null&&(m=decodeURIComponent(m)),m=m??`TUIC ${i}:${c}`;let g={type:"tuic",name:m,server:i,port:c,password:v,uuid:E};for(let A of l.split("&"))if(A){let[w,S]=A.split("=");w=w.replace(/_/g,"-"),S=decodeURIComponent(S),["alpn"].includes(w)?g[w]=S?S.split(","):void 0:["allow-insecure","insecure"].includes(w)?g["skip-cert-verify"]=/(TRUE)|1/i.test(S):["fast-open"].includes(w)?g.tfo=!0:["disable-sni","reduce-rtt"].includes(w)?g[w]=/(TRUE)|1/i.test(S):w==="congestion-control"?(g["congestion-controller"]=S,delete g[w]):Object.keys(g).includes(w)||(g[w]=S)}return g}}}function x6(){return{name:"URI WireGuard Parser",test:n=>/^(wireguard|wg):\/\//.test(n),parse:n=>{n=n.split(/(wireguard|wg):\/\//)[2];let[a,u,i,c,l,m,E,b="",v]=/^((.*?)@)?(.*?)(:(\d+))?\/?(\?(.*?))?(?:#(.*?))?$/.exec(n);m=parseInt(`${m}`,10),isNaN(m)&&(m=51820),i=decodeURIComponent(i),v!=null&&(v=decodeURIComponent(v)),v=v??`WireGuard ${c}:${m}`;let g={type:"wireguard",name:v,server:c,port:m,"private-key":i,udp:!0};for(let A of b.split("&"))if(A){let[w,S]=A.split("=");if(w=w.replace(/_/,"-"),S=decodeURIComponent(S),["reserved"].includes(w)){let y=S.split(",").map(C=>parseInt(C.trim(),10)).filter(C=>Number.isInteger(C));y.length===3&&(g[w]=y)}else if(["address","ip"].includes(w))S.split(",").map(y=>{let C=y.trim().replace(/\/\d+$/,"").replace(/^\[/,"").replace(/\]$/,"");zn(C)?g.ip=C:En(C)&&(g.ipv6=C)});else if(["mtu"].includes(w)){let y=parseInt(S.trim(),10);Number.isInteger(y)&&(g[w]=y)}else/publickey/i.test(w)?g["public-key"]=S:/privatekey/i.test(w)?g["private-key"]=S:["udp"].includes(w)?g[w]=/(TRUE)|1/i.test(S):[...Object.keys(g),"flag"].includes(w)||(g[w]=S)}return g}}}function T6(){return{name:"URI Trojan Parser",test:n=>/^trojan:\/\//.test(n),parse:n=>{let a=/^(trojan:\/\/.*?@.*?)(:(\d+))?\/?(\?.*?)?$/.exec(n);a?.[2]||(n=n.replace(a[1],`${a[1]}:443`));let[i,c]=n.split(/#(.+)/,2),m=Fp().parse(i);if(Oi(c))try{m.name=decodeURIComponent(c)}catch(E){console.log(E)}return m}}}function O6(){return{name:"Clash Parser",test:n=>{let a;try{a=Bp.default.parse(n)}catch{a=dp.parse(n)}return!!a?.type},parse:n=>{let a;try{a=Bp.default.parse(n)}catch{a=dp.parse(n)}if(!["anytls","mieru","juicity","ss","ssr","vmess","socks5","http","snell","trojan","tuic","vless","hysteria","hysteria2","wireguard","ssh","direct"].includes(a.type))throw new Error(`Clash does not support proxy with type: ${a.type}`);return["vmess","vless"].includes(a.type)&&(a.sni=a.servername,delete a.servername),a["server-cert-fingerprint"]&&(a["tls-fingerprint"]=a["server-cert-fingerprint"]),a.fingerprint&&(a["tls-fingerprint"]=a.fingerprint),a["dialer-proxy"]&&(a["underlying-proxy"]=a["dialer-proxy"]),a["benchmark-url"]&&(a["test-url"]=a["benchmark-url"]),a["benchmark-timeout"]&&(a["test-timeout"]=a["benchmark-timeout"]),a}}}function N6(){return{name:"QX SS Parser",test:n=>/^shadowsocks\s*=/.test(n.split(",")[0].trim())&&n.indexOf("ssr-protocol")===-1,parse:n=>us().parse(n)}}function L6(){return{name:"QX SSR Parser",test:n=>/^shadowsocks\s*=/.test(n.split(",")[0].trim())&&n.indexOf("ssr-protocol")!==-1,parse:n=>us().parse(n)}}function H6(){return{name:"QX VMess Parser",test:n=>/^vmess\s*=/.test(n.split(",")[0].trim()),parse:n=>us().parse(n)}}function j6(){return{name:"QX VLESS Parser",test:n=>/^vless\s*=/.test(n.split(",")[0].trim()),parse:n=>us().parse(n)}}function U6(){return{name:"QX Trojan Parser",test:n=>/^trojan\s*=/.test(n.split(",")[0].trim()),parse:n=>us().parse(n)}}function M6(){return{name:"QX HTTP Parser",test:n=>/^http\s*=/.test(n.split(",")[0].trim()),parse:n=>us().parse(n)}}function q6(){return{name:"QX Socks5 Parser",test:n=>/^socks5\s*=/.test(n.split(",")[0].trim()),parse:n=>us().parse(n)}}function V6(){return{name:"Loon SS Parser",test:n=>n.split(",")[0].split("=")[1].trim().toLowerCase()==="shadowsocks",parse:n=>ji().parse(n)}}function K6(){return{name:"Loon SSR Parser",test:n=>n.split(",")[0].split("=")[1].trim().toLowerCase()==="shadowsocksr",parse:n=>ji().parse(n)}}function z6(){return{name:"Loon VMess Parser",test:n=>/^.*=\s*vmess/i.test(n.split(",")[0])&&n.indexOf("username")===-1,parse:n=>ji().parse(n)}}function G6(){return{name:"Loon Vless Parser",test:n=>/^.*=\s*vless/i.test(n.split(",")[0]),parse:n=>ji().parse(n)}}function W6(){return{name:"Loon Trojan Parser",test:n=>/^.*=\s*trojan/i.test(n.split(",")[0]),parse:n=>ji().parse(n)}}function Y6(){return{name:"Loon Hysteria2 Parser",test:n=>/^.*=\s*Hysteria2/i.test(n.split(",")[0]),parse:n=>ji().parse(n)}}function J6(){return{name:"Loon HTTP Parser",test:n=>/^.*=\s*http/i.test(n.split(",")[0]),parse:n=>ji().parse(n)}}function X6(){return{name:"Loon SOCKS5 Parser",test:n=>/^.*=\s*socks5/i.test(n.split(",")[0]),parse:n=>ji().parse(n)}}function Z6(){return{name:"Loon WireGuard Parser",test:n=>/^.*=\s*wireguard/i.test(n.split(",")[0]),parse:n=>{let a=n.match(/(^.*?)\s*?=\s*?wireguard\s*?,.+?\s*?=\s*?.+?/i)?.[1];n=n.replace(a,"").replace(/^\s*?=\s*?wireguard\s*/i,"");let u=n.match(/,\s*?peers\s*?=\s*?\[\s*?\{\s*?(.+?)\s*?\}\s*?\]/i)?.[1],i=u.match(/(,|^)\s*?endpoint\s*?=\s*?"?(.+?):(\d+)"?\s*?(,|$)/i),c=i?.[2],l=parseInt(i?.[3],10),m=n.match(/(,|^)\s*?mtu\s*?=\s*?"?(\d+?)"?\s*?(,|$)/i)?.[2];m&&(m=parseInt(m,10));let E=n.match(/(,|^)\s*?keepalive\s*?=\s*?"?(\d+?)"?\s*?(,|$)/i)?.[2];E&&(E=parseInt(E,10));let b=u.match(/(,|^)\s*?reserved\s*?=\s*?"?(\[\s*?.+?\s*?\])"?\s*?(,|$)/i)?.[2];b&&(b=JSON.parse(b));let v,g=n.match(/(,|^)\s*?dns\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],A=n.match(/(,|^)\s*?dnsv6\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2];(g||A)&&(v=[],g&&v.push(g),A&&v.push(A));let w=u.match(/(,|^)\s*?allowed-ips\s*?=\s*?"(.+?)"\s*?(,|$)/i)?.[2]?.split(",").map(L=>L.trim()),S=u.match(/(,|^)\s*?preshared-key\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],y=n.match(/(,|^)\s*?interface-ip\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],C=n.match(/(,|^)\s*?interface-ipv6\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],x=u.match(/(,|^)\s*?public-key\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],N={type:"wireguard",name:a,server:c,port:l,ip:y,ipv6:C,"private-key":n.match(/(,|^)\s*?private-key\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],"public-key":x,mtu:m,keepalive:E,reserved:b,"allowed-ips":w,"preshared-key":S,dns:v,udp:!0,peers:[{server:c,port:l,ip:y,ipv6:C,"public-key":x,"pre-shared-key":S,"allowed-ips":w,reserved:b}]};return Array.isArray(N.dns)&&N.dns.length>0&&(N["remote-dns-resolve"]=!0),N}}}function Q6(){return{name:"Surge Direct Parser",test:n=>/^.*=\s*direct/.test(n.split(",")[0]),parse:n=>Jn().parse(n)}}function e3(){return{name:"Surge SSH Parser",test:n=>/^.*=\s*ssh/.test(n.split(",")[0]),parse:n=>Jn().parse(n)}}function t3(){return{name:"Surge SS Parser",test:n=>/^.*=\s*ss/.test(n.split(",")[0]),parse:n=>Jn().parse(n)}}function r3(){return{name:"Surge VMess Parser",test:n=>/^.*=\s*vmess/.test(n.split(",")[0])&&n.indexOf("username")!==-1,parse:n=>Jn().parse(n)}}function n3(){return{name:"Surge Trojan Parser",test:n=>/^.*=\s*trojan/.test(n.split(",")[0]),parse:n=>Jn().parse(n)}}function i3(){return{name:"Surge HTTP Parser",test:n=>/^.*=\s*https?/.test(n.split(",")[0]),parse:n=>Jn().parse(n)}}function s3(){return{name:"Surge Socks5 Parser",test:n=>/^.*=\s*socks5(-tls)?/.test(n.split(",")[0]),parse:n=>Jn().parse(n)}}function a3(){return{name:"Surge External Parser",test:n=>/^.*=\s*external/.test(n.split(",")[0]),parse:n=>{let a=/^\s*(.*?)\s*?=\s*?external\s*?,\s*(.*?)\s*$/.exec(n),[u,i,c]=a;n=c;let l=/(,|^)\s*?exec\s*?=\s*"(.*?)"\s*?(,|$)/.exec(n)?.[2];l||(l=/(,|^)\s*?exec\s*?=\s*(.*?)\s*?(,|$)/.exec(n)?.[2]);let m=/(,|^)\s*?local-port\s*?=\s*"(.*?)"\s*?(,|$)/.exec(n)?.[2];m||(m=/(,|^)\s*?local-port\s*?=\s*(.*?)\s*?(,|$)/.exec(n)?.[2]);let E=/(,|^)\s*?args\s*?=\s*("(.*?)"|(.*?))(?=\s*?(,|$))/g,b,v=[];for(;(b=E.exec(n))!==null;)b[3]!=null?v.push(b[3]):b[4]!=null&&v.push(b[4]);let g=/(,|^)\s*?addresses\s*?=\s*("(.*?)"|(.*?))(?=\s*?(,|$))/g,A,w=[];for(;(A=g.exec(n))!==null;){let y;A[3]!=null?y=A[3]:A[4]!=null&&(y=A[4]),y!=null&&(y=`${y}`.trim().replace(/^\[/,"").replace(/\]$/,"")),f3(y)&&w.push(y)}return{type:"external",name:i,exec:l,"local-port":m,args:v,addresses:w}}}}function u3(){return{name:"Surge Snell Parser",test:n=>/^.*=\s*snell/.test(n.split(",")[0]),parse:n=>Jn().parse(n)}}function o3(){return{name:"Surge Tuic Parser",test:n=>/^.*=\s*tuic(-v5)?/.test(n.split(",")[0]),parse:n=>{let{port_hopping:a,line:u}=Wv(n),i=Jn().parse(u);return i.ports=a,i}}}function c3(){return{name:"Surge WireGuard Parser",test:n=>/^.*=\s*wireguard/.test(n.split(",")[0]),parse:n=>Jn().parse(n)}}function l3(){return{name:"Surge Hysteria2 Parser",test:n=>/^.*=\s*hysteria2/.test(n.split(",")[0]),parse:n=>{let{port_hopping:a,line:u}=Wv(n),i=Jn().parse(u);return i.ports=a,i}}}function f3(e){return zn(e)||En(e)}var Jv=[D6(),F6(),C6(),I6(),P6(),Yv(),k6(),x6(),R6(),$6(),T6(),B6(),O6(),Q6(),e3(),t3(),r3(),n3(),i3(),u3(),o3(),c3(),l3(),s3(),a3(),V6(),K6(),z6(),G6(),Y6(),W6(),J6(),X6(),Z6(),N6(),L6(),H6(),j6(),U6(),M6(),q6()];var em=vi(Pp());function h3(e){for(let t of Cv)try{if(t.test(e))return Wt.info(`Pre-processor [${t.name}] activated`),t.parse(e)}catch(r){Wt.error(`Parser [${t.name}] failed
 Reason: ${r}`)}return e}function p3(e){e=h3(e);let t=e.split(`
`),r=[],n;for(let a of t){if(a=a.trim(),a.length===0)continue;let u=!1;if(n){let[i,c]=Xv(n,a);c||(r.push(Qv(i)),u=!0)}if(!u)for(let i of Jv){let[c,l]=Xv(i,a);if(!l){r.push(Qv(c)),n=i,u=!0,Wt.info(`${i.name} is activated`);break}}u||Wt.error(`Failed to parse line: ${a}`)}return r.filter(a=>(["vless","vmess"].includes(a.type)&&(Vc(a.uuid)||Wt.error(`UUID may be invalid: ${a.name} ${a.uuid}`)),!0))}function d3(e,t,r,n={}){let a=Lv[t];if(!a)throw new Error(`Target platform: ${t} is not supported!`);let u=/Surge|SurgeMac|Shadowrocket/i.test(t);if(e=e.filter(i=>i.supported&&i.supported[t]===!1?!1:(["vless","vmess"].includes(i.type)&&(Vc(i.uuid)||Wt.error(`UUID may be invalid: ${i.name} ${i.uuid}`)),!0)),e=e.map(i=>(i._resolved=i.resolved,Oi(i.name)||(i.name=`${i.type} ${i.server}:${i.port}`),i["disable-sni"]&&(u?i.sni="off":["tuic"].includes(i.type)||(Wt.error(`Target platform ${t} does not support sni off. Proxy's fields (sni, tls-fingerprint and skip-cert-verify) will be modified.`),i.sni="",i["skip-cert-verify"]=!0,delete i["tls-fingerprint"])),i.ports&&(i.ports=String(i.ports),["ClashMeta"].includes(t)||(i.ports=i.ports.replace(/\//g,",")),i.port||(i.port=Yu(i.ports))),i)),Wt.log(`Producing proxies for target: ${t}`),typeof a.type>"u"||a.type==="SINGLE"){let i=e.map(c=>{try{return a.produce(c,r,n)}catch(l){return Wt.error(`Cannot produce proxy: ${JSON.stringify(c,null,2)}
Reason: ${l}`),""}}).filter(c=>c.length>0);return i=r==="internal"?i:i.join(`
`),t.startsWith("Surge")&&e.length>0&&e.every(c=>c.type==="wireguard")&&(i=`#!name=${e[0]?._subName}
#!desc=${e[0]?._desc??""}
#!category=${e[0]?._category??""}
${i}`),i}else if(a.type==="ALL")return a.produce(e,r,n)}var lo={parse:p3,produce:d3,ipAddress:P1,getRandomPort:Yu,isIPv4:zn,isIPv6:En,isIP:$p,isValidUUID:Vc,Buffer:fl.Buffer,Base64:Yt,JSON5:em.default};function Xv(e,t){if(!g3(e,t))return[null,new Error("Parser mismatch")];try{return[e.parse(t),null]}catch(r){return[null,r]}}function g3(e,t){try{return e.test(t)}catch{return!1}}function Zv(e){if(typeof e=="string"||typeof e=="number"){if(e=String(e).trim(),e==="")return"/";if(!e.startsWith("/"))return"/"+e}return e}function Qv(e){typeof e.cipher=="string"&&(e.cipher=e.cipher.toLowerCase()),typeof e.password=="number"&&(e.password=$1(e.password)),["ss"].includes(e.type)&&e.cipher==="none"&&!e.password&&(e.password=""),e.interface&&(e["interface-name"]=e.interface,delete e.interface),B1(e.port)&&(e.port=parseInt(e.port,10)),e.server&&(e.server=`${e.server}`.trim().replace(/^\[/,"").replace(/\]$/,"")),e.network==="ws"&&(!e["ws-opts"]&&(e["ws-path"]||e["ws-headers"])&&(e["ws-opts"]={},e["ws-path"]&&(e["ws-opts"].path=e["ws-path"]),e["ws-headers"]&&(e["ws-opts"].headers=e["ws-headers"])),delete e["ws-path"],delete e["ws-headers"]);let t=e[`${e.network}-opts`]?.path;if(Array.isArray(t)?e[`${e.network}-opts`].path=t.map(n=>Zv(n)):t!=null&&(e[`${e.network}-opts`].path=Zv(t)),e.type==="trojan"&&e.network==="tcp"&&delete e.network,["vless"].includes(e.type)&&(e.network||(e.network="tcp")),["trojan","tuic","hysteria","hysteria2","juicity","anytls"].includes(e.type)&&(e.tls=!0),e.network){let n=e[`${e.network}-opts`]?.headers?.Host,a=e[`${e.network}-opts`]?.headers?.host;e.network==="h2"?!a&&n&&(e[`${e.network}-opts`].headers.host=n,delete e[`${e.network}-opts`].headers.Host):a&&!n&&(e[`${e.network}-opts`].headers.Host=a,delete e[`${e.network}-opts`].headers.host)}if(e.network==="h2"){let n=e["h2-opts"]?.headers?.host,a=e["h2-opts"]?.path;n&&!Array.isArray(n)&&(e["h2-opts"].headers.host=[n]),Array.isArray(a)&&(e["h2-opts"].path=a[0])}if(!e.tls&&["ws","http"].includes(e.network)&&!e[`${e.network}-opts`]?.headers?.Host&&!$p(e.server)&&(e[`${e.network}-opts`]=e[`${e.network}-opts`]||{},e[`${e.network}-opts`].headers=e[`${e.network}-opts`].headers||{},e[`${e.network}-opts`].headers.Host=["vmess","vless"].includes(e.type)&&e.network==="http"?[e.server]:e.server),["vmess","vless"].includes(e.type)&&e.network==="http"){let n=e[`${e.network}-opts`]?.path,a=e[`${e.network}-opts`]?.headers?.Host;a&&!Array.isArray(a)&&(e[`${e.network}-opts`].headers.Host=[a]),n&&!Array.isArray(n)&&(e[`${e.network}-opts`].path=[n])}if(e.tls&&!e.sni&&($p(e.server)||(e.sni=e.server),!e.sni&&e.network)){let n=e[`${e.network}-opts`]?.headers?.Host;n=Array.isArray(n)?n[0]:n,n&&(e.sni=n)}if(e.ports?e.ports=String(e.ports).replace(/\//g,","):delete e.ports,["hysteria2"].includes(e.type)&&e.obfs&&!["salamander"].includes(e.obfs)&&!e["obfs-password"]&&(e["obfs-password"]=e.obfs,e.obfs="salamander"),["hysteria2"].includes(e.type)&&!e["obfs-password"]&&e.obfs_password&&(e["obfs-password"]=e.obfs_password,delete e.obfs_password),["vless"].includes(e.type)&&(e["reality-opts"]&&Object.keys(e["reality-opts"]).length===0&&delete e["reality-opts"],e["grpc-opts"]&&Object.keys(e["grpc-opts"]).length===0&&delete e["grpc-opts"],!e["reality-opts"]&&!e.flow&&delete e.flow,["http"].includes(e.network)&&(e[`${e.network}-opts`]?.path||(e[`${e.network}-opts`]||(e[`${e.network}-opts`]={}),e[`${e.network}-opts`].path=["/"]))),typeof e.name!="string")if(/^\d+$/.test(e.name))e.name=`${e.name}`;else try{e.name?.data?e.name=fl.Buffer.from(e.name.data).toString("utf8"):e.name=fl.Buffer.from(e.name).toString("utf8")}catch(n){Wt.error(`proxy.name decode failed
Reason: ${n}`),e.name=`${e.type} ${e.server}:${e.port}`}["ws","http","h2"].includes(e.network)&&(["ws","h2"].includes(e.network)&&!e[`${e.network}-opts`]?.path?(e[`${e.network}-opts`]=e[`${e.network}-opts`]||{},e[`${e.network}-opts`].path="/"):e.network==="http"&&(!Array.isArray(e[`${e.network}-opts`]?.path)||e[`${e.network}-opts`]?.path.every(n=>!n))&&(e[`${e.network}-opts`]=e[`${e.network}-opts`]||{},e[`${e.network}-opts`].path=["/"])),["","off"].includes(e.sni)&&(e["disable-sni"]=!0);let r=e.ca_str;e["ca-str"]?r=e["ca-str"]:r&&(delete e.ca_str,e["ca-str"]=r);try{Wt.env.isNode&&!r&&e._ca&&(r=Wt.node.fs.readFileSync(e._ca,{encoding:"utf8"}))}catch(n){Wt.error(`Read ca file failed
Reason: ${n}`)}return!e["tls-fingerprint"]&&r&&(e["tls-fingerprint"]=m1.generateFingerprint(r)),["ss"].includes(e.type)&&we(e,"shadow-tls-password")&&(e.plugin="shadow-tls",e["plugin-opts"]={host:e["shadow-tls-sni"],password:e["shadow-tls-password"],version:e["shadow-tls-version"]},delete e["shadow-tls-sni"],delete e["shadow-tls-password"],delete e["shadow-tls-version"]),e}function $p(e){return zn(e)||En(e)}async function tm(e,t){let r=await fetch(e,{method:"GET",headers:{"User-Agent":t,Accept:"text/plain,application/yaml,application/json,*/*"}});if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);let n=Object.fromEntries(r.headers.entries()),a=v3(r.headers);a&&(n["content-disposition"]=a);let u=await r.text();return{status:r.status,headers:n,data:Rp(u)}}function v3(e){let t=e.get("content-disposition");if(!t)return null;let r=t.match(/filename\*?=["']?(?:UTF-8'')?([^;"']+)["']?/i)||t.match(/filename=["']?([^;"']+)["']?/i);if(!r)return null;let n=r[1].trim();if(!/[^\x00-\x7F]/.test(n))return t;let u="download.yaml",i=encodeURIComponent(n);return`attachment; filename="${u}"; filename*=UTF-8''${i}`}function Rp(e){try{return aa(e,{maxAliasCount:-1,merge:!0})}catch{return e}}async function kp(e,t){if(!e||e.length===0)throw new Error("\u8F93\u5165\u8282\u70B9\u6570\u7EC4\u4E0D\u80FD\u4E3A\u7A7A");let r={data:{},headers:[]},n=await Promise.all(e.map(a=>m3(a,t)));return w3(r,n),r}async function m3(e,t){let r=null,n=[],a={};if(/^https?:\/\//i.test(e)){let i=await tm(e,"clash.mate");a=i?.headers??{},r=i?.data??i}r.proxies?r=lo.produce(r.proxies,t):(dh(r)?n=lo.parse(r):n=r.split(`
`).map(i=>lo.parse(i)),r=lo.produce(n,t));try{r=Rp(r),typeof r=="string"&&(r=JSON.parse(r))}catch{r=r}return{data:r,headers:a}}function w3(e,t){let r=[],n=[];if(t.forEach(({data:a,headers:u})=>{dh(a)&&r.push(a);for(let i of Object.keys(a))if(Array.isArray(a[i])){e.data[i]=e.data[i]||[];for(let c of a[i]){if(c&&typeof c=="object"&&"name"in c){let l=c.name,m=l,E=1;for(;e.data[i].some(b=>b.name===m);)m=`${l}_${E++}`;c.name=m}e.data[i].push(c)}}else e.data[i]=a[i];u&&Object.keys(u).length&&n.push(u)}),n.length>0){let a=Math.floor(Math.random()*n.length);e.headers=n[a]}if(r.length>0){let a="";for(let u of r){let i=u0(u);a+=i+`
`}e.data=a0(a)}}var sI={async fetch(e){try{let t=new URL(e.url),r=t.searchParams.get("target"),n=t.searchParams.get("url"),a=n?n.split(/[,|]/):[];if(/meta|clash.meta|clash|clashverge|mihomo/i.test(r)&&(r="mihomo"),/singbox|sing-box|sfa/i.test(r)&&(r="singbox"),!r||a.length===0)return b3();let u=await kp(a,r),i=u.data;return typeof i=="object"&&(i=JSON.stringify(i)),new Response(i,{status:200,headers:u.headers})}catch(t){return new Response(`Error: ${t.message}`,{status:500})}}};function b3(){return new Response(JSON.stringify({version:"SubStore v2.20.16",message:"\u8FD9\u662F\u4E00\u4E2A\u57FA\u4E8E cloudflare pagers \u7684 sub-store \u8282\u70B9\u8F6C\u6362\u5DE5\u5177\uFF0C\u4EC5\u8F6C\u6362\u8282\u70B9\u7528",usage:{target:"\u8F93\u51FA\u7C7B\u578B\uFF1A{singbox|mihomo|v2ray|base64|qx|QX|QuantumultX|surge|Surge|SurgeMac|Loon|Clash|meta|clashmeta|clash.meta|Clash.Meta|ClashMeta|Mihomo|uri|URI|json|JSON|stash|Stash|shadowrocket|Shadowrocket|ShadowRocket|surfboard|Surfboard|egern|Egern}",url:"\u8F93\u5165\u7F16\u7801\u540E\u7684\u8BA2\u9605\u94FE\u63A5\uFF0C\u591A\u4E2A\u8BA2\u9605\u53EF\u7528\u82F1\u6587\u9017\u53F7(,)\u5206\u9694",example:"/?target=v2ray&url=UrlEncode(\u7F16\u7801\u540E\u7684\u8BA2\u9605)",examples:["/?target=v2ray&url=https%3A%2F%2Fexample.com%2Fsubscription","/?target=clash&url=https%3A%2F%2Fexample.com%2Fsub1,https%3A%2F%2Fexample.com%2Fsub1"]},notes:["\u6240\u6709\u8BA2\u9605\u94FE\u63A5\u5FC5\u987B\u8FDB\u884CURL\u7F16\u7801\u5904\u7406","\u591A\u4E2A\u8BA2\u9605\u94FE\u63A5\u4F7F\u7528\u82F1\u6587\u9017\u53F7\u5206\u9694\uFF0C\u4E0D\u8981\u6DFB\u52A0\u7A7A\u683C"]},null,4),{status:200,headers:{"Content-Type":"application/json"}})}export{sI as default};
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

jsrsasign/lib/jsrsasign.js:
  (*! CryptoJS v3.1.2 core-fix.js
   * code.google.com/p/crypto-js
   * (c) 2009-2013 by Jeff Mott. All rights reserved.
   * code.google.com/p/crypto-js/wiki/License
   * THIS IS FIX of 'core.js' to fix Hmac issue.
   * https://code.google.com/p/crypto-js/issues/detail?id=84
   * https://crypto-js.googlecode.com/svn-history/r667/branches/3.x/src/core.js
   *)
  (*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
   *)
  (*! (c) Tom Wu, Kenji Urushima | http://www-cs-students.stanford.edu/~tjw/jsbn/
   *)
  (*! (c) Stefan Thomas | https://github.com/bitcoinjs/bitcoinjs-lib
   *)
  (*! Mike Samuel (c) 2009 | code.google.com/p/json-sans-eval
   *)

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
