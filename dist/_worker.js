var RE=Object.create;var _0=Object.defineProperty;var $E=Object.getOwnPropertyDescriptor;var kE=Object.getOwnPropertyNames;var xE=Object.getPrototypeOf,TE=Object.prototype.hasOwnProperty;var jc=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(r,s)=>(typeof require<"u"?require:r)[s]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var ot=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports);var OE=(t,r,s,a)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of kE(r))!TE.call(t,o)&&o!==s&&_0(t,o,{get:()=>r[o],enumerable:!(a=$E(r,o))||a.enumerable});return t};var Si=(t,r,s)=>(s=t!=null?RE(xE(t)):{},OE(r||!t||!t.__esModule?_0(s,"default",{value:t,enumerable:!0}):s,t));var q0=ot(qc=>{"use strict";qc.byteLength=WE;qc.toByteArray=JE;qc.fromByteArray=QE;var ji=[],hi=[],GE=typeof Uint8Array<"u"?Uint8Array:Array,Fh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(ga=0,U0=Fh.length;ga<U0;++ga)ji[ga]=Fh[ga],hi[Fh.charCodeAt(ga)]=ga;var ga,U0;hi[45]=62;hi[95]=63;function M0(t){var r=t.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=t.indexOf("=");s===-1&&(s=r);var a=s===r?0:4-s%4;return[s,a]}function WE(t){var r=M0(t),s=r[0],a=r[1];return(s+a)*3/4-a}function YE(t,r,s){return(r+s)*3/4-s}function JE(t){var r,s=M0(t),a=s[0],o=s[1],c=new GE(YE(t,a,o)),u=0,h=o>0?a-4:a,d;for(d=0;d<h;d+=4)r=hi[t.charCodeAt(d)]<<18|hi[t.charCodeAt(d+1)]<<12|hi[t.charCodeAt(d+2)]<<6|hi[t.charCodeAt(d+3)],c[u++]=r>>16&255,c[u++]=r>>8&255,c[u++]=r&255;return o===2&&(r=hi[t.charCodeAt(d)]<<2|hi[t.charCodeAt(d+1)]>>4,c[u++]=r&255),o===1&&(r=hi[t.charCodeAt(d)]<<10|hi[t.charCodeAt(d+1)]<<4|hi[t.charCodeAt(d+2)]>>2,c[u++]=r>>8&255,c[u++]=r&255),c}function XE(t){return ji[t>>18&63]+ji[t>>12&63]+ji[t>>6&63]+ji[t&63]}function ZE(t,r,s){for(var a,o=[],c=r;c<s;c+=3)a=(t[c]<<16&16711680)+(t[c+1]<<8&65280)+(t[c+2]&255),o.push(XE(a));return o.join("")}function QE(t){for(var r,s=t.length,a=s%3,o=[],c=16383,u=0,h=s-a;u<h;u+=c)o.push(ZE(t,u,u+c>h?h:u+c));return a===1?(r=t[s-1],o.push(ji[r>>2]+ji[r<<4&63]+"==")):a===2&&(r=(t[s-2]<<8)+t[s-1],o.push(ji[r>>10]+ji[r>>4&63]+ji[r<<2&63]+"=")),o.join("")}});var V0=ot(Ch=>{Ch.read=function(t,r,s,a,o){var c,u,h=o*8-a-1,d=(1<<h)-1,f=d>>1,b=-7,A=s?o-1:0,g=s?-1:1,v=t[r+A];for(A+=g,c=v&(1<<-b)-1,v>>=-b,b+=h;b>0;c=c*256+t[r+A],A+=g,b-=8);for(u=c&(1<<-b)-1,c>>=-b,b+=a;b>0;u=u*256+t[r+A],A+=g,b-=8);if(c===0)c=1-f;else{if(c===d)return u?NaN:(v?-1:1)*(1/0);u=u+Math.pow(2,a),c=c-f}return(v?-1:1)*u*Math.pow(2,c-a)};Ch.write=function(t,r,s,a,o,c){var u,h,d,f=c*8-o-1,b=(1<<f)-1,A=b>>1,g=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=a?0:c-1,y=a?1:-1,m=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(h=isNaN(r)?1:0,u=b):(u=Math.floor(Math.log(r)/Math.LN2),r*(d=Math.pow(2,-u))<1&&(u--,d*=2),u+A>=1?r+=g/d:r+=g*Math.pow(2,1-A),r*d>=2&&(u++,d/=2),u+A>=b?(h=0,u=b):u+A>=1?(h=(r*d-1)*Math.pow(2,o),u=u+A):(h=r*Math.pow(2,A-1)*Math.pow(2,o),u=0));o>=8;t[s+v]=h&255,v+=y,h/=256,o-=8);for(u=u<<o|h,f+=o;f>0;t[s+v]=u&255,v+=y,u/=256,f-=8);t[s+v-y]|=m*128}});var u1=ot(su=>{"use strict";var Ih=q0(),nu=V0(),K0=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;su.Buffer=ge;su.SlowBuffer=sA;su.INSPECT_MAX_BYTES=50;var Vc=2147483647;su.kMaxLength=Vc;ge.TYPED_ARRAY_SUPPORT=eA();!ge.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function eA(){try{let t=new Uint8Array(1),r={foo:function(){return 42}};return Object.setPrototypeOf(r,Uint8Array.prototype),Object.setPrototypeOf(t,r),t.foo()===42}catch{return!1}}Object.defineProperty(ge.prototype,"parent",{enumerable:!0,get:function(){if(ge.isBuffer(this))return this.buffer}});Object.defineProperty(ge.prototype,"offset",{enumerable:!0,get:function(){if(ge.isBuffer(this))return this.byteOffset}});function ms(t){if(t>Vc)throw new RangeError('The value "'+t+'" is invalid for option "size"');let r=new Uint8Array(t);return Object.setPrototypeOf(r,ge.prototype),r}function ge(t,r,s){if(typeof t=="number"){if(typeof r=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return $h(t)}return Y0(t,r,s)}ge.poolSize=8192;function Y0(t,r,s){if(typeof t=="string")return rA(t,r);if(ArrayBuffer.isView(t))return nA(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Ui(t,ArrayBuffer)||t&&Ui(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ui(t,SharedArrayBuffer)||t&&Ui(t.buffer,SharedArrayBuffer)))return Bh(t,r,s);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let a=t.valueOf&&t.valueOf();if(a!=null&&a!==t)return ge.from(a,r,s);let o=iA(t);if(o)return o;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return ge.from(t[Symbol.toPrimitive]("string"),r,s);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}ge.from=function(t,r,s){return Y0(t,r,s)};Object.setPrototypeOf(ge.prototype,Uint8Array.prototype);Object.setPrototypeOf(ge,Uint8Array);function J0(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function tA(t,r,s){return J0(t),t<=0?ms(t):r!==void 0?typeof s=="string"?ms(t).fill(r,s):ms(t).fill(r):ms(t)}ge.alloc=function(t,r,s){return tA(t,r,s)};function $h(t){return J0(t),ms(t<0?0:kh(t)|0)}ge.allocUnsafe=function(t){return $h(t)};ge.allocUnsafeSlow=function(t){return $h(t)};function rA(t,r){if((typeof r!="string"||r==="")&&(r="utf8"),!ge.isEncoding(r))throw new TypeError("Unknown encoding: "+r);let s=X0(t,r)|0,a=ms(s),o=a.write(t,r);return o!==s&&(a=a.slice(0,o)),a}function Ph(t){let r=t.length<0?0:kh(t.length)|0,s=ms(r);for(let a=0;a<r;a+=1)s[a]=t[a]&255;return s}function nA(t){if(Ui(t,Uint8Array)){let r=new Uint8Array(t);return Bh(r.buffer,r.byteOffset,r.byteLength)}return Ph(t)}function Bh(t,r,s){if(r<0||t.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<r+(s||0))throw new RangeError('"length" is outside of buffer bounds');let a;return r===void 0&&s===void 0?a=new Uint8Array(t):s===void 0?a=new Uint8Array(t,r):a=new Uint8Array(t,r,s),Object.setPrototypeOf(a,ge.prototype),a}function iA(t){if(ge.isBuffer(t)){let r=kh(t.length)|0,s=ms(r);return s.length===0||t.copy(s,0,0,r),s}if(t.length!==void 0)return typeof t.length!="number"||Th(t.length)?ms(0):Ph(t);if(t.type==="Buffer"&&Array.isArray(t.data))return Ph(t.data)}function kh(t){if(t>=Vc)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Vc.toString(16)+" bytes");return t|0}function sA(t){return+t!=t&&(t=0),ge.alloc(+t)}ge.isBuffer=function(r){return r!=null&&r._isBuffer===!0&&r!==ge.prototype};ge.compare=function(r,s){if(Ui(r,Uint8Array)&&(r=ge.from(r,r.offset,r.byteLength)),Ui(s,Uint8Array)&&(s=ge.from(s,s.offset,s.byteLength)),!ge.isBuffer(r)||!ge.isBuffer(s))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===s)return 0;let a=r.length,o=s.length;for(let c=0,u=Math.min(a,o);c<u;++c)if(r[c]!==s[c]){a=r[c],o=s[c];break}return a<o?-1:o<a?1:0};ge.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};ge.concat=function(r,s){if(!Array.isArray(r))throw new TypeError('"list" argument must be an Array of Buffers');if(r.length===0)return ge.alloc(0);let a;if(s===void 0)for(s=0,a=0;a<r.length;++a)s+=r[a].length;let o=ge.allocUnsafe(s),c=0;for(a=0;a<r.length;++a){let u=r[a];if(Ui(u,Uint8Array))c+u.length>o.length?(ge.isBuffer(u)||(u=ge.from(u)),u.copy(o,c)):Uint8Array.prototype.set.call(o,u,c);else if(ge.isBuffer(u))u.copy(o,c);else throw new TypeError('"list" argument must be an Array of Buffers');c+=u.length}return o};function X0(t,r){if(ge.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Ui(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let s=t.length,a=arguments.length>2&&arguments[2]===!0;if(!a&&s===0)return 0;let o=!1;for(;;)switch(r){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":return Rh(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s*2;case"hex":return s>>>1;case"base64":return a1(t).length;default:if(o)return a?-1:Rh(t).length;r=(""+r).toLowerCase(),o=!0}}ge.byteLength=X0;function aA(t,r,s){let a=!1;if((r===void 0||r<0)&&(r=0),r>this.length||((s===void 0||s>this.length)&&(s=this.length),s<=0)||(s>>>=0,r>>>=0,s<=r))return"";for(t||(t="utf8");;)switch(t){case"hex":return vA(this,r,s);case"utf8":case"utf-8":return Q0(this,r,s);case"ascii":return dA(this,r,s);case"latin1":case"binary":return gA(this,r,s);case"base64":return hA(this,r,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return mA(this,r,s);default:if(a)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),a=!0}}ge.prototype._isBuffer=!0;function va(t,r,s){let a=t[r];t[r]=t[s],t[s]=a}ge.prototype.swap16=function(){let r=this.length;if(r%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let s=0;s<r;s+=2)va(this,s,s+1);return this};ge.prototype.swap32=function(){let r=this.length;if(r%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let s=0;s<r;s+=4)va(this,s,s+3),va(this,s+1,s+2);return this};ge.prototype.swap64=function(){let r=this.length;if(r%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let s=0;s<r;s+=8)va(this,s,s+7),va(this,s+1,s+6),va(this,s+2,s+5),va(this,s+3,s+4);return this};ge.prototype.toString=function(){let r=this.length;return r===0?"":arguments.length===0?Q0(this,0,r):aA.apply(this,arguments)};ge.prototype.toLocaleString=ge.prototype.toString;ge.prototype.equals=function(r){if(!ge.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r?!0:ge.compare(this,r)===0};ge.prototype.inspect=function(){let r="",s=su.INSPECT_MAX_BYTES;return r=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(r+=" ... "),"<Buffer "+r+">"};K0&&(ge.prototype[K0]=ge.prototype.inspect);ge.prototype.compare=function(r,s,a,o,c){if(Ui(r,Uint8Array)&&(r=ge.from(r,r.offset,r.byteLength)),!ge.isBuffer(r))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof r);if(s===void 0&&(s=0),a===void 0&&(a=r?r.length:0),o===void 0&&(o=0),c===void 0&&(c=this.length),s<0||a>r.length||o<0||c>this.length)throw new RangeError("out of range index");if(o>=c&&s>=a)return 0;if(o>=c)return-1;if(s>=a)return 1;if(s>>>=0,a>>>=0,o>>>=0,c>>>=0,this===r)return 0;let u=c-o,h=a-s,d=Math.min(u,h),f=this.slice(o,c),b=r.slice(s,a);for(let A=0;A<d;++A)if(f[A]!==b[A]){u=f[A],h=b[A];break}return u<h?-1:h<u?1:0};function Z0(t,r,s,a,o){if(t.length===0)return-1;if(typeof s=="string"?(a=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),s=+s,Th(s)&&(s=o?0:t.length-1),s<0&&(s=t.length+s),s>=t.length){if(o)return-1;s=t.length-1}else if(s<0)if(o)s=0;else return-1;if(typeof r=="string"&&(r=ge.from(r,a)),ge.isBuffer(r))return r.length===0?-1:z0(t,r,s,a,o);if(typeof r=="number")return r=r&255,typeof Uint8Array.prototype.indexOf=="function"?o?Uint8Array.prototype.indexOf.call(t,r,s):Uint8Array.prototype.lastIndexOf.call(t,r,s):z0(t,[r],s,a,o);throw new TypeError("val must be string, number or Buffer")}function z0(t,r,s,a,o){let c=1,u=t.length,h=r.length;if(a!==void 0&&(a=String(a).toLowerCase(),a==="ucs2"||a==="ucs-2"||a==="utf16le"||a==="utf-16le")){if(t.length<2||r.length<2)return-1;c=2,u/=2,h/=2,s/=2}function d(b,A){return c===1?b[A]:b.readUInt16BE(A*c)}let f;if(o){let b=-1;for(f=s;f<u;f++)if(d(t,f)===d(r,b===-1?0:f-b)){if(b===-1&&(b=f),f-b+1===h)return b*c}else b!==-1&&(f-=f-b),b=-1}else for(s+h>u&&(s=u-h),f=s;f>=0;f--){let b=!0;for(let A=0;A<h;A++)if(d(t,f+A)!==d(r,A)){b=!1;break}if(b)return f}return-1}ge.prototype.includes=function(r,s,a){return this.indexOf(r,s,a)!==-1};ge.prototype.indexOf=function(r,s,a){return Z0(this,r,s,a,!0)};ge.prototype.lastIndexOf=function(r,s,a){return Z0(this,r,s,a,!1)};function uA(t,r,s,a){s=Number(s)||0;let o=t.length-s;a?(a=Number(a),a>o&&(a=o)):a=o;let c=r.length;a>c/2&&(a=c/2);let u;for(u=0;u<a;++u){let h=parseInt(r.substr(u*2,2),16);if(Th(h))return u;t[s+u]=h}return u}function oA(t,r,s,a){return Kc(Rh(r,t.length-s),t,s,a)}function cA(t,r,s,a){return Kc(EA(r),t,s,a)}function lA(t,r,s,a){return Kc(a1(r),t,s,a)}function fA(t,r,s,a){return Kc(AA(r,t.length-s),t,s,a)}ge.prototype.write=function(r,s,a,o){if(s===void 0)o="utf8",a=this.length,s=0;else if(a===void 0&&typeof s=="string")o=s,a=this.length,s=0;else if(isFinite(s))s=s>>>0,isFinite(a)?(a=a>>>0,o===void 0&&(o="utf8")):(o=a,a=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let c=this.length-s;if((a===void 0||a>c)&&(a=c),r.length>0&&(a<0||s<0)||s>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");let u=!1;for(;;)switch(o){case"hex":return uA(this,r,s,a);case"utf8":case"utf-8":return oA(this,r,s,a);case"ascii":case"latin1":case"binary":return cA(this,r,s,a);case"base64":return lA(this,r,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fA(this,r,s,a);default:if(u)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),u=!0}};ge.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function hA(t,r,s){return r===0&&s===t.length?Ih.fromByteArray(t):Ih.fromByteArray(t.slice(r,s))}function Q0(t,r,s){s=Math.min(t.length,s);let a=[],o=r;for(;o<s;){let c=t[o],u=null,h=c>239?4:c>223?3:c>191?2:1;if(o+h<=s){let d,f,b,A;switch(h){case 1:c<128&&(u=c);break;case 2:d=t[o+1],(d&192)===128&&(A=(c&31)<<6|d&63,A>127&&(u=A));break;case 3:d=t[o+1],f=t[o+2],(d&192)===128&&(f&192)===128&&(A=(c&15)<<12|(d&63)<<6|f&63,A>2047&&(A<55296||A>57343)&&(u=A));break;case 4:d=t[o+1],f=t[o+2],b=t[o+3],(d&192)===128&&(f&192)===128&&(b&192)===128&&(A=(c&15)<<18|(d&63)<<12|(f&63)<<6|b&63,A>65535&&A<1114112&&(u=A))}}u===null?(u=65533,h=1):u>65535&&(u-=65536,a.push(u>>>10&1023|55296),u=56320|u&1023),a.push(u),o+=h}return pA(a)}var G0=4096;function pA(t){let r=t.length;if(r<=G0)return String.fromCharCode.apply(String,t);let s="",a=0;for(;a<r;)s+=String.fromCharCode.apply(String,t.slice(a,a+=G0));return s}function dA(t,r,s){let a="";s=Math.min(t.length,s);for(let o=r;o<s;++o)a+=String.fromCharCode(t[o]&127);return a}function gA(t,r,s){let a="";s=Math.min(t.length,s);for(let o=r;o<s;++o)a+=String.fromCharCode(t[o]);return a}function vA(t,r,s){let a=t.length;(!r||r<0)&&(r=0),(!s||s<0||s>a)&&(s=a);let o="";for(let c=r;c<s;++c)o+=yA[t[c]];return o}function mA(t,r,s){let a=t.slice(r,s),o="";for(let c=0;c<a.length-1;c+=2)o+=String.fromCharCode(a[c]+a[c+1]*256);return o}ge.prototype.slice=function(r,s){let a=this.length;r=~~r,s=s===void 0?a:~~s,r<0?(r+=a,r<0&&(r=0)):r>a&&(r=a),s<0?(s+=a,s<0&&(s=0)):s>a&&(s=a),s<r&&(s=r);let o=this.subarray(r,s);return Object.setPrototypeOf(o,ge.prototype),o};function Xr(t,r,s){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+r>s)throw new RangeError("Trying to access beyond buffer length")}ge.prototype.readUintLE=ge.prototype.readUIntLE=function(r,s,a){r=r>>>0,s=s>>>0,a||Xr(r,s,this.length);let o=this[r],c=1,u=0;for(;++u<s&&(c*=256);)o+=this[r+u]*c;return o};ge.prototype.readUintBE=ge.prototype.readUIntBE=function(r,s,a){r=r>>>0,s=s>>>0,a||Xr(r,s,this.length);let o=this[r+--s],c=1;for(;s>0&&(c*=256);)o+=this[r+--s]*c;return o};ge.prototype.readUint8=ge.prototype.readUInt8=function(r,s){return r=r>>>0,s||Xr(r,1,this.length),this[r]};ge.prototype.readUint16LE=ge.prototype.readUInt16LE=function(r,s){return r=r>>>0,s||Xr(r,2,this.length),this[r]|this[r+1]<<8};ge.prototype.readUint16BE=ge.prototype.readUInt16BE=function(r,s){return r=r>>>0,s||Xr(r,2,this.length),this[r]<<8|this[r+1]};ge.prototype.readUint32LE=ge.prototype.readUInt32LE=function(r,s){return r=r>>>0,s||Xr(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+this[r+3]*16777216};ge.prototype.readUint32BE=ge.prototype.readUInt32BE=function(r,s){return r=r>>>0,s||Xr(r,4,this.length),this[r]*16777216+(this[r+1]<<16|this[r+2]<<8|this[r+3])};ge.prototype.readBigUInt64LE=Ms(function(r){r=r>>>0,iu(r,"offset");let s=this[r],a=this[r+7];(s===void 0||a===void 0)&&fo(r,this.length-8);let o=s+this[++r]*2**8+this[++r]*2**16+this[++r]*2**24,c=this[++r]+this[++r]*2**8+this[++r]*2**16+a*2**24;return BigInt(o)+(BigInt(c)<<BigInt(32))});ge.prototype.readBigUInt64BE=Ms(function(r){r=r>>>0,iu(r,"offset");let s=this[r],a=this[r+7];(s===void 0||a===void 0)&&fo(r,this.length-8);let o=s*2**24+this[++r]*2**16+this[++r]*2**8+this[++r],c=this[++r]*2**24+this[++r]*2**16+this[++r]*2**8+a;return(BigInt(o)<<BigInt(32))+BigInt(c)});ge.prototype.readIntLE=function(r,s,a){r=r>>>0,s=s>>>0,a||Xr(r,s,this.length);let o=this[r],c=1,u=0;for(;++u<s&&(c*=256);)o+=this[r+u]*c;return c*=128,o>=c&&(o-=Math.pow(2,8*s)),o};ge.prototype.readIntBE=function(r,s,a){r=r>>>0,s=s>>>0,a||Xr(r,s,this.length);let o=s,c=1,u=this[r+--o];for(;o>0&&(c*=256);)u+=this[r+--o]*c;return c*=128,u>=c&&(u-=Math.pow(2,8*s)),u};ge.prototype.readInt8=function(r,s){return r=r>>>0,s||Xr(r,1,this.length),this[r]&128?(255-this[r]+1)*-1:this[r]};ge.prototype.readInt16LE=function(r,s){r=r>>>0,s||Xr(r,2,this.length);let a=this[r]|this[r+1]<<8;return a&32768?a|4294901760:a};ge.prototype.readInt16BE=function(r,s){r=r>>>0,s||Xr(r,2,this.length);let a=this[r+1]|this[r]<<8;return a&32768?a|4294901760:a};ge.prototype.readInt32LE=function(r,s){return r=r>>>0,s||Xr(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24};ge.prototype.readInt32BE=function(r,s){return r=r>>>0,s||Xr(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]};ge.prototype.readBigInt64LE=Ms(function(r){r=r>>>0,iu(r,"offset");let s=this[r],a=this[r+7];(s===void 0||a===void 0)&&fo(r,this.length-8);let o=this[r+4]+this[r+5]*2**8+this[r+6]*2**16+(a<<24);return(BigInt(o)<<BigInt(32))+BigInt(s+this[++r]*2**8+this[++r]*2**16+this[++r]*2**24)});ge.prototype.readBigInt64BE=Ms(function(r){r=r>>>0,iu(r,"offset");let s=this[r],a=this[r+7];(s===void 0||a===void 0)&&fo(r,this.length-8);let o=(s<<24)+this[++r]*2**16+this[++r]*2**8+this[++r];return(BigInt(o)<<BigInt(32))+BigInt(this[++r]*2**24+this[++r]*2**16+this[++r]*2**8+a)});ge.prototype.readFloatLE=function(r,s){return r=r>>>0,s||Xr(r,4,this.length),nu.read(this,r,!0,23,4)};ge.prototype.readFloatBE=function(r,s){return r=r>>>0,s||Xr(r,4,this.length),nu.read(this,r,!1,23,4)};ge.prototype.readDoubleLE=function(r,s){return r=r>>>0,s||Xr(r,8,this.length),nu.read(this,r,!0,52,8)};ge.prototype.readDoubleBE=function(r,s){return r=r>>>0,s||Xr(r,8,this.length),nu.read(this,r,!1,52,8)};function On(t,r,s,a,o,c){if(!ge.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>o||r<c)throw new RangeError('"value" argument is out of bounds');if(s+a>t.length)throw new RangeError("Index out of range")}ge.prototype.writeUintLE=ge.prototype.writeUIntLE=function(r,s,a,o){if(r=+r,s=s>>>0,a=a>>>0,!o){let h=Math.pow(2,8*a)-1;On(this,r,s,a,h,0)}let c=1,u=0;for(this[s]=r&255;++u<a&&(c*=256);)this[s+u]=r/c&255;return s+a};ge.prototype.writeUintBE=ge.prototype.writeUIntBE=function(r,s,a,o){if(r=+r,s=s>>>0,a=a>>>0,!o){let h=Math.pow(2,8*a)-1;On(this,r,s,a,h,0)}let c=a-1,u=1;for(this[s+c]=r&255;--c>=0&&(u*=256);)this[s+c]=r/u&255;return s+a};ge.prototype.writeUint8=ge.prototype.writeUInt8=function(r,s,a){return r=+r,s=s>>>0,a||On(this,r,s,1,255,0),this[s]=r&255,s+1};ge.prototype.writeUint16LE=ge.prototype.writeUInt16LE=function(r,s,a){return r=+r,s=s>>>0,a||On(this,r,s,2,65535,0),this[s]=r&255,this[s+1]=r>>>8,s+2};ge.prototype.writeUint16BE=ge.prototype.writeUInt16BE=function(r,s,a){return r=+r,s=s>>>0,a||On(this,r,s,2,65535,0),this[s]=r>>>8,this[s+1]=r&255,s+2};ge.prototype.writeUint32LE=ge.prototype.writeUInt32LE=function(r,s,a){return r=+r,s=s>>>0,a||On(this,r,s,4,4294967295,0),this[s+3]=r>>>24,this[s+2]=r>>>16,this[s+1]=r>>>8,this[s]=r&255,s+4};ge.prototype.writeUint32BE=ge.prototype.writeUInt32BE=function(r,s,a){return r=+r,s=s>>>0,a||On(this,r,s,4,4294967295,0),this[s]=r>>>24,this[s+1]=r>>>16,this[s+2]=r>>>8,this[s+3]=r&255,s+4};function e1(t,r,s,a,o){s1(r,a,o,t,s,7);let c=Number(r&BigInt(4294967295));t[s++]=c,c=c>>8,t[s++]=c,c=c>>8,t[s++]=c,c=c>>8,t[s++]=c;let u=Number(r>>BigInt(32)&BigInt(4294967295));return t[s++]=u,u=u>>8,t[s++]=u,u=u>>8,t[s++]=u,u=u>>8,t[s++]=u,s}function t1(t,r,s,a,o){s1(r,a,o,t,s,7);let c=Number(r&BigInt(4294967295));t[s+7]=c,c=c>>8,t[s+6]=c,c=c>>8,t[s+5]=c,c=c>>8,t[s+4]=c;let u=Number(r>>BigInt(32)&BigInt(4294967295));return t[s+3]=u,u=u>>8,t[s+2]=u,u=u>>8,t[s+1]=u,u=u>>8,t[s]=u,s+8}ge.prototype.writeBigUInt64LE=Ms(function(r,s=0){return e1(this,r,s,BigInt(0),BigInt("0xffffffffffffffff"))});ge.prototype.writeBigUInt64BE=Ms(function(r,s=0){return t1(this,r,s,BigInt(0),BigInt("0xffffffffffffffff"))});ge.prototype.writeIntLE=function(r,s,a,o){if(r=+r,s=s>>>0,!o){let d=Math.pow(2,8*a-1);On(this,r,s,a,d-1,-d)}let c=0,u=1,h=0;for(this[s]=r&255;++c<a&&(u*=256);)r<0&&h===0&&this[s+c-1]!==0&&(h=1),this[s+c]=(r/u>>0)-h&255;return s+a};ge.prototype.writeIntBE=function(r,s,a,o){if(r=+r,s=s>>>0,!o){let d=Math.pow(2,8*a-1);On(this,r,s,a,d-1,-d)}let c=a-1,u=1,h=0;for(this[s+c]=r&255;--c>=0&&(u*=256);)r<0&&h===0&&this[s+c+1]!==0&&(h=1),this[s+c]=(r/u>>0)-h&255;return s+a};ge.prototype.writeInt8=function(r,s,a){return r=+r,s=s>>>0,a||On(this,r,s,1,127,-128),r<0&&(r=255+r+1),this[s]=r&255,s+1};ge.prototype.writeInt16LE=function(r,s,a){return r=+r,s=s>>>0,a||On(this,r,s,2,32767,-32768),this[s]=r&255,this[s+1]=r>>>8,s+2};ge.prototype.writeInt16BE=function(r,s,a){return r=+r,s=s>>>0,a||On(this,r,s,2,32767,-32768),this[s]=r>>>8,this[s+1]=r&255,s+2};ge.prototype.writeInt32LE=function(r,s,a){return r=+r,s=s>>>0,a||On(this,r,s,4,2147483647,-2147483648),this[s]=r&255,this[s+1]=r>>>8,this[s+2]=r>>>16,this[s+3]=r>>>24,s+4};ge.prototype.writeInt32BE=function(r,s,a){return r=+r,s=s>>>0,a||On(this,r,s,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),this[s]=r>>>24,this[s+1]=r>>>16,this[s+2]=r>>>8,this[s+3]=r&255,s+4};ge.prototype.writeBigInt64LE=Ms(function(r,s=0){return e1(this,r,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});ge.prototype.writeBigInt64BE=Ms(function(r,s=0){return t1(this,r,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function r1(t,r,s,a,o,c){if(s+a>t.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("Index out of range")}function n1(t,r,s,a,o){return r=+r,s=s>>>0,o||r1(t,r,s,4,34028234663852886e22,-34028234663852886e22),nu.write(t,r,s,a,23,4),s+4}ge.prototype.writeFloatLE=function(r,s,a){return n1(this,r,s,!0,a)};ge.prototype.writeFloatBE=function(r,s,a){return n1(this,r,s,!1,a)};function i1(t,r,s,a,o){return r=+r,s=s>>>0,o||r1(t,r,s,8,17976931348623157e292,-17976931348623157e292),nu.write(t,r,s,a,52,8),s+8}ge.prototype.writeDoubleLE=function(r,s,a){return i1(this,r,s,!0,a)};ge.prototype.writeDoubleBE=function(r,s,a){return i1(this,r,s,!1,a)};ge.prototype.copy=function(r,s,a,o){if(!ge.isBuffer(r))throw new TypeError("argument should be a Buffer");if(a||(a=0),!o&&o!==0&&(o=this.length),s>=r.length&&(s=r.length),s||(s=0),o>0&&o<a&&(o=a),o===a||r.length===0||this.length===0)return 0;if(s<0)throw new RangeError("targetStart out of bounds");if(a<0||a>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),r.length-s<o-a&&(o=r.length-s+a);let c=o-a;return this===r&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(s,a,o):Uint8Array.prototype.set.call(r,this.subarray(a,o),s),c};ge.prototype.fill=function(r,s,a,o){if(typeof r=="string"){if(typeof s=="string"?(o=s,s=0,a=this.length):typeof a=="string"&&(o=a,a=this.length),o!==void 0&&typeof o!="string")throw new TypeError("encoding must be a string");if(typeof o=="string"&&!ge.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(r.length===1){let u=r.charCodeAt(0);(o==="utf8"&&u<128||o==="latin1")&&(r=u)}}else typeof r=="number"?r=r&255:typeof r=="boolean"&&(r=Number(r));if(s<0||this.length<s||this.length<a)throw new RangeError("Out of range index");if(a<=s)return this;s=s>>>0,a=a===void 0?this.length:a>>>0,r||(r=0);let c;if(typeof r=="number")for(c=s;c<a;++c)this[c]=r;else{let u=ge.isBuffer(r)?r:ge.from(r,o),h=u.length;if(h===0)throw new TypeError('The value "'+r+'" is invalid for argument "value"');for(c=0;c<a-s;++c)this[c+s]=u[c%h]}return this};var ru={};function xh(t,r,s){ru[t]=class extends s{constructor(){super(),Object.defineProperty(this,"message",{value:r.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(o){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:o,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}xh("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);xh("ERR_INVALID_ARG_TYPE",function(t,r){return`The "${t}" argument must be of type number. Received type ${typeof r}`},TypeError);xh("ERR_OUT_OF_RANGE",function(t,r,s){let a=`The value of "${t}" is out of range.`,o=s;return Number.isInteger(s)&&Math.abs(s)>2**32?o=W0(String(s)):typeof s=="bigint"&&(o=String(s),(s>BigInt(2)**BigInt(32)||s<-(BigInt(2)**BigInt(32)))&&(o=W0(o)),o+="n"),a+=` It must be ${r}. Received ${o}`,a},RangeError);function W0(t){let r="",s=t.length,a=t[0]==="-"?1:0;for(;s>=a+4;s-=3)r=`_${t.slice(s-3,s)}${r}`;return`${t.slice(0,s)}${r}`}function wA(t,r,s){iu(r,"offset"),(t[r]===void 0||t[r+s]===void 0)&&fo(r,t.length-(s+1))}function s1(t,r,s,a,o,c){if(t>s||t<r){let u=typeof r=="bigint"?"n":"",h;throw c>3?r===0||r===BigInt(0)?h=`>= 0${u} and < 2${u} ** ${(c+1)*8}${u}`:h=`>= -(2${u} ** ${(c+1)*8-1}${u}) and < 2 ** ${(c+1)*8-1}${u}`:h=`>= ${r}${u} and <= ${s}${u}`,new ru.ERR_OUT_OF_RANGE("value",h,t)}wA(a,o,c)}function iu(t,r){if(typeof t!="number")throw new ru.ERR_INVALID_ARG_TYPE(r,"number",t)}function fo(t,r,s){throw Math.floor(t)!==t?(iu(t,s),new ru.ERR_OUT_OF_RANGE(s||"offset","an integer",t)):r<0?new ru.ERR_BUFFER_OUT_OF_BOUNDS:new ru.ERR_OUT_OF_RANGE(s||"offset",`>= ${s?1:0} and <= ${r}`,t)}var bA=/[^+/0-9A-Za-z-_]/g;function _A(t){if(t=t.split("=")[0],t=t.trim().replace(bA,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function Rh(t,r){r=r||1/0;let s,a=t.length,o=null,c=[];for(let u=0;u<a;++u){if(s=t.charCodeAt(u),s>55295&&s<57344){if(!o){if(s>56319){(r-=3)>-1&&c.push(239,191,189);continue}else if(u+1===a){(r-=3)>-1&&c.push(239,191,189);continue}o=s;continue}if(s<56320){(r-=3)>-1&&c.push(239,191,189),o=s;continue}s=(o-55296<<10|s-56320)+65536}else o&&(r-=3)>-1&&c.push(239,191,189);if(o=null,s<128){if((r-=1)<0)break;c.push(s)}else if(s<2048){if((r-=2)<0)break;c.push(s>>6|192,s&63|128)}else if(s<65536){if((r-=3)<0)break;c.push(s>>12|224,s>>6&63|128,s&63|128)}else if(s<1114112){if((r-=4)<0)break;c.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else throw new Error("Invalid code point")}return c}function EA(t){let r=[];for(let s=0;s<t.length;++s)r.push(t.charCodeAt(s)&255);return r}function AA(t,r){let s,a,o,c=[];for(let u=0;u<t.length&&!((r-=2)<0);++u)s=t.charCodeAt(u),a=s>>8,o=s%256,c.push(o),c.push(a);return c}function a1(t){return Ih.toByteArray(_A(t))}function Kc(t,r,s,a){let o;for(o=0;o<a&&!(o+s>=r.length||o>=t.length);++o)r[o+s]=t[o];return o}function Ui(t,r){return t instanceof r||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===r.name}function Th(t){return t!==t}var yA=(function(){let t="0123456789abcdef",r=new Array(256);for(let s=0;s<16;++s){let a=s*16;for(let o=0;o<16;++o)r[a+o]=t[s]+t[o]}return r})();function Ms(t){return typeof BigInt>"u"?SA:t}function SA(){throw new Error("BigInt not supported")}});var R1=ot(Be=>{var ho={};ho.userAgent=!1;var au={},DA="11.1.0",FA="jsrsasign(all) 11.1.0 (2024-02-01) (c) 2010-2023 Kenji Urushima | kjur.github.io/jsrsasign/license";var $e=$e||(function(t,r){var s={},a=s.lib={},o=a.Base=(function(){function v(){}return{extend:function(y){v.prototype=this;var m=new v;return y&&m.mixIn(y),m.hasOwnProperty("init")||(m.init=function(){m.$super.init.apply(this,arguments)}),m.init.prototype=m,m.$super=this,m},create:function(){var y=this.extend();return y.init.apply(y,arguments),y},init:function(){},mixIn:function(y){for(var m in y)y.hasOwnProperty(m)&&(this[m]=y[m]);y.hasOwnProperty("toString")&&(this.toString=y.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),c=a.WordArray=o.extend({init:function(v,y){v=this.words=v||[],y!=r?this.sigBytes=y:this.sigBytes=v.length*4},toString:function(v){return(v||h).stringify(this)},concat:function(v){var y=this.words,m=v.words,D=this.sigBytes,S=v.sigBytes;if(this.clamp(),D%4)for(var F=0;F<S;F++){var $=m[F>>>2]>>>24-F%4*8&255;y[D+F>>>2]|=$<<24-(D+F)%4*8}else for(var F=0;F<S;F+=4)y[D+F>>>2]=m[F>>>2];return this.sigBytes+=S,this},clamp:function(){var v=this.words,y=this.sigBytes;v[y>>>2]&=4294967295<<32-y%4*8,v.length=t.ceil(y/4)},clone:function(){var v=o.clone.call(this);return v.words=this.words.slice(0),v},random:function(v){for(var y=[],m=0;m<v;m+=4)y.push(t.random()*4294967296|0);return new c.init(y,v)}}),u=s.enc={},h=u.Hex={stringify:function(v){for(var y=v.words,m=v.sigBytes,D=[],S=0;S<m;S++){var F=y[S>>>2]>>>24-S%4*8&255;D.push((F>>>4).toString(16)),D.push((F&15).toString(16))}return D.join("")},parse:function(v){for(var y=v.length,m=[],D=0;D<y;D+=2)m[D>>>3]|=parseInt(v.substr(D,2),16)<<24-D%8*4;return new c.init(m,y/2)}},d=u.Latin1={stringify:function(v){for(var y=v.words,m=v.sigBytes,D=[],S=0;S<m;S++){var F=y[S>>>2]>>>24-S%4*8&255;D.push(String.fromCharCode(F))}return D.join("")},parse:function(v){for(var y=v.length,m=[],D=0;D<y;D++)m[D>>>2]|=(v.charCodeAt(D)&255)<<24-D%4*8;return new c.init(m,y)}},f=u.Utf8={stringify:function(v){try{return decodeURIComponent(escape(d.stringify(v)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(v){return d.parse(unescape(encodeURIComponent(v)))}},b=a.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(v){typeof v=="string"&&(v=f.parse(v)),this._data.concat(v),this._nDataBytes+=v.sigBytes},_process:function(v){var y=this._data,m=y.words,D=y.sigBytes,S=this.blockSize,F=S*4,$=D/F;v?$=t.ceil($):$=t.max(($|0)-this._minBufferSize,0);var k=$*S,O=t.min(k*4,D);if(k){for(var z=0;z<k;z+=S)this._doProcessBlock(m,z);var H=m.splice(0,k);y.sigBytes-=O}return new c.init(H,O)},clone:function(){var v=o.clone.call(this);return v._data=this._data.clone(),v},_minBufferSize:0}),A=a.Hasher=b.extend({cfg:o.extend(),init:function(v){this.cfg=this.cfg.extend(v),this.reset()},reset:function(){b.reset.call(this),this._doReset()},update:function(v){return this._append(v),this._process(),this},finalize:function(v){v&&this._append(v);var y=this._doFinalize();return y},blockSize:512/32,_createHelper:function(v){return function(y,m){return new v.init(m).finalize(y)}},_createHmacHelper:function(v){return function(y,m){return new g.HMAC.init(v,m).finalize(y)}}}),g=s.algo={};return s})(Math);(function(t){var o=$e,r=o.lib,s=r.Base,a=r.WordArray,o=o.x64={};o.Word=s.extend({init:function(c,u){this.high=c,this.low=u}}),o.WordArray=s.extend({init:function(c,u){c=this.words=c||[],this.sigBytes=u!=t?u:8*c.length},toX32:function(){for(var c=this.words,u=c.length,h=[],d=0;d<u;d++){var f=c[d];h.push(f.high),h.push(f.low)}return a.create(h,this.sigBytes)},clone:function(){for(var c=s.clone.call(this),u=c.words=this.words.slice(0),h=u.length,d=0;d<h;d++)u[d]=u[d].clone();return c}})})();$e.lib.Cipher||(function(t){var v=$e,r=v.lib,s=r.Base,a=r.WordArray,o=r.BufferedBlockAlgorithm,c=v.enc.Base64,u=v.algo.EvpKDF,h=r.Cipher=o.extend({cfg:s.extend(),createEncryptor:function(m,D){return this.create(this._ENC_XFORM_MODE,m,D)},createDecryptor:function(m,D){return this.create(this._DEC_XFORM_MODE,m,D)},init:function(m,D,S){this.cfg=this.cfg.extend(S),this._xformMode=m,this._key=D,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(m){return this._append(m),this._process()},finalize:function(m){return m&&this._append(m),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(m){return{encrypt:function(D,S,F){return(typeof S=="string"?y:g).encrypt(m,D,S,F)},decrypt:function(D,S,F){return(typeof S=="string"?y:g).decrypt(m,D,S,F)}}}});r.StreamCipher=h.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var A=v.mode={},d=function(m,D,S){var F=this._iv;F?this._iv=t:F=this._prevBlock;for(var $=0;$<S;$++)m[D+$]^=F[$]},f=(r.BlockCipherMode=s.extend({createEncryptor:function(m,D){return this.Encryptor.create(m,D)},createDecryptor:function(m,D){return this.Decryptor.create(m,D)},init:function(m,D){this._cipher=m,this._iv=D}})).extend();f.Encryptor=f.extend({processBlock:function(m,D){var S=this._cipher,F=S.blockSize;d.call(this,m,D,F),S.encryptBlock(m,D),this._prevBlock=m.slice(D,D+F)}}),f.Decryptor=f.extend({processBlock:function(m,D){var S=this._cipher,F=S.blockSize,$=m.slice(D,D+F);S.decryptBlock(m,D),d.call(this,m,D,F),this._prevBlock=$}}),A=A.CBC=f,f=(v.pad={}).Pkcs7={pad:function(m,D){for(var S=4*D,S=S-m.sigBytes%S,F=S<<24|S<<16|S<<8|S,$=[],k=0;k<S;k+=4)$.push(F);S=a.create($,S),m.concat(S)},unpad:function(m){m.sigBytes-=m.words[m.sigBytes-1>>>2]&255}},r.BlockCipher=h.extend({cfg:h.cfg.extend({mode:A,padding:f}),reset:function(){h.reset.call(this);var D=this.cfg,m=D.iv,D=D.mode;if(this._xformMode==this._ENC_XFORM_MODE)var S=D.createEncryptor;else S=D.createDecryptor,this._minBufferSize=1;this._mode=S.call(D,this,m&&m.words)},_doProcessBlock:function(m,D){this._mode.processBlock(m,D)},_doFinalize:function(){var m=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){m.pad(this._data,this.blockSize);var D=this._process(!0)}else D=this._process(!0),m.unpad(D);return D},blockSize:4});var b=r.CipherParams=s.extend({init:function(m){this.mixIn(m)},toString:function(m){return(m||this.formatter).stringify(this)}}),A=(v.format={}).OpenSSL={stringify:function(m){var D=m.ciphertext;return m=m.salt,(m?a.create([1398893684,1701076831]).concat(m).concat(D):D).toString(c)},parse:function(m){m=c.parse(m);var D=m.words;if(D[0]==1398893684&&D[1]==1701076831){var S=a.create(D.slice(2,4));D.splice(0,4),m.sigBytes-=16}return b.create({ciphertext:m,salt:S})}},g=r.SerializableCipher=s.extend({cfg:s.extend({format:A}),encrypt:function(m,D,S,F){F=this.cfg.extend(F);var $=m.createEncryptor(S,F);return D=$.finalize(D),$=$.cfg,b.create({ciphertext:D,key:S,iv:$.iv,algorithm:m,mode:$.mode,padding:$.padding,blockSize:m.blockSize,formatter:F.format})},decrypt:function(m,D,S,F){return F=this.cfg.extend(F),D=this._parse(D,F.format),m.createDecryptor(S,F).finalize(D.ciphertext)},_parse:function(m,D){return typeof m=="string"?D.parse(m,this):m}}),v=(v.kdf={}).OpenSSL={execute:function(m,D,S,F){return F||(F=a.random(8)),m=u.create({keySize:D+S}).compute(m,F),S=a.create(m.words.slice(D),4*S),m.sigBytes=4*D,b.create({key:m,iv:S,salt:F})}},y=r.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:v}),encrypt:function(m,D,S,F){return F=this.cfg.extend(F),S=F.kdf.execute(S,m.keySize,m.ivSize),F.iv=S.iv,m=g.encrypt.call(this,m,D,S.key,F),m.mixIn(S),m},decrypt:function(m,D,S,F){return F=this.cfg.extend(F),D=this._parse(D,F.format),S=F.kdf.execute(S,m.keySize,m.ivSize,D.salt),F.iv=S.iv,g.decrypt.call(this,m,D,S.key,F)}})})();(function(){for(var t=$e,r=t.lib.BlockCipher,z=t.algo,s=[],a=[],o=[],c=[],u=[],h=[],d=[],f=[],b=[],A=[],g=[],v=0;256>v;v++)g[v]=128>v?v<<1:v<<1^283;for(var y=0,m=0,v=0;256>v;v++){var D=m^m<<1^m<<2^m<<3^m<<4,D=D>>>8^D&255^99;s[y]=D,a[D]=y;var S=g[y],F=g[S],$=g[F],k=257*g[D]^16843008*D;o[y]=k<<24|k>>>8,c[y]=k<<16|k>>>16,u[y]=k<<8|k>>>24,h[y]=k,k=16843009*$^65537*F^257*S^16843008*y,d[D]=k<<24|k>>>8,f[D]=k<<16|k>>>16,b[D]=k<<8|k>>>24,A[D]=k,y?(y=S^g[g[g[$^S]]],m^=g[g[m]]):y=m=1}var O=[0,1,2,4,8,16,32,64,128,27,54],z=z.AES=r.extend({_doReset:function(){for(var R=this._key,H=R.words,P=R.sigBytes/4,R=4*((this._nRounds=P+6)+1),N=this._keySchedule=[],x=0;x<R;x++)if(x<P)N[x]=H[x];else{var V=N[x-1];x%P?6<P&&x%P==4&&(V=s[V>>>24]<<24|s[V>>>16&255]<<16|s[V>>>8&255]<<8|s[V&255]):(V=V<<8|V>>>24,V=s[V>>>24]<<24|s[V>>>16&255]<<16|s[V>>>8&255]<<8|s[V&255],V^=O[x/P|0]<<24),N[x]=N[x-P]^V}for(H=this._invKeySchedule=[],P=0;P<R;P++)x=R-P,V=P%4?N[x]:N[x-4],H[P]=4>P||4>=x?V:d[s[V>>>24]]^f[s[V>>>16&255]]^b[s[V>>>8&255]]^A[s[V&255]]},encryptBlock:function(H,P){this._doCryptBlock(H,P,this._keySchedule,o,c,u,h,s)},decryptBlock:function(H,P){var R=H[P+1];H[P+1]=H[P+3],H[P+3]=R,this._doCryptBlock(H,P,this._invKeySchedule,d,f,b,A,a),R=H[P+1],H[P+1]=H[P+3],H[P+3]=R},_doCryptBlock:function(H,P,R,N,x,V,Y,G){for(var W=this._nRounds,be=H[P]^R[0],Fe=H[P+1]^R[1],Pe=H[P+2]^R[2],oe=H[P+3]^R[3],Z=4,ae=1;ae<W;ae++)var He=N[be>>>24]^x[Fe>>>16&255]^V[Pe>>>8&255]^Y[oe&255]^R[Z++],Ie=N[Fe>>>24]^x[Pe>>>16&255]^V[oe>>>8&255]^Y[be&255]^R[Z++],J=N[Pe>>>24]^x[oe>>>16&255]^V[be>>>8&255]^Y[Fe&255]^R[Z++],oe=N[oe>>>24]^x[be>>>16&255]^V[Fe>>>8&255]^Y[Pe&255]^R[Z++],be=He,Fe=Ie,Pe=J;He=(G[be>>>24]<<24|G[Fe>>>16&255]<<16|G[Pe>>>8&255]<<8|G[oe&255])^R[Z++],Ie=(G[Fe>>>24]<<24|G[Pe>>>16&255]<<16|G[oe>>>8&255]<<8|G[be&255])^R[Z++],J=(G[Pe>>>24]<<24|G[oe>>>16&255]<<16|G[be>>>8&255]<<8|G[Fe&255])^R[Z++],oe=(G[oe>>>24]<<24|G[be>>>16&255]<<16|G[Fe>>>8&255]<<8|G[Pe&255])^R[Z++],H[P]=He,H[P+1]=Ie,H[P+2]=J,H[P+3]=oe},keySize:8});t.AES=r._createHelper(z)})();(function(){function t(g,v){var y=(this._lBlock>>>g^this._rBlock)&v;this._rBlock^=y,this._lBlock^=y<<g}function r(g,v){var y=(this._rBlock>>>g^this._lBlock)&v;this._lBlock^=y,this._rBlock^=y<<g}var s=$e,o=s.lib,a=o.WordArray,o=o.BlockCipher,c=s.algo,u=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],h=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],d=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],b=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],A=c.DES=o.extend({_doReset:function(){for(var g=this._key.words,v=[],y=0;56>y;y++){var m=u[y]-1;v[y]=g[m>>>5]>>>31-m%32&1}for(g=this._subKeys=[],m=0;16>m;m++){for(var D=g[m]=[],S=d[m],y=0;24>y;y++)D[y/6|0]|=v[(h[y]-1+S)%28]<<31-y%6,D[4+(y/6|0)]|=v[28+(h[y+24]-1+S)%28]<<31-y%6;for(D[0]=D[0]<<1|D[0]>>>31,y=1;7>y;y++)D[y]>>>=4*(y-1)+3;D[7]=D[7]<<5|D[7]>>>27}for(v=this._invSubKeys=[],y=0;16>y;y++)v[y]=g[15-y]},encryptBlock:function(g,v){this._doCryptBlock(g,v,this._subKeys)},decryptBlock:function(g,v){this._doCryptBlock(g,v,this._invSubKeys)},_doCryptBlock:function(g,v,y){this._lBlock=g[v],this._rBlock=g[v+1],t.call(this,4,252645135),t.call(this,16,65535),r.call(this,2,858993459),r.call(this,8,16711935),t.call(this,1,1431655765);for(var m=0;16>m;m++){for(var D=y[m],S=this._lBlock,F=this._rBlock,$=0,k=0;8>k;k++)$|=f[k][((F^D[k])&b[k])>>>0];this._lBlock=F,this._rBlock=S^$}y=this._lBlock,this._lBlock=this._rBlock,this._rBlock=y,t.call(this,1,1431655765),r.call(this,8,16711935),r.call(this,2,858993459),t.call(this,16,65535),t.call(this,4,252645135),g[v]=this._lBlock,g[v+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});s.DES=o._createHelper(A),c=c.TripleDES=o.extend({_doReset:function(){var g=this._key.words;this._des1=A.createEncryptor(a.create(g.slice(0,2))),this._des2=A.createEncryptor(a.create(g.slice(2,4))),this._des3=A.createEncryptor(a.create(g.slice(4,6)))},encryptBlock:function(g,v){this._des1.encryptBlock(g,v),this._des2.decryptBlock(g,v),this._des3.encryptBlock(g,v)},decryptBlock:function(g,v){this._des3.decryptBlock(g,v),this._des2.encryptBlock(g,v),this._des1.decryptBlock(g,v)},keySize:6,ivSize:2,blockSize:2}),s.TripleDES=o._createHelper(c)})();(function(){var t=$e,r=t.lib.WordArray;t.enc.Base64={stringify:function(s){var a=s.words,o=s.sigBytes,c=this._map;s.clamp(),s=[];for(var u=0;u<o;u+=3)for(var h=(a[u>>>2]>>>24-8*(u%4)&255)<<16|(a[u+1>>>2]>>>24-8*((u+1)%4)&255)<<8|a[u+2>>>2]>>>24-8*((u+2)%4)&255,d=0;4>d&&u+.75*d<o;d++)s.push(c.charAt(h>>>6*(3-d)&63));if(a=c.charAt(64))for(;s.length%4;)s.push(a);return s.join("")},parse:function(s){var a=s.length,o=this._map,c=o.charAt(64);c&&(c=s.indexOf(c),c!=-1&&(a=c));for(var c=[],u=0,h=0;h<a;h++)if(h%4){var d=o.indexOf(s.charAt(h-1))<<2*(h%4),f=o.indexOf(s.charAt(h))>>>6-2*(h%4);c[u>>>2]|=(d|f)<<24-8*(u%4),u++}return r.create(c,u)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(t){function r(A,g,v,y,m,D,S){return A=A+(g&v|~g&y)+m+S,(A<<D|A>>>32-D)+g}function s(A,g,v,y,m,D,S){return A=A+(g&y|v&~y)+m+S,(A<<D|A>>>32-D)+g}function a(A,g,v,y,m,D,S){return A=A+(g^v^y)+m+S,(A<<D|A>>>32-D)+g}function o(A,g,v,y,m,D,S){return A=A+(v^(g|~y))+m+S,(A<<D|A>>>32-D)+g}for(var c=$e,d=c.lib,u=d.WordArray,h=d.Hasher,d=c.algo,f=[],b=0;64>b;b++)f[b]=4294967296*t.abs(t.sin(b+1))|0;d=d.MD5=h.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(A,g){for(var v=0;16>v;v++){var y=g+v,m=A[y];A[y]=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360}var v=this._hash.words,y=A[g+0],m=A[g+1],D=A[g+2],S=A[g+3],F=A[g+4],$=A[g+5],k=A[g+6],O=A[g+7],z=A[g+8],H=A[g+9],P=A[g+10],R=A[g+11],N=A[g+12],x=A[g+13],V=A[g+14],Y=A[g+15],G=v[0],ae=v[1],Z=v[2],W=v[3],G=r(G,ae,Z,W,y,7,f[0]),W=r(W,G,ae,Z,m,12,f[1]),Z=r(Z,W,G,ae,D,17,f[2]),ae=r(ae,Z,W,G,S,22,f[3]),G=r(G,ae,Z,W,F,7,f[4]),W=r(W,G,ae,Z,$,12,f[5]),Z=r(Z,W,G,ae,k,17,f[6]),ae=r(ae,Z,W,G,O,22,f[7]),G=r(G,ae,Z,W,z,7,f[8]),W=r(W,G,ae,Z,H,12,f[9]),Z=r(Z,W,G,ae,P,17,f[10]),ae=r(ae,Z,W,G,R,22,f[11]),G=r(G,ae,Z,W,N,7,f[12]),W=r(W,G,ae,Z,x,12,f[13]),Z=r(Z,W,G,ae,V,17,f[14]),ae=r(ae,Z,W,G,Y,22,f[15]),G=s(G,ae,Z,W,m,5,f[16]),W=s(W,G,ae,Z,k,9,f[17]),Z=s(Z,W,G,ae,R,14,f[18]),ae=s(ae,Z,W,G,y,20,f[19]),G=s(G,ae,Z,W,$,5,f[20]),W=s(W,G,ae,Z,P,9,f[21]),Z=s(Z,W,G,ae,Y,14,f[22]),ae=s(ae,Z,W,G,F,20,f[23]),G=s(G,ae,Z,W,H,5,f[24]),W=s(W,G,ae,Z,V,9,f[25]),Z=s(Z,W,G,ae,S,14,f[26]),ae=s(ae,Z,W,G,z,20,f[27]),G=s(G,ae,Z,W,x,5,f[28]),W=s(W,G,ae,Z,D,9,f[29]),Z=s(Z,W,G,ae,O,14,f[30]),ae=s(ae,Z,W,G,N,20,f[31]),G=a(G,ae,Z,W,$,4,f[32]),W=a(W,G,ae,Z,z,11,f[33]),Z=a(Z,W,G,ae,R,16,f[34]),ae=a(ae,Z,W,G,V,23,f[35]),G=a(G,ae,Z,W,m,4,f[36]),W=a(W,G,ae,Z,F,11,f[37]),Z=a(Z,W,G,ae,O,16,f[38]),ae=a(ae,Z,W,G,P,23,f[39]),G=a(G,ae,Z,W,x,4,f[40]),W=a(W,G,ae,Z,y,11,f[41]),Z=a(Z,W,G,ae,S,16,f[42]),ae=a(ae,Z,W,G,k,23,f[43]),G=a(G,ae,Z,W,H,4,f[44]),W=a(W,G,ae,Z,N,11,f[45]),Z=a(Z,W,G,ae,Y,16,f[46]),ae=a(ae,Z,W,G,D,23,f[47]),G=o(G,ae,Z,W,y,6,f[48]),W=o(W,G,ae,Z,O,10,f[49]),Z=o(Z,W,G,ae,V,15,f[50]),ae=o(ae,Z,W,G,$,21,f[51]),G=o(G,ae,Z,W,N,6,f[52]),W=o(W,G,ae,Z,S,10,f[53]),Z=o(Z,W,G,ae,P,15,f[54]),ae=o(ae,Z,W,G,m,21,f[55]),G=o(G,ae,Z,W,z,6,f[56]),W=o(W,G,ae,Z,Y,10,f[57]),Z=o(Z,W,G,ae,k,15,f[58]),ae=o(ae,Z,W,G,x,21,f[59]),G=o(G,ae,Z,W,F,6,f[60]),W=o(W,G,ae,Z,R,10,f[61]),Z=o(Z,W,G,ae,D,15,f[62]),ae=o(ae,Z,W,G,H,21,f[63]);v[0]=v[0]+G|0,v[1]=v[1]+ae|0,v[2]=v[2]+Z|0,v[3]=v[3]+W|0},_doFinalize:function(){var A=this._data,g=A.words,v=8*this._nDataBytes,y=8*A.sigBytes;g[y>>>5]|=128<<24-y%32;var m=t.floor(v/4294967296);for(g[(y+64>>>9<<4)+15]=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,g[(y+64>>>9<<4)+14]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,A.sigBytes=4*(g.length+1),this._process(),A=this._hash,g=A.words,v=0;4>v;v++)y=g[v],g[v]=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360;return A},clone:function(){var A=h.clone.call(this);return A._hash=this._hash.clone(),A}}),c.MD5=h._createHelper(d),c.HmacMD5=h._createHmacHelper(d)})(Math);(function(){var t=$e,o=t.lib,r=o.WordArray,s=o.Hasher,a=[],o=t.algo.SHA1=s.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,u){for(var h=this._hash.words,d=h[0],f=h[1],b=h[2],A=h[3],g=h[4],v=0;80>v;v++){if(16>v)a[v]=c[u+v]|0;else{var y=a[v-3]^a[v-8]^a[v-14]^a[v-16];a[v]=y<<1|y>>>31}y=(d<<5|d>>>27)+g+a[v],y=20>v?y+((f&b|~f&A)+1518500249):40>v?y+((f^b^A)+1859775393):60>v?y+((f&b|f&A|b&A)-1894007588):y+((f^b^A)-899497514),g=A,A=b,b=f<<30|f>>>2,f=d,d=y}h[0]=h[0]+d|0,h[1]=h[1]+f|0,h[2]=h[2]+b|0,h[3]=h[3]+A|0,h[4]=h[4]+g|0},_doFinalize:function(){var c=this._data,u=c.words,h=8*this._nDataBytes,d=8*c.sigBytes;return u[d>>>5]|=128<<24-d%32,u[(d+64>>>9<<4)+14]=Math.floor(h/4294967296),u[(d+64>>>9<<4)+15]=h,c.sigBytes=4*u.length,this._process(),this._hash},clone:function(){var c=s.clone.call(this);return c._hash=this._hash.clone(),c}});t.SHA1=s._createHelper(o),t.HmacSHA1=s._createHmacHelper(o)})();(function(t){for(var r=$e,v=r.lib,s=v.WordArray,a=v.Hasher,v=r.algo,o=[],c=[],u=function(m){return 4294967296*(m-(m|0))|0},h=2,d=0;64>d;){var f;e:{f=h;for(var b=t.sqrt(f),A=2;A<=b;A++)if(!(f%A)){f=!1;break e}f=!0}f&&(8>d&&(o[d]=u(t.pow(h,.5))),c[d]=u(t.pow(h,1/3)),d++),h++}var g=[],v=v.SHA256=a.extend({_doReset:function(){this._hash=new s.init(o.slice(0))},_doProcessBlock:function(y,m){for(var D=this._hash.words,S=D[0],F=D[1],$=D[2],k=D[3],O=D[4],z=D[5],H=D[6],P=D[7],R=0;64>R;R++){if(16>R)g[R]=y[m+R]|0;else{var N=g[R-15],x=g[R-2];g[R]=((N<<25|N>>>7)^(N<<14|N>>>18)^N>>>3)+g[R-7]+((x<<15|x>>>17)^(x<<13|x>>>19)^x>>>10)+g[R-16]}N=P+((O<<26|O>>>6)^(O<<21|O>>>11)^(O<<7|O>>>25))+(O&z^~O&H)+c[R]+g[R],x=((S<<30|S>>>2)^(S<<19|S>>>13)^(S<<10|S>>>22))+(S&F^S&$^F&$),P=H,H=z,z=O,O=k+N|0,k=$,$=F,F=S,S=N+x|0}D[0]=D[0]+S|0,D[1]=D[1]+F|0,D[2]=D[2]+$|0,D[3]=D[3]+k|0,D[4]=D[4]+O|0,D[5]=D[5]+z|0,D[6]=D[6]+H|0,D[7]=D[7]+P|0},_doFinalize:function(){var y=this._data,m=y.words,D=8*this._nDataBytes,S=8*y.sigBytes;return m[S>>>5]|=128<<24-S%32,m[(S+64>>>9<<4)+14]=t.floor(D/4294967296),m[(S+64>>>9<<4)+15]=D,y.sigBytes=4*m.length,this._process(),this._hash},clone:function(){var y=a.clone.call(this);return y._hash=this._hash.clone(),y}});r.SHA256=a._createHelper(v),r.HmacSHA256=a._createHmacHelper(v)})(Math);(function(){var t=$e,r=t.lib.WordArray,a=t.algo,s=a.SHA256,a=a.SHA224=s.extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var o=s._doFinalize.call(this);return o.sigBytes-=4,o}});t.SHA224=s._createHelper(a),t.HmacSHA224=s._createHmacHelper(a)})();(function(){function t(){return a.create.apply(a,arguments)}for(var r=$e,s=r.lib.Hasher,c=r.x64,a=c.Word,o=c.WordArray,c=r.algo,u=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],h=[],d=0;80>d;d++)h[d]=t();c=c.SHA512=s.extend({_doReset:function(){this._hash=new o.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(f,b){for(var F=this._hash.words,A=F[0],g=F[1],v=F[2],y=F[3],m=F[4],D=F[5],S=F[6],F=F[7],$=A.high,k=A.low,O=g.high,z=g.low,H=v.high,P=v.low,R=y.high,N=y.low,x=m.high,V=m.low,Y=D.high,G=D.low,W=S.high,Z=S.low,ae=F.high,He=F.low,Ie=$,J=k,oe=O,be=z,Fe=H,Pe=P,_t=R,dt=N,ye=x,Je=V,Ye=Y,Xe=G,De=W,ke=Z,fe=ae,gt=He,Te=0;80>Te;Te++){var or=h[Te];if(16>Te)var xe=or.high=f[b+2*Te]|0,Re=or.low=f[b+2*Te+1]|0;else{var xe=h[Te-15],Re=xe.high,Oe=xe.low,xe=(Re>>>1|Oe<<31)^(Re>>>8|Oe<<24)^Re>>>7,Oe=(Oe>>>1|Re<<31)^(Oe>>>8|Re<<24)^(Oe>>>7|Re<<25),Ot=h[Te-2],Re=Ot.high,yt=Ot.low,Ot=(Re>>>19|yt<<13)^(Re<<3|yt>>>29)^Re>>>6,yt=(yt>>>19|Re<<13)^(yt<<3|Re>>>29)^(yt>>>6|Re<<26),Re=h[Te-7],ar=Re.high,_e=h[Te-16],qe=_e.high,_e=_e.low,Re=Oe+Re.low,xe=xe+ar+(Re>>>0<Oe>>>0?1:0),Re=Re+yt,xe=xe+Ot+(Re>>>0<yt>>>0?1:0),Re=Re+_e,xe=xe+qe+(Re>>>0<_e>>>0?1:0);or.high=xe,or.low=Re}var ar=ye&Ye^~ye&De,_e=Je&Xe^~Je&ke,or=Ie&oe^Ie&Fe^oe&Fe,qt=J&be^J&Pe^be&Pe,Oe=(Ie>>>28|J<<4)^(Ie<<30|J>>>2)^(Ie<<25|J>>>7),Ot=(J>>>28|Ie<<4)^(J<<30|Ie>>>2)^(J<<25|Ie>>>7),yt=u[Te],ur=yt.high,Kr=yt.low,yt=gt+((Je>>>14|ye<<18)^(Je>>>18|ye<<14)^(Je<<23|ye>>>9)),qe=fe+((ye>>>14|Je<<18)^(ye>>>18|Je<<14)^(ye<<23|Je>>>9))+(yt>>>0<gt>>>0?1:0),yt=yt+_e,qe=qe+ar+(yt>>>0<_e>>>0?1:0),yt=yt+Kr,qe=qe+ur+(yt>>>0<Kr>>>0?1:0),yt=yt+Re,qe=qe+xe+(yt>>>0<Re>>>0?1:0),Re=Ot+qt,or=Oe+or+(Re>>>0<Ot>>>0?1:0),fe=De,gt=ke,De=Ye,ke=Xe,Ye=ye,Xe=Je,Je=dt+yt|0,ye=_t+qe+(Je>>>0<dt>>>0?1:0)|0,_t=Fe,dt=Pe,Fe=oe,Pe=be,oe=Ie,be=J,J=yt+Re|0,Ie=qe+or+(J>>>0<yt>>>0?1:0)|0}k=A.low=k+J,A.high=$+Ie+(k>>>0<J>>>0?1:0),z=g.low=z+be,g.high=O+oe+(z>>>0<be>>>0?1:0),P=v.low=P+Pe,v.high=H+Fe+(P>>>0<Pe>>>0?1:0),N=y.low=N+dt,y.high=R+_t+(N>>>0<dt>>>0?1:0),V=m.low=V+Je,m.high=x+ye+(V>>>0<Je>>>0?1:0),G=D.low=G+Xe,D.high=Y+Ye+(G>>>0<Xe>>>0?1:0),Z=S.low=Z+ke,S.high=W+De+(Z>>>0<ke>>>0?1:0),He=F.low=He+gt,F.high=ae+fe+(He>>>0<gt>>>0?1:0)},_doFinalize:function(){var f=this._data,b=f.words,A=8*this._nDataBytes,g=8*f.sigBytes;return b[g>>>5]|=128<<24-g%32,b[(g+128>>>10<<5)+30]=Math.floor(A/4294967296),b[(g+128>>>10<<5)+31]=A,f.sigBytes=4*b.length,this._process(),this._hash.toX32()},clone:function(){var f=s.clone.call(this);return f._hash=this._hash.clone(),f},blockSize:32}),r.SHA512=s._createHelper(c),r.HmacSHA512=s._createHmacHelper(c)})();(function(){var t=$e,o=t.x64,r=o.Word,s=o.WordArray,o=t.algo,a=o.SHA512,o=o.SHA384=a.extend({_doReset:function(){this._hash=new s.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},_doFinalize:function(){var c=a._doFinalize.call(this);return c.sigBytes-=16,c}});t.SHA384=a._createHelper(o),t.HmacSHA384=a._createHmacHelper(o)})();(function(){var t=$e,f=t.lib,r=f.WordArray,s=f.Hasher,f=t.algo,a=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),o=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),u=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=r.create([0,1518500249,1859775393,2400959708,2840853838]),d=r.create([1352829926,1548603684,1836072691,2053994217,0]),f=f.RIPEMD160=s.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(b,A){for(var g=0;16>g;g++){var v=A+g,y=b[v];b[v]=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360}var v=this._hash.words,y=h.words,m=d.words,D=a.words,S=o.words,F=c.words,$=u.words,k,O,z,H,P,R,N,x,V,Y;R=k=v[0],N=O=v[1],x=z=v[2],V=H=v[3],Y=P=v[4];for(var G,g=0;80>g;g+=1)G=k+b[A+D[g]]|0,G=16>g?G+((O^z^H)+y[0]):32>g?G+((O&z|~O&H)+y[1]):48>g?G+(((O|~z)^H)+y[2]):64>g?G+((O&H|z&~H)+y[3]):G+((O^(z|~H))+y[4]),G|=0,G=G<<F[g]|G>>>32-F[g],G=G+P|0,k=P,P=H,H=z<<10|z>>>22,z=O,O=G,G=R+b[A+S[g]]|0,G=16>g?G+((N^(x|~V))+m[0]):32>g?G+((N&V|x&~V)+m[1]):48>g?G+(((N|~x)^V)+m[2]):64>g?G+((N&x|~N&V)+m[3]):G+((N^x^V)+m[4]),G|=0,G=G<<$[g]|G>>>32-$[g],G=G+Y|0,R=Y,Y=V,V=x<<10|x>>>22,x=N,N=G;G=v[1]+z+V|0,v[1]=v[2]+H+Y|0,v[2]=v[3]+P+R|0,v[3]=v[4]+k+N|0,v[4]=v[0]+O+x|0,v[0]=G},_doFinalize:function(){var b=this._data,A=b.words,g=8*this._nDataBytes,v=8*b.sigBytes;for(A[v>>>5]|=128<<24-v%32,A[(v+64>>>9<<4)+14]=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,b.sigBytes=4*(A.length+1),this._process(),b=this._hash,A=b.words,g=0;5>g;g++)v=A[g],A[g]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360;return b},clone:function(){var b=s.clone.call(this);return b._hash=this._hash.clone(),b}});t.RIPEMD160=s._createHelper(f),t.HmacRIPEMD160=s._createHmacHelper(f)})(Math);(function(){var t=$e,r=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(s,a){s=this._hasher=new s.init,typeof a=="string"&&(a=r.parse(a));var o=s.blockSize,c=4*o;a.sigBytes>c&&(a=s.finalize(a)),a.clamp();for(var u=this._oKey=a.clone(),h=this._iKey=a.clone(),d=u.words,f=h.words,b=0;b<o;b++)d[b]^=1549556828,f[b]^=909522486;u.sigBytes=h.sigBytes=c,this.reset()},reset:function(){var s=this._hasher;s.reset(),s.update(this._iKey)},update:function(s){return this._hasher.update(s),this},finalize:function(s){var a=this._hasher;return s=a.finalize(s),a.reset(),a.finalize(this._oKey.clone().concat(s))}})})();(function(){var t=$e,a=t.lib,r=a.Base,s=a.WordArray,a=t.algo,o=a.HMAC,c=a.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:a.SHA1,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,h){for(var y=this.cfg,d=o.create(y.hasher,u),f=s.create(),b=s.create([1]),A=f.words,g=b.words,v=y.keySize,y=y.iterations;A.length<v;){var m=d.update(h).finalize(b);d.reset();for(var D=m.words,S=D.length,F=m,$=1;$<y;$++){F=d.finalize(F),d.reset();for(var k=F.words,O=0;O<S;O++)D[O]^=k[O]}f.concat(m),g[0]++}return f.sigBytes=4*v,f}});t.PBKDF2=function(u,h,d){return c.create(d).compute(u,h)}})();var uu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Hh="=";function bs(t){var r,s,a="";for(r=0;r+3<=t.length;r+=3)s=parseInt(t.substring(r,r+3),16),a+=uu.charAt(s>>6)+uu.charAt(s&63);if(r+1==t.length?(s=parseInt(t.substring(r,r+1),16),a+=uu.charAt(s<<2)):r+2==t.length&&(s=parseInt(t.substring(r,r+2),16),a+=uu.charAt(s>>2)+uu.charAt((s&3)<<4)),Hh)for(;(a.length&3)>0;)a+=Hh;return a}function cu(t){var r="",s,a=0,o,c;for(s=0;s<t.length&&t.charAt(s)!=Hh;++s)c=uu.indexOf(t.charAt(s)),!(c<0)&&(a==0?(r+=ws(c>>2),o=c&3,a=1):a==1?(r+=ws(o<<2|c>>4),o=c&15,a=2):a==2?(r+=ws(o),r+=ws(c>>2),o=c&3,a=3):(r+=ws(o<<2|c>>4),r+=ws(c&15),a=0));return a==1&&(r+=ws(o<<2)),r}function f1(t){var r=cu(t),s,a=new Array;for(s=0;2*s<r.length;++s)a[s]=parseInt(r.substring(2*s,2*s+2),16);return a}var Vs,CA=0xdeadbeefcafe,o1=(CA&16777215)==15715070;function te(t,r,s){t!=null&&(typeof t=="number"?this.fromNumber(t,r,s):r==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,r))}function Tt(){return new te(null)}function IA(t,r,s,a,o,c){for(;--c>=0;){var u=r*this[t++]+s[a]+o;o=Math.floor(u/67108864),s[a++]=u&67108863}return o}function PA(t,r,s,a,o,c){for(var u=r&32767,h=r>>15;--c>=0;){var d=this[t]&32767,f=this[t++]>>15,b=h*d+f*u;d=u*d+((b&32767)<<15)+s[a]+(o&1073741823),o=(d>>>30)+(b>>>15)+h*f+(o>>>30),s[a++]=d&1073741823}return o}function BA(t,r,s,a,o,c){for(var u=r&16383,h=r>>14;--c>=0;){var d=this[t]&16383,f=this[t++]>>14,b=h*d+f*u;d=u*d+((b&16383)<<14)+s[a]+o,o=(d>>28)+(b>>14)+h*f,s[a++]=d&268435455}return o}o1&&ho.appName=="Microsoft Internet Explorer"?(te.prototype.am=PA,Vs=30):o1&&ho.appName!="Netscape"?(te.prototype.am=IA,Vs=26):(te.prototype.am=BA,Vs=28);te.prototype.DB=Vs;te.prototype.DM=(1<<Vs)-1;te.prototype.DV=1<<Vs;var Vh=52;te.prototype.FV=Math.pow(2,Vh);te.prototype.F1=Vh-Vs;te.prototype.F2=2*Vs-Vh;var RA="0123456789abcdefghijklmnopqrstuvwxyz",Jc=new Array,lu,di;lu=48;for(di=0;di<=9;++di)Jc[lu++]=di;lu=97;for(di=10;di<36;++di)Jc[lu++]=di;lu=65;for(di=10;di<36;++di)Jc[lu++]=di;function ws(t){return RA.charAt(t)}function h1(t,r){var s=Jc[t.charCodeAt(r)];return s??-1}function $A(t){for(var r=this.t-1;r>=0;--r)t[r]=this[r];t.t=this.t,t.s=this.s}function kA(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0}function qs(t){var r=Tt();return r.fromInt(t),r}function xA(t,r){var s;if(r==16)s=4;else if(r==8)s=3;else if(r==256)s=8;else if(r==2)s=1;else if(r==32)s=5;else if(r==4)s=2;else{this.fromRadix(t,r);return}this.t=0,this.s=0;for(var a=t.length,o=!1,c=0;--a>=0;){var u=s==8?t[a]&255:h1(t,a);if(u<0){t.charAt(a)=="-"&&(o=!0);continue}o=!1,c==0?this[this.t++]=u:c+s>this.DB?(this[this.t-1]|=(u&(1<<this.DB-c)-1)<<c,this[this.t++]=u>>this.DB-c):this[this.t-1]|=u<<c,c+=s,c>=this.DB&&(c-=this.DB)}s==8&&(t[0]&128)!=0&&(this.s=-1,c>0&&(this[this.t-1]|=(1<<this.DB-c)-1<<c)),this.clamp(),o&&te.ZERO.subTo(this,this)}function TA(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function OA(t){if(this.s<0)return"-"+this.negate().toString(t);var r;if(t==16)r=4;else if(t==8)r=3;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else return this.toRadix(t);var s=(1<<r)-1,a,o=!1,c="",u=this.t,h=this.DB-u*this.DB%r;if(u-- >0)for(h<this.DB&&(a=this[u]>>h)>0&&(o=!0,c=ws(a));u>=0;)h<r?(a=(this[u]&(1<<h)-1)<<r-h,a|=this[--u]>>(h+=this.DB-r)):(a=this[u]>>(h-=r)&s,h<=0&&(h+=this.DB,--u)),a>0&&(o=!0),o&&(c+=ws(a));return o?c:"0"}function NA(){var t=Tt();return te.ZERO.subTo(this,t),t}function LA(){return this.s<0?this.negate():this}function HA(t){var r=this.s-t.s;if(r!=0)return r;var s=this.t;if(r=s-t.t,r!=0)return this.s<0?-r:r;for(;--s>=0;)if((r=this[s]-t[s])!=0)return r;return 0}function Xc(t){var r=1,s;return(s=t>>>16)!=0&&(t=s,r+=16),(s=t>>8)!=0&&(t=s,r+=8),(s=t>>4)!=0&&(t=s,r+=4),(s=t>>2)!=0&&(t=s,r+=2),(s=t>>1)!=0&&(t=s,r+=1),r}function jA(){return this.t<=0?0:this.DB*(this.t-1)+Xc(this[this.t-1]^this.s&this.DM)}function UA(t,r){var s;for(s=this.t-1;s>=0;--s)r[s+t]=this[s];for(s=t-1;s>=0;--s)r[s]=0;r.t=this.t+t,r.s=this.s}function MA(t,r){for(var s=t;s<this.t;++s)r[s-t]=this[s];r.t=Math.max(this.t-t,0),r.s=this.s}function qA(t,r){var s=t%this.DB,a=this.DB-s,o=(1<<a)-1,c=Math.floor(t/this.DB),u=this.s<<s&this.DM,h;for(h=this.t-1;h>=0;--h)r[h+c+1]=this[h]>>a|u,u=(this[h]&o)<<s;for(h=c-1;h>=0;--h)r[h]=0;r[c]=u,r.t=this.t+c+1,r.s=this.s,r.clamp()}function VA(t,r){r.s=this.s;var s=Math.floor(t/this.DB);if(s>=this.t){r.t=0;return}var a=t%this.DB,o=this.DB-a,c=(1<<a)-1;r[0]=this[s]>>a;for(var u=s+1;u<this.t;++u)r[u-s-1]|=(this[u]&c)<<o,r[u-s]=this[u]>>a;a>0&&(r[this.t-s-1]|=(this.s&c)<<o),r.t=this.t-s,r.clamp()}function KA(t,r){for(var s=0,a=0,o=Math.min(t.t,this.t);s<o;)a+=this[s]-t[s],r[s++]=a&this.DM,a>>=this.DB;if(t.t<this.t){for(a-=t.s;s<this.t;)a+=this[s],r[s++]=a&this.DM,a>>=this.DB;a+=this.s}else{for(a+=this.s;s<t.t;)a-=t[s],r[s++]=a&this.DM,a>>=this.DB;a-=t.s}r.s=a<0?-1:0,a<-1?r[s++]=this.DV+a:a>0&&(r[s++]=a),r.t=s,r.clamp()}function zA(t,r){var s=this.abs(),a=t.abs(),o=s.t;for(r.t=o+a.t;--o>=0;)r[o]=0;for(o=0;o<a.t;++o)r[o+s.t]=s.am(0,a[o],r,o,0,s.t);r.s=0,r.clamp(),this.s!=t.s&&te.ZERO.subTo(r,r)}function GA(t){for(var r=this.abs(),s=t.t=2*r.t;--s>=0;)t[s]=0;for(s=0;s<r.t-1;++s){var a=r.am(s,r[s],t,2*s,0,1);(t[s+r.t]+=r.am(s+1,2*r[s],t,2*s+1,a,r.t-s-1))>=r.DV&&(t[s+r.t]-=r.DV,t[s+r.t+1]=1)}t.t>0&&(t[t.t-1]+=r.am(s,r[s],t,2*s,0,1)),t.s=0,t.clamp()}function WA(t,r,s){var a=t.abs();if(!(a.t<=0)){var o=this.abs();if(o.t<a.t){r?.fromInt(0),s!=null&&this.copyTo(s);return}s==null&&(s=Tt());var c=Tt(),u=this.s,h=t.s,d=this.DB-Xc(a[a.t-1]);d>0?(a.lShiftTo(d,c),o.lShiftTo(d,s)):(a.copyTo(c),o.copyTo(s));var f=c.t,b=c[f-1];if(b!=0){var A=b*(1<<this.F1)+(f>1?c[f-2]>>this.F2:0),g=this.FV/A,v=(1<<this.F1)/A,y=1<<this.F2,m=s.t,D=m-f,S=r??Tt();for(c.dlShiftTo(D,S),s.compareTo(S)>=0&&(s[s.t++]=1,s.subTo(S,s)),te.ONE.dlShiftTo(f,S),S.subTo(c,c);c.t<f;)c[c.t++]=0;for(;--D>=0;){var F=s[--m]==b?this.DM:Math.floor(s[m]*g+(s[m-1]+y)*v);if((s[m]+=c.am(0,F,s,D,0,f))<F)for(c.dlShiftTo(D,S),s.subTo(S,s);s[m]<--F;)s.subTo(S,s)}r!=null&&(s.drShiftTo(f,r),u!=h&&te.ZERO.subTo(r,r)),s.t=f,s.clamp(),d>0&&s.rShiftTo(d,s),u<0&&te.ZERO.subTo(s,s)}}}function YA(t){var r=Tt();return this.abs().divRemTo(t,null,r),this.s<0&&r.compareTo(te.ZERO)>0&&t.subTo(r,r),r}function ma(t){this.m=t}function JA(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function XA(t){return t}function ZA(t){t.divRemTo(this.m,null,t)}function QA(t,r,s){t.multiplyTo(r,s),this.reduce(s)}function ey(t,r){t.squareTo(r),this.reduce(r)}ma.prototype.convert=JA;ma.prototype.revert=XA;ma.prototype.reduce=ZA;ma.prototype.mulTo=QA;ma.prototype.sqrTo=ey;function ty(){if(this.t<1)return 0;var t=this[0];if((t&1)==0)return 0;var r=t&3;return r=r*(2-(t&15)*r)&15,r=r*(2-(t&255)*r)&255,r=r*(2-((t&65535)*r&65535))&65535,r=r*(2-t*r%this.DV)%this.DV,r>0?this.DV-r:-r}function wa(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function ry(t){var r=Tt();return t.abs().dlShiftTo(this.m.t,r),r.divRemTo(this.m,null,r),t.s<0&&r.compareTo(te.ZERO)>0&&this.m.subTo(r,r),r}function ny(t){var r=Tt();return t.copyTo(r),this.reduce(r),r}function iy(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var r=0;r<this.m.t;++r){var s=t[r]&32767,a=s*this.mpl+((s*this.mph+(t[r]>>15)*this.mpl&this.um)<<15)&t.DM;for(s=r+this.m.t,t[s]+=this.m.am(0,a,t,r,0,this.m.t);t[s]>=t.DV;)t[s]-=t.DV,t[++s]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function sy(t,r){t.squareTo(r),this.reduce(r)}function ay(t,r,s){t.multiplyTo(r,s),this.reduce(s)}wa.prototype.convert=ry;wa.prototype.revert=ny;wa.prototype.reduce=iy;wa.prototype.mulTo=ay;wa.prototype.sqrTo=sy;function uy(){return(this.t>0?this[0]&1:this.s)==0}function oy(t,r){if(t>4294967295||t<1)return te.ONE;var s=Tt(),a=Tt(),o=r.convert(this),c=Xc(t)-1;for(o.copyTo(s);--c>=0;)if(r.sqrTo(s,a),(t&1<<c)>0)r.mulTo(a,o,s);else{var u=s;s=a,a=u}return r.revert(s)}function cy(t,r){var s;return t<256||r.isEven()?s=new ma(r):s=new wa(r),this.exp(t,s)}te.prototype.copyTo=$A;te.prototype.fromInt=kA;te.prototype.fromString=xA;te.prototype.clamp=TA;te.prototype.dlShiftTo=UA;te.prototype.drShiftTo=MA;te.prototype.lShiftTo=qA;te.prototype.rShiftTo=VA;te.prototype.subTo=KA;te.prototype.multiplyTo=zA;te.prototype.squareTo=GA;te.prototype.divRemTo=WA;te.prototype.invDigit=ty;te.prototype.isEven=uy;te.prototype.exp=oy;te.prototype.toString=OA;te.prototype.negate=NA;te.prototype.abs=LA;te.prototype.compareTo=HA;te.prototype.bitLength=jA;te.prototype.mod=YA;te.prototype.modPowInt=cy;te.ZERO=qs(0);te.ONE=qs(1);function ly(){var t=Tt();return this.copyTo(t),t}function fy(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function hy(){return this.t==0?this.s:this[0]<<24>>24}function py(){return this.t==0?this.s:this[0]<<16>>16}function dy(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function gy(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function vy(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var r=this.chunkSize(t),s=Math.pow(t,r),a=qs(s),o=Tt(),c=Tt(),u="";for(this.divRemTo(a,o,c);o.signum()>0;)u=(s+c.intValue()).toString(t).substr(1)+u,o.divRemTo(a,o,c);return c.intValue().toString(t)+u}function my(t,r){this.fromInt(0),r==null&&(r=10);for(var s=this.chunkSize(r),a=Math.pow(r,s),o=!1,c=0,u=0,h=0;h<t.length;++h){var d=h1(t,h);if(d<0){t.charAt(h)=="-"&&this.signum()==0&&(o=!0);continue}u=r*u+d,++c>=s&&(this.dMultiply(a),this.dAddOffset(u,0),c=0,u=0)}c>0&&(this.dMultiply(Math.pow(r,c)),this.dAddOffset(u,0)),o&&te.ZERO.subTo(this,this)}function wy(t,r,s){if(typeof r=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,s),this.testBit(t-1)||this.bitwiseTo(te.ONE.shiftLeft(t-1),Kh,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(r);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(te.ONE.shiftLeft(t-1),this);else{var a=new Array,o=t&7;a.length=(t>>3)+1,r.nextBytes(a),o>0?a[0]&=(1<<o)-1:a[0]=0,this.fromString(a,256)}}function by(){var t=this.t,r=new Array;r[0]=this.s;var s=this.DB-t*this.DB%8,a,o=0;if(t-- >0)for(s<this.DB&&(a=this[t]>>s)!=(this.s&this.DM)>>s&&(r[o++]=a|this.s<<this.DB-s);t>=0;)s<8?(a=(this[t]&(1<<s)-1)<<8-s,a|=this[--t]>>(s+=this.DB-8)):(a=this[t]>>(s-=8)&255,s<=0&&(s+=this.DB,--t)),(a&128)!=0&&(a|=-256),o==0&&(this.s&128)!=(a&128)&&++o,(o>0||a!=this.s)&&(r[o++]=a);return r}function _y(t){return this.compareTo(t)==0}function Ey(t){return this.compareTo(t)<0?this:t}function Ay(t){return this.compareTo(t)>0?this:t}function yy(t,r,s){var a,o,c=Math.min(t.t,this.t);for(a=0;a<c;++a)s[a]=r(this[a],t[a]);if(t.t<this.t){for(o=t.s&this.DM,a=c;a<this.t;++a)s[a]=r(this[a],o);s.t=this.t}else{for(o=this.s&this.DM,a=c;a<t.t;++a)s[a]=r(o,t[a]);s.t=t.t}s.s=r(this.s,t.s),s.clamp()}function Sy(t,r){return t&r}function Dy(t){var r=Tt();return this.bitwiseTo(t,Sy,r),r}function Kh(t,r){return t|r}function Fy(t){var r=Tt();return this.bitwiseTo(t,Kh,r),r}function p1(t,r){return t^r}function Cy(t){var r=Tt();return this.bitwiseTo(t,p1,r),r}function d1(t,r){return t&~r}function Iy(t){var r=Tt();return this.bitwiseTo(t,d1,r),r}function Py(){for(var t=Tt(),r=0;r<this.t;++r)t[r]=this.DM&~this[r];return t.t=this.t,t.s=~this.s,t}function By(t){var r=Tt();return t<0?this.rShiftTo(-t,r):this.lShiftTo(t,r),r}function Ry(t){var r=Tt();return t<0?this.lShiftTo(-t,r):this.rShiftTo(t,r),r}function $y(t){if(t==0)return-1;var r=0;return(t&65535)==0&&(t>>=16,r+=16),(t&255)==0&&(t>>=8,r+=8),(t&15)==0&&(t>>=4,r+=4),(t&3)==0&&(t>>=2,r+=2),(t&1)==0&&++r,r}function ky(){for(var t=0;t<this.t;++t)if(this[t]!=0)return t*this.DB+$y(this[t]);return this.s<0?this.t*this.DB:-1}function xy(t){for(var r=0;t!=0;)t&=t-1,++r;return r}function Ty(){for(var t=0,r=this.s&this.DM,s=0;s<this.t;++s)t+=xy(this[s]^r);return t}function Oy(t){var r=Math.floor(t/this.DB);return r>=this.t?this.s!=0:(this[r]&1<<t%this.DB)!=0}function Ny(t,r){var s=te.ONE.shiftLeft(t);return this.bitwiseTo(s,r,s),s}function Ly(t){return this.changeBit(t,Kh)}function Hy(t){return this.changeBit(t,d1)}function jy(t){return this.changeBit(t,p1)}function Uy(t,r){for(var s=0,a=0,o=Math.min(t.t,this.t);s<o;)a+=this[s]+t[s],r[s++]=a&this.DM,a>>=this.DB;if(t.t<this.t){for(a+=t.s;s<this.t;)a+=this[s],r[s++]=a&this.DM,a>>=this.DB;a+=this.s}else{for(a+=this.s;s<t.t;)a+=t[s],r[s++]=a&this.DM,a>>=this.DB;a+=t.s}r.s=a<0?-1:0,a>0?r[s++]=a:a<-1&&(r[s++]=this.DV+a),r.t=s,r.clamp()}function My(t){var r=Tt();return this.addTo(t,r),r}function qy(t){var r=Tt();return this.subTo(t,r),r}function Vy(t){var r=Tt();return this.multiplyTo(t,r),r}function Ky(){var t=Tt();return this.squareTo(t),t}function zy(t){var r=Tt();return this.divRemTo(t,r,null),r}function Gy(t){var r=Tt();return this.divRemTo(t,null,r),r}function Wy(t){var r=Tt(),s=Tt();return this.divRemTo(t,r,s),new Array(r,s)}function Yy(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function Jy(t,r){if(t!=0){for(;this.t<=r;)this[this.t++]=0;for(this[r]+=t;this[r]>=this.DV;)this[r]-=this.DV,++r>=this.t&&(this[this.t++]=0),++this[r]}}function go(){}function g1(t){return t}function Xy(t,r,s){t.multiplyTo(r,s)}function Zy(t,r){t.squareTo(r)}go.prototype.convert=g1;go.prototype.revert=g1;go.prototype.mulTo=Xy;go.prototype.sqrTo=Zy;function Qy(t){return this.exp(t,new go)}function eS(t,r,s){var a=Math.min(this.t+t.t,r);for(s.s=0,s.t=a;a>0;)s[--a]=0;var o;for(o=s.t-this.t;a<o;++a)s[a+this.t]=this.am(0,t[a],s,a,0,this.t);for(o=Math.min(t.t,r);a<o;++a)this.am(0,t[a],s,a,0,r-a);s.clamp()}function tS(t,r,s){--r;var a=s.t=this.t+t.t-r;for(s.s=0;--a>=0;)s[a]=0;for(a=Math.max(r-this.t,0);a<t.t;++a)s[this.t+a-r]=this.am(r-a,t[a],s,0,0,this.t+a-r);s.clamp(),s.drShiftTo(1,s)}function fu(t){this.r2=Tt(),this.q3=Tt(),te.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function rS(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var r=Tt();return t.copyTo(r),this.reduce(r),r}function nS(t){return t}function iS(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function sS(t,r){t.squareTo(r),this.reduce(r)}function aS(t,r,s){t.multiplyTo(r,s),this.reduce(s)}fu.prototype.convert=rS;fu.prototype.revert=nS;fu.prototype.reduce=iS;fu.prototype.mulTo=aS;fu.prototype.sqrTo=sS;function uS(t,r){var s=t.bitLength(),a,o=qs(1),c;if(s<=0)return o;s<18?a=1:s<48?a=3:s<144?a=4:s<768?a=5:a=6,s<8?c=new ma(r):r.isEven()?c=new fu(r):c=new wa(r);var u=new Array,h=3,d=a-1,f=(1<<a)-1;if(u[1]=c.convert(this),a>1){var b=Tt();for(c.sqrTo(u[1],b);h<=f;)u[h]=Tt(),c.mulTo(b,u[h-2],u[h]),h+=2}var A=t.t-1,g,v=!0,y=Tt(),m;for(s=Xc(t[A])-1;A>=0;){for(s>=d?g=t[A]>>s-d&f:(g=(t[A]&(1<<s+1)-1)<<d-s,A>0&&(g|=t[A-1]>>this.DB+s-d)),h=a;(g&1)==0;)g>>=1,--h;if((s-=h)<0&&(s+=this.DB,--A),v)u[g].copyTo(o),v=!1;else{for(;h>1;)c.sqrTo(o,y),c.sqrTo(y,o),h-=2;h>0?c.sqrTo(o,y):(m=o,o=y,y=m),c.mulTo(y,u[g],o)}for(;A>=0&&(t[A]&1<<s)==0;)c.sqrTo(o,y),m=o,o=y,y=m,--s<0&&(s=this.DB-1,--A)}return c.revert(o)}function oS(t){var r=this.s<0?this.negate():this.clone(),s=t.s<0?t.negate():t.clone();if(r.compareTo(s)<0){var a=r;r=s,s=a}var o=r.getLowestSetBit(),c=s.getLowestSetBit();if(c<0)return r;for(o<c&&(c=o),c>0&&(r.rShiftTo(c,r),s.rShiftTo(c,s));r.signum()>0;)(o=r.getLowestSetBit())>0&&r.rShiftTo(o,r),(o=s.getLowestSetBit())>0&&s.rShiftTo(o,s),r.compareTo(s)>=0?(r.subTo(s,r),r.rShiftTo(1,r)):(s.subTo(r,s),s.rShiftTo(1,s));return c>0&&s.lShiftTo(c,s),s}function cS(t){if(t<=0)return 0;var r=this.DV%t,s=this.s<0?t-1:0;if(this.t>0)if(r==0)s=this[0]%t;else for(var a=this.t-1;a>=0;--a)s=(r*s+this[a])%t;return s}function lS(t){var r=t.isEven();if(this.isEven()&&r||t.signum()==0)return te.ZERO;for(var s=t.clone(),a=this.clone(),o=qs(1),c=qs(0),u=qs(0),h=qs(1);s.signum()!=0;){for(;s.isEven();)s.rShiftTo(1,s),r?((!o.isEven()||!c.isEven())&&(o.addTo(this,o),c.subTo(t,c)),o.rShiftTo(1,o)):c.isEven()||c.subTo(t,c),c.rShiftTo(1,c);for(;a.isEven();)a.rShiftTo(1,a),r?((!u.isEven()||!h.isEven())&&(u.addTo(this,u),h.subTo(t,h)),u.rShiftTo(1,u)):h.isEven()||h.subTo(t,h),h.rShiftTo(1,h);s.compareTo(a)>=0?(s.subTo(a,s),r&&o.subTo(u,o),c.subTo(h,c)):(a.subTo(s,a),r&&u.subTo(o,u),h.subTo(c,h))}if(a.compareTo(te.ONE)!=0)return te.ZERO;if(h.compareTo(t)>=0)return h.subtract(t);if(h.signum()<0)h.addTo(t,h);else return h;return h.signum()<0?h.add(t):h}var Sn=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],fS=(1<<26)/Sn[Sn.length-1];function hS(t){var r,s=this.abs();if(s.t==1&&s[0]<=Sn[Sn.length-1]){for(r=0;r<Sn.length;++r)if(s[0]==Sn[r])return!0;return!1}if(s.isEven())return!1;for(r=1;r<Sn.length;){for(var a=Sn[r],o=r+1;o<Sn.length&&a<fS;)a*=Sn[o++];for(a=s.modInt(a);r<o;)if(a%Sn[r++]==0)return!1}return s.millerRabin(t)}function pS(t){var r=this.subtract(te.ONE),s=r.getLowestSetBit();if(s<=0)return!1;var a=r.shiftRight(s);t=t+1>>1,t>Sn.length&&(t=Sn.length);for(var o=Tt(),c=0;c<t;++c){o.fromInt(Sn[Math.floor(Math.random()*Sn.length)]);var u=o.modPow(a,this);if(u.compareTo(te.ONE)!=0&&u.compareTo(r)!=0){for(var h=1;h++<s&&u.compareTo(r)!=0;)if(u=u.modPowInt(2,this),u.compareTo(te.ONE)==0)return!1;if(u.compareTo(r)!=0)return!1}}return!0}te.prototype.chunkSize=dy;te.prototype.toRadix=vy;te.prototype.fromRadix=my;te.prototype.fromNumber=wy;te.prototype.bitwiseTo=yy;te.prototype.changeBit=Ny;te.prototype.addTo=Uy;te.prototype.dMultiply=Yy;te.prototype.dAddOffset=Jy;te.prototype.multiplyLowerTo=eS;te.prototype.multiplyUpperTo=tS;te.prototype.modInt=cS;te.prototype.millerRabin=pS;te.prototype.clone=ly;te.prototype.intValue=fy;te.prototype.byteValue=hy;te.prototype.shortValue=py;te.prototype.signum=gy;te.prototype.toByteArray=by;te.prototype.equals=_y;te.prototype.min=Ey;te.prototype.max=Ay;te.prototype.and=Dy;te.prototype.or=Fy;te.prototype.xor=Cy;te.prototype.andNot=Iy;te.prototype.not=Py;te.prototype.shiftLeft=By;te.prototype.shiftRight=Ry;te.prototype.getLowestSetBit=ky;te.prototype.bitCount=Ty;te.prototype.testBit=Oy;te.prototype.setBit=Ly;te.prototype.clearBit=Hy;te.prototype.flipBit=jy;te.prototype.add=My;te.prototype.subtract=qy;te.prototype.multiply=Vy;te.prototype.divide=zy;te.prototype.remainder=Gy;te.prototype.divideAndRemainder=Wy;te.prototype.modPow=uS;te.prototype.modInverse=lS;te.prototype.pow=Qy;te.prototype.gcd=oS;te.prototype.isProbablePrime=hS;te.prototype.square=Ky;function zh(){this.i=0,this.j=0,this.S=new Array}function dS(t){var r,s,a;for(r=0;r<256;++r)this.S[r]=r;for(s=0,r=0;r<256;++r)s=s+this.S[r]+t[r%t.length]&255,a=this.S[r],this.S[r]=this.S[s],this.S[s]=a;this.i=0,this.j=0}function gS(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]}zh.prototype.init=dS;zh.prototype.next=gS;function vS(){return new zh}var jh=256;var zc,ti,en;function mS(t){ti[en++]^=t&255,ti[en++]^=t>>8&255,ti[en++]^=t>>16&255,ti[en++]^=t>>24&255,en>=jh&&(en-=jh)}function Gh(){mS(new Date().getTime())}if(ti==null){if(ti=new Array,en=0,au!==void 0&&(au.crypto!==void 0||au.msCrypto!==void 0)){if(Oh=au.crypto||au.msCrypto,Oh.getRandomValues)for(Nh=new Uint8Array(32),Oh.getRandomValues(Nh),pi=0;pi<32;++pi)ti[en++]=Nh[pi];else if(ho.appName=="Netscape"&&ho.appVersion<"5")for(Lh=au.crypto.random(32),pi=0;pi<Lh.length;++pi)ti[en++]=Lh.charCodeAt(pi)&255}for(;en<jh;)pi=Math.floor(65536*Math.random()),ti[en++]=pi>>>8,ti[en++]=pi&255;en=0,Gh()}var pi,Oh,Nh,Lh;function wS(){if(zc==null){for(Gh(),zc=vS(),zc.init(ti),en=0;en<ti.length;++en)ti[en]=0;en=0}return zc.next()}function bS(t){var r;for(r=0;r<t.length;++r)t[r]=wS()}function hu(){}hu.prototype.nextBytes=bS;function Nn(t,r){return new te(t,r)}function ct(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function _S(t,r){if(this.isPublic=!0,this.isPrivate=!1,typeof t!="string")this.n=t,this.e=r;else if(t!=null&&r!=null&&t.length>0&&r.length>0)this.n=Nn(t,16),this.e=parseInt(r,16);else throw"Invalid RSA public key"}function ES(t){return t.modPowInt(this.e,this.n)}ct.prototype.doPublic=ES;ct.prototype.setPublic=_S;ct.prototype.type="RSA";function AS(t,r,s){if(this.isPrivate=!0,typeof t!="string")this.n=t,this.e=r,this.d=s;else if(t!=null&&r!=null&&t.length>0&&r.length>0)this.n=Nn(t,16),this.e=parseInt(r,16),this.d=Nn(s,16);else throw"Invalid RSA private key"}function yS(t,r,s,a,o,c,u,h){if(this.isPrivate=!0,this.isPublic=!1,t==null)throw"RSASetPrivateEx N == null";if(r==null)throw"RSASetPrivateEx E == null";if(t.length==0)throw"RSASetPrivateEx N.length == 0";if(r.length==0)throw"RSASetPrivateEx E.length == 0";if(t!=null&&r!=null&&t.length>0&&r.length>0)this.n=Nn(t,16),this.e=parseInt(r,16),this.d=Nn(s,16),this.p=Nn(a,16),this.q=Nn(o,16),this.dmp1=Nn(c,16),this.dmq1=Nn(u,16),this.coeff=Nn(h,16);else throw"Invalid RSA private key in RSASetPrivateEx"}function SS(t,r){var s=new hu,a=t>>1;this.e=parseInt(r,16);for(var o=new te(r,16),c=t/2-100,u=te.ONE.shiftLeft(c);;){for(;this.p=new te(t-a,1,s),!(this.p.subtract(te.ONE).gcd(o).compareTo(te.ONE)==0&&this.p.isProbablePrime(10)););for(;this.q=new te(a,1,s),!(this.q.subtract(te.ONE).gcd(o).compareTo(te.ONE)==0&&this.q.isProbablePrime(10)););if(this.p.compareTo(this.q)<=0){var h=this.p;this.p=this.q,this.q=h}var d=this.q.subtract(this.p).abs();if(!(d.bitLength()<c||d.compareTo(u)<=0)){var f=this.p.subtract(te.ONE),b=this.q.subtract(te.ONE),A=f.multiply(b);if(A.gcd(o).compareTo(te.ONE)==0&&(this.n=this.p.multiply(this.q),this.n.bitLength()==t)){this.d=o.modInverse(A),this.dmp1=this.d.mod(f),this.dmq1=this.d.mod(b),this.coeff=this.q.modInverse(this.p);break}}}this.isPrivate=!0}function DS(t){if(this.p==null||this.q==null)return t.modPow(this.d,this.n);for(var r=t.mod(this.p).modPow(this.dmp1,this.p),s=t.mod(this.q).modPow(this.dmq1,this.q);r.compareTo(s)<0;)r=r.add(this.p);return r.subtract(s).multiply(this.coeff).mod(this.p).multiply(this.q).add(s)}ct.prototype.doPrivate=DS;ct.prototype.setPrivate=AS;ct.prototype.setPrivateEx=yS;ct.prototype.generate=SS;function qr(t,r){this.x=r,this.q=t}function FS(t){return t==this?!0:this.q.equals(t.q)&&this.x.equals(t.x)}function CS(){return this.x}function IS(){return new qr(this.q,this.x.negate().mod(this.q))}function PS(t){return new qr(this.q,this.x.add(t.toBigInteger()).mod(this.q))}function BS(t){return new qr(this.q,this.x.subtract(t.toBigInteger()).mod(this.q))}function RS(t){return new qr(this.q,this.x.multiply(t.toBigInteger()).mod(this.q))}function $S(){return new qr(this.q,this.x.square().mod(this.q))}function kS(t){return new qr(this.q,this.x.multiply(t.toBigInteger().modInverse(this.q)).mod(this.q))}qr.prototype.equals=FS;qr.prototype.toBigInteger=CS;qr.prototype.negate=IS;qr.prototype.add=PS;qr.prototype.subtract=BS;qr.prototype.multiply=RS;qr.prototype.square=$S;qr.prototype.divide=kS;qr.prototype.sqrt=function(){return new qr(this.q,this.x.sqrt().mod(this.q))};function Mt(t,r,s,a){this.curve=t,this.x=r,this.y=s,a==null?this.z=te.ONE:this.z=a,this.zinv=null}function xS(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function TS(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function OS(t){if(t==this)return!0;if(this.isInfinity())return t.isInfinity();if(t.isInfinity())return this.isInfinity();var r,s;return r=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),r.equals(te.ZERO)?(s=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q),s.equals(te.ZERO)):!1}function NS(){return this.x==null&&this.y==null?!0:this.z.equals(te.ZERO)&&!this.y.toBigInteger().equals(te.ZERO)}function LS(){return new Mt(this.curve,this.x,this.y.negate(),this.z)}function HS(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var r=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),s=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q);if(te.ZERO.equals(s))return te.ZERO.equals(r)?this.twice():this.curve.getInfinity();var a=new te("3"),o=this.x.toBigInteger(),c=this.y.toBigInteger(),u=t.x.toBigInteger(),h=t.y.toBigInteger(),d=s.square(),f=d.multiply(s),b=o.multiply(d),A=r.square().multiply(this.z),g=A.subtract(b.shiftLeft(1)).multiply(t.z).subtract(f).multiply(s).mod(this.curve.q),v=b.multiply(a).multiply(r).subtract(c.multiply(f)).subtract(A.multiply(r)).multiply(t.z).add(r.multiply(f)).mod(this.curve.q),y=f.multiply(this.z).multiply(t.z).mod(this.curve.q);return new Mt(this.curve,this.curve.fromBigInteger(g),this.curve.fromBigInteger(v),y)}function jS(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var t=new te("3"),r=this.x.toBigInteger(),s=this.y.toBigInteger(),a=s.multiply(this.z),o=a.multiply(s).mod(this.curve.q),c=this.curve.a.toBigInteger(),u=r.square().multiply(t);te.ZERO.equals(c)||(u=u.add(this.z.square().multiply(c))),u=u.mod(this.curve.q);var h=u.square().subtract(r.shiftLeft(3).multiply(o)).shiftLeft(1).multiply(a).mod(this.curve.q),d=u.multiply(t).multiply(r).subtract(o.shiftLeft(1)).shiftLeft(2).multiply(o).subtract(u.square().multiply(u)).mod(this.curve.q),f=a.square().multiply(a).shiftLeft(3).mod(this.curve.q);return new Mt(this.curve,this.curve.fromBigInteger(h),this.curve.fromBigInteger(d),f)}function US(t){if(this.isInfinity())return this;if(t.signum()==0)return this.curve.getInfinity();var r=t,s=r.multiply(new te("3")),a=this.negate(),o=this,c=this.curve.q.subtract(t),u=c.multiply(new te("3")),h=new Mt(this.curve,this.x,this.y),d=h.negate(),f;for(f=s.bitLength()-2;f>0;--f){o=o.twice();var b=s.testBit(f),A=r.testBit(f);b!=A&&(o=o.add(b?this:a))}for(f=u.bitLength()-2;f>0;--f){h=h.twice();var g=u.testBit(f),v=c.testBit(f);g!=v&&(h=h.add(g?h:d))}return o}function MS(t,r,s){var a;t.bitLength()>s.bitLength()?a=t.bitLength()-1:a=s.bitLength()-1;for(var o=this.curve.getInfinity(),c=this.add(r);a>=0;)o=o.twice(),t.testBit(a)?s.testBit(a)?o=o.add(c):o=o.add(this):s.testBit(a)&&(o=o.add(r)),--a;return o}Mt.prototype.getX=xS;Mt.prototype.getY=TS;Mt.prototype.equals=OS;Mt.prototype.isInfinity=NS;Mt.prototype.negate=LS;Mt.prototype.add=HS;Mt.prototype.twice=jS;Mt.prototype.multiply=US;Mt.prototype.multiplyTwo=MS;function _s(t,r,s){this.q=t,this.a=this.fromBigInteger(r),this.b=this.fromBigInteger(s),this.infinity=new Mt(this,null,null)}function qS(){return this.q}function VS(){return this.a}function KS(){return this.b}function zS(t){return t==this?!0:this.q.equals(t.q)&&this.a.equals(t.a)&&this.b.equals(t.b)}function GS(){return this.infinity}function WS(t){return new qr(this.q,t)}function YS(t){switch(parseInt(t.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:var r=t.substr(0,2),s=t.substr(2),a=this.fromBigInteger(new te(f,16)),o=this.getA(),c=this.getB(),u=a.square().add(o).multiply(a).add(c),h=u.sqrt();return r=="03"&&(h=h.negate()),new Mt(this,a,h);case 4:case 6:case 7:var d=(t.length-2)/2,f=t.substr(2,d),b=t.substr(d+2,d);return new Mt(this,this.fromBigInteger(new te(f,16)),this.fromBigInteger(new te(b,16)));default:return null}}_s.prototype.getQ=qS;_s.prototype.getA=VS;_s.prototype.getB=KS;_s.prototype.equals=zS;_s.prototype.getInfinity=GS;_s.prototype.fromBigInteger=WS;_s.prototype.decodePointHex=YS;qr.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)};Mt.prototype.getEncoded=function(t){var r=function(c,u){var h=c.toByteArrayUnsigned();if(u<h.length)h=h.slice(h.length-u);else for(;u>h.length;)h.unshift(0);return h},s=this.getX().toBigInteger(),a=this.getY().toBigInteger(),o=r(s,32);return t?a.isEven()?o.unshift(2):o.unshift(3):(o.unshift(4),o=o.concat(r(a,32))),o};Mt.decodeFrom=function(t,r){var s=r[0],a=r.length-1,o=r.slice(1,1+a/2),c=r.slice(1+a/2,1+a);o.unshift(0),c.unshift(0);var u=new te(o),h=new te(c);return new Mt(t,t.fromBigInteger(u),t.fromBigInteger(h))};Mt.decodeFromHex=function(t,r){var s=r.substr(0,2),a=r.length-2,o=r.substr(2,a/2),c=r.substr(2+a/2,a/2),u=new te(o,16),h=new te(c,16);return new Mt(t,t.fromBigInteger(u),t.fromBigInteger(h))};Mt.prototype.add2D=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;if(this.x.equals(t.x))return this.y.equals(t.y)?this.twice():this.curve.getInfinity();var r=t.x.subtract(this.x),s=t.y.subtract(this.y),a=s.divide(r),o=a.square().subtract(this.x).subtract(t.x),c=a.multiply(this.x.subtract(o)).subtract(this.y);return new Mt(this.curve,o,c)};Mt.prototype.twice2D=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var t=this.curve.fromBigInteger(te.valueOf(2)),r=this.curve.fromBigInteger(te.valueOf(3)),s=this.x.square().multiply(r).add(this.curve.a).divide(this.y.multiply(t)),a=s.square().subtract(this.x.multiply(t)),o=s.multiply(this.x.subtract(a)).subtract(this.y);return new Mt(this.curve,a,o)};Mt.prototype.multiply2D=function(t){if(this.isInfinity())return this;if(t.signum()==0)return this.curve.getInfinity();var r=t,s=r.multiply(new te("3")),a=this.negate(),o=this,c;for(c=s.bitLength()-2;c>0;--c){o=o.twice();var u=s.testBit(c),h=r.testBit(c);u!=h&&(o=o.add2D(u?this:a))}return o};Mt.prototype.isOnCurve=function(){var t=this.getX().toBigInteger(),r=this.getY().toBigInteger(),s=this.curve.getA().toBigInteger(),a=this.curve.getB().toBigInteger(),o=this.curve.getQ(),c=r.multiply(r).mod(o),u=t.multiply(t).multiply(t).add(s.multiply(t)).add(a).mod(o);return c.equals(u)};Mt.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"};Mt.prototype.validate=function(){var t=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var r=this.getX().toBigInteger(),s=this.getY().toBigInteger();if(r.compareTo(te.ONE)<0||r.compareTo(t.subtract(te.ONE))>0)throw new Error("x coordinate out of bounds");if(s.compareTo(te.ONE)<0||s.compareTo(t.subtract(te.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(t).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var v1=(function(){var t="(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)",r='(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))',s='(?:"'+r+'*")',a=new RegExp("(?:false|true|null|[\\{\\}\\[\\]]|"+t+"|"+s+")","g"),o=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),c={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function u(A,g,v){return g?c[g]:String.fromCharCode(parseInt(v,16))}var h=new String(""),d="\\",f={"{":Object,"[":Array},b=Object.hasOwnProperty;return function(A,g){var v=A.match(a),y,m=v[0],D=!1;m==="{"?y={}:m==="["?y=[]:(y=[],D=!0);for(var S,F=[y],$=1-D,k=v.length;$<k;++$){m=v[$];var O;switch(m.charCodeAt(0)){default:O=F[0],O[S||O.length]=+m,S=void 0;break;case 34:if(m=m.substring(1,m.length-1),m.indexOf(d)!==-1&&(m=m.replace(o,u)),O=F[0],!S)if(O instanceof Array)S=O.length;else{S=m||h;break}O[S]=m,S=void 0;break;case 91:O=F[0],F.unshift(O[S||O.length]=[]),S=void 0;break;case 93:F.shift();break;case 102:O=F[0],O[S||O.length]=!1,S=void 0;break;case 110:O=F[0],O[S||O.length]=null,S=void 0;break;case 116:O=F[0],O[S||O.length]=!0,S=void 0;break;case 123:O=F[0],F.unshift(O[S||O.length]={}),S=void 0;break;case 125:F.shift();break}}if(D){if(F.length!==1)throw new Error;y=y[0]}else if(F.length)throw new Error;if(g){var z=function(H,P){var R=H[P];if(R&&typeof R=="object"){var N=null;for(var x in R)if(b.call(R,x)&&R!==H){var V=z(R,x);V!==void 0?R[x]=V:(N||(N=[]),N.push(x))}if(N)for(var Y=N.length;--Y>=0;)delete R[N[Y]]}return g.call(H,P,R)};y=z({"":y},"")}return y}})();(typeof _>"u"||!_)&&(_={});(typeof _.asn1>"u"||!_.asn1)&&(_.asn1={});_.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var r=t.toString(16);return r.length%2==1&&(r="0"+r),r},this.bigIntToMinTwosComplementsHex=function(t){return mo(t)},this.getPEMStringFromHex=function(t,r){return dn(t,r)},this.newObject=function(t){var r=_,s=r.asn1,a=s.ASN1Object,o=s.DERBoolean,c=s.DERInteger,u=s.DERBitString,h=s.DEROctetString,d=s.DERNull,f=s.DERObjectIdentifier,b=s.DEREnumerated,A=s.DERUTF8String,g=s.DERNumericString,v=s.DERPrintableString,y=s.DERTeletexString,m=s.DERIA5String,D=s.DERUTCTime,S=s.DERGeneralizedTime,F=s.DERVisibleString,$=s.DERBMPString,k=s.DERSequence,O=s.DERSet,z=s.DERTaggedObject,H=s.ASN1Util.newObject;if(t instanceof s.ASN1Object)return t;var P=Object.keys(t);if(P.length!=1)throw new Error("key of param shall be only one.");var R=P[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+R+":")==-1)throw new Error("undefined key: "+R);if(R=="bool")return new o(t[R]);if(R=="int")return new c(t[R]);if(R=="bitstr")return new u(t[R]);if(R=="octstr")return new h(t[R]);if(R=="null")return new d(t[R]);if(R=="oid")return new f(t[R]);if(R=="enum")return new b(t[R]);if(R=="utf8str")return new A(t[R]);if(R=="numstr")return new g(t[R]);if(R=="prnstr")return new v(t[R]);if(R=="telstr")return new y(t[R]);if(R=="ia5str")return new m(t[R]);if(R=="utctime")return new D(t[R]);if(R=="gentime")return new S(t[R]);if(R=="visstr")return new F(t[R]);if(R=="bmpstr")return new $(t[R]);if(R=="asn1")return new a(t[R]);if(R=="seq"){for(var N=t[R],x=[],V=0;V<N.length;V++){var Y=H(N[V]);x.push(Y)}return new k({array:x})}if(R=="set"){for(var N=t[R],x=[],V=0;V<N.length;V++){var Y=H(N[V]);x.push(Y)}return new O({array:x})}if(R=="tag"){var G=t[R];if(Object.prototype.toString.call(G)==="[object Array]"&&G.length==3){var W=H(G[2]);return new z({tag:G[0],explicit:G[1],obj:W})}else return new z(G)}},this.jsonToASN1HEX=function(t){var r=this.newObject(t);return r.tohex()}};_.asn1.ASN1Util.oidHexToInt=function(t){for(var o="",r=parseInt(t.substr(0,2),16),s=Math.floor(r/40),a=r%40,o=s+"."+a,c="",u=2;u<t.length;u+=2){var h=parseInt(t.substr(u,2),16),d=("00000000"+h.toString(2)).slice(-8);if(c=c+d.substr(1,7),d.substr(0,1)=="0"){var f=new te(c,2);o=o+"."+f.toString(10),c=""}}return o};_.asn1.ASN1Util.oidIntToHex=function(t){var r=function(h){var d=h.toString(16);return d.length==1&&(d="0"+d),d},s=function(h){var d="",f=new te(h,10),b=f.toString(2),A=7-b.length%7;A==7&&(A=0);for(var g="",v=0;v<A;v++)g+="0";b=g+b;for(var v=0;v<b.length-1;v+=7){var y=b.substr(v,7);v!=b.length-7&&(y="1"+y),d+=r(parseInt(y,2))}return d};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var a="",o=t.split("."),c=parseInt(o[0])*40+parseInt(o[1]);a+=r(c),o.splice(0,2);for(var u=0;u<o.length;u++)a+=s(o[u]);return a};_.asn1.ASN1Object=function(t){var r=!0,s=null,a="00",o="00",c="";this.params=null,this.getLengthHexFromValue=function(){if(typeof this.hV>"u"||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+c.length+",v="+this.hV);var u=this.hV.length/2,h=u.toString(16);if(h.length%2==1&&(h="0"+h),u<128)return h;var d=h.length/2;if(d>15)throw new Error("ASN.1 length too long to represent by 8x: n = "+u.toString(16));var f=128+d;return f.toString(16)+h},this.tohex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.getValueHex=function(){return this.tohex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(u){this.params=u},t!=null&&t.tlv!=null&&(this.hTLV=t.tlv,this.isModified=!1)};_.asn1.DERAbstractString=function(t){_.asn1.DERAbstractString.superclass.constructor.call(this);var r=null,s=null;this.getString=function(){return this.s},this.setString=function(a){this.hTLV=null,this.isModified=!0,this.s=a,this.hV=Qc(this.s).toLowerCase()},this.setStringHex=function(a){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=a},this.getFreshValueHex=function(){return this.hV},typeof t<"u"&&(typeof t=="string"?this.setString(t):typeof t.str<"u"?this.setString(t.str):typeof t.hex<"u"&&this.setStringHex(t.hex))};me(_.asn1.DERAbstractString,_.asn1.ASN1Object);_.asn1.DERAbstractTime=function(t){_.asn1.DERAbstractTime.superclass.constructor.call(this);var r=null,s=null;this.localDateToUTC=function(a){var o=a.getTime()+a.getTimezoneOffset()*6e4,c=new Date(o);return c},this.formatDate=function(a,o,c){var u=this.zeroPadding,h=this.localDateToUTC(a),d=String(h.getFullYear());o=="utc"&&(d=d.substr(2,2));var f=u(String(h.getMonth()+1),2),b=u(String(h.getDate()),2),A=u(String(h.getHours()),2),g=u(String(h.getMinutes()),2),v=u(String(h.getSeconds()),2),y=d+f+b+A+g+v;if(c===!0){var m=h.getMilliseconds();if(m!=0){var D=u(String(m),3);D=D.replace(/[0]+$/,""),y=y+"."+D}}return y+"Z"},this.zeroPadding=function(a,o){return a.length>=o?a:new Array(o-a.length+1).join("0")+a},this.setByParam=function(a){this.hV=null,this.hTLV=null,this.params=a},this.getString=function(){},this.setString=function(a){this.hTLV=null,this.isModified=!0,this.params==null&&(this.params={}),this.params.str=a},this.setByDate=function(a){this.hTLV=null,this.isModified=!0,this.params==null&&(this.params={}),this.params.date=a},this.setByDateValue=function(a,o,c,u,h,d){var f=new Date(Date.UTC(a,o-1,c,u,h,d,0));this.setByDate(f)},this.getFreshValueHex=function(){return this.hV}};me(_.asn1.DERAbstractTime,_.asn1.ASN1Object);_.asn1.DERAbstractStructured=function(t){_.asn1.DERAbstractString.superclass.constructor.call(this);var r=null;this.setByASN1ObjectArray=function(s){this.hTLV=null,this.isModified=!0,this.asn1Array=s},this.appendASN1Object=function(s){this.hTLV=null,this.isModified=!0,this.asn1Array.push(s)},this.asn1Array=new Array,typeof t<"u"&&typeof t.array<"u"&&(this.asn1Array=t.array)};me(_.asn1.DERAbstractStructured,_.asn1.ASN1Object);_.asn1.DERBoolean=function(t){_.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",t==!1?this.hTLV="010100":this.hTLV="0101ff"};me(_.asn1.DERBoolean,_.asn1.ASN1Object);_.asn1.DERInteger=function(t){_.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.params=null;var r=mo;this.setByBigInteger=function(s){this.isModified=!0,this.params={bigint:s}},this.setByInteger=function(s){this.isModified=!0,this.params=s},this.setValueHex=function(s){this.isModified=!0,this.params={hex:s}},this.getFreshValueHex=function(){var s=this.params,a=null;if(s==null)throw new Error("value not set");if(typeof s=="object"&&s.hex!=null)return this.hV=s.hex,this.hV;if(typeof s=="number")a=new te(String(s),10);else if(s.int!=null)a=new te(String(s.int),10);else if(s.bigint!=null)a=s.bigint;else throw new Error("wrong parameter");return this.hV=r(a),this.hV},t!=null&&(this.params=t)};me(_.asn1.DERInteger,_.asn1.ASN1Object);_.asn1.DERBitString=function(t){if(t!==void 0&&typeof t.obj<"u"){var r=_.asn1.ASN1Util.newObject(t.obj);t.hex="00"+r.tohex()}_.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(s){this.hTLV=null,this.isModified=!0,this.hV=s},this.setUnusedBitsAndHexValue=function(s,a){if(s<0||7<s)throw"unused bits shall be from 0 to 7: u = "+s;var o="0"+s;this.hTLV=null,this.isModified=!0,this.hV=o+a},this.setByBinaryString=function(s){s=s.replace(/0+$/,"");var a=8-s.length%8;a==8&&(a=0),s+="0000000".substr(0,a);for(var o="",c=0;c<s.length-1;c+=8){var u=s.substr(c,8),h=parseInt(u,2).toString(16);h.length==1&&(h="0"+h),o+=h}this.hTLV=null,this.isModified=!0,this.hV="0"+a+o},this.setByBooleanArray=function(s){for(var a="",o=0;o<s.length;o++)s[o]==!0?a+="1":a+="0";this.setByBinaryString(a)},this.newFalseArray=function(s){for(var a=new Array(s),o=0;o<s;o++)a[o]=!1;return a},this.getFreshValueHex=function(){return this.hV},typeof t<"u"&&(typeof t=="string"&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(t):typeof t.hex<"u"?this.setHexValueIncludingUnusedBits(t.hex):typeof t.bin<"u"?this.setByBinaryString(t.bin):typeof t.array<"u"&&this.setByBooleanArray(t.array))};me(_.asn1.DERBitString,_.asn1.ASN1Object);_.asn1.DEROctetString=function(t){if(t!==void 0&&typeof t.obj<"u"){var r=_.asn1.ASN1Util.newObject(t.obj);t.hex=r.tohex()}_.asn1.DEROctetString.superclass.constructor.call(this,t),this.hT="04"};me(_.asn1.DEROctetString,_.asn1.DERAbstractString);_.asn1.DERNull=function(){_.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"};me(_.asn1.DERNull,_.asn1.ASN1Object);_.asn1.DERObjectIdentifier=function(t){_.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(r){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=r},this.setValueOidString=function(r){var s=y1(r);if(s==null)throw new Error("malformed oid string: "+r);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=s},this.setValueName=function(r){var s=_.asn1.x509.OID.name2oid(r);if(s!=="")this.setValueOidString(s);else throw new Error("DERObjectIdentifier oidName undefined: "+r)},this.setValueNameOrOid=function(r){r.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(r):this.setValueName(r)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(r){typeof r=="string"?this.setValueNameOrOid(r):r.oid!==void 0?this.setValueNameOrOid(r.oid):r.name!==void 0?this.setValueNameOrOid(r.name):r.hex!==void 0&&this.setValueHex(r.hex)},t!==void 0&&this.setByParam(t)};me(_.asn1.DERObjectIdentifier,_.asn1.ASN1Object);_.asn1.DEREnumerated=function(t){_.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(r){this.hTLV=null,this.isModified=!0,this.hV=mo(r)},this.setByInteger=function(r){var s=new te(String(r),10);this.setByBigInteger(s)},this.setValueHex=function(r){this.hV=r},this.getFreshValueHex=function(){return this.hV},typeof t<"u"&&(typeof t.int<"u"?this.setByInteger(t.int):typeof t=="number"?this.setByInteger(t):typeof t.hex<"u"&&this.setValueHex(t.hex))};me(_.asn1.DEREnumerated,_.asn1.ASN1Object);_.asn1.DERUTF8String=function(t){_.asn1.DERUTF8String.superclass.constructor.call(this,t),this.hT="0c"};me(_.asn1.DERUTF8String,_.asn1.DERAbstractString);_.asn1.DERNumericString=function(t){_.asn1.DERNumericString.superclass.constructor.call(this,t),this.hT="12"};me(_.asn1.DERNumericString,_.asn1.DERAbstractString);_.asn1.DERPrintableString=function(t){_.asn1.DERPrintableString.superclass.constructor.call(this,t),this.hT="13"};me(_.asn1.DERPrintableString,_.asn1.DERAbstractString);_.asn1.DERTeletexString=function(t){_.asn1.DERTeletexString.superclass.constructor.call(this,t),this.hT="14"};me(_.asn1.DERTeletexString,_.asn1.DERAbstractString);_.asn1.DERIA5String=function(t){_.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="16"};me(_.asn1.DERIA5String,_.asn1.DERAbstractString);_.asn1.DERVisibleString=function(t){_.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="1a"};me(_.asn1.DERVisibleString,_.asn1.DERAbstractString);_.asn1.DERBMPString=function(t){_.asn1.DERBMPString.superclass.constructor.call(this,t),this.hT="1e"};me(_.asn1.DERBMPString,_.asn1.DERAbstractString);_.asn1.DERUTCTime=function(t){_.asn1.DERUTCTime.superclass.constructor.call(this,t),this.hT="17",this.params=void 0,this.getFreshValueHex=function(){var r=this.params;if(this.params==null&&(r={date:new Date}),typeof r=="string")if(r.match(/^[0-9]{12}Z$/)||r.match(/^[0-9]{12}\.[0-9]+Z$/))this.hV=Ln(r);else throw new Error("malformed string for UTCTime: "+r);else if(r.str!=null)this.hV=Ln(r.str);else if(r.date==null&&r.millis==!0){var s=new Date;this.hV=Ln(this.formatDate(s,"utc",!0))}else if(r.date!=null&&r.date instanceof Date){var a=r.millis===!0;this.hV=Ln(this.formatDate(r.date,"utc",a))}else r instanceof Date&&(this.hV=Ln(this.formatDate(r,"utc")));if(this.hV==null)throw new Error("parameter not specified properly for UTCTime");return this.hV},t!=null&&this.setByParam(t)};me(_.asn1.DERUTCTime,_.asn1.DERAbstractTime);_.asn1.DERGeneralizedTime=function(t){_.asn1.DERGeneralizedTime.superclass.constructor.call(this,t),this.hT="18",this.params=t,this.getFreshValueHex=function(){var r=this.params;if(this.params==null&&(r={date:new Date}),typeof r=="string")if(r.match(/^[0-9]{14}Z$/)||r.match(/^[0-9]{14}\.[0-9]+Z$/))this.hV=Ln(r);else throw new Error("malformed string for GeneralizedTime: "+r);else if(r.str!=null)this.hV=Ln(r.str);else if(r.date==null&&r.millis==!0){var s=new Date;this.hV=Ln(this.formatDate(s,"gen",!0))}else if(r.date!=null&&r.date instanceof Date){var a=r.millis===!0;this.hV=Ln(this.formatDate(r.date,"gen",a))}else r instanceof Date&&(this.hV=Ln(this.formatDate(r,"gen")));if(this.hV==null)throw new Error("parameter not specified properly for GeneralizedTime");return this.hV},t!=null&&this.setByParam(t)};me(_.asn1.DERGeneralizedTime,_.asn1.DERAbstractTime);_.asn1.DERSequence=function(t){_.asn1.DERSequence.superclass.constructor.call(this,t),this.hT="30",this.getFreshValueHex=function(){for(var r="",s=0;s<this.asn1Array.length;s++){var a=this.asn1Array[s];r+=a.tohex()}return this.hV=r,this.hV}};me(_.asn1.DERSequence,_.asn1.DERAbstractStructured);_.asn1.DERSet=function(t){_.asn1.DERSet.superclass.constructor.call(this,t),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var r=new Array,s=0;s<this.asn1Array.length;s++){var a=this.asn1Array[s];r.push(a.tohex())}return this.sortFlag==!0&&r.sort(),this.hV=r.join(""),this.hV},typeof t<"u"&&typeof t.sortflag<"u"&&t.sortflag==!1&&(this.sortFlag=!1)};me(_.asn1.DERSet,_.asn1.DERAbstractStructured);_.asn1.DERTaggedObject=function(t){_.asn1.DERTaggedObject.superclass.constructor.call(this);var r=_.asn1,s=Ce,a=s.getV,o=s.isASN1HEX,c=r.ASN1Util.newObject;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.params={tag:"a0",explicit:!0},this.setASN1Object=function(u,h,d){this.params={tag:h,explicit:u,obj:d}},this.getFreshValueHex=function(){var u=this.params;if(u.explicit==null&&(u.explicit=!0),u.tage!=null&&(u.tag=u.tage,u.explicit=!0),u.tagi!=null&&(u.tag=u.tagi,u.explicit=!1),u.str!=null)this.hV=Qc(u.str);else if(u.hex!=null)this.hV=u.hex;else if(u.obj!=null){var h;u.obj instanceof r.ASN1Object?h=u.obj.tohex():typeof u.obj=="object"&&(h=c(u.obj).tohex()),u.explicit?this.hV=h:this.hV=a(h,0)}else throw new Error("str, hex nor obj not specified");return u.tag==null&&(u.tag="a0"),this.hT=u.tag,this.hTLV=null,this.isModified=!0,this.hV},this.setByParam=function(u){this.params=u},t!==void 0&&this.setByParam(t)};me(_.asn1.DERTaggedObject,_.asn1.ASN1Object);var Ce=new function(){};Ce.getLblen=function(t,r){if(t.substr(r+2,1)!="8")return 1;var s=parseInt(t.substr(r+3,1));return s==0?-1:0<s&&s<10?s+1:-2};Ce.getL=function(t,r){var s=Ce.getLblen(t,r);return s<1?"":t.substr(r+2,s*2)};Ce.getVblen=function(t,r){var s,a;return s=Ce.getL(t,r),s==""?-1:(s.substr(0,1)==="8"?a=new te(s.substr(2),16):a=new te(s,16),a.intValue())};Ce.getVidx=function(t,r){var s=Ce.getLblen(t,r);return s<0?s:r+(s+1)*2};Ce.getV=function(t,r){var s=Ce.getVidx(t,r),a=Ce.getVblen(t,r);return t.substr(s,a*2)};Ce.getTLV=function(t,r){return t.substr(r,2)+Ce.getL(t,r)+Ce.getV(t,r)};Ce.getTLVblen=function(t,r){return 2+Ce.getLblen(t,r)*2+Ce.getVblen(t,r)*2};Ce.getNextSiblingIdx=function(t,r){var s=Ce.getVidx(t,r),a=Ce.getVblen(t,r);return s+a*2};Ce.getChildIdx=function(t,r){var s=Ce,a=[],o,c,u;o=s.getVidx(t,r),c=s.getVblen(t,r)*2,t.substr(r,2)=="03"&&(o+=2,c-=2),u=0;for(var h=o;u<=c;){var d=s.getTLVblen(t,h);if(u+=d,u<=c&&a.push(h),h+=d,u>=c)break}return a};Ce.getNthChildIdx=function(t,r,s){var a=Ce.getChildIdx(t,r);return a[s]};Ce.getIdxbyList=function(t,r,s,a){var o=Ce,c,u;return s.length==0?a!==void 0&&t.substr(r,2)!==a?-1:r:(c=s.shift(),u=o.getChildIdx(t,r),c>=u.length?-1:o.getIdxbyList(t,u[c],s,a))};Ce.getIdxbyListEx=function(t,r,s,a){var o=Ce,c,u;if(s.length==0)return a!==void 0&&t.substr(r,2)!==a?-1:r;c=s.shift(),u=o.getChildIdx(t,r);for(var h=0,d=0;d<u.length;d++){var f=t.substr(u[d],2);if(typeof c=="number"&&!o.isContextTag(f)&&h==c||typeof c=="string"&&o.isContextTag(f,c))return o.getIdxbyListEx(t,u[d],s,a);o.isContextTag(f)||h++}return-1};Ce.getTLVbyList=function(t,r,s,a){var o=Ce,c=o.getIdxbyList(t,r,s,a);return c==-1||c>=t.length?null:o.getTLV(t,c)};Ce.getTLVbyListEx=function(t,r,s,a){var o=Ce,c=o.getIdxbyListEx(t,r,s,a);return c==-1?null:o.getTLV(t,c)};Ce.getVbyList=function(t,r,s,a,o){var c=Ce,u,h;return u=c.getIdxbyList(t,r,s,a),u==-1||u>=t.length?null:(h=c.getV(t,u),o===!0&&(h=h.substr(2)),h)};Ce.getVbyListEx=function(t,r,s,a,o){var c=Ce,u,h,d;return u=c.getIdxbyListEx(t,r,s,a),u==-1?null:(d=c.getV(t,u),t.substr(u,2)=="03"&&o!==!1&&(d=d.substr(2)),d)};Ce.getInt=function(t,r,s){s==null&&(s=-1);try{var a=t.substr(r,2);if(a!="02"&&a!="03")return s;var o=Ce.getV(t,r);return a=="02"?parseInt(o,16):D1(o)}catch{return s}};Ce.getOID=function(t,r,s){s==null&&(s=null);try{if(t.substr(r,2)!="06")return s;var a=Ce.getV(t,r);return il(a)}catch{return s}};Ce.getOIDName=function(t,r,s){s==null&&(s=null);try{var a=Ce.getOID(t,r,s);if(a==s)return s;var o=_.asn1.x509.OID.oid2name(a);return o==""?a:o}catch{return s}};Ce.getString=function(t,r,s){s==null&&(s=null);try{var a=Ce.getV(t,r);return Hn(a)}catch{return s}};Ce.hextooidstr=function(t){var r=function(A,g){return A.length>=g?A:new Array(g-A.length+1).join("0")+A},s=[],a=t.substr(0,2),o=parseInt(a,16);s[0]=new String(Math.floor(o/40)),s[1]=new String(o%40);for(var c=t.substr(2),u=[],h=0;h<c.length/2;h++)u.push(parseInt(c.substr(h*2,2),16));for(var d=[],f="",h=0;h<u.length;h++)u[h]&128?f=f+r((u[h]&127).toString(2),7):(f=f+r((u[h]&127).toString(2),7),d.push(new String(parseInt(f,2))),f="");var b=s.join(".");return d.length>0&&(b=b+"."+d.join(".")),b};Ce.dump=function(t,r,s,a){var o=Ce,c=o.getV,u=o.dump,h=o.getChildIdx,d=t;t instanceof _.asn1.ASN1Object&&(d=t.tohex());var f=function(H,P){if(H.length<=P*2)return H;var R=H.substr(0,P)+"..(total "+H.length/2+"bytes).."+H.substr(H.length-P,P);return R};r===void 0&&(r={ommit_long_octet:32}),s===void 0&&(s=0),a===void 0&&(a="");var b=r.ommit_long_octet,O=d.substr(s,2);if(O=="01"){var A=c(d,s);return A=="00"?a+`BOOLEAN FALSE
`:a+`BOOLEAN TRUE
`}if(O=="02"){var A=c(d,s);return a+"INTEGER "+f(A,b)+`
`}if(O=="03"){var A=c(d,s);if(o.isASN1HEX(A.substr(2))){var g=a+`BITSTRING, encapsulates
`;return g=g+u(A.substr(2),r,0,a+"  "),g}else return a+"BITSTRING "+f(A,b)+`
`}if(O=="04"){var A=c(d,s);if(o.isASN1HEX(A)){var g=a+`OCTETSTRING, encapsulates
`;return g=g+u(A,r,0,a+"  "),g}else return a+"OCTETSTRING "+f(A,b)+`
`}if(O=="05")return a+`NULL
`;if(O=="06"){var v=c(d,s),y=_.asn1.ASN1Util.oidHexToInt(v),m=_.asn1.x509.OID.oid2name(y),D=y.replace(/\./g," ");return m!=""?a+"ObjectIdentifier "+m+" ("+D+`)
`:a+"ObjectIdentifier ("+D+`)
`}if(O=="0a")return a+"ENUMERATED "+parseInt(c(d,s))+`
`;if(O=="0c")return a+"UTF8String '"+Wt(c(d,s))+`'
`;if(O=="13")return a+"PrintableString '"+Wt(c(d,s))+`'
`;if(O=="14")return a+"TeletexString '"+Wt(c(d,s))+`'
`;if(O=="16")return a+"IA5String '"+Wt(c(d,s))+`'
`;if(O=="17")return a+"UTCTime "+Wt(c(d,s))+`
`;if(O=="18")return a+"GeneralizedTime "+Wt(c(d,s))+`
`;if(O=="1a")return a+"VisualString '"+Wt(c(d,s))+`'
`;if(O=="1e")return a+"BMPString '"+Xh(c(d,s))+`'
`;if(O=="30"){if(d.substr(s,4)=="3000")return a+`SEQUENCE {}
`;var g=a+`SEQUENCE
`,S=h(d,s),F=r;if((S.length==2||S.length==3)&&d.substr(S[0],2)=="06"&&d.substr(S[S.length-1],2)=="04"){var m=o.oidname(c(d,S[0])),$=JSON.parse(JSON.stringify(r));$.x509ExtName=m,F=$}for(var k=0;k<S.length;k++)g=g+u(d,F,S[k],a+"  ");return g}if(O=="31"){for(var g=a+`SET
`,S=h(d,s),k=0;k<S.length;k++)g=g+u(d,r,S[k],a+"  ");return g}var O=parseInt(O,16);if((O&128)!=0){var z=O&31;if((O&32)!=0){for(var g=a+"["+z+`]
`,S=h(d,s),k=0;k<S.length;k++)g=g+u(d,r,S[k],a+"  ");return g}else{var A=c(d,s);if(Ce.isASN1HEX(A)){var g=a+"["+z+`]
`;return g=g+u(A,r,0,a+"  "),g}else(A.substr(0,8)=="68747470"||r.x509ExtName==="subjectAltName"&&z==2)&&(A=Wt(A));var g=a+"["+z+"] "+A+`
`;return g}}return a+"UNKNOWN("+O+") "+c(d,s)+`
`};Ce.parse=function(t){var r=Ce,s=r.parse,a=r.isASN1HEX,o=r.getV,c=r.getTLV,u=r.getChildIdx,h=_.asn1,d=h.ASN1Util.oidHexToInt,f=h.x509.OID.oid2name,b=Wt,A=Xh,g=tD,v={"0c":"utf8str",12:"numstr",13:"prnstr",14:"telstr",16:"ia5str",17:"utctime",18:"gentime","1a":"visstr","1e":"bmpstr",30:"seq",31:"set"},y=function(R){for(var N=[],x=u(R,0),V=0;V<x.length;V++){var Y=x[V],G=c(R,Y),W=s(G);N.push(W)}return N},m=t.substr(0,2),D={},S=o(t,0);if(m=="01")return t=="0101ff"?{bool:!0}:{bool:!1};if(m=="02")return{int:{hex:S}};if(m=="03")try{if(S.substr(0,2)!="00")throw"not encap";var F=S.substr(2);if(!a(F))throw"not encap";return{bitstr:{obj:s(F)}}}catch{var $=null;return S.length<=10&&($=C1(S)),$==null?{bitstr:{hex:S}}:{bitstr:{bin:$}}}else if(m=="04")try{if(!a(S))throw"not encap";return{octstr:{obj:s(S)}}}catch{return{octstr:{hex:S}}}else{if(m=="05")return{null:""};if(m=="06"){var k=d(S),O=f(k);return O==""?{oid:k}:{oid:O}}else{if(m=="0a")return S.length>4?{enum:{hex:S}}:{enum:parseInt(S,16)};if(m=="30"||m=="31")return D[v[m]]=y(t),D;if(m=="14"){var z=g(S);return D[v[m]]={str:z},D}else if(m=="1e"){var z=A(S);return D[v[m]]={str:z},D}else if(":0c:12:13:16:17:18:1a:".indexOf(m)!=-1){var z=b(S);return D[v[m]]={str:z},D}else if(m.match(/^8[0-9]$/)){var z=b(S);return z==null|z==""?{tag:{tag:m,explicit:!1,hex:S}}:z.match(/[\x00-\x1F\x7F-\x9F]/)!=null||z.match(/[\u0000-\u001F\u0080–\u009F]/)!=null?{tag:{tag:m,explicit:!1,hex:S}}:{tag:{tag:m,explicit:!1,str:z}}}else if(m.match(/^a[0-9]$/))try{if(!a(S))throw new Error("not encap");return{tag:{tag:m,explicit:!0,obj:s(S)}}}catch{return{tag:{tag:m,explicit:!0,hex:S}}}else{var H=new _.asn1.ASN1Object;H.hV=S;var P=H.getLengthHexFromValue();return{asn1:{tlv:m+P+S}}}}}};Ce.isContextTag=function(t,r){t=t.toLowerCase();var s,a;try{s=parseInt(t,16)}catch{return-1}if(r===void 0)return(s&192)==128;try{var o=r.match(/^\[[0-9]+\]$/);return o==null||(a=parseInt(r.substr(1,r.length-1),10),a>31)?!1:(s&192)==128&&(s&31)==a}catch{return!1}};Ce.isASN1HEX=function(t){var r=Ce;if(t.length%2==1)return!1;var s=r.getVblen(t,0),a=t.substr(0,2),o=r.getL(t,0),c=t.length-a.length-o.length;return c==s*2};Ce.checkStrictDER=function(t,r,s,a,o){var c=Ce;if(s===void 0){if(typeof t!="string")throw new Error("not hex string");if(t=t.toLowerCase(),!_.lang.String.isHex(t))throw new Error("not hex string");s=t.length,a=t.length/2,a<128?o=1:o=Math.ceil(a.toString(16))+1}var u=c.getL(t,r);if(u.length>o*2)throw new Error("L of TLV too long: idx="+r);var h=c.getVblen(t,r);if(h>a)throw new Error("value of L too long than hex: idx="+r);var d=c.getTLV(t,r),f=d.length-2-c.getL(t,r).length;if(f!==h*2)throw new Error("V string length and L's value not the same:"+f+"/"+h*2);if(r===0&&t.length!=d.length)throw new Error("total length and TLV length unmatch:"+t.length+"!="+d.length);var b=t.substr(r,2);if(b==="02"){var A=c.getVidx(t,r);if(t.substr(A,2)=="00"&&t.charCodeAt(A+2)<56)throw new Error("not least zeros for DER INTEGER")}if(parseInt(b,16)&32){for(var g=c.getVblen(t,r),v=0,y=c.getChildIdx(t,r),m=0;m<y.length;m++){var D=c.getTLV(t,y[m]);v+=D.length,c.checkStrictDER(t,y[m],s,a,o)}if(g*2!=v)throw new Error("sum of children's TLV length and L unmatch: "+g*2+"!="+v)}};Ce.oidname=function(t){var r=_.asn1;_.lang.String.isHex(t)&&(t=r.ASN1Util.oidHexToInt(t));var s=r.x509.OID.oid2name(t);return s===""&&(s=t),s};(typeof _>"u"||!_)&&(_={});(typeof _.asn1>"u"||!_.asn1)&&(_.asn1={});(typeof _.asn1.x509>"u"||!_.asn1.x509)&&(_.asn1.x509={});_.asn1.x509.Certificate=function(t){_.asn1.x509.Certificate.superclass.constructor.call(this);var r=_,s=r.asn1,a=s.DERBitString,o=s.DERSequence,c=s.x509,u=c.TBSCertificate,h=c.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(d){this.params=d},this.sign=function(){var d=this.params,f=d.sigalg;d.sigalg.name!=null&&(f=d.sigalg.name);var b=d.tbsobj.tohex(),A=new _.crypto.Signature({alg:f});A.init(d.cakey),A.updateHex(b),d.sighex=A.sign()},this.getPEM=function(){return dn(this.tohex(),"CERTIFICATE")},this.tohex=function(){var d=this.params;if((d.tbsobj==null||d.tbsobj==null)&&(d.tbsobj=new u(d)),d.sighex==null&&d.cakey!=null&&this.sign(),d.sighex==null)throw new Error("sighex or cakey parameter not defined");var f=[];f.push(d.tbsobj),f.push(new h({name:d.sigalg})),f.push(new a({hex:"00"+d.sighex}));var b=new o({array:f});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&(this.params=t)};me(_.asn1.x509.Certificate,_.asn1.ASN1Object);_.asn1.x509.TBSCertificate=function(t){_.asn1.x509.TBSCertificate.superclass.constructor.call(this);var r=_,s=r.asn1,a=s.x509,o=s.DERTaggedObject,c=s.DERInteger,u=s.DERSequence,h=a.AlgorithmIdentifier,d=a.Time,f=a.X500Name,b=a.Extensions,A=a.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(g){this.params=g},this.tohex=function(){var g=[],v=this.params;if(v.version!=null||v.version!=1){var y=2;v.version!=null&&(y=v.version-1);var m=new o({obj:new c({int:y})});g.push(m)}g.push(new c(v.serial)),g.push(new h({name:v.sigalg})),g.push(new f(v.issuer)),g.push(new u({array:[new d(v.notbefore),new d(v.notafter)]})),g.push(new f(v.subject)),g.push(new A(Pt.getKey(v.sbjpubkey))),v.ext!==void 0&&v.ext.length>0&&g.push(new o({tag:"a3",obj:new b(v.ext)}));var D=new _.asn1.DERSequence({array:g});return D.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};me(_.asn1.x509.TBSCertificate,_.asn1.ASN1Object);_.asn1.x509.Extensions=function(t){_.asn1.x509.Extensions.superclass.constructor.call(this);var r=_,s=r.asn1,a=s.DERSequence,o=s.x509;this.aParam=[],this.setByParam=function(c){this.aParam=c},this.tohex=function(){for(var c=[],u=0;u<this.aParam.length;u++){var h=this.aParam[u],d=h.extname,f=null;if(h.extn!=null)f=new o.PrivateExtension(h);else if(d=="subjectKeyIdentifier")f=new o.SubjectKeyIdentifier(h);else if(d=="keyUsage")f=new o.KeyUsage(h);else if(d=="subjectAltName")f=new o.SubjectAltName(h);else if(d=="issuerAltName")f=new o.IssuerAltName(h);else if(d=="basicConstraints")f=new o.BasicConstraints(h);else if(d=="nameConstraints")f=new o.NameConstraints(h);else if(d=="cRLDistributionPoints")f=new o.CRLDistributionPoints(h);else if(d=="certificatePolicies")f=new o.CertificatePolicies(h);else if(d=="policyMappings")f=new o.PolicyMappings(h);else if(d=="policyConstraints")f=new o.PolicyConstraints(h);else if(d=="inhibitAnyPolicy")f=new o.InhibitAnyPolicy(h);else if(d=="authorityKeyIdentifier")f=new o.AuthorityKeyIdentifier(h);else if(d=="extKeyUsage")f=new o.ExtKeyUsage(h);else if(d=="authorityInfoAccess")f=new o.AuthorityInfoAccess(h);else if(d=="cRLNumber")f=new o.CRLNumber(h);else if(d=="cRLReason")f=new o.CRLReason(h);else if(d=="ocspNonce")f=new o.OCSPNonce(h);else if(d=="ocspNoCheck")f=new o.OCSPNoCheck(h);else if(d=="adobeTimeStamp")f=new o.AdobeTimeStamp(h);else if(d=="subjectDirectoryAttributes")f=new o.SubjectDirectoryAttributes(h);else throw new Error("extension not supported:"+JSON.stringify(h));f!=null&&c.push(f)}var b=new a({array:c});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};me(_.asn1.x509.Extensions,_.asn1.ASN1Object);_.asn1.x509.Extension=function(t){_.asn1.x509.Extension.superclass.constructor.call(this);var r=null,s=_,a=s.asn1,o=a.DERObjectIdentifier,c=a.DEROctetString,u=a.DERBitString,h=a.DERBoolean,d=a.DERSequence;this.tohex=function(){var f=new o({oid:this.oid}),b=new c({hex:this.getExtnValueHex()}),A=new Array;A.push(f),this.critical&&A.push(new h),A.push(b);var g=new d({array:A});return g.tohex()},this.getEncodedHex=function(){return this.tohex()},this.critical=!1,t!==void 0&&t.critical!==void 0&&(this.critical=t.critical)};me(_.asn1.x509.Extension,_.asn1.ASN1Object);_.asn1.x509.KeyUsage=function(t){_.asn1.x509.KeyUsage.superclass.constructor.call(this,t);var r=Error,s={digitalSignature:0,nonRepudiation:1,keyEncipherment:2,dataEncipherment:3,keyAgreement:4,keyCertSign:5,cRLSign:6,encipherOnly:7,decipherOnly:8};this.getExtnValueHex=function(){var a=this.getBinValue();return this.asn1ExtnValue=new _.asn1.DERBitString({bin:a}),this.asn1ExtnValue.tohex()},this.getBinValue=function(){var a=this.params;if(typeof a!="object"||typeof a.names!="object"&&typeof a.bin!="string")throw new r("parameter not yet set");if(a.names!=null)return Yc(a.names,s);if(a.bin!=null)return a.bin;throw new r("parameter not set properly")},this.oid="2.5.29.15",t!==void 0&&(this.params=t)};me(_.asn1.x509.KeyUsage,_.asn1.x509.Extension);_.asn1.x509.BasicConstraints=function(t){_.asn1.x509.BasicConstraints.superclass.constructor.call(this,t);var r=_.asn1,s=r.DERBoolean,a=r.DERInteger,o=r.DERSequence,c=!1,u=-1;this.getExtnValueHex=function(){var h=new Array;this.cA&&h.push(new s),this.pathLen>-1&&h.push(new a({int:this.pathLen}));var d=new o({array:h});return this.asn1ExtnValue=d,this.asn1ExtnValue.tohex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,t!==void 0&&(t.cA!==void 0&&(this.cA=t.cA),t.pathLen!==void 0&&(this.pathLen=t.pathLen))};me(_.asn1.x509.BasicConstraints,_.asn1.x509.Extension);_.asn1.x509.CRLDistributionPoints=function(t){_.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,t);var r=_,s=r.asn1,a=s.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.setByDPArray=function(o){for(var c=[],u=0;u<o.length;u++)if(o[u]instanceof _.asn1.ASN1Object)c.push(o[u]);else{var h=new a.DistributionPoint(o[u]);c.push(h)}this.asn1ExtnValue=new s.DERSequence({array:c})},this.setByOneURI=function(o){var c=new a.DistributionPoint({fulluri:o});this.setByDPArray([c])},this.oid="2.5.29.31",t!==void 0&&(t.array!==void 0?this.setByDPArray(t.array):t.uri!==void 0&&this.setByOneURI(t.uri))};me(_.asn1.x509.CRLDistributionPoints,_.asn1.x509.Extension);_.asn1.x509.DistributionPoint=function(t){_.asn1.x509.DistributionPoint.superclass.constructor.call(this);var r=null,s=_,a=s.asn1,o=a.x509.DistributionPointName;this.tohex=function(){var c=new a.DERSequence;if(this.asn1DP!=null){var u=new a.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});c.appendASN1Object(u)}return this.hTLV=c.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(t.dpobj!==void 0?this.asn1DP=t.dpobj:t.dpname!==void 0?this.asn1DP=new o(t.dpname):t.fulluri!==void 0&&(this.asn1DP=new o({full:[{uri:t.fulluri}]})))};me(_.asn1.x509.DistributionPoint,_.asn1.ASN1Object);_.asn1.x509.DistributionPointName=function(t){_.asn1.x509.DistributionPointName.superclass.constructor.call(this);var r=null,s=null,a=null,o=null,c=_,u=c.asn1,h=u.DERTaggedObject;if(this.tohex=function(){if(this.type!="full")throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new h({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0)if(u.x509.GeneralNames.prototype.isPrototypeOf(t))this.type="full",this.tag="a0",this.asn1V=t;else if(t.full!==void 0)this.type="full",this.tag="a0",this.asn1V=new u.x509.GeneralNames(t.full);else throw new Error("This class supports GeneralNames only as argument")};me(_.asn1.x509.DistributionPointName,_.asn1.ASN1Object);_.asn1.x509.CertificatePolicies=function(t){_.asn1.x509.CertificatePolicies.superclass.constructor.call(this,t);var r=_,s=r.asn1,a=s.x509,o=s.DERSequence,c=a.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var u=[],h=0;h<this.params.array.length;h++)u.push(new c(this.params.array[h]));var d=new o({array:u});return this.asn1ExtnValue=d,this.asn1ExtnValue.tohex()},this.oid="2.5.29.32",t!==void 0&&(this.params=t)};me(_.asn1.x509.CertificatePolicies,_.asn1.x509.Extension);_.asn1.x509.PolicyInformation=function(t){_.asn1.x509.PolicyInformation.superclass.constructor.call(this,t);var r=_.asn1,s=r.DERSequence,a=r.DERObjectIdentifier,o=r.x509.PolicyQualifierInfo;this.params=null,this.tohex=function(){if(this.params.policyoid===void 0&&this.params.array===void 0)throw new Error("parameter oid and array missing");var c=[new a(this.params.policyoid)];if(this.params.array!==void 0){for(var u=[],h=0;h<this.params.array.length;h++)u.push(new o(this.params.array[h]));u.length>0&&c.push(new s({array:u}))}var d=new s({array:c});return d.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(this.params=t)};me(_.asn1.x509.PolicyInformation,_.asn1.ASN1Object);_.asn1.x509.PolicyQualifierInfo=function(t){_.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,t);var r=_.asn1,s=r.DERSequence,a=r.DERIA5String,o=r.DERObjectIdentifier,c=r.x509.UserNotice;this.params=null,this.tohex=function(){if(this.params.cps!==void 0){var u=new s({array:[new o({oid:"1.3.6.1.5.5.7.2.1"}),new a({str:this.params.cps})]});return u.tohex()}if(this.params.unotice!=null){var u=new s({array:[new o({oid:"1.3.6.1.5.5.7.2.2"}),new c(this.params.unotice)]});return u.tohex()}},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(this.params=t)};me(_.asn1.x509.PolicyQualifierInfo,_.asn1.ASN1Object);_.asn1.x509.UserNotice=function(t){_.asn1.x509.UserNotice.superclass.constructor.call(this,t);var r=_.asn1.DERSequence,s=_.asn1.DERInteger,a=_.asn1.x509.DisplayText,o=_.asn1.x509.NoticeReference;this.params=null,this.tohex=function(){var c=[];this.params.noticeref!==void 0&&c.push(new o(this.params.noticeref)),this.params.exptext!==void 0&&c.push(new a(this.params.exptext));var u=new r({array:c});return u.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(this.params=t)};me(_.asn1.x509.UserNotice,_.asn1.ASN1Object);_.asn1.x509.NoticeReference=function(t){_.asn1.x509.NoticeReference.superclass.constructor.call(this,t);var r=_.asn1.DERSequence,s=_.asn1.DERInteger,a=_.asn1.x509.DisplayText;this.params=null,this.tohex=function(){var o=[];if(this.params.org!==void 0&&o.push(new a(this.params.org)),this.params.noticenum!==void 0){for(var c=[],u=this.params.noticenum,h=0;h<u.length;h++)c.push(new s(u[h]));o.push(new r({array:c}))}if(o.length==0)throw new Error("parameter is empty");var d=new r({array:o});return d.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(this.params=t)};me(_.asn1.x509.NoticeReference,_.asn1.ASN1Object);_.asn1.x509.DisplayText=function(t){_.asn1.x509.DisplayText.superclass.constructor.call(this,t),this.hT="0c",t!==void 0&&(t.type==="ia5"?this.hT="16":t.type==="vis"?this.hT="1a":t.type==="bmp"&&(this.hT="1e"))};me(_.asn1.x509.DisplayText,_.asn1.DERAbstractString);_.asn1.x509.PolicyMappings=function(t){_.asn1.x509.PolicyMappings.superclass.constructor.call(this,t);var r=_,s=r.asn1,a=s.x509,o=s.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){for(var c=this.params,u=[],h=0;h<c.array.length;h++){var d=c.array[h];u.push({seq:[{oid:d[0]},{oid:d[1]}]})}return this.asn1ExtnValue=o({seq:u}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.33",t!==void 0&&(this.params=t)};me(_.asn1.x509.PolicyMappings,_.asn1.x509.Extension);_.asn1.x509.PolicyConstraints=function(t){_.asn1.x509.PolicyConstraints.superclass.constructor.call(this,t);var r=_,s=r.asn1,a=s.x509,o=s.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){var c=this.params,u=[];return c.reqexp!=null&&u.push({tag:{tagi:"80",obj:{int:c.reqexp}}}),c.inhibit!=null&&u.push({tag:{tagi:"81",obj:{int:c.inhibit}}}),this.asn1ExtnValue=o({seq:u}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.36",t!==void 0&&(this.params=t)};me(_.asn1.x509.PolicyConstraints,_.asn1.x509.Extension);_.asn1.x509.InhibitAnyPolicy=function(t){_.asn1.x509.InhibitAnyPolicy.superclass.constructor.call(this,t);var r=_,s=r.asn1,a=s.x509,o=s.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=o({int:this.params.skip}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.54",t!==void 0&&(this.params=t)};me(_.asn1.x509.InhibitAnyPolicy,_.asn1.x509.Extension);_.asn1.x509.NameConstraints=function(t){_.asn1.x509.NameConstraints.superclass.constructor.call(this,t);var r=_,s=r.asn1,a=s.x509,o=s.ASN1Util.newObject,c=a.GeneralSubtree;this.params=null,this.getExtnValueHex=function(){var u=this.params,h=[];if(u.permit!=null&&u.permit.length!=null){for(var d=[],f=0;f<u.permit.length;f++)d.push(new c(u.permit[f]));h.push({tag:{tagi:"a0",obj:{seq:d}}})}if(u.exclude!=null&&u.exclude.length!=null){for(var b=[],f=0;f<u.exclude.length;f++)b.push(new c(u.exclude[f]));h.push({tag:{tagi:"a1",obj:{seq:b}}})}return this.asn1ExtnValue=o({seq:h}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.30",t!==void 0&&(this.params=t)};me(_.asn1.x509.NameConstraints,_.asn1.x509.Extension);_.asn1.x509.GeneralSubtree=function(t){_.asn1.x509.GeneralSubtree.superclass.constructor.call(this);var r=_.asn1,s=r.x509,a=s.GeneralName,o=r.ASN1Util.newObject;this.params=null,this.setByParam=function(c){this.params=c},this.tohex=function(){var c=this.params,u=[new a(c)];c.min!=null&&u.push({tag:{tagi:"80",obj:{int:c.min}}}),c.max!=null&&u.push({tag:{tagi:"81",obj:{int:c.max}}});var h=o({seq:u});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};me(_.asn1.x509.GeneralSubtree,_.asn1.ASN1Object);_.asn1.x509.ExtKeyUsage=function(t){_.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,t);var r=_,s=r.asn1;this.setPurposeArray=function(a){this.asn1ExtnValue=new s.DERSequence;for(var o=0;o<a.length;o++){var c=new s.DERObjectIdentifier(a[o]);this.asn1ExtnValue.appendASN1Object(c)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.37",t!==void 0&&t.array!==void 0&&this.setPurposeArray(t.array)};me(_.asn1.x509.ExtKeyUsage,_.asn1.x509.Extension);_.asn1.x509.AuthorityKeyIdentifier=function(t){_.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,t);var r=_,s=r.asn1,a=s.DERTaggedObject,o=s.x509.GeneralNames,c=r.crypto.Util.isKey;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var u=new Array;this.asn1KID&&u.push(new a({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&u.push(new a({explicit:!1,tag:"a1",obj:new o([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&u.push(new a({explicit:!1,tag:"82",obj:this.asn1CertSN}));var h=new s.DERSequence({array:u});return this.asn1ExtnValue=h,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(u){if(u.str!==void 0||u.hex!==void 0)this.asn1KID=new _.asn1.DEROctetString(u);else if(typeof u=="object"&&_.crypto.Util.isKey(u)||typeof u=="string"&&u.indexOf("BEGIN ")!=-1){var h=u;typeof u=="string"&&(h=Pt.getKey(u));var d=Pt.getKeyID(h);this.asn1KID=new _.asn1.DEROctetString({hex:d})}},this.setCertIssuerByParam=function(u){u.str!==void 0||u.ldapstr!==void 0||u.hex!==void 0||u.certsubject!==void 0||u.certissuer!==void 0?this.asn1CertIssuer=new _.asn1.x509.X500Name(u):typeof u=="string"&&u.indexOf("BEGIN ")!=-1&&u.indexOf("CERTIFICATE")!=-1&&(this.asn1CertIssuer=new _.asn1.x509.X500Name({certissuer:u}))},this.setCertSNByParam=function(u){if(u.str!==void 0||u.bigint!==void 0||u.hex!==void 0)this.asn1CertSN=new _.asn1.DERInteger(u);else if(typeof u=="string"&&u.indexOf("BEGIN ")!=-1&&u.indexOf("CERTIFICATE")){var h=new tt;h.readCertPEM(u);var d=h.getSerialNumberHex();this.asn1CertSN=new _.asn1.DERInteger({hex:d})}},this.oid="2.5.29.35",t!==void 0&&(t.kid!==void 0&&this.setKIDByParam(t.kid),t.issuer!==void 0&&this.setCertIssuerByParam(t.issuer),t.sn!==void 0&&this.setCertSNByParam(t.sn),t.issuersn!==void 0&&typeof t.issuersn=="string"&&t.issuersn.indexOf("BEGIN ")!=-1&&t.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(t.issuersn),this.setCertIssuerByParam(t.issuersn)))};me(_.asn1.x509.AuthorityKeyIdentifier,_.asn1.x509.Extension);_.asn1.x509.SubjectKeyIdentifier=function(t){_.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,t);var r=_,s=r.asn1,a=s.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(o){if(o.str!==void 0||o.hex!==void 0)this.asn1KID=new a(o);else if(typeof o=="object"&&_.crypto.Util.isKey(o)||typeof o=="string"&&o.indexOf("BEGIN")!=-1){var c=o;typeof o=="string"&&(c=Pt.getKey(o));var u=Pt.getKeyID(c);this.asn1KID=new _.asn1.DEROctetString({hex:u})}},this.oid="2.5.29.14",t!==void 0&&t.kid!==void 0&&this.setKIDByParam(t.kid)};me(_.asn1.x509.SubjectKeyIdentifier,_.asn1.x509.Extension);_.asn1.x509.AuthorityInfoAccess=function(t){_.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,t),this.setAccessDescriptionArray=function(r){for(var s=new Array,a=_,o=a.asn1,c=o.DERSequence,u=o.DERObjectIdentifier,h=o.x509.GeneralName,d=0;d<r.length;d++){var f,b=r[d];if(b.ocsp!==void 0)f=new c({array:[new u({oid:"1.3.6.1.5.5.7.48.1"}),new h({uri:b.ocsp})]});else if(b.caissuer!==void 0)f=new c({array:[new u({oid:"1.3.6.1.5.5.7.48.2"}),new h({uri:b.caissuer})]});else throw new Error("unknown AccessMethod parameter: "+JSON.stringify(b));s.push(f)}this.asn1ExtnValue=new c({array:s})},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.1.1",t!==void 0&&t.array!==void 0&&this.setAccessDescriptionArray(t.array)};me(_.asn1.x509.AuthorityInfoAccess,_.asn1.x509.Extension);_.asn1.x509.SubjectAltName=function(t){_.asn1.x509.SubjectAltName.superclass.constructor.call(this,t),this.setNameArray=function(r){this.asn1ExtnValue=new _.asn1.x509.GeneralNames(r)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.17",t!==void 0&&t.array!==void 0&&this.setNameArray(t.array)};me(_.asn1.x509.SubjectAltName,_.asn1.x509.Extension);_.asn1.x509.IssuerAltName=function(t){_.asn1.x509.IssuerAltName.superclass.constructor.call(this,t),this.setNameArray=function(r){this.asn1ExtnValue=new _.asn1.x509.GeneralNames(r)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.18",t!==void 0&&t.array!==void 0&&this.setNameArray(t.array)};me(_.asn1.x509.IssuerAltName,_.asn1.x509.Extension);_.asn1.x509.SubjectDirectoryAttributes=function(t){_.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,t);var r=_.asn1,s=r.DERSequence,a=r.ASN1Util.newObject,o=r.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var c=[],u=0;u<this.params.array.length;u++){var h=this.params.array[u];if(h.attr!=null&&h.array!=null){var d={seq:[{oid:h.attr},{set:h.array}]};c.push(a(d));continue}var f={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if(h.attr=="dateOfBirth")f.seq[0].oid=o(h.attr),f.seq[1].set[0]={gentime:h.str};else if(h.attr=="placeOfBirth")f.seq[0].oid=o(h.attr),f.seq[1].set[0]={utf8str:h.str};else if(h.attr=="gender")f.seq[0].oid=o(h.attr),f.seq[1].set[0]={prnstr:h.str};else if(h.attr=="countryOfCitizenship")f.seq[0].oid=o(h.attr),f.seq[1].set[0]={prnstr:h.str};else if(h.attr=="countryOfResidence")f.seq[0].oid=o(h.attr),f.seq[1].set[0]={prnstr:h.str};else throw new Error("unsupported attribute: "+h.attr);c.push(new a(f))}var b=new s({array:c});return this.asn1ExtnValue=b,this.asn1ExtnValue.tohex()},this.oid="2.5.29.9",t!==void 0&&(this.params=t)};me(_.asn1.x509.SubjectDirectoryAttributes,_.asn1.x509.Extension);_.asn1.x509.PrivateExtension=function(t){_.asn1.x509.PrivateExtension.superclass.constructor.call(this,t);var r=_,s=r.lang.String.isHex,a=r.asn1,o=a.x509.OID.name2oid,c=a.ASN1Util.newObject;this.params=null,this.setByParam=function(u){this.oid=o(u.extname),this.params=u},this.getExtnValueHex=function(){if(this.params.extname==null||this.params.extn==null)throw new Error("extname or extnhex not specified");var u=this.params.extn;if(typeof u=="string"&&s(u))return u;if(typeof u=="object")try{return c(u).tohex()}catch{}throw new Error("unsupported extn value")},t!=null&&this.setByParam(t)};me(_.asn1.x509.PrivateExtension,_.asn1.x509.Extension);_.asn1.x509.CRL=function(t){_.asn1.x509.CRL.superclass.constructor.call(this);var r=_,s=r.asn1,a=s.DERSequence,o=s.DERBitString,c=s.x509,u=c.AlgorithmIdentifier,h=c.TBSCertList;this.params=void 0,this.setByParam=function(d){this.params=d},this.sign=function(){var d=new h(this.params).tohex(),f=new _.crypto.Signature({alg:this.params.sigalg});f.init(this.params.cakey),f.updateHex(d);var b=f.sign();this.params.sighex=b},this.getPEM=function(){return dn(this.tohex(),"X509 CRL")},this.tohex=function(){var d=this.params;if(d.tbsobj==null&&(d.tbsobj=new h(d)),d.sighex==null&&d.cakey!=null&&this.sign(),d.sighex==null)throw new Error("sighex or cakey parameter not defined");var f=[];f.push(d.tbsobj),f.push(new u({name:d.sigalg})),f.push(new o({hex:"00"+d.sighex}));var b=new a({array:f});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&(this.params=t)};me(_.asn1.x509.CRL,_.asn1.ASN1Object);_.asn1.x509.TBSCertList=function(t){_.asn1.x509.TBSCertList.superclass.constructor.call(this);var r=_,s=r.asn1,a=s.DERInteger,o=s.DERSequence,c=s.DERTaggedObject,u=s.DERObjectIdentifier,h=s.x509,d=h.AlgorithmIdentifier,f=h.Time,b=h.Extensions,A=h.X500Name;this.params=null,this.setByParam=function(g){this.params=g},this.getRevCertSequence=function(){for(var g=[],v=this.params.revcert,y=0;y<v.length;y++){var m=[new a(v[y].sn),new f(v[y].date)];v[y].ext!=null&&m.push(new b(v[y].ext)),g.push(new o({array:m}))}return new o({array:g})},this.tohex=function(){var g=[],v=this.params;if(v.version!=null){var y=v.version-1,m=new a({int:y});g.push(m)}if(g.push(new d({name:v.sigalg})),g.push(new A(v.issuer)),g.push(new f(v.thisupdate)),v.nextupdate!=null&&g.push(new f(v.nextupdate)),v.revcert!=null&&g.push(this.getRevCertSequence()),v.ext!=null){var D=new b(v.ext);g.push(new c({tag:"a0",explicit:!0,obj:D}))}var S=new o({array:g});return S.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};me(_.asn1.x509.TBSCertList,_.asn1.ASN1Object);_.asn1.x509.CRLEntry=function(t){_.asn1.x509.CRLEntry.superclass.constructor.call(this);var r=null,s=null,a=_,o=a.asn1;this.setCertSerial=function(c){this.sn=new o.DERInteger(c)},this.setRevocationDate=function(c){this.time=new o.x509.Time(c)},this.tohex=function(){var c=new o.DERSequence({array:[this.sn,this.time]});return this.TLV=c.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(t.time!==void 0&&this.setRevocationDate(t.time),t.sn!==void 0&&this.setCertSerial(t.sn))};me(_.asn1.x509.CRLEntry,_.asn1.ASN1Object);_.asn1.x509.CRLNumber=function(t){_.asn1.x509.CRLNumber.superclass.constructor.call(this,t),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new _.asn1.DERInteger(this.params.num),this.asn1ExtnValue.tohex()},this.oid="2.5.29.20",t!=null&&(this.params=t)};me(_.asn1.x509.CRLNumber,_.asn1.x509.Extension);_.asn1.x509.CRLReason=function(t){_.asn1.x509.CRLReason.superclass.constructor.call(this,t),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new _.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.tohex()},this.oid="2.5.29.21",t!=null&&(this.params=t)};me(_.asn1.x509.CRLReason,_.asn1.x509.Extension);_.asn1.x509.OCSPNonce=function(t){_.asn1.x509.OCSPNonce.superclass.constructor.call(this,t),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new _.asn1.DEROctetString(this.params),this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.2",t!=null&&(this.params=t)};me(_.asn1.x509.OCSPNonce,_.asn1.x509.Extension);_.asn1.x509.OCSPNoCheck=function(t){_.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,t),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new _.asn1.DERNull,this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.5",t!=null&&(this.params=t)};me(_.asn1.x509.OCSPNoCheck,_.asn1.x509.Extension);_.asn1.x509.AdobeTimeStamp=function(t){_.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,t);var r=_,s=r.asn1,a=s.DERInteger,o=s.DERBoolean,c=s.DERSequence,u=s.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var h=this.params,d=[new a(1)];return d.push(new u({uri:h.uri})),h.reqauth!=null&&d.push(new o(h.reqauth)),this.asn1ExtnValue=new c({array:d}),this.asn1ExtnValue.tohex()},this.oid="1.2.840.113583.1.1.9.1",t!==void 0&&this.setByParam(t)};me(_.asn1.x509.AdobeTimeStamp,_.asn1.x509.Extension);_.asn1.x509.X500Name=function(t){_.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var r=_,s=r.asn1,a=s.x509,o=a.RDN,c=gr;this.setByString=function(u,h){h!==void 0&&(this.sRule=h);var d=u.split("/");d.shift();for(var f=[],b=0;b<d.length;b++)if(d[b].match(/^[^=]+=.+$/))f.push(d[b]);else{var A=f.length-1;f[A]=f[A]+"/"+d[b]}for(var b=0;b<f.length;b++)this.asn1Array.push(new o({str:f[b],rule:this.sRule}))},this.setByLdapString=function(u,h){h!==void 0&&(this.sRule=h);var d=a.X500Name.ldapToCompat(u);this.setByString(d,h)},this.setByObject=function(u,h){h!==void 0&&(this.sRule=h);for(var d in u)if(u.hasOwnProperty(d)){var f=new o({str:d+"="+u[d],rule:this.sRule});this.asn1Array?this.asn1Array.push(f):this.asn1Array=[f]}},this.setByParam=function(u){if(u.rule!==void 0&&(this.sRule=u.rule),u.array!==void 0)this.paramArray=u.array;else if(u.str!==void 0)this.setByString(u.str);else if(u.ldapstr!==void 0)this.setByLdapString(u.ldapstr);else if(u.hex!==void 0)this.hTLV=u.hex;else if(u.certissuer!==void 0){var h=new tt;h.readCertPEM(u.certissuer),this.hTLV=h.getIssuerHex()}else if(u.certsubject!==void 0){var h=new tt;h.readCertPEM(u.certsubject),this.hTLV=h.getSubjectHex()}else typeof u=="object"&&u.certsubject===void 0&&u.certissuer===void 0&&this.setByObject(u)},this.tohex=function(){if(typeof this.hTLV=="string")return this.hTLV;if(this.asn1Array.length==0&&this.paramArray.length>0)for(var u=0;u<this.paramArray.length;u++){var h={array:this.paramArray[u]};this.sRule!="utf8"&&(h.rule=this.sRule);var d=new o(h);this.asn1Array.push(d)}var f=new s.DERSequence({array:this.asn1Array});return this.hTLV=f.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};me(_.asn1.x509.X500Name,_.asn1.ASN1Object);_.asn1.x509.X500Name.compatToLDAP=function(t){if(t.substr(0,1)!=="/")throw"malformed input";var r="";t=t.substr(1);var s=t.split("/");return s.reverse(),s=s.map(function(a){return a.replace(/,/,"\\,")}),s.join(",")};_.asn1.x509.X500Name.onelineToLDAP=function(t){return _.asn1.x509.X500Name.compatToLDAP(t)};_.asn1.x509.X500Name.ldapToCompat=function(t){for(var r=t.split(","),s=!1,a=[],o=0;r.length>0;o++){var c=r.shift();if(s===!0){var u=a.pop(),h=(u+","+c).replace(/\\,/g,",");a.push(h),s=!1}else a.push(c);c.substr(-1,1)==="\\"&&(s=!0)}return a=a.map(function(d){return d.replace("/","\\/")}),a.reverse(),"/"+a.join("/")};_.asn1.x509.X500Name.ldapToOneline=function(t){return _.asn1.x509.X500Name.ldapToCompat(t)};_.asn1.x509.RDN=function(t){_.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var r=_.asn1.x509.AttributeTypeAndValue;this.setByParam=function(s){s.rule!==void 0&&(this.sRule=s.rule),s.str!==void 0&&this.addByMultiValuedString(s.str),s.array!==void 0&&(this.paramArray=s.array)},this.addByString=function(s){this.asn1Array.push(new _.asn1.x509.AttributeTypeAndValue({str:s,rule:this.sRule}))},this.addByMultiValuedString=function(s){for(var a=_.asn1.x509.RDN.parseString(s),o=0;o<a.length;o++)this.addByString(a[o])},this.tohex=function(){if(this.asn1Array.length==0&&this.paramArray.length>0)for(var s=0;s<this.paramArray.length;s++){var a=this.paramArray[s];a.rule!==void 0&&this.sRule!="utf8"&&(a.rule=this.sRule);var o=new r(a);this.asn1Array.push(o)}var c=new _.asn1.DERSet({array:this.asn1Array});return this.TLV=c.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};me(_.asn1.x509.RDN,_.asn1.ASN1Object);_.asn1.x509.RDN.parseString=function(t){for(var r=t.split(/\+/),s=!1,a=[],o=0;r.length>0;o++){var c=r.shift();if(s===!0){var u=a.pop(),h=(u+"+"+c).replace(/\\\+/g,"+");a.push(h),s=!1}else a.push(c);c.substr(-1,1)==="\\"&&(s=!0)}for(var d=!1,f=[],o=0;a.length>0;o++){var c=a.shift();if(d===!0){var b=f.pop();if(c.match(/"$/)){var h=(b+"+"+c).replace(/^([^=]+)="(.*)"$/,"$1=$2");f.push(h),d=!1}else f.push(b+"+"+c)}else f.push(c);c.match(/^[^=]+="/)&&(d=!0)}return f};_.asn1.x509.AttributeTypeAndValue=function(t){_.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var r=_,s=r.asn1,a=s.DERSequence,o=s.DERUTF8String,c=s.DERPrintableString,u=s.DERTeletexString,h=s.DERIA5String,d=s.DERVisibleString,f=s.DERBMPString,b=r.lang.String.isMail,A=r.lang.String.isPrintable;this.setByParam=function(g){if(g.rule!==void 0&&(this.sRule=g.rule),g.ds!==void 0&&(this.dsType=g.ds),g.value===void 0&&g.str!==void 0){var v=g.str,y=v.match(/^([^=]+)=(.+)$/);if(y)this.sType=y[1],this.sValue=y[2];else throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr)}else this.sType=g.type,this.sValue=g.value},this.setByString=function(g,v){v!==void 0&&(this.sRule=v);var y=g.match(/^([^=]+)=(.+)$/);if(y)this.setByAttrTypeAndValueStr(y[1],y[2]);else throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr)},this._getDsType=function(){var g=this.sType,v=this.sValue,y=this.sRule;return y==="prn"?g=="CN"&&b(v)?"ia5":A(v)?"prn":"utf8":y==="utf8"?g=="CN"&&b(v)?"ia5":g=="C"?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(g,v,y){y!==void 0&&(this.sRule=y),this.sType=g,this.sValue=v},this.getValueObj=function(g,v){if(g=="utf8")return new o({str:v});if(g=="prn")return new c({str:v});if(g=="tel")return new u({str:v});if(g=="ia5")return new h({str:v});if(g=="vis")return new d({str:v});if(g=="bmp")return new f({str:v});throw new Error("unsupported directory string type: type="+g+" value="+v)},this.tohex=function(){this.dsType==null&&(this.dsType=this._getDsType());var g=_.asn1.x509.OID.atype2obj(this.sType),v=this.getValueObj(this.dsType,this.sValue),y=new a({array:[g,v]});return this.TLV=y.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};me(_.asn1.x509.AttributeTypeAndValue,_.asn1.ASN1Object);_.asn1.x509.SubjectPublicKeyInfo=function(t){_.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var r=null,s=null,a=_,o=a.asn1,c=o.DERInteger,u=o.DERBitString,h=o.DERObjectIdentifier,d=o.DERSequence,f=o.ASN1Util.newObject,b=o.x509,A=b.AlgorithmIdentifier,g=a.crypto,v=g.ECDSA,y=g.DSA;this.getASN1Object=function(){if(this.asn1AlgId==null||this.asn1SubjPKey==null)throw"algId and/or subjPubKey not set";var m=new d({array:[this.asn1AlgId,this.asn1SubjPKey]});return m},this.tohex=function(){var m=this.getASN1Object();return this.hTLV=m.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.setPubKey=function(m){try{if(m instanceof ct){var D=f({seq:[{int:{bigint:m.n}},{int:{int:m.e}}]}),S=D.tohex();this.asn1AlgId=new A({name:"rsaEncryption"}),this.asn1SubjPKey=new u({hex:"00"+S})}}catch{}try{if(m instanceof _.crypto.ECDSA){var F=new h({name:m.curveName});this.asn1AlgId=new A({name:"ecPublicKey",asn1params:F}),this.asn1SubjPKey=new u({hex:"00"+m.pubKeyHex})}}catch{}try{if(m instanceof _.crypto.DSA){var F=new f({seq:[{int:{bigint:m.p}},{int:{bigint:m.q}},{int:{bigint:m.g}}]});this.asn1AlgId=new A({name:"dsa",asn1params:F});var $=new c({bigint:m.y});this.asn1SubjPKey=new u({hex:"00"+$.tohex()})}}catch{}},t!==void 0&&this.setPubKey(t)};me(_.asn1.x509.SubjectPublicKeyInfo,_.asn1.ASN1Object);_.asn1.x509.Time=function(t){_.asn1.x509.Time.superclass.constructor.call(this);var r=null,s=null,a=_,o=a.asn1,c=o.DERUTCTime,u=o.DERGeneralizedTime;this.params=null,this.type=null,this.setTimeParams=function(h){this.timeParams=h},this.setByParam=function(h){this.params=h},this.getType=function(h){return h.match(/^[0-9]{12}Z$/)?"utc":h.match(/^[0-9]{14}Z$/)?"gen":h.match(/^[0-9]{12}\.[0-9]+Z$/)?"utc":h.match(/^[0-9]{14}\.[0-9]+Z$/)?"gen":null},this.tohex=function(){var h=this.params,d=null;if(typeof h=="string"&&(h={str:h}),h!=null&&h.str&&(h.type==null||h.type==null)&&(h.type=this.getType(h.str)),h!=null&&h.str?(h.type=="utc"&&(d=new c(h.str)),h.type=="gen"&&(d=new u(h.str))):this.type=="gen"?d=new u:d=new c,d==null)throw new Error("wrong setting for Time");return this.TLV=d.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};_.asn1.x509.Time_bak=function(t){_.asn1.x509.Time_bak.superclass.constructor.call(this);var r=null,s=null,a=_,o=a.asn1,c=o.DERUTCTime,u=o.DERGeneralizedTime;this.setTimeParams=function(h){this.timeParams=h},this.tohex=function(){var h=null;return this.timeParams!=null?this.type=="utc"?h=new c(this.timeParams):h=new u(this.timeParams):this.type=="utc"?h=new c:h=new u,this.TLV=h.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},this.type="utc",t!==void 0&&(t.type!==void 0?this.type=t.type:t.str!==void 0&&(t.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),t.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=t)};me(_.asn1.x509.Time,_.asn1.ASN1Object);_.asn1.x509.AlgorithmIdentifier=function(t){_.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var r=_,s=r.asn1,a=s.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.tohex=function(){if(this.nameAlg===null&&this.asn1Alg===null)throw new Error("algorithm not specified");if(this.nameAlg!==null){var c=null;for(var u in a)u===this.nameAlg&&(c=a[u]);if(c!==null)return this.hTLV=c,this.hTLV}this.nameAlg!==null&&this.asn1Alg===null&&(this.asn1Alg=s.x509.OID.name2obj(this.nameAlg));var h=[this.asn1Alg];this.asn1Params!==null&&h.push(this.asn1Params);var d=new s.DERSequence({array:h});return this.hTLV=d.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(t.name!==void 0&&(this.nameAlg=t.name),t.asn1params!==void 0&&(this.asn1Params=t.asn1params),t.paramempty!==void 0&&(this.paramEmpty=t.paramempty)),this.asn1Params===null&&this.paramEmpty===!1&&this.nameAlg!==null){this.nameAlg.name!==void 0&&(this.nameAlg=this.nameAlg.name);var o=this.nameAlg.toLowerCase();o.substr(-7,7)!=="withdsa"&&o.substr(-9,9)!=="withecdsa"&&(this.asn1Params=new s.DERNull)}};me(_.asn1.x509.AlgorithmIdentifier,_.asn1.ASN1Object);_.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"};_.asn1.x509.GeneralName=function(t){_.asn1.x509.GeneralName.superclass.constructor.call(this);var r={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87",otherName:"a0"},s=_,a=s.asn1,o=a.x509,c=o.X500Name,u=o.OtherName,h=a.DERIA5String,d=a.DERPrintableString,f=a.DEROctetString,b=a.DERTaggedObject,A=a.ASN1Object,g=Error;this.params=null,this.setByParam=function(v){this.params=v},this.tohex=function(){var v=this.params,y,D,m,D=!1;if(v.other!==void 0)y="a0",m=new u(v.other);else if(v.rfc822!==void 0)y="81",m=new h({str:v.rfc822});else if(v.dns!==void 0)y="82",m=new h({str:v.dns});else if(v.dn!==void 0)y="a4",D=!0,typeof v.dn=="string"?m=new c({str:v.dn}):v.dn instanceof _.asn1.x509.X500Name?m=v.dn:m=new c(v.dn);else if(v.ldapdn!==void 0)y="a4",D=!0,m=new c({ldapstr:v.ldapdn});else if(v.certissuer!==void 0||v.certsubj!==void 0){y="a4",D=!0;var S,F,$=null;if(v.certsubj!==void 0?(S=!1,F=v.certsubj):(S=!0,F=v.certissuer),F.match(/^[0-9A-Fa-f]+$/)&&$==F,F.indexOf("-----BEGIN ")!=-1&&($=gr(F)),$==null)throw new Error("certsubj/certissuer not cert");var k=new tt;k.hex=$;var O;S?O=k.getIssuerHex():O=k.getSubjectHex(),m=new A,m.hTLV=O}else if(v.uri!==void 0)y="86",m=new h({str:v.uri});else if(v.ip!==void 0){y="87";var z,H=v.ip;try{if(H.match(/^[0-9a-f]+$/)){var P=H.length;if(P==8||P==16||P==32||P==64)z=H;else throw"err"}else z=Jh(H)}catch(N){throw new g("malformed IP address: "+v.ip+":"+N.message)}m=new f({hex:z})}else throw new g("improper params");var R=new b({tag:y,explicit:D,obj:m});return R.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};me(_.asn1.x509.GeneralName,_.asn1.ASN1Object);_.asn1.x509.GeneralNames=function(t){_.asn1.x509.GeneralNames.superclass.constructor.call(this);var r=null,s=_,a=s.asn1;this.setByParamArray=function(o){for(var c=0;c<o.length;c++){var u=new a.x509.GeneralName(o[c]);this.asn1Array.push(u)}},this.tohex=function(){var o=new a.DERSequence({array:this.asn1Array});return o.tohex()},this.getEncodedHex=function(){return this.tohex()},this.asn1Array=new Array,typeof t<"u"&&this.setByParamArray(t)};me(_.asn1.x509.GeneralNames,_.asn1.ASN1Object);_.asn1.x509.OtherName=function(t){_.asn1.x509.OtherName.superclass.constructor.call(this);var r=null,s=null,a=_,o=a.asn1,c=o.DERObjectIdentifier,u=o.DERSequence,h=o.ASN1Util.newObject;this.params=null,this.setByParam=function(d){this.params=d},this.tohex=function(){var d=this.params;if(d.oid==null||d.value==null)throw new Error("oid or value not specified");var f=new c({oid:d.oid}),b=h({tag:{tag:"a0",explicit:!0,obj:d.value}}),A=new u({array:[f,b]});return A.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};me(_.asn1.x509.OtherName,_.asn1.ASN1Object);_.asn1.x509.OID=new function(){var t=_.asn1.DERObjectIdentifier;this.name2oidList={"aes128-CBC":"2.16.840.1.101.3.4.1.2","aes256-CBC":"2.16.840.1.101.3.4.1.42",sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",hmacWithSHA1:"1.2.840.113549.2.7",hmacWithSHA224:"1.2.840.113549.2.8",hmacWithSHA256:"1.2.840.113549.2.9",hmacWithSHA384:"1.2.840.113549.2.10",hmacWithSHA512:"1.2.840.113549.2.11",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",policyMappings:"2.5.29.33",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",inhibitAnyPolicy:"2.5.29.54",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",smtpUTF8Mailbox:"1.3.6.1.5.5.7.8.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",secp521r1:"1.3.132.0.35",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1",smimeMailboxLegacy:"2.23.140.1.5.1.1",smimeMailboxMulti:"2.23.140.1.5.1.2",smimeMailboxStrict:"2.23.140.1.5.1.3",smimeOrganizationLegacy:"2.23.140.1.5.2.1",smimeOrganizationMulti:"2.23.140.1.5.2.2",smimeOrganizationStrict:"2.23.140.1.5.2.3",smimeSponsorLegacy:"2.23.140.1.5.3.1",smimeSponsorMulti:"2.23.140.1.5.3.2",smimeSponsorStrict:"2.23.140.1.5.3.3",smimeIndividualLegacy:"2.23.140.1.5.4.1",smimeIndividualMulti:"2.23.140.1.5.4.2",smimeIndividualStrict:"2.23.140.1.5.4.3"},this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",GN:"2.5.4.42",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.objCache={},this.name2obj=function(r){if(typeof this.objCache[r]<"u")return this.objCache[r];if(typeof this.name2oidList[r]>"u")throw"Name of ObjectIdentifier not defined: "+r;var s=this.name2oidList[r],a=new t({oid:s});return this.objCache[r]=a,a},this.atype2obj=function(r){if(this.objCache[r]!==void 0)return this.objCache[r];var s;if(r.match(/^\d+\.\d+\.[0-9.]+$/))s=r;else if(this.atype2oidList[r]!==void 0)s=this.atype2oidList[r];else if(this.name2oidList[r]!==void 0)s=this.name2oidList[r];else throw new Error("AttributeType name undefined: "+r);var a=new t({oid:s});return this.objCache[r]=a,a},this.registerOIDs=function(r){if(this.checkOIDs(r))for(var s in r)this.name2oidList[s]=r[s]},this.checkOIDs=function(r){try{var s=Object.keys(r);return s.length==0?!1:(s.map(function(a,o,c){var u=this[a];if(!u.match(/^[0-2]\.[0-9.]+$/))throw new Error("value is not OID")},r),!0)}catch{return!1}}};_.asn1.x509.OID.oid2name=function(t){var r=_.asn1.x509.OID.name2oidList;for(var s in r)if(r[s]==t)return s;return""};_.asn1.x509.OID.oid2atype=function(t){var r=_.asn1.x509.OID.atype2oidList;for(var s in r)if(r[s]==t)return s;return t};_.asn1.x509.OID.name2oid=function(t){if(t.match(/^[0-9.]+$/))return t;var r=_.asn1.x509.OID.name2oidList;return r[t]===void 0?"":r[t]};_.asn1.x509.X509Util={};_.asn1.x509.X509Util.newCertPEM=function(t){var r=_.asn1.x509,s=r.TBSCertificate,a=r.Certificate,o=new a(t);return o.getPEM()};(typeof _>"u"||!_)&&(_={});(typeof _.asn1>"u"||!_.asn1)&&(_.asn1={});(typeof _.asn1.cms>"u"||!_.asn1.cms)&&(_.asn1.cms={});_.asn1.cms.Attribute=function(t){var r=Error,s=_,a=s.asn1,o=a.DERSequence,c=a.DERSet,u=a.DERObjectIdentifier;this.params=null,this.typeOid=null,this.setByParam=function(h){this.params=h},this.getValueArray=function(){throw new r("not yet implemented abstract")},this.tohex=function(){var h=new u({oid:this.typeOid}),d=new c({array:this.getValueArray()}),f=new o({array:[h,d]});return f.tohex()},this.getEncodedHex=function(){return this.tohex()}};me(_.asn1.cms.Attribute,_.asn1.ASN1Object);_.asn1.cms.ContentType=function(t){var r=_,s=r.asn1;s.cms.ContentType.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.3",this.getValueArray=function(){var a=new s.DERObjectIdentifier(this.params.type);return[a]},t!=null&&this.setByParam(t)};me(_.asn1.cms.ContentType,_.asn1.cms.Attribute);_.asn1.cms.MessageDigest=function(t){var r=_,s=r.asn1,a=s.DEROctetString,o=s.cms;o.MessageDigest.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.4",this.getValueArray=function(){var c=new a(this.params);return[c]},t!=null&&this.setByParam(t)};me(_.asn1.cms.MessageDigest,_.asn1.cms.Attribute);_.asn1.cms.SigningTime=function(t){var r=_,s=r.asn1;s.cms.SigningTime.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.5",this.getValueArray=function(){var a=new s.x509.Time(this.params);return[a]},t!=null&&this.setByParam(t)};me(_.asn1.cms.SigningTime,_.asn1.cms.Attribute);_.asn1.cms.SigningCertificate=function(t){var r=Error,s=_,a=s.asn1,o=a.DERSequence,c=a.cms,u=c.ESSCertID,h=s.crypto;c.SigningCertificate.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.12",this.getValueArray=function(){if(this.params==null||this.params==null||this.params.array==null)throw new r("parameter 'array' not specified");for(var d=this.params.array,f=[],b=0;b<d.length;b++){var A=d[b];t.hasis==!1&&typeof A=="string"&&(A.indexOf("-----BEGIN")!=-1||Ce.isASN1HEX(A))&&(A={cert:A}),A.hasis!=!1&&t.hasis==!1&&(A.hasis=!1),f.push(new u(A))}var g=new o({array:f}),v=new o({array:[g]});return[v]},t!=null&&this.setByParam(t)};me(_.asn1.cms.SigningCertificate,_.asn1.cms.Attribute);_.asn1.cms.ESSCertID=function(t){_.asn1.cms.ESSCertID.superclass.constructor.call(this);var r=Error,s=_,a=s.asn1,o=a.DEROctetString,c=a.DERSequence,u=a.cms.IssuerSerial;this.params=null,this.getCertHash=function(h,d){if(h.hash!=null)return h.hash;if(typeof h=="string"&&h.indexOf("-----BEGIN")==-1&&!Ce.isASN1HEX(h))return h;var f;if(typeof h=="string")f=h;else if(h.cert!=null)f=h.cert;else throw new r("hash nor cert unspecified");var b;f.indexOf("-----BEGIN")!=-1?b=gr(f):b=f,typeof h=="string"&&(h.indexOf("-----BEGIN")!=-1?b=gr(h):Ce.isASN1HEX(h)&&(b=h));var A;if(h.alg!=null)A=h.alg;else if(d!=null)A=d;else throw new r("hash alg unspecified");return s.crypto.Util.hashHex(b,A)},this.tohex=function(){var h=this.params,d=this.getCertHash(h,"sha1"),f=[];f.push(new o({hex:d})),(typeof h=="string"&&h.indexOf("-----BEGIN")!=-1||h.cert!=null&&h.hasis!=!1||h.issuer!=null&&h.serial!=null)&&f.push(new u(h));var b=new c({array:f});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};me(_.asn1.cms.ESSCertID,_.asn1.ASN1Object);_.asn1.cms.SigningCertificateV2=function(t){var r=Error,s=_,a=s.asn1,o=a.DERSequence,c=a.x509,u=a.cms,h=u.ESSCertIDv2,d=s.crypto;u.SigningCertificateV2.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.47",this.getValueArray=function(){if(this.params==null||this.params==null||this.params.array==null)throw new r("parameter 'array' not specified");for(var f=this.params.array,b=[],A=0;A<f.length;A++){var g=f[A];(t.alg!=null||t.hasis==!1)&&typeof g=="string"&&(g.indexOf("-----BEGIN")!=-1||Ce.isASN1HEX(g))&&(g={cert:g}),g.alg==null&&t.alg!=null&&(g.alg=t.alg),g.hasis!=!1&&t.hasis==!1&&(g.hasis=!1),b.push(new h(g))}var v=new o({array:b}),y=new o({array:[v]});return[y]},t!=null&&this.setByParam(t)};me(_.asn1.cms.SigningCertificateV2,_.asn1.cms.Attribute);_.asn1.cms.ESSCertIDv2=function(t){_.asn1.cms.ESSCertIDv2.superclass.constructor.call(this);var r=Error,s=_,a=s.asn1,o=a.DEROctetString,c=a.DERSequence,u=a.cms.IssuerSerial,h=a.x509.AlgorithmIdentifier;this.params=null,this.tohex=function(){var d=this.params,f=this.getCertHash(d,"sha256"),b=[];d.alg!=null&&d.alg!="sha256"&&b.push(new h({name:d.alg})),b.push(new o({hex:f})),(typeof d=="string"&&d.indexOf("-----BEGIN")!=-1||d.cert!=null&&d.hasis!=!1||d.issuer!=null&&d.serial!=null)&&b.push(new u(d));var A=new c({array:b});return A.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};me(_.asn1.cms.ESSCertIDv2,_.asn1.cms.ESSCertID);_.asn1.cms.IssuerSerial=function(t){var r=Error,s=_,a=s.asn1,o=a.DERInteger,c=a.DERSequence,u=a.cms,h=a.x509,d=h.GeneralNames,f=tt;u.IssuerSerial.superclass.constructor.call(this),this.setByParam=function(b){this.params=b},this.tohex=function(){var b=this.params,A,g;if(typeof b=="string"&&b.indexOf("-----BEGIN")!=-1||b.cert!=null){var v;b.cert!=null?v=b.cert:v=b;var y=new f;y.readCertPEM(v),A=y.getIssuer(),g={hex:y.getSerialNumberHex()}}else if(b.issuer!=null&&b.serial)A=b.issuer,g=b.serial;else throw new r("cert or issuer and serial parameter not specified");var m=new d([{dn:A}]),D=new o(g),S=new c({array:[m,D]});return S.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};me(_.asn1.cms.IssuerSerial,_.asn1.ASN1Object);_.asn1.cms.SignerIdentifier=function(t){var r=_,s=r.asn1,a=s.DERInteger,o=s.DERSequence,c=s.cms,u=c.IssuerAndSerialNumber,h=c.SubjectKeyIdentifier,d=s.x509,f=d.X500Name,b=tt,A=Error;c.SignerIdentifier.superclass.constructor.call(this),this.params=null,this.tohex=function(){var g=this.params;if(g.type=="isssn"){var v=new u(g);return v.tohex()}else if(g.type=="skid"){var y=new h(g);return y.tohex()}else throw new Error("wrong property for isssn or skid")},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};me(_.asn1.cms.SignerIdentifier,_.asn1.ASN1Object);_.asn1.cms.IssuerAndSerialNumber=function(t){var r=_,s=r.asn1,a=s.DERInteger,o=s.DERSequence,c=s.cms,u=s.x509,h=u.X500Name,d=tt,f=Error;c.IssuerAndSerialNumber.superclass.constructor.call(this),this.params=null,this.tohex=function(){var b=this.params,A,g;if(typeof b=="string"&&b.indexOf("-----BEGIN")!=-1||b.cert!=null){var v;b.cert!=null?v=b.cert:v=b;var y=new d;y.readCertPEM(v),A=y.getIssuer(),g={hex:y.getSerialNumberHex()}}else if(b.issuer!=null&&b.serial)A=b.issuer,g=b.serial;else throw new f("cert or issuer and serial parameter not specified");var m=new h(A),D=new a(g),S=new o({array:[m,D]});return S.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(b){this.params=b},t!=null&&this.setByParam(t)};me(_.asn1.cms.IssuerAndSerialNumber,_.asn1.ASN1Object);_.asn1.cms.SubjectKeyIdentifier=function(t){var r=_,s=r.asn1,a=s.DERInteger,o=s.DERSequence,c=s.ASN1Util.newObject,u=s.cms,h=u.IssuerAndSerialName,d=u.SubjectKeyIdentifier,f=s.x509,b=f.X500Name,A=tt,g=Error;u.SubjectKeyIdentifier.superclass.constructor.call(this),this.tohex=function(){var v=this.params;if(v.cert==null&&v.skid==null)throw new g("property cert nor skid undefined");var y;if(v.cert!=null){var m=new A(v.cert),D=m.getExtSubjectKeyIdentifier();y=D.kid.hex}else v.skid!=null&&(y=v.skid);var S=c({tag:{tage:"a0",obj:{octstr:{hex:y}}}});return S.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};me(_.asn1.cms.SubjectKeyIdentifier,_.asn1.ASN1Object);_.asn1.cms.AttributeList=function(t){var r=Error,s=_,a=s.asn1,o=a.DERSet,c=a.cms;c.AttributeList.superclass.constructor.call(this),this.params=null,this.hTLV=null,this.setByParam=function(u){this.params=u},this.tohex=function(){var u=this.params;if(this.hTLV!=null)return this.hTLV;var h=!0;u.sortflag!=null&&(h=u.sortflag);for(var d=u.array,f=[],b=0;b<d.length;b++){var A=d[b],g=A.attr;if(g=="contentType")f.push(new c.ContentType(A));else if(g=="messageDigest")f.push(new c.MessageDigest(A));else if(g=="signingTime")f.push(new c.SigningTime(A));else if(g=="signingCertificate")f.push(new c.SigningCertificate(A));else if(g=="signingCertificateV2")f.push(new c.SigningCertificateV2(A));else if(g=="signaturePolicyIdentifier")f.push(new _.asn1.cades.SignaturePolicyIdentifier(A));else if(g=="signatureTimeStamp"||g=="timeStampToken")f.push(new _.asn1.cades.SignatureTimeStamp(A));else throw new r("unknown attr: "+g)}var v=new o({array:f,sortflag:h});return this.hTLV=v.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};me(_.asn1.cms.AttributeList,_.asn1.ASN1Object);_.asn1.cms.SignerInfo=function(t){var r=Error,s=_,a=s.asn1,o=a.DERInteger,c=a.DEROctetString,u=a.DERSequence,h=a.DERTaggedObject,d=a.cms,f=d.SignerIdentifier,b=d.AttributeList,A=d.ContentType,g=d.EncapsulatedContentInfo,v=d.MessageDigest,y=d.SignedData,m=a.x509,D=m.AlgorithmIdentifier,S=s.crypto,F=Pt;d.SignerInfo.superclass.constructor.call(this),this.params=null,this.sign=function(){var $=this.params,k=$.sigalg,O=new b($.sattrs).tohex(),z=F.getKey($.signkey),H=new S.Signature({alg:k});H.init(z),H.updateHex(O);var P=H.sign();$.sighex=P},this.tohex=function(){var $=this.params,k=[];if(k.push(new o({int:$.version})),k.push(new f($.id)),k.push(new D({name:$.hashalg})),$.sattrs!=null){var O=new b($.sattrs);try{k.push(new h({tag:"a0",explicit:!1,obj:O}))}catch(H){throw new r("si sattr error: "+H)}}if($.sigalgfield!=null?k.push(new D({name:$.sigalgfield})):k.push(new D({name:$.sigalg})),$.sighex==null&&$.signkey!=null&&this.sign(),k.push(new c({hex:$.sighex})),$.uattrs!=null){var O=new b($.uattrs);try{k.push(new h({tag:"a1",explicit:!1,obj:O}))}catch(P){throw new r("si uattr error: "+P)}}var z=new u({array:k});return z.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};me(_.asn1.cms.SignerInfo,_.asn1.ASN1Object);_.asn1.cms.EncapsulatedContentInfo=function(t){var r=_,s=r.asn1,a=s.DERTaggedObject,o=s.DERSequence,c=s.DERObjectIdentifier,u=s.DEROctetString,h=s.cms;h.EncapsulatedContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var d=this.params,f=[];if(f.push(new c(d.type)),d.content!=null&&(d.content.hex!=null||d.content.str!=null)&&d.isDetached!=!0){var b=new u(d.content),A=new a({tag:"a0",explicit:!0,obj:b});f.push(A)}var g=new o({array:f});return g.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(d){this.params=d},t!=null&&this.setByParam(t)};me(_.asn1.cms.EncapsulatedContentInfo,_.asn1.ASN1Object);_.asn1.cms.ContentInfo=function(t){var r=_,s=r.asn1,a=s.DERTaggedObject,o=s.DERSequence,c=s.DERObjectIdentifier,u=s.x509,h=u.OID.name2obj;_.asn1.cms.ContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var d=this.params,f=[];f.push(new c(d.type));var b=new a({tag:"a0",explicit:!0,obj:d.obj});f.push(b);var A=new o({array:f});return A.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(d){this.params=d},t!=null&&this.setByParam(t)};me(_.asn1.cms.ContentInfo,_.asn1.ASN1Object);_.asn1.cms.SignedData=function(t){var r=Error,s=_,a=s.asn1,o=a.ASN1Object,c=a.DERInteger,u=a.DERSet,h=a.DERSequence,d=a.DERTaggedObject,f=a.cms,b=f.EncapsulatedContentInfo,A=f.SignerInfo,g=f.ContentInfo,v=f.CertificateSet,y=f.RevocationInfoChoices,m=a.x509,D=m.AlgorithmIdentifier;_.asn1.cms.SignedData.superclass.constructor.call(this),this.params=null,this.checkAndFixParam=function(){var S=this.params;this._setDigestAlgs(S),this._setContentTypeByEContent(S),this._setMessageDigestByEContent(S),this._setSignerInfoVersion(S),this._setSignedDataVersion(S)},this._setDigestAlgs=function(S){for(var F={},$=S.sinfos,k=0;k<$.length;k++){var O=$[k];F[O.hashalg]=1}S.hashalgs=Object.keys(F).sort()},this._setContentTypeByEContent=function(S){for(var F=S.econtent.type,$=S.sinfos,k=0;k<$.length;k++){var O=$[k],z=this._getAttrParamByName(O,"contentType");z.type=F}},this._setMessageDigestByEContent=function(S){var F=S.econtent,$=S.econtent.type,k=F.content.hex;k==null&&F.type=="data"&&F.content.str!=null&&(k=Mi(F.content.str));for(var O=S.sinfos,z=0;z<O.length;z++){var H=O[z],P=H.hashalg,R=this._getAttrParamByName(H,"messageDigest"),N=_.crypto.Util.hashHex(k,P);R.hex=N}},this._getAttrParamByName=function(S,F){for(var $=S.sattrs.array,k=0;k<$.length;k++)if($[k].attr==F)return $[k]},this._setSignerInfoVersion=function(S){for(var F=S.sinfos,$=0;$<F.length;$++){var k=F[$],O=1;k.id.type=="skid"&&(O=3),k.version=O}},this._setSignedDataVersion=function(S){var F=this._getSignedDataVersion(S);S.version=F},this._getSignedDataVersion=function(S){if(S.revinfos!=null)for(var F=S.revinfos,$=0;$<F.length;$++){var k=F[$];if(k.ocsp!=null)return 5}for(var O=S.sinfos,$=0;$<O.length;$++){var z=S.sinfos[$];if(z.version==3)return 3}return S.econtent.type!="data"?3:1},this.tohex=function(){var S=this.params;this.getEncodedHexPrepare!=null&&this.getEncodedHexPrepare(),S.fixed!=!0&&this.checkAndFixParam();var F=[];F.push(new c({int:S.version}));for(var $=[],k=0;k<S.hashalgs.length;k++){var O=S.hashalgs[k];$.push(new D({name:O}))}F.push(new u({array:$})),F.push(new b(S.econtent)),S.certs!=null&&F.push(new v(S.certs)),S.revinfos!=null&&F.push(new y(S.revinfos));for(var z=[],k=0;k<S.sinfos.length;k++){var H=S.sinfos[k];z.push(new A(H))}F.push(new u({array:z}));var P=new h({array:F});return P.tohex()},this.getEncodedHex=function(){return this.tohex()},this.getContentInfo=function(){var S=new g({type:"signed-data",obj:this});return S},this.getContentInfoEncodedHex=function(){return this.getContentInfo().tohex()},t!=null&&this.setByParam(t)};me(_.asn1.cms.SignedData,_.asn1.ASN1Object);_.asn1.cms.CertificateSet=function(t){_.asn1.cms.CertificateSet.superclass.constructor.call(this);var r=Error,s=_.asn1,a=s.DERTaggedObject,o=s.DERSet,c=s.ASN1Object;this.params=null,this.tohex=function(){var u=this.params,h=[],d;if(u instanceof Array)d=u;else if(u.array!=null)d=u.array;else throw new r("cert array not specified");for(var f=0;f<d.length;f++){var b=d[f],A=gr(b),g=new c;g.hTLV=A,h.push(g)}var v={array:h};u.sortflag==!1&&(v.sortflag=!1);var y=new o(v),m=new a({tag:"a0",explicit:!1,obj:y});return m.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};me(_.asn1.cms.CertificateSet,_.asn1.ASN1Object);_.asn1.cms.RevocationInfoChoices=function(t){_.asn1.cms.RevocationInfoChoices.superclass.constructor.call(this),this.params=null,this.tohex=function(){var r=this.params;if(!r instanceof Array)throw new Error("params is not array");for(var s=[],a=0;a<r.length;a++)s.push(new _.asn1.cms.RevocationInfoChoice(r[a]));var o=_.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:{set:s}}});return o.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};me(_.asn1.cms.RevocationInfoChoices,_.asn1.ASN1Object);_.asn1.cms.RevocationInfoChoice=function(t){_.asn1.cms.RevocationInfoChoice.superclass.constructor.call(this),this.params=null,this.tohex=function(){var r=this.params;if(r.crl!=null&&typeof r.crl=="string"){var s=r.crl;return r.crl.indexOf("-----BEGIN")!=-1&&(s=gr(r.crl)),s}else if(r.ocsp!=null){var a=_.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:new _.asn1.cms.OtherRevocationFormat(r)}});return a.tohex()}else throw new Error("property crl or ocsp undefined")},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};me(_.asn1.cms.RevocationInfoChoice,_.asn1.ASN1Object);_.asn1.cms.OtherRevocationFormat=function(t){_.asn1.cms.OtherRevocationFormat.superclass.constructor.call(this);var r=Error,s=_,a=s.asn1,o=a.ASN1Util.newObject,c=s.lang.String.isHex;this.params=null,this.tohex=function(){var u=this.params;if(u.ocsp==null)throw new r("property ocsp not specified");if(!c(u.ocsp)||!Ce.isASN1HEX(u.ocsp))throw new r("ocsp value not ASN.1 hex string");var h=o({seq:[{oid:"1.3.6.1.5.5.7.16.2"},{asn1:{tlv:u.ocsp}}]});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};me(_.asn1.cms.OtherRevocationFormat,_.asn1.ASN1Object);_.asn1.cms.CMSUtil=new function(){};_.asn1.cms.CMSUtil.newSignedData=function(t){return new _.asn1.cms.SignedData(t)};_.asn1.cms.CMSUtil.verifySignedData=function(t){var r=_,s=r.asn1,a=s.cms,o=a.SignerInfo,c=a.SignedData,u=a.SigningTime,h=a.SigningCertificate,d=a.SigningCertificateV2,f=s.cades,b=f.SignaturePolicyIdentifier,A=r.lang.String.isHex,g=Ce,v=g.getVbyList,y=g.getTLVbyList,m=g.getIdxbyList,D=g.getChildIdx,S=g.getTLV,F=g.oidname,$=r.crypto.Util.hashHex;t.cms===void 0&&A(t.cms);var k=t.cms,O=function(W,Z){for(var ae,He=3;He<6;He++)if(ae=m(W,0,[1,0,He]),ae!==void 0){var Ie=W.substr(ae,2);Ie==="a0"&&(Z.certsIdx=ae),Ie==="a1"&&(Z.revinfosIdx=ae),Ie==="31"&&(Z.signerinfosIdx=ae)}},z=function(W,Z){var ae=Z.signerinfosIdx;if(ae!==void 0){var He=D(W,ae);Z.signerInfoIdxList=He;for(var Ie=0;Ie<He.length;Ie++){var J=He[Ie],oe={idx:J};H(W,oe),Z.signerInfos.push(oe)}}},H=function(W,Z){var ae=Z.idx;Z.signerid_issuer1=y(W,ae,[1,0],"30"),Z.signerid_serial1=v(W,ae,[1,1],"02"),Z.hashalg=F(v(W,ae,[2,0],"06"));var He=m(W,ae,[3],"a0");Z.idxSignedAttrs=He,P(W,Z,He);var Ie=D(W,ae),J=Ie.length;if(J<6)throw"malformed SignerInfo";Z.sigalg=F(v(W,ae,[J-2,0],"06")),Z.sigval=v(W,ae,[J-1],"04")},P=function(W,Z,ae){var He=D(W,ae);Z.signedAttrIdxList=He;for(var Ie=0;Ie<He.length;Ie++){var J=He[Ie],oe=v(W,J,[0],"06"),be;oe==="2a864886f70d010905"?(be=Wt(v(W,J,[1,0])),Z.saSigningTime=be):oe==="2a864886f70d010904"&&(be=v(W,J,[1,0],"04"),Z.saMessageDigest=be)}},R=function(W,Z){if(v(W,0,[0],"06")!=="2a864886f70d010702")return Z;Z.cmsType="signedData",Z.econtent=v(W,0,[1,0,2,1,0]),O(W,Z),Z.signerInfos=[],z(W,Z)},N=function(W,Z){for(var ae=Z.parse.signerInfos,He=ae.length,Ie=!0,J=0;J<He;J++){var oe=ae[J];V(W,Z,oe,J),oe.isValid||(Ie=!1)}Z.isValid=Ie},x=function(W,Z,ae,He){var Ie=Z.parse.certsIdx,J;if(Z.certs===void 0){J=[],Z.certkeys=[];for(var oe=D(W,Ie),be=0;be<oe.length;be++){var Fe=S(W,oe[be]),Pe=new tt;Pe.readCertHex(Fe),J[be]=Pe,Z.certkeys[be]=Pe.getPublicKey()}Z.certs=J}else J=Z.certs;Z.cccc=J.length,Z.cccci=oe.length;for(var be=0;be<J.length;be++){var _t=Pe.getIssuerHex(),dt=Pe.getSerialNumberHex();ae.signerid_issuer1===_t&&ae.signerid_serial1===dt&&(ae.certkey_idx=be)}},V=function(W,Z,ae,He){ae.verifyDetail={};var Ie=ae.verifyDetail,J=Z.parse.econtent,oe=ae.hashalg,be=ae.saMessageDigest;Ie.validMessageDigest=!1,$(J,oe)===be&&(Ie.validMessageDigest=!0),x(W,Z,ae,He),Ie.validSignatureValue=!1;var Fe=ae.sigalg,Pe="31"+S(W,ae.idxSignedAttrs).substr(2);ae.signedattrshex=Pe;var _t=Z.certs[ae.certkey_idx].getPublicKey(),dt=new _.crypto.Signature({alg:Fe});dt.init(_t),dt.updateHex(Pe);var ye=dt.verify(ae.sigval);Ie.validSignatureValue_isValid=ye,ye===!0&&(Ie.validSignatureValue=!0),ae.isValid=!1,Ie.validMessageDigest&&Ie.validSignatureValue&&(ae.isValid=!0)},Y=function(){},G={isValid:!1,parse:{}};return R(k,G.parse),N(k,G),G};_.asn1.cms.CMSParser=function(){var t=Error,r=tt,s=new r,a=Ce,o=a.getV,c=a.getTLV,u=a.getIdxbyList,h=a.getTLVbyList,d=a.getTLVbyListEx,f=a.getVbyList,b=a.getVbyListEx,A=a.getChildIdx;this.getCMSSignedData=function(g){var v=h(g,0,[1,0]),y=this.getSignedData(v);return y},this.getSignedData=function(g){var v=A(g,0),y={},m=o(g,v[0]),D=parseInt(m,16);y.version=D;var S=c(g,v[1]);y.hashalgs=this.getHashAlgArray(S);var F=c(g,v[2]);y.econtent=this.getEContent(F);var $=d(g,0,["[0]"]);$!=null&&(y.certs=this.getCertificateSet($));var k=d(g,0,["[1]"]);k!=null;var O=d(g,0,[3]);return y.sinfos=this.getSignerInfos(O),y},this.getHashAlgArray=function(g){for(var v=A(g,0),y=new r,m=[],D=0;D<v.length;D++){var S=c(g,v[D]),F=y.getAlgorithmIdentifierName(S);m.push(F)}return m},this.getEContent=function(g){var v={},y=f(g,0,[0]),m=f(g,0,[1,0]);return v.type=_.asn1.x509.OID.oid2name(Ce.hextooidstr(y)),v.content={hex:m},v},this.getSignerInfos=function(g){for(var v=[],y=A(g,0),m=0;m<y.length;m++){var D=c(g,y[m]),S=this.getSignerInfo(D);v.push(S)}return v},this.getSignerInfo=function(g){var v={},y=A(g,0),m=a.getInt(g,y[0],-1);m!=-1&&(v.version=m);var D=c(g,y[1]),S=this.getIssuerAndSerialNumber(D);v.id=S;var F=c(g,y[2]),$=s.getAlgorithmIdentifierName(F);v.hashalg=$;var k=d(g,0,["[0]"]);if(k!=null){var O=this.getAttributeList(k);v.sattrs=O}var z=d(g,0,[3]),H=s.getAlgorithmIdentifierName(z);v.sigalg=H;var P=b(g,0,[4]);v.sighex=P;var R=d(g,0,["[1]"]);if(R!=null){var N=this.getAttributeList(R);v.uattrs=N}return v},this.getSignerIdentifier=function(g){if(g.substr(0,2)=="30")return this.getIssuerAndSerialNumber(g);throw new Error("SKID of signerIdentifier not supported")},this.getIssuerAndSerialNumber=function(g){var v={type:"isssn"},y=A(g,0),m=c(g,y[0]);v.issuer=s.getX500Name(m);var D=o(g,y[1]);return v.serial={hex:D},v},this.getAttributeList=function(g){for(var v=[],y=A(g,0),m=0;m<y.length;m++){var D=c(g,y[m]),S=this.getAttribute(D);v.push(S)}return{array:v}},this.getAttribute=function(g){var v={},y=A(g,0),m=a.getOID(g,y[0]),D=_.asn1.x509.OID.oid2name(m);v.attr=D;var S=c(g,y[1]),F=A(S,0);if(F.length==1)v.valhex=c(S,F[0]);else{for(var $=[],k=0;k<F.length;k++)$.push(c(S,F[k]));v.valhex=$}return D=="contentType"?this.setContentType(v):D=="messageDigest"?this.setMessageDigest(v):D=="signingTime"?this.setSigningTime(v):D=="signingCertificate"?this.setSigningCertificate(v):D=="signingCertificateV2"?this.setSigningCertificateV2(v):D=="signaturePolicyIdentifier"&&this.setSignaturePolicyIdentifier(v),v},this.setContentType=function(g){var v=a.getOIDName(g.valhex,0,null);v!=null&&(g.type=v,delete g.valhex)},this.setSigningTime=function(g){var v=o(g.valhex,0),y=Wt(v);g.str=y,delete g.valhex},this.setMessageDigest=function(g){var v=o(g.valhex,0);g.hex=v,delete g.valhex},this.setSigningCertificate=function(g){var v=A(g.valhex,0);if(v.length>0){for(var y=c(g.valhex,v[0]),m=A(y,0),D=[],S=0;S<m.length;S++){var F=c(y,m[S]),$=this.getESSCertID(F);D.push($)}g.array=D}if(v.length>1){var k=c(g.valhex,v[1]);g.polhex=k}delete g.valhex},this.setSignaturePolicyIdentifier=function(g){var v=A(g.valhex,0);if(v.length>0){var y=a.getOID(g.valhex,v[0]);g.oid=y}if(v.length>1){var m=new r,D=A(g.valhex,v[1]),S=c(g.valhex,D[0]),F=m.getAlgorithmIdentifierName(S);g.alg=F;var $=o(g.valhex,D[1]);g.hash=$}delete g.valhex},this.setSigningCertificateV2=function(g){var v=A(g.valhex,0);if(v.length>0){for(var y=c(g.valhex,v[0]),m=A(y,0),D=[],S=0;S<m.length;S++){var F=c(y,m[S]),$=this.getESSCertIDv2(F);D.push($)}g.array=D}if(v.length>1){var k=c(g.valhex,v[1]);g.polhex=k}delete g.valhex},this.getESSCertID=function(g){var v={},y=A(g,0);if(y.length>0){var m=o(g,y[0]);v.hash=m}if(y.length>1){var D=c(g,y[1]),S=this.getIssuerSerial(D);S.serial!=null&&(v.serial=S.serial),S.issuer!=null&&(v.issuer=S.issuer)}return v},this.getESSCertIDv2=function(g){var v={},y=A(g,0);if(y.length<1||3<y.length)throw new t("wrong number of elements");var m=0;if(g.substr(y[0],2)=="30"){var D=c(g,y[0]);v.alg=s.getAlgorithmIdentifierName(D),m++}else v.alg="sha256";var S=o(g,y[m]);if(v.hash=S,y.length>m+1){var F=c(g,y[m+1]),$=this.getIssuerSerial(F);v.issuer=$.issuer,v.serial=$.serial}return v},this.getIssuerSerial=function(g){var v={},y=A(g,0),m=c(g,y[0]),D=s.getGeneralNames(m),S=D[0].dn;v.issuer=S;var F=o(g,y[1]);return v.serial={hex:F},v},this.getCertificateSet=function(g){for(var v=A(g,0),y=[],m=0;m<v.length;m++){var D=c(g,v[m]);if(D.substr(0,2)=="30"){var S=dn(D,"CERTIFICATE");y.push(S)}}return{array:y,sortflag:!1}}};(typeof _>"u"||!_)&&(_={});(typeof _.asn1>"u"||!_.asn1)&&(_.asn1={});(typeof _.asn1.tsp>"u"||!_.asn1.tsp)&&(_.asn1.tsp={});_.asn1.tsp.TimeStampToken=function(t){var r=_,s=r.asn1,a=s.tsp;a.TimeStampToken.superclass.constructor.call(this),this.params=null,this.getEncodedHexPrepare=function(){var o=new a.TSTInfo(this.params.econtent.content);this.params.econtent.content.hex=o.tohex()},t!=null&&this.setByParam(t)};me(_.asn1.tsp.TimeStampToken,_.asn1.cms.SignedData);_.asn1.tsp.TSTInfo=function(t){var r=Error,s=_,a=s.asn1,o=a.DERSequence,c=a.DERInteger,u=a.DERBoolean,h=a.DERGeneralizedTime,d=a.DERObjectIdentifier,f=a.DERTaggedObject,b=a.tsp,A=b.MessageImprint,g=b.Accuracy,v=a.x509.X500Name,y=a.x509.GeneralName;if(b.TSTInfo.superclass.constructor.call(this),this.dVersion=new c({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerial=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.tohex=function(){var m=[this.dVersion];if(this.dPolicy==null)throw new Error("policy shall be specified.");if(m.push(this.dPolicy),this.dMessageImprint==null)throw new Error("messageImprint shall be specified.");if(m.push(this.dMessageImprint),this.dSerial==null)throw new Error("serialNumber shall be specified.");if(m.push(this.dSerial),this.dGenTime==null)throw new Error("genTime shall be specified.");m.push(this.dGenTime),this.dAccuracy!=null&&m.push(this.dAccuracy),this.dOrdering!=null&&m.push(this.dOrdering),this.dNonce!=null&&m.push(this.dNonce),this.dTsa!=null&&m.push(this.dTsa);var D=new o({array:m});return this.hTLV=D.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0){if(typeof t.policy=="string"){if(!t.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new d({oid:t.policy})}t.messageImprint!==void 0&&(this.dMessageImprint=new A(t.messageImprint)),t.serial!==void 0&&(this.dSerial=new c(t.serial)),t.genTime!==void 0&&(this.dGenTime=new h(t.genTime)),t.accuracy!==void 0&&(this.dAccuracy=new g(t.accuracy)),t.ordering!==void 0&&t.ordering==!0&&(this.dOrdering=new u),t.nonce!==void 0&&(this.dNonce=new c(t.nonce)),t.tsa!==void 0&&(this.dTsa=new f({tag:"a0",explicit:!0,obj:new y({dn:t.tsa})}))}};me(_.asn1.tsp.TSTInfo,_.asn1.ASN1Object);_.asn1.tsp.Accuracy=function(t){var r=_,s=r.asn1,a=s.ASN1Util.newObject;s.tsp.Accuracy.superclass.constructor.call(this),this.params=null,this.tohex=function(){var o=this.params,c=[];return o.seconds!=null&&typeof o.seconds=="number"&&c.push({int:o.seconds}),o.millis!=null&&typeof o.millis=="number"&&c.push({tag:{tagi:"80",obj:{int:o.millis}}}),o.micros!=null&&typeof o.micros=="number"&&c.push({tag:{tagi:"81",obj:{int:o.micros}}}),a({seq:c}).tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};me(_.asn1.tsp.Accuracy,_.asn1.ASN1Object);_.asn1.tsp.MessageImprint=function(t){var r=_,s=r.asn1,a=s.DERSequence,o=s.DEROctetString,c=s.x509,u=c.AlgorithmIdentifier;s.tsp.MessageImprint.superclass.constructor.call(this),this.params=null,this.tohex=function(){var h=this.params,d=new u({name:h.alg}),f=new o({hex:h.hash}),b=new a({array:[d,f]});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};me(_.asn1.tsp.MessageImprint,_.asn1.ASN1Object);_.asn1.tsp.TimeStampReq=function(t){var r=_,s=r.asn1,a=s.DERSequence,o=s.DERInteger,c=s.DERBoolean,u=s.ASN1Object,h=s.DERObjectIdentifier,d=s.tsp,f=d.MessageImprint;d.TimeStampReq.superclass.constructor.call(this),this.params=null,this.tohex=function(){var b=this.params,A=[];A.push(new o({int:1})),b.messageImprint instanceof _.asn1.ASN1Object?A.push(b.messageImprint):A.push(new f(b.messageImprint)),b.policy!=null&&A.push(new h(b.policy)),b.nonce!=null&&A.push(new o(b.nonce)),b.certreq==!0&&A.push(new c);var g=new a({array:A});return g.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};me(_.asn1.tsp.TimeStampReq,_.asn1.ASN1Object);_.asn1.tsp.TimeStampResp=function(t){var r=_,s=r.asn1,a=s.DERSequence,o=s.ASN1Object,c=s.tsp,u=c.PKIStatusInfo;c.TimeStampResp.superclass.constructor.call(this),this.params=null,this.tohex=function(){var h=this.params,d=[];if(h.econtent!=null||h.tst!=null)if(h.statusinfo!=null?d.push(new u(h.statusinfo)):d.push(new u("granted")),h.econtent!=null)d.push(new c.TimeStampToken(h).getContentInfo());else if(h.tst instanceof s.ASN1Object)d.push(h.tst);else throw new Error("improper member tst value");else if(h.statusinfo!=null)d.push(new u(h.statusinfo));else throw new Error("parameter for token nor statusinfo not specified");var f=new a({array:d});return f.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};me(_.asn1.tsp.TimeStampResp,_.asn1.ASN1Object);_.asn1.tsp.PKIStatusInfo=function(t){var r=Error,s=_,a=s.asn1,o=a.DERSequence,c=a.tsp,u=c.PKIStatus,h=c.PKIFreeText,d=c.PKIFailureInfo;c.PKIStatusInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var f=this.params,b=[];if(typeof f=="string")b.push(new u(f));else{if(f.status==null)throw new r("property 'status' unspecified");b.push(new u(f.status)),f.statusstr!=null&&b.push(new h(f.statusstr)),f.failinfo!=null&&b.push(new d(f.failinfo))}var A=new o({array:b});return A.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};me(_.asn1.tsp.PKIStatusInfo,_.asn1.ASN1Object);_.asn1.tsp.PKIStatus=function(t){var r=Error,s=_,a=s.asn1,o=a.DERInteger,c=a.tsp;c.PKIStatus.superclass.constructor.call(this);var u={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5};this.params=null,this.tohex=function(){var h=this.params,d,f;if(typeof h=="string")try{f=u[h]}catch{throw new r("undefined name: "+h)}else if(typeof h=="number")f=h;else throw new r("unsupported params");return new o({int:f}).tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};me(_.asn1.tsp.PKIStatus,_.asn1.ASN1Object);_.asn1.tsp.PKIFreeText=function(t){var r=Error,s=_,a=s.asn1,o=a.DERSequence,c=a.DERUTF8String,u=a.tsp;u.PKIFreeText.superclass.constructor.call(this),this.params=null,this.tohex=function(){var h=this.params;if(!h instanceof Array)throw new r("wrong params: not array");for(var d=[],f=0;f<h.length;f++)d.push(new c({str:h[f]}));var b=new o({array:d});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};me(_.asn1.tsp.PKIFreeText,_.asn1.ASN1Object);_.asn1.tsp.PKIFailureInfo=function(t){var r=Error,s=_,a=s.asn1,o=a.DERBitString,c=a.tsp,u=c.PKIFailureInfo,h={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25};u.superclass.constructor.call(this),this.params=null,this.getBinValue=function(){var d=this.params,f=0;if(typeof d=="number"&&0<=d&&d<=25){f|=1<<d;for(var b=f.toString(2),A="",g=b.length-1;g>=0;g--)A+=b[g];return A}else{if(typeof d=="string"&&h[d]!=null)return Yc([d],h);if(typeof d=="object"&&d.length!=null)return Yc(d,h);throw new r("wrong params")}},this.tohex=function(){var d=this.params,f=this.getBinValue();return new o({bin:f}).tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};me(_.asn1.tsp.PKIFailureInfo,_.asn1.ASN1Object);_.asn1.tsp.AbstractTSAAdapter=function(t){this.getTSTHex=function(r,s){throw"not implemented yet"}};_.asn1.tsp.SimpleTSAAdapter=function(t){var r=_,s=r.asn1,a=s.tsp,o=r.crypto.Util.hashHex;a.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(c,u){var h=o(c,u);this.params.econtent.content.messageImprint={alg:u,hash:h},this.params.econtent.content.serial={int:this.serial++};var d=Math.floor(Math.random()*1e9);this.params.econtent.content.nonce={int:d};var f=new a.TimeStampToken(this.params);return f.getContentInfoEncodedHex()},t!==void 0&&(this.params=t)};me(_.asn1.tsp.SimpleTSAAdapter,_.asn1.tsp.AbstractTSAAdapter);_.asn1.tsp.FixedTSAAdapter=function(t){var r=_,s=r.asn1,a=s.tsp,o=r.crypto.Util.hashHex;a.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(c,u){var h=o(c,u);this.params.econtent.content.messageImprint={alg:u,hash:h};var d=new a.TimeStampToken(this.params);return d.getContentInfoEncodedHex()},t!==void 0&&(this.params=t)};me(_.asn1.tsp.FixedTSAAdapter,_.asn1.tsp.AbstractTSAAdapter);_.asn1.tsp.TSPUtil=new function(){};_.asn1.tsp.TSPUtil.newTimeStampToken=function(t){return new _.asn1.tsp.TimeStampToken(t)};_.asn1.tsp.TSPUtil.parseTimeStampReq=function(t){var r=new _.asn1.tsp.TSPParser;return r.getTimeStampReq(t)};_.asn1.tsp.TSPUtil.parseMessageImprint=function(t){var r=new _.asn1.tsp.TSPParser;return r.getMessageImprint(t)};_.asn1.tsp.TSPParser=function(){var t=Error,r=tt,s=new r,a=Ce,o=a.getV,c=a.getTLV,u=a.getIdxbyList,h=a.getTLVbyListEx,d=a.getChildIdx,f=["granted","grantedWithMods","rejection","waiting","revocationWarning","revocationNotification"],b={0:"badAlg",2:"badRequest",5:"badDataFormat",14:"timeNotAvailable",15:"unacceptedPolicy",16:"unacceptedExtension",17:"addInfoNotAvailable",25:"systemFailure"};this.getResponse=function(A){var g=d(A,0);if(g.length==1)return this.getPKIStatusInfo(c(A,g[0]));if(g.length>1){var v=this.getPKIStatusInfo(c(A,g[0])),y=c(A,g[1]),m=this.getToken(y);return m.statusinfo=v,m}},this.getToken=function(A){var g=new _.asn1.cms.CMSParser,v=g.getCMSSignedData(A);return this.setTSTInfo(v),v},this.setTSTInfo=function(A){var g=A.econtent;if(g.type=="tstinfo"){var v=g.content.hex,y=this.getTSTInfo(v);g.content=y}},this.getTSTInfo=function(A){var g={},v=d(A,0),y=o(A,v[1]);g.policy=il(y);var m=c(A,v[2]);g.messageImprint=this.getMessageImprint(m);var D=o(A,v[3]);g.serial={hex:D};var S=o(A,v[4]);g.genTime={str:Wt(S)};var F=0;if(v.length>5&&A.substr(v[5],2)=="30"){var $=c(A,v[5]);g.accuracy=this.getAccuracy($),F++}if(v.length>5+F&&A.substr(v[5+F],2)=="01"){var k=o(A,v[5+F]);k=="ff"&&(g.ordering=!0),F++}if(v.length>5+F&&A.substr(v[5+F],2)=="02"){var O=o(A,v[5+F]);g.nonce={hex:O},F++}if(v.length>5+F&&A.substr(v[5+F],2)=="a0"){var z=c(A,v[5+F]);z="30"+z.substr(2),pGeneralNames=s.getGeneralNames(z);var H=pGeneralNames[0].dn;g.tsa=H,F++}if(v.length>5+F&&A.substr(v[5+F],2)=="a1"){var P=c(A,v[5+F]);P="30"+P.substr(2);var R=s.getExtParamArray(P);g.ext=R,F++}return g},this.getAccuracy=function(A){for(var g={},v=d(A,0),y=0;y<v.length;y++){var m=A.substr(v[y],2),D=o(A,v[y]),S=parseInt(D,16);m=="02"?g.seconds=S:m=="80"?g.millis=S:m=="81"&&(g.micros=S)}return g},this.getMessageImprint=function(A){if(A.substr(0,2)!="30")throw new Error("head of messageImprint hex shall be x30");var g={},v=d(A,0),y=u(A,0,[0,0]),m=o(A,y),D=a.hextooidstr(m),S=_.asn1.x509.OID.oid2name(D);if(S=="")throw new Error("hashAlg name undefined: "+D);var F=S,$=u(A,0,[1]);return g.alg=F,g.hash=o(A,$),g},this.getPKIStatusInfo=function(A){var g={},v=d(A,0),y=0;try{var m=o(A,v[0]),D=parseInt(m,16);g.status=f[D]}catch{}if(v.length>1&&A.substr(v[1],2)=="30"){var S=c(A,v[1]);g.statusstr=this.getPKIFreeText(S),y++}if(v.length>y&&A.substr(v[1+y],2)=="03"){var F=c(A,v[1+y]);g.failinfo=this.getPKIFailureInfo(F)}return g},this.getPKIFreeText=function(A){for(var g=[],v=d(A,0),y=0;y<v.length;y++)g.push(a.getString(A,v[y]));return g},this.getPKIFailureInfo=function(A){var g=a.getInt(A,0);return b[g]!=null?b[g]:g},this.getTimeStampReq=function(A){var g={};g.certreq=!1;var v=d(A,0);if(v.length<2)throw new Error("TimeStampReq must have at least 2 items");var y=c(A,v[1]);g.messageImprint=_.asn1.tsp.TSPUtil.parseMessageImprint(y);for(var m=2;m<v.length;m++){var D=v[m],S=A.substr(D,2);if(S=="06"){var F=o(A,D);g.policy=a.hextooidstr(F)}S=="02"&&(g.nonce=o(A,D)),S=="01"&&(g.certreq=!0)}return g}};(typeof _>"u"||!_)&&(_={});(typeof _.asn1>"u"||!_.asn1)&&(_.asn1={});(typeof _.asn1.cades>"u"||!_.asn1.cades)&&(_.asn1.cades={});_.asn1.cades.SignaturePolicyIdentifier=function(t){var r=_,s=r.asn1,a=s.cades,o=a.SignaturePolicyId;a.SignaturePolicyIdentifier.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.15",this.params=null,this.getValueArray=function(){return[new o(this.params)]},this.setByParam=function(c){this.params=c},t!=null&&this.setByParam(t)};me(_.asn1.cades.SignaturePolicyIdentifier,_.asn1.cms.Attribute);_.asn1.cades.SignaturePolicyId=function(t){var r=_,s=r.asn1,a=s.DERSequence,o=s.DERObjectIdentifier,c=s.x509,u=c.AlgorithmIdentifier,h=s.cades,d=h.SignaturePolicyId,f=h.OtherHashAlgAndValue;d.superclass.constructor.call(this),this.params=null,this.tohex=function(){var b=this.params,A=[];A.push(new o(b.oid)),A.push(new f(b));var g=new a({array:A});return g.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(b){this.params=b},t!=null&&this.setByParam(t)};me(_.asn1.cades.SignaturePolicyId,_.asn1.ASN1Object);_.asn1.cades.OtherHashAlgAndValue=function(t){var r=Error,s=_,a=s.asn1,o=a.DERSequence,c=a.DEROctetString,u=a.x509,h=u.AlgorithmIdentifier,d=a.cades,f=d.OtherHashAlgAndValue;f.superclass.constructor.call(this),this.params=null,this.tohex=function(){var b=this.params;if(b.alg==null)throw new r("property 'alg' not specified");if(b.hash==null&&b.cert==null)throw new r("property 'hash' nor 'cert' not specified");var A=null;if(b.hash!=null)A=b.hash;else if(b.cert!=null){if(typeof b.cert!="string")throw new r("cert not string");var g=b.cert;b.cert.indexOf("-----BEGIN")!=-1&&(g=gr(b.cert)),A=_.crypto.Util.hashHex(g,b.alg)}var v=[];v.push(new h({name:b.alg})),v.push(new c({hex:A}));var y=new o({array:v});return y.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};me(_.asn1.cades.OtherHashAlgAndValue,_.asn1.ASN1Object);_.asn1.cades.OtherHashValue=function(t){_.asn1.cades.OtherHashValue.superclass.constructor.call(this);var r=Error,s=_,a=s.lang.String.isHex,o=s.asn1,c=o.DEROctetString,u=s.crypto.Util.hashHex;this.params=null,this.tohex=function(){var h=this.params;if(h.hash==null&&h.cert==null)throw new r("hash or cert not specified");var d=null;if(h.hash!=null)d=h.hash;else if(h.cert!=null){if(typeof h.cert!="string")throw new r("cert not string");var f=h.cert;h.cert.indexOf("-----BEGIN")!=-1&&(f=gr(h.cert)),d=_.crypto.Util.hashHex(f,"sha1")}return new c({hex:d}).tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};me(_.asn1.cades.OtherHashValue,_.asn1.ASN1Object);_.asn1.cades.SignatureTimeStamp=function(t){var r=Error,s=_,a=s.lang.String.isHex,o=s.asn1,c=o.ASN1Object,u=o.x509,h=o.cades;h.SignatureTimeStamp.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.14",this.params=null,this.getValueArray=function(){var d=this.params;if(d.tst!=null)if(a(d.tst)){var f=new c;return f.hTLV=d.tst,[f]}else{if(d.tst instanceof c)return[d.tst];throw new r("params.tst has wrong value")}else if(d.res!=null){var b=d.res;if(b instanceof c&&(b=b.tohex()),typeof b!="string"||!a(b))throw new r("params.res has wrong value");var A=Ce.getTLVbyList(b,0,[1]),f=new c;return f.hTLV=d.tst,[f]}},t!=null&&this.setByParam(t)};me(_.asn1.cades.SignatureTimeStamp,_.asn1.cms.Attribute);_.asn1.cades.CompleteCertificateRefs=function(t){var r=Error,s=_,a=s.asn1,o=a.DERSequence,c=a.cades,u=c.OtherCertID,h=s.lang.String.isHex;c.CompleteCertificateRefs.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.21",this.params=null,this.getValueArray=function(){for(var d=this.params,f=[],b=0;b<d.array.length;b++){var A=d.array[b];if(typeof A=="string")if(A.indexOf("-----BEGIN")!=-1)A={cert:A};else if(h(A))A={hash:A};else throw new r("unsupported value: "+A);d.alg!=null&&A.alg==null&&(A.alg=d.alg),d.hasis!=null&&A.hasis==null&&(A.hasis=d.hasis);var g=new u(A);f.push(g)}var v=new o({array:f});return[v]},t!=null&&this.setByParam(t)};me(_.asn1.cades.CompleteCertificateRefs,_.asn1.cms.Attribute);_.asn1.cades.OtherCertID=function(t){var r=_,s=r.asn1,a=s.DERSequence,o=s.cms,c=o.IssuerSerial,u=s.cades,h=u.OtherHashValue,d=u.OtherHashAlgAndValue;u.OtherCertID.superclass.constructor.call(this),this.params=t,this.tohex=function(){var f=this.params;typeof f=="string"&&(f.indexOf("-----BEGIN")!=-1?f={cert:f}:_isHex(f)&&(f={hash:f}));var b=[],A=null;if(f.alg!=null?A=new d(f):A=new h(f),b.push(A),f.cert!=null&&f.hasis==!0||f.issuer!=null&&f.serial!=null){var g=new c(f);b.push(g)}var v=new a({array:b});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};me(_.asn1.cades.OtherCertID,_.asn1.ASN1Object);_.asn1.cades.OtherHash=function(t){var r=Error,s=_,a=s.asn1,o=a.cms,c=a.cades,u=c.OtherHashAlgAndValue,h=c.OtherHashValue,d=s.crypto.Util.hashHex,f=s.lang.String.isHex;c.OtherHash.superclass.constructor.call(this),this.params=null,this.tohex=function(){var b=this.params;typeof b=="string"&&(b.indexOf("-----BEGIN")!=-1?b={cert:b}:f(b)&&(b={hash:b}));var A=null;return b.alg!=null?A=new u(b):A=new h(b),A.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};me(_.asn1.cades.OtherHash,_.asn1.ASN1Object);_.asn1.cades.CAdESUtil=new function(){};_.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(t){var r=new _.asn1.cms.CMSParser,s=r.getCMSSignedData(t);return s};_.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(t,r,s){var a=Ce,o=a.getChildIdx,c=a.getTLV,u=a.getV,h=_,d=h.asn1,f=d.ASN1Object,b=d.cms,A=b.AttributeList,g=b.SignerInfo,v={},y=o(t,r);if(y.length!=6)throw"not supported items for SignerInfo (!=6)";var m=y.shift();v.version=c(t,m);var D=y.shift();v.si=c(t,D);var S=y.shift();v.digalg=c(t,S);var F=y.shift();v.sattrs=c(t,F);var $=y.shift();v.sigalg=c(t,$);var k=y.shift();v.sig=c(t,k),v.sigval=u(t,k);var O=null;return v.obj=new g,O=new f,O.hTLV=v.version,v.obj.dCMSVersion=O,O=new f,O.hTLV=v.si,v.obj.dSignerIdentifier=O,O=new f,O.hTLV=v.digalg,v.obj.dDigestAlgorithm=O,O=new f,O.hTLV=v.sattrs,v.obj.dSignedAttrs=O,O=new f,O.hTLV=v.sigalg,v.obj.dSigAlg=O,O=new f,O.hTLV=v.sig,v.obj.dSig=O,v.obj.dUnsignedAttrs=new A,v};(typeof _.asn1.csr>"u"||!_.asn1.csr)&&(_.asn1.csr={});_.asn1.csr.CertificationRequest=function(t){var r=_,s=r.asn1,a=s.DERBitString,o=s.DERSequence,c=s.csr,u=s.x509,h=c.CertificationRequestInfo;c.CertificationRequest.superclass.constructor.call(this),this.setByParam=function(d){this.params=d},this.sign=function(){var d=new h(this.params).tohex(),f=new _.crypto.Signature({alg:this.params.sigalg});f.init(this.params.sbjprvkey),f.updateHex(d);var b=f.sign();this.params.sighex=b},this.getPEM=function(){return dn(this.tohex(),"CERTIFICATE REQUEST")},this.tohex=function(){var d=this.params,f=new _.asn1.csr.CertificationRequestInfo(this.params),b=new _.asn1.x509.AlgorithmIdentifier({name:d.sigalg});if(d.sighex==null&&d.sbjprvkey!=null&&this.sign(),d.sighex==null)throw new Error("sighex or sbjprvkey parameter not defined");var A=new a({hex:"00"+d.sighex}),g=new o({array:[f,b,A]});return g.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};me(_.asn1.csr.CertificationRequest,_.asn1.ASN1Object);_.asn1.csr.CertificationRequestInfo=function(t){var r=_,s=r.asn1,a=s.DERBitString,o=s.DERSequence,c=s.DERInteger,u=s.DERUTF8String,h=s.DERTaggedObject,d=s.ASN1Util.newObject,f=s.csr,b=s.x509,A=b.X500Name,g=b.Extensions,v=b.SubjectPublicKeyInfo,y=f.AttributeList;f.CertificationRequestInfo.superclass.constructor.call(this),this.params=null,this.setByParam=function(D){D!=null&&(this.params=D)},this.tohex=function(){var D=this.params,S=[];if(S.push(new c({int:0})),S.push(new A(D.subject)),S.push(new v(Pt.getKey(D.sbjpubkey))),D.attrs!=null){var F=m(D.attrs),$=d({tag:{tage:"a0",obj:F}});S.push($)}else if(D.extreq!=null){var k=new g(D.extreq),$=d({tag:{tage:"a0",obj:{seq:[{oid:"1.2.840.113549.1.9.14"},{set:[k]}]}}});S.push($)}else S.push(new h({tag:"a0",explicit:!1,obj:new u({str:""})}));var O=new o({array:S});return O.tohex()},this.getEncodedHex=function(){return this.tohex()};function m(D){for(var S=Error,F=_.asn1.x509.Extensions,$=[],k=0;k<D.length;k++){var O=D[k],z=O.attr;if(z=="extensionRequest"){var H=new F(O.ext),P={seq:[{oid:"1.2.840.113549.1.9.14"},{set:[H]}]};$.push(P)}else if(z=="unstructuredName"){var P={seq:[{oid:"1.2.840.113549.1.9.2"},{set:O.names}]};$.push(P)}else if(z=="challengePassword"){var P={seq:[{oid:"1.2.840.113549.1.9.7"},{set:[{utf8str:O.password}]}]};$.push(P)}else throw new S("unknown CSR attribute")}return{set:$}}t!=null&&this.setByParam(t)};me(_.asn1.csr.CertificationRequestInfo,_.asn1.ASN1Object);_.asn1.csr.AttributeList=function(t){function r(s){}};me(_.asn1.csr.AttributeList,_.asn1.ASN1Object);_.asn1.csr.CSRUtil=new function(){};_.asn1.csr.CSRUtil.newCSRPEM=function(t){var r=Pt,s=_.asn1.csr,a=new s.CertificationRequest(t),o=a.getPEM();return o};_.asn1.csr.CSRUtil.getParam=function(t,r){var s=Ce,a=s.getV,o=s.getIdxbyList,c=s.getTLVbyList,u=s.getTLVbyListEx,h=s.getVbyListEx,d=function(F){var $=o(F,0,[0,3,0,0],"06");return a(F,$)!="2a864886f70d01090e"?null:c(F,0,[0,3,0,1,0],"30")},f={};if(t.indexOf("-----BEGIN CERTIFICATE REQUEST")==-1)throw new Error("argument is not PEM file");var b=gr(t,"CERTIFICATE REQUEST");r&&(f.tbs=c(b,0,[0]));try{var A=u(b,0,[0,1]);if(A=="3000")f.subject={};else{var m=new tt;f.subject=m.getX500Name(A)}}catch{}var g=u(b,0,[0,2]),v=Pt.getKey(g,null,"pkcs8pub");f.sbjpubkey=Pt.getPEM(v,"PKCS8PUB");var y=d(b),m=new tt;y!=null&&(f.extreq=m.getExtParamArray(y));try{var D=u(b,0,[1],"30"),m=new tt;f.sigalg=m.getAlgorithmIdentifierName(D)}catch{}try{var S=h(b,0,[2]);f.sighex=S}catch{}return f};_.asn1.csr.CSRUtil.verifySignature=function(t){try{var r=null;if(typeof t=="string"&&t.indexOf("-----BEGIN CERTIFICATE REQUEST")!=-1?r=_.asn1.csr.CSRUtil.getParam(t,!0):typeof t=="object"&&t.sbjpubkey!=null&&t.sigalg!=null&&t.sighex!=null&&t.tbs!=null&&(r=t),r==null)return!1;var s=new _.crypto.Signature({alg:r.sigalg});return s.init(r.sbjpubkey),s.updateHex(r.tbs),s.verify(r.sighex)}catch(a){return alert(a),!1}};(typeof _>"u"||!_)&&(_={});(typeof _.asn1>"u"||!_.asn1)&&(_.asn1={});(typeof _.asn1.ocsp>"u"||!_.asn1.ocsp)&&(_.asn1.ocsp={});_.asn1.ocsp.DEFAULT_HASH="sha1";_.asn1.ocsp.OCSPResponse=function(t){_.asn1.ocsp.OCSPResponse.superclass.constructor.call(this);var r=_.asn1.DEREnumerated,s=_.asn1.ASN1Util.newObject,a=_.asn1.ocsp.ResponseBytes,o=["successful","malformedRequest","internalError","tryLater","_not_used_","sigRequired","unauthorized"];this.params=null,this._getStatusCode=function(){var c=this.params.resstatus;return typeof c=="number"?c:typeof c!="string"?-1:o.indexOf(c)},this.setByParam=function(c){this.params=c},this.tohex=function(){var c=this.params,u=this._getStatusCode();if(u==-1)throw new Error("responseStatus not supported: "+c.resstatus);if(u!=0)return s({seq:[{enum:{int:u}}]}).tohex();var h=new a(c);return s({seq:[{enum:{int:0}},{tag:{tag:"a0",explicit:!0,obj:h}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};me(_.asn1.ocsp.OCSPResponse,_.asn1.ASN1Object);_.asn1.ocsp.ResponseBytes=function(t){_.asn1.ocsp.ResponseBytes.superclass.constructor.call(this);var r=_.asn1,s=r.DERSequence,a=r.DERObjectIdentifier,o=r.DEROctetString,c=r.ocsp.BasicOCSPResponse;this.params=null,this.setByParam=function(u){this.params=u},this.tohex=function(){var u=this.params;if(u.restype!="ocspBasic")throw new Error("not supported responseType: "+u.restype);var h=new c(u),d=[];d.push(new a({name:"ocspBasic"})),d.push(new o({hex:h.tohex()}));var f=new s({array:d});return f.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};me(_.asn1.ocsp.ResponseBytes,_.asn1.ASN1Object);_.asn1.ocsp.BasicOCSPResponse=function(t){_.asn1.ocsp.BasicOCSPResponse.superclass.constructor.call(this);var r=Error,s=_.asn1,a=s.ASN1Object,o=s.DERSequence,c=s.DERGeneralizedTime,u=s.DERTaggedObject,h=s.DERBitString,d=s.x509.Extensions,f=s.x509.AlgorithmIdentifier,b=s.ocsp,A=b.ResponderID;_SingleResponseList=b.SingleResponseList,_ResponseData=b.ResponseData,this.params=null,this.setByParam=function(g){this.params=g},this.sign=function(){var g=this.params,v=g.tbsresp.tohex(),y=new _.crypto.Signature({alg:g.sigalg});y.init(g.reskey),y.updateHex(v),g.sighex=y.sign()},this.tohex=function(){var g=this.params;g.tbsresp==null&&(g.tbsresp=new _ResponseData(g)),g.sighex==null&&g.reskey!=null&&this.sign();var v=[];if(v.push(g.tbsresp),v.push(new f({name:g.sigalg})),v.push(new h({hex:"00"+g.sighex})),g.certs!=null&&g.certs.length!=null){for(var y=[],m=0;m<g.certs.length;m++){var D=g.certs[m],S=null;if(Ce.isASN1HEX(D))S=D;else if(D.match(/-----BEGIN/))S=gr(D);else throw new r("certs["+m+"] not hex or PEM");y.push(new a({tlv:S}))}var F=new o({array:y});v.push(new u({tag:"a0",explicit:!0,obj:F}))}var $=new o({array:v});return $.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};me(_.asn1.ocsp.BasicOCSPResponse,_.asn1.ASN1Object);_.asn1.ocsp.ResponseData=function(t){_.asn1.ocsp.ResponseData.superclass.constructor.call(this);var r=Error,s=_.asn1,a=s.DERSequence,o=s.DERGeneralizedTime,c=s.DERTaggedObject,u=s.x509.Extensions,h=s.ocsp,d=h.ResponderID;_SingleResponseList=h.SingleResponseList,this.params=null,this.tohex=function(){var f=this.params;f.respid!=null&&new r("respid not specified"),f.prodat!=null&&new r("prodat not specified"),f.array!=null&&new r("array not specified");var b=[];if(b.push(new d(f.respid)),b.push(new o(f.prodat)),b.push(new _SingleResponseList(f.array)),f.ext!=null){var A=new u(f.ext);b.push(new c({tag:"a1",explicit:!0,obj:A}))}var g=new a({array:b});return g.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(f){this.params=f},t!==void 0&&this.setByParam(t)};me(_.asn1.ocsp.ResponseData,_.asn1.ASN1Object);_.asn1.ocsp.ResponderID=function(t){_.asn1.ocsp.ResponderID.superclass.constructor.call(this);var r=_,s=r.asn1,a=s.ASN1Util.newObject,o=s.x509.X500Name,c=r.lang.String.isHex,u=Error;this.params=null,this.tohex=function(){var h=this.params;if(h.key!=null){var d=null;if(typeof h.key=="string"){if(c(h.key)&&(d=h.key),h.key.match(/-----BEGIN CERTIFICATE/)){var f=new tt(h.key),b=f.getExtSubjectKeyIdentifier();b!=null&&(d=b.kid.hex)}}else if(h.key instanceof tt){var b=h.key.getExtSubjectKeyIdentifier();b!=null&&(d=b.kid.hex)}if(d==null)throw new u("wrong key member value");var A=a({tag:{tag:"a2",explicit:!0,obj:{octstr:{hex:d}}}});return A.tohex()}else if(h.name!=null){var g=null;if(typeof h.name=="string"&&h.name.match(/-----BEGIN CERTIFICATE/)){var f=new tt(h.name);g=f.getSubject()}else h.name instanceof tt?g=h.name.getSubject():typeof h.name=="object"&&(h.name.array!=null||h.name.str!=null)&&(g=h.name);if(g==null)throw new u("wrong name member value");var A=a({tag:{tag:"a1",explicit:!0,obj:new o(g)}});return A.tohex()}throw new u("key or name not specified")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(h){this.params=h},t!==void 0&&this.setByParam(t)};me(_.asn1.ocsp.ResponderID,_.asn1.ASN1Object);_.asn1.ocsp.SingleResponseList=function(t){_.asn1.ocsp.SingleResponseList.superclass.constructor.call(this);var r=_.asn1,s=r.DERSequence,a=r.ocsp.SingleResponse;this.params=null,this.tohex=function(){var o=this.params;if(typeof o!="object"||o.length==null)throw new Error("params not specified properly");for(var c=[],u=0;u<o.length;u++)c.push(new a(o[u]));var h=new s({array:c});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(o){this.params=o},t!==void 0&&this.setByParam(t)};me(_.asn1.ocsp.SingleResponseList,_.asn1.ASN1Object);_.asn1.ocsp.SingleResponse=function(t){var r=Error,s=_,a=s.asn1,o=a.DERSequence,c=a.DERGeneralizedTime,u=a.DERTaggedObject,h=a.ocsp,d=h.CertID,f=h.CertStatus,b=a.x509,A=b.Extensions;h.SingleResponse.superclass.constructor.call(this),this.params=null,this.tohex=function(){var g=this.params,v=[];if(g.certid==null)throw new r("certid unspecified");if(g.status==null)throw new r("status unspecified");if(g.thisupdate==null)throw new r("thisupdate unspecified");if(v.push(new d(g.certid)),v.push(new f(g.status)),v.push(new c(g.thisupdate)),g.nextupdate!=null){var y=new c(g.nextupdate);v.push(new u({tag:"a0",explicit:!0,obj:y}))}if(g.ext!=null){var m=new A(g.ext);v.push(new u({tag:"a1",explicit:!0,obj:m}))}var D=new o({array:v});return D.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(g){this.params=g},t!==void 0&&this.setByParam(t)};me(_.asn1.ocsp.SingleResponse,_.asn1.ASN1Object);_.asn1.ocsp.CertID=function(t){var r=_,s=r.asn1,a=s.DEROctetString,o=s.DERInteger,c=s.DERSequence,u=s.x509,h=u.AlgorithmIdentifier,d=s.ocsp,f=d.DEFAULT_HASH,b=r.crypto,A=b.Util.hashHex,g=tt,v=Ce,y=v.getVbyList;d.CertID.superclass.constructor.call(this),this.DEFAULT_HASH="sha1",this.params=null,this.setByValue=function(m,D,S,F){F==null&&(F=this.DEFAULT_HASH),this.params={alg:F,issname:m,isskey:D,sbjsn:S}},this.setByCert=function(m,D,S){S==null&&(S=this.DEFAULT_HASH),this.params={alg:S,issuerCert:m,subjectCert:D}},this.getParamByCerts=function(m,D,S){S==null&&(S=this.DEFAULT_HASH);var F=new g(m),$=new g(D),k=A(F.getSubjectHex(),S),O=F.getPublicKeyHex(),z=A(y(O,0,[1],"03",!0),S),H=$.getSerialNumberHex(),P={alg:S,issname:k,isskey:z,sbjsn:H};return P},this.tohex=function(){if(typeof this.params!="object")throw new Error("params not set");var m=this.params,D,S,F,$;if(m.alg==null?$=this.DEFAULT_HASH:$=m.alg,m.issuerCert!=null&&m.subjectCert!=null){var k=this.getParamByCerts(m.issuerCert,m.subjectCert,$);D=k.issname,S=k.isskey,F=k.sbjsn}else if(m.issname!=null&&m.isskey!=null&&m.sbjsn!=null)D=m.issname,S=m.isskey,F=m.sbjsn;else throw new Error("required param members not defined");var O=new h({name:$}),z=new a({hex:D}),H=new a({hex:S}),P=new o({hex:F}),R=new c({array:[O,z,H,P]});return this.hTLV=R.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};me(_.asn1.ocsp.CertID,_.asn1.ASN1Object);_.asn1.ocsp.CertStatus=function(t){_.asn1.ocsp.CertStatus.superclass.constructor.call(this),this.params=null,this.tohex=function(){var r=this.params;if(r.status=="good")return"8000";if(r.status=="unknown")return"8200";if(r.status=="revoked"){var s=[{gentime:{str:r.time}}];r.reason!=null&&s.push({tag:{tag:"a0",explicit:!0,obj:{enum:{int:r.reason}}}});var a={tag:"a1",explicit:!1,obj:{seq:s}};return _.asn1.ASN1Util.newObject({tag:a}).tohex()}throw new Error("bad status")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(r){this.params=r},t!==void 0&&this.setByParam(t)};me(_.asn1.ocsp.CertStatus,_.asn1.ASN1Object);_.asn1.ocsp.Request=function(t){var r=_,s=r.asn1,a=s.DERSequence,o=s.ocsp;if(o.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.tohex=function(){var u=[];if(this.dReqCert===null)throw"reqCert not set";u.push(this.dReqCert);var h=new a({array:u});return this.hTLV=h.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},typeof t<"u"){var c=new o.CertID(t);this.dReqCert=c}};me(_.asn1.ocsp.Request,_.asn1.ASN1Object);_.asn1.ocsp.TBSRequest=function(t){var r=_,s=r.asn1,a=s.DERSequence,o=s.ocsp;o.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(c){for(var u=[],h=0;h<c.length;h++){var d=new o.Request(c[0]);u.push(d)}this.dRequestList=u},this.tohex=function(){var c=[];if(this.version!==0)throw"not supported version: "+this.version;if(this.dRequestorName!==null)throw"requestorName not supported";var u=new a({array:this.dRequestList});if(c.push(u),this.dRequestExt!==null)throw"requestExtensions not supported";var h=new a({array:c});return this.hTLV=h.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&t.reqList!==void 0&&this.setRequestListByParam(t.reqList)};me(_.asn1.ocsp.TBSRequest,_.asn1.ASN1Object);_.asn1.ocsp.OCSPRequest=function(t){var r=_,s=r.asn1,a=s.DERSequence,o=s.ocsp;if(o.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.tohex=function(){var u=[];if(this.dTbsRequest!==null)u.push(this.dTbsRequest);else throw"tbsRequest not set";if(this.dOptionalSignature!==null)throw"optionalSignature not supported";var h=new a({array:u});return this.hTLV=h.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&t.reqList!==void 0){var c=new o.TBSRequest(t);this.dTbsRequest=c}};me(_.asn1.ocsp.OCSPRequest,_.asn1.ASN1Object);_.asn1.ocsp.OCSPUtil={};_.asn1.ocsp.OCSPUtil.getRequestHex=function(t,r,s){var a=_,o=a.asn1,c=o.ocsp;s===void 0&&(s=c.DEFAULT_HASH);var u={alg:s,issuerCert:t,subjectCert:r},h=new c.OCSPRequest({reqList:[u]});return h.tohex()};_.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(t){var r=Ce,s=r.getVbyList,a=r.getVbyListEx,o=r.getIdxbyList,c=r.getIdxbyListEx,u=r.getV,h={};try{var d=a(t,0,[0],"0a");h.responseStatus=parseInt(d,16)}catch{}if(h.responseStatus!==0)return h;try{var f=o(t,0,[1,0,1,0,0,2,0,1]);t.substr(f,2)==="80"?h.certStatus="good":t.substr(f,2)==="a1"?(h.certStatus="revoked",h.revocationTime=Wt(s(t,f,[0]))):t.substr(f,2)==="82"&&(h.certStatus="unknown")}catch{}try{var b=o(t,0,[1,0,1,0,0,2,0,2]);h.thisUpdate=Wt(u(t,b))}catch{}try{var A=o(t,0,[1,0,1,0,0,2,0,3]);t.substr(A,2)==="a0"&&(h.nextUpdate=Wt(s(t,A,[0])))}catch{}return h};_.asn1.ocsp.OCSPParser=function(){var t=Error,r=tt,s=new r,a=Ce,o=a.getV,c=a.getTLV,u=a.getIdxbyList,h=a.getVbyList,d=a.getTLVbyList,f=a.getVbyListEx,b=a.getTLVbyListEx,A=a.getChildIdx;this.getOCSPRequest=function(g){var v=A(g,0);if(v.length!=1&&v.length!=2)throw new t("wrong number elements: "+v.length);var y=this.getTBSRequest(c(g,v[0]));return y},this.getTBSRequest=function(g){var v={},y=b(g,0,[0],"30");v.array=this.getRequestList(y);var m=b(g,0,["[2]",0],"30");return m!=null&&(v.ext=s.getExtParamArray(m)),v},this.getRequestList=function(g){for(var v=[],y=A(g,0),m=0;m<y.length;m++){var g=c(g,y[m]);v.push(this.getRequest(g))}return v},this.getRequest=function(g){var v=A(g,0);if(v.length!=1&&v.length!=2)throw new t("wrong number elements: "+v.length);var y=this.getCertID(c(g,v[0]));if(v.length==2){var m=u(g,0,[1,0]);y.ext=s.getExtParamArray(c(g,m))}return y},this.getCertID=function(g){var v=A(g,0);if(v.length!=4)throw new t("wrong number elements: "+v.length);var y=new r,m={};return m.alg=y.getAlgorithmIdentifierName(c(g,v[0])),m.issname=o(g,v[1]),m.isskey=o(g,v[2]),m.sbjsn=o(g,v[3]),m},this.getOCSPResponse=function(g){var v=A(g,0),y,m=o(g,v[0]),D=parseInt(m);if(v.length==1)return{resstatus:D};var S=d(g,0,[1,0]);return y=this.getResponseBytes(S),y.resstatus=D,y},this.getResponseBytes=function(g){var v=A(g,0),y,m=d(g,0,[1,0]);y=this.getBasicOCSPResponse(m);var D=o(g,v[0]);return y.restype=_.asn1.x509.OID.oid2name(il(D)),y},this.getBasicOCSPResponse=function(g){var v=A(g,0),y;y=this.getResponseData(c(g,v[0]));var m=new tt;y.alg=m.getAlgorithmIdentifierName(c(g,v[1]));var D=o(g,v[2]);y.sighex=D.substr(2);var S=f(g,0,["[0]"]);if(S!=null){for(var F=A(S,0),$=[],k=0;k<F.length;k++){var O=c(S,F[k]);$.push(O)}y.certs=$}return y},this.getResponseData=function(g){var v=A(g,0),y=v.length,m={},D=0;g.substr(v[0],2)=="a0"&&D++,m.respid=this.getResponderID(c(g,v[D++]));var S=o(g,v[D++]);if(m.prodat=Wt(S),m.array=this.getSingleResponseList(c(g,v[D++])),g.substr(v[y-1],2)=="a1"){var F=d(g,v[y-1],[0]),$=new tt;m.ext=$.getExtParamArray(F)}return m},this.getResponderID=function(g){var v={};if(g.substr(0,2)=="a2"){var y=h(g,0,[0]);v.key=y}if(g.substr(0,2)=="a1"){var m=d(g,0,[0]),D=new tt;v.name=D.getX500Name(m)}return v},this.getSingleResponseList=function(g){for(var v=A(g,0),y=[],m=0;m<v.length;m++){var D=this.getSingleResponse(c(g,v[m]));y.push(D)}return y},this.getSingleResponse=function(g){var v=A(g,0),y={},m=this.getCertID(c(g,v[0]));y.certid=m;var D=this.getCertStatus(c(g,v[1]));if(y.status=D,g.substr(v[2],2)=="18"){var S=o(g,v[2]);y.thisupdate=Wt(S)}for(var F=3;F<v.length;F++){if(g.substr(v[F],2)=="a0"){var $=h(g,v[F],[0],"18");y.nextupdate=Wt($)}if(g.substr(v[F],2)=="a1"){var k=new tt,O=d(g,0,[F,0]);y.ext=k.getExtParamArray(O)}}return y},this.getCertStatus=function(g){var v={};if(g=="8000")return{status:"good"};if(g=="8200")return{status:"unknown"};if(g.substr(0,2)=="a1"){v.status="revoked";var y=h(g,0,[0]),m=Wt(y);v.time=m}return v}};var _;(typeof _>"u"||!_)&&(_={});(typeof _.lang>"u"||!_.lang)&&(_.lang={});_.lang.String=function(){};function m1(t){for(var r=new Array,s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}function w1(t){for(var r="",s=0;s<t.length;s++)r=r+String.fromCharCode(t[s]);return r}function Zc(t){for(var r="",s=0;s<t.length;s++){var a=t[s].toString(16);a.length==1&&(a="0"+a),r=r+a}return r}function Ln(t){return Zc(m1(t))}function JS(t){return bs(Ln(t))}function XS(t){return ou(bs(Ln(t)))}function ZS(t){return w1(f1(vo(t)))}function ou(t){return t=t.replace(/\=/g,""),t=t.replace(/\+/g,"-"),t=t.replace(/\//g,"_"),t}function vo(t){return t.length%4==2?t=t+"==":t.length%4==3&&(t=t+"="),t=t.replace(/-/g,"+"),t=t.replace(/_/g,"/"),t}function Mr(t){return t.length%2==1&&(t="0"+t),ou(bs(t))}function sr(t){return cu(vo(t))}var po,Di;typeof Buffer=="function"?(po=function(t){return ou(Buffer.from(t,"utf8").toString("base64"))},Di=function(t){return Buffer.from(vo(t),"base64").toString("utf8")}):(po=function(t){return Mr(tl(nl(t)))},Di=function(t){return decodeURIComponent(rl(sr(t)))});function QS(t){return bs(tl(nl(t)))}function eD(t){return decodeURIComponent(rl(cu(t)))}function Qc(t){return tl(nl(t)).toLowerCase()}function Wt(t){try{return decodeURIComponent(rl(t))}catch{return null}}function tD(t){return Wt(rD(t))}function rD(t){for(var r=t.match(/.{1,2}/g),s=[],a=0;a<r.length;a++){var o=parseInt(r[a],16);161<=o&&o<=191?(s.push("c2"),s.push(r[a])):192<=o&&o<=255?(s.push("c3"),s.push((o-64).toString(16))):s.push(r[a])}return s.join("")}function Hn(t){for(var r="",s=0;s<t.length-1;s+=2)r+=String.fromCharCode(parseInt(t.substr(s,2),16));return r}function Mi(t){for(var r="",s=0;s<t.length;s++)r+=("0"+t.charCodeAt(s).toString(16)).slice(-2);return r}function Wh(t){return bs(t)}function nD(t){return el(Wh(t),64)}function el(t,r){return t=t.replace(new RegExp("(.{"+r+"})","g"),`$1\r
`),t=t.replace(/\s+$/,""),t}function b1(t){var r=t.replace(/[^0-9A-Za-z\/+=]*/g,""),s=cu(r);return s}function iD(t,r){return"-----BEGIN "+r+`-----\r
`+el(t,64)+`\r
-----END `+r+`-----\r
`}function dn(t,r){return"-----BEGIN "+r+`-----\r
`+el(Wh(t),64)+`\r
-----END `+r+`-----\r
`}function gr(t,r){if(t.indexOf("-----BEGIN ")==-1)throw new Error("can't find PEM header");return r!==void 0?(t=t.replace(new RegExp("^[^]*-----BEGIN "+r+"-----"),""),t=t.replace(new RegExp("-----END "+r+"-----[^]*$"),"")):(t=t.replace(/^[^]*-----BEGIN [^-]+-----/,""),t=t.replace(/-----END [^-]+-----[^]*$/,"")),b1(t)}function sD(t){return t.indexOf("-----BEGIN ")==-1||t.indexOf("-----END ")==-1?null:(t=t.replace(/^[\s\S]*?-----BEGIN [^-]+-----/m,""),t=t.replace(/-----END [\s\S]+$/m,""),t=t.replace(/\s+/g,""),t.match(/^[0-9a-zA-Z+/=]+$/)?t:null)}function aD(t){if(t.length%2!=0)throw"input is not even length";if(t.match(/^[0-9A-Fa-f]+$/)==null)throw"input is not hexadecimal";for(var r=new ArrayBuffer(t.length/2),s=new DataView(r),a=0;a<t.length/2;a++)s.setUint8(a,parseInt(t.substr(a*2,2),16));return r}function uD(t){for(var r="",s=new DataView(t),a=0;a<t.byteLength;a++)r+=("00"+s.getUint8(a).toString(16)).slice(-2);return r}function Yh(t){var r,s,a,o,c,u,h,d,f,b,A,g;if(t=E1(t),g=t.match(/^(\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/),g)return r=parseInt(g[1]),s=parseInt(g[2])-1,a=parseInt(g[3]),o=parseInt(g[4]),c=parseInt(g[5]),u=parseInt(g[6]),h=0,b=g[7],b!==""&&(A=(b.substr(1)+"00").substr(0,3),h=parseInt(A)),Date.UTC(r,s,a,o,c,u,h);throw new Error("unsupported zulu format: "+t)}function oD(t){var r=new Date(t),s=("0000"+r.getUTCFullYear()).slice(-4),a=("00"+(r.getUTCMonth()+1)).slice(-2),o=("00"+r.getUTCDate()).slice(-2),c=("00"+r.getUTCHours()).slice(-2),u=("00"+r.getUTCMinutes()).slice(-2),h=("00"+r.getUTCSeconds()).slice(-2),d=("000"+r.getUTCMilliseconds()).slice(-3);return d=d.replace(/0+$/,""),d=d!=""?"."+d:d,s+a+o+c+u+h+d+"Z"}function _1(t){return Math.round(Yh(t)/1e3)}function cD(t){return new Date(Yh(t))}function lD(t,r,s){var a,o=t.getUTCFullYear();if(r){if(o<1950||2049<o)throw"not proper year for UTCTime: "+o;a=(""+o).slice(-2)}else a=("000"+o).slice(-4);if(a+=("0"+(t.getUTCMonth()+1)).slice(-2),a+=("0"+t.getUTCDate()).slice(-2),a+=("0"+t.getUTCHours()).slice(-2),a+=("0"+t.getUTCMinutes()).slice(-2),a+=("0"+t.getUTCSeconds()).slice(-2),s){var c=t.getUTCMilliseconds();c!==0&&(c=("00"+c).slice(-3),c=c.replace(/0+$/g,""),a+="."+c)}return a+="Z",a}function E1(t){return t.match(/^[0-9]{12}Z$/)||t.match(/^[0-9]{12}[.][0-9]*Z$/)?t.match(/^[0-4]/)?"20"+t:"19"+t:t}function tl(t){return t.replace(/%/g,"")}function rl(t){return t.replace(/(..)/g,"%$1")}function Uh(t){var r="malformed IPv6 address";if(!t.match(/^[0-9A-Fa-f:]+$/))throw r;t=t.toLowerCase();var s=t.split(":").length-1;if(s<2)throw r;var a=":".repeat(7-s+2);t=t.replace("::",a);var o=t.split(":");if(o.length!=8)throw r;for(var c=0;c<8;c++)o[c]=("0000"+o[c]).slice(-4);return o.join("")}function Mh(t){if(!t.match(/^[0-9A-Fa-f]{32}$/))throw new Error("malformed IPv6 address: "+t);t=t.toLowerCase();var r=t.match(/.{1,4}/g);r=r.map(function(o){return o.replace(/^0+/,"")}),r=r.map(function(o){return o==""?"0":o}),t=":"+r.join(":")+":";var s=t.match(/:(0:){2,}/g);if(s==null)return t.slice(1,-1);var a=s.sort().slice(-1)[0];return t=t.replace(a.substr(0,a.length-1),":"),t.substr(0,2)!="::"&&(t=t.substr(1)),t.substr(-2,2)!="::"&&(t=t.substr(0,t.length-1)),t}function Gc(t){var r=new Error("malformed hex value");if(!t.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw r;if(t.length==8){var s;try{return s=parseInt(t.substr(0,2),16)+"."+parseInt(t.substr(2,2),16)+"."+parseInt(t.substr(4,2),16)+"."+parseInt(t.substr(6,2),16),s}catch{throw r}}else if(t.length==16)try{return Gc(t.substr(0,8))+"/"+c1(t.substr(8))}catch{throw r}else{if(t.length==32)return Mh(t);if(t.length==64){try{return Mh(t.substr(0,32))+"/"+c1(t.substr(32))}catch{throw r}return}else return t}}function c1(t){var r=new Error("malformed mask"),s;try{s=new te(t,16).toString(2)}catch{throw r}if(!s.match(/^1*0*$/))throw r;return s.replace(/0+$/,"").length}function Jh(t){var r=new Error("malformed IP address");if(t=t.toLowerCase(t),!t.match(/^[0-9a-f.:/]+$/))throw r;if(t.match(/^[0-9.]+$/)){var s=t.split(".");if(s.length!==4)throw r;var a="";try{for(var o=0;o<4;o++){var c=parseInt(s[o]);a+=("0"+c.toString(16)).slice(-2)}return a}catch{throw r}}else if(t.match(/^[0-9.]+\/[0-9]+$/)){var u=t.split("/");return Jh(u[0])+l1(parseInt(u[1]),32)}else{if(t.match(/^[0-9a-f:]+$/)&&t.indexOf(":")!==-1)return Uh(t);if(t.match(/^[0-9a-f:]+\/[0-9]+$/)&&t.indexOf(":")!==-1){var u=t.split("/");return Uh(u[0])+l1(parseInt(u[1]),128)}else throw r}}function l1(t,r){if(r==32&&t==0)return"00000000";if(r==128&&t==0)return"00000000000000000000000000000000";var s=Array(t+1).join("1")+Array(r-t+1).join("0");return new te(s,2).toString(16)}function Xh(t){function r(o){var c=parseInt(o.substr(0,2),16),u=parseInt(o.substr(2),16);if(c==0&u<128)return String.fromCharCode(u);if(c<8){var h=192|(c&7)<<3|(u&192)>>6,d=128|u&63;return Wt(h.toString(16)+d.toString(16))}var h=224|(c&240)>>4,d=128|(c&15)<<2|(u&192)>>6,f=128|u&63;return Wt(h.toString(16)+d.toString(16)+f.toString(16))}var s=t.match(/.{4}/g),a=s.map(r);return a.join("")}function nl(t){for(var r=encodeURIComponent(t),s="",a=0;a<r.length;a++)r[a]=="%"?(s=s+r.substr(a,3),a=a+2):s=s+"%"+Ln(r[a]);return s}function fD(t){return t=t.replace(/\r\n/mg,`
`),t}function hD(t){return t=t.replace(/\r\n/mg,`
`),t=t.replace(/\n/mg,`\r
`),t}_.lang.String.isInteger=function(t){return t.match(/^[0-9]+$/)?!0:!!t.match(/^-[0-9]+$/)};_.lang.String.isHex=function(t){return A1(t)};function A1(t){return!!(t.length%2==0&&(t.match(/^[0-9a-f]+$/)||t.match(/^[0-9A-F]+$/)))}_.lang.String.isBase64=function(t){return t=t.replace(/\s+/g,""),!!(t.match(/^[0-9A-Za-z+\/]+={0,3}$/)&&t.length%4==0)};_.lang.String.isBase64URL=function(t){return t.match(/[+/=]/)?!1:(t=vo(t),_.lang.String.isBase64(t))};function Zh(t){return!!t.match(/^[0-9A-Za-z-_.]+$/)}_.lang.String.isIntegerArray=function(t){return t=t.replace(/\s+/g,""),!!t.match(/^\[[0-9,]+\]$/)};_.lang.String.isPrintable=function(t){return t.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null};_.lang.String.isIA5=function(t){return t.match(/^[\x20-\x21\x23-\x7f]*$/)!==null};_.lang.String.isMail=function(t){return t.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};function qh(t){return t.length%2==1?"0"+t:t.substr(0,1)>"7"?"00"+t:t}function pD(t){t=t.replace(/^\s*\[\s*/,""),t=t.replace(/\s*\]\s*$/,""),t=t.replace(/\s*/g,"");try{var r=t.split(/,/).map(function(s,a,o){var c=parseInt(s);if(c<0||255<c)throw"integer not in range 0-255";var u=("00"+c.toString(16)).slice(-2);return u}).join("");return r}catch(s){throw"malformed integer array string: "+s}}var dD=function(t,r){var s=t.length;t.length>r.length&&(s=r.length);for(var a=0;a<s;a++)if(t.charCodeAt(a)!=r.charCodeAt(a))return a;return t.length!=r.length?s:-1};function y1(t){var r=function(h){var d=h.toString(16);return d.length==1&&(d="0"+d),d},s=function(h){var d="",f=parseInt(h,10),b=f.toString(2),A=7-b.length%7;A==7&&(A=0);for(var g="",v=0;v<A;v++)g+="0";b=g+b;for(var v=0;v<b.length-1;v+=7){var y=b.substr(v,7);v!=b.length-7&&(y="1"+y),d+=r(parseInt(y,2))}return d};try{if(!t.match(/^[0-9.]+$/))return null;var a="",o=t.split("."),c=parseInt(o[0],10)*40+parseInt(o[1],10);a+=r(c),o.splice(0,2);for(var u=0;u<o.length;u++)a+=s(o[u]);return a}catch{return null}}function il(t){if(!A1(t))return null;try{var r=[],s=t.substr(0,2),a=parseInt(s,16);r[0]=new String(Math.floor(a/40)),r[1]=new String(a%40);for(var o=t.substr(2),c=[],u=0;u<o.length/2;u++)c.push(parseInt(o.substr(u*2,2),16));for(var h=[],d="",u=0;u<c.length;u++)c[u]&128?d=d+Wc((c[u]&127).toString(2),7):(d=d+Wc((c[u]&127).toString(2),7),h.push(new String(parseInt(d,2))),d="");var f=r.join(".");return h.length>0&&(f=f+"."+h.join(".")),f}catch{return null}}function S1(t){var r=new te(String(t),10);return mo(r)}function mo(t){var r=t.toString(16);if(r.substr(0,1)!="-")return r.length%2==1?r="0"+r:r.match(/^[0-7]/)||(r="00"+r),r;var s=r.substr(1),a=s.length;a%2==1?a+=1:r.match(/^[0-7]/)||(a+=2);for(var o="",c=0;c<a;c++)o+="f";var u=new te(o,16),h=u.xor(t).add(te.ONE);return r=h.toString(16).replace(/^-/,""),r}var Wc=function(t,r,s){return s==null&&(s="0"),t.length>=r?t:new Array(r-t.length+1).join(s)+t};function D1(t){if(t.length%2!=0||(t=t.toLowerCase(),t.match(/^[0-9a-f]+$/)==null))return-1;try{var r=t.substr(0,2);if(r=="00")return parseInt(t.substr(2),16);var s=parseInt(r,16);if(s>7)return-1;var a=t.substr(2),o=parseInt(a,16).toString(2);o=="0"&&(o="00000000"),o=o.slice(0,0-s);var c=parseInt(o,2);return c==NaN?-1:c}catch{return-1}}function F1(t){if(typeof t!="number"||t<0)return null;var r=Number(t).toString(2),s=8-r.length%8;s==8&&(s=0),r=r+Wc("",s,"0");var a=parseInt(r,2).toString(16);a.length%2==1&&(a="0"+a);var o="0"+s;return o+a}function C1(t){if(typeof t!="string"||t.length%2!=0||!t.match(/^[0-9a-f]+$/))return null;try{var r=parseInt(t.substr(0,2),16);if(r<0||7<r)return null;for(var s=t.substr(2),a="",o=0;o<s.length;o+=2){var c=s.substr(o,2),u=parseInt(c,16).toString(2);u=("0000000"+u).slice(-8),a+=u}return a.substr(0,a.length-r)}catch{return null}}function gD(t){if(typeof t!="string"||t.match(/^[01]+$/)==null)return null;try{var r=parseInt(t,2);return F1(r)}catch{return null}}function Yc(t,r){for(var s=0,a=0;a<t.length;a++)s|=1<<r[t[a]];for(var o=s.toString(2),c="",a=o.length-1;a>=0;a--)c+=o[a];return c}function Zt(t,a,s){if(typeof t=="object"){for(var a=String(a).split("."),o=0;o<a.length&&t;o++){var c=a[o];c.match(/^[0-9]+$/)&&(c=parseInt(c)),t=t[c]}return t||t===!1?t:s}}function me(t,r){var s=function(){};s.prototype=r.prototype,t.prototype=new s,t.prototype.constructor=t,t.superclass=r.prototype,r.prototype.constructor==Object.prototype.constructor&&(r.prototype.constructor=r)}(typeof _>"u"||!_)&&(_={});(typeof _.crypto>"u"||!_.crypto)&&(_.crypto={});_.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:$e.algo.MD5,sha1:$e.algo.SHA1,sha224:$e.algo.SHA224,sha256:$e.algo.SHA256,sha384:$e.algo.SHA384,sha512:$e.algo.SHA512,ripemd160:$e.algo.RIPEMD160},this.getDigestInfoHex=function(t,r){if(typeof this.DIGESTINFOHEAD[r]>"u")throw"alg not supported in Util.DIGESTINFOHEAD: "+r;return this.DIGESTINFOHEAD[r]+t},this.getPaddedDigestInfoHex=function(t,r,s){var a=this.getDigestInfoHex(t,r),o=s/4;if(a.length+22>o)throw"key is too short for SigAlg: keylen="+s+","+r;for(var c="0001",u="00"+a,h="",d=o-c.length-u.length,f=0;f<d;f+=2)h+="ff";var b=c+h+u;return b},this.hashString=function(t,r){var s=new _.crypto.MessageDigest({alg:r});return s.digestString(t)},this.hashHex=function(t,r){var s=new _.crypto.MessageDigest({alg:r});return s.digestHex(t)},this.sha1=function(t){return this.hashString(t,"sha1")},this.sha256=function(t){return this.hashString(t,"sha256")},this.sha256Hex=function(t){return this.hashHex(t,"sha256")},this.sha512=function(t){return this.hashString(t,"sha512")},this.sha512Hex=function(t){return this.hashHex(t,"sha512")},this.isKey=function(t){return t instanceof ct||t instanceof _.crypto.DSA||t instanceof _.crypto.ECDSA}};_.crypto.Util.md5=function(t){var r=new _.crypto.MessageDigest({alg:"md5",prov:"cryptojs"});return r.digestString(t)};_.crypto.Util.ripemd160=function(t){var r=new _.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"});return r.digestString(t)};_.crypto.Util.SECURERANDOMGEN=new hu;_.crypto.Util.getRandomHexOfNbytes=function(t){var r=new Array(t);return _.crypto.Util.SECURERANDOMGEN.nextBytes(r),Zc(r)};_.crypto.Util.getRandomBigIntegerOfNbytes=function(t){return new te(_.crypto.Util.getRandomHexOfNbytes(t),16)};_.crypto.Util.getRandomHexOfNbits=function(t){var r=t%8,s=(t-r)/8,a=new Array(s+1);return _.crypto.Util.SECURERANDOMGEN.nextBytes(a),a[0]=(255<<r&255^255)&a[0],Zc(a)};_.crypto.Util.getRandomBigIntegerOfNbits=function(t){return new te(_.crypto.Util.getRandomHexOfNbits(t),16)};_.crypto.Util.getRandomBigIntegerZeroToMax=function(t){for(var r=t.bitLength();;){var s=_.crypto.Util.getRandomBigIntegerOfNbits(r);if(t.compareTo(s)!=-1)return s}};_.crypto.Util.getRandomBigIntegerMinToMax=function(t,r){var s=t.compareTo(r);if(s==1)throw"biMin is greater than biMax";if(s==0)return t;var a=r.subtract(t),o=_.crypto.Util.getRandomBigIntegerZeroToMax(a);return o.add(t)};_.crypto.MessageDigest=function(t){var r=null,s=null,a=null;this.setAlgAndProvider=function(o,c){if(o=_.crypto.MessageDigest.getCanonicalAlgName(o),o!==null&&c===void 0&&(c=_.crypto.Util.DEFAULTPROVIDER[o]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(o)!=-1&&c=="cryptojs"){try{this.md=_.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[o].create()}catch(u){throw"setAlgAndProvider hash alg set fail alg="+o+"/"+u}this.updateString=function(u){this.md.update(u)},this.updateHex=function(u){var h=$e.enc.Hex.parse(u);this.md.update(h)},this.digest=function(){var u=this.md.finalize();return u.toString($e.enc.Hex)},this.digestString=function(u){return this.updateString(u),this.digest()},this.digestHex=function(u){return this.updateHex(u),this.digest()}}if(":sha256:".indexOf(o)!=-1&&c=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(u){throw"setAlgAndProvider hash alg set fail alg="+o+"/"+u}this.updateString=function(u){this.md.update(u)},this.updateHex=function(u){var h=sjcl.codec.hex.toBits(u);this.md.update(h)},this.digest=function(){var u=this.md.finalize();return sjcl.codec.hex.fromBits(u)},this.digestString=function(u){return this.updateString(u),this.digest()},this.digestHex=function(u){return this.updateHex(u),this.digest()}}},this.updateString=function(o){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(o){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(o){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(o){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},t!==void 0&&t.alg!==void 0&&(this.algName=t.alg,t.prov===void 0&&(this.provName=_.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))};_.crypto.MessageDigest.getCanonicalAlgName=function(t){return typeof t=="string"&&(t=t.toLowerCase(),t=t.replace(/-/,"")),t};_.crypto.MessageDigest.getHashLength=function(t){var r=_.crypto.MessageDigest,s=r.getCanonicalAlgName(t);if(r.HASHLENGTH[s]===void 0)throw"not supported algorithm: "+t;return r.HASHLENGTH[s]};_.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20};_.crypto.Mac=function(t){var r=null,s=null,a=null,o=null,c=null;this.setAlgAndProvider=function(u,h){if(u=u.toLowerCase(),u==null&&(u="hmacsha1"),u=u.toLowerCase(),u.substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+u;h===void 0&&(h=_.crypto.Util.DEFAULTPROVIDER[u]),this.algProv=u+"/"+h;var d=u.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(d)!=-1&&h=="cryptojs"){try{var f=_.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[d];this.mac=$e.algo.HMAC.create(f,this.pass)}catch(b){throw"setAlgAndProvider hash alg set fail hashAlg="+d+"/"+b}this.updateString=function(b){this.mac.update(b)},this.updateHex=function(b){var A=$e.enc.Hex.parse(b);this.mac.update(A)},this.doFinal=function(){var b=this.mac.finalize();return b.toString($e.enc.Hex)},this.doFinalString=function(b){return this.updateString(b),this.doFinal()},this.doFinalHex=function(b){return this.updateHex(b),this.doFinal()}}},this.updateString=function(u){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(u){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(u){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(u){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(u){if(typeof u=="string"){var h=u;(u.length%2==1||!u.match(/^[0-9A-Fa-f]+$/))&&(h=Mi(u)),this.pass=$e.enc.Hex.parse(h);return}if(typeof u!="object")throw"KJUR.crypto.Mac unsupported password type: "+u;var h=null;if(u.hex!==void 0){if(u.hex.length%2!=0||!u.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+u.hex;h=u.hex}if(u.utf8!==void 0&&(h=Qc(u.utf8)),u.rstr!==void 0&&(h=Mi(u.rstr)),u.b64!==void 0&&(h=cu(u.b64)),u.b64u!==void 0&&(h=sr(u.b64u)),h==null)throw"KJUR.crypto.Mac unsupported password type: "+u;this.pass=$e.enc.Hex.parse(h)},t!==void 0&&(t.pass!==void 0&&this.setPassword(t.pass),t.alg!==void 0&&(this.algName=t.alg,t.prov===void 0&&(this.provName=_.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))};_.crypto.Signature=function(t){var r=null,s=null,a=null,o=null,c=null,u=null,h=null,d=null,f=null,b=null,A=-1,g=null,v=null,y=null,m=null,D=null;if(this._setAlgNames=function(){var S=this.algName.match(/^(.+)with(.+)$/);S&&(this.mdAlgName=S[1].toLowerCase(),this.pubkeyAlgName=S[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(S,F){for(var $="",k=F/4-S.length,O=0;O<k;O++)$=$+"0";return $+S},this.setAlgAndProvider=function(S,F){if(this._setAlgNames(),F!="cryptojs/jsrsa")throw new Error("provider not supported: "+F);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new _.crypto.MessageDigest({alg:this.mdAlgName})}catch($){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+$)}this.init=function($,k){var O=null;try{k===void 0?O=Pt.getKey($):O=Pt.getKey($,k)}catch(z){throw"init failed:"+z}if(O.isPrivate===!0)this.prvKey=O,this.state="SIGN";else if(O.isPublic===!0)this.pubKey=O,this.state="VERIFY";else throw"init failed.:"+O},this.updateString=function($){this.md.updateString($)},this.updateHex=function($){this.md.updateHex($)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&_.crypto.ECDSA!==void 0&&(this.prvKey=new _.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof ct&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof ct&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof _.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else if(this.prvKey instanceof _.crypto.DSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;return this.hSign},this.signString=function($){return this.updateString($),this.sign()},this.signHex=function($){return this.updateHex($),this.sign()},this.verify=function($){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&_.crypto.ECDSA!==void 0&&(this.pubKey=new _.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof ct&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,$,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof ct&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,$);if(_.crypto.ECDSA!==void 0&&this.pubKey instanceof _.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,$);if(_.crypto.DSA!==void 0&&this.pubKey instanceof _.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,$);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(S,F){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(S){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(S){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(S){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(S){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(S){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=t,t!==void 0&&(t.alg!==void 0&&(this.algName=t.alg,t.prov===void 0?this.provName=_.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=t.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),t.psssaltlen!==void 0&&(this.pssSaltLen=t.psssaltlen),t.prvkeypem!==void 0)){if(t.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{var r=Pt.getKey(t.prvkeypem);this.init(r)}catch(S){throw"fatal error to load pem private key: "+S}}};_.crypto.Cipher=function(t){};_.crypto.Cipher.encrypt=function(t,r,s,a){if(Zt(a,"enclag")!=null&&(s=a.encalg),typeof s=="string"&&s.substr(-4)=="-CBC"){var o=r,c=t;Zt(a,"key")!=null&&(o=a.key),Zt(a,"enc")!=null&&(hEnc=a.enc);var u=$e.enc.Hex.parse(o),h=$e.enc.Hex.parse(c),d=$e.enc.Hex.parse(a.iv),f;if(s=="des-EDE3-CBC")f=$e.TripleDES.encrypt(h,u,{iv:d});else if(s=="aes128-CBC"||s=="aes256-CBC")f=$e.AES.encrypt(h,u,{iv:d});else throw new Error("unsupported algorithm: "+s);return f+""}else throw new Error("Cipher.encrypt: unsupported key or algorithm")};_.crypto.Cipher.decrypt=function(t,r,s,a){if(Zt(a,"enclag")!=null&&(s=a.encalg),typeof s=="string"&&s.substr(-4)=="-CBC"){var o=r,c=t;Zt(a,"key")!=null&&(o=a.key),Zt(a,"enc")!=null&&(c=a.enc);var u=$e.enc.Hex.parse(o),h=$e.enc.Hex.parse(c),d=$e.enc.Hex.parse(a.iv),f;if(s=="des-EDE3-CBC")f=$e.TripleDES.decrypt({ciphertext:h},u,{iv:d});else if(s=="aes128-CBC"||s=="aes256-CBC")f=$e.AES.decrypt({ciphertext:h},u,{iv:d});else throw new Error("unsupported algorithm: "+s);return $e.enc.Hex.stringify(f)}else throw new Error("Cipher.decrypt: unsupported key or algorithm")};_.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040022":"secp384r1","2b81040023":"secp521r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};(typeof _>"u"||!_)&&(_={});(typeof _.crypto>"u"||!_.crypto)&&(_.crypto={});_.crypto.ECDSA=function(t){var r="secp256r1",s=null,a=null,o=null,c=Error,u=te,h=Mt,d=_.crypto.ECDSA,f=_.crypto.ECParameterDB,b=d.getName,A=Ce,g=A.getVbyListEx,v=A.isASN1HEX,y=new hu,m=null;this.type="EC",this.isPrivate=!1,this.isPublic=!1;function D(S,F,$,k){for(var O=Math.max(F.bitLength(),k.bitLength()),z=S.add2D($),H=S.curve.getInfinity(),P=O-1;P>=0;--P)H=H.twice2D(),H.z=u.ONE,F.testBit(P)?k.testBit(P)?H=H.add2D(z):H=H.add2D(S):k.testBit(P)&&(H=H.add2D($));return H}this.getBigRandom=function(S){return new u(S.bitLength(),y).mod(S.subtract(u.ONE)).add(u.ONE)},this.setNamedCurve=function(S){this.ecparams=f.getByName(S),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=S},this.setPrivateKeyHex=function(S){this.isPrivate=!0,this.prvKeyHex=S},this.setPublicKeyHex=function(S){this.isPublic=!0,this.pubKeyHex=S},this.getPublicKeyXYHex=function(){var S=this.pubKeyHex;if(S.substr(0,2)!=="04")throw"this method supports uncompressed format(04) only";var F=this.ecparams.keycharlen;if(S.length!==2+F*2)throw"malformed public key hex length";var $={};return $.x=S.substr(2,F),$.y=S.substr(2+F),$},this.getShortNISTPCurveName=function(){var S=this.curveName;return S==="secp256r1"||S==="NIST P-256"||S==="P-256"||S==="prime256v1"?"P-256":S==="secp384r1"||S==="NIST P-384"||S==="P-384"?"P-384":S==="secp521r1"||S==="NIST P-521"||S==="P-521"?"P-521":null},this.generateKeyPairHex=function(){var S=this.ecparams.n,F=this.getBigRandom(S),$=this.ecparams.keycharlen,k=("0000000000"+F.toString(16)).slice(-$);this.setPrivateKeyHex(k);var O=this.generatePublicKeyHex();return{ecprvhex:k,ecpubhex:O}},this.generatePublicKeyHex=function(){var S=new u(this.prvKeyHex,16),F=this.ecparams.G.multiply(S),$=F.getX().toBigInteger(),k=F.getY().toBigInteger(),O=this.ecparams.keycharlen,z=("0000000000"+$.toString(16)).slice(-O),H=("0000000000"+k.toString(16)).slice(-O),P="04"+z+H;return this.setPublicKeyHex(P),P},this.signWithMessageHash=function(S){return this.signHex(S,this.prvKeyHex)},this.signHex=function(S,F){var $=new u(F,16),k=this.ecparams.n,O=new u(S.substring(0,this.ecparams.keycharlen),16);do var z=this.getBigRandom(k),H=this.ecparams.G,P=H.multiply(z),R=P.getX().toBigInteger().mod(k);while(R.compareTo(u.ZERO)<=0);var N=z.modInverse(k).multiply(O.add($.multiply(R))).mod(k);return d.biRSSigToASN1Sig(R,N)},this.sign=function(S,F){var $=F,k=this.ecparams.n,O=u.fromByteArrayUnsigned(S);do var z=this.getBigRandom(k),H=this.ecparams.G,P=H.multiply(z),R=P.getX().toBigInteger().mod(k);while(R.compareTo(te.ZERO)<=0);var N=z.modInverse(k).multiply(O.add($.multiply(R))).mod(k);return this.serializeSig(R,N)},this.verifyWithMessageHash=function(S,F){return this.verifyHex(S,F,this.pubKeyHex)},this.verifyHex=function(S,F,$){try{var k,O,z=d.parseSigHex(F);k=z.r,O=z.s;var H=h.decodeFromHex(this.ecparams.curve,$),P=new u(S.substring(0,this.ecparams.keycharlen),16);return this.verifyRaw(P,k,O,H)}catch{return!1}},this.verify=function(S,F,$){var k,O;if(Bitcoin.Util.isArray(F)){var z=this.parseSig(F);k=z.r,O=z.s}else if(typeof F=="object"&&F.r&&F.s)k=F.r,O=F.s;else throw"Invalid value for signature";var H;if($ instanceof Mt)H=$;else if(Bitcoin.Util.isArray($))H=h.decodeFrom(this.ecparams.curve,$);else throw"Invalid format for pubkey value, must be byte array or ECPointFp";var P=u.fromByteArrayUnsigned(S);return this.verifyRaw(P,k,O,H)},this.verifyRaw=function(S,F,$,k){var O=this.ecparams.n,z=this.ecparams.G;if(F.compareTo(u.ONE)<0||F.compareTo(O)>=0||$.compareTo(u.ONE)<0||$.compareTo(O)>=0)return!1;var H=$.modInverse(O),P=S.multiply(H).mod(O),R=F.multiply(H).mod(O),N=z.multiply(P).add(k.multiply(R)),x=N.getX().toBigInteger().mod(O);return x.equals(F)},this.serializeSig=function(S,F){var $=S.toByteArraySigned(),k=F.toByteArraySigned(),O=[];return O.push(2),O.push($.length),O=O.concat($),O.push(2),O.push(k.length),O=O.concat(k),O.unshift(O.length),O.unshift(48),O},this.parseSig=function(S){var F;if(S[0]!=48)throw new Error("Signature not a valid DERSequence");if(F=2,S[F]!=2)throw new Error("First element in signature must be a DERInteger");var $=S.slice(F+2,F+2+S[F+1]);if(F+=2+S[F+1],S[F]!=2)throw new Error("Second element in signature must be a DERInteger");var k=S.slice(F+2,F+2+S[F+1]);F+=2+S[F+1];var O=u.fromByteArrayUnsigned($),z=u.fromByteArrayUnsigned(k);return{r:O,s:z}},this.parseSigCompact=function(S){if(S.length!==65)throw"Signature has the wrong length";var F=S[0]-27;if(F<0||F>7)throw"Invalid signature type";var $=this.ecparams.n,k=u.fromByteArrayUnsigned(S.slice(1,33)).mod($),O=u.fromByteArrayUnsigned(S.slice(33,65)).mod($);return{r:k,s:O,i:F}},this.readPKCS5PrvKeyHex=function(S){if(v(S)===!1)throw new Error("not ASN.1 hex string");var F,$,k;try{F=g(S,0,["[0]",0],"06"),$=g(S,0,[1],"04");try{k=g(S,0,["[1]",0],"03")}catch{}}catch{throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=b(F),this.curveName===void 0)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(k),this.setPrivateKeyHex($),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(S){if(v(S)===!1)throw new c("not ASN.1 hex string");var F,$,k,O;try{F=g(S,0,[1,0],"06"),$=g(S,0,[1,1],"06"),k=g(S,0,[2,0,1],"04");try{O=g(S,0,[2,0,"[1]",0],"03")}catch{}}catch{throw new c("malformed PKCS#8 plain ECC private key")}if(this.curveName=b($),this.curveName===void 0)throw new c("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(O),this.setPrivateKeyHex(k),this.isPublic=!1},this.readPKCS8PubKeyHex=function(S){if(v(S)===!1)throw new c("not ASN.1 hex string");var F,$,k;try{F=g(S,0,[0,0],"06"),$=g(S,0,[0,1],"06"),k=g(S,0,[1],"03")}catch{throw new c("malformed PKCS#8 ECC public key")}if(this.curveName=b($),this.curveName===null)throw new c("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(k)},this.readCertPubKeyHex=function(S,F){if(v(S)===!1)throw new c("not ASN.1 hex string");var $,k;try{$=g(S,0,[0,5,0,1],"06"),k=g(S,0,[0,5,1],"03")}catch{throw new c("malformed X.509 certificate ECC public key")}if(this.curveName=b($),this.curveName===null)throw new c("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(k)},t!==void 0&&t.curve!==void 0&&(this.curveName=t.curve),this.curveName===void 0&&(this.curveName=r),this.setNamedCurve(this.curveName),t!==void 0&&(t.prv!==void 0&&this.setPrivateKeyHex(t.prv),t.pub!==void 0&&this.setPublicKeyHex(t.pub))};_.crypto.ECDSA.parseSigHex=function(t){var r=_.crypto.ECDSA.parseSigHexInHexRS(t),s=new te(r.r,16),a=new te(r.s,16);return{r:s,s:a}};_.crypto.ECDSA.parseSigHexInHexRS=function(t){var r=Ce,s=r.getChildIdx,a=r.getV;if(r.checkStrictDER(t,0),t.substr(0,2)!="30")throw new Error("signature is not a ASN.1 sequence");var o=s(t,0);if(o.length!=2)throw new Error("signature shall have two elements");var c=o[0],u=o[1];if(t.substr(c,2)!="02")throw new Error("1st item not ASN.1 integer");if(t.substr(u,2)!="02")throw new Error("2nd item not ASN.1 integer");var h=a(t,c),d=a(t,u);return{r:h,s:d}};_.crypto.ECDSA.asn1SigToConcatSig=function(t){var r=_.crypto.ECDSA.parseSigHexInHexRS(t),s=r.r,a=r.s;if(s.length>=130&&s.length<=134){if(s.length%2!=0)throw Error("unknown ECDSA sig r length error");if(a.length%2!=0)throw Error("unknown ECDSA sig s length error");s.substr(0,2)=="00"&&(s=s.substr(2)),a.substr(0,2)=="00"&&(a=a.substr(2));var o=Math.max(s.length,a.length);return s=("000000"+s).slice(-o),a=("000000"+a).slice(-o),s+a}if(s.substr(0,2)=="00"&&s.length%32==2&&(s=s.substr(2)),a.substr(0,2)=="00"&&a.length%32==2&&(a=a.substr(2)),s.length%32==30&&(s="00"+s),a.length%32==30&&(a="00"+a),s.length%32!=0)throw Error("unknown ECDSA sig r length error");if(a.length%32!=0)throw Error("unknown ECDSA sig s length error");return s+a};_.crypto.ECDSA.concatSigToASN1Sig=function(t){if(t.length%4!=0)throw Error("unknown ECDSA concatinated r-s sig length error");var r=t.substr(0,t.length/2),s=t.substr(t.length/2);return _.crypto.ECDSA.hexRSSigToASN1Sig(r,s)};_.crypto.ECDSA.hexRSSigToASN1Sig=function(t,r){var s=new te(t,16),a=new te(r,16);return _.crypto.ECDSA.biRSSigToASN1Sig(s,a)};_.crypto.ECDSA.biRSSigToASN1Sig=function(t,r){var s=_.asn1,a=new s.DERInteger({bigint:t}),o=new s.DERInteger({bigint:r}),c=new s.DERSequence({array:[a,o]});return c.tohex()};_.crypto.ECDSA.getName=function(t){return t==="2b8104001f"?"secp192k1":t==="2a8648ce3d030107"?"secp256r1":t==="2b8104000a"?"secp256k1":t==="2b81040021"?"secp224r1":t==="2b81040022"?"secp384r1":t==="2b81040023"?"secp521r1":"|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(t)!==-1?"secp256r1":"|secp256k1|".indexOf(t)!==-1?"secp256k1":"|secp224r1|NIST P-224|P-224|".indexOf(t)!==-1?"secp224r1":"|secp384r1|NIST P-384|P-384|".indexOf(t)!==-1?"secp384r1":"|secp521r1|NIST P-521|P-521|".indexOf(t)!==-1?"secp521r1":null};(typeof _>"u"||!_)&&(_={});(typeof _.crypto>"u"||!_.crypto)&&(_.crypto={});_.crypto.ECParameterDB=new function(){var t={},r={};function s(a){return new te(a,16)}this.getByName=function(a){var o=a;if(typeof r[o]<"u"&&(o=r[a]),typeof t[o]<"u")return t[o];throw"unregistered EC curve name: "+o},this.regist=function(a,o,c,u,h,d,f,b,A,g,v,y){t[a]={};var m=s(c),D=s(u),S=s(h),F=s(d),$=s(f),k=new _s(m,D,S),O=k.decodePointHex("04"+b+A);t[a].name=a,t[a].keylen=o,t[a].keycharlen=Math.ceil(o/8)*2,t[a].curve=k,t[a].G=O,t[a].n=F,t[a].h=$,t[a].oid=v,t[a].info=y;for(var z=0;z<g.length;z++)r[g[z]]=a}};_.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field");_.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field");_.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field");_.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]);_.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]);_.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]);_.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]);_.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]);_.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]);_.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","00C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);(typeof _>"u"||!_)&&(_={});(typeof _.crypto>"u"||!_.crypto)&&(_.crypto={});_.crypto.DSA=function(){var t=Ce,r=t.getVbyList,s=t.getVbyListEx,a=t.isASN1HEX,o=te;this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(c,u,h,d,f){this.isPrivate=!0,this.p=c,this.q=u,this.g=h,this.y=d,this.x=f},this.setPrivateHex=function(c,u,h,d,f){var b,A,g,v,y;b=new te(c,16),A=new te(u,16),g=new te(h,16),typeof d=="string"&&d.length>1?v=new te(d,16):v=null,y=new te(f,16),this.setPrivate(b,A,g,v,y)},this.setPublic=function(c,u,h,d){this.isPublic=!0,this.p=c,this.q=u,this.g=h,this.y=d,this.x=null},this.setPublicHex=function(c,u,h,d){var f,b,A,g;f=new te(c,16),b=new te(u,16),A=new te(h,16),g=new te(d,16),this.setPublic(f,b,A,g)},this.signWithMessageHash=function(c){var u=this.p,h=this.q,d=this.g,f=this.y,b=this.x,A=_.crypto.Util.getRandomBigIntegerMinToMax(te.ONE.add(te.ONE),h.subtract(te.ONE)),g=c.substr(0,h.bitLength()/4),v=new te(g,16),y=d.modPow(A,u).mod(h),m=A.modInverse(h).multiply(v.add(b.multiply(y))).mod(h),D=_.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:y}},{int:{bigint:m}}]});return D},this.verifyWithMessageHash=function(c,u){var h=this.p,d=this.q,f=this.g,b=this.y,A=this.parseASN1Signature(u),g=A[0],v=A[1],y=c.substr(0,d.bitLength()/4),m=new te(y,16);if(te.ZERO.compareTo(g)>0||g.compareTo(d)>0||te.ZERO.compareTo(v)>=0||v.compareTo(d)>0)throw"invalid DSA signature";var D=v.modInverse(d),S=m.multiply(D).mod(d),F=g.multiply(D).mod(d),$=f.modPow(S,h).multiply(b.modPow(F,h)).mod(h).mod(d);return $.compareTo(g)==0},this.parseASN1Signature=function(c){try{var u=new o(s(c,0,[0],"02"),16),h=new o(s(c,0,[1],"02"),16);return[u,h]}catch{throw new Error("malformed ASN.1 DSA signature")}},this.readPKCS5PrvKeyHex=function(c){var u,h,d,f,b;if(a(c)===!1)throw new Error("not ASN.1 hex string");try{u=s(c,0,[1],"02"),h=s(c,0,[2],"02"),d=s(c,0,[3],"02"),f=s(c,0,[4],"02"),b=s(c,0,[5],"02")}catch{throw new Error("malformed PKCS#1/5 plain DSA private key")}this.setPrivateHex(u,h,d,f,b)},this.readPKCS8PrvKeyHex=function(c){var u,h,d,f;if(a(c)===!1)throw new Error("not ASN.1 hex string");try{u=s(c,0,[1,1,0],"02"),h=s(c,0,[1,1,1],"02"),d=s(c,0,[1,1,2],"02"),f=s(c,0,[2,0],"02")}catch{throw new Error("malformed PKCS#8 plain DSA private key")}this.setPrivateHex(u,h,d,null,f)},this.readPKCS8PubKeyHex=function(c){var u,h,d,f;if(a(c)===!1)throw new Error("not ASN.1 hex string");try{u=s(c,0,[0,1,0],"02"),h=s(c,0,[0,1,1],"02"),d=s(c,0,[0,1,2],"02"),f=s(c,0,[1,0],"02")}catch{throw new Error("malformed PKCS#8 DSA public key")}this.setPublicHex(u,h,d,f)},this.readCertPubKeyHex=function(c,u){var h,d,f,b;if(a(c)===!1)throw new Error("not ASN.1 hex string");try{h=s(c,0,[0,5,0,1,0],"02"),d=s(c,0,[0,5,0,1,1],"02"),f=s(c,0,[0,5,0,1,2],"02"),b=s(c,0,[0,5,1,0],"02")}catch{throw new Error("malformed X.509 certificate DSA public key")}this.setPublicHex(h,d,f,b)}};var Pt=(function(){var t=function(m,D,S){return a($e.AES,m,D,S)},r=function(m,D,S){return a($e.TripleDES,m,D,S)},s=function(m,D,S){return a($e.DES,m,D,S)},a=function(m,D,S,F){var $=$e.enc.Hex.parse(D),k=$e.enc.Hex.parse(S),O=$e.enc.Hex.parse(F),z={};z.key=k,z.iv=O,z.ciphertext=$;var H=m.decrypt(z,k,{iv:O});return $e.enc.Hex.stringify(H)},o=function(m,D,S){return h($e.AES,m,D,S)},c=function(m,D,S){return h($e.TripleDES,m,D,S)},u=function(m,D,S){return h($e.DES,m,D,S)},h=function(m,D,S,F){var $=$e.enc.Hex.parse(D),k=$e.enc.Hex.parse(S),O=$e.enc.Hex.parse(F),z=m.encrypt($,k,{iv:O}),H=$e.enc.Hex.parse(z.toString()),P=$e.enc.Base64.stringify(H);return P},d={"AES-256-CBC":{proc:t,eproc:o,keylen:32,ivlen:16},"AES-192-CBC":{proc:t,eproc:o,keylen:24,ivlen:16},"AES-128-CBC":{proc:t,eproc:o,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:r,eproc:c,keylen:24,ivlen:8},"DES-CBC":{proc:s,eproc:u,keylen:8,ivlen:8}},f=function(m){return d[m].proc},b=function(m){var D=$e.lib.WordArray.random(m),S=$e.enc.Hex.stringify(D);return S},A=function(m){var D={},S=m.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));S&&(D.cipher=S[1],D.ivsalt=S[2]);var F=m.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));F&&(D.type=F[1]);var $=-1,k=0;m.indexOf(`\r
\r
`)!=-1&&($=m.indexOf(`\r
\r
`),k=2),m.indexOf(`

`)!=-1&&($=m.indexOf(`

`),k=1);var O=m.indexOf("-----END");if($!=-1&&O!=-1){var z=m.substring($+k*2,O-k);z=z.replace(/\s+/g,""),D.data=z}return D},g=function(m,D,S){for(var F=S.substring(0,16),$=$e.enc.Hex.parse(F),k=$e.enc.Utf8.parse(D),O=d[m].keylen+d[m].ivlen,z="",H=null;;){var P=$e.algo.MD5.create();if(H!=null&&P.update(H),P.update(k),P.update($),H=P.finalize(),z=z+$e.enc.Hex.stringify(H),z.length>=O*2)break}var R={};return R.keyhex=z.substr(0,d[m].keylen*2),R.ivhex=z.substr(d[m].keylen*2,d[m].ivlen*2),R},v=function(m,D,S,F){var $=$e.enc.Base64.parse(m),k=$e.enc.Hex.stringify($),O=d[D].proc,z=O(k,S,F);return z},y=function(m,D,S,F){var $=d[D].eproc,k=$(m,S,F);return k};return{version:"1.0.0",parsePKCS5PEM:function(m){return A(m)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(m,D,S){return g(m,D,S)},decryptKeyB64:function(m,D,S,F){return v(m,D,S,F)},getDecryptedKeyHex:function(m,D){var S=A(m),F=S.type,$=S.cipher,k=S.ivsalt,O=S.data,z=g($,D,k),H=z.keyhex,P=v(O,$,H,k);return P},getEncryptedPKCS5PEMFromPrvKeyHex:function(m,D,S,F,$){var N="";if((typeof F>"u"||F==null)&&(F="AES-256-CBC"),typeof d[F]>"u")throw new Error("KEYUTIL unsupported algorithm: "+F);if(typeof $>"u"||$==null){var k=d[F].ivlen,O=b(k);$=O.toUpperCase()}var z=g(F,S,$),H=z.keyhex,P=y(D,F,H,$),R=P.replace(/(.{64})/g,`$1\r
`),N="-----BEGIN "+m+` PRIVATE KEY-----\r
`;return N+=`Proc-Type: 4,ENCRYPTED\r
`,N+="DEK-Info: "+F+","+$+`\r
`,N+=`\r
`,N+=R,N+=`\r
-----END `+m+` PRIVATE KEY-----\r
`,N},getEncryptedPKCS8PEM:function(m,D,S){var F=this.getEncryptedPKCS8Hex(m,D,S);return dn(F,"ENCRYPTED PRIVATE KEY")},getEncryptedPKCS8Hex:function(m,D,S){var F;S==null||S==null?F={}:F=JSON.parse(JSON.stringify(S)),F.plain=m,this.initPBES2Param(F),this.encryptPBES2Param(F,D);var $=this.generatePBES2ASN1Param(F);return _.asn1.ASN1Util.newObject($).tohex()},initPBES2Param:function(m){if(Zt(m,"encalg")==null&&(m.encalg="aes256-CBC"),Zt(m,"iter")==null&&(m.iter=2048),Zt(m,"prf")==null&&(m.prf="hmacWithSHA256"),Zt(m,"salt")==null&&(m.salt=$e.enc.Hex.stringify($e.lib.WordArray.random(8))),Zt(m,"enciv")==null){var D;m.encalg=="des-EDE3-CBC"&&(D=8),m.encalg=="aes128-CBC"&&(D=16),m.encalg=="aes256-CBC"&&(D=16),m.enciv=$e.enc.Hex.stringify($e.lib.WordArray.random(D))}},encryptPBES2Param:function(m,D){var S=Pt.getDKFromPBES2Param(m,D);try{var F=_.crypto.Cipher.encrypt(m.plain,S,m.encalg,{iv:m.enciv})}catch{throw new Error("encrypt error: "+m.plain+" "+S+" "+m.encalg+" "+m.enciv)}m.enc=F},generatePBES2ASN1Param:function(m){var D={seq:[{seq:[{oid:"pkcs5PBES2"},{seq:[{seq:[{oid:"pkcs5PBKDF2"},{seq:[{octstr:{hex:m.salt}},{int:{hex:S1(m.iter)}}]}]},{seq:[{oid:m.encalg},{octstr:{hex:m.enciv}}]}]}]},{octstr:{hex:m.enc}}]};return m.prf!="hmacWithSHA1"&&D.seq[0].seq[1].seq[0].seq[1].seq.push({seq:[{oid:m.prf},{null:""}]}),D},parseHexOfEncryptedPKCS8:function(m){var D=Ce,S=D.getChildIdx,F=D.getV,$={},k=S(m,0);if(k.length!=2)throw new Error("malformed format: SEQUENCE(0).items != 2: "+k.length);$.ciphertext=F(m,k[1]);var O=S(m,k[0]);if(O.length!=2)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+O.length);if(F(m,O[0])!="2a864886f70d01050d")throw new Error("this only supports pkcs5PBES2");var z=S(m,O[1]);if(O.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+z.length);var H=S(m,z[1]);if(H.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+H.length);if(F(m,H[0])!="2a864886f70d0307")throw"this only supports TripleDES";$.encryptionSchemeAlg="TripleDES",$.encryptionSchemeIV=F(m,H[1]);var P=S(m,z[0]);if(P.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+P.length);if(F(m,P[0])!="2a864886f70d01050c")throw new Error("this only supports pkcs5PBKDF2");var R=S(m,P[1]);if(R.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+R.length);$.pbkdf2Salt=F(m,R[0]);var N=F(m,R[1]);try{$.pbkdf2Iter=parseInt(N,16)}catch{throw new Error("malformed format pbkdf2Iter: "+N)}return $},getPBKDF2KeyHexFromParam:function(m,D){var S=$e.enc.Hex.parse(m.pbkdf2Salt),F=m.pbkdf2Iter,$=$e.PBKDF2(D,S,{keySize:192/32,iterations:F}),k=$e.enc.Hex.stringify($);return k},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(m,D){var S=gr(m,"ENCRYPTED PRIVATE KEY"),F=this.parseHexOfEncryptedPKCS8(S),$=Pt.getPBKDF2KeyHexFromParam(F,D),k={};k.ciphertext=$e.enc.Hex.parse(F.ciphertext);var O=$e.enc.Hex.parse($),z=$e.enc.Hex.parse(F.encryptionSchemeIV),H=$e.TripleDES.decrypt(k,O,{iv:z}),P=$e.enc.Hex.stringify(H);return P},parsePBES2:function(m){var D=Ce.parse(m);if(Zt(D,"seq.0.seq.0.oid")!="pkcs5PBES2"||Zt(D,"seq.0.seq.1.seq.0.seq.0.oid")!="pkcs5PBKDF2")throw new Error("not pkcs5PBES2 and pkcs5PBKDF2 used");var S=Zt(D,"seq.0.seq.1.seq.0.seq.1.seq");if(S==null)throw new Error("PBKDF2 parameter not found");var F=Zt(S,"0.octstr.hex"),$=Zt(S,"1.int.hex"),k=Zt(S,"2.seq.0.oid","hmacWithSHA1"),O=-1;try{O=parseInt($,16)}catch{throw new Error("iter not proper value")}var z=Zt(D,"seq.0.seq.1.seq.1.seq.0.oid"),H=Zt(D,"seq.0.seq.1.seq.1.seq.1.octstr.hex"),P=Zt(D,"seq.1.octstr.hex");if(z==null||H==null||P==null)throw new Error("encalg, enciv or enc is undefined");var R={salt:F,iter:O,prf:k,encalg:z,enciv:H,enc:P};return R},getDKFromPBES2Param:function(m,D){var S={hmacWithSHA1:$e.algo.SHA1,hmacWithSHA224:$e.algo.SHA224,hmacWithSHA256:$e.algo.SHA256,hmacWithSHA384:$e.algo.SHA384,hmacWithSHA512:$e.algo.SHA512},F={"des-EDE3-CBC":192/32,"aes128-CBC":128/32,"aes256-CBC":256/32},$=S[m.prf];if($==null)throw new Error("unsupported prf");var k=F[m.encalg];if(k==null)throw new Error("unsupported encalg");var O=$e.enc.Hex.parse(m.salt),z=m.iter;try{var H=$e.PBKDF2(D,O,{keySize:k,iterations:z,hasher:$});return $e.enc.Hex.stringify(H)}catch(P){throw new Error("PBKDF2 error: "+P+" "+JSON.stringify(m)+" "+D)}},getPlainHexFromEncryptedPKCS8PEM:function(m,D){if(m.indexOf("BEGIN ENCRYPTED PRIVATE KEY")==-1)throw new Error("not Encrypted PKCS#8 PEM string");var S=gr(m),F;try{F=Pt.parsePBES2(S)}catch(k){throw new Error("malformed PBES2 format: "+k.message)}var $=Pt.getDKFromPBES2Param(F,D);return _.crypto.Cipher.decrypt(F.enc,$,F.encalg,{iv:F.enciv})},getKeyFromEncryptedPKCS8PEM:function(m,D){var S=this.getPlainHexFromEncryptedPKCS8PEM(m,D),F=this.getKeyFromPlainPrivatePKCS8Hex(S);return F},parsePlainPrivatePKCS8Hex:function(m){var D=Ce,S=D.getChildIdx,F=D.getV,$={};if($.algparam=null,m.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var k=S(m,0);if(k.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(m.substr(k[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var O=S(m,k[1]);if(O.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(m.substr(O[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if($.algoid=F(m,O[0]),m.substr(O[1],2)=="06"&&($.algparam=F(m,O[1])),m.substr(k[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return $.keyidx=D.getVidx(m,k[2]),$},getKeyFromPlainPrivatePKCS8PEM:function(m){var D=gr(m,"PRIVATE KEY"),S=this.getKeyFromPlainPrivatePKCS8Hex(D);return S},getKeyFromPlainPrivatePKCS8Hex:function(m){var D=this.parsePlainPrivatePKCS8Hex(m),S;if(D.algoid=="2a864886f70d010101")S=new ct;else if(D.algoid=="2a8648ce380401")S=new _.crypto.DSA;else if(D.algoid=="2a8648ce3d0201")S=new _.crypto.ECDSA;else throw new Error("unsupported private key algorithm");return S.readPKCS8PrvKeyHex(m),S},_getKeyFromPublicPKCS8Hex:function(m){var D,S=Ce.getVbyList(m,0,[0,0],"06");if(S==="2a864886f70d010101")D=new ct;else if(S==="2a8648ce380401")D=new _.crypto.DSA;else if(S==="2a8648ce3d0201")D=new _.crypto.ECDSA;else throw new Error("unsupported PKCS#8 public key hex");return D.readPKCS8PubKeyHex(m),D},parsePublicRawRSAKeyHex:function(m){var D=Ce,S=D.getChildIdx,F=D.getV,$={};if(m.substr(0,2)!="30")throw new Error("malformed RSA key(code:001)");var k=S(m,0);if(k.length!=2)throw new Error("malformed RSA key(code:002)");if(m.substr(k[0],2)!="02")throw new Error("malformed RSA key(code:003)");if($.n=F(m,k[0]),m.substr(k[1],2)!="02")throw new Error("malformed RSA key(code:004)");return $.e=F(m,k[1]),$},parsePublicPKCS8Hex:function(m){var D=Ce,S=D.getChildIdx,F=D.getV,$={};$.algparam=null;var k=S(m,0);if(k.length!=2)throw new Error("outer DERSequence shall have 2 elements: "+k.length);var O=k[0];if(m.substr(O,2)!="30")throw new Error("malformed PKCS8 public key(code:001)");var z=S(m,O);if(z.length!=2)throw new Error("malformed PKCS8 public key(code:002)");if(m.substr(z[0],2)!="06")throw new Error("malformed PKCS8 public key(code:003)");if($.algoid=F(m,z[0]),m.substr(z[1],2)=="06"?$.algparam=F(m,z[1]):m.substr(z[1],2)=="30"&&($.algparam={},$.algparam.p=D.getVbyList(m,z[1],[0],"02"),$.algparam.q=D.getVbyList(m,z[1],[1],"02"),$.algparam.g=D.getVbyList(m,z[1],[2],"02")),m.substr(k[1],2)!="03")throw new Error("malformed PKCS8 public key(code:004)");return $.key=F(m,k[1]).substr(2),$}}})();Pt.getKey=function(t,r,s){var a=Ce,o=a.getChildIdx,c=a.getV,u=a.getVbyList,h=_.crypto,d=h.ECDSA,f=h.DSA,b=ct,A=gr,g=Pt;if(typeof b<"u"&&t instanceof b||typeof d<"u"&&t instanceof d||typeof f<"u"&&t instanceof f)return t;if(t.curve!==void 0&&t.xy!==void 0&&t.d===void 0)return new d({pub:t.xy,curve:t.curve});if(t.curve!==void 0&&t.d!==void 0)return new d({prv:t.d,curve:t.curve});if(t.kty===void 0&&t.n!==void 0&&t.e!==void 0&&t.d===void 0){var v=new b;return v.setPublic(t.n,t.e),v}if(t.kty===void 0&&t.n!==void 0&&t.e!==void 0&&t.d!==void 0&&t.p!==void 0&&t.q!==void 0&&t.dp!==void 0&&t.dq!==void 0&&t.co!==void 0&&t.qi===void 0){var v=new b;return v.setPrivateEx(t.n,t.e,t.d,t.p,t.q,t.dp,t.dq,t.co),v}if(t.kty===void 0&&t.n!==void 0&&t.e!==void 0&&t.d!==void 0&&t.p===void 0){var v=new b;return v.setPrivate(t.n,t.e,t.d),v}if(t.p!==void 0&&t.q!==void 0&&t.g!==void 0&&t.y!==void 0&&t.x===void 0){var v=new f;return v.setPublic(t.p,t.q,t.g,t.y),v}if(t.p!==void 0&&t.q!==void 0&&t.g!==void 0&&t.y!==void 0&&t.x!==void 0){var v=new f;return v.setPrivate(t.p,t.q,t.g,t.y,t.x),v}if(t.kty==="RSA"&&t.n!==void 0&&t.e!==void 0&&t.d===void 0){var v=new b;return v.setPublic(sr(t.n),sr(t.e)),v}if(t.kty==="RSA"&&t.n!==void 0&&t.e!==void 0&&t.d!==void 0&&t.p!==void 0&&t.q!==void 0&&t.dp!==void 0&&t.dq!==void 0&&t.qi!==void 0){var v=new b;return v.setPrivateEx(sr(t.n),sr(t.e),sr(t.d),sr(t.p),sr(t.q),sr(t.dp),sr(t.dq),sr(t.qi)),v}if(t.kty==="RSA"&&t.n!==void 0&&t.e!==void 0&&t.d!==void 0){var v=new b;return v.setPrivate(sr(t.n),sr(t.e),sr(t.d)),v}if(t.kty==="EC"&&t.crv!==void 0&&t.x!==void 0&&t.y!==void 0&&t.d===void 0){var y=new d({curve:t.crv}),m=y.ecparams.keycharlen,D=("0000000000"+sr(t.x)).slice(-m),S=("0000000000"+sr(t.y)).slice(-m),F="04"+D+S;return y.setPublicKeyHex(F),y}if(t.kty==="EC"&&t.crv!==void 0&&t.x!==void 0&&t.y!==void 0&&t.d!==void 0){var y=new d({curve:t.crv}),m=y.ecparams.keycharlen,D=("0000000000"+sr(t.x)).slice(-m),S=("0000000000"+sr(t.y)).slice(-m),F="04"+D+S,$=("0000000000"+sr(t.d)).slice(-m);return y.setPublicKeyHex(F),y.setPrivateKeyHex($),y}if(s==="pkcs5prv"){var k=t,a=Ce,O,v;if(O=o(k,0),O.length===9)v=new b,v.readPKCS5PrvKeyHex(k);else if(O.length===6)v=new f,v.readPKCS5PrvKeyHex(k);else if(O.length>2&&k.substr(O[1],2)==="04")v=new d,v.readPKCS5PrvKeyHex(k);else throw new Error("unsupported PKCS#1/5 hexadecimal key");return v}if(s==="pkcs8prv"){var v=g.getKeyFromPlainPrivatePKCS8Hex(t);return v}if(s==="pkcs8pub")return g._getKeyFromPublicPKCS8Hex(t);if(s==="x509pub")return tt.getPublicKeyFromCertHex(t);if(t.indexOf("-END CERTIFICATE-",0)!=-1||t.indexOf("-END X509 CERTIFICATE-",0)!=-1||t.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return tt.getPublicKeyFromCertPEM(t);if(t.indexOf("-END PUBLIC KEY-")!=-1){var z=gr(t,"PUBLIC KEY");return g._getKeyFromPublicPKCS8Hex(z)}if(t.indexOf("-END RSA PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")==-1){var H=A(t,"RSA PRIVATE KEY");return g.getKey(H,null,"pkcs5prv")}if(t.indexOf("-END DSA PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")==-1){var P=A(t,"DSA PRIVATE KEY"),R=u(P,0,[1],"02"),N=u(P,0,[2],"02"),x=u(P,0,[3],"02"),V=u(P,0,[4],"02"),Y=u(P,0,[5],"02"),v=new f;return v.setPrivate(new te(R,16),new te(N,16),new te(x,16),new te(V,16),new te(Y,16)),v}if(t.indexOf("-END EC PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")==-1){var H=A(t,"EC PRIVATE KEY");return g.getKey(H,null,"pkcs5prv")}if(t.indexOf("-END PRIVATE KEY-")!=-1)return g.getKeyFromPlainPrivatePKCS8PEM(t);if(t.indexOf("-END RSA PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")!=-1){var G=g.getDecryptedKeyHex(t,r),W=new ct;return W.readPKCS5PrvKeyHex(G),W}if(t.indexOf("-END EC PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")!=-1){var P=g.getDecryptedKeyHex(t,r),v=u(P,0,[1],"04"),Z=u(P,0,[2,0],"06"),ae=u(P,0,[3,0],"03").substr(2),He="";if(_.crypto.OID.oidhex2name[Z]!==void 0)He=_.crypto.OID.oidhex2name[Z];else throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+Z);var y=new d({curve:He});return y.setPublicKeyHex(ae),y.setPrivateKeyHex(v),y.isPublic=!1,y}if(t.indexOf("-END DSA PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")!=-1){var P=g.getDecryptedKeyHex(t,r),R=u(P,0,[1],"02"),N=u(P,0,[2],"02"),x=u(P,0,[3],"02"),V=u(P,0,[4],"02"),Y=u(P,0,[5],"02"),v=new f;return v.setPrivate(new te(R,16),new te(N,16),new te(x,16),new te(V,16),new te(Y,16)),v}if(t.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return g.getKeyFromEncryptedPKCS8PEM(t,r);throw new Error("not supported argument")};Pt.generateKeypair=function(t,r){if(t=="RSA"){var s=r,a=new ct;a.generate(s,"10001"),a.isPrivate=!0,a.isPublic=!0;var o=new ct,c=a.n.toString(16),u=a.e.toString(16);o.setPublic(c,u),o.isPrivate=!1,o.isPublic=!0;var h={};return h.prvKeyObj=a,h.pubKeyObj=o,h}else if(t=="EC"){var d=r,f=new _.crypto.ECDSA({curve:d}),b=f.generateKeyPairHex(),a=new _.crypto.ECDSA({curve:d});a.setPublicKeyHex(b.ecpubhex),a.setPrivateKeyHex(b.ecprvhex),a.isPrivate=!0,a.isPublic=!1;var o=new _.crypto.ECDSA({curve:d});o.setPublicKeyHex(b.ecpubhex),o.isPrivate=!1,o.isPublic=!0;var h={};return h.prvKeyObj=a,h.pubKeyObj=o,h}else throw new Error("unknown algorithm: "+t)};Pt.getPEM=function(t,r,s,a,o,c){var u=_,h=u.asn1,d=h.DERObjectIdentifier,f=h.DERInteger,b=h.ASN1Util.newObject,A=h.x509,g=A.SubjectPublicKeyInfo,v=u.crypto,y=v.DSA,m=v.ECDSA,D=ct;function S(W){var Z=b({seq:[{int:0},{int:{bigint:W.n}},{int:W.e},{int:{bigint:W.d}},{int:{bigint:W.p}},{int:{bigint:W.q}},{int:{bigint:W.dmp1}},{int:{bigint:W.dmq1}},{int:{bigint:W.coeff}}]});return Z}function F(W){var Z=b({seq:[{int:1},{octstr:{hex:W.prvKeyHex}},{tag:["a0",!0,{oid:{name:W.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+W.pubKeyHex}}]}]});return Z}function $(W){var Z=b({seq:[{int:0},{int:{bigint:W.p}},{int:{bigint:W.q}},{int:{bigint:W.g}},{int:{bigint:W.y}},{int:{bigint:W.x}}]});return Z}if((D!==void 0&&t instanceof D||y!==void 0&&t instanceof y||m!==void 0&&t instanceof m)&&t.isPublic==!0&&(r===void 0||r=="PKCS8PUB")){var k=new g(t),O=k.tohex();return dn(O,"PUBLIC KEY")}if(r=="PKCS1PRV"&&D!==void 0&&t instanceof D&&(s===void 0||s==null)&&t.isPrivate==!0){var k=S(t),O=k.tohex();return dn(O,"RSA PRIVATE KEY")}if(r=="PKCS1PRV"&&m!==void 0&&t instanceof m&&(s===void 0||s==null)&&t.isPrivate==!0){var z=new d({name:t.curveName}),H=z.tohex(),P=F(t),R=P.tohex(),N="";return N+=dn(H,"EC PARAMETERS"),N+=dn(R,"EC PRIVATE KEY"),N}if(r=="PKCS1PRV"&&y!==void 0&&t instanceof y&&(s===void 0||s==null)&&t.isPrivate==!0){var k=$(t),O=k.tohex();return dn(O,"DSA PRIVATE KEY")}if(r=="PKCS5PRV"&&D!==void 0&&t instanceof D&&s!==void 0&&s!=null&&t.isPrivate==!0){var k=S(t),O=k.tohex();return a===void 0&&(a="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",O,s,a,c)}if(r=="PKCS5PRV"&&m!==void 0&&t instanceof m&&s!==void 0&&s!=null&&t.isPrivate==!0){var k=F(t),O=k.tohex();return a===void 0&&(a="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",O,s,a,c)}if(r=="PKCS5PRV"&&y!==void 0&&t instanceof y&&s!==void 0&&s!=null&&t.isPrivate==!0){var k=$(t),O=k.tohex();return a===void 0&&(a="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",O,s,a,c)}var x=function(W,Z){if(typeof Z=="string")return Pt.getEncryptedPKCS8PEM(W,Z);if(typeof Z=="object"&&Zt(Z,"passcode")!=null){var ae=JSON.parse(JSON.stringify(Z)),He=ae.passcode;return delete ae.passcode,Pt.getEncryptedPKCS8PEM(W,He,ae)}};if(r=="PKCS8PRV"&&D!=null&&t instanceof D&&t.isPrivate==!0){var V=S(t),Y=V.tohex(),k=b({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:Y}}]}),O=k.tohex();return s===void 0||s==null?dn(O,"PRIVATE KEY"):x(O,s)}if(r=="PKCS8PRV"&&m!==void 0&&t instanceof m&&t.isPrivate==!0){var G={seq:[{int:1},{octstr:{hex:t.prvKeyHex}}]};typeof t.pubKeyHex=="string"&&G.seq.push({tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]});var V=new b(G),Y=V.tohex(),k=b({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:t.curveName}}]},{octstr:{hex:Y}}]}),O=k.tohex();return s===void 0||s==null?dn(O,"PRIVATE KEY"):x(O,s)}if(r=="PKCS8PRV"&&y!==void 0&&t instanceof y&&t.isPrivate==!0){var V=new f({bigint:t.x}),Y=V.tohex(),k=b({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}}]}]},{octstr:{hex:Y}}]}),O=k.tohex();return s===void 0||s==null?dn(O,"PRIVATE KEY"):x(O,s)}throw new Error("unsupported object nor format")};Pt.getKeyFromCSRPEM=function(t){var r=gr(t,"CERTIFICATE REQUEST"),s=Pt.getKeyFromCSRHex(r);return s};Pt.getKeyFromCSRHex=function(t){var r=Pt.parseCSRHex(t),s=Pt.getKey(r.p8pubkeyhex,null,"pkcs8pub");return s};Pt.parseCSRHex=function(t){var r=Ce,s=r.getChildIdx,a=r.getTLV,o={},c=t;if(c.substr(0,2)!="30")throw new Error("malformed CSR(code:001)");var u=s(c,0);if(u.length<1)throw new Error("malformed CSR(code:002)");if(c.substr(u[0],2)!="30")throw new Error("malformed CSR(code:003)");var h=s(c,u[0]);if(h.length<3)throw new Error("malformed CSR(code:004)");return o.p8pubkeyhex=a(c,h[2]),o};Pt.getKeyID=function(t){var r=Pt,s=Ce;typeof t=="string"&&t.indexOf("BEGIN ")!=-1&&(t=r.getKey(t));var a=gr(r.getPEM(t)),o=s.getIdxbyList(a,0,[1]),c=s.getV(a,o).substring(2);return _.crypto.Util.hashHex(c,"sha1")};Pt.getJWK=function(t,r,s,a,o){var c,u={},h,d=_.crypto.Util.hashHex;if(typeof t=="string")c=Pt.getKey(t),t.indexOf("CERTIFICATE")!=-1&&(h=gr(t));else if(typeof t=="object")t instanceof tt?(c=t.getPublicKey(),h=t.hex):c=t;else throw new Error("unsupported keyinfo type");if(c instanceof ct&&c.isPrivate)u.kty="RSA",u.n=Mr(c.n.toString(16)),u.e=Mr(c.e.toString(16)),u.d=Mr(c.d.toString(16)),u.p=Mr(c.p.toString(16)),u.q=Mr(c.q.toString(16)),u.dp=Mr(c.dmp1.toString(16)),u.dq=Mr(c.dmq1.toString(16)),u.qi=Mr(c.coeff.toString(16));else if(c instanceof ct&&c.isPublic)u.kty="RSA",u.n=Mr(c.n.toString(16)),u.e=Mr(c.e.toString(16));else if(c instanceof _.crypto.ECDSA&&c.isPrivate){var f=c.getShortNISTPCurveName();if(f!=="P-256"&&f!=="P-384"&&f!=="P-521")throw new Error("unsupported curve name for JWT: "+f);var b=c.getPublicKeyXYHex();u.kty="EC",u.crv=f,u.x=Mr(b.x),u.y=Mr(b.y),u.d=Mr(c.prvKeyHex)}else if(c instanceof _.crypto.ECDSA&&c.isPublic){var f=c.getShortNISTPCurveName();if(f!=="P-256"&&f!=="P-384"&&f!=="P-521")throw new Error("unsupported curve name for JWT: "+f);var b=c.getPublicKeyXYHex();u.kty="EC",u.crv=f,u.x=Mr(b.x),u.y=Mr(b.y)}if(u.kty==null)throw new Error("unsupported keyinfo");return!c.isPrivate&&r!=!0&&(u.kid=_.jws.JWS.getJWKthumbprint(u)),h!=null&&s!=!0&&(u.x5c=[bs(h)]),h!=null&&a!=!0&&(u.x5t=ou(bs(d(h,"sha1")))),h!=null&&o!=!0&&(u["x5t#S256"]=ou(bs(d(h,"sha256")))),u};Pt.getJWKFromKey=function(t){return Pt.getJWK(t,!0,!0,!0,!0)};ct.getPosArrayOfChildrenFromHex=function(t){return Ce.getChildIdx(t,0)};ct.getHexValueArrayOfChildrenFromHex=function(t){var r=Ce,s=r.getV,g=ct.getPosArrayOfChildrenFromHex(t),a=s(t,g[0]),o=s(t,g[1]),c=s(t,g[2]),u=s(t,g[3]),h=s(t,g[4]),d=s(t,g[5]),f=s(t,g[6]),b=s(t,g[7]),A=s(t,g[8]),g=new Array;return g.push(a,o,c,u,h,d,f,b,A),g};ct.prototype.readPrivateKeyFromPEMString=function(t){var r=gr(t),s=ct.getHexValueArrayOfChildrenFromHex(r);this.setPrivateEx(s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8])};ct.prototype.readPKCS5PrvKeyHex=function(t){var r=ct.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])};ct.prototype.readPKCS8PrvKeyHex=function(t){var r,s,a,o,c,u,h,d,f=Ce,b=f.getVbyListEx;if(f.isASN1HEX(t)===!1)throw new Error("not ASN.1 hex string");try{r=b(t,0,[2,0,1],"02"),s=b(t,0,[2,0,2],"02"),a=b(t,0,[2,0,3],"02"),o=b(t,0,[2,0,4],"02"),c=b(t,0,[2,0,5],"02"),u=b(t,0,[2,0,6],"02"),h=b(t,0,[2,0,7],"02"),d=b(t,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(r,s,a,o,c,u,h,d)};ct.prototype.readPKCS5PubKeyHex=function(t){var r=Ce,s=r.getV;if(r.isASN1HEX(t)===!1)throw new Error("keyHex is not ASN.1 hex string");var a=r.getChildIdx(t,0);if(a.length!==2||t.substr(a[0],2)!=="02"||t.substr(a[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var o=s(t,a[0]),c=s(t,a[1]);this.setPublic(o,c)};ct.prototype.readPKCS8PubKeyHex=function(t){var r=Ce;if(r.isASN1HEX(t)===!1)throw new Error("not ASN.1 hex string");if(r.getTLVbyListEx(t,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var s=r.getTLVbyListEx(t,0,[1,0]);this.readPKCS5PubKeyHex(s)};ct.prototype.readCertPubKeyHex=function(t,r){var s,a;s=new tt,s.readCertHex(t),a=s.getPublicKeyHex(),this.readPKCS8PubKeyHex(a)};var M3=new RegExp("[^0-9a-f]","gi");function I1(t,r){for(var s="",a=r/4-t.length,o=0;o<a;o++)s=s+"0";return s+t}ct.prototype.sign=function(t,r){var s=function(o){return _.crypto.Util.hashString(o,r)},a=s(t);return this.signWithMessageHash(a,r)};ct.prototype.signWithMessageHash=function(t,r){var s=_.crypto.Util.getPaddedDigestInfoHex(t,r,this.n.bitLength()),a=Nn(s,16),o=this.doPrivate(a),c=o.toString(16);return I1(c,this.n.bitLength())};function P1(t,r,s){for(var a="",o=0;a.length<r;)a+=Hn(s(Mi(t+String.fromCharCode.apply(String,[(o&4278190080)>>24,(o&16711680)>>16,(o&65280)>>8,o&255])))),o+=1;return a}ct.prototype.signPSS=function(t,r,s){var a=function(c){return _.crypto.Util.hashHex(c,r)},o=a(Mi(t));return s===void 0&&(s=-1),this.signWithMessageHashPSS(o,r,s)};ct.prototype.signWithMessageHashPSS=function(t,r,s){var a=Hn(t),o=a.length,c=this.n.bitLength()-1,u=Math.ceil(c/8),h,d=function(D){return _.crypto.Util.hashHex(D,r)};if(s===-1||s===void 0)s=o;else if(s===-2)s=u-o-2;else if(s<-2)throw new Error("invalid salt length");if(u<o+s+2)throw new Error("data too long");var f="";s>0&&(f=new Array(s),new hu().nextBytes(f),f=String.fromCharCode.apply(String,f));var b=Hn(d(Mi("\0\0\0\0\0\0\0\0"+a+f))),A=[];for(h=0;h<u-s-o-2;h+=1)A[h]=0;var g=String.fromCharCode.apply(String,A)+""+f,v=P1(b,g.length,d),y=[];for(h=0;h<g.length;h+=1)y[h]=g.charCodeAt(h)^v.charCodeAt(h);var m=65280>>8*u-c&255;for(y[0]&=~m,h=0;h<o;h++)y.push(b.charCodeAt(h));return y.push(188),I1(this.doPrivate(new te(y)).toString(16),this.n.bitLength())};function B1(t){for(var r in _.crypto.Util.DIGESTINFOHEAD){var s=_.crypto.Util.DIGESTINFOHEAD[r],a=s.length;if(t.substring(0,a)==s){var o=[r,t.substring(a)];return o}}return[]}ct.prototype.verify=function(t,r){if(r=r.toLowerCase(),r.match(/^[0-9a-f]+$/)==null)return!1;var s=Nn(r,16),a=this.n.bitLength();if(s.bitLength()>a)return!1;var o=this.doPublic(s),c=o.toString(16);if(c.length+3!=a/4)return!1;var u=c.replace(/^1f+00/,""),h=B1(u);if(h.length==0)return!1;var d=h[0],f=h[1],b=function(g){return _.crypto.Util.hashString(g,d)},A=b(t);return f==A};ct.prototype.verifyWithMessageHash=function(t,r){if(r.length!=Math.ceil(this.n.bitLength()/4))return!1;var s=Nn(r,16);if(s.bitLength()>this.n.bitLength())return 0;var a=this.doPublic(s),o=a.toString(16).replace(/^1f+00/,""),c=B1(o);if(c.length==0)return!1;var u=c[0],h=c[1];return h==t};ct.prototype.verifyPSS=function(t,r,s,a){var o=function(u){return _.crypto.Util.hashHex(u,s)},c=o(Mi(t));return a===void 0&&(a=-1),this.verifyWithMessageHashPSS(c,r,s,a)};ct.prototype.verifyWithMessageHashPSS=function(t,r,s,a){if(r.length!=Math.ceil(this.n.bitLength()/4))return!1;var o=new te(r,16),c=function(F){return _.crypto.Util.hashHex(F,s)},u=Hn(t),h=u.length,d=this.n.bitLength()-1,f=Math.ceil(d/8),b;if(a===-1||a===void 0)a=h;else if(a===-2)a=f-h-2;else if(a<-2)throw new Error("invalid salt length");if(f<h+a+2)throw new Error("data too long");var A=this.doPublic(o).toByteArray();for(b=0;b<A.length;b+=1)A[b]&=255;for(;A.length<f;)A.unshift(0);if(A[f-1]!==188)throw new Error("encoded message does not end in 0xbc");A=String.fromCharCode.apply(String,A);var g=A.substr(0,f-h-1),v=A.substr(g.length,h),y=65280>>8*f-d&255;if((g.charCodeAt(0)&y)!==0)throw new Error("bits beyond keysize not zero");var m=P1(v,g.length,c),D=[];for(b=0;b<g.length;b+=1)D[b]=g.charCodeAt(b)^m.charCodeAt(b);D[0]&=~y;var S=f-h-a-2;for(b=0;b<S;b+=1)if(D[b]!==0)throw new Error("leftmost octets not zero");if(D[S]!==1)throw new Error("0x01 marker not found");return v===Hn(c(Mi("\0\0\0\0\0\0\0\0"+u+String.fromCharCode.apply(String,D.slice(-a)))))};ct.SALT_LEN_HLEN=-1;ct.SALT_LEN_MAX=-2;ct.SALT_LEN_RECOVER=-2;function tt(t){var r=Ce,s=r.getChildIdx,a=r.getV,o=r.dump,c=r.parse,u=r.getTLV,h=r.getVbyList,d=r.getVbyListEx,f=r.getTLVbyList,b=r.getTLVbyListEx,A=r.getIdxbyList,g=r.getIdxbyListEx,v=r.getVidx,y=r.getInt,m=r.oidname,D=r.hextooidstr,S=tt,F=gr,$,k=Error;try{$=_.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var P=f(this.hex,0,[0,0]);if(P.substr(0,2)=="a0"){var R=f(P,0,[0]),N=y(R,0);if(N<0||2<N)throw new Error("malformed version field");return this.version=N+1,this.version}else return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return d(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var P=b(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(P)},this.getAlgorithmIdentifierName=function(P){for(var R in $)if(P===$[R])return R;return m(d(P,0,[0],"06"))},this.getIssuer=function(P,R){return this.getX500Name(this.getIssuerHex(),P,R)},this.getIssuerHex=function(){return f(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){var P=this.getIssuer();return P.str},this.getSubject=function(P,R){return this.getX500Name(this.getSubjectHex(),P,R)},this.getSubjectHex=function(){return f(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){var P=this.getSubject();return P.str},this.getNotBefore=function(){var P=h(this.hex,0,[0,4+this.foffset,0]);return P=P.replace(/(..)/g,"%$1"),P=decodeURIComponent(P),P},this.getNotAfter=function(){var P=h(this.hex,0,[0,4+this.foffset,1]);return P=P.replace(/(..)/g,"%$1"),P=decodeURIComponent(P),P},this.getPublicKeyHex=function(){return this.getSPKI()},this.getSPKI=function(){return f(this.hex,0,[0,6+this.foffset],"30")},this.getSPKIValue=function(){var P=this.getSPKI();return P==null?null:h(P,0,[1],"03",!0)},this.getPublicKeyIdx=function(){return A(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var P=this.getPublicKeyIdx();return A(this.hex,P,[1,0],"30")},this.getPublicKey=function(){return Pt.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var P=f(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(P)},this.getSignatureValueHex=function(){return h(this.hex,0,[2],"03",!0)},this.verifySignature=function(P){var R=this.getSignatureAlgorithmField(),N=this.getSignatureValueHex(),x=f(this.hex,0,[0],"30"),V=new _.crypto.Signature({alg:R});return V.init(P),V.updateHex(x),V.verify(N)},this.parseExt=function(P){var R,N,x;if(P===void 0){if(x=this.hex,this.version!==3)return-1;R=A(x,0,[0,7,0],"30"),N=s(x,R)}else{x=gr(P);var V=A(x,0,[0,3,0,0],"06");if(a(x,V)!="2a864886f70d01090e"){this.aExtInfo=new Array;return}R=A(x,0,[0,3,0,1,0],"30"),N=s(x,R),this.hex=x}this.aExtInfo=new Array;for(var Y=0;Y<N.length;Y++){var G={};G.critical=!1;var W=s(x,N[Y]),Z=0;W.length===3&&(G.critical=!0,Z=1),G.oid=r.hextooidstr(h(x,N[Y],[0],"06"));var ae=A(x,N[Y],[1+Z]);G.vidx=v(x,ae),this.aExtInfo.push(G)}},this.getExtInfo=function(P){var R=this.aExtInfo,N=P;if(P.match(/^[0-9.]+$/)||(N=_.asn1.x509.OID.name2oid(P)),N!==""){for(var x=0;x<R.length;x++)if(R[x].oid===N)return R[x]}},this.getCriticalExtV=function(P,R,N){if(R!=null)return[R,N];var x=this.getExtInfo(P);return x==null?[null,null]:[u(this.hex,x.vidx),x.critical]},this.getExtBasicConstraints=function(P,R){if(P===void 0&&R===void 0){var N=this.getExtInfo("basicConstraints");if(N===void 0)return;P=u(this.hex,N.vidx),R=N.critical}var x={extname:"basicConstraints"};if(R&&(x.critical=!0),P==="3000")return x;if(P==="30030101ff")return x.cA=!0,x;if(P.substr(0,12)==="30060101ff02"){var V=a(P,10),Y=parseInt(V,16);return x.cA=!0,x.pathLen=Y,x}throw new Error("hExtV parse error: "+P)},this.getExtNameConstraints=function(P,R){var N=this.getCriticalExtV("nameConstraints",P,R);if(P=N[0],R=N[1],P!=null){var x={extname:"nameConstraints"};R&&(x.critical=!0);for(var V=s(P,0),Y=0;Y<V.length;Y++){for(var G=[],W=s(P,V[Y]),Z=0;Z<W.length;Z++){var ae=u(P,W[Z]),He=this.getGeneralSubtree(ae);G.push(He)}var Ie=P.substr(V[Y],2);Ie=="a0"?x.permit=G:Ie=="a1"&&(x.exclude=G)}return x}},this.getGeneralSubtree=function(P){var R=s(P,0),N=R.length;if(N<1||2<N)throw new Error("wrong num elements");for(var x=this.getGeneralName(u(P,R[0])),V=1;V<N;V++){var Y=P.substr(R[V],2),G=a(P,R[V]),W=parseInt(G,16);Y=="80"&&(x.min=W),Y=="81"&&(x.max=W)}return x},this.getExtKeyUsage=function(P,R){var N=this.getCriticalExtV("keyUsage",P,R);if(P=N[0],R=N[1],P!=null){var x={extname:"keyUsage"};return R&&(x.critical=!0),x.names=this.getExtKeyUsageString(P).split(","),x}},this.getExtKeyUsageBin=function(P){if(P===void 0){var R=this.getExtInfo("keyUsage");if(R===void 0)return"";P=u(this.hex,R.vidx)}if(P.length!=8&&P.length!=10)throw new Error("malformed key usage value: "+P);var N="000000000000000"+parseInt(P.substr(6),16).toString(2);return P.length==8&&(N=N.slice(-8)),P.length==10&&(N=N.slice(-16)),N=N.replace(/0+$/,""),N==""&&(N="0"),N},this.getExtKeyUsageString=function(P){for(var R=this.getExtKeyUsageBin(P),N=new Array,x=0;x<R.length;x++)R.substr(x,1)=="1"&&N.push(tt.KEYUSAGE_NAME[x]);return N.join(",")},this.getExtSubjectKeyIdentifier=function(P,R){if(P===void 0&&R===void 0){var N=this.getExtInfo("subjectKeyIdentifier");if(N===void 0)return;P=u(this.hex,N.vidx),R=N.critical}var x={extname:"subjectKeyIdentifier"};R&&(x.critical=!0);var V=a(P,0);return x.kid={hex:V},x},this.getExtAuthorityKeyIdentifier=function(P,R){if(P===void 0&&R===void 0){var N=this.getExtInfo("authorityKeyIdentifier");if(N===void 0)return;P=u(this.hex,N.vidx),R=N.critical}var x={extname:"authorityKeyIdentifier"};R&&(x.critical=!0);for(var V=s(P,0),Y=0;Y<V.length;Y++){var G=P.substr(V[Y],2);if(G==="80"&&(x.kid={hex:a(P,V[Y])}),G==="a1"){var W=u(P,V[Y]),Z=this.getGeneralNames(W);x.issuer=Z[0].dn}G==="82"&&(x.sn={hex:a(P,V[Y])})}return x},this.getExtExtKeyUsage=function(P,R){if(P===void 0&&R===void 0){var N=this.getExtInfo("extKeyUsage");if(N===void 0)return;P=u(this.hex,N.vidx),R=N.critical}var x={extname:"extKeyUsage",array:[]};R&&(x.critical=!0);for(var V=s(P,0),Y=0;Y<V.length;Y++)x.array.push(m(a(P,V[Y])));return x},this.getExtExtKeyUsageName=function(){var P=this.getExtInfo("extKeyUsage");if(P===void 0)return P;var R=new Array,N=u(this.hex,P.vidx);if(N==="")return R;for(var x=s(N,0),V=0;V<x.length;V++)R.push(m(a(N,x[V])));return R},this.getExtSubjectAltName=function(P,R){if(P===void 0&&R===void 0){var N=this.getExtInfo("subjectAltName");if(N===void 0)return;P=u(this.hex,N.vidx),R=N.critical}var x={extname:"subjectAltName",array:[]};return R&&(x.critical=!0),x.array=this.getGeneralNames(P),x},this.getExtIssuerAltName=function(P,R){if(P===void 0&&R===void 0){var N=this.getExtInfo("issuerAltName");if(N===void 0)return;P=u(this.hex,N.vidx),R=N.critical}var x={extname:"issuerAltName",array:[]};return R&&(x.critical=!0),x.array=this.getGeneralNames(P),x},this.getGeneralNames=function(P){for(var R=s(P,0),N=[],x=0;x<R.length;x++){var V=this.getGeneralName(u(P,R[x]));V!==void 0&&N.push(V)}return N},this.getGeneralName=function(P){var R=P.substr(0,2),N=a(P,0),x=Hn(N);if(R=="81")return{rfc822:x};if(R=="82")return{dns:x};if(R=="86")return{uri:x};if(R=="87")return{ip:Gc(N)};if(R=="a4")return{dn:this.getX500Name(N)};if(R=="a0")return{other:this.getOtherName(P)}},this.getExtSubjectAltName2=function(){var P,R,N,x=this.getExtInfo("subjectAltName");if(x===void 0)return x;for(var V=new Array,Y=u(this.hex,x.vidx),G=s(Y,0),W=0;W<G.length;W++)N=Y.substr(G[W],2),P=a(Y,G[W]),N==="81"&&(R=Wt(P),V.push(["MAIL",R])),N==="82"&&(R=Wt(P),V.push(["DNS",R])),N==="84"&&(R=tt.hex2dn(P,0),V.push(["DN",R])),N==="86"&&(R=Wt(P),V.push(["URI",R])),N==="87"&&(R=Gc(P),V.push(["IP",R]));return V},this.getExtCRLDistributionPoints=function(P,R){if(P===void 0&&R===void 0){var N=this.getExtInfo("cRLDistributionPoints");if(N===void 0)return;P=u(this.hex,N.vidx),R=N.critical}var x={extname:"cRLDistributionPoints",array:[]};R&&(x.critical=!0);for(var V=s(P,0),Y=0;Y<V.length;Y++){var G=u(P,V[Y]);x.array.push(this.getDistributionPoint(G))}return x},this.getDistributionPoint=function(P){for(var R={},N=s(P,0),x=0;x<N.length;x++){var V=P.substr(N[x],2),Y=u(P,N[x]);V=="a0"&&(R.dpname=this.getDistributionPointName(Y))}return R},this.getDistributionPointName=function(P){for(var R={},N=s(P,0),x=0;x<N.length;x++){var V=P.substr(N[x],2),Y=u(P,N[x]);V=="a0"&&(R.full=this.getGeneralNames(Y))}return R},this.getExtCRLDistributionPointsURI=function(){var P=this.getExtCRLDistributionPoints();if(P==null)return P;for(var R=P.array,N=[],x=0;x<R.length;x++)try{R[x].dpname.full[0].uri!=null&&N.push(R[x].dpname.full[0].uri)}catch{}return N},this.getExtAIAInfo=function(){var P=this.getExtInfo("authorityInfoAccess");if(P===void 0)return P;for(var R={ocsp:[],caissuer:[]},N=s(this.hex,P.vidx),x=0;x<N.length;x++){var V=h(this.hex,N[x],[0],"06"),Y=h(this.hex,N[x],[1],"86");V==="2b06010505073001"&&R.ocsp.push(Wt(Y)),V==="2b06010505073002"&&R.caissuer.push(Wt(Y))}return R},this.getExtAuthorityInfoAccess=function(P,R){if(P===void 0&&R===void 0){var N=this.getExtInfo("authorityInfoAccess");if(N===void 0)return;P=u(this.hex,N.vidx),R=N.critical}var x={extname:"authorityInfoAccess",array:[]};R&&(x.critical=!0);for(var V=s(P,0),Y=0;Y<V.length;Y++){var G=d(P,V[Y],[0],"06"),W=h(P,V[Y],[1],"86"),Z=Wt(W);if(G=="2b06010505073001")x.array.push({ocsp:Z});else if(G=="2b06010505073002")x.array.push({caissuer:Z});else throw new Error("unknown method: "+G)}return x},this.getExtCertificatePolicies=function(P,R){if(P===void 0&&R===void 0){var N=this.getExtInfo("certificatePolicies");if(N===void 0)return;P=u(this.hex,N.vidx),R=N.critical}var x={extname:"certificatePolicies",array:[]};R&&(x.critical=!0);for(var V=s(P,0),Y=0;Y<V.length;Y++){var G=u(P,V[Y]),W=this.getPolicyInformation(G);x.array.push(W)}return x},this.getPolicyInformation=function(P){var R={},N=h(P,0,[0],"06");R.policyoid=m(N);var x=g(P,0,[1],"30");if(x!=-1){R.array=[];for(var V=s(P,x),Y=0;Y<V.length;Y++){var G=u(P,V[Y]),W=this.getPolicyQualifierInfo(G);R.array.push(W)}}return R},this.getOtherName=function(P){var R={},N=s(P,0),x=h(P,N[0],[],"06"),V=h(P,N[1],[]);return R.oid=m(x),R.value=c(V),R},this.getPolicyQualifierInfo=function(P){var R={},N=h(P,0,[0],"06");if(N==="2b06010505070201"){var x=d(P,0,[1],"16");R.cps=Hn(x)}else if(N==="2b06010505070202"){var V=f(P,0,[1],"30");R.unotice=this.getUserNotice(V)}return R},this.getUserNotice=function(P){var R=null,N={};try{R=r.parse(P);var x=this._asn1ToUnotice(R);return x}catch{return}},this._asn1ToUnotice=function(P){try{for(var R={},N=Zt(P,"seq"),x=0;x<N.length;x++){var V=this._asn1ToNoticeRef(N[x]);V!=null&&(R.noticeref=V);var Y=this.asn1ToDisplayText(N[x]);Y!=null&&(R.exptext=Y)}return Object.keys(R).length>0?R:void 0}catch{return}},this._asn1ToNoticeRef=function(P){try{for(var R={},N=Zt(P,"seq"),x=0;x<N.length;x++){var V=this._asn1ToNoticeNum(N[x]);V!=null&&(R.noticenum=V);var Y=this.asn1ToDisplayText(N[x]);Y!=null&&(R.org=Y)}return Object.keys(R).length>0?R:void 0}catch{return}},this._asn1ToNoticeNum=function(P){try{for(var R=Zt(P,"seq"),N=[],x=0;x<R.length;x++){var V=R[x];N.push(parseInt(Zt(V,"int.hex"),16))}return N}catch{return}},this.getDisplayText=function(P){var R={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"},N={};return N.type=R[P.substr(0,2)],N.str=Hn(a(P,0)),N},this.asn1ToDisplayText=function(P){if(P.utf8str!=null)return{type:"utf8",str:P.utf8str.str};if(P.ia5str!=null)return{type:"ia5",str:P.ia5str.str};if(P.visstr!=null)return{type:"vis",str:P.visstr.str};if(P.bmpstr!=null)return{type:"bmp",str:P.bmpstr.str};if(P.prnstr!=null)return{type:"prn",str:P.prnstr.str}},this.getExtPolicyMappings=function(P,R){var N=this.getCriticalExtV("policyMappings",P,R);if(P=N[0],R=N[1],P!=null){var x={extname:"policyMappings"};R&&(x.critical=!0);try{for(var V=c(P),Y=V.seq,G=[],W=0;W<Y.length;W++){var Z=Y[W].seq;G.push([Z[0].oid,Z[1].oid])}x.array=G}catch{throw new k("malformed policyMappings")}return x}},this.getExtPolicyConstraints=function(P,R){var N=this.getCriticalExtV("policyConstraints",P,R);if(P=N[0],R=N[1],P!=null){var x={extname:"policyConstraints"};R&&(x.critical=!0);var V=c(P);try{for(var Y=V.seq,G=0;G<Y.length;G++){var W=Y[G].tag;W.explicit==!1&&(W.tag=="80"&&(x.reqexp=parseInt(W.hex,16)),W.tag=="81"&&(x.inhibit=parseInt(W.hex,16)))}}catch{return new k("malformed policyConstraints value")}return x}},this.getExtInhibitAnyPolicy=function(P,R){var N=this.getCriticalExtV("inhibitAnyPolicy",P,R);if(P=N[0],R=N[1],P!=null){var x={extname:"inhibitAnyPolicy"};R&&(x.critical=!0);var V=y(P,0);return V==-1?new k("wrong value"):(x.skip=V,x)}},this.getExtCRLNumber=function(P,R){var N={extname:"cRLNumber"};if(R&&(N.critical=!0),P.substr(0,2)=="02")return N.num={hex:a(P,0)},N;throw new k("hExtV parse error: "+P)},this.getExtCRLReason=function(P,R){var N={extname:"cRLReason"};if(R&&(N.critical=!0),P.substr(0,2)=="0a")return N.code=parseInt(a(P,0),16),N;throw new Error("hExtV parse error: "+P)},this.getExtOcspNonce=function(P,R){var N={extname:"ocspNonce"};R&&(N.critical=!0);var x=a(P,0);return N.hex=x,N},this.getExtOcspNoCheck=function(P,R){var N={extname:"ocspNoCheck"};return R&&(N.critical=!0),N},this.getExtAdobeTimeStamp=function(P,R){if(P===void 0&&R===void 0){var N=this.getExtInfo("adobeTimeStamp");if(N===void 0)return;P=u(this.hex,N.vidx),R=N.critical}var x={extname:"adobeTimeStamp"};R&&(x.critical=!0);var V=s(P,0);if(V.length>1){var Y=u(P,V[1]),G=this.getGeneralName(Y);G.uri!=null&&(x.uri=G.uri)}if(V.length>2){var W=u(P,V[2]);W=="0101ff"&&(x.reqauth=!0),W=="010100"&&(x.reqauth=!1)}return x},this.getExtSubjectDirectoryAttributes=function(P,R){if(P===void 0&&R===void 0){var N=this.getExtInfo("subjectDirectoryAttributes");if(N===void 0)return;P=u(this.hex,N.vidx),R=N.critical}var x={extname:"subjectDirectoryAttributes"};R&&(x.critical=!0);try{for(var V=c(P),Y=[],G=0;G<V.seq.length;G++){var W=V.seq[G],Z=Zt(W,"seq.0.oid"),ae=Zt(W,"seq.1.set");if(Z==null||ae==null)throw"error";Y.push({attr:Z,array:ae})}return x.array=Y,x}catch{throw new Error("malformed subjectDirectoryAttributes extension value")}};var O=function(P){var R={};try{var N=P.seq[0].oid,x=_.asn1.x509.OID.name2oid(N);R.type=_.asn1.x509.OID.oid2atype(x);var V=P.seq[1];if(V.utf8str!=null)R.ds="utf8",R.value=V.utf8str.str;else if(V.numstr!=null)R.ds="num",R.value=V.numstr.str;else if(V.telstr!=null)R.ds="tel",R.value=V.telstr.str;else if(V.prnstr!=null)R.ds="prn",R.value=V.prnstr.str;else if(V.ia5str!=null)R.ds="ia5",R.value=V.ia5str.str;else if(V.visstr!=null)R.ds="vis",R.value=V.visstr.str;else if(V.bmpstr!=null)R.ds="bmp",R.value=V.bmpstr.str;else throw"error";return R}catch{throw new Erorr("improper ASN.1 parsed AttrTypeAndValue")}},z=function(P){try{return P.set.map(function(R){return O(R)})}catch(R){throw new Error("improper ASN.1 parsed RDN: "+R)}},H=function(P){try{return P.seq.map(function(R){return z(R)})}catch(R){throw new Error("improper ASN.1 parsed X500Name: "+R)}};this.getX500NameRule=function(P){for(var R=!0,N=!0,x=!1,V="",Y="",G=null,W=[],Z=0;Z<P.length;Z++)for(var ae=P[Z],He=0;He<ae.length;He++)W.push(ae[He]);for(var Z=0;Z<W.length;Z++){var Ie=W[Z],J=Ie.ds,oe=Ie.value,be=Ie.type;if(V+=":"+J,J!="prn"&&J!="utf8"&&J!="ia5")return"mixed";if(J=="ia5"){if(be!="CN")return"mixed";if(_.lang.String.isMail(oe))continue;return"mixed"}if(be=="C"){if(J=="prn")continue;return"mixed"}if(Y+=":"+J,G==null)G=J;else if(G!==J)return"mixed"}return G??"prn"},this.getAttrTypeAndValue=function(P){var R=c(P);return O(R)},this.getRDN=function(P){var R=c(P);return z(R)},this.getX500NameArray=function(P){var R=c(P);return H(R)},this.getX500Name=function(P,R,N){var x=this.getX500NameArray(P),V=this.dnarraytostr(x),Y={str:V};return Y.array=x,N==!0&&(Y.hex=P),R==!0&&(Y.canon=this.c14nRDNArray(x)),Y},this.readCertPEM=function(P){this.readCertHex(F(P))},this.readCertHex=function(P){this.hex=P,this.getVersion();try{A(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(P){var R={};return P==null&&(P={}),R.version=this.getVersion(),R.serial={hex:this.getSerialNumberHex()},R.sigalg=this.getSignatureAlgorithmField(),R.issuer=this.getIssuer(P.dncanon,P.dnhex),R.notbefore=this.getNotBefore(),R.notafter=this.getNotAfter(),R.subject=this.getSubject(P.dncanon,P.dnhex),R.sbjpubkey=dn(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo!=null&&this.aExtInfo.length>0&&(R.ext=this.getExtParamArray()),R.sighex=this.getSignatureValueHex(),P.tbshex==!0&&(R.tbshex=f(this.hex,0,[0])),P.nodnarray==!0&&(delete R.issuer.array,delete R.subject.array),R},this.getExtParamArray=function(P){if(P==null){var R=g(this.hex,0,[0,"[3]"]);R!=-1&&(P=b(this.hex,0,[0,"[3]",0],"30"))}for(var N=[],x=s(P,0),V=0;V<x.length;V++){var Y=u(P,x[V]),G=this.getExtParam(Y);G!=null&&N.push(G)}return N},this.getExtParam=function(P){var R={},N=s(P,0),x=N.length;if(x!=2&&x!=3)throw new Error("wrong number elements in Extension: "+x+" "+P);var V=D(h(P,0,[0],"06")),Y=!1;x==3&&f(P,0,[1])=="0101ff"&&(Y=!0);var G=f(P,0,[x-1,0]),W=void 0;if(V=="2.5.29.14"?W=this.getExtSubjectKeyIdentifier(G,Y):V=="2.5.29.15"?W=this.getExtKeyUsage(G,Y):V=="2.5.29.17"?W=this.getExtSubjectAltName(G,Y):V=="2.5.29.18"?W=this.getExtIssuerAltName(G,Y):V=="2.5.29.19"?W=this.getExtBasicConstraints(G,Y):V=="2.5.29.30"?W=this.getExtNameConstraints(G,Y):V=="2.5.29.31"?W=this.getExtCRLDistributionPoints(G,Y):V=="2.5.29.32"?W=this.getExtCertificatePolicies(G,Y):V=="2.5.29.33"?W=this.getExtPolicyMappings(G,Y):V=="2.5.29.35"?W=this.getExtAuthorityKeyIdentifier(G,Y):V=="2.5.29.36"?W=this.getExtPolicyConstraints(G,Y):V=="2.5.29.37"?W=this.getExtExtKeyUsage(G,Y):V=="2.5.29.54"?W=this.getExtInhibitAnyPolicy(G,Y):V=="1.3.6.1.5.5.7.1.1"?W=this.getExtAuthorityInfoAccess(G,Y):V=="2.5.29.20"?W=this.getExtCRLNumber(G,Y):V=="2.5.29.21"?W=this.getExtCRLReason(G,Y):V=="2.5.29.9"?W=this.getExtSubjectDirectoryAttributes(G,Y):V=="1.3.6.1.5.5.7.48.1.2"?W=this.getExtOcspNonce(G,Y):V=="1.3.6.1.5.5.7.48.1.5"?W=this.getExtOcspNoCheck(G,Y):V=="1.2.840.113583.1.1.9.1"?W=this.getExtAdobeTimeStamp(G,Y):tt.EXT_PARSER[V]!=null&&(W=tt.EXT_PARSER[V](V,Y,G)),W!=null)return W;var Z={extname:V,extn:G};try{Z.extn=c(G)}catch{}return Y&&(Z.critical=!0),Z},this.findExt=function(P,R){for(var N=0;N<P.length;N++)if(P[N].extname==R)return P[N];return null},this.updateExtCDPFullURI=function(P,R){var N=this.findExt(P,"cRLDistributionPoints");if(N!=null&&N.array!=null){for(var x=N.array,V=0;V<x.length;V++)if(x[V].dpname!=null&&x[V].dpname.full!=null)for(var Y=x[V].dpname.full,G=0;G<Y.length;G++){var W=Y[V];W.uri!=null&&(W.uri=R)}}},this.updateExtAIAOCSP=function(P,R){var N=this.findExt(P,"authorityInfoAccess");if(N!=null&&N.array!=null)for(var x=N.array,V=0;V<x.length;V++)x[V].ocsp!=null&&(x[V].ocsp=R)},this.updateExtAIACAIssuer=function(P,R){var N=this.findExt(P,"authorityInfoAccess");if(N!=null&&N.array!=null)for(var x=N.array,V=0;V<x.length;V++)x[V].caissuer!=null&&(x[V].caissuer=R)},this.dnarraytostr=function(P){function R(x){return x.map(function(V){return N(V).replace(/\+/,"\\+")}).join("+")}function N(x){return x.type+"="+x.value}return"/"+P.map(function(x){return R(x).replace(/\//,"\\/")}).join("/")},this.setCanonicalizedDN=function(P){var R;if(P.str!=null&&P.array==null){var N=new _.asn1.x509.X500Name({str:P.str}),x=N.tohex();R=this.getX500NameArray(x)}else R=P.array;P.canon==null&&(P.canon=this.c14nRDNArray(R))},this.c14nRDNArray=function(P){for(var R=[],N=0;N<P.length;N++){for(var x=P[N],V=[],Y=0;Y<x.length;Y++){var G=x[Y],W=G.value;W=W.replace(/^\s*/,""),W=W.replace(/\s*$/,""),W=W.replace(/\s+/g," "),W=W.toLowerCase(),V.push(G.type.toLowerCase()+"="+W)}R.push(V.join("+"))}return"/"+R.join("/")},this.getInfo=function(){var P=function(Ye){for(var Xe="",De="    ",ke=`
`,fe=Ye.array,gt=0;gt<fe.length;gt++){var Te=fe[gt];if(Te.dn!=null&&(Xe+=De+"dn: "+Te.dn.str+ke),Te.ip!=null&&(Xe+=De+"ip: "+Te.ip+ke),Te.rfc822!=null&&(Xe+=De+"rfc822: "+Te.rfc822+ke),Te.dns!=null&&(Xe+=De+"dns: "+Te.dns+ke),Te.uri!=null&&(Xe+=De+"uri: "+Te.uri+ke),Te.other!=null){var xe=Te.other.oid,ar=JSON.stringify(Te.other.value).replace(/\"/g,"");Xe+=De+"other: "+xe+"="+ar+ke}}return Xe=Xe.replace(/\n$/,""),Xe},R=function(Ye){for(var Xe="",De=Ye.array,ke=0;ke<De.length;ke++){var fe=De[ke];if(Xe+="    policy oid: "+fe.policyoid+`
`,fe.array!==void 0)for(var gt=0;gt<fe.array.length;gt++){var Te=fe.array[gt];Te.cps!==void 0&&(Xe+="    cps: "+Te.cps+`
`)}}return Xe},N=function(Ye){for(var Xe="",De=Ye.array,ke=0;ke<De.length;ke++){var fe=De[ke];try{fe.dpname.full[0].uri!==void 0&&(Xe+="    "+fe.dpname.full[0].uri+`
`)}catch{}try{fe.dname.full[0].dn.hex!==void 0&&(Xe+="    "+tt.hex2dn(fe.dpname.full[0].dn.hex)+`
`)}catch{}}return Xe},x=function(Ye){for(var Xe="",De=Ye.array,ke=0;ke<De.length;ke++){var fe=De[ke];fe.caissuer!==void 0&&(Xe+="    caissuer: "+fe.caissuer+`
`),fe.ocsp!==void 0&&(Xe+="    ocsp: "+fe.ocsp+`
`)}return Xe},V=tt,Y,G,W;if(Y=`Basic Fields
`,Y+="  serial number: "+this.getSerialNumberHex()+`
`,Y+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,Y+="  issuer: "+this.getIssuerString()+`
`,Y+="  notBefore: "+this.getNotBefore()+`
`,Y+="  notAfter: "+this.getNotAfter()+`
`,Y+="  subject: "+this.getSubjectString()+`
`,Y+=`  subject public key info: 
`,G=this.getPublicKey(),Y+="    key algorithm: "+G.type+`
`,G.type==="RSA"&&(Y+="    n="+qh(G.n.toString(16)).substr(0,16)+`...
`,Y+="    e="+qh(G.e.toString(16))+`
`),W=this.aExtInfo,W!=null){Y+=`X509v3 Extensions:
`;for(var Z=0;Z<W.length;Z++){var ae=W[Z],He=_.asn1.x509.OID.oid2name(ae.oid);He===""&&(He=ae.oid);var Ie="";if(ae.critical===!0&&(Ie="CRITICAL"),Y+="  "+He+" "+Ie+`:
`,He==="basicConstraints"){var J=this.getExtBasicConstraints();J.cA===void 0?Y+=`    {}
`:(Y+="    cA=true",J.pathLen!==void 0&&(Y+=", pathLen="+J.pathLen),Y+=`
`)}else if(He=="policyMappings"){var oe=this.getExtPolicyMappings().array,be=oe.map(function(Ye){var Xe=Ye;return Xe[0]+":"+Xe[1]}).join(", ");Y+="    "+be+`
`}else if(He=="policyConstraints"){var Fe=this.getExtPolicyConstraints();Y+="    ",Fe.reqexp!=null&&(Y+=" reqexp="+Fe.reqexp),Fe.inhibit!=null&&(Y+=" inhibit="+Fe.inhibit),Y+=`
`}else if(He=="inhibitAnyPolicy"){var Fe=this.getExtInhibitAnyPolicy();Y+="    skip="+Fe.skip+`
`}else if(He=="keyUsage")Y+="    "+this.getExtKeyUsageString()+`
`;else if(He=="subjectKeyIdentifier")Y+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(He=="authorityKeyIdentifier"){var Pe=this.getExtAuthorityKeyIdentifier();Pe.kid!==void 0&&(Y+="    kid="+Pe.kid.hex+`
`)}else if(He=="extKeyUsage"){var _t=this.getExtExtKeyUsage().array;Y+="    "+_t.join(", ")+`
`}else if(He=="subjectAltName"){var dt=P(this.getExtSubjectAltName());Y+=dt+`
`}else if(He=="cRLDistributionPoints"){var ye=this.getExtCRLDistributionPoints();Y+=N(ye)}else if(He=="authorityInfoAccess"){var Je=this.getExtAuthorityInfoAccess();Y+=x(Je)}else He=="certificatePolicies"&&(Y+=R(this.getExtCertificatePolicies()))}}return Y+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,Y+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`,Y},typeof t=="string"&&(t.indexOf("-----BEGIN")!=-1?this.readCertPEM(t):_.lang.String.isHex(t)&&this.readCertHex(t))}tt.EXT_PARSER={};tt.registExtParser=function(t,r){tt.EXT_PARSER[t]=r};tt.hex2dn=function(t,r){r===void 0&&(r=0);var s=new tt,a=Ce.getTLV(t,r),o=s.getX500Name(t);return o.str};tt.hex2rdn=function(t,r){if(r===void 0&&(r=0),t.substr(r,2)!=="31")throw new Error("malformed RDN");for(var s=new Array,a=Ce.getChildIdx(t,r),o=0;o<a.length;o++)s.push(tt.hex2attrTypeValue(t,a[o]));return s=s.map(function(c){return c.replace("+","\\+")}),s.join("+")};tt.hex2attrTypeValue=function(t,r){var s=Ce,a=s.getV;if(r===void 0&&(r=0),t.substr(r,2)!=="30")throw new Error("malformed attribute type and value");var o=s.getChildIdx(t,r);o.length!==2||t.substr(o[0],2);var c=a(t,o[0]),u=_.asn1.ASN1Util.oidHexToInt(c),h=_.asn1.x509.OID.oid2atype(u),d=a(t,o[1]),f=Hn(d);return h+"="+f};tt.getPublicKeyFromCertHex=function(t){var r=new tt;return r.readCertHex(t),r.getPublicKey()};tt.getPublicKeyFromCertPEM=function(t){var r=new tt;return r.readCertPEM(t),r.getPublicKey()};tt.getPublicKeyInfoPropOfCertPEM=function(t){var r=Ce,s=r.getVbyList,a={},o,c,u;return a.algparam=null,o=new tt,o.readCertPEM(t),c=o.getPublicKeyHex(),a.keyhex=s(c,0,[1],"03").substr(2),a.algoid=s(c,0,[0,0],"06"),a.algoid==="2a8648ce3d0201"&&(a.algparam=s(c,0,[0,1],"06")),a};tt.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];var vD=function(t){var r=_,s=r.lang.String.isHex,a=Ce,o=a.getV,c=a.getTLV,u=a.getVbyList,h=a.getTLVbyList,d=a.getTLVbyListEx,f=a.getIdxbyList,b=a.getIdxbyListEx,A=a.getChildIdx,g=new tt;this.hex=null,this.posSigAlg=null,this.posRevCert=null,this.parsed=null,this._setPos=function(){var v=f(this.hex,0,[0,0]),y=this.hex.substr(v,2);if(y=="02")this.posSigAlg=1;else if(y=="30")this.posSigAlg=0;else throw new Error("malformed 1st item of TBSCertList: "+y);var m=f(this.hex,0,[0,this.posSigAlg+3]),D=this.hex.substr(m,2);if(D=="17"||D=="18"){var S,F;S=f(this.hex,0,[0,this.posSigAlg+4]),this.posRevCert=null,S!=-1&&(F=this.hex.substr(S,2),F=="30"&&(this.posRevCert=this.posSigAlg+4))}else if(D=="30")this.posRevCert=this.posSigAlg+3;else if(D=="a0")this.posRevCert=null;else throw new Error("malformed nextUpdate or revCert tag: "+D)},this.getVersion=function(){return this.posSigAlg==0?null:parseInt(u(this.hex,0,[0,0],"02"),16)+1},this.getSignatureAlgorithmField=function(){var v=h(this.hex,0,[0,this.posSigAlg],"30");return g.getAlgorithmIdentifierName(v)},this.getIssuer=function(){return g.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return h(this.hex,0,[0,this.posSigAlg+1],"30")},this.getThisUpdate=function(){var v=u(this.hex,0,[0,this.posSigAlg+2]);return result=Hn(v)},this.getNextUpdate=function(){var v=f(this.hex,0,[0,this.posSigAlg+3]),y=this.hex.substr(v,2);return y!="17"&&y!="18"?null:Hn(o(this.hex,v))},this.getRevCertArray=function(){if(this.posRevCert==null)return null;for(var v=[],y=f(this.hex,0,[0,this.posRevCert]),m=A(this.hex,y),D=0;D<m.length;D++){var S=c(this.hex,m[D]);v.push(this.getRevCert(S))}return v},this.getRevCert=function(v){var y={},m=A(v,0);return y.sn={hex:u(v,0,[0],"02")},y.date=Hn(u(v,0,[1])),m.length==3&&(y.ext=g.getExtParamArray(h(v,0,[2]))),y},this.findRevCert=function(v){var y=new tt(v),m=y.getSerialNumberHex();return this.findRevCertBySN(m)},this.findRevCertBySN=function(v){if(this.parsed==null&&this.getParam(),this.parsed.revcert==null)return null;for(var y=this.parsed.revcert,m=0;m<y.length;m++)if(v==y[m].sn.hex)return y[m];return null},this.getSignatureValueHex=function(){return u(this.hex,0,[2],"03",!0)},this.verifySignature=function(v){var y=this.getSignatureAlgorithmField(),m=this.getSignatureValueHex(),D=h(this.hex,0,[0],"30"),S=new _.crypto.Signature({alg:y});return S.init(v),S.updateHex(D),S.verify(m)},this.getParam=function(v){var y={},m=this.getVersion();m!=null&&(y.version=m),y.sigalg=this.getSignatureAlgorithmField(),y.issuer=this.getIssuer(),y.thisupdate=this.getThisUpdate();var D=this.getNextUpdate();D!=null&&(y.nextupdate=D);var S=this.getRevCertArray();S!=null&&(y.revcert=S);var F=b(this.hex,0,[0,"[0]"]);if(F!=-1){var $=d(this.hex,0,[0,"[0]",0]);y.ext=g.getExtParamArray($)}return y.sighex=this.getSignatureValueHex(),this.parsed=y,typeof v=="object"&&(v.tbshex==!0&&(y.tbshex=h(this.hex,0,[0])),v.nodnarray==!0&&delete y.issuer.array),y},typeof t=="string"&&(s(t)?this.hex=t:t.match(/-----BEGIN X509 CRL/)&&(this.hex=gr(t)),this._setPos())};(typeof _>"u"||!_)&&(_={});(typeof _.jws>"u"||!_.jws)&&(_.jws={});_.jws.JWS=function(){var t=_,r=t.jws.JWS,s=r.isSafeJSONString;this.parseJWS=function(a,o){if(!(this.parsedJWS!==void 0&&(o||this.parsedJWS.sigvalH!==void 0))){var c=a.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(c==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var u=c[1],h=c[2],d=c[3],f=u+"."+h;if(this.parsedJWS={},this.parsedJWS.headB64U=u,this.parsedJWS.payloadB64U=h,this.parsedJWS.sigvalB64U=d,this.parsedJWS.si=f,!o){var b=sr(d),A=Nn(b,16);this.parsedJWS.sigvalH=b,this.parsedJWS.sigvalBI=A}var g=Di(u),v=Di(h);if(this.parsedJWS.headS=g,this.parsedJWS.payloadS=v,!s(g,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+g}}};_.jws.JWS.sign=function(t,r,s,a,o){var c=_,u=c.jws,h=u.JWS,d=h.readSafeJSONString,f=h.isSafeJSONString,b=c.crypto,A=b.ECDSA,g=b.Mac,v=b.Signature,y=JSON,m,D,S;if(typeof r!="string"&&typeof r!="object")throw"spHeader must be JSON string or object: "+r;if(typeof r=="object"&&(D=r,m=y.stringify(D)),typeof r=="string"){if(m=r,!f(m))throw"JWS Head is not safe JSON string: "+m;D=d(m)}if(S=s,typeof s=="object"&&(S=y.stringify(s)),(t==""||t==null)&&D.alg!==void 0&&(t=D.alg),t!=""&&t!=null&&D.alg===void 0&&(D.alg=t,m=y.stringify(D)),t!==D.alg)throw"alg and sHeader.alg doesn't match: "+t+"!="+D.alg;var F=null;if(h.jwsalg2sigalg[t]===void 0)throw"unsupported alg name: "+t;F=h.jwsalg2sigalg[t];var $=po(m),k=po(S),O=$+"."+k,z="";if(F.substr(0,4)=="Hmac"){if(a===void 0)throw"mac key shall be specified for HS* alg";var H=new g({alg:F,prov:"cryptojs",pass:a});H.updateString(O),z=H.doFinal()}else if(F.indexOf("withECDSA")!=-1){var P=new v({alg:F});P.init(a,o),P.updateString(O);var R=P.sign();z=_.crypto.ECDSA.asn1SigToConcatSig(R)}else if(F!="none"){var P=new v({alg:F});P.init(a,o),P.updateString(O),z=P.sign()}var N=Mr(z);return O+"."+N};_.jws.JWS.verify=function(t,r,s){var a=_,o=a.jws,c=o.JWS,u=c.readSafeJSONString,h=a.crypto,d=h.ECDSA,f=h.Mac,b=h.Signature,A;if(typeof ct!==void 0&&(A=ct),!Zh(t))return!1;var g=t.split(".");if(g.length!==3)return!1;var v=g[0],y=g[1],m=v+"."+y,D=sr(g[2]),S=u(Di(g[0])),F=null,$=null;if(S.alg===void 0)throw"algorithm not specified in header";if(F=S.alg,$=F.substr(0,2),s!=null&&Object.prototype.toString.call(s)==="[object Array]"&&s.length>0){var k=":"+s.join(":")+":";if(k.indexOf(":"+F+":")==-1)throw"algorithm '"+F+"' not accepted in the list"}if(F!="none"&&r===null)throw"key shall be specified to verify.";if(typeof r=="string"&&r.indexOf("-----BEGIN ")!=-1&&(r=Pt.getKey(r)),($=="RS"||$=="PS")&&!(r instanceof A))throw"key shall be a RSAKey obj for RS* and PS* algs";if($=="ES"&&!(r instanceof d))throw"key shall be a ECDSA obj for ES* algs";F=="none";var O=null;if(c.jwsalg2sigalg[S.alg]===void 0)throw"unsupported alg name: "+F;if(O=c.jwsalg2sigalg[F],O=="none")throw"not supported";if(O.substr(0,4)=="Hmac"){var z=null;if(r===void 0)throw"hexadecimal key shall be specified for HMAC";var H=new f({alg:O,pass:r});return H.updateString(m),z=H.doFinal(),D==z}else if(O.indexOf("withECDSA")!=-1){var P=null;try{P=d.concatSigToASN1Sig(D)}catch{return!1}var R=new b({alg:O});return R.init(r),R.updateString(m),R.verify(P)}else{var R=new b({alg:O});return R.init(r),R.updateString(m),R.verify(D)}};_.jws.JWS.parse=function(t){var r=t.split("."),s={},a,o,c;if(r.length!=2&&r.length!=3)throw"malformed sJWS: wrong number of '.' splitted elements";return a=r[0],o=r[1],r.length==3&&(c=r[2]),s.headerObj=_.jws.JWS.readSafeJSONString(Di(a)),s.payloadObj=_.jws.JWS.readSafeJSONString(Di(o)),s.headerPP=JSON.stringify(s.headerObj,null,"  "),s.payloadObj==null?s.payloadPP=Di(o):s.payloadPP=JSON.stringify(s.payloadObj,null,"  "),c!==void 0&&(s.sigHex=sr(c)),s};_.jws.JWS.verifyJWT=function(t,r,s){var a=_,o=a.jws,c=o.JWS,u=c.readSafeJSONString,h=c.inArray,d=c.includedArray;if(!Zh(t))return!1;var f=t.split(".");if(f.length!=3)return!1;var b=f[0],A=f[1],g=b+"."+A,v=sr(f[2]),y=u(Di(b)),m=u(Di(A));if(y.alg===void 0)return!1;if(s.alg===void 0)throw"acceptField.alg shall be specified";if(!h(y.alg,s.alg)||m.iss!==void 0&&typeof s.iss=="object"&&!h(m.iss,s.iss)||m.sub!==void 0&&typeof s.sub=="object"&&!h(m.sub,s.sub))return!1;if(m.aud!==void 0&&typeof s.aud=="object"){if(typeof m.aud=="string"){if(!h(m.aud,s.aud))return!1}else if(typeof m.aud=="object"&&!d(m.aud,s.aud))return!1}var D=o.IntDate.getNow();return s.verifyAt!==void 0&&typeof s.verifyAt=="number"&&(D=s.verifyAt),(s.gracePeriod===void 0||typeof s.gracePeriod!="number")&&(s.gracePeriod=0),!(m.exp!==void 0&&typeof m.exp=="number"&&m.exp+s.gracePeriod<D||m.nbf!==void 0&&typeof m.nbf=="number"&&D<m.nbf-s.gracePeriod||m.iat!==void 0&&typeof m.iat=="number"&&D<m.iat-s.gracePeriod||m.jti!==void 0&&s.jti!==void 0&&m.jti!==s.jti||!c.verify(t,r,s.alg))};_.jws.JWS.includedArray=function(t,r){var s=_.jws.JWS.inArray;if(t===null||typeof t!="object"||typeof t.length!="number")return!1;for(var a=0;a<t.length;a++)if(!s(t[a],r))return!1;return!0};_.jws.JWS.inArray=function(t,r){if(r===null||typeof r!="object"||typeof r.length!="number")return!1;for(var s=0;s<r.length;s++)if(r[s]==t)return!0;return!1};_.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",ES512:"SHA512withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"};_.jws.JWS.isSafeJSONString=function(t,r,s){var a=null;try{return a=v1(t),typeof a!="object"||a.constructor===Array?0:(r&&(r[s]=a),1)}catch{return 0}};_.jws.JWS.readSafeJSONString=function(t){var r=null;try{return r=v1(t),typeof r!="object"||r.constructor===Array?null:r}catch{return null}};_.jws.JWS.getEncodedSignatureValueFromJWS=function(t){var r=t.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(r==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return r[1]};_.jws.JWS.getJWKthumbprint=function(t){if(t.kty!=="RSA"&&t.kty!=="EC"&&t.kty!=="oct")throw"unsupported algorithm for JWK Thumprint";var r="{";if(t.kty==="RSA"){if(typeof t.n!="string"||typeof t.e!="string")throw"wrong n and e value for RSA key";r+='"e":"'+t.e+'",',r+='"kty":"'+t.kty+'",',r+='"n":"'+t.n+'"}'}else if(t.kty==="EC"){if(typeof t.crv!="string"||typeof t.x!="string"||typeof t.y!="string")throw"wrong crv, x and y value for EC key";r+='"crv":"'+t.crv+'",',r+='"kty":"'+t.kty+'",',r+='"x":"'+t.x+'",',r+='"y":"'+t.y+'"}'}else if(t.kty==="oct"){if(typeof t.k!="string")throw"wrong k value for oct(symmetric) key";r+='"kty":"'+t.kty+'",',r+='"k":"'+t.k+'"}'}var s=Mi(r),a=_.crypto.Util.hashHex(s,"sha256"),o=Mr(a);return o};_.jws.IntDate={};_.jws.IntDate.get=function(t){var r=_.jws.IntDate,s=r.getNow,a=r.getZulu;if(t=="now")return s();if(t=="now + 1hour")return s()+3600;if(t=="now + 1day")return s()+3600*24;if(t=="now + 1month")return s()+3600*24*30;if(t=="now + 1year")return s()+3600*24*365;if(t.match(/Z$/))return a(t);if(t.match(/^[0-9]+$/))return parseInt(t);throw"unsupported format: "+t};_.jws.IntDate.getZulu=function(t){return _1(t)};_.jws.IntDate.getNow=function(){var t=~~(new Date/1e3);return t};_.jws.IntDate.intDate2UTCString=function(t){var r=new Date(t*1e3);return r.toUTCString()};_.jws.IntDate.intDate2Zulu=function(t){var r=new Date(t*1e3),s=("0000"+r.getUTCFullYear()).slice(-4),a=("00"+(r.getUTCMonth()+1)).slice(-2),o=("00"+r.getUTCDate()).slice(-2),c=("00"+r.getUTCHours()).slice(-2),u=("00"+r.getUTCMinutes()).slice(-2),h=("00"+r.getUTCSeconds()).slice(-2);return s+a+o+c+u+h+"Z"};(typeof _>"u"||!_)&&(_={});(typeof _.jws>"u"||!_.jws)&&(_.jws={});_.jws.JWSJS=function(){var t=_,r=t.jws,s=r.JWS,a=s.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(o){this.init();var c=o.split(".");if(c.length!=3)throw"malformed input JWS";this.aHeader.push(c[0]),this.sPayload=c[1],this.aSignature.push(c[2])},this.addSignature=function(o,c,u,h){if(this.sPayload===void 0||this.sPayload===null)throw"there's no JSON-JS signature to add.";var d=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var f=_.jws.JWS.sign(o,c,this.sPayload,u,h),b=f.split("."),A=b[0],g=b[2];this.aHeader.push(b[0]),this.aSignature.push(b[2])}catch(v){throw this.aHeader.length>d&&this.aHeader.pop(),this.aSignature.length>d&&this.aSignature.pop(),"addSignature failed: "+v}},this.verifyAll=function(o){if(this.aHeader.length!==o.length||this.aSignature.length!==o.length)return!1;for(var c=0;c<o.length;c++){var u=o[c];if(u.length!==2)return!1;var h=this.verifyNth(c,u[0],u[1]);if(h===!1)return!1}return!0},this.verifyNth=function(o,c,u){if(this.aHeader.length<=o||this.aSignature.length<=o)return!1;var h=this.aHeader[o],d=this.aSignature[o],f=h+"."+this.sPayload+"."+d,b=!1;try{b=s.verify(f,c,u)}catch{return!1}return b},this.readJWSJS=function(o){if(typeof o=="string"){var c=a(o);if(c==null)throw"argument is not safe JSON object string";this.aHeader=c.headers,this.sPayload=c.payload,this.aSignature=c.signatures}else try{if(o.headers.length>0)this.aHeader=o.headers;else throw"malformed header";if(typeof o.payload=="string")this.sPayload=o.payload;else throw"malformed signatures";if(o.signatures.length>0)this.aSignature=o.signatures;else throw"malformed signatures"}catch(u){throw"malformed JWS-JS JSON object: "+u}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return this.aHeader.length==0?1:0}};Be.SecureRandom=hu;Be.rng_seed_time=Gh;Be.BigInteger=te;Be.RSAKey=ct;Be.ECDSA=_.crypto.ECDSA;Be.DSA=_.crypto.DSA;Be.Signature=_.crypto.Signature;Be.MessageDigest=_.crypto.MessageDigest;Be.Mac=_.crypto.Mac;Be.KEYUTIL=Pt;Be.ASN1HEX=Ce;Be.X509=tt;Be.X509CRL=vD;Be.CryptoJS=$e;Be.b64tohex=cu;Be.b64toBA=f1;Be.ECFieldElementFp=qr;Be.ECPointFp=Mt;Be.ECCurveFp=_s;Be.stoBA=m1;Be.BAtos=w1;Be.BAtohex=Zc;Be.stohex=Ln;Be.stob64=JS;Be.stob64u=XS;Be.b64utos=ZS;Be.b64tob64u=ou;Be.b64utob64=vo;Be.hex2b64=bs;Be.hextob64u=Mr;Be.b64utohex=sr;Be.utf8tob64u=po;Be.b64utoutf8=Di;Be.utf8tob64=QS;Be.b64toutf8=eD;Be.utf8tohex=Qc;Be.hextoutf8=Wt;Be.hextorstr=Hn;Be.rstrtohex=Mi;Be.hextob64=Wh;Be.hextob64nl=nD;Be.b64nltohex=b1;Be.hextopem=dn;Be.pemtohex=gr;Be.hextoArrayBuffer=aD;Be.ArrayBuffertohex=uD;Be.zulutomsec=Yh;Be.msectozulu=oD;Be.zulutosec=_1;Be.zulutodate=cD;Be.datetozulu=lD;Be.uricmptohex=tl;Be.hextouricmp=rl;Be.ipv6tohex=Uh;Be.hextoipv6=Mh;Be.hextoip=Gc;Be.iptohex=Jh;Be.ucs2hextoutf8=Xh;Be.encodeURIComponentAll=nl;Be.newline_toUnix=fD;Be.newline_toDos=hD;Be.hextoposhex=qh;Be.intarystrtohex=pD;Be.strdiffidx=dD;Be.oidtohex=y1;Be.hextooid=il;Be.strpad=Wc;Be.bitstrtoint=D1;Be.inttobitstr=F1;Be.bitstrtobinstr=C1;Be.binstrtobitstr=gD;Be.isBase64URLDot=Zh;Be.namearraytobinstr=Yc;Be.extendClass=me;Be.foldnl=el;Be.b64topem=iD;Be.pemtob64=sD;Be.timeogen=E1;Be.aryval=Zt;Be.inttohex=S1;Be.twoscompl=mo;Be.KJUR=_;Be.crypto=_.crypto;Be.asn1=_.asn1;Be.jws=_.jws;Be.lang=_.lang;Be.VERSION=DA;Be.VERSION_FULL=FA});var sl=ot(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});ba.isInSubnet=wD;ba.isCorrect=bD;ba.numberToPaddedHex=k1;ba.stringToPaddedHex=_D;ba.testBit=ED;function wD(t){return this.subnetMask<t.subnetMask?!1:this.mask(t.subnetMask)===t.mask()}function bD(t){return function(){return this.addressMinusSuffix!==this.correctForm()?!1:this.subnetMask===t&&!this.parsedSubnet?!0:this.parsedSubnet===String(this.subnetMask)}}function k1(t){return t.toString(16).padStart(2,"0")}function _D(t){return k1(parseInt(t,10))}function ED(t,r){let{length:s}=t;if(r>s)return!1;let a=s-r;return t.substring(a,a+1)==="1"}});var ep=ot(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});qi.RE_SUBNET_STRING=qi.RE_ADDRESS=qi.GROUPS=qi.BITS=void 0;qi.BITS=32;qi.GROUPS=4;qi.RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g;qi.RE_SUBNET_STRING=/\/\d{1,2}$/});var ul=ot(al=>{"use strict";Object.defineProperty(al,"__esModule",{value:!0});al.AddressError=void 0;var tp=class extends Error{constructor(r,s){super(r),this.name="AddressError",this.parseMessage=s}};al.AddressError=tp});var np=ot(Vi=>{"use strict";var AD=Vi&&Vi.__createBinding||(Object.create?(function(t,r,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(r,s);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[s]}}),Object.defineProperty(t,a,o)}):(function(t,r,s,a){a===void 0&&(a=s),t[a]=r[s]})),yD=Vi&&Vi.__setModuleDefault||(Object.create?(function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}):function(t,r){t.default=r}),T1=Vi&&Vi.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var s in t)s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)&&AD(r,t,s);return yD(r,t),r};Object.defineProperty(Vi,"__esModule",{value:!0});Vi.Address4=void 0;var pu=T1(sl()),Fi=T1(ep()),x1=ul(),rp=class t{constructor(r){this.groups=Fi.GROUPS,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=pu.isCorrect(Fi.BITS),this.isInSubnet=pu.isInSubnet,this.address=r;let s=Fi.RE_SUBNET_STRING.exec(r);if(s){if(this.parsedSubnet=s[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,this.subnetMask<0||this.subnetMask>Fi.BITS)throw new x1.AddressError("Invalid subnet mask.");r=r.replace(Fi.RE_SUBNET_STRING,"")}this.addressMinusSuffix=r,this.parsedAddress=this.parse(r)}static isValid(r){try{return new t(r),!0}catch{return!1}}parse(r){let s=r.split(".");if(!r.match(Fi.RE_ADDRESS))throw new x1.AddressError("Invalid IPv4 address.");return s}correctForm(){return this.parsedAddress.map(r=>parseInt(r,10)).join(".")}static fromHex(r){let s=r.replace(/:/g,"").padStart(8,"0"),a=[],o;for(o=0;o<8;o+=2){let c=s.slice(o,o+2);a.push(parseInt(c,16))}return new t(a.join("."))}static fromInteger(r){return t.fromHex(r.toString(16))}static fromArpa(r){let a=r.replace(/(\.in-addr\.arpa)?\.$/,"").split(".").reverse().join(".");return new t(a)}toHex(){return this.parsedAddress.map(r=>pu.stringToPaddedHex(r)).join(":")}toArray(){return this.parsedAddress.map(r=>parseInt(r,10))}toGroup6(){let r=[],s;for(s=0;s<Fi.GROUPS;s+=2)r.push(`${pu.stringToPaddedHex(this.parsedAddress[s])}${pu.stringToPaddedHex(this.parsedAddress[s+1])}`);return r.join(":")}bigInt(){return BigInt(`0x${this.parsedAddress.map(r=>pu.stringToPaddedHex(r)).join("")}`)}_startAddress(){return BigInt(`0b${this.mask()+"0".repeat(Fi.BITS-this.subnetMask)}`)}startAddress(){return t.fromBigInt(this._startAddress())}startAddressExclusive(){let r=BigInt("1");return t.fromBigInt(this._startAddress()+r)}_endAddress(){return BigInt(`0b${this.mask()+"1".repeat(Fi.BITS-this.subnetMask)}`)}endAddress(){return t.fromBigInt(this._endAddress())}endAddressExclusive(){let r=BigInt("1");return t.fromBigInt(this._endAddress()-r)}static fromBigInt(r){return t.fromHex(r.toString(16))}mask(r){return r===void 0&&(r=this.subnetMask),this.getBitsBase2(0,r)}getBitsBase2(r,s){return this.binaryZeroPad().slice(r,s)}reverseForm(r){r||(r={});let s=this.correctForm().split(".").reverse().join(".");return r.omitSuffix?s:`${s}.in-addr.arpa.`}isMulticast(){return this.isInSubnet(new t("224.0.0.0/4"))}binaryZeroPad(){return this.bigInt().toString(2).padStart(Fi.BITS,"0")}groupForV6(){let r=this.parsedAddress;return this.address.replace(Fi.RE_ADDRESS,`<span class="hover-group group-v4 group-6">${r.slice(0,2).join(".")}</span>.<span class="hover-group group-v4 group-7">${r.slice(2,4).join(".")}</span>`)}};Vi.Address4=rp});var ip=ot(br=>{"use strict";Object.defineProperty(br,"__esModule",{value:!0});br.RE_URL_WITH_PORT=br.RE_URL=br.RE_ZONE_STRING=br.RE_SUBNET_STRING=br.RE_BAD_ADDRESS=br.RE_BAD_CHARACTERS=br.TYPES=br.SCOPES=br.GROUPS=br.BITS=void 0;br.BITS=128;br.GROUPS=8;br.SCOPES={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"};br.TYPES={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"};br.RE_BAD_CHARACTERS=/([^0-9a-f:/%])/gi;br.RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi;br.RE_SUBNET_STRING=/\/\d{1,3}(?=%|$)/;br.RE_ZONE_STRING=/%.*$/;br.RE_URL=/^\[{0,1}([0-9a-f:]+)\]{0,1}/;br.RE_URL_WITH_PORT=/\[([0-9a-f:]+)\]:([0-9]{1,5})/});var sp=ot(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});du.spanAllZeroes=O1;du.spanAll=SD;du.spanLeadingZeroes=DD;du.simpleGroup=FD;function O1(t){return t.replace(/(0+)/g,'<span class="zero">$1</span>')}function SD(t,r=0){return t.split("").map((a,o)=>`<span class="digit value-${a} position-${o+r}">${O1(a)}</span>`).join("")}function N1(t){return t.replace(/^(0+)/,'<span class="zero">$1</span>')}function DD(t){return t.split(":").map(s=>N1(s)).join(":")}function FD(t,r=0){return t.split(":").map((a,o)=>/group-v4/.test(a)?a:`<span class="hover-group group-${o+r}">${N1(a)}</span>`)}});var L1=ot(jn=>{"use strict";var CD=jn&&jn.__createBinding||(Object.create?(function(t,r,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(r,s);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[s]}}),Object.defineProperty(t,a,o)}):(function(t,r,s,a){a===void 0&&(a=s),t[a]=r[s]})),ID=jn&&jn.__setModuleDefault||(Object.create?(function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}):function(t,r){t.default=r}),PD=jn&&jn.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var s in t)s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)&&CD(r,t,s);return ID(r,t),r};Object.defineProperty(jn,"__esModule",{value:!0});jn.ADDRESS_BOUNDARY=void 0;jn.groupPossibilities=cl;jn.padGroup=ol;jn.simpleRegularExpression=RD;jn.possibleElisions=$D;var BD=PD(ip());function cl(t){return`(${t.join("|")})`}function ol(t){return t.length<4?`0{0,${4-t.length}}${t}`:t}jn.ADDRESS_BOUNDARY="[^A-Fa-f0-9:]";function RD(t){let r=[];t.forEach((a,o)=>{parseInt(a,16)===0&&r.push(o)});let s=r.map(a=>t.map((o,c)=>{if(c===a){let u=c===0||c===BD.GROUPS-1?":":"";return cl([ol(o),u])}return ol(o)}).join(":"));return s.push(t.map(ol).join(":")),cl(s)}function $D(t,r,s){let a=r?"":":",o=s?"":":",c=[];!r&&!s&&c.push("::"),r&&s&&c.push(""),(s&&!r||!s&&r)&&c.push(":"),c.push(`${a}(:0{1,4}){1,${t-1}}`),c.push(`(0{1,4}:){1,${t-1}}${o}`),c.push(`(0{1,4}:){${t-1}}0{1,4}`);for(let u=1;u<t-1;u++)for(let h=1;h<t-u;h++)c.push(`(0{1,4}:){${h}}:(0{1,4}:){${t-h-u-1}}0{1,4}`);return cl(c)}});var M1=ot(Ki=>{"use strict";var kD=Ki&&Ki.__createBinding||(Object.create?(function(t,r,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(r,s);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[s]}}),Object.defineProperty(t,a,o)}):(function(t,r,s,a){a===void 0&&(a=s),t[a]=r[s]})),xD=Ki&&Ki.__setModuleDefault||(Object.create?(function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}):function(t,r){t.default=r}),hl=Ki&&Ki.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var s in t)s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)&&kD(r,t,s);return xD(r,t),r};Object.defineProperty(Ki,"__esModule",{value:!0});Ki.Address6=void 0;var H1=hl(sl()),ap=hl(ep()),nr=hl(ip()),up=hl(sp()),_a=np(),Ea=L1(),Es=ul(),ll=sl();function fl(t){if(!t)throw new Error("Assertion failed.")}function TD(t){let r=/(\d+)(\d{3})/;for(;r.test(t);)t=t.replace(r,"$1,$2");return t}function OD(t){return t=t.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2'),t=t.replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2'),t}function ND(t,r){let s=[],a=[],o;for(o=0;o<t.length;o++)o<r[0]?s.push(t[o]):o>r[1]&&a.push(t[o]);return s.concat(["compact"]).concat(a)}function j1(t){return parseInt(t,16).toString(16).padStart(4,"0")}function U1(t){return t&255}var op=class t{constructor(r,s){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=H1.isInSubnet,this.isCorrect=H1.isCorrect(nr.BITS),s===void 0?this.groups=nr.GROUPS:this.groups=s,this.address=r;let a=nr.RE_SUBNET_STRING.exec(r);if(a){if(this.parsedSubnet=a[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>nr.BITS)throw new Es.AddressError("Invalid subnet mask.");r=r.replace(nr.RE_SUBNET_STRING,"")}else if(/\//.test(r))throw new Es.AddressError("Invalid subnet mask.");let o=nr.RE_ZONE_STRING.exec(r);o&&(this.zone=o[0],r=r.replace(nr.RE_ZONE_STRING,"")),this.addressMinusSuffix=r,this.parsedAddress=this.parse(this.addressMinusSuffix)}static isValid(r){try{return new t(r),!0}catch{return!1}}static fromBigInt(r){let s=r.toString(16).padStart(32,"0"),a=[],o;for(o=0;o<nr.GROUPS;o++)a.push(s.slice(o*4,(o+1)*4));return new t(a.join(":"))}static fromURL(r){let s,a=null,o;if(r.indexOf("[")!==-1&&r.indexOf("]:")!==-1){if(o=nr.RE_URL_WITH_PORT.exec(r),o===null)return{error:"failed to parse address with port",address:null,port:null};s=o[1],a=o[2]}else if(r.indexOf("/")!==-1){if(r=r.replace(/^[a-z0-9]+:\/\//,""),o=nr.RE_URL.exec(r),o===null)return{error:"failed to parse address from URL",address:null,port:null};s=o[1]}else s=r;return a?(a=parseInt(a,10),(a<0||a>65536)&&(a=null)):a=null,{address:new t(s),port:a}}static fromAddress4(r){let s=new _a.Address4(r),a=nr.BITS-(ap.BITS-s.subnetMask);return new t(`::ffff:${s.correctForm()}/${a}`)}static fromArpa(r){let s=r.replace(/(\.ip6\.arpa)?\.$/,""),a=7;if(s.length!==63)throw new Es.AddressError("Invalid 'ip6.arpa' form.");let o=s.split(".").reverse();for(let c=a;c>0;c--){let u=c*4;o.splice(u,0,":")}return s=o.join(""),new t(s)}microsoftTranscription(){return`${this.correctForm().replace(/:/g,"-")}.ipv6-literal.net`}mask(r=this.subnetMask){return this.getBitsBase2(0,r)}possibleSubnets(r=128){let s=nr.BITS-this.subnetMask,a=Math.abs(r-nr.BITS),o=s-a;return o<0?"0":TD((BigInt("2")**BigInt(o)).toString(10))}_startAddress(){return BigInt(`0b${this.mask()+"0".repeat(nr.BITS-this.subnetMask)}`)}startAddress(){return t.fromBigInt(this._startAddress())}startAddressExclusive(){let r=BigInt("1");return t.fromBigInt(this._startAddress()+r)}_endAddress(){return BigInt(`0b${this.mask()+"1".repeat(nr.BITS-this.subnetMask)}`)}endAddress(){return t.fromBigInt(this._endAddress())}endAddressExclusive(){let r=BigInt("1");return t.fromBigInt(this._endAddress()-r)}getScope(){let r=nr.SCOPES[parseInt(this.getBits(12,16).toString(10),10)];return this.getType()==="Global unicast"&&r!=="Link local"&&(r="Global"),r||"Unknown"}getType(){for(let r of Object.keys(nr.TYPES))if(this.isInSubnet(new t(r)))return nr.TYPES[r];return"Global unicast"}getBits(r,s){return BigInt(`0b${this.getBitsBase2(r,s)}`)}getBitsBase2(r,s){return this.binaryZeroPad().slice(r,s)}getBitsBase16(r,s){let a=s-r;if(a%4!==0)throw new Error("Length of bits to retrieve must be divisible by four");return this.getBits(r,s).toString(16).padStart(a/4,"0")}getBitsPastSubnet(){return this.getBitsBase2(this.subnetMask,nr.BITS)}reverseForm(r){r||(r={});let s=Math.floor(this.subnetMask/4),a=this.canonicalForm().replace(/:/g,"").split("").slice(0,s).reverse().join(".");return s>0?r.omitSuffix?a:`${a}.ip6.arpa.`:r.omitSuffix?"":"ip6.arpa."}correctForm(){let r,s=[],a=0,o=[];for(r=0;r<this.parsedAddress.length;r++){let h=parseInt(this.parsedAddress[r],16);h===0&&a++,h!==0&&a>0&&(a>1&&o.push([r-a,r-1]),a=0)}a>1&&o.push([this.parsedAddress.length-a,this.parsedAddress.length-1]);let c=o.map(h=>h[1]-h[0]+1);if(o.length>0){let h=c.indexOf(Math.max(...c));s=ND(this.parsedAddress,o[h])}else s=this.parsedAddress;for(r=0;r<s.length;r++)s[r]!=="compact"&&(s[r]=parseInt(s[r],16).toString(16));let u=s.join(":");return u=u.replace(/^compact$/,"::"),u=u.replace(/(^compact)|(compact$)/,":"),u=u.replace(/compact/,""),u}binaryZeroPad(){return this.bigInt().toString(2).padStart(nr.BITS,"0")}parse4in6(r){let s=r.split(":"),o=s.slice(-1)[0].match(ap.RE_ADDRESS);if(o){this.parsedAddress4=o[0],this.address4=new _a.Address4(this.parsedAddress4);for(let c=0;c<this.address4.groups;c++)if(/^0[0-9]+/.test(this.address4.parsedAddress[c]))throw new Es.AddressError("IPv4 addresses can't have leading zeroes.",r.replace(ap.RE_ADDRESS,this.address4.parsedAddress.map(OD).join(".")));this.v4=!0,s[s.length-1]=this.address4.toGroup6(),r=s.join(":")}return r}parse(r){r=this.parse4in6(r);let s=r.match(nr.RE_BAD_CHARACTERS);if(s)throw new Es.AddressError(`Bad character${s.length>1?"s":""} detected in address: ${s.join("")}`,r.replace(nr.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>'));let a=r.match(nr.RE_BAD_ADDRESS);if(a)throw new Es.AddressError(`Address failed regex: ${a.join("")}`,r.replace(nr.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>'));let o=[],c=r.split("::");if(c.length===2){let u=c[0].split(":"),h=c[1].split(":");u.length===1&&u[0]===""&&(u=[]),h.length===1&&h[0]===""&&(h=[]);let d=this.groups-(u.length+h.length);if(!d)throw new Es.AddressError("Error parsing groups");this.elidedGroups=d,this.elisionBegin=u.length,this.elisionEnd=u.length+this.elidedGroups,o=o.concat(u);for(let f=0;f<d;f++)o.push("0");o=o.concat(h)}else if(c.length===1)o=r.split(":"),this.elidedGroups=0;else throw new Es.AddressError("Too many :: groups found");if(o=o.map(u=>parseInt(u,16).toString(16)),o.length!==this.groups)throw new Es.AddressError("Incorrect number of groups found");return o}canonicalForm(){return this.parsedAddress.map(j1).join(":")}decimal(){return this.parsedAddress.map(r=>parseInt(r,16).toString(10).padStart(5,"0")).join(":")}bigInt(){return BigInt(`0x${this.parsedAddress.map(j1).join("")}`)}to4(){let r=this.binaryZeroPad().split("");return _a.Address4.fromHex(BigInt(`0b${r.slice(96,128).join("")}`).toString(16))}to4in6(){let r=this.to4(),a=new t(this.parsedAddress.slice(0,6).join(":"),6).correctForm(),o="";return/:$/.test(a)||(o=":"),a+o+r.address}inspectTeredo(){let r=this.getBitsBase16(0,32),a=(this.getBits(80,96)^BigInt("0xffff")).toString(),o=_a.Address4.fromHex(this.getBitsBase16(32,64)),c=this.getBits(96,128),u=_a.Address4.fromHex((c^BigInt("0xffffffff")).toString(16)),h=this.getBitsBase2(64,80),d=(0,ll.testBit)(h,15),f=(0,ll.testBit)(h,14),b=(0,ll.testBit)(h,8),A=(0,ll.testBit)(h,9),g=BigInt(`0b${h.slice(2,6)+h.slice(8,16)}`).toString(10);return{prefix:`${r.slice(0,4)}:${r.slice(4,8)}`,server4:o.address,client4:u.address,flags:h,coneNat:d,microsoft:{reserved:f,universalLocal:A,groupIndividual:b,nonce:g},udpPort:a}}inspect6to4(){let r=this.getBitsBase16(0,16),s=_a.Address4.fromHex(this.getBitsBase16(16,48));return{prefix:r.slice(0,4),gateway:s.address}}to6to4(){if(!this.is4())return null;let r=["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":");return new t(r)}toByteArray(){let r=this.bigInt().toString(16),a=`${"0".repeat(r.length%2)}${r}`,o=[];for(let c=0,u=a.length;c<u;c+=2)o.push(parseInt(a.substring(c,c+2),16));return o}toUnsignedByteArray(){return this.toByteArray().map(U1)}static fromByteArray(r){return this.fromUnsignedByteArray(r.map(U1))}static fromUnsignedByteArray(r){let s=BigInt("256"),a=BigInt("0"),o=BigInt("1");for(let c=r.length-1;c>=0;c--)a+=o*BigInt(r[c].toString(10)),o*=s;return t.fromBigInt(a)}isCanonical(){return this.addressMinusSuffix===this.canonicalForm()}isLinkLocal(){return this.getBitsBase2(0,64)==="1111111010000000000000000000000000000000000000000000000000000000"}isMulticast(){return this.getType()==="Multicast"}is4(){return this.v4}isTeredo(){return this.isInSubnet(new t("2001::/32"))}is6to4(){return this.isInSubnet(new t("2002::/16"))}isLoopback(){return this.getType()==="Loopback"}href(r){return r===void 0?r="":r=`:${r}`,`http://[${this.correctForm()}]${r}/`}link(r){r||(r={}),r.className===void 0&&(r.className=""),r.prefix===void 0&&(r.prefix="/#address="),r.v4===void 0&&(r.v4=!1);let s=this.correctForm;r.v4&&(s=this.to4in6);let a=s.call(this);return r.className?`<a href="${r.prefix}${a}" class="${r.className}">${a}</a>`:`<a href="${r.prefix}${a}">${a}</a>`}group(){if(this.elidedGroups===0)return up.simpleGroup(this.address).join(":");fl(typeof this.elidedGroups=="number"),fl(typeof this.elisionBegin=="number");let r=[],[s,a]=this.address.split("::");s.length?r.push(...up.simpleGroup(s)):r.push("");let o=["hover-group"];for(let c=this.elisionBegin;c<this.elisionBegin+this.elidedGroups;c++)o.push(`group-${c}`);return r.push(`<span class="${o.join(" ")}"></span>`),a.length?r.push(...up.simpleGroup(a,this.elisionEnd)):r.push(""),this.is4()&&(fl(this.address4 instanceof _a.Address4),r.pop(),r.push(this.address4.groupForV6())),r.join(":")}regularExpressionString(r=!1){let s=[],a=new t(this.correctForm());if(a.elidedGroups===0)s.push((0,Ea.simpleRegularExpression)(a.parsedAddress));else if(a.elidedGroups===nr.GROUPS)s.push((0,Ea.possibleElisions)(nr.GROUPS));else{let o=a.address.split("::");o[0].length&&s.push((0,Ea.simpleRegularExpression)(o[0].split(":"))),fl(typeof a.elidedGroups=="number"),s.push((0,Ea.possibleElisions)(a.elidedGroups,o[0].length!==0,o[1].length!==0)),o[1].length&&s.push((0,Ea.simpleRegularExpression)(o[1].split(":"))),s=[s.join(":")]}return r||(s=["(?=^|",Ea.ADDRESS_BOUNDARY,"|[^\\w\\:])(",...s,")(?=[^\\w\\:]|",Ea.ADDRESS_BOUNDARY,"|$)"]),s.join("")}regularExpression(r=!1){return new RegExp(this.regularExpressionString(r),"i")}};Ki.Address6=op});var q1=ot(gn=>{"use strict";var LD=gn&&gn.__createBinding||(Object.create?(function(t,r,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(r,s);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[s]}}),Object.defineProperty(t,a,o)}):(function(t,r,s,a){a===void 0&&(a=s),t[a]=r[s]})),HD=gn&&gn.__setModuleDefault||(Object.create?(function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}):function(t,r){t.default=r}),jD=gn&&gn.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var s in t)s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)&&LD(r,t,s);return HD(r,t),r};Object.defineProperty(gn,"__esModule",{value:!0});gn.v6=gn.AddressError=gn.Address6=gn.Address4=void 0;var UD=np();Object.defineProperty(gn,"Address4",{enumerable:!0,get:function(){return UD.Address4}});var MD=M1();Object.defineProperty(gn,"Address6",{enumerable:!0,get:function(){return MD.Address6}});var qD=ul();Object.defineProperty(gn,"AddressError",{enumerable:!0,get:function(){return qD.AddressError}});var VD=jD(sp());gn.v6={helpers:VD}});var ya=ot((r8,Aa)=>{"use strict";function G1(t){return typeof t>"u"||t===null}function WD(t){return typeof t=="object"&&t!==null}function YD(t){return Array.isArray(t)?t:G1(t)?[]:[t]}function JD(t,r){var s,a,o,c;if(r)for(c=Object.keys(r),s=0,a=c.length;s<a;s+=1)o=c[s],t[o]=r[o];return t}function XD(t,r){var s="",a;for(a=0;a<r;a+=1)s+=t;return s}function ZD(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}Aa.exports.isNothing=G1;Aa.exports.isObject=WD;Aa.exports.toArray=YD;Aa.exports.repeat=XD;Aa.exports.isNegativeZero=ZD;Aa.exports.extend=JD});var vu=ot((n8,W1)=>{"use strict";function bo(t,r){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=r,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}bo.prototype=Object.create(Error.prototype);bo.prototype.constructor=bo;bo.prototype.toString=function(r){var s=this.name+": ";return s+=this.reason||"(unknown reason)",!r&&this.mark&&(s+=" "+this.mark.toString()),s};W1.exports=bo});var X1=ot((i8,J1)=>{"use strict";var Y1=ya();function cp(t,r,s,a,o){this.name=t,this.buffer=r,this.position=s,this.line=a,this.column=o}cp.prototype.getSnippet=function(r,s){var a,o,c,u,h;if(!this.buffer)return null;for(r=r||4,s=s||75,a="",o=this.position;o>0&&`\0\r
\x85\u2028\u2029`.indexOf(this.buffer.charAt(o-1))===-1;)if(o-=1,this.position-o>s/2-1){a=" ... ",o+=5;break}for(c="",u=this.position;u<this.buffer.length&&`\0\r
\x85\u2028\u2029`.indexOf(this.buffer.charAt(u))===-1;)if(u+=1,u-this.position>s/2-1){c=" ... ",u-=5;break}return h=this.buffer.slice(o,u),Y1.repeat(" ",r)+a+h+c+`
`+Y1.repeat(" ",r+this.position-o+a.length)+"^"};cp.prototype.toString=function(r){var s,a="";return this.name&&(a+='in "'+this.name+'" '),a+="at line "+(this.line+1)+", column "+(this.column+1),r||(s=this.getSnippet(),s&&(a+=`:
`+s)),a};J1.exports=cp});var Vr=ot((s8,Q1)=>{"use strict";var Z1=vu(),QD=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],eF=["scalar","sequence","mapping"];function tF(t){var r={};return t!==null&&Object.keys(t).forEach(function(s){t[s].forEach(function(a){r[String(a)]=s})}),r}function rF(t,r){if(r=r||{},Object.keys(r).forEach(function(s){if(QD.indexOf(s)===-1)throw new Z1('Unknown option "'+s+'" is met in definition of "'+t+'" YAML type.')}),this.tag=t,this.kind=r.kind||null,this.resolve=r.resolve||function(){return!0},this.construct=r.construct||function(s){return s},this.instanceOf=r.instanceOf||null,this.predicate=r.predicate||null,this.represent=r.represent||null,this.defaultStyle=r.defaultStyle||null,this.styleAliases=tF(r.styleAliases||null),eF.indexOf(this.kind)===-1)throw new Z1('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}Q1.exports=rF});var Sa=ot((a8,tg)=>{"use strict";var eg=ya(),dl=vu(),nF=Vr();function lp(t,r,s){var a=[];return t.include.forEach(function(o){s=lp(o,r,s)}),t[r].forEach(function(o){s.forEach(function(c,u){c.tag===o.tag&&c.kind===o.kind&&a.push(u)}),s.push(o)}),s.filter(function(o,c){return a.indexOf(c)===-1})}function iF(){var t={scalar:{},sequence:{},mapping:{},fallback:{}},r,s;function a(o){t[o.kind][o.tag]=t.fallback[o.tag]=o}for(r=0,s=arguments.length;r<s;r+=1)arguments[r].forEach(a);return t}function mu(t){this.include=t.include||[],this.implicit=t.implicit||[],this.explicit=t.explicit||[],this.implicit.forEach(function(r){if(r.loadKind&&r.loadKind!=="scalar")throw new dl("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=lp(this,"implicit",[]),this.compiledExplicit=lp(this,"explicit",[]),this.compiledTypeMap=iF(this.compiledImplicit,this.compiledExplicit)}mu.DEFAULT=null;mu.create=function(){var r,s;switch(arguments.length){case 1:r=mu.DEFAULT,s=arguments[0];break;case 2:r=arguments[0],s=arguments[1];break;default:throw new dl("Wrong number of arguments for Schema.create function")}if(r=eg.toArray(r),s=eg.toArray(s),!r.every(function(a){return a instanceof mu}))throw new dl("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!s.every(function(a){return a instanceof nF}))throw new dl("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new mu({include:r,explicit:s})};tg.exports=mu});var ng=ot((u8,rg)=>{"use strict";var sF=Vr();rg.exports=new sF("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}})});var sg=ot((o8,ig)=>{"use strict";var aF=Vr();ig.exports=new aF("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}})});var ug=ot((c8,ag)=>{"use strict";var uF=Vr();ag.exports=new uF("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}})});var gl=ot((l8,og)=>{"use strict";var oF=Sa();og.exports=new oF({explicit:[ng(),sg(),ug()]})});var lg=ot((f8,cg)=>{"use strict";var cF=Vr();function lF(t){if(t===null)return!0;var r=t.length;return r===1&&t==="~"||r===4&&(t==="null"||t==="Null"||t==="NULL")}function fF(){return null}function hF(t){return t===null}cg.exports=new cF("tag:yaml.org,2002:null",{kind:"scalar",resolve:lF,construct:fF,predicate:hF,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})});var hg=ot((h8,fg)=>{"use strict";var pF=Vr();function dF(t){if(t===null)return!1;var r=t.length;return r===4&&(t==="true"||t==="True"||t==="TRUE")||r===5&&(t==="false"||t==="False"||t==="FALSE")}function gF(t){return t==="true"||t==="True"||t==="TRUE"}function vF(t){return Object.prototype.toString.call(t)==="[object Boolean]"}fg.exports=new pF("tag:yaml.org,2002:bool",{kind:"scalar",resolve:dF,construct:gF,predicate:vF,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"})});var dg=ot((p8,pg)=>{"use strict";var mF=ya(),wF=Vr();function bF(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function _F(t){return 48<=t&&t<=55}function EF(t){return 48<=t&&t<=57}function AF(t){if(t===null)return!1;var r=t.length,s=0,a=!1,o;if(!r)return!1;if(o=t[s],(o==="-"||o==="+")&&(o=t[++s]),o==="0"){if(s+1===r)return!0;if(o=t[++s],o==="b"){for(s++;s<r;s++)if(o=t[s],o!=="_"){if(o!=="0"&&o!=="1")return!1;a=!0}return a&&o!=="_"}if(o==="x"){for(s++;s<r;s++)if(o=t[s],o!=="_"){if(!bF(t.charCodeAt(s)))return!1;a=!0}return a&&o!=="_"}for(;s<r;s++)if(o=t[s],o!=="_"){if(!_F(t.charCodeAt(s)))return!1;a=!0}return a&&o!=="_"}if(o==="_")return!1;for(;s<r;s++)if(o=t[s],o!=="_"){if(o===":")break;if(!EF(t.charCodeAt(s)))return!1;a=!0}return!a||o==="_"?!1:o!==":"?!0:/^(:[0-5]?[0-9])+$/.test(t.slice(s))}function yF(t){var r=t,s=1,a,o,c=[];return r.indexOf("_")!==-1&&(r=r.replace(/_/g,"")),a=r[0],(a==="-"||a==="+")&&(a==="-"&&(s=-1),r=r.slice(1),a=r[0]),r==="0"?0:a==="0"?r[1]==="b"?s*parseInt(r.slice(2),2):r[1]==="x"?s*parseInt(r,16):s*parseInt(r,8):r.indexOf(":")!==-1?(r.split(":").forEach(function(u){c.unshift(parseInt(u,10))}),r=0,o=1,c.forEach(function(u){r+=u*o,o*=60}),s*r):s*parseInt(r,10)}function SF(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!mF.isNegativeZero(t)}pg.exports=new wF("tag:yaml.org,2002:int",{kind:"scalar",resolve:AF,construct:yF,predicate:SF,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0"+t.toString(8):"-0"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})});var mg=ot((d8,vg)=>{"use strict";var gg=ya(),DF=Vr(),FF=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function CF(t){return!(t===null||!FF.test(t)||t[t.length-1]==="_")}function IF(t){var r,s,a,o;return r=t.replace(/_/g,"").toLowerCase(),s=r[0]==="-"?-1:1,o=[],"+-".indexOf(r[0])>=0&&(r=r.slice(1)),r===".inf"?s===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:r===".nan"?NaN:r.indexOf(":")>=0?(r.split(":").forEach(function(c){o.unshift(parseFloat(c,10))}),r=0,a=1,o.forEach(function(c){r+=c*a,a*=60}),s*r):s*parseFloat(r,10)}var PF=/^[-+]?[0-9]+e/;function BF(t,r){var s;if(isNaN(t))switch(r){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(r){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(r){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(gg.isNegativeZero(t))return"-0.0";return s=t.toString(10),PF.test(s)?s.replace("e",".e"):s}function RF(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||gg.isNegativeZero(t))}vg.exports=new DF("tag:yaml.org,2002:float",{kind:"scalar",resolve:CF,construct:IF,predicate:RF,represent:BF,defaultStyle:"lowercase"})});var fp=ot((g8,wg)=>{"use strict";var $F=Sa();wg.exports=new $F({include:[gl()],implicit:[lg(),hg(),dg(),mg()]})});var hp=ot((v8,bg)=>{"use strict";var kF=Sa();bg.exports=new kF({include:[fp()]})});var yg=ot((m8,Ag)=>{"use strict";var xF=Vr(),_g=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Eg=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function TF(t){return t===null?!1:_g.exec(t)!==null||Eg.exec(t)!==null}function OF(t){var r,s,a,o,c,u,h,d=0,f=null,b,A,g;if(r=_g.exec(t),r===null&&(r=Eg.exec(t)),r===null)throw new Error("Date resolve error");if(s=+r[1],a=+r[2]-1,o=+r[3],!r[4])return new Date(Date.UTC(s,a,o));if(c=+r[4],u=+r[5],h=+r[6],r[7]){for(d=r[7].slice(0,3);d.length<3;)d+="0";d=+d}return r[9]&&(b=+r[10],A=+(r[11]||0),f=(b*60+A)*6e4,r[9]==="-"&&(f=-f)),g=new Date(Date.UTC(s,a,o,c,u,h,d)),f&&g.setTime(g.getTime()-f),g}function NF(t){return t.toISOString()}Ag.exports=new xF("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:TF,construct:OF,instanceOf:Date,represent:NF})});var Dg=ot((w8,Sg)=>{"use strict";var LF=Vr();function HF(t){return t==="<<"||t===null}Sg.exports=new LF("tag:yaml.org,2002:merge",{kind:"scalar",resolve:HF})});var Ig=ot((b8,Cg)=>{"use strict";var Da;try{Fg=jc,Da=Fg("buffer").Buffer}catch{}var Fg,jF=Vr(),pp=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function UF(t){if(t===null)return!1;var r,s,a=0,o=t.length,c=pp;for(s=0;s<o;s++)if(r=c.indexOf(t.charAt(s)),!(r>64)){if(r<0)return!1;a+=6}return a%8===0}function MF(t){var r,s,a=t.replace(/[\r\n=]/g,""),o=a.length,c=pp,u=0,h=[];for(r=0;r<o;r++)r%4===0&&r&&(h.push(u>>16&255),h.push(u>>8&255),h.push(u&255)),u=u<<6|c.indexOf(a.charAt(r));return s=o%4*6,s===0?(h.push(u>>16&255),h.push(u>>8&255),h.push(u&255)):s===18?(h.push(u>>10&255),h.push(u>>2&255)):s===12&&h.push(u>>4&255),Da?Da.from?Da.from(h):new Da(h):h}function qF(t){var r="",s=0,a,o,c=t.length,u=pp;for(a=0;a<c;a++)a%3===0&&a&&(r+=u[s>>18&63],r+=u[s>>12&63],r+=u[s>>6&63],r+=u[s&63]),s=(s<<8)+t[a];return o=c%3,o===0?(r+=u[s>>18&63],r+=u[s>>12&63],r+=u[s>>6&63],r+=u[s&63]):o===2?(r+=u[s>>10&63],r+=u[s>>4&63],r+=u[s<<2&63],r+=u[64]):o===1&&(r+=u[s>>2&63],r+=u[s<<4&63],r+=u[64],r+=u[64]),r}function VF(t){return Da&&Da.isBuffer(t)}Cg.exports=new jF("tag:yaml.org,2002:binary",{kind:"scalar",resolve:UF,construct:MF,predicate:VF,represent:qF})});var Bg=ot((E8,Pg)=>{"use strict";var KF=Vr(),zF=Object.prototype.hasOwnProperty,GF=Object.prototype.toString;function WF(t){if(t===null)return!0;var r=[],s,a,o,c,u,h=t;for(s=0,a=h.length;s<a;s+=1){if(o=h[s],u=!1,GF.call(o)!=="[object Object]")return!1;for(c in o)if(zF.call(o,c))if(!u)u=!0;else return!1;if(!u)return!1;if(r.indexOf(c)===-1)r.push(c);else return!1}return!0}function YF(t){return t!==null?t:[]}Pg.exports=new KF("tag:yaml.org,2002:omap",{kind:"sequence",resolve:WF,construct:YF})});var $g=ot((A8,Rg)=>{"use strict";var JF=Vr(),XF=Object.prototype.toString;function ZF(t){if(t===null)return!0;var r,s,a,o,c,u=t;for(c=new Array(u.length),r=0,s=u.length;r<s;r+=1){if(a=u[r],XF.call(a)!=="[object Object]"||(o=Object.keys(a),o.length!==1))return!1;c[r]=[o[0],a[o[0]]]}return!0}function QF(t){if(t===null)return[];var r,s,a,o,c,u=t;for(c=new Array(u.length),r=0,s=u.length;r<s;r+=1)a=u[r],o=Object.keys(a),c[r]=[o[0],a[o[0]]];return c}Rg.exports=new JF("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:ZF,construct:QF})});var xg=ot((y8,kg)=>{"use strict";var e5=Vr(),t5=Object.prototype.hasOwnProperty;function r5(t){if(t===null)return!0;var r,s=t;for(r in s)if(t5.call(s,r)&&s[r]!==null)return!1;return!0}function n5(t){return t!==null?t:{}}kg.exports=new e5("tag:yaml.org,2002:set",{kind:"mapping",resolve:r5,construct:n5})});var wu=ot((S8,Tg)=>{"use strict";var i5=Sa();Tg.exports=new i5({include:[hp()],implicit:[yg(),Dg()],explicit:[Ig(),Bg(),$g(),xg()]})});var Ng=ot((D8,Og)=>{"use strict";var s5=Vr();function a5(){return!0}function u5(){}function o5(){return""}function c5(t){return typeof t>"u"}Og.exports=new s5("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:a5,construct:u5,predicate:c5,represent:o5})});var Hg=ot((F8,Lg)=>{"use strict";var l5=Vr();function f5(t){if(t===null||t.length===0)return!1;var r=t,s=/\/([gim]*)$/.exec(t),a="";return!(r[0]==="/"&&(s&&(a=s[1]),a.length>3||r[r.length-a.length-1]!=="/"))}function h5(t){var r=t,s=/\/([gim]*)$/.exec(t),a="";return r[0]==="/"&&(s&&(a=s[1]),r=r.slice(1,r.length-a.length-1)),new RegExp(r,a)}function p5(t){var r="/"+t.source+"/";return t.global&&(r+="g"),t.multiline&&(r+="m"),t.ignoreCase&&(r+="i"),r}function d5(t){return Object.prototype.toString.call(t)==="[object RegExp]"}Lg.exports=new l5("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:f5,construct:h5,predicate:d5,represent:p5})});var Mg=ot((C8,Ug)=>{"use strict";var vl;try{jg=jc,vl=jg("esprima")}catch{typeof window<"u"&&(vl=window.esprima)}var jg,g5=Vr();function v5(t){if(t===null)return!1;try{var r="("+t+")",s=vl.parse(r,{range:!0});return!(s.type!=="Program"||s.body.length!==1||s.body[0].type!=="ExpressionStatement"||s.body[0].expression.type!=="ArrowFunctionExpression"&&s.body[0].expression.type!=="FunctionExpression")}catch{return!1}}function m5(t){var r="("+t+")",s=vl.parse(r,{range:!0}),a=[],o;if(s.type!=="Program"||s.body.length!==1||s.body[0].type!=="ExpressionStatement"||s.body[0].expression.type!=="ArrowFunctionExpression"&&s.body[0].expression.type!=="FunctionExpression")throw new Error("Failed to resolve function");return s.body[0].expression.params.forEach(function(c){a.push(c.name)}),o=s.body[0].expression.body.range,s.body[0].expression.body.type==="BlockStatement"?new Function(a,r.slice(o[0]+1,o[1]-1)):new Function(a,"return "+r.slice(o[0],o[1]))}function w5(t){return t.toString()}function b5(t){return Object.prototype.toString.call(t)==="[object Function]"}Ug.exports=new g5("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:v5,construct:m5,predicate:b5,represent:w5})});var _o=ot((P8,Vg)=>{"use strict";var qg=Sa();Vg.exports=qg.DEFAULT=new qg({include:[wu()],explicit:[Ng(),Hg(),Mg()]})});var cv=ot((B8,Eo)=>{"use strict";var As=ya(),Xg=vu(),_5=X1(),Zg=wu(),E5=_o(),Gs=Object.prototype.hasOwnProperty,ml=1,Qg=2,ev=3,wl=4,dp=1,A5=2,Kg=3,y5=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,S5=/[\x85\u2028\u2029]/,D5=/[,\[\]\{\}]/,tv=/^(?:!|!!|![a-z\-]+!)$/i,rv=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function zg(t){return Object.prototype.toString.call(t)}function Gi(t){return t===10||t===13}function Ca(t){return t===9||t===32}function Un(t){return t===9||t===32||t===10||t===13}function bu(t){return t===44||t===91||t===93||t===123||t===125}function F5(t){var r;return 48<=t&&t<=57?t-48:(r=t|32,97<=r&&r<=102?r-97+10:-1)}function C5(t){return t===120?2:t===117?4:t===85?8:0}function I5(t){return 48<=t&&t<=57?t-48:-1}function Gg(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function P5(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var nv=new Array(256),iv=new Array(256);for(Fa=0;Fa<256;Fa++)nv[Fa]=Gg(Fa)?1:0,iv[Fa]=Gg(Fa);var Fa;function B5(t,r){this.input=t,this.filename=r.filename||null,this.schema=r.schema||E5,this.onWarning=r.onWarning||null,this.legacy=r.legacy||!1,this.json=r.json||!1,this.listener=r.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function sv(t,r){return new Xg(r,new _5(t.filename,t.input,t.position,t.line,t.position-t.lineStart))}function it(t,r){throw sv(t,r)}function bl(t,r){t.onWarning&&t.onWarning.call(null,sv(t,r))}var Wg={YAML:function(r,s,a){var o,c,u;r.version!==null&&it(r,"duplication of %YAML directive"),a.length!==1&&it(r,"YAML directive accepts exactly one argument"),o=/^([0-9]+)\.([0-9]+)$/.exec(a[0]),o===null&&it(r,"ill-formed argument of the YAML directive"),c=parseInt(o[1],10),u=parseInt(o[2],10),c!==1&&it(r,"unacceptable YAML version of the document"),r.version=a[0],r.checkLineBreaks=u<2,u!==1&&u!==2&&bl(r,"unsupported YAML version of the document")},TAG:function(r,s,a){var o,c;a.length!==2&&it(r,"TAG directive accepts exactly two arguments"),o=a[0],c=a[1],tv.test(o)||it(r,"ill-formed tag handle (first argument) of the TAG directive"),Gs.call(r.tagMap,o)&&it(r,'there is a previously declared suffix for "'+o+'" tag handle'),rv.test(c)||it(r,"ill-formed tag prefix (second argument) of the TAG directive"),r.tagMap[o]=c}};function zs(t,r,s,a){var o,c,u,h;if(r<s){if(h=t.input.slice(r,s),a)for(o=0,c=h.length;o<c;o+=1)u=h.charCodeAt(o),u===9||32<=u&&u<=1114111||it(t,"expected valid JSON character");else y5.test(h)&&it(t,"the stream contains non-printable characters");t.result+=h}}function Yg(t,r,s,a){var o,c,u,h;for(As.isObject(s)||it(t,"cannot merge mappings; the provided source object is unacceptable"),o=Object.keys(s),u=0,h=o.length;u<h;u+=1)c=o[u],Gs.call(r,c)||(r[c]=s[c],a[c]=!0)}function _u(t,r,s,a,o,c,u,h){var d,f;if(Array.isArray(o))for(o=Array.prototype.slice.call(o),d=0,f=o.length;d<f;d+=1)Array.isArray(o[d])&&it(t,"nested arrays are not supported inside keys"),typeof o=="object"&&zg(o[d])==="[object Object]"&&(o[d]="[object Object]");if(typeof o=="object"&&zg(o)==="[object Object]"&&(o="[object Object]"),o=String(o),r===null&&(r={}),a==="tag:yaml.org,2002:merge")if(Array.isArray(c))for(d=0,f=c.length;d<f;d+=1)Yg(t,r,c[d],s);else Yg(t,r,c,s);else!t.json&&!Gs.call(s,o)&&Gs.call(r,o)&&(t.line=u||t.line,t.position=h||t.position,it(t,"duplicated mapping key")),r[o]=c,delete s[o];return r}function gp(t){var r;r=t.input.charCodeAt(t.position),r===10?t.position++:r===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):it(t,"a line break is expected"),t.line+=1,t.lineStart=t.position}function Tr(t,r,s){for(var a=0,o=t.input.charCodeAt(t.position);o!==0;){for(;Ca(o);)o=t.input.charCodeAt(++t.position);if(r&&o===35)do o=t.input.charCodeAt(++t.position);while(o!==10&&o!==13&&o!==0);if(Gi(o))for(gp(t),o=t.input.charCodeAt(t.position),a++,t.lineIndent=0;o===32;)t.lineIndent++,o=t.input.charCodeAt(++t.position);else break}return s!==-1&&a!==0&&t.lineIndent<s&&bl(t,"deficient indentation"),a}function _l(t){var r=t.position,s;return s=t.input.charCodeAt(r),!!((s===45||s===46)&&s===t.input.charCodeAt(r+1)&&s===t.input.charCodeAt(r+2)&&(r+=3,s=t.input.charCodeAt(r),s===0||Un(s)))}function vp(t,r){r===1?t.result+=" ":r>1&&(t.result+=As.repeat(`
`,r-1))}function R5(t,r,s){var a,o,c,u,h,d,f,b,A=t.kind,g=t.result,v;if(v=t.input.charCodeAt(t.position),Un(v)||bu(v)||v===35||v===38||v===42||v===33||v===124||v===62||v===39||v===34||v===37||v===64||v===96||(v===63||v===45)&&(o=t.input.charCodeAt(t.position+1),Un(o)||s&&bu(o)))return!1;for(t.kind="scalar",t.result="",c=u=t.position,h=!1;v!==0;){if(v===58){if(o=t.input.charCodeAt(t.position+1),Un(o)||s&&bu(o))break}else if(v===35){if(a=t.input.charCodeAt(t.position-1),Un(a))break}else{if(t.position===t.lineStart&&_l(t)||s&&bu(v))break;if(Gi(v))if(d=t.line,f=t.lineStart,b=t.lineIndent,Tr(t,!1,-1),t.lineIndent>=r){h=!0,v=t.input.charCodeAt(t.position);continue}else{t.position=u,t.line=d,t.lineStart=f,t.lineIndent=b;break}}h&&(zs(t,c,u,!1),vp(t,t.line-d),c=u=t.position,h=!1),Ca(v)||(u=t.position+1),v=t.input.charCodeAt(++t.position)}return zs(t,c,u,!1),t.result?!0:(t.kind=A,t.result=g,!1)}function $5(t,r){var s,a,o;if(s=t.input.charCodeAt(t.position),s!==39)return!1;for(t.kind="scalar",t.result="",t.position++,a=o=t.position;(s=t.input.charCodeAt(t.position))!==0;)if(s===39)if(zs(t,a,t.position,!0),s=t.input.charCodeAt(++t.position),s===39)a=t.position,t.position++,o=t.position;else return!0;else Gi(s)?(zs(t,a,o,!0),vp(t,Tr(t,!1,r)),a=o=t.position):t.position===t.lineStart&&_l(t)?it(t,"unexpected end of the document within a single quoted scalar"):(t.position++,o=t.position);it(t,"unexpected end of the stream within a single quoted scalar")}function k5(t,r){var s,a,o,c,u,h;if(h=t.input.charCodeAt(t.position),h!==34)return!1;for(t.kind="scalar",t.result="",t.position++,s=a=t.position;(h=t.input.charCodeAt(t.position))!==0;){if(h===34)return zs(t,s,t.position,!0),t.position++,!0;if(h===92){if(zs(t,s,t.position,!0),h=t.input.charCodeAt(++t.position),Gi(h))Tr(t,!1,r);else if(h<256&&nv[h])t.result+=iv[h],t.position++;else if((u=C5(h))>0){for(o=u,c=0;o>0;o--)h=t.input.charCodeAt(++t.position),(u=F5(h))>=0?c=(c<<4)+u:it(t,"expected hexadecimal character");t.result+=P5(c),t.position++}else it(t,"unknown escape sequence");s=a=t.position}else Gi(h)?(zs(t,s,a,!0),vp(t,Tr(t,!1,r)),s=a=t.position):t.position===t.lineStart&&_l(t)?it(t,"unexpected end of the document within a double quoted scalar"):(t.position++,a=t.position)}it(t,"unexpected end of the stream within a double quoted scalar")}function x5(t,r){var s=!0,a,o=t.tag,c,u=t.anchor,h,d,f,b,A,g={},v,y,m,D;if(D=t.input.charCodeAt(t.position),D===91)d=93,A=!1,c=[];else if(D===123)d=125,A=!0,c={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=c),D=t.input.charCodeAt(++t.position);D!==0;){if(Tr(t,!0,r),D=t.input.charCodeAt(t.position),D===d)return t.position++,t.tag=o,t.anchor=u,t.kind=A?"mapping":"sequence",t.result=c,!0;s||it(t,"missed comma between flow collection entries"),y=v=m=null,f=b=!1,D===63&&(h=t.input.charCodeAt(t.position+1),Un(h)&&(f=b=!0,t.position++,Tr(t,!0,r))),a=t.line,Eu(t,r,ml,!1,!0),y=t.tag,v=t.result,Tr(t,!0,r),D=t.input.charCodeAt(t.position),(b||t.line===a)&&D===58&&(f=!0,D=t.input.charCodeAt(++t.position),Tr(t,!0,r),Eu(t,r,ml,!1,!0),m=t.result),A?_u(t,c,g,y,v,m):f?c.push(_u(t,null,g,y,v,m)):c.push(v),Tr(t,!0,r),D=t.input.charCodeAt(t.position),D===44?(s=!0,D=t.input.charCodeAt(++t.position)):s=!1}it(t,"unexpected end of the stream within a flow collection")}function T5(t,r){var s,a,o=dp,c=!1,u=!1,h=r,d=0,f=!1,b,A;if(A=t.input.charCodeAt(t.position),A===124)a=!1;else if(A===62)a=!0;else return!1;for(t.kind="scalar",t.result="";A!==0;)if(A=t.input.charCodeAt(++t.position),A===43||A===45)dp===o?o=A===43?Kg:A5:it(t,"repeat of a chomping mode identifier");else if((b=I5(A))>=0)b===0?it(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):u?it(t,"repeat of an indentation width identifier"):(h=r+b-1,u=!0);else break;if(Ca(A)){do A=t.input.charCodeAt(++t.position);while(Ca(A));if(A===35)do A=t.input.charCodeAt(++t.position);while(!Gi(A)&&A!==0)}for(;A!==0;){for(gp(t),t.lineIndent=0,A=t.input.charCodeAt(t.position);(!u||t.lineIndent<h)&&A===32;)t.lineIndent++,A=t.input.charCodeAt(++t.position);if(!u&&t.lineIndent>h&&(h=t.lineIndent),Gi(A)){d++;continue}if(t.lineIndent<h){o===Kg?t.result+=As.repeat(`
`,c?1+d:d):o===dp&&c&&(t.result+=`
`);break}for(a?Ca(A)?(f=!0,t.result+=As.repeat(`
`,c?1+d:d)):f?(f=!1,t.result+=As.repeat(`
`,d+1)):d===0?c&&(t.result+=" "):t.result+=As.repeat(`
`,d):t.result+=As.repeat(`
`,c?1+d:d),c=!0,u=!0,d=0,s=t.position;!Gi(A)&&A!==0;)A=t.input.charCodeAt(++t.position);zs(t,s,t.position,!1)}return!0}function Jg(t,r){var s,a=t.tag,o=t.anchor,c=[],u,h=!1,d;for(t.anchor!==null&&(t.anchorMap[t.anchor]=c),d=t.input.charCodeAt(t.position);d!==0&&!(d!==45||(u=t.input.charCodeAt(t.position+1),!Un(u)));){if(h=!0,t.position++,Tr(t,!0,-1)&&t.lineIndent<=r){c.push(null),d=t.input.charCodeAt(t.position);continue}if(s=t.line,Eu(t,r,ev,!1,!0),c.push(t.result),Tr(t,!0,-1),d=t.input.charCodeAt(t.position),(t.line===s||t.lineIndent>r)&&d!==0)it(t,"bad indentation of a sequence entry");else if(t.lineIndent<r)break}return h?(t.tag=a,t.anchor=o,t.kind="sequence",t.result=c,!0):!1}function O5(t,r,s){var a,o,c,u,h=t.tag,d=t.anchor,f={},b={},A=null,g=null,v=null,y=!1,m=!1,D;for(t.anchor!==null&&(t.anchorMap[t.anchor]=f),D=t.input.charCodeAt(t.position);D!==0;){if(a=t.input.charCodeAt(t.position+1),c=t.line,u=t.position,(D===63||D===58)&&Un(a))D===63?(y&&(_u(t,f,b,A,g,null),A=g=v=null),m=!0,y=!0,o=!0):y?(y=!1,o=!0):it(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,D=a;else if(Eu(t,s,Qg,!1,!0))if(t.line===c){for(D=t.input.charCodeAt(t.position);Ca(D);)D=t.input.charCodeAt(++t.position);if(D===58)D=t.input.charCodeAt(++t.position),Un(D)||it(t,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(_u(t,f,b,A,g,null),A=g=v=null),m=!0,y=!1,o=!1,A=t.tag,g=t.result;else if(m)it(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=h,t.anchor=d,!0}else if(m)it(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=h,t.anchor=d,!0;else break;if((t.line===c||t.lineIndent>r)&&(Eu(t,r,wl,!0,o)&&(y?g=t.result:v=t.result),y||(_u(t,f,b,A,g,v,c,u),A=g=v=null),Tr(t,!0,-1),D=t.input.charCodeAt(t.position)),t.lineIndent>r&&D!==0)it(t,"bad indentation of a mapping entry");else if(t.lineIndent<r)break}return y&&_u(t,f,b,A,g,null),m&&(t.tag=h,t.anchor=d,t.kind="mapping",t.result=f),m}function N5(t){var r,s=!1,a=!1,o,c,u;if(u=t.input.charCodeAt(t.position),u!==33)return!1;if(t.tag!==null&&it(t,"duplication of a tag property"),u=t.input.charCodeAt(++t.position),u===60?(s=!0,u=t.input.charCodeAt(++t.position)):u===33?(a=!0,o="!!",u=t.input.charCodeAt(++t.position)):o="!",r=t.position,s){do u=t.input.charCodeAt(++t.position);while(u!==0&&u!==62);t.position<t.length?(c=t.input.slice(r,t.position),u=t.input.charCodeAt(++t.position)):it(t,"unexpected end of the stream within a verbatim tag")}else{for(;u!==0&&!Un(u);)u===33&&(a?it(t,"tag suffix cannot contain exclamation marks"):(o=t.input.slice(r-1,t.position+1),tv.test(o)||it(t,"named tag handle cannot contain such characters"),a=!0,r=t.position+1)),u=t.input.charCodeAt(++t.position);c=t.input.slice(r,t.position),D5.test(c)&&it(t,"tag suffix cannot contain flow indicator characters")}return c&&!rv.test(c)&&it(t,"tag name cannot contain such characters: "+c),s?t.tag=c:Gs.call(t.tagMap,o)?t.tag=t.tagMap[o]+c:o==="!"?t.tag="!"+c:o==="!!"?t.tag="tag:yaml.org,2002:"+c:it(t,'undeclared tag handle "'+o+'"'),!0}function L5(t){var r,s;if(s=t.input.charCodeAt(t.position),s!==38)return!1;for(t.anchor!==null&&it(t,"duplication of an anchor property"),s=t.input.charCodeAt(++t.position),r=t.position;s!==0&&!Un(s)&&!bu(s);)s=t.input.charCodeAt(++t.position);return t.position===r&&it(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(r,t.position),!0}function H5(t){var r,s,a;if(a=t.input.charCodeAt(t.position),a!==42)return!1;for(a=t.input.charCodeAt(++t.position),r=t.position;a!==0&&!Un(a)&&!bu(a);)a=t.input.charCodeAt(++t.position);return t.position===r&&it(t,"name of an alias node must contain at least one character"),s=t.input.slice(r,t.position),Gs.call(t.anchorMap,s)||it(t,'unidentified alias "'+s+'"'),t.result=t.anchorMap[s],Tr(t,!0,-1),!0}function Eu(t,r,s,a,o){var c,u,h,d=1,f=!1,b=!1,A,g,v,y,m;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,c=u=h=wl===s||ev===s,a&&Tr(t,!0,-1)&&(f=!0,t.lineIndent>r?d=1:t.lineIndent===r?d=0:t.lineIndent<r&&(d=-1)),d===1)for(;N5(t)||L5(t);)Tr(t,!0,-1)?(f=!0,h=c,t.lineIndent>r?d=1:t.lineIndent===r?d=0:t.lineIndent<r&&(d=-1)):h=!1;if(h&&(h=f||o),(d===1||wl===s)&&(ml===s||Qg===s?y=r:y=r+1,m=t.position-t.lineStart,d===1?h&&(Jg(t,m)||O5(t,m,y))||x5(t,y)?b=!0:(u&&T5(t,y)||$5(t,y)||k5(t,y)?b=!0:H5(t)?(b=!0,(t.tag!==null||t.anchor!==null)&&it(t,"alias node should not have any properties")):R5(t,y,ml===s)&&(b=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):d===0&&(b=h&&Jg(t,m))),t.tag!==null&&t.tag!=="!")if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&it(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),A=0,g=t.implicitTypes.length;A<g;A+=1)if(v=t.implicitTypes[A],v.resolve(t.result)){t.result=v.construct(t.result),t.tag=v.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else Gs.call(t.typeMap[t.kind||"fallback"],t.tag)?(v=t.typeMap[t.kind||"fallback"][t.tag],t.result!==null&&v.kind!==t.kind&&it(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+v.kind+'", not "'+t.kind+'"'),v.resolve(t.result)?(t.result=v.construct(t.result),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):it(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")):it(t,"unknown tag !<"+t.tag+">");return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||b}function j5(t){var r=t.position,s,a,o,c=!1,u;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap={},t.anchorMap={};(u=t.input.charCodeAt(t.position))!==0&&(Tr(t,!0,-1),u=t.input.charCodeAt(t.position),!(t.lineIndent>0||u!==37));){for(c=!0,u=t.input.charCodeAt(++t.position),s=t.position;u!==0&&!Un(u);)u=t.input.charCodeAt(++t.position);for(a=t.input.slice(s,t.position),o=[],a.length<1&&it(t,"directive name must not be less than one character in length");u!==0;){for(;Ca(u);)u=t.input.charCodeAt(++t.position);if(u===35){do u=t.input.charCodeAt(++t.position);while(u!==0&&!Gi(u));break}if(Gi(u))break;for(s=t.position;u!==0&&!Un(u);)u=t.input.charCodeAt(++t.position);o.push(t.input.slice(s,t.position))}u!==0&&gp(t),Gs.call(Wg,a)?Wg[a](t,a,o):bl(t,'unknown document directive "'+a+'"')}if(Tr(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Tr(t,!0,-1)):c&&it(t,"directives end mark is expected"),Eu(t,t.lineIndent-1,wl,!1,!0),Tr(t,!0,-1),t.checkLineBreaks&&S5.test(t.input.slice(r,t.position))&&bl(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&_l(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Tr(t,!0,-1));return}if(t.position<t.length-1)it(t,"end of the stream or a document separator is expected");else return}function av(t,r){t=String(t),r=r||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var s=new B5(t,r),a=t.indexOf("\0");for(a!==-1&&(s.position=a,it(s,"null byte is not allowed in input")),s.input+="\0";s.input.charCodeAt(s.position)===32;)s.lineIndent+=1,s.position+=1;for(;s.position<s.length-1;)j5(s);return s.documents}function uv(t,r,s){r!==null&&typeof r=="object"&&typeof s>"u"&&(s=r,r=null);var a=av(t,s);if(typeof r!="function")return a;for(var o=0,c=a.length;o<c;o+=1)r(a[o])}function ov(t,r){var s=av(t,r);if(s.length!==0){if(s.length===1)return s[0];throw new Xg("expected a single document in the stream, but found more")}}function U5(t,r,s){return typeof r=="object"&&r!==null&&typeof s>"u"&&(s=r,r=null),uv(t,r,As.extend({schema:Zg},s))}function M5(t,r){return ov(t,As.extend({schema:Zg},r))}Eo.exports.loadAll=uv;Eo.exports.load=ov;Eo.exports.safeLoadAll=U5;Eo.exports.safeLoad=M5});var $v=ot((R8,_p)=>{"use strict";var yo=ya(),So=vu(),q5=_o(),V5=wu(),mv=Object.prototype.toString,wv=Object.prototype.hasOwnProperty,K5=9,Ao=10,z5=13,G5=32,W5=33,Y5=34,bv=35,J5=37,X5=38,Z5=39,Q5=42,_v=44,e4=45,Ev=58,t4=61,r4=62,n4=63,i4=64,Av=91,yv=93,s4=96,Sv=123,a4=124,Dv=125,vn={};vn[0]="\\0";vn[7]="\\a";vn[8]="\\b";vn[9]="\\t";vn[10]="\\n";vn[11]="\\v";vn[12]="\\f";vn[13]="\\r";vn[27]="\\e";vn[34]='\\"';vn[92]="\\\\";vn[133]="\\N";vn[160]="\\_";vn[8232]="\\L";vn[8233]="\\P";var u4=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function o4(t,r){var s,a,o,c,u,h,d;if(r===null)return{};for(s={},a=Object.keys(r),o=0,c=a.length;o<c;o+=1)u=a[o],h=String(r[u]),u.slice(0,2)==="!!"&&(u="tag:yaml.org,2002:"+u.slice(2)),d=t.compiledTypeMap.fallback[u],d&&wv.call(d.styleAliases,h)&&(h=d.styleAliases[h]),s[u]=h;return s}function lv(t){var r,s,a;if(r=t.toString(16).toUpperCase(),t<=255)s="x",a=2;else if(t<=65535)s="u",a=4;else if(t<=4294967295)s="U",a=8;else throw new So("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+s+yo.repeat("0",a-r.length)+r}function c4(t){this.schema=t.schema||q5,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=yo.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=o4(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function fv(t,r){for(var s=yo.repeat(" ",r),a=0,o=-1,c="",u,h=t.length;a<h;)o=t.indexOf(`
`,a),o===-1?(u=t.slice(a),a=h):(u=t.slice(a,o+1),a=o+1),u.length&&u!==`
`&&(c+=s),c+=u;return c}function mp(t,r){return`
`+yo.repeat(" ",t.indent*r)}function l4(t,r){var s,a,o;for(s=0,a=t.implicitTypes.length;s<a;s+=1)if(o=t.implicitTypes[s],o.resolve(r))return!0;return!1}function bp(t){return t===G5||t===K5}function Au(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==65279||65536<=t&&t<=1114111}function f4(t){return Au(t)&&!bp(t)&&t!==65279&&t!==z5&&t!==Ao}function hv(t,r){return Au(t)&&t!==65279&&t!==_v&&t!==Av&&t!==yv&&t!==Sv&&t!==Dv&&t!==Ev&&(t!==bv||r&&f4(r))}function h4(t){return Au(t)&&t!==65279&&!bp(t)&&t!==e4&&t!==n4&&t!==Ev&&t!==_v&&t!==Av&&t!==yv&&t!==Sv&&t!==Dv&&t!==bv&&t!==X5&&t!==Q5&&t!==W5&&t!==a4&&t!==t4&&t!==r4&&t!==Z5&&t!==Y5&&t!==J5&&t!==i4&&t!==s4}function Fv(t){var r=/^\n* /;return r.test(t)}var Cv=1,Iv=2,Pv=3,Bv=4,El=5;function p4(t,r,s,a,o){var c,u,h,d=!1,f=!1,b=a!==-1,A=-1,g=h4(t.charCodeAt(0))&&!bp(t.charCodeAt(t.length-1));if(r)for(c=0;c<t.length;c++){if(u=t.charCodeAt(c),!Au(u))return El;h=c>0?t.charCodeAt(c-1):null,g=g&&hv(u,h)}else{for(c=0;c<t.length;c++){if(u=t.charCodeAt(c),u===Ao)d=!0,b&&(f=f||c-A-1>a&&t[A+1]!==" ",A=c);else if(!Au(u))return El;h=c>0?t.charCodeAt(c-1):null,g=g&&hv(u,h)}f=f||b&&c-A-1>a&&t[A+1]!==" "}return!d&&!f?g&&!o(t)?Cv:Iv:s>9&&Fv(t)?El:f?Bv:Pv}function d4(t,r,s,a){t.dump=(function(){if(r.length===0)return"''";if(!t.noCompatMode&&u4.indexOf(r)!==-1)return"'"+r+"'";var o=t.indent*Math.max(1,s),c=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),u=a||t.flowLevel>-1&&s>=t.flowLevel;function h(d){return l4(t,d)}switch(p4(r,u,t.indent,c,h)){case Cv:return r;case Iv:return"'"+r.replace(/'/g,"''")+"'";case Pv:return"|"+pv(r,t.indent)+dv(fv(r,o));case Bv:return">"+pv(r,t.indent)+dv(fv(g4(r,c),o));case El:return'"'+v4(r,c)+'"';default:throw new So("impossible error: invalid scalar style")}})()}function pv(t,r){var s=Fv(t)?String(r):"",a=t[t.length-1]===`
`,o=a&&(t[t.length-2]===`
`||t===`
`),c=o?"+":a?"":"-";return s+c+`
`}function dv(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function g4(t,r){for(var s=/(\n+)([^\n]*)/g,a=(function(){var f=t.indexOf(`
`);return f=f!==-1?f:t.length,s.lastIndex=f,gv(t.slice(0,f),r)})(),o=t[0]===`
`||t[0]===" ",c,u;u=s.exec(t);){var h=u[1],d=u[2];c=d[0]===" ",a+=h+(!o&&!c&&d!==""?`
`:"")+gv(d,r),o=c}return a}function gv(t,r){if(t===""||t[0]===" ")return t;for(var s=/ [^ ]/g,a,o=0,c,u=0,h=0,d="";a=s.exec(t);)h=a.index,h-o>r&&(c=u>o?u:h,d+=`
`+t.slice(o,c),o=c+1),u=h;return d+=`
`,t.length-o>r&&u>o?d+=t.slice(o,u)+`
`+t.slice(u+1):d+=t.slice(o),d.slice(1)}function v4(t){for(var r="",s,a,o,c=0;c<t.length;c++){if(s=t.charCodeAt(c),s>=55296&&s<=56319&&(a=t.charCodeAt(c+1),a>=56320&&a<=57343)){r+=lv((s-55296)*1024+a-56320+65536),c++;continue}o=vn[s],r+=!o&&Au(s)?t[c]:o||lv(s)}return r}function m4(t,r,s){var a="",o=t.tag,c,u;for(c=0,u=s.length;c<u;c+=1)Ia(t,r,s[c],!1,!1)&&(c!==0&&(a+=","+(t.condenseFlow?"":" ")),a+=t.dump);t.tag=o,t.dump="["+a+"]"}function w4(t,r,s,a){var o="",c=t.tag,u,h;for(u=0,h=s.length;u<h;u+=1)Ia(t,r+1,s[u],!0,!0)&&((!a||u!==0)&&(o+=mp(t,r)),t.dump&&Ao===t.dump.charCodeAt(0)?o+="-":o+="- ",o+=t.dump);t.tag=c,t.dump=o||"[]"}function b4(t,r,s){var a="",o=t.tag,c=Object.keys(s),u,h,d,f,b;for(u=0,h=c.length;u<h;u+=1)b="",u!==0&&(b+=", "),t.condenseFlow&&(b+='"'),d=c[u],f=s[d],Ia(t,r,d,!1,!1)&&(t.dump.length>1024&&(b+="? "),b+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Ia(t,r,f,!1,!1)&&(b+=t.dump,a+=b));t.tag=o,t.dump="{"+a+"}"}function _4(t,r,s,a){var o="",c=t.tag,u=Object.keys(s),h,d,f,b,A,g;if(t.sortKeys===!0)u.sort();else if(typeof t.sortKeys=="function")u.sort(t.sortKeys);else if(t.sortKeys)throw new So("sortKeys must be a boolean or a function");for(h=0,d=u.length;h<d;h+=1)g="",(!a||h!==0)&&(g+=mp(t,r)),f=u[h],b=s[f],Ia(t,r+1,f,!0,!0,!0)&&(A=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,A&&(t.dump&&Ao===t.dump.charCodeAt(0)?g+="?":g+="? "),g+=t.dump,A&&(g+=mp(t,r)),Ia(t,r+1,b,!0,A)&&(t.dump&&Ao===t.dump.charCodeAt(0)?g+=":":g+=": ",g+=t.dump,o+=g));t.tag=c,t.dump=o||"{}"}function vv(t,r,s){var a,o,c,u,h,d;for(o=s?t.explicitTypes:t.implicitTypes,c=0,u=o.length;c<u;c+=1)if(h=o[c],(h.instanceOf||h.predicate)&&(!h.instanceOf||typeof r=="object"&&r instanceof h.instanceOf)&&(!h.predicate||h.predicate(r))){if(t.tag=s?h.tag:"?",h.represent){if(d=t.styleMap[h.tag]||h.defaultStyle,mv.call(h.represent)==="[object Function]")a=h.represent(r,d);else if(wv.call(h.represent,d))a=h.represent[d](r,d);else throw new So("!<"+h.tag+'> tag resolver accepts not "'+d+'" style');t.dump=a}return!0}return!1}function Ia(t,r,s,a,o,c){t.tag=null,t.dump=s,vv(t,s,!1)||vv(t,s,!0);var u=mv.call(t.dump);a&&(a=t.flowLevel<0||t.flowLevel>r);var h=u==="[object Object]"||u==="[object Array]",d,f;if(h&&(d=t.duplicates.indexOf(s),f=d!==-1),(t.tag!==null&&t.tag!=="?"||f||t.indent!==2&&r>0)&&(o=!1),f&&t.usedDuplicates[d])t.dump="*ref_"+d;else{if(h&&f&&!t.usedDuplicates[d]&&(t.usedDuplicates[d]=!0),u==="[object Object]")a&&Object.keys(t.dump).length!==0?(_4(t,r,t.dump,o),f&&(t.dump="&ref_"+d+t.dump)):(b4(t,r,t.dump),f&&(t.dump="&ref_"+d+" "+t.dump));else if(u==="[object Array]"){var b=t.noArrayIndent&&r>0?r-1:r;a&&t.dump.length!==0?(w4(t,b,t.dump,o),f&&(t.dump="&ref_"+d+t.dump)):(m4(t,b,t.dump),f&&(t.dump="&ref_"+d+" "+t.dump))}else if(u==="[object String]")t.tag!=="?"&&d4(t,t.dump,r,c);else{if(t.skipInvalid)return!1;throw new So("unacceptable kind of an object to dump "+u)}t.tag!==null&&t.tag!=="?"&&(t.dump="!<"+t.tag+"> "+t.dump)}return!0}function E4(t,r){var s=[],a=[],o,c;for(wp(t,s,a),o=0,c=a.length;o<c;o+=1)r.duplicates.push(s[a[o]]);r.usedDuplicates=new Array(c)}function wp(t,r,s){var a,o,c;if(t!==null&&typeof t=="object")if(o=r.indexOf(t),o!==-1)s.indexOf(o)===-1&&s.push(o);else if(r.push(t),Array.isArray(t))for(o=0,c=t.length;o<c;o+=1)wp(t[o],r,s);else for(a=Object.keys(t),o=0,c=a.length;o<c;o+=1)wp(t[a[o]],r,s)}function Rv(t,r){r=r||{};var s=new c4(r);return s.noRefs||E4(t,s),Ia(s,0,t,!0,!0)?s.dump+`
`:""}function A4(t,r){return Rv(t,yo.extend({schema:V5},r))}_p.exports.dump=Rv;_p.exports.safeDump=A4});var xv=ot(($8,_r)=>{"use strict";var Al=cv(),kv=$v();function yl(t){return function(){throw new Error("Function "+t+" is deprecated and cannot be used.")}}_r.exports.Type=Vr();_r.exports.Schema=Sa();_r.exports.FAILSAFE_SCHEMA=gl();_r.exports.JSON_SCHEMA=fp();_r.exports.CORE_SCHEMA=hp();_r.exports.DEFAULT_SAFE_SCHEMA=wu();_r.exports.DEFAULT_FULL_SCHEMA=_o();_r.exports.load=Al.load;_r.exports.loadAll=Al.loadAll;_r.exports.safeLoad=Al.safeLoad;_r.exports.safeLoadAll=Al.safeLoadAll;_r.exports.dump=kv.dump;_r.exports.safeDump=kv.safeDump;_r.exports.YAMLException=vu();_r.exports.MINIMAL_SCHEMA=gl();_r.exports.SAFE_SCHEMA=wu();_r.exports.DEFAULT_SCHEMA=_o();_r.exports.scan=yl("scan");_r.exports.parse=yl("parse");_r.exports.compose=yl("compose");_r.exports.addConstructor=yl("addConstructor")});var Ov=ot((k8,Tv)=>{"use strict";var y4=xv();Tv.exports=y4});var Lv=ot((x8,Nv)=>{"use strict";var Sl=Ov();Nv.exports={safeLoad:Sl.safeLoad,load:Sl.load,safeDump:Sl.safeDump,dump:Sl.dump}});var qv=ot((yu,Fo)=>{(function(){var t,r="4.17.21",s=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",c="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",h=500,d="__lodash_placeholder__",f=1,b=2,A=4,g=1,v=2,y=1,m=2,D=4,S=8,F=16,$=32,k=64,O=128,z=256,H=512,P=30,R="...",N=800,x=16,V=1,Y=2,G=3,W=1/0,Z=9007199254740991,ae=17976931348623157e292,He=NaN,Ie=4294967295,J=Ie-1,oe=Ie>>>1,be=[["ary",O],["bind",y],["bindKey",m],["curry",S],["curryRight",F],["flip",H],["partial",$],["partialRight",k],["rearg",z]],Fe="[object Arguments]",Pe="[object Array]",_t="[object AsyncFunction]",dt="[object Boolean]",ye="[object Date]",Je="[object DOMException]",Ye="[object Error]",Xe="[object Function]",De="[object GeneratorFunction]",ke="[object Map]",fe="[object Number]",gt="[object Null]",Te="[object Object]",xe="[object Promise]",ar="[object Proxy]",_e="[object RegExp]",qt="[object Set]",Oe="[object String]",Ot="[object Symbol]",ur="[object Undefined]",Kr="[object WeakMap]",yt="[object WeakSet]",qe="[object ArrayBuffer]",Re="[object DataView]",or="[object Float32Array]",kt="[object Float64Array]",Ge="[object Int8Array]",cr="[object Int16Array]",zt="[object Int32Array]",pe="[object Uint8Array]",Er="[object Uint8ClampedArray]",St="[object Uint16Array]",Ft="[object Uint32Array]",Vn=/\b__p \+= '';/g,Ir=/\b(__p \+=) '' \+/g,Fn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ds=/&(?:amp|lt|gt|quot|#39);/g,Xi=/[&<>"']/g,vi=RegExp(Ds.source),jt=RegExp(Xi.source),mi=/<%-([\s\S]+?)%>/g,Ys=/<%([\s\S]+?)%>/g,Kn=/<%=([\s\S]+?)%>/g,zn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fs=/^\w*$/,Js=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Cs=/[\\^$.*+?()[\]{}|]/g,Fu=RegExp(Cs.source),Zs=/^\s+/,re=/\s/,ve=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ze=/\{\n\/\* \[wrapped with (.+)\] \*/,Ue=/,? & /,et=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,wt=/[()=,{}\[\]\/\s]/,Et=/\\(\\)?/g,Or=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,fr=/\w*$/,wi=/^[-+]0x[0-9a-f]+$/i,Ci=/^0b[01]+$/i,mn=/^\[object .+?Constructor\]$/,Cn=/^0o[0-7]+$/i,Lr=/^(?:0|[1-9]\d*)$/,Ii=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bi=/($^)/,Cu=/['\n\r\u2028\u2029\\]/g,Is="\\ud800-\\udfff",Iu="\\u0300-\\u036f",Vt="\\ufe20-\\ufe2f",Sr="\\u20d0-\\u20ff",rt=Iu+Vt+Sr,vr="\\u2700-\\u27bf",on="a-z\\xdf-\\xf6\\xf8-\\xff",Pr="\\xac\\xb1\\xd7\\xf7",ln="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Gn="\\u2000-\\u206f",ui=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Wn="A-Z\\xc0-\\xd6\\xd8-\\xde",Zi="\\ufe0e\\ufe0f",Qs=Pr+ln+Gn+ui,Ba="['\u2019]",Rl="["+Is+"]",$o="["+Qs+"]",Ra="["+rt+"]",ko="\\d+",$l="["+vr+"]",xo="["+on+"]",To="[^"+Is+Qs+ko+vr+on+Wn+"]",Pu="\\ud83c[\\udffb-\\udfff]",kl="(?:"+Ra+"|"+Pu+")",$a="[^"+Is+"]",Bu="(?:\\ud83c[\\udde6-\\uddff]){2}",Ru="[\\ud800-\\udbff][\\udc00-\\udfff]",Ps="["+Wn+"]",Oo="\\u200d",No="(?:"+xo+"|"+To+")",xl="(?:"+Ps+"|"+To+")",Lo="(?:"+Ba+"(?:d|ll|m|re|s|t|ve))?",Ho="(?:"+Ba+"(?:D|LL|M|RE|S|T|VE))?",jo=kl+"?",Uo="["+Zi+"]?",Tl="(?:"+Oo+"(?:"+[$a,Bu,Ru].join("|")+")"+Uo+jo+")*",Ol="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Nl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Mo=Uo+jo+Tl,Ll="(?:"+[$l,Bu,Ru].join("|")+")"+Mo,ka="(?:"+[$a+Ra+"?",Ra,Bu,Ru,Rl].join("|")+")",Hl=RegExp(Ba,"g"),jl=RegExp(Ra,"g"),$u=RegExp(Pu+"(?="+Pu+")|"+ka+Mo,"g"),Ul=RegExp([Ps+"?"+xo+"+"+Lo+"(?="+[$o,Ps,"$"].join("|")+")",xl+"+"+Ho+"(?="+[$o,Ps+No,"$"].join("|")+")",Ps+"?"+No+"+"+Lo,Ps+"+"+Ho,Nl,Ol,ko,Ll].join("|"),"g"),Ml=RegExp("["+Oo+Is+rt+Zi+"]"),ql=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Vl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],zl=-1,Qt={};Qt[or]=Qt[kt]=Qt[Ge]=Qt[cr]=Qt[zt]=Qt[pe]=Qt[Er]=Qt[St]=Qt[Ft]=!0,Qt[Fe]=Qt[Pe]=Qt[qe]=Qt[dt]=Qt[Re]=Qt[ye]=Qt[Ye]=Qt[Xe]=Qt[ke]=Qt[fe]=Qt[Te]=Qt[_e]=Qt[qt]=Qt[Oe]=Qt[Kr]=!1;var Xt={};Xt[Fe]=Xt[Pe]=Xt[qe]=Xt[Re]=Xt[dt]=Xt[ye]=Xt[or]=Xt[kt]=Xt[Ge]=Xt[cr]=Xt[zt]=Xt[ke]=Xt[fe]=Xt[Te]=Xt[_e]=Xt[qt]=Xt[Oe]=Xt[Ot]=Xt[pe]=Xt[Er]=Xt[St]=Xt[Ft]=!0,Xt[Ye]=Xt[Xe]=Xt[Kr]=!1;var Gl={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Wl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Yl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ef={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},tf=parseFloat,rf=parseInt,qo=typeof global=="object"&&global&&global.Object===Object&&global,nf=typeof self=="object"&&self&&self.Object===Object&&self,$r=qo||nf||Function("return this")(),ku=typeof yu=="object"&&yu&&!yu.nodeType&&yu,Qi=ku&&typeof Fo=="object"&&Fo&&!Fo.nodeType&&Fo,Vo=Qi&&Qi.exports===ku,xu=Vo&&qo.process,In=(function(){try{var ne=Qi&&Qi.require&&Qi.require("util").types;return ne||xu&&xu.binding&&xu.binding("util")}catch{}})(),Ko=In&&In.isArrayBuffer,zo=In&&In.isDate,Go=In&&In.isMap,Wo=In&&In.isRegExp,Yo=In&&In.isSet,Jo=In&&In.isTypedArray;function wn(ne,de,le){switch(le.length){case 0:return ne.call(de);case 1:return ne.call(de,le[0]);case 2:return ne.call(de,le[0],le[1]);case 3:return ne.call(de,le[0],le[1],le[2])}return ne.apply(de,le)}function sf(ne,de,le,Me){for(var pt=-1,Nt=ne==null?0:ne.length;++pt<Nt;){var mr=ne[pt];de(Me,mr,le(mr),ne)}return Me}function Pn(ne,de){for(var le=-1,Me=ne==null?0:ne.length;++le<Me&&de(ne[le],le,ne)!==!1;);return ne}function af(ne,de){for(var le=ne==null?0:ne.length;le--&&de(ne[le],le,ne)!==!1;);return ne}function Xo(ne,de){for(var le=-1,Me=ne==null?0:ne.length;++le<Me;)if(!de(ne[le],le,ne))return!1;return!0}function Pi(ne,de){for(var le=-1,Me=ne==null?0:ne.length,pt=0,Nt=[];++le<Me;){var mr=ne[le];de(mr,le,ne)&&(Nt[pt++]=mr)}return Nt}function xa(ne,de){var le=ne==null?0:ne.length;return!!le&&Bs(ne,de,0)>-1}function Tu(ne,de,le){for(var Me=-1,pt=ne==null?0:ne.length;++Me<pt;)if(le(de,ne[Me]))return!0;return!1}function rr(ne,de){for(var le=-1,Me=ne==null?0:ne.length,pt=Array(Me);++le<Me;)pt[le]=de(ne[le],le,ne);return pt}function Bi(ne,de){for(var le=-1,Me=de.length,pt=ne.length;++le<Me;)ne[pt+le]=de[le];return ne}function Ou(ne,de,le,Me){var pt=-1,Nt=ne==null?0:ne.length;for(Me&&Nt&&(le=ne[++pt]);++pt<Nt;)le=de(le,ne[pt],pt,ne);return le}function uf(ne,de,le,Me){var pt=ne==null?0:ne.length;for(Me&&pt&&(le=ne[--pt]);pt--;)le=de(le,ne[pt],pt,ne);return le}function Nu(ne,de){for(var le=-1,Me=ne==null?0:ne.length;++le<Me;)if(de(ne[le],le,ne))return!0;return!1}var of=Lu("length");function cf(ne){return ne.split("")}function lf(ne){return ne.match(et)||[]}function Zo(ne,de,le){var Me;return le(ne,function(pt,Nt,mr){if(de(pt,Nt,mr))return Me=Nt,!1}),Me}function Ta(ne,de,le,Me){for(var pt=ne.length,Nt=le+(Me?1:-1);Me?Nt--:++Nt<pt;)if(de(ne[Nt],Nt,ne))return Nt;return-1}function Bs(ne,de,le){return de===de?gf(ne,de,le):Ta(ne,Qo,le)}function ff(ne,de,le,Me){for(var pt=le-1,Nt=ne.length;++pt<Nt;)if(Me(ne[pt],de))return pt;return-1}function Qo(ne){return ne!==ne}function ec(ne,de){var le=ne==null?0:ne.length;return le?ju(ne,de)/le:He}function Lu(ne){return function(de){return de==null?t:de[ne]}}function Hu(ne){return function(de){return ne==null?t:ne[de]}}function tc(ne,de,le,Me,pt){return pt(ne,function(Nt,mr,Yt){le=Me?(Me=!1,Nt):de(le,Nt,mr,Yt)}),le}function hf(ne,de){var le=ne.length;for(ne.sort(de);le--;)ne[le]=ne[le].value;return ne}function ju(ne,de){for(var le,Me=-1,pt=ne.length;++Me<pt;){var Nt=de(ne[Me]);Nt!==t&&(le=le===t?Nt:le+Nt)}return le}function Uu(ne,de){for(var le=-1,Me=Array(ne);++le<ne;)Me[le]=de(le);return Me}function pf(ne,de){return rr(de,function(le){return[le,ne[le]]})}function rc(ne){return ne&&ne.slice(0,Rs(ne)+1).replace(Zs,"")}function bn(ne){return function(de){return ne(de)}}function Mu(ne,de){return rr(de,function(le){return ne[le]})}function C(ne,de){return ne.has(de)}function je(ne,de){for(var le=-1,Me=ne.length;++le<Me&&Bs(de,ne[le],0)>-1;);return le}function rs(ne,de){for(var le=ne.length;le--&&Bs(de,ne[le],0)>-1;);return le}function Yn(ne,de){for(var le=ne.length,Me=0;le--;)ne[le]===de&&++Me;return Me}var Oa=Hu(Gl),ue=Hu(Wl);function ra(ne){return"\\"+ef[ne]}function df(ne,de){return ne==null?t:ne[de]}function na(ne){return Ml.test(ne)}function Lp(ne){return ql.test(ne)}function Bt(ne){for(var de,le=[];!(de=ne.next()).done;)le.push(de.value);return le}function nc(ne){var de=-1,le=Array(ne.size);return ne.forEach(function(Me,pt){le[++de]=[pt,Me]}),le}function Ri(ne,de){return function(le){return ne(de(le))}}function Jn(ne,de){for(var le=-1,Me=ne.length,pt=0,Nt=[];++le<Me;){var mr=ne[le];(mr===de||mr===d)&&(ne[le]=d,Nt[pt++]=le)}return Nt}function lt(ne){var de=-1,le=Array(ne.size);return ne.forEach(function(Me){le[++de]=Me}),le}function hr(ne){var de=-1,le=Array(ne.size);return ne.forEach(function(Me){le[++de]=[Me,Me]}),le}function gf(ne,de,le){for(var Me=le-1,pt=ne.length;++Me<pt;)if(ne[Me]===de)return Me;return-1}function vf(ne,de,le){for(var Me=le+1;Me--;)if(ne[Me]===de)return Me;return Me}function fn(ne){return na(ne)?mf(ne):of(ne)}function Bn(ne){return na(ne)?ic(ne):cf(ne)}function Rs(ne){for(var de=ne.length;de--&&re.test(ne.charAt(de)););return de}var we=Hu(Yl);function mf(ne){for(var de=$u.lastIndex=0;$u.test(ne);)++de;return de}function ic(ne){return ne.match($u)||[]}function sc(ne){return ne.match(Ul)||[]}var wf=(function ne(de){de=de==null?$r:$i.defaults($r.Object(),de,$i.pick($r,Vl));var le=de.Array,Me=de.Date,pt=de.Error,Nt=de.Function,mr=de.Math,Yt=de.Object,qu=de.RegExp,ac=de.String,_n=de.TypeError,ns=le.prototype,bf=Nt.prototype,$s=Yt.prototype,Na=de["__core-js_shared__"],La=bf.toString,Ut=$s.hasOwnProperty,Vu=0,Ha=(function(){var l=/[^.]+$/.exec(Na&&Na.keys&&Na.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""})(),ja=$s.toString,Ku=La.call(Yt),_f=$r._,uc=qu("^"+La.call(Ut).replace(Cs,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ks=Vo?de.Buffer:t,ki=de.Symbol,ia=de.Uint8Array,oc=ks?ks.allocUnsafe:t,Ua=Ri(Yt.getPrototypeOf,Yt),cc=Yt.create,Ma=$s.propertyIsEnumerable,xs=ns.splice,lc=ki?ki.isConcatSpreadable:t,sa=ki?ki.iterator:t,is=ki?ki.toStringTag:t,Hr=(function(){try{var l=ha(Yt,"defineProperty");return l({},"",{}),l}catch{}})(),Ef=de.clearTimeout!==$r.clearTimeout&&de.clearTimeout,Af=Me&&Me.now!==$r.Date.now&&Me.now,qa=de.setTimeout!==$r.setTimeout&&de.setTimeout,xi=mr.ceil,ss=mr.floor,Va=Yt.getOwnPropertySymbols,yf=ks?ks.isBuffer:t,zu=de.isFinite,fc=ns.join,Ti=Ri(Yt.keys,Yt),Dr=mr.max,Ur=mr.min,Sf=Me.now,aa=de.parseInt,Gu=mr.random,hc=ns.reverse,Wu=ha(de,"DataView"),Ts=ha(de,"Map"),Yu=ha(de,"Promise"),Os=ha(de,"Set"),ua=ha(de,"WeakMap"),oa=ha(Yt,"create"),Ka=ua&&new ua,_i={},Ju=pa(Wu),Df=pa(Ts),Ff=pa(Yu),pc=pa(Os),dc=pa(ua),as=ki?ki.prototype:t,us=as?as.valueOf:t,za=as?as.toString:t;function M(l){if(wr(l)&&!vt(l)&&!(l instanceof It)){if(l instanceof Rn)return l;if(Ut.call(l,"__wrapped__"))return Hd(l)}return new Rn(l)}var os=(function(){function l(){}return function(p){if(!dr(p))return{};if(cc)return cc(p);l.prototype=p;var E=new l;return l.prototype=t,E}})();function Ga(){}function Rn(l,p){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=t}M.templateSettings={escape:mi,evaluate:Ys,interpolate:Kn,variable:"",imports:{_:M}},M.prototype=Ga.prototype,M.prototype.constructor=M,Rn.prototype=os(Ga.prototype),Rn.prototype.constructor=Rn;function It(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ie,this.__views__=[]}function gc(){var l=new It(this.__wrapped__);return l.__actions__=$n(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=$n(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=$n(this.__views__),l}function Wa(){if(this.__filtered__){var l=new It(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function Oi(){var l=this.__wrapped__.value(),p=this.__dir__,E=vt(l),I=p<0,T=E?l.length:0,q=i2(0,T,this.__views__),X=q.start,Q=q.end,se=Q-X,Ee=I?Q:X-1,Ae=this.__iteratees__,Se=Ae.length,Ne=0,We=Ur(se,this.__takeCount__);if(!E||!I&&T==se&&We==se)return od(l,this.__actions__);var st=[];e:for(;se--&&Ne<We;){Ee+=p;for(var Dt=-1,at=l[Ee];++Dt<Se;){var Rt=Ae[Dt],xt=Rt.iteratee,Qn=Rt.type,yn=xt(at);if(Qn==Y)at=yn;else if(!yn){if(Qn==V)continue e;break e}}st[Ne++]=at}return st}It.prototype=os(Ga.prototype),It.prototype.constructor=It;function cs(l){var p=-1,E=l==null?0:l.length;for(this.clear();++p<E;){var I=l[p];this.set(I[0],I[1])}}function ca(){this.__data__=oa?oa(null):{},this.size=0}function Cf(l){var p=this.has(l)&&delete this.__data__[l];return this.size-=p?1:0,p}function Xu(l){var p=this.__data__;if(oa){var E=p[l];return E===u?t:E}return Ut.call(p,l)?p[l]:t}function If(l){var p=this.__data__;return oa?p[l]!==t:Ut.call(p,l)}function Ze(l,p){var E=this.__data__;return this.size+=this.has(l)?0:1,E[l]=oa&&p===t?u:p,this}cs.prototype.clear=ca,cs.prototype.delete=Cf,cs.prototype.get=Xu,cs.prototype.has=If,cs.prototype.set=Ze;function Ei(l){var p=-1,E=l==null?0:l.length;for(this.clear();++p<E;){var I=l[p];this.set(I[0],I[1])}}function Zu(){this.__data__=[],this.size=0}function Pf(l){var p=this.__data__,E=wc(p,l);if(E<0)return!1;var I=p.length-1;return E==I?p.pop():xs.call(p,E,1),--this.size,!0}function vc(l){var p=this.__data__,E=wc(p,l);return E<0?t:p[E][1]}function Qu(l){return wc(this.__data__,l)>-1}function mc(l,p){var E=this.__data__,I=wc(E,l);return I<0?(++this.size,E.push([l,p])):E[I][1]=p,this}Ei.prototype.clear=Zu,Ei.prototype.delete=Pf,Ei.prototype.get=vc,Ei.prototype.has=Qu,Ei.prototype.set=mc;function w(l){var p=-1,E=l==null?0:l.length;for(this.clear();++p<E;){var I=l[p];this.set(I[0],I[1])}}function B(){this.size=0,this.__data__={hash:new cs,map:new(Ts||Ei),string:new cs}}function j(l){var p=Bc(this,l).delete(l);return this.size-=p?1:0,p}function L(l){return Bc(this,l).get(l)}function ee(l){return Bc(this,l).has(l)}function ie(l,p){var E=Bc(this,l),I=E.size;return E.set(l,p),this.size+=E.size==I?0:1,this}w.prototype.clear=B,w.prototype.delete=j,w.prototype.get=L,w.prototype.has=ee,w.prototype.set=ie;function Le(l){var p=-1,E=l==null?0:l.length;for(this.__data__=new w;++p<E;)this.add(l[p])}function ut(l){return this.__data__.set(l,u),this}function hn(l){return this.__data__.has(l)}Le.prototype.add=Le.prototype.push=ut,Le.prototype.has=hn;function zr(l){var p=this.__data__=new Ei(l);this.size=p.size}function eo(){this.__data__=new Ei,this.size=0}function Bf(l){var p=this.__data__,E=p.delete(l);return this.size=p.size,E}function hm(l){return this.__data__.get(l)}function pm(l){return this.__data__.has(l)}function dm(l,p){var E=this.__data__;if(E instanceof Ei){var I=E.__data__;if(!Ts||I.length<s-1)return I.push([l,p]),this.size=++E.size,this;E=this.__data__=new w(I)}return E.set(l,p),this.size=E.size,this}zr.prototype.clear=eo,zr.prototype.delete=Bf,zr.prototype.get=hm,zr.prototype.has=pm,zr.prototype.set=dm;function Hp(l,p){var E=vt(l),I=!E&&da(l),T=!E&&!I&&Us(l),q=!E&&!I&&!T&&Za(l),X=E||I||T||q,Q=X?Uu(l.length,ac):[],se=Q.length;for(var Ee in l)(p||Ut.call(l,Ee))&&!(X&&(Ee=="length"||T&&(Ee=="offset"||Ee=="parent")||q&&(Ee=="buffer"||Ee=="byteLength"||Ee=="byteOffset")||ps(Ee,se)))&&Q.push(Ee);return Q}function jp(l){var p=l.length;return p?l[Uf(0,p-1)]:t}function gm(l,p){return Rc($n(l),la(p,0,l.length))}function vm(l){return Rc($n(l))}function Rf(l,p,E){(E!==t&&!Ai(l[p],E)||E===t&&!(p in l))&&ls(l,p,E)}function to(l,p,E){var I=l[p];(!(Ut.call(l,p)&&Ai(I,E))||E===t&&!(p in l))&&ls(l,p,E)}function wc(l,p){for(var E=l.length;E--;)if(Ai(l[E][0],p))return E;return-1}function mm(l,p,E,I){return Ns(l,function(T,q,X){p(I,T,E(T),X)}),I}function Up(l,p){return l&&Li(p,Wr(p),l)}function wm(l,p){return l&&Li(p,xn(p),l)}function ls(l,p,E){p=="__proto__"&&Hr?Hr(l,p,{configurable:!0,enumerable:!0,value:E,writable:!0}):l[p]=E}function $f(l,p){for(var E=-1,I=p.length,T=le(I),q=l==null;++E<I;)T[E]=q?t:hh(l,p[E]);return T}function la(l,p,E){return l===l&&(E!==t&&(l=l<=E?l:E),p!==t&&(l=l>=p?l:p)),l}function oi(l,p,E,I,T,q){var X,Q=p&f,se=p&b,Ee=p&A;if(E&&(X=T?E(l,I,T,q):E(l)),X!==t)return X;if(!dr(l))return l;var Ae=vt(l);if(Ae){if(X=a2(l),!Q)return $n(l,X)}else{var Se=pn(l),Ne=Se==Xe||Se==De;if(Us(l))return fd(l,Q);if(Se==Te||Se==Fe||Ne&&!T){if(X=se||Ne?{}:Bd(l),!Q)return se?Ym(l,wm(X,l)):Wm(l,Up(X,l))}else{if(!Xt[Se])return T?l:{};X=u2(l,Se,Q)}}q||(q=new zr);var We=q.get(l);if(We)return We;q.set(l,X),s0(l)?l.forEach(function(at){X.add(oi(at,p,E,at,l,q))}):n0(l)&&l.forEach(function(at,Rt){X.set(Rt,oi(at,p,E,Rt,l,q))});var st=Ee?se?Zf:Xf:se?xn:Wr,Dt=Ae?t:st(l);return Pn(Dt||l,function(at,Rt){Dt&&(Rt=at,at=l[Rt]),to(X,Rt,oi(at,p,E,Rt,l,q))}),X}function bm(l){var p=Wr(l);return function(E){return Mp(E,l,p)}}function Mp(l,p,E){var I=E.length;if(l==null)return!I;for(l=Yt(l);I--;){var T=E[I],q=p[T],X=l[T];if(X===t&&!(T in l)||!q(X))return!1}return!0}function qp(l,p,E){if(typeof l!="function")throw new _n(o);return oo(function(){l.apply(t,E)},p)}function ro(l,p,E,I){var T=-1,q=xa,X=!0,Q=l.length,se=[],Ee=p.length;if(!Q)return se;E&&(p=rr(p,bn(E))),I?(q=Tu,X=!1):p.length>=s&&(q=C,X=!1,p=new Le(p));e:for(;++T<Q;){var Ae=l[T],Se=E==null?Ae:E(Ae);if(Ae=I||Ae!==0?Ae:0,X&&Se===Se){for(var Ne=Ee;Ne--;)if(p[Ne]===Se)continue e;se.push(Ae)}else q(p,Se,I)||se.push(Ae)}return se}var Ns=vd(Ni),Vp=vd(xf,!0);function _m(l,p){var E=!0;return Ns(l,function(I,T,q){return E=!!p(I,T,q),E}),E}function bc(l,p,E){for(var I=-1,T=l.length;++I<T;){var q=l[I],X=p(q);if(X!=null&&(Q===t?X===X&&!Zn(X):E(X,Q)))var Q=X,se=q}return se}function Em(l,p,E,I){var T=l.length;for(E=At(E),E<0&&(E=-E>T?0:T+E),I=I===t||I>T?T:At(I),I<0&&(I+=T),I=E>I?0:u0(I);E<I;)l[E++]=p;return l}function Kp(l,p){var E=[];return Ns(l,function(I,T,q){p(I,T,q)&&E.push(I)}),E}function nn(l,p,E,I,T){var q=-1,X=l.length;for(E||(E=c2),T||(T=[]);++q<X;){var Q=l[q];p>0&&E(Q)?p>1?nn(Q,p-1,E,I,T):Bi(T,Q):I||(T[T.length]=Q)}return T}var kf=md(),zp=md(!0);function Ni(l,p){return l&&kf(l,p,Wr)}function xf(l,p){return l&&zp(l,p,Wr)}function _c(l,p){return Pi(p,function(E){return ds(l[E])})}function fa(l,p){p=Hs(p,l);for(var E=0,I=p.length;l!=null&&E<I;)l=l[Hi(p[E++])];return E&&E==I?l:t}function Gp(l,p,E){var I=p(l);return vt(l)?I:Bi(I,E(l))}function En(l){return l==null?l===t?ur:gt:is&&is in Yt(l)?n2(l):v2(l)}function Tf(l,p){return l>p}function Am(l,p){return l!=null&&Ut.call(l,p)}function ym(l,p){return l!=null&&p in Yt(l)}function Sm(l,p,E){return l>=Ur(p,E)&&l<Dr(p,E)}function Of(l,p,E){for(var I=E?Tu:xa,T=l[0].length,q=l.length,X=q,Q=le(q),se=1/0,Ee=[];X--;){var Ae=l[X];X&&p&&(Ae=rr(Ae,bn(p))),se=Ur(Ae.length,se),Q[X]=!E&&(p||T>=120&&Ae.length>=120)?new Le(X&&Ae):t}Ae=l[0];var Se=-1,Ne=Q[0];e:for(;++Se<T&&Ee.length<se;){var We=Ae[Se],st=p?p(We):We;if(We=E||We!==0?We:0,!(Ne?C(Ne,st):I(Ee,st,E))){for(X=q;--X;){var Dt=Q[X];if(!(Dt?C(Dt,st):I(l[X],st,E)))continue e}Ne&&Ne.push(st),Ee.push(We)}}return Ee}function Dm(l,p,E,I){return Ni(l,function(T,q,X){p(I,E(T),q,X)}),I}function no(l,p,E){p=Hs(p,l),l=xd(l,p);var I=l==null?l:l[Hi(li(p))];return I==null?t:wn(I,l,E)}function Wp(l){return wr(l)&&En(l)==Fe}function Fm(l){return wr(l)&&En(l)==qe}function Cm(l){return wr(l)&&En(l)==ye}function io(l,p,E,I,T){return l===p?!0:l==null||p==null||!wr(l)&&!wr(p)?l!==l&&p!==p:Im(l,p,E,I,io,T)}function Im(l,p,E,I,T,q){var X=vt(l),Q=vt(p),se=X?Pe:pn(l),Ee=Q?Pe:pn(p);se=se==Fe?Te:se,Ee=Ee==Fe?Te:Ee;var Ae=se==Te,Se=Ee==Te,Ne=se==Ee;if(Ne&&Us(l)){if(!Us(p))return!1;X=!0,Ae=!1}if(Ne&&!Ae)return q||(q=new zr),X||Za(l)?Cd(l,p,E,I,T,q):t2(l,p,se,E,I,T,q);if(!(E&g)){var We=Ae&&Ut.call(l,"__wrapped__"),st=Se&&Ut.call(p,"__wrapped__");if(We||st){var Dt=We?l.value():l,at=st?p.value():p;return q||(q=new zr),T(Dt,at,E,I,q)}}return Ne?(q||(q=new zr),r2(l,p,E,I,T,q)):!1}function Pm(l){return wr(l)&&pn(l)==ke}function Nf(l,p,E,I){var T=E.length,q=T,X=!I;if(l==null)return!q;for(l=Yt(l);T--;){var Q=E[T];if(X&&Q[2]?Q[1]!==l[Q[0]]:!(Q[0]in l))return!1}for(;++T<q;){Q=E[T];var se=Q[0],Ee=l[se],Ae=Q[1];if(X&&Q[2]){if(Ee===t&&!(se in l))return!1}else{var Se=new zr;if(I)var Ne=I(Ee,Ae,se,l,p,Se);if(!(Ne===t?io(Ae,Ee,g|v,I,Se):Ne))return!1}}return!0}function Yp(l){if(!dr(l)||f2(l))return!1;var p=ds(l)?uc:mn;return p.test(pa(l))}function Bm(l){return wr(l)&&En(l)==_e}function Rm(l){return wr(l)&&pn(l)==qt}function $m(l){return wr(l)&&Nc(l.length)&&!!Qt[En(l)]}function Jp(l){return typeof l=="function"?l:l==null?Tn:typeof l=="object"?vt(l)?Qp(l[0],l[1]):Zp(l):w0(l)}function Lf(l){if(!uo(l))return Ti(l);var p=[];for(var E in Yt(l))Ut.call(l,E)&&E!="constructor"&&p.push(E);return p}function km(l){if(!dr(l))return g2(l);var p=uo(l),E=[];for(var I in l)I=="constructor"&&(p||!Ut.call(l,I))||E.push(I);return E}function Hf(l,p){return l<p}function Xp(l,p){var E=-1,I=kn(l)?le(l.length):[];return Ns(l,function(T,q,X){I[++E]=p(T,q,X)}),I}function Zp(l){var p=eh(l);return p.length==1&&p[0][2]?$d(p[0][0],p[0][1]):function(E){return E===l||Nf(E,l,p)}}function Qp(l,p){return rh(l)&&Rd(p)?$d(Hi(l),p):function(E){var I=hh(E,l);return I===t&&I===p?ph(E,l):io(p,I,g|v)}}function Ec(l,p,E,I,T){l!==p&&kf(p,function(q,X){if(T||(T=new zr),dr(q))xm(l,p,X,E,Ec,I,T);else{var Q=I?I(ih(l,X),q,X+"",l,p,T):t;Q===t&&(Q=q),Rf(l,X,Q)}},xn)}function xm(l,p,E,I,T,q,X){var Q=ih(l,E),se=ih(p,E),Ee=X.get(se);if(Ee){Rf(l,E,Ee);return}var Ae=q?q(Q,se,E+"",l,p,X):t,Se=Ae===t;if(Se){var Ne=vt(se),We=!Ne&&Us(se),st=!Ne&&!We&&Za(se);Ae=se,Ne||We||st?vt(Q)?Ae=Q:Fr(Q)?Ae=$n(Q):We?(Se=!1,Ae=fd(se,!0)):st?(Se=!1,Ae=hd(se,!0)):Ae=[]:co(se)||da(se)?(Ae=Q,da(Q)?Ae=o0(Q):(!dr(Q)||ds(Q))&&(Ae=Bd(se))):Se=!1}Se&&(X.set(se,Ae),T(Ae,se,I,q,X),X.delete(se)),Rf(l,E,Ae)}function ed(l,p){var E=l.length;if(E)return p+=p<0?E:0,ps(p,E)?l[p]:t}function td(l,p,E){p.length?p=rr(p,function(q){return vt(q)?function(X){return fa(X,q.length===1?q[0]:q)}:q}):p=[Tn];var I=-1;p=rr(p,bn(nt()));var T=Xp(l,function(q,X,Q){var se=rr(p,function(Ee){return Ee(q)});return{criteria:se,index:++I,value:q}});return hf(T,function(q,X){return Gm(q,X,E)})}function Tm(l,p){return rd(l,p,function(E,I){return ph(l,I)})}function rd(l,p,E){for(var I=-1,T=p.length,q={};++I<T;){var X=p[I],Q=fa(l,X);E(Q,X)&&so(q,Hs(X,l),Q)}return q}function Om(l){return function(p){return fa(p,l)}}function jf(l,p,E,I){var T=I?ff:Bs,q=-1,X=p.length,Q=l;for(l===p&&(p=$n(p)),E&&(Q=rr(l,bn(E)));++q<X;)for(var se=0,Ee=p[q],Ae=E?E(Ee):Ee;(se=T(Q,Ae,se,I))>-1;)Q!==l&&xs.call(Q,se,1),xs.call(l,se,1);return l}function nd(l,p){for(var E=l?p.length:0,I=E-1;E--;){var T=p[E];if(E==I||T!==q){var q=T;ps(T)?xs.call(l,T,1):Vf(l,T)}}return l}function Uf(l,p){return l+ss(Gu()*(p-l+1))}function Nm(l,p,E,I){for(var T=-1,q=Dr(xi((p-l)/(E||1)),0),X=le(q);q--;)X[I?q:++T]=l,l+=E;return X}function Mf(l,p){var E="";if(!l||p<1||p>Z)return E;do p%2&&(E+=l),p=ss(p/2),p&&(l+=l);while(p);return E}function Ct(l,p){return sh(kd(l,p,Tn),l+"")}function Lm(l){return jp(Qa(l))}function Hm(l,p){var E=Qa(l);return Rc(E,la(p,0,E.length))}function so(l,p,E,I){if(!dr(l))return l;p=Hs(p,l);for(var T=-1,q=p.length,X=q-1,Q=l;Q!=null&&++T<q;){var se=Hi(p[T]),Ee=E;if(se==="__proto__"||se==="constructor"||se==="prototype")return l;if(T!=X){var Ae=Q[se];Ee=I?I(Ae,se,Q):t,Ee===t&&(Ee=dr(Ae)?Ae:ps(p[T+1])?[]:{})}to(Q,se,Ee),Q=Q[se]}return l}var id=Ka?function(l,p){return Ka.set(l,p),l}:Tn,jm=Hr?function(l,p){return Hr(l,"toString",{configurable:!0,enumerable:!1,value:gh(p),writable:!0})}:Tn;function Um(l){return Rc(Qa(l))}function ci(l,p,E){var I=-1,T=l.length;p<0&&(p=-p>T?0:T+p),E=E>T?T:E,E<0&&(E+=T),T=p>E?0:E-p>>>0,p>>>=0;for(var q=le(T);++I<T;)q[I]=l[I+p];return q}function Mm(l,p){var E;return Ns(l,function(I,T,q){return E=p(I,T,q),!E}),!!E}function Ac(l,p,E){var I=0,T=l==null?I:l.length;if(typeof p=="number"&&p===p&&T<=oe){for(;I<T;){var q=I+T>>>1,X=l[q];X!==null&&!Zn(X)&&(E?X<=p:X<p)?I=q+1:T=q}return T}return qf(l,p,Tn,E)}function qf(l,p,E,I){var T=0,q=l==null?0:l.length;if(q===0)return 0;p=E(p);for(var X=p!==p,Q=p===null,se=Zn(p),Ee=p===t;T<q;){var Ae=ss((T+q)/2),Se=E(l[Ae]),Ne=Se!==t,We=Se===null,st=Se===Se,Dt=Zn(Se);if(X)var at=I||st;else Ee?at=st&&(I||Ne):Q?at=st&&Ne&&(I||!We):se?at=st&&Ne&&!We&&(I||!Dt):We||Dt?at=!1:at=I?Se<=p:Se<p;at?T=Ae+1:q=Ae}return Ur(q,J)}function sd(l,p){for(var E=-1,I=l.length,T=0,q=[];++E<I;){var X=l[E],Q=p?p(X):X;if(!E||!Ai(Q,se)){var se=Q;q[T++]=X===0?0:X}}return q}function ad(l){return typeof l=="number"?l:Zn(l)?He:+l}function Xn(l){if(typeof l=="string")return l;if(vt(l))return rr(l,Xn)+"";if(Zn(l))return za?za.call(l):"";var p=l+"";return p=="0"&&1/l==-W?"-0":p}function Ls(l,p,E){var I=-1,T=xa,q=l.length,X=!0,Q=[],se=Q;if(E)X=!1,T=Tu;else if(q>=s){var Ee=p?null:Qm(l);if(Ee)return lt(Ee);X=!1,T=C,se=new Le}else se=p?[]:Q;e:for(;++I<q;){var Ae=l[I],Se=p?p(Ae):Ae;if(Ae=E||Ae!==0?Ae:0,X&&Se===Se){for(var Ne=se.length;Ne--;)if(se[Ne]===Se)continue e;p&&se.push(Se),Q.push(Ae)}else T(se,Se,E)||(se!==Q&&se.push(Se),Q.push(Ae))}return Q}function Vf(l,p){return p=Hs(p,l),l=xd(l,p),l==null||delete l[Hi(li(p))]}function ud(l,p,E,I){return so(l,p,E(fa(l,p)),I)}function yc(l,p,E,I){for(var T=l.length,q=I?T:-1;(I?q--:++q<T)&&p(l[q],q,l););return E?ci(l,I?0:q,I?q+1:T):ci(l,I?q+1:0,I?T:q)}function od(l,p){var E=l;return E instanceof It&&(E=E.value()),Ou(p,function(I,T){return T.func.apply(T.thisArg,Bi([I],T.args))},E)}function Kf(l,p,E){var I=l.length;if(I<2)return I?Ls(l[0]):[];for(var T=-1,q=le(I);++T<I;)for(var X=l[T],Q=-1;++Q<I;)Q!=T&&(q[T]=ro(q[T]||X,l[Q],p,E));return Ls(nn(q,1),p,E)}function cd(l,p,E){for(var I=-1,T=l.length,q=p.length,X={};++I<T;){var Q=I<q?p[I]:t;E(X,l[I],Q)}return X}function zf(l){return Fr(l)?l:[]}function Gf(l){return typeof l=="function"?l:Tn}function Hs(l,p){return vt(l)?l:rh(l,p)?[l]:Ld(Gt(l))}var qm=Ct;function js(l,p,E){var I=l.length;return E=E===t?I:E,!p&&E>=I?l:ci(l,p,E)}var ld=Ef||function(l){return $r.clearTimeout(l)};function fd(l,p){if(p)return l.slice();var E=l.length,I=oc?oc(E):new l.constructor(E);return l.copy(I),I}function Wf(l){var p=new l.constructor(l.byteLength);return new ia(p).set(new ia(l)),p}function Vm(l,p){var E=p?Wf(l.buffer):l.buffer;return new l.constructor(E,l.byteOffset,l.byteLength)}function Km(l){var p=new l.constructor(l.source,fr.exec(l));return p.lastIndex=l.lastIndex,p}function zm(l){return us?Yt(us.call(l)):{}}function hd(l,p){var E=p?Wf(l.buffer):l.buffer;return new l.constructor(E,l.byteOffset,l.length)}function pd(l,p){if(l!==p){var E=l!==t,I=l===null,T=l===l,q=Zn(l),X=p!==t,Q=p===null,se=p===p,Ee=Zn(p);if(!Q&&!Ee&&!q&&l>p||q&&X&&se&&!Q&&!Ee||I&&X&&se||!E&&se||!T)return 1;if(!I&&!q&&!Ee&&l<p||Ee&&E&&T&&!I&&!q||Q&&E&&T||!X&&T||!se)return-1}return 0}function Gm(l,p,E){for(var I=-1,T=l.criteria,q=p.criteria,X=T.length,Q=E.length;++I<X;){var se=pd(T[I],q[I]);if(se){if(I>=Q)return se;var Ee=E[I];return se*(Ee=="desc"?-1:1)}}return l.index-p.index}function dd(l,p,E,I){for(var T=-1,q=l.length,X=E.length,Q=-1,se=p.length,Ee=Dr(q-X,0),Ae=le(se+Ee),Se=!I;++Q<se;)Ae[Q]=p[Q];for(;++T<X;)(Se||T<q)&&(Ae[E[T]]=l[T]);for(;Ee--;)Ae[Q++]=l[T++];return Ae}function gd(l,p,E,I){for(var T=-1,q=l.length,X=-1,Q=E.length,se=-1,Ee=p.length,Ae=Dr(q-Q,0),Se=le(Ae+Ee),Ne=!I;++T<Ae;)Se[T]=l[T];for(var We=T;++se<Ee;)Se[We+se]=p[se];for(;++X<Q;)(Ne||T<q)&&(Se[We+E[X]]=l[T++]);return Se}function $n(l,p){var E=-1,I=l.length;for(p||(p=le(I));++E<I;)p[E]=l[E];return p}function Li(l,p,E,I){var T=!E;E||(E={});for(var q=-1,X=p.length;++q<X;){var Q=p[q],se=I?I(E[Q],l[Q],Q,E,l):t;se===t&&(se=l[Q]),T?ls(E,Q,se):to(E,Q,se)}return E}function Wm(l,p){return Li(l,th(l),p)}function Ym(l,p){return Li(l,Id(l),p)}function Sc(l,p){return function(E,I){var T=vt(E)?sf:mm,q=p?p():{};return T(E,l,nt(I,2),q)}}function Ya(l){return Ct(function(p,E){var I=-1,T=E.length,q=T>1?E[T-1]:t,X=T>2?E[2]:t;for(q=l.length>3&&typeof q=="function"?(T--,q):t,X&&An(E[0],E[1],X)&&(q=T<3?t:q,T=1),p=Yt(p);++I<T;){var Q=E[I];Q&&l(p,Q,I,q)}return p})}function vd(l,p){return function(E,I){if(E==null)return E;if(!kn(E))return l(E,I);for(var T=E.length,q=p?T:-1,X=Yt(E);(p?q--:++q<T)&&I(X[q],q,X)!==!1;);return E}}function md(l){return function(p,E,I){for(var T=-1,q=Yt(p),X=I(p),Q=X.length;Q--;){var se=X[l?Q:++T];if(E(q[se],se,q)===!1)break}return p}}function Jm(l,p,E){var I=p&y,T=ao(l);function q(){var X=this&&this!==$r&&this instanceof q?T:l;return X.apply(I?E:this,arguments)}return q}function wd(l){return function(p){p=Gt(p);var E=na(p)?Bn(p):t,I=E?E[0]:p.charAt(0),T=E?js(E,1).join(""):p.slice(1);return I[l]()+T}}function Ja(l){return function(p){return Ou(v0(g0(p).replace(Hl,"")),l,"")}}function ao(l){return function(){var p=arguments;switch(p.length){case 0:return new l;case 1:return new l(p[0]);case 2:return new l(p[0],p[1]);case 3:return new l(p[0],p[1],p[2]);case 4:return new l(p[0],p[1],p[2],p[3]);case 5:return new l(p[0],p[1],p[2],p[3],p[4]);case 6:return new l(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new l(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var E=os(l.prototype),I=l.apply(E,p);return dr(I)?I:E}}function Xm(l,p,E){var I=ao(l);function T(){for(var q=arguments.length,X=le(q),Q=q,se=Xa(T);Q--;)X[Q]=arguments[Q];var Ee=q<3&&X[0]!==se&&X[q-1]!==se?[]:Jn(X,se);if(q-=Ee.length,q<E)return yd(l,p,Dc,T.placeholder,t,X,Ee,t,t,E-q);var Ae=this&&this!==$r&&this instanceof T?I:l;return wn(Ae,this,X)}return T}function bd(l){return function(p,E,I){var T=Yt(p);if(!kn(p)){var q=nt(E,3);p=Wr(p),E=function(Q){return q(T[Q],Q,T)}}var X=l(p,E,I);return X>-1?T[q?p[X]:X]:t}}function _d(l){return hs(function(p){var E=p.length,I=E,T=Rn.prototype.thru;for(l&&p.reverse();I--;){var q=p[I];if(typeof q!="function")throw new _n(o);if(T&&!X&&Pc(q)=="wrapper")var X=new Rn([],!0)}for(I=X?I:E;++I<E;){q=p[I];var Q=Pc(q),se=Q=="wrapper"?Qf(q):t;se&&nh(se[0])&&se[1]==(O|S|$|z)&&!se[4].length&&se[9]==1?X=X[Pc(se[0])].apply(X,se[3]):X=q.length==1&&nh(q)?X[Q]():X.thru(q)}return function(){var Ee=arguments,Ae=Ee[0];if(X&&Ee.length==1&&vt(Ae))return X.plant(Ae).value();for(var Se=0,Ne=E?p[Se].apply(this,Ee):Ae;++Se<E;)Ne=p[Se].call(this,Ne);return Ne}})}function Dc(l,p,E,I,T,q,X,Q,se,Ee){var Ae=p&O,Se=p&y,Ne=p&m,We=p&(S|F),st=p&H,Dt=Ne?t:ao(l);function at(){for(var Rt=arguments.length,xt=le(Rt),Qn=Rt;Qn--;)xt[Qn]=arguments[Qn];if(We)var yn=Xa(at),ei=Yn(xt,yn);if(I&&(xt=dd(xt,I,T,We)),q&&(xt=gd(xt,q,X,We)),Rt-=ei,We&&Rt<Ee){var Cr=Jn(xt,yn);return yd(l,p,Dc,at.placeholder,E,xt,Cr,Q,se,Ee-Rt)}var yi=Se?E:this,vs=Ne?yi[l]:l;return Rt=xt.length,Q?xt=m2(xt,Q):st&&Rt>1&&xt.reverse(),Ae&&se<Rt&&(xt.length=se),this&&this!==$r&&this instanceof at&&(vs=Dt||ao(vs)),vs.apply(yi,xt)}return at}function Ed(l,p){return function(E,I){return Dm(E,l,p(I),{})}}function Fc(l,p){return function(E,I){var T;if(E===t&&I===t)return p;if(E!==t&&(T=E),I!==t){if(T===t)return I;typeof E=="string"||typeof I=="string"?(E=Xn(E),I=Xn(I)):(E=ad(E),I=ad(I)),T=l(E,I)}return T}}function Yf(l){return hs(function(p){return p=rr(p,bn(nt())),Ct(function(E){var I=this;return l(p,function(T){return wn(T,I,E)})})})}function Cc(l,p){p=p===t?" ":Xn(p);var E=p.length;if(E<2)return E?Mf(p,l):p;var I=Mf(p,xi(l/fn(p)));return na(p)?js(Bn(I),0,l).join(""):I.slice(0,l)}function Zm(l,p,E,I){var T=p&y,q=ao(l);function X(){for(var Q=-1,se=arguments.length,Ee=-1,Ae=I.length,Se=le(Ae+se),Ne=this&&this!==$r&&this instanceof X?q:l;++Ee<Ae;)Se[Ee]=I[Ee];for(;se--;)Se[Ee++]=arguments[++Q];return wn(Ne,T?E:this,Se)}return X}function Ad(l){return function(p,E,I){return I&&typeof I!="number"&&An(p,E,I)&&(E=I=t),p=gs(p),E===t?(E=p,p=0):E=gs(E),I=I===t?p<E?1:-1:gs(I),Nm(p,E,I,l)}}function Ic(l){return function(p,E){return typeof p=="string"&&typeof E=="string"||(p=fi(p),E=fi(E)),l(p,E)}}function yd(l,p,E,I,T,q,X,Q,se,Ee){var Ae=p&S,Se=Ae?X:t,Ne=Ae?t:X,We=Ae?q:t,st=Ae?t:q;p|=Ae?$:k,p&=~(Ae?k:$),p&D||(p&=~(y|m));var Dt=[l,p,T,We,Se,st,Ne,Q,se,Ee],at=E.apply(t,Dt);return nh(l)&&Td(at,Dt),at.placeholder=I,Od(at,l,p)}function Jf(l){var p=mr[l];return function(E,I){if(E=fi(E),I=I==null?0:Ur(At(I),292),I&&zu(E)){var T=(Gt(E)+"e").split("e"),q=p(T[0]+"e"+(+T[1]+I));return T=(Gt(q)+"e").split("e"),+(T[0]+"e"+(+T[1]-I))}return p(E)}}var Qm=Os&&1/lt(new Os([,-0]))[1]==W?function(l){return new Os(l)}:wh;function Sd(l){return function(p){var E=pn(p);return E==ke?nc(p):E==qt?hr(p):pf(p,l(p))}}function fs(l,p,E,I,T,q,X,Q){var se=p&m;if(!se&&typeof l!="function")throw new _n(o);var Ee=I?I.length:0;if(Ee||(p&=~($|k),I=T=t),X=X===t?X:Dr(At(X),0),Q=Q===t?Q:At(Q),Ee-=T?T.length:0,p&k){var Ae=I,Se=T;I=T=t}var Ne=se?t:Qf(l),We=[l,p,E,I,T,Ae,Se,q,X,Q];if(Ne&&d2(We,Ne),l=We[0],p=We[1],E=We[2],I=We[3],T=We[4],Q=We[9]=We[9]===t?se?0:l.length:Dr(We[9]-Ee,0),!Q&&p&(S|F)&&(p&=~(S|F)),!p||p==y)var st=Jm(l,p,E);else p==S||p==F?st=Xm(l,p,Q):(p==$||p==(y|$))&&!T.length?st=Zm(l,p,E,I):st=Dc.apply(t,We);var Dt=Ne?id:Td;return Od(Dt(st,We),l,p)}function Dd(l,p,E,I){return l===t||Ai(l,$s[E])&&!Ut.call(I,E)?p:l}function Fd(l,p,E,I,T,q){return dr(l)&&dr(p)&&(q.set(p,l),Ec(l,p,t,Fd,q),q.delete(p)),l}function e2(l){return co(l)?t:l}function Cd(l,p,E,I,T,q){var X=E&g,Q=l.length,se=p.length;if(Q!=se&&!(X&&se>Q))return!1;var Ee=q.get(l),Ae=q.get(p);if(Ee&&Ae)return Ee==p&&Ae==l;var Se=-1,Ne=!0,We=E&v?new Le:t;for(q.set(l,p),q.set(p,l);++Se<Q;){var st=l[Se],Dt=p[Se];if(I)var at=X?I(Dt,st,Se,p,l,q):I(st,Dt,Se,l,p,q);if(at!==t){if(at)continue;Ne=!1;break}if(We){if(!Nu(p,function(Rt,xt){if(!C(We,xt)&&(st===Rt||T(st,Rt,E,I,q)))return We.push(xt)})){Ne=!1;break}}else if(!(st===Dt||T(st,Dt,E,I,q))){Ne=!1;break}}return q.delete(l),q.delete(p),Ne}function t2(l,p,E,I,T,q,X){switch(E){case Re:if(l.byteLength!=p.byteLength||l.byteOffset!=p.byteOffset)return!1;l=l.buffer,p=p.buffer;case qe:return!(l.byteLength!=p.byteLength||!q(new ia(l),new ia(p)));case dt:case ye:case fe:return Ai(+l,+p);case Ye:return l.name==p.name&&l.message==p.message;case _e:case Oe:return l==p+"";case ke:var Q=nc;case qt:var se=I&g;if(Q||(Q=lt),l.size!=p.size&&!se)return!1;var Ee=X.get(l);if(Ee)return Ee==p;I|=v,X.set(l,p);var Ae=Cd(Q(l),Q(p),I,T,q,X);return X.delete(l),Ae;case Ot:if(us)return us.call(l)==us.call(p)}return!1}function r2(l,p,E,I,T,q){var X=E&g,Q=Xf(l),se=Q.length,Ee=Xf(p),Ae=Ee.length;if(se!=Ae&&!X)return!1;for(var Se=se;Se--;){var Ne=Q[Se];if(!(X?Ne in p:Ut.call(p,Ne)))return!1}var We=q.get(l),st=q.get(p);if(We&&st)return We==p&&st==l;var Dt=!0;q.set(l,p),q.set(p,l);for(var at=X;++Se<se;){Ne=Q[Se];var Rt=l[Ne],xt=p[Ne];if(I)var Qn=X?I(xt,Rt,Ne,p,l,q):I(Rt,xt,Ne,l,p,q);if(!(Qn===t?Rt===xt||T(Rt,xt,E,I,q):Qn)){Dt=!1;break}at||(at=Ne=="constructor")}if(Dt&&!at){var yn=l.constructor,ei=p.constructor;yn!=ei&&"constructor"in l&&"constructor"in p&&!(typeof yn=="function"&&yn instanceof yn&&typeof ei=="function"&&ei instanceof ei)&&(Dt=!1)}return q.delete(l),q.delete(p),Dt}function hs(l){return sh(kd(l,t,Md),l+"")}function Xf(l){return Gp(l,Wr,th)}function Zf(l){return Gp(l,xn,Id)}var Qf=Ka?function(l){return Ka.get(l)}:wh;function Pc(l){for(var p=l.name+"",E=_i[p],I=Ut.call(_i,p)?E.length:0;I--;){var T=E[I],q=T.func;if(q==null||q==l)return T.name}return p}function Xa(l){var p=Ut.call(M,"placeholder")?M:l;return p.placeholder}function nt(){var l=M.iteratee||vh;return l=l===vh?Jp:l,arguments.length?l(arguments[0],arguments[1]):l}function Bc(l,p){var E=l.__data__;return l2(p)?E[typeof p=="string"?"string":"hash"]:E.map}function eh(l){for(var p=Wr(l),E=p.length;E--;){var I=p[E],T=l[I];p[E]=[I,T,Rd(T)]}return p}function ha(l,p){var E=df(l,p);return Yp(E)?E:t}function n2(l){var p=Ut.call(l,is),E=l[is];try{l[is]=t;var I=!0}catch{}var T=ja.call(l);return I&&(p?l[is]=E:delete l[is]),T}var th=Va?function(l){return l==null?[]:(l=Yt(l),Pi(Va(l),function(p){return Ma.call(l,p)}))}:bh,Id=Va?function(l){for(var p=[];l;)Bi(p,th(l)),l=Ua(l);return p}:bh,pn=En;(Wu&&pn(new Wu(new ArrayBuffer(1)))!=Re||Ts&&pn(new Ts)!=ke||Yu&&pn(Yu.resolve())!=xe||Os&&pn(new Os)!=qt||ua&&pn(new ua)!=Kr)&&(pn=function(l){var p=En(l),E=p==Te?l.constructor:t,I=E?pa(E):"";if(I)switch(I){case Ju:return Re;case Df:return ke;case Ff:return xe;case pc:return qt;case dc:return Kr}return p});function i2(l,p,E){for(var I=-1,T=E.length;++I<T;){var q=E[I],X=q.size;switch(q.type){case"drop":l+=X;break;case"dropRight":p-=X;break;case"take":p=Ur(p,l+X);break;case"takeRight":l=Dr(l,p-X);break}}return{start:l,end:p}}function s2(l){var p=l.match(ze);return p?p[1].split(Ue):[]}function Pd(l,p,E){p=Hs(p,l);for(var I=-1,T=p.length,q=!1;++I<T;){var X=Hi(p[I]);if(!(q=l!=null&&E(l,X)))break;l=l[X]}return q||++I!=T?q:(T=l==null?0:l.length,!!T&&Nc(T)&&ps(X,T)&&(vt(l)||da(l)))}function a2(l){var p=l.length,E=new l.constructor(p);return p&&typeof l[0]=="string"&&Ut.call(l,"index")&&(E.index=l.index,E.input=l.input),E}function Bd(l){return typeof l.constructor=="function"&&!uo(l)?os(Ua(l)):{}}function u2(l,p,E){var I=l.constructor;switch(p){case qe:return Wf(l);case dt:case ye:return new I(+l);case Re:return Vm(l,E);case or:case kt:case Ge:case cr:case zt:case pe:case Er:case St:case Ft:return hd(l,E);case ke:return new I;case fe:case Oe:return new I(l);case _e:return Km(l);case qt:return new I;case Ot:return zm(l)}}function o2(l,p){var E=p.length;if(!E)return l;var I=E-1;return p[I]=(E>1?"& ":"")+p[I],p=p.join(E>2?", ":" "),l.replace(ve,`{
/* [wrapped with `+p+`] */
`)}function c2(l){return vt(l)||da(l)||!!(lc&&l&&l[lc])}function ps(l,p){var E=typeof l;return p=p??Z,!!p&&(E=="number"||E!="symbol"&&Lr.test(l))&&l>-1&&l%1==0&&l<p}function An(l,p,E){if(!dr(E))return!1;var I=typeof p;return(I=="number"?kn(E)&&ps(p,E.length):I=="string"&&p in E)?Ai(E[p],l):!1}function rh(l,p){if(vt(l))return!1;var E=typeof l;return E=="number"||E=="symbol"||E=="boolean"||l==null||Zn(l)?!0:Fs.test(l)||!zn.test(l)||p!=null&&l in Yt(p)}function l2(l){var p=typeof l;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?l!=="__proto__":l===null}function nh(l){var p=Pc(l),E=M[p];if(typeof E!="function"||!(p in It.prototype))return!1;if(l===E)return!0;var I=Qf(E);return!!I&&l===I[0]}function f2(l){return!!Ha&&Ha in l}var h2=Na?ds:_h;function uo(l){var p=l&&l.constructor,E=typeof p=="function"&&p.prototype||$s;return l===E}function Rd(l){return l===l&&!dr(l)}function $d(l,p){return function(E){return E==null?!1:E[l]===p&&(p!==t||l in Yt(E))}}function p2(l){var p=Tc(l,function(I){return E.size===h&&E.clear(),I}),E=p.cache;return p}function d2(l,p){var E=l[1],I=p[1],T=E|I,q=T<(y|m|O),X=I==O&&E==S||I==O&&E==z&&l[7].length<=p[8]||I==(O|z)&&p[7].length<=p[8]&&E==S;if(!(q||X))return l;I&y&&(l[2]=p[2],T|=E&y?0:D);var Q=p[3];if(Q){var se=l[3];l[3]=se?dd(se,Q,p[4]):Q,l[4]=se?Jn(l[3],d):p[4]}return Q=p[5],Q&&(se=l[5],l[5]=se?gd(se,Q,p[6]):Q,l[6]=se?Jn(l[5],d):p[6]),Q=p[7],Q&&(l[7]=Q),I&O&&(l[8]=l[8]==null?p[8]:Ur(l[8],p[8])),l[9]==null&&(l[9]=p[9]),l[0]=p[0],l[1]=T,l}function g2(l){var p=[];if(l!=null)for(var E in Yt(l))p.push(E);return p}function v2(l){return ja.call(l)}function kd(l,p,E){return p=Dr(p===t?l.length-1:p,0),function(){for(var I=arguments,T=-1,q=Dr(I.length-p,0),X=le(q);++T<q;)X[T]=I[p+T];T=-1;for(var Q=le(p+1);++T<p;)Q[T]=I[T];return Q[p]=E(X),wn(l,this,Q)}}function xd(l,p){return p.length<2?l:fa(l,ci(p,0,-1))}function m2(l,p){for(var E=l.length,I=Ur(p.length,E),T=$n(l);I--;){var q=p[I];l[I]=ps(q,E)?T[q]:t}return l}function ih(l,p){if(!(p==="constructor"&&typeof l[p]=="function")&&p!="__proto__")return l[p]}var Td=Nd(id),oo=qa||function(l,p){return $r.setTimeout(l,p)},sh=Nd(jm);function Od(l,p,E){var I=p+"";return sh(l,o2(I,w2(s2(I),E)))}function Nd(l){var p=0,E=0;return function(){var I=Sf(),T=x-(I-E);if(E=I,T>0){if(++p>=N)return arguments[0]}else p=0;return l.apply(t,arguments)}}function Rc(l,p){var E=-1,I=l.length,T=I-1;for(p=p===t?I:p;++E<p;){var q=Uf(E,T),X=l[q];l[q]=l[E],l[E]=X}return l.length=p,l}var Ld=p2(function(l){var p=[];return l.charCodeAt(0)===46&&p.push(""),l.replace(Js,function(E,I,T,q){p.push(T?q.replace(Et,"$1"):I||E)}),p});function Hi(l){if(typeof l=="string"||Zn(l))return l;var p=l+"";return p=="0"&&1/l==-W?"-0":p}function pa(l){if(l!=null){try{return La.call(l)}catch{}try{return l+""}catch{}}return""}function w2(l,p){return Pn(be,function(E){var I="_."+E[0];p&E[1]&&!xa(l,I)&&l.push(I)}),l.sort()}function Hd(l){if(l instanceof It)return l.clone();var p=new Rn(l.__wrapped__,l.__chain__);return p.__actions__=$n(l.__actions__),p.__index__=l.__index__,p.__values__=l.__values__,p}function b2(l,p,E){(E?An(l,p,E):p===t)?p=1:p=Dr(At(p),0);var I=l==null?0:l.length;if(!I||p<1)return[];for(var T=0,q=0,X=le(xi(I/p));T<I;)X[q++]=ci(l,T,T+=p);return X}function _2(l){for(var p=-1,E=l==null?0:l.length,I=0,T=[];++p<E;){var q=l[p];q&&(T[I++]=q)}return T}function E2(){var l=arguments.length;if(!l)return[];for(var p=le(l-1),E=arguments[0],I=l;I--;)p[I-1]=arguments[I];return Bi(vt(E)?$n(E):[E],nn(p,1))}var A2=Ct(function(l,p){return Fr(l)?ro(l,nn(p,1,Fr,!0)):[]}),y2=Ct(function(l,p){var E=li(p);return Fr(E)&&(E=t),Fr(l)?ro(l,nn(p,1,Fr,!0),nt(E,2)):[]}),S2=Ct(function(l,p){var E=li(p);return Fr(E)&&(E=t),Fr(l)?ro(l,nn(p,1,Fr,!0),t,E):[]});function D2(l,p,E){var I=l==null?0:l.length;return I?(p=E||p===t?1:At(p),ci(l,p<0?0:p,I)):[]}function F2(l,p,E){var I=l==null?0:l.length;return I?(p=E||p===t?1:At(p),p=I-p,ci(l,0,p<0?0:p)):[]}function C2(l,p){return l&&l.length?yc(l,nt(p,3),!0,!0):[]}function I2(l,p){return l&&l.length?yc(l,nt(p,3),!0):[]}function P2(l,p,E,I){var T=l==null?0:l.length;return T?(E&&typeof E!="number"&&An(l,p,E)&&(E=0,I=T),Em(l,p,E,I)):[]}function jd(l,p,E){var I=l==null?0:l.length;if(!I)return-1;var T=E==null?0:At(E);return T<0&&(T=Dr(I+T,0)),Ta(l,nt(p,3),T)}function Ud(l,p,E){var I=l==null?0:l.length;if(!I)return-1;var T=I-1;return E!==t&&(T=At(E),T=E<0?Dr(I+T,0):Ur(T,I-1)),Ta(l,nt(p,3),T,!0)}function Md(l){var p=l==null?0:l.length;return p?nn(l,1):[]}function B2(l){var p=l==null?0:l.length;return p?nn(l,W):[]}function R2(l,p){var E=l==null?0:l.length;return E?(p=p===t?1:At(p),nn(l,p)):[]}function $2(l){for(var p=-1,E=l==null?0:l.length,I={};++p<E;){var T=l[p];I[T[0]]=T[1]}return I}function qd(l){return l&&l.length?l[0]:t}function k2(l,p,E){var I=l==null?0:l.length;if(!I)return-1;var T=E==null?0:At(E);return T<0&&(T=Dr(I+T,0)),Bs(l,p,T)}function x2(l){var p=l==null?0:l.length;return p?ci(l,0,-1):[]}var T2=Ct(function(l){var p=rr(l,zf);return p.length&&p[0]===l[0]?Of(p):[]}),O2=Ct(function(l){var p=li(l),E=rr(l,zf);return p===li(E)?p=t:E.pop(),E.length&&E[0]===l[0]?Of(E,nt(p,2)):[]}),N2=Ct(function(l){var p=li(l),E=rr(l,zf);return p=typeof p=="function"?p:t,p&&E.pop(),E.length&&E[0]===l[0]?Of(E,t,p):[]});function L2(l,p){return l==null?"":fc.call(l,p)}function li(l){var p=l==null?0:l.length;return p?l[p-1]:t}function H2(l,p,E){var I=l==null?0:l.length;if(!I)return-1;var T=I;return E!==t&&(T=At(E),T=T<0?Dr(I+T,0):Ur(T,I-1)),p===p?vf(l,p,T):Ta(l,Qo,T,!0)}function j2(l,p){return l&&l.length?ed(l,At(p)):t}var U2=Ct(Vd);function Vd(l,p){return l&&l.length&&p&&p.length?jf(l,p):l}function M2(l,p,E){return l&&l.length&&p&&p.length?jf(l,p,nt(E,2)):l}function q2(l,p,E){return l&&l.length&&p&&p.length?jf(l,p,t,E):l}var V2=hs(function(l,p){var E=l==null?0:l.length,I=$f(l,p);return nd(l,rr(p,function(T){return ps(T,E)?+T:T}).sort(pd)),I});function K2(l,p){var E=[];if(!(l&&l.length))return E;var I=-1,T=[],q=l.length;for(p=nt(p,3);++I<q;){var X=l[I];p(X,I,l)&&(E.push(X),T.push(I))}return nd(l,T),E}function ah(l){return l==null?l:hc.call(l)}function z2(l,p,E){var I=l==null?0:l.length;return I?(E&&typeof E!="number"&&An(l,p,E)?(p=0,E=I):(p=p==null?0:At(p),E=E===t?I:At(E)),ci(l,p,E)):[]}function G2(l,p){return Ac(l,p)}function W2(l,p,E){return qf(l,p,nt(E,2))}function Y2(l,p){var E=l==null?0:l.length;if(E){var I=Ac(l,p);if(I<E&&Ai(l[I],p))return I}return-1}function J2(l,p){return Ac(l,p,!0)}function X2(l,p,E){return qf(l,p,nt(E,2),!0)}function Z2(l,p){var E=l==null?0:l.length;if(E){var I=Ac(l,p,!0)-1;if(Ai(l[I],p))return I}return-1}function Q2(l){return l&&l.length?sd(l):[]}function ew(l,p){return l&&l.length?sd(l,nt(p,2)):[]}function tw(l){var p=l==null?0:l.length;return p?ci(l,1,p):[]}function rw(l,p,E){return l&&l.length?(p=E||p===t?1:At(p),ci(l,0,p<0?0:p)):[]}function nw(l,p,E){var I=l==null?0:l.length;return I?(p=E||p===t?1:At(p),p=I-p,ci(l,p<0?0:p,I)):[]}function iw(l,p){return l&&l.length?yc(l,nt(p,3),!1,!0):[]}function sw(l,p){return l&&l.length?yc(l,nt(p,3)):[]}var aw=Ct(function(l){return Ls(nn(l,1,Fr,!0))}),uw=Ct(function(l){var p=li(l);return Fr(p)&&(p=t),Ls(nn(l,1,Fr,!0),nt(p,2))}),ow=Ct(function(l){var p=li(l);return p=typeof p=="function"?p:t,Ls(nn(l,1,Fr,!0),t,p)});function cw(l){return l&&l.length?Ls(l):[]}function lw(l,p){return l&&l.length?Ls(l,nt(p,2)):[]}function fw(l,p){return p=typeof p=="function"?p:t,l&&l.length?Ls(l,t,p):[]}function uh(l){if(!(l&&l.length))return[];var p=0;return l=Pi(l,function(E){if(Fr(E))return p=Dr(E.length,p),!0}),Uu(p,function(E){return rr(l,Lu(E))})}function Kd(l,p){if(!(l&&l.length))return[];var E=uh(l);return p==null?E:rr(E,function(I){return wn(p,t,I)})}var hw=Ct(function(l,p){return Fr(l)?ro(l,p):[]}),pw=Ct(function(l){return Kf(Pi(l,Fr))}),dw=Ct(function(l){var p=li(l);return Fr(p)&&(p=t),Kf(Pi(l,Fr),nt(p,2))}),gw=Ct(function(l){var p=li(l);return p=typeof p=="function"?p:t,Kf(Pi(l,Fr),t,p)}),vw=Ct(uh);function mw(l,p){return cd(l||[],p||[],to)}function ww(l,p){return cd(l||[],p||[],so)}var bw=Ct(function(l){var p=l.length,E=p>1?l[p-1]:t;return E=typeof E=="function"?(l.pop(),E):t,Kd(l,E)});function zd(l){var p=M(l);return p.__chain__=!0,p}function _w(l,p){return p(l),l}function $c(l,p){return p(l)}var Ew=hs(function(l){var p=l.length,E=p?l[0]:0,I=this.__wrapped__,T=function(q){return $f(q,l)};return p>1||this.__actions__.length||!(I instanceof It)||!ps(E)?this.thru(T):(I=I.slice(E,+E+(p?1:0)),I.__actions__.push({func:$c,args:[T],thisArg:t}),new Rn(I,this.__chain__).thru(function(q){return p&&!q.length&&q.push(t),q}))});function Aw(){return zd(this)}function yw(){return new Rn(this.value(),this.__chain__)}function Sw(){this.__values__===t&&(this.__values__=a0(this.value()));var l=this.__index__>=this.__values__.length,p=l?t:this.__values__[this.__index__++];return{done:l,value:p}}function Dw(){return this}function Fw(l){for(var p,E=this;E instanceof Ga;){var I=Hd(E);I.__index__=0,I.__values__=t,p?T.__wrapped__=I:p=I;var T=I;E=E.__wrapped__}return T.__wrapped__=l,p}function Cw(){var l=this.__wrapped__;if(l instanceof It){var p=l;return this.__actions__.length&&(p=new It(this)),p=p.reverse(),p.__actions__.push({func:$c,args:[ah],thisArg:t}),new Rn(p,this.__chain__)}return this.thru(ah)}function Iw(){return od(this.__wrapped__,this.__actions__)}var Pw=Sc(function(l,p,E){Ut.call(l,E)?++l[E]:ls(l,E,1)});function Bw(l,p,E){var I=vt(l)?Xo:_m;return E&&An(l,p,E)&&(p=t),I(l,nt(p,3))}function Rw(l,p){var E=vt(l)?Pi:Kp;return E(l,nt(p,3))}var $w=bd(jd),kw=bd(Ud);function xw(l,p){return nn(kc(l,p),1)}function Tw(l,p){return nn(kc(l,p),W)}function Ow(l,p,E){return E=E===t?1:At(E),nn(kc(l,p),E)}function Gd(l,p){var E=vt(l)?Pn:Ns;return E(l,nt(p,3))}function Wd(l,p){var E=vt(l)?af:Vp;return E(l,nt(p,3))}var Nw=Sc(function(l,p,E){Ut.call(l,E)?l[E].push(p):ls(l,E,[p])});function Lw(l,p,E,I){l=kn(l)?l:Qa(l),E=E&&!I?At(E):0;var T=l.length;return E<0&&(E=Dr(T+E,0)),Lc(l)?E<=T&&l.indexOf(p,E)>-1:!!T&&Bs(l,p,E)>-1}var Hw=Ct(function(l,p,E){var I=-1,T=typeof p=="function",q=kn(l)?le(l.length):[];return Ns(l,function(X){q[++I]=T?wn(p,X,E):no(X,p,E)}),q}),jw=Sc(function(l,p,E){ls(l,E,p)});function kc(l,p){var E=vt(l)?rr:Xp;return E(l,nt(p,3))}function Uw(l,p,E,I){return l==null?[]:(vt(p)||(p=p==null?[]:[p]),E=I?t:E,vt(E)||(E=E==null?[]:[E]),td(l,p,E))}var Mw=Sc(function(l,p,E){l[E?0:1].push(p)},function(){return[[],[]]});function qw(l,p,E){var I=vt(l)?Ou:tc,T=arguments.length<3;return I(l,nt(p,4),E,T,Ns)}function Vw(l,p,E){var I=vt(l)?uf:tc,T=arguments.length<3;return I(l,nt(p,4),E,T,Vp)}function Kw(l,p){var E=vt(l)?Pi:Kp;return E(l,Oc(nt(p,3)))}function zw(l){var p=vt(l)?jp:Lm;return p(l)}function Gw(l,p,E){(E?An(l,p,E):p===t)?p=1:p=At(p);var I=vt(l)?gm:Hm;return I(l,p)}function Ww(l){var p=vt(l)?vm:Um;return p(l)}function Yw(l){if(l==null)return 0;if(kn(l))return Lc(l)?fn(l):l.length;var p=pn(l);return p==ke||p==qt?l.size:Lf(l).length}function Jw(l,p,E){var I=vt(l)?Nu:Mm;return E&&An(l,p,E)&&(p=t),I(l,nt(p,3))}var Xw=Ct(function(l,p){if(l==null)return[];var E=p.length;return E>1&&An(l,p[0],p[1])?p=[]:E>2&&An(p[0],p[1],p[2])&&(p=[p[0]]),td(l,nn(p,1),[])}),xc=Af||function(){return $r.Date.now()};function Zw(l,p){if(typeof p!="function")throw new _n(o);return l=At(l),function(){if(--l<1)return p.apply(this,arguments)}}function Yd(l,p,E){return p=E?t:p,p=l&&p==null?l.length:p,fs(l,O,t,t,t,t,p)}function Jd(l,p){var E;if(typeof p!="function")throw new _n(o);return l=At(l),function(){return--l>0&&(E=p.apply(this,arguments)),l<=1&&(p=t),E}}var oh=Ct(function(l,p,E){var I=y;if(E.length){var T=Jn(E,Xa(oh));I|=$}return fs(l,I,p,E,T)}),Xd=Ct(function(l,p,E){var I=y|m;if(E.length){var T=Jn(E,Xa(Xd));I|=$}return fs(p,I,l,E,T)});function Zd(l,p,E){p=E?t:p;var I=fs(l,S,t,t,t,t,t,p);return I.placeholder=Zd.placeholder,I}function Qd(l,p,E){p=E?t:p;var I=fs(l,F,t,t,t,t,t,p);return I.placeholder=Qd.placeholder,I}function e0(l,p,E){var I,T,q,X,Q,se,Ee=0,Ae=!1,Se=!1,Ne=!0;if(typeof l!="function")throw new _n(o);p=fi(p)||0,dr(E)&&(Ae=!!E.leading,Se="maxWait"in E,q=Se?Dr(fi(E.maxWait)||0,p):q,Ne="trailing"in E?!!E.trailing:Ne);function We(Cr){var yi=I,vs=T;return I=T=t,Ee=Cr,X=l.apply(vs,yi),X}function st(Cr){return Ee=Cr,Q=oo(Rt,p),Ae?We(Cr):X}function Dt(Cr){var yi=Cr-se,vs=Cr-Ee,b0=p-yi;return Se?Ur(b0,q-vs):b0}function at(Cr){var yi=Cr-se,vs=Cr-Ee;return se===t||yi>=p||yi<0||Se&&vs>=q}function Rt(){var Cr=xc();if(at(Cr))return xt(Cr);Q=oo(Rt,Dt(Cr))}function xt(Cr){return Q=t,Ne&&I?We(Cr):(I=T=t,X)}function Qn(){Q!==t&&ld(Q),Ee=0,I=se=T=Q=t}function yn(){return Q===t?X:xt(xc())}function ei(){var Cr=xc(),yi=at(Cr);if(I=arguments,T=this,se=Cr,yi){if(Q===t)return st(se);if(Se)return ld(Q),Q=oo(Rt,p),We(se)}return Q===t&&(Q=oo(Rt,p)),X}return ei.cancel=Qn,ei.flush=yn,ei}var Qw=Ct(function(l,p){return qp(l,1,p)}),eb=Ct(function(l,p,E){return qp(l,fi(p)||0,E)});function tb(l){return fs(l,H)}function Tc(l,p){if(typeof l!="function"||p!=null&&typeof p!="function")throw new _n(o);var E=function(){var I=arguments,T=p?p.apply(this,I):I[0],q=E.cache;if(q.has(T))return q.get(T);var X=l.apply(this,I);return E.cache=q.set(T,X)||q,X};return E.cache=new(Tc.Cache||w),E}Tc.Cache=w;function Oc(l){if(typeof l!="function")throw new _n(o);return function(){var p=arguments;switch(p.length){case 0:return!l.call(this);case 1:return!l.call(this,p[0]);case 2:return!l.call(this,p[0],p[1]);case 3:return!l.call(this,p[0],p[1],p[2])}return!l.apply(this,p)}}function rb(l){return Jd(2,l)}var nb=qm(function(l,p){p=p.length==1&&vt(p[0])?rr(p[0],bn(nt())):rr(nn(p,1),bn(nt()));var E=p.length;return Ct(function(I){for(var T=-1,q=Ur(I.length,E);++T<q;)I[T]=p[T].call(this,I[T]);return wn(l,this,I)})}),ch=Ct(function(l,p){var E=Jn(p,Xa(ch));return fs(l,$,t,p,E)}),t0=Ct(function(l,p){var E=Jn(p,Xa(t0));return fs(l,k,t,p,E)}),ib=hs(function(l,p){return fs(l,z,t,t,t,p)});function sb(l,p){if(typeof l!="function")throw new _n(o);return p=p===t?p:At(p),Ct(l,p)}function ab(l,p){if(typeof l!="function")throw new _n(o);return p=p==null?0:Dr(At(p),0),Ct(function(E){var I=E[p],T=js(E,0,p);return I&&Bi(T,I),wn(l,this,T)})}function ub(l,p,E){var I=!0,T=!0;if(typeof l!="function")throw new _n(o);return dr(E)&&(I="leading"in E?!!E.leading:I,T="trailing"in E?!!E.trailing:T),e0(l,p,{leading:I,maxWait:p,trailing:T})}function ob(l){return Yd(l,1)}function cb(l,p){return ch(Gf(p),l)}function lb(){if(!arguments.length)return[];var l=arguments[0];return vt(l)?l:[l]}function fb(l){return oi(l,A)}function hb(l,p){return p=typeof p=="function"?p:t,oi(l,A,p)}function pb(l){return oi(l,f|A)}function db(l,p){return p=typeof p=="function"?p:t,oi(l,f|A,p)}function gb(l,p){return p==null||Mp(l,p,Wr(p))}function Ai(l,p){return l===p||l!==l&&p!==p}var vb=Ic(Tf),mb=Ic(function(l,p){return l>=p}),da=Wp((function(){return arguments})())?Wp:function(l){return wr(l)&&Ut.call(l,"callee")&&!Ma.call(l,"callee")},vt=le.isArray,wb=Ko?bn(Ko):Fm;function kn(l){return l!=null&&Nc(l.length)&&!ds(l)}function Fr(l){return wr(l)&&kn(l)}function bb(l){return l===!0||l===!1||wr(l)&&En(l)==dt}var Us=yf||_h,_b=zo?bn(zo):Cm;function Eb(l){return wr(l)&&l.nodeType===1&&!co(l)}function Ab(l){if(l==null)return!0;if(kn(l)&&(vt(l)||typeof l=="string"||typeof l.splice=="function"||Us(l)||Za(l)||da(l)))return!l.length;var p=pn(l);if(p==ke||p==qt)return!l.size;if(uo(l))return!Lf(l).length;for(var E in l)if(Ut.call(l,E))return!1;return!0}function yb(l,p){return io(l,p)}function Sb(l,p,E){E=typeof E=="function"?E:t;var I=E?E(l,p):t;return I===t?io(l,p,t,E):!!I}function lh(l){if(!wr(l))return!1;var p=En(l);return p==Ye||p==Je||typeof l.message=="string"&&typeof l.name=="string"&&!co(l)}function Db(l){return typeof l=="number"&&zu(l)}function ds(l){if(!dr(l))return!1;var p=En(l);return p==Xe||p==De||p==_t||p==ar}function r0(l){return typeof l=="number"&&l==At(l)}function Nc(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=Z}function dr(l){var p=typeof l;return l!=null&&(p=="object"||p=="function")}function wr(l){return l!=null&&typeof l=="object"}var n0=Go?bn(Go):Pm;function Fb(l,p){return l===p||Nf(l,p,eh(p))}function Cb(l,p,E){return E=typeof E=="function"?E:t,Nf(l,p,eh(p),E)}function Ib(l){return i0(l)&&l!=+l}function Pb(l){if(h2(l))throw new pt(a);return Yp(l)}function Bb(l){return l===null}function Rb(l){return l==null}function i0(l){return typeof l=="number"||wr(l)&&En(l)==fe}function co(l){if(!wr(l)||En(l)!=Te)return!1;var p=Ua(l);if(p===null)return!0;var E=Ut.call(p,"constructor")&&p.constructor;return typeof E=="function"&&E instanceof E&&La.call(E)==Ku}var fh=Wo?bn(Wo):Bm;function $b(l){return r0(l)&&l>=-Z&&l<=Z}var s0=Yo?bn(Yo):Rm;function Lc(l){return typeof l=="string"||!vt(l)&&wr(l)&&En(l)==Oe}function Zn(l){return typeof l=="symbol"||wr(l)&&En(l)==Ot}var Za=Jo?bn(Jo):$m;function kb(l){return l===t}function xb(l){return wr(l)&&pn(l)==Kr}function Tb(l){return wr(l)&&En(l)==yt}var Ob=Ic(Hf),Nb=Ic(function(l,p){return l<=p});function a0(l){if(!l)return[];if(kn(l))return Lc(l)?Bn(l):$n(l);if(sa&&l[sa])return Bt(l[sa]());var p=pn(l),E=p==ke?nc:p==qt?lt:Qa;return E(l)}function gs(l){if(!l)return l===0?l:0;if(l=fi(l),l===W||l===-W){var p=l<0?-1:1;return p*ae}return l===l?l:0}function At(l){var p=gs(l),E=p%1;return p===p?E?p-E:p:0}function u0(l){return l?la(At(l),0,Ie):0}function fi(l){if(typeof l=="number")return l;if(Zn(l))return He;if(dr(l)){var p=typeof l.valueOf=="function"?l.valueOf():l;l=dr(p)?p+"":p}if(typeof l!="string")return l===0?l:+l;l=rc(l);var E=Ci.test(l);return E||Cn.test(l)?rf(l.slice(2),E?2:8):wi.test(l)?He:+l}function o0(l){return Li(l,xn(l))}function Lb(l){return l?la(At(l),-Z,Z):l===0?l:0}function Gt(l){return l==null?"":Xn(l)}var Hb=Ya(function(l,p){if(uo(p)||kn(p)){Li(p,Wr(p),l);return}for(var E in p)Ut.call(p,E)&&to(l,E,p[E])}),c0=Ya(function(l,p){Li(p,xn(p),l)}),Hc=Ya(function(l,p,E,I){Li(p,xn(p),l,I)}),jb=Ya(function(l,p,E,I){Li(p,Wr(p),l,I)}),Ub=hs($f);function Mb(l,p){var E=os(l);return p==null?E:Up(E,p)}var qb=Ct(function(l,p){l=Yt(l);var E=-1,I=p.length,T=I>2?p[2]:t;for(T&&An(p[0],p[1],T)&&(I=1);++E<I;)for(var q=p[E],X=xn(q),Q=-1,se=X.length;++Q<se;){var Ee=X[Q],Ae=l[Ee];(Ae===t||Ai(Ae,$s[Ee])&&!Ut.call(l,Ee))&&(l[Ee]=q[Ee])}return l}),Vb=Ct(function(l){return l.push(t,Fd),wn(l0,t,l)});function Kb(l,p){return Zo(l,nt(p,3),Ni)}function zb(l,p){return Zo(l,nt(p,3),xf)}function Gb(l,p){return l==null?l:kf(l,nt(p,3),xn)}function Wb(l,p){return l==null?l:zp(l,nt(p,3),xn)}function Yb(l,p){return l&&Ni(l,nt(p,3))}function Jb(l,p){return l&&xf(l,nt(p,3))}function Xb(l){return l==null?[]:_c(l,Wr(l))}function Zb(l){return l==null?[]:_c(l,xn(l))}function hh(l,p,E){var I=l==null?t:fa(l,p);return I===t?E:I}function Qb(l,p){return l!=null&&Pd(l,p,Am)}function ph(l,p){return l!=null&&Pd(l,p,ym)}var e_=Ed(function(l,p,E){p!=null&&typeof p.toString!="function"&&(p=ja.call(p)),l[p]=E},gh(Tn)),t_=Ed(function(l,p,E){p!=null&&typeof p.toString!="function"&&(p=ja.call(p)),Ut.call(l,p)?l[p].push(E):l[p]=[E]},nt),r_=Ct(no);function Wr(l){return kn(l)?Hp(l):Lf(l)}function xn(l){return kn(l)?Hp(l,!0):km(l)}function n_(l,p){var E={};return p=nt(p,3),Ni(l,function(I,T,q){ls(E,p(I,T,q),I)}),E}function i_(l,p){var E={};return p=nt(p,3),Ni(l,function(I,T,q){ls(E,T,p(I,T,q))}),E}var s_=Ya(function(l,p,E){Ec(l,p,E)}),l0=Ya(function(l,p,E,I){Ec(l,p,E,I)}),a_=hs(function(l,p){var E={};if(l==null)return E;var I=!1;p=rr(p,function(q){return q=Hs(q,l),I||(I=q.length>1),q}),Li(l,Zf(l),E),I&&(E=oi(E,f|b|A,e2));for(var T=p.length;T--;)Vf(E,p[T]);return E});function u_(l,p){return f0(l,Oc(nt(p)))}var o_=hs(function(l,p){return l==null?{}:Tm(l,p)});function f0(l,p){if(l==null)return{};var E=rr(Zf(l),function(I){return[I]});return p=nt(p),rd(l,E,function(I,T){return p(I,T[0])})}function c_(l,p,E){p=Hs(p,l);var I=-1,T=p.length;for(T||(T=1,l=t);++I<T;){var q=l==null?t:l[Hi(p[I])];q===t&&(I=T,q=E),l=ds(q)?q.call(l):q}return l}function l_(l,p,E){return l==null?l:so(l,p,E)}function f_(l,p,E,I){return I=typeof I=="function"?I:t,l==null?l:so(l,p,E,I)}var h0=Sd(Wr),p0=Sd(xn);function h_(l,p,E){var I=vt(l),T=I||Us(l)||Za(l);if(p=nt(p,4),E==null){var q=l&&l.constructor;T?E=I?new q:[]:dr(l)?E=ds(q)?os(Ua(l)):{}:E={}}return(T?Pn:Ni)(l,function(X,Q,se){return p(E,X,Q,se)}),E}function p_(l,p){return l==null?!0:Vf(l,p)}function d_(l,p,E){return l==null?l:ud(l,p,Gf(E))}function g_(l,p,E,I){return I=typeof I=="function"?I:t,l==null?l:ud(l,p,Gf(E),I)}function Qa(l){return l==null?[]:Mu(l,Wr(l))}function v_(l){return l==null?[]:Mu(l,xn(l))}function m_(l,p,E){return E===t&&(E=p,p=t),E!==t&&(E=fi(E),E=E===E?E:0),p!==t&&(p=fi(p),p=p===p?p:0),la(fi(l),p,E)}function w_(l,p,E){return p=gs(p),E===t?(E=p,p=0):E=gs(E),l=fi(l),Sm(l,p,E)}function b_(l,p,E){if(E&&typeof E!="boolean"&&An(l,p,E)&&(p=E=t),E===t&&(typeof p=="boolean"?(E=p,p=t):typeof l=="boolean"&&(E=l,l=t)),l===t&&p===t?(l=0,p=1):(l=gs(l),p===t?(p=l,l=0):p=gs(p)),l>p){var I=l;l=p,p=I}if(E||l%1||p%1){var T=Gu();return Ur(l+T*(p-l+tf("1e-"+((T+"").length-1))),p)}return Uf(l,p)}var __=Ja(function(l,p,E){return p=p.toLowerCase(),l+(E?d0(p):p)});function d0(l){return dh(Gt(l).toLowerCase())}function g0(l){return l=Gt(l),l&&l.replace(Ii,Oa).replace(jl,"")}function E_(l,p,E){l=Gt(l),p=Xn(p);var I=l.length;E=E===t?I:la(At(E),0,I);var T=E;return E-=p.length,E>=0&&l.slice(E,T)==p}function A_(l){return l=Gt(l),l&&jt.test(l)?l.replace(Xi,ue):l}function y_(l){return l=Gt(l),l&&Fu.test(l)?l.replace(Cs,"\\$&"):l}var S_=Ja(function(l,p,E){return l+(E?"-":"")+p.toLowerCase()}),D_=Ja(function(l,p,E){return l+(E?" ":"")+p.toLowerCase()}),F_=wd("toLowerCase");function C_(l,p,E){l=Gt(l),p=At(p);var I=p?fn(l):0;if(!p||I>=p)return l;var T=(p-I)/2;return Cc(ss(T),E)+l+Cc(xi(T),E)}function I_(l,p,E){l=Gt(l),p=At(p);var I=p?fn(l):0;return p&&I<p?l+Cc(p-I,E):l}function P_(l,p,E){l=Gt(l),p=At(p);var I=p?fn(l):0;return p&&I<p?Cc(p-I,E)+l:l}function B_(l,p,E){return E||p==null?p=0:p&&(p=+p),aa(Gt(l).replace(Zs,""),p||0)}function R_(l,p,E){return(E?An(l,p,E):p===t)?p=1:p=At(p),Mf(Gt(l),p)}function $_(){var l=arguments,p=Gt(l[0]);return l.length<3?p:p.replace(l[1],l[2])}var k_=Ja(function(l,p,E){return l+(E?"_":"")+p.toLowerCase()});function x_(l,p,E){return E&&typeof E!="number"&&An(l,p,E)&&(p=E=t),E=E===t?Ie:E>>>0,E?(l=Gt(l),l&&(typeof p=="string"||p!=null&&!fh(p))&&(p=Xn(p),!p&&na(l))?js(Bn(l),0,E):l.split(p,E)):[]}var T_=Ja(function(l,p,E){return l+(E?" ":"")+dh(p)});function O_(l,p,E){return l=Gt(l),E=E==null?0:la(At(E),0,l.length),p=Xn(p),l.slice(E,E+p.length)==p}function N_(l,p,E){var I=M.templateSettings;E&&An(l,p,E)&&(p=t),l=Gt(l),p=Hc({},p,I,Dd);var T=Hc({},p.imports,I.imports,Dd),q=Wr(T),X=Mu(T,q),Q,se,Ee=0,Ae=p.interpolate||bi,Se="__p += '",Ne=qu((p.escape||bi).source+"|"+Ae.source+"|"+(Ae===Kn?Or:bi).source+"|"+(p.evaluate||bi).source+"|$","g"),We="//# sourceURL="+(Ut.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++zl+"]")+`
`;l.replace(Ne,function(at,Rt,xt,Qn,yn,ei){return xt||(xt=Qn),Se+=l.slice(Ee,ei).replace(Cu,ra),Rt&&(Q=!0,Se+=`' +
__e(`+Rt+`) +
'`),yn&&(se=!0,Se+=`';
`+yn+`;
__p += '`),xt&&(Se+=`' +
((__t = (`+xt+`)) == null ? '' : __t) +
'`),Ee=ei+at.length,at}),Se+=`';
`;var st=Ut.call(p,"variable")&&p.variable;if(!st)Se=`with (obj) {
`+Se+`
}
`;else if(wt.test(st))throw new pt(c);Se=(se?Se.replace(Vn,""):Se).replace(Ir,"$1").replace(Fn,"$1;"),Se="function("+(st||"obj")+`) {
`+(st?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Q?", __e = _.escape":"")+(se?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Se+`return __p
}`;var Dt=m0(function(){return Nt(q,We+"return "+Se).apply(t,X)});if(Dt.source=Se,lh(Dt))throw Dt;return Dt}function L_(l){return Gt(l).toLowerCase()}function H_(l){return Gt(l).toUpperCase()}function j_(l,p,E){if(l=Gt(l),l&&(E||p===t))return rc(l);if(!l||!(p=Xn(p)))return l;var I=Bn(l),T=Bn(p),q=je(I,T),X=rs(I,T)+1;return js(I,q,X).join("")}function U_(l,p,E){if(l=Gt(l),l&&(E||p===t))return l.slice(0,Rs(l)+1);if(!l||!(p=Xn(p)))return l;var I=Bn(l),T=rs(I,Bn(p))+1;return js(I,0,T).join("")}function M_(l,p,E){if(l=Gt(l),l&&(E||p===t))return l.replace(Zs,"");if(!l||!(p=Xn(p)))return l;var I=Bn(l),T=je(I,Bn(p));return js(I,T).join("")}function q_(l,p){var E=P,I=R;if(dr(p)){var T="separator"in p?p.separator:T;E="length"in p?At(p.length):E,I="omission"in p?Xn(p.omission):I}l=Gt(l);var q=l.length;if(na(l)){var X=Bn(l);q=X.length}if(E>=q)return l;var Q=E-fn(I);if(Q<1)return I;var se=X?js(X,0,Q).join(""):l.slice(0,Q);if(T===t)return se+I;if(X&&(Q+=se.length-Q),fh(T)){if(l.slice(Q).search(T)){var Ee,Ae=se;for(T.global||(T=qu(T.source,Gt(fr.exec(T))+"g")),T.lastIndex=0;Ee=T.exec(Ae);)var Se=Ee.index;se=se.slice(0,Se===t?Q:Se)}}else if(l.indexOf(Xn(T),Q)!=Q){var Ne=se.lastIndexOf(T);Ne>-1&&(se=se.slice(0,Ne))}return se+I}function V_(l){return l=Gt(l),l&&vi.test(l)?l.replace(Ds,we):l}var K_=Ja(function(l,p,E){return l+(E?" ":"")+p.toUpperCase()}),dh=wd("toUpperCase");function v0(l,p,E){return l=Gt(l),p=E?t:p,p===t?Lp(l)?sc(l):lf(l):l.match(p)||[]}var m0=Ct(function(l,p){try{return wn(l,t,p)}catch(E){return lh(E)?E:new pt(E)}}),z_=hs(function(l,p){return Pn(p,function(E){E=Hi(E),ls(l,E,oh(l[E],l))}),l});function G_(l){var p=l==null?0:l.length,E=nt();return l=p?rr(l,function(I){if(typeof I[1]!="function")throw new _n(o);return[E(I[0]),I[1]]}):[],Ct(function(I){for(var T=-1;++T<p;){var q=l[T];if(wn(q[0],this,I))return wn(q[1],this,I)}})}function W_(l){return bm(oi(l,f))}function gh(l){return function(){return l}}function Y_(l,p){return l==null||l!==l?p:l}var J_=_d(),X_=_d(!0);function Tn(l){return l}function vh(l){return Jp(typeof l=="function"?l:oi(l,f))}function Z_(l){return Zp(oi(l,f))}function Q_(l,p){return Qp(l,oi(p,f))}var eE=Ct(function(l,p){return function(E){return no(E,l,p)}}),tE=Ct(function(l,p){return function(E){return no(l,E,p)}});function mh(l,p,E){var I=Wr(p),T=_c(p,I);E==null&&!(dr(p)&&(T.length||!I.length))&&(E=p,p=l,l=this,T=_c(p,Wr(p)));var q=!(dr(E)&&"chain"in E)||!!E.chain,X=ds(l);return Pn(T,function(Q){var se=p[Q];l[Q]=se,X&&(l.prototype[Q]=function(){var Ee=this.__chain__;if(q||Ee){var Ae=l(this.__wrapped__),Se=Ae.__actions__=$n(this.__actions__);return Se.push({func:se,args:arguments,thisArg:l}),Ae.__chain__=Ee,Ae}return se.apply(l,Bi([this.value()],arguments))})}),l}function rE(){return $r._===this&&($r._=_f),this}function wh(){}function nE(l){return l=At(l),Ct(function(p){return ed(p,l)})}var iE=Yf(rr),sE=Yf(Xo),aE=Yf(Nu);function w0(l){return rh(l)?Lu(Hi(l)):Om(l)}function uE(l){return function(p){return l==null?t:fa(l,p)}}var oE=Ad(),cE=Ad(!0);function bh(){return[]}function _h(){return!1}function lE(){return{}}function fE(){return""}function hE(){return!0}function pE(l,p){if(l=At(l),l<1||l>Z)return[];var E=Ie,I=Ur(l,Ie);p=nt(p),l-=Ie;for(var T=Uu(I,p);++E<l;)p(E);return T}function dE(l){return vt(l)?rr(l,Hi):Zn(l)?[l]:$n(Ld(Gt(l)))}function gE(l){var p=++Vu;return Gt(l)+p}var vE=Fc(function(l,p){return l+p},0),mE=Jf("ceil"),wE=Fc(function(l,p){return l/p},1),bE=Jf("floor");function _E(l){return l&&l.length?bc(l,Tn,Tf):t}function EE(l,p){return l&&l.length?bc(l,nt(p,2),Tf):t}function AE(l){return ec(l,Tn)}function yE(l,p){return ec(l,nt(p,2))}function SE(l){return l&&l.length?bc(l,Tn,Hf):t}function DE(l,p){return l&&l.length?bc(l,nt(p,2),Hf):t}var FE=Fc(function(l,p){return l*p},1),CE=Jf("round"),IE=Fc(function(l,p){return l-p},0);function PE(l){return l&&l.length?ju(l,Tn):0}function BE(l,p){return l&&l.length?ju(l,nt(p,2)):0}return M.after=Zw,M.ary=Yd,M.assign=Hb,M.assignIn=c0,M.assignInWith=Hc,M.assignWith=jb,M.at=Ub,M.before=Jd,M.bind=oh,M.bindAll=z_,M.bindKey=Xd,M.castArray=lb,M.chain=zd,M.chunk=b2,M.compact=_2,M.concat=E2,M.cond=G_,M.conforms=W_,M.constant=gh,M.countBy=Pw,M.create=Mb,M.curry=Zd,M.curryRight=Qd,M.debounce=e0,M.defaults=qb,M.defaultsDeep=Vb,M.defer=Qw,M.delay=eb,M.difference=A2,M.differenceBy=y2,M.differenceWith=S2,M.drop=D2,M.dropRight=F2,M.dropRightWhile=C2,M.dropWhile=I2,M.fill=P2,M.filter=Rw,M.flatMap=xw,M.flatMapDeep=Tw,M.flatMapDepth=Ow,M.flatten=Md,M.flattenDeep=B2,M.flattenDepth=R2,M.flip=tb,M.flow=J_,M.flowRight=X_,M.fromPairs=$2,M.functions=Xb,M.functionsIn=Zb,M.groupBy=Nw,M.initial=x2,M.intersection=T2,M.intersectionBy=O2,M.intersectionWith=N2,M.invert=e_,M.invertBy=t_,M.invokeMap=Hw,M.iteratee=vh,M.keyBy=jw,M.keys=Wr,M.keysIn=xn,M.map=kc,M.mapKeys=n_,M.mapValues=i_,M.matches=Z_,M.matchesProperty=Q_,M.memoize=Tc,M.merge=s_,M.mergeWith=l0,M.method=eE,M.methodOf=tE,M.mixin=mh,M.negate=Oc,M.nthArg=nE,M.omit=a_,M.omitBy=u_,M.once=rb,M.orderBy=Uw,M.over=iE,M.overArgs=nb,M.overEvery=sE,M.overSome=aE,M.partial=ch,M.partialRight=t0,M.partition=Mw,M.pick=o_,M.pickBy=f0,M.property=w0,M.propertyOf=uE,M.pull=U2,M.pullAll=Vd,M.pullAllBy=M2,M.pullAllWith=q2,M.pullAt=V2,M.range=oE,M.rangeRight=cE,M.rearg=ib,M.reject=Kw,M.remove=K2,M.rest=sb,M.reverse=ah,M.sampleSize=Gw,M.set=l_,M.setWith=f_,M.shuffle=Ww,M.slice=z2,M.sortBy=Xw,M.sortedUniq=Q2,M.sortedUniqBy=ew,M.split=x_,M.spread=ab,M.tail=tw,M.take=rw,M.takeRight=nw,M.takeRightWhile=iw,M.takeWhile=sw,M.tap=_w,M.throttle=ub,M.thru=$c,M.toArray=a0,M.toPairs=h0,M.toPairsIn=p0,M.toPath=dE,M.toPlainObject=o0,M.transform=h_,M.unary=ob,M.union=aw,M.unionBy=uw,M.unionWith=ow,M.uniq=cw,M.uniqBy=lw,M.uniqWith=fw,M.unset=p_,M.unzip=uh,M.unzipWith=Kd,M.update=d_,M.updateWith=g_,M.values=Qa,M.valuesIn=v_,M.without=hw,M.words=v0,M.wrap=cb,M.xor=pw,M.xorBy=dw,M.xorWith=gw,M.zip=vw,M.zipObject=mw,M.zipObjectDeep=ww,M.zipWith=bw,M.entries=h0,M.entriesIn=p0,M.extend=c0,M.extendWith=Hc,mh(M,M),M.add=vE,M.attempt=m0,M.camelCase=__,M.capitalize=d0,M.ceil=mE,M.clamp=m_,M.clone=fb,M.cloneDeep=pb,M.cloneDeepWith=db,M.cloneWith=hb,M.conformsTo=gb,M.deburr=g0,M.defaultTo=Y_,M.divide=wE,M.endsWith=E_,M.eq=Ai,M.escape=A_,M.escapeRegExp=y_,M.every=Bw,M.find=$w,M.findIndex=jd,M.findKey=Kb,M.findLast=kw,M.findLastIndex=Ud,M.findLastKey=zb,M.floor=bE,M.forEach=Gd,M.forEachRight=Wd,M.forIn=Gb,M.forInRight=Wb,M.forOwn=Yb,M.forOwnRight=Jb,M.get=hh,M.gt=vb,M.gte=mb,M.has=Qb,M.hasIn=ph,M.head=qd,M.identity=Tn,M.includes=Lw,M.indexOf=k2,M.inRange=w_,M.invoke=r_,M.isArguments=da,M.isArray=vt,M.isArrayBuffer=wb,M.isArrayLike=kn,M.isArrayLikeObject=Fr,M.isBoolean=bb,M.isBuffer=Us,M.isDate=_b,M.isElement=Eb,M.isEmpty=Ab,M.isEqual=yb,M.isEqualWith=Sb,M.isError=lh,M.isFinite=Db,M.isFunction=ds,M.isInteger=r0,M.isLength=Nc,M.isMap=n0,M.isMatch=Fb,M.isMatchWith=Cb,M.isNaN=Ib,M.isNative=Pb,M.isNil=Rb,M.isNull=Bb,M.isNumber=i0,M.isObject=dr,M.isObjectLike=wr,M.isPlainObject=co,M.isRegExp=fh,M.isSafeInteger=$b,M.isSet=s0,M.isString=Lc,M.isSymbol=Zn,M.isTypedArray=Za,M.isUndefined=kb,M.isWeakMap=xb,M.isWeakSet=Tb,M.join=L2,M.kebabCase=S_,M.last=li,M.lastIndexOf=H2,M.lowerCase=D_,M.lowerFirst=F_,M.lt=Ob,M.lte=Nb,M.max=_E,M.maxBy=EE,M.mean=AE,M.meanBy=yE,M.min=SE,M.minBy=DE,M.stubArray=bh,M.stubFalse=_h,M.stubObject=lE,M.stubString=fE,M.stubTrue=hE,M.multiply=FE,M.nth=j2,M.noConflict=rE,M.noop=wh,M.now=xc,M.pad=C_,M.padEnd=I_,M.padStart=P_,M.parseInt=B_,M.random=b_,M.reduce=qw,M.reduceRight=Vw,M.repeat=R_,M.replace=$_,M.result=c_,M.round=CE,M.runInContext=ne,M.sample=zw,M.size=Yw,M.snakeCase=k_,M.some=Jw,M.sortedIndex=G2,M.sortedIndexBy=W2,M.sortedIndexOf=Y2,M.sortedLastIndex=J2,M.sortedLastIndexBy=X2,M.sortedLastIndexOf=Z2,M.startCase=T_,M.startsWith=O_,M.subtract=IE,M.sum=PE,M.sumBy=BE,M.template=N_,M.times=pE,M.toFinite=gs,M.toInteger=At,M.toLength=u0,M.toLower=L_,M.toNumber=fi,M.toSafeInteger=Lb,M.toString=Gt,M.toUpper=H_,M.trim=j_,M.trimEnd=U_,M.trimStart=M_,M.truncate=q_,M.unescape=V_,M.uniqueId=gE,M.upperCase=K_,M.upperFirst=dh,M.each=Gd,M.eachRight=Wd,M.first=qd,mh(M,(function(){var l={};return Ni(M,function(p,E){Ut.call(M.prototype,E)||(l[E]=p)}),l})(),{chain:!1}),M.VERSION=r,Pn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){M[l].placeholder=M}),Pn(["drop","take"],function(l,p){It.prototype[l]=function(E){E=E===t?1:Dr(At(E),0);var I=this.__filtered__&&!p?new It(this):this.clone();return I.__filtered__?I.__takeCount__=Ur(E,I.__takeCount__):I.__views__.push({size:Ur(E,Ie),type:l+(I.__dir__<0?"Right":"")}),I},It.prototype[l+"Right"]=function(E){return this.reverse()[l](E).reverse()}}),Pn(["filter","map","takeWhile"],function(l,p){var E=p+1,I=E==V||E==G;It.prototype[l]=function(T){var q=this.clone();return q.__iteratees__.push({iteratee:nt(T,3),type:E}),q.__filtered__=q.__filtered__||I,q}}),Pn(["head","last"],function(l,p){var E="take"+(p?"Right":"");It.prototype[l]=function(){return this[E](1).value()[0]}}),Pn(["initial","tail"],function(l,p){var E="drop"+(p?"":"Right");It.prototype[l]=function(){return this.__filtered__?new It(this):this[E](1)}}),It.prototype.compact=function(){return this.filter(Tn)},It.prototype.find=function(l){return this.filter(l).head()},It.prototype.findLast=function(l){return this.reverse().find(l)},It.prototype.invokeMap=Ct(function(l,p){return typeof l=="function"?new It(this):this.map(function(E){return no(E,l,p)})}),It.prototype.reject=function(l){return this.filter(Oc(nt(l)))},It.prototype.slice=function(l,p){l=At(l);var E=this;return E.__filtered__&&(l>0||p<0)?new It(E):(l<0?E=E.takeRight(-l):l&&(E=E.drop(l)),p!==t&&(p=At(p),E=p<0?E.dropRight(-p):E.take(p-l)),E)},It.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},It.prototype.toArray=function(){return this.take(Ie)},Ni(It.prototype,function(l,p){var E=/^(?:filter|find|map|reject)|While$/.test(p),I=/^(?:head|last)$/.test(p),T=M[I?"take"+(p=="last"?"Right":""):p],q=I||/^find/.test(p);T&&(M.prototype[p]=function(){var X=this.__wrapped__,Q=I?[1]:arguments,se=X instanceof It,Ee=Q[0],Ae=se||vt(X),Se=function(Rt){var xt=T.apply(M,Bi([Rt],Q));return I&&Ne?xt[0]:xt};Ae&&E&&typeof Ee=="function"&&Ee.length!=1&&(se=Ae=!1);var Ne=this.__chain__,We=!!this.__actions__.length,st=q&&!Ne,Dt=se&&!We;if(!q&&Ae){X=Dt?X:new It(this);var at=l.apply(X,Q);return at.__actions__.push({func:$c,args:[Se],thisArg:t}),new Rn(at,Ne)}return st&&Dt?l.apply(this,Q):(at=this.thru(Se),st?I?at.value()[0]:at.value():at)})}),Pn(["pop","push","shift","sort","splice","unshift"],function(l){var p=ns[l],E=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",I=/^(?:pop|shift)$/.test(l);M.prototype[l]=function(){var T=arguments;if(I&&!this.__chain__){var q=this.value();return p.apply(vt(q)?q:[],T)}return this[E](function(X){return p.apply(vt(X)?X:[],T)})}}),Ni(It.prototype,function(l,p){var E=M[p];if(E){var I=E.name+"";Ut.call(_i,I)||(_i[I]=[]),_i[I].push({name:p,func:E})}}),_i[Dc(t,m).name]=[{name:"wrapper",func:t}],It.prototype.clone=gc,It.prototype.reverse=Wa,It.prototype.value=Oi,M.prototype.at=Ew,M.prototype.chain=Aw,M.prototype.commit=yw,M.prototype.next=Sw,M.prototype.plant=Fw,M.prototype.reverse=Cw,M.prototype.toJSON=M.prototype.valueOf=M.prototype.value=Iw,M.prototype.first=M.prototype.head,sa&&(M.prototype[sa]=Dw),M}),$i=wf();typeof define=="function"&&typeof define.amd=="object"&&define.amd?($r._=$i,define(function(){return $i})):Qi?((Qi.exports=$i)._=$i,ku._=$i):$r._=$i}).call(yu)});var Bo=ot((exports,module)=>{function _array_like_to_array(t,r){(r==null||r>t.length)&&(r=t.length);for(var s=0,a=new Array(r);s<r;s++)a[s]=t[s];return a}function _array_with_holes(t){if(Array.isArray(t))return t}function _array_without_holes(t){if(Array.isArray(t))return _array_like_to_array(t)}function _assert_this_initialized(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _call_super(t,r,s){return r=_get_prototype_of(r),_possible_constructor_return(t,_is_native_reflect_construct()?Reflect.construct(r,s||[],_get_prototype_of(t).constructor):r.apply(t,s))}function _class_call_check(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _construct(t,r,s){return _is_native_reflect_construct()?_construct=Reflect.construct:_construct=function(a,o,c){var u=[null];u.push.apply(u,o);var h=Function.bind.apply(a,u),d=new h;return c&&_set_prototype_of(d,c.prototype),d},_construct.apply(null,arguments)}function _defineProperties(t,r){for(var s=0;s<r.length;s++){var a=r[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _create_class(t,r,s){return r&&_defineProperties(t.prototype,r),s&&_defineProperties(t,s),t}function _define_property(t,r,s){return r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function _get(t,r,s){return typeof Reflect<"u"&&Reflect.get?_get=Reflect.get:_get=function(a,o,c){var u=_super_prop_base(a,o);if(u){var h=Object.getOwnPropertyDescriptor(u,o);return h.get?h.get.call(c||a):h.value}},_get(t,r,s||t)}function _get_prototype_of(t){return _get_prototype_of=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},_get_prototype_of(t)}function _inherits(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_set_prototype_of(t,r)}function _instanceof(t,r){return r!=null&&typeof Symbol<"u"&&r[Symbol.hasInstance]?!!r[Symbol.hasInstance](t):t instanceof r}function _is_native_function(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function _iterable_to_array(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _iterable_to_array_limit(t,r){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var a=[],o=!0,c=!1,u,h;try{for(s=s.call(t);!(o=(u=s.next()).done)&&(a.push(u.value),!(r&&a.length===r));o=!0);}catch(d){c=!0,h=d}finally{try{!o&&s.return!=null&&s.return()}finally{if(c)throw h}}return a}}function _non_iterable_rest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _non_iterable_spread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _object_spread(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{},a=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(s).filter(function(o){return Object.getOwnPropertyDescriptor(s,o).enumerable}))),a.forEach(function(o){_define_property(t,o,s[o])})}return t}function ownKeys(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),s.push.apply(s,a)}return s}function _object_spread_props(t,r){return r=r??{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))}),t}function _possible_constructor_return(t,r){return r&&(_type_of(r)==="object"||typeof r=="function")?r:_assert_this_initialized(t)}function _set_prototype_of(t,r){return _set_prototype_of=Object.setPrototypeOf||function(s,a){return s.__proto__=a,s},_set_prototype_of(t,r)}function _sliced_to_array(t,r){return _array_with_holes(t)||_iterable_to_array_limit(t,r)||_unsupported_iterable_to_array(t,r)||_non_iterable_rest()}function _super_prop_base(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=_get_prototype_of(t),t!==null););return t}function _to_consumable_array(t){return _array_without_holes(t)||_iterable_to_array(t)||_unsupported_iterable_to_array(t)||_non_iterable_spread()}function _type_of(t){"@swc/helpers - typeof";return t&&typeof Symbol<"u"&&t.constructor===Symbol?"symbol":typeof t}function _unsupported_iterable_to_array(t,r){if(t){if(typeof t=="string")return _array_like_to_array(t,r);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(s);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return _array_like_to_array(t,r)}}function _wrap_native_super(t){var r=typeof Map=="function"?new Map:void 0;return _wrap_native_super=function(s){if(s===null||!_is_native_function(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(typeof r<"u"){if(r.has(s))return r.get(s);r.set(s,a)}function a(){return _construct(s,arguments,_get_prototype_of(this).constructor)}return a.prototype=Object.create(s.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),_set_prototype_of(a,s)},_wrap_native_super(t)}function _is_native_reflect_construct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_is_native_reflect_construct=function(){return!!t})()}(function(t,r){(typeof exports>"u"?"undefined":_type_of(exports))=="object"&&(typeof module>"u"?"undefined":_type_of(module))<"u"?module.exports=r():typeof define=="function"&&define.amd?define("peggy",r):t.peggy=r()})((typeof globalThis>"u"?"undefined":_type_of(globalThis))<"u"?globalThis:(typeof self>"u"?"undefined":_type_of(self))<"u"?self:exports,function(){var exports={},__exports=exports,module={exports},U=function(t,r){return function(){return r||t((r={exports:{}}).exports,r),r.exports}},Ve=U(function(t,r){"use strict";var s=(function(){function a(o,c){_class_call_check(this,a),this.source=o,this.start=c}return _create_class(a,[{key:"toString",value:function(){return String(this.source)}},{key:"offset",value:function(o){return{line:o.line+this.start.line-1,column:o.line===1?o.column+this.start.column-1:o.column,offset:o.offset+this.start.offset}}}],[{key:"offsetStart",value:function(o){return o.source&&typeof o.source.offset=="function"?o.source.offset(o.start):o.start}},{key:"offsetEnd",value:function(o){return o.source&&typeof o.source.offset=="function"?o.source.offset(o.end):o.end}}]),a})();r.exports=s}),ft=U(function(t,r){"use strict";var s=Ve(),a=(function(o){_inherits(c,o);function c(u,h,d){_class_call_check(this,c);var f;return f=_call_super(this,c,[u]),f.name="GrammarError",f.location=h,d===void 0&&(d=[]),f.diagnostics=d,f.stage=null,f.problems=[["error",u,h,d]],f}return _create_class(c,[{key:"toString",value:function(){var h=_get(_get_prototype_of(c.prototype),"toString",this).call(this);this.location&&(h+=`
 at `,this.location.source!==void 0&&this.location.source!==null&&(h+="".concat(this.location.source,":")),h+="".concat(this.location.start.line,":").concat(this.location.start.column));var d=!0,f=!1,b=void 0;try{for(var A=this.diagnostics[Symbol.iterator](),g;!(d=(g=A.next()).done);d=!0){var v=g.value;h+=`
 from `,v.location.source!==void 0&&v.location.source!==null&&(h+="".concat(v.location.source,":")),h+="".concat(v.location.start.line,":").concat(v.location.start.column,": ").concat(v.message)}}catch(y){f=!0,b=y}finally{try{!d&&A.return!=null&&A.return()}finally{if(f)throw b}}return h}},{key:"format",value:function(u){var h=u.map(function(b){var A=b.source,g=b.text;return{source:A,text:g!=null?String(g).split(/\r\n|\n|\r/g):[]}});function d(b,A){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",v="",y=h.find(function(k){var O=k.source;return O===b.source}),m=b.start,D=s.offsetStart(b);if(y){var S=b.end,F=y.text[m.line-1],$=(m.line===S.line?S.column:F.length+1)-m.column||1;g&&(v+=`
note: `.concat(g)),v+=`
 --> `.concat(b.source,":").concat(D.line,":").concat(D.column,`
`).concat("".padEnd(A),` |
`).concat(D.line.toString().padStart(A)," | ").concat(F,`
`).concat("".padEnd(A)," | ").concat("".padEnd(m.column-1)).concat("".padEnd($,"^"))}else v+=`
 at `.concat(b.source,":").concat(D.line,":").concat(D.column),g&&(v+=": ".concat(g));return v}function f(b,A,g){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],y=-1/0;g?y=v.reduce(function(z,H){var P=H.location;return Math.max(z,s.offsetStart(P).line)},g.start.line):y=Math.max.apply(null,v.map(function(z){return z.location.start.line})),y=y.toString().length;var m="".concat(b,": ").concat(A);g&&(m+=d(g,y));var D=!0,S=!1,F=void 0;try{for(var $=v[Symbol.iterator](),k;!(D=(k=$.next()).done);D=!0){var O=k.value;m+=d(O.location,y,O.message)}}catch(z){S=!0,F=z}finally{try{!D&&$.return!=null&&$.return()}finally{if(S)throw F}}return m}return this.problems.filter(function(b){return b[0]!=="info"}).map(function(b){return f.apply(void 0,_to_consumable_array(b))}).join(`

`)}}]),c})(_wrap_native_super(SyntaxError));r.exports=a}),K=U(function(t,r){"use strict";var s={build:function(a){function o(f){for(var b=arguments.length,A=new Array(b>1?b-1:0),g=1;g<b;g++)A[g-1]=arguments[g];var v;return(v=a)[f.type].apply(v,[f].concat(_to_consumable_array(A)))}function c(){}function u(f){for(var b=arguments.length,A=new Array(b>1?b-1:0),g=1;g<b;g++)A[g-1]=arguments[g];return o.apply(void 0,[f.expression].concat(_to_consumable_array(A)))}function h(f){return function(b){for(var A=arguments.length,g=new Array(A>1?A-1:0),v=1;v<A;v++)g[v-1]=arguments[v];b[f].forEach(function(y){return o.apply(void 0,[y].concat(_to_consumable_array(g)))})}}var d={grammar:function(f){for(var b=arguments.length,A=new Array(b>1?b-1:0),g=1;g<b;g++)A[g-1]=arguments[g];var v=!0,y=!1,m=void 0;try{for(var D=f.imports[Symbol.iterator](),S;!(v=(S=D.next()).done);v=!0){var F=S.value;o.apply(void 0,[F].concat(_to_consumable_array(A)))}}catch(W){y=!0,m=W}finally{try{!v&&D.return!=null&&D.return()}finally{if(y)throw m}}var $=!0,k=!1,O=void 0;if(f.topLevelInitializer)if(Array.isArray(f.topLevelInitializer))try{for(var z=f.topLevelInitializer[Symbol.iterator](),H;!($=(H=z.next()).done);$=!0){var P=H.value;o.apply(void 0,[P].concat(_to_consumable_array(A)))}}catch(W){k=!0,O=W}finally{try{!$&&z.return!=null&&z.return()}finally{if(k)throw O}}else o.apply(void 0,[f.topLevelInitializer].concat(_to_consumable_array(A)));var R=!0,N=!1,x=void 0;if(f.initializer)if(Array.isArray(f.initializer))try{for(var V=f.initializer[Symbol.iterator](),Y;!(R=(Y=V.next()).done);R=!0){var G=Y.value;o.apply(void 0,[G].concat(_to_consumable_array(A)))}}catch(W){N=!0,x=W}finally{try{!R&&V.return!=null&&V.return()}finally{if(N)throw x}}else o.apply(void 0,[f.initializer].concat(_to_consumable_array(A)));f.rules.forEach(function(W){return o.apply(void 0,[W].concat(_to_consumable_array(A)))})},grammar_import:c,top_level_initializer:c,initializer:c,rule:u,named:u,choice:h("alternatives"),action:u,sequence:h("elements"),labeled:u,text:u,simple_and:u,simple_not:u,optional:u,zero_or_more:u,one_or_more:u,repeated:function(f){for(var b=arguments.length,A=new Array(b>1?b-1:0),g=1;g<b;g++)A[g-1]=arguments[g];return f.delimiter&&o.apply(void 0,[f.delimiter].concat(_to_consumable_array(A))),o.apply(void 0,[f.expression].concat(_to_consumable_array(A)))},group:u,semantic_and:c,semantic_not:c,rule_ref:c,library_ref:c,literal:c,class:c,any:c};return Object.keys(d).forEach(function(f){Object.prototype.hasOwnProperty.call(a,f)||(a[f]=d[f])}),o}};r.exports=s}),he=U(function(t,r){"use strict";var s=function(c,u){if(!(c&&u))return c||u;var h=Array.isArray(c)?c:[c];return h.push(u),h},a=K(),o={findRule:function(c,u){for(var h=0;h<c.rules.length;h++)if(c.rules[h].name===u)return c.rules[h]},indexOfRule:function(c,u){for(var h=0;h<c.rules.length;h++)if(c.rules[h].name===u)return h;return-1},alwaysConsumesOnSuccess:function(c,u){function h(){return!0}function d(){return!1}var f=a.build({choice:function(b){return b.alternatives.every(f)},sequence:function(b){return b.elements.some(f)},simple_and:d,simple_not:d,optional:d,zero_or_more:d,repeated:function(b){var A=b.min?b.min:b.max;return A.type!=="constant"||A.value===0?!1:!!(f(b.expression)||A.value>1&&b.delimiter&&f(b.delimiter))},semantic_and:d,semantic_not:d,rule_ref:function(b){var A=o.findRule(c,b.name);return A?f(A):void 0},library_ref:d,literal:function(b){return b.value!==""},class:h,any:h});return f(u)},combine:function(c){return c.reduce(function(u,h){return u.topLevelInitializer=s(u.topLevelInitializer,h.topLevelInitializer),u.initializer=s(u.initializer,h.initializer),u.rules=u.rules.concat(h.rules),u})}};r.exports=o}),Xs=U(function(t,r){"use strict";var s=function(a){var o=0,c=!0,u=!1,h=void 0;try{for(var d=a.imports[Symbol.iterator](),f;!(c=(f=d.next()).done);c=!0){var b=f.value,A=!0,g=!1,v=void 0;try{for(var y=b.what[Symbol.iterator](),m;!(A=(m=y.next()).done);A=!0){var D=m.value,S=void 0;switch(D.type){case"import_binding_all":continue;case"import_binding_default":break;case"import_binding":S=D.binding;break;case"import_binding_rename":S=D.rename;break;default:throw new TypeError("Unknown binding type")}a.rules.push({type:"rule",name:D.binding,nameLocation:D.location,expression:{type:"library_ref",name:S,library:b.from.module,libraryNumber:o,location:D.location},location:b.from.location})}}catch(F){g=!0,v=F}finally{try{!A&&y.return!=null&&y.return()}finally{if(g)throw v}}o++}}catch(F){u=!0,h=F}finally{try{!c&&d.return!=null&&d.return()}finally{if(u)throw h}}};r.exports=s}),Ks=U(function(t,r){"use strict";var s=function(c,u){var h=0,d=!0,f=!1,b=void 0;try{for(var A=c.imports[Symbol.iterator](),g;!(d=(g=A.next()).done);d=!0){var v=g.value,y=!0,m=!1,D=void 0;try{for(var S=v.what[Symbol.iterator](),F;!(y=(F=S.next()).done);y=!0){var $=F.value;if($.type==="import_binding_all"&&$.binding===u)return h}}catch(k){m=!0,D=k}finally{try{!y&&S.return!=null&&S.return()}finally{if(m)throw D}}h++}}catch(k){f=!0,b=k}finally{try{!d&&A.return!=null&&A.return()}finally{if(f)throw b}}return-1},a=function(c,u,h){o.build({library_ref:function(d){d.libraryNumber===-1&&(d.libraryNumber=s(c,d.library),d.libraryNumber===-1&&h.error('Unknown module "'.concat(d.library,'"'),d.location))}})(c)},o=K();r.exports=a}),Ht=U(function(t,r){"use strict";var s={PUSH:0,PUSH_EMPTY_STRING:35,PUSH_UNDEFINED:1,PUSH_NULL:2,PUSH_FAILED:3,PUSH_EMPTY_ARRAY:4,PUSH_CURR_POS:5,POP:6,POP_CURR_POS:7,POP_N:8,NIP:9,APPEND:10,WRAP:11,TEXT:12,PLUCK:36,IF:13,IF_ERROR:14,IF_NOT_ERROR:15,IF_LT:30,IF_GE:31,IF_LT_DYNAMIC:32,IF_GE_DYNAMIC:33,WHILE_NOT_ERROR:16,MATCH_ANY:17,MATCH_STRING:18,MATCH_STRING_IC:19,MATCH_CHAR_CLASS:20,MATCH_UNICODE_CLASS:42,MATCH_REGEXP:20,ACCEPT_N:21,ACCEPT_STRING:22,FAIL:23,LOAD_SAVED_POS:24,UPDATE_SAVED_POS:25,CALL:26,RULE:27,LIBRARY_RULE:41,SILENT_FAILS_ON:28,SILENT_FAILS_OFF:29,SOURCE_MAP_PUSH:37,SOURCE_MAP_POP:38,SOURCE_MAP_LABEL_PUSH:39,SOURCE_MAP_LABEL_POP:40};r.exports=s}),tr=U(function(t,r){"use strict";var s=(function(){function a(o){_class_call_check(this,a),this.options=_object_spread({stringify:String,convert:function(c){return c}},o),this.items=[],this.offsets=Object.create(null)}return _create_class(a,[{key:"add",value:function(o){var c=this.options.convert(o);if(!c)return-1;var u=this.options.stringify(c),h=this.offsets[u];return h===void 0&&(h=this.items.push(c)-1,this.offsets[u]=h),h}},{key:"get",value:function(o){return this.items[o]}},{key:"map",value:function(o){return this.items.map(o)}}]),a})();r.exports=s}),ht=U(function(t,r){"use strict";var s=function(f){function b(m){return m.match=h}function A(m){return y(m.expression),m.match=u}function g(m){return m.match=y(m.expression)}function v(m,D){for(var S=m.length,F=0,$=0,k=0;k<S;++k){var O=y(m[k]);O===u&&++F,O===d&&++$}return F===S?u:D?$===S?d:h:$>0?d:h}var y=a.build({rule:function(m){var D,S=0;if(_type_of(m.match)>"u"){m.match=h;do if(D=m.match,m.match=y(m.expression),++S>6)throw new c("Infinity cycle detected when trying to evaluate node match result",m.location);while(D!==m.match)}return m.match},named:g,choice:function(m){return m.match=v(m.alternatives,!0)},action:g,sequence:function(m){return m.match=v(m.elements,!1)},labeled:g,text:g,simple_and:g,simple_not:function(m){return m.match=-y(m.expression)},optional:A,zero_or_more:A,one_or_more:g,repeated:function(m){var D=y(m.expression),S=m.delimiter?y(m.delimiter):d,F=m.min?m.min:m.max;return F.type!=="constant"||m.max.type!=="constant"?m.match=h:m.max.value===0||m.max.value!==null&&F.value>m.max.value?m.match=d:D===d?m.match=F.value===0?u:d:D===u?m.delimiter&&F.value>=2?m.match=S:m.match=u:m.delimiter&&F.value>=2?m.match=S===d?d:h:m.match=F.value===0?u:h},group:g,semantic_and:b,semantic_not:b,rule_ref:function(m){var D=o.findRule(f,m.name);return D?m.match=y(D):h},library_ref:function(){return 0},literal:function(m){var D=m.value.length===0?u:h;return m.match=D},class:function(m){var D=m.parts.length===0?d:h;return m.match=D},any:b});y(f)},a=K(),o=he(),c=ft(),u=1,h=0,d=-1;s.ALWAYS_MATCH=u,s.SOMETIMES_MATCH=h,s.NEVER_MATCH=d,r.exports=s}),ir=U(function(t,r){"use strict";var s=function(A,g){var v=new u,y=new u({stringify:JSON.stringify,convert:function(J){return{value:J.parts,inverted:J.inverted,ignoreCase:J.ignoreCase,unicode:J.unicode}}}),m=new u({stringify:JSON.stringify}),D=new u,S=[],F=[];function $(J,oe,be){var Fe={predicate:J,params:oe,body:be.code,location:be.codeLocation},Pe=JSON.stringify(Fe),_t=S.findIndex(function(dt){return JSON.stringify(dt)===Pe});return _t===-1?S.push(Fe)-1:_t}function k(J){return F.push(J)-1}function O(J){var oe={};return Object.keys(J).forEach(function(be){oe[be]=J[be]}),oe}function z(J){for(var oe=arguments.length,be=new Array(oe>1?oe-1:0),Fe=1;Fe<oe;Fe++)be[Fe-1]=arguments[Fe];var Pe;return(Pe=J).concat.apply(Pe,_to_consumable_array(be))}function H(J,oe,be,Fe){return J===d?be:J===b?Fe:oe.concat([be.length,Fe.length],be,Fe)}function P(J,oe){return J.concat([oe.length],oe)}function R(J,oe,be,Fe){var Pe=Object.keys(be).map(function(_t){return Fe-be[_t]});return[o.CALL,J,oe,Pe.length].concat(Pe)}function N(J,oe,be){var Fe=J.match||0;return z([o.PUSH_CURR_POS],[o.SILENT_FAILS_ON],Ie(J,{sp:be.sp+1,env:O(be.env),action:null}),[o.SILENT_FAILS_OFF],H(oe?-Fe:Fe,[oe?o.IF_ERROR:o.IF_NOT_ERROR],z([o.POP],[oe?o.POP:o.POP_CURR_POS],[o.PUSH_UNDEFINED]),z([o.POP],[oe?o.POP_CURR_POS:o.POP],[o.PUSH_FAILED])))}function x(J,oe,be){var Fe=$(!0,Object.keys(be.env),J);return z([o.UPDATE_SAVED_POS],R(Fe,0,be.env,be.sp),H(J.match||0,[o.IF],z([o.POP],oe?[o.PUSH_FAILED]:[o.PUSH_UNDEFINED]),z([o.POP],oe?[o.PUSH_UNDEFINED]:[o.PUSH_FAILED])))}function V(J){return P([o.WHILE_NOT_ERROR],z([o.APPEND],J))}function Y(J){var oe=J;return new Error('Unknown boundary type "'.concat(oe.type,'" for the "repeated" node'))}function G(J,oe,be,Fe){switch(J.type){case"constant":return{pre:[],post:[],sp:be};case"variable":return J.sp=Fe+be-oe[J.value],{pre:[],post:[],sp:be};case"function":{J.sp=Fe;var Pe=$(!0,Object.keys(oe),{code:J.value,codeLocation:J.codeLocation});return{pre:R(Pe,0,oe,be),post:[o.NIP],sp:be+1}}default:throw Y(J)}}function W(J,oe){if(oe.value!==null){var be=oe.type==="constant"?[o.IF_GE,oe.value]:[o.IF_GE_DYNAMIC,oe.sp||0];return H(f,be,[o.PUSH_FAILED],J)}return J}function Z(J,oe){var be=oe.type==="constant"?[o.IF_LT,oe.value]:[o.IF_LT_DYNAMIC,oe.sp||0];return z(J,H(f,be,[o.POP,o.POP_CURR_POS,o.PUSH_FAILED],[o.NIP]))}function ae(J,oe,be,Fe,Pe){return J?z([o.PUSH_CURR_POS],Ie(J,{sp:Fe.sp+Pe+1,env:O(Fe.env),action:null}),H(J.match||0,[o.IF_NOT_ERROR],z([o.POP],be,H(-oe,[o.IF_ERROR],[o.POP,o.POP_CURR_POS,o.PUSH_FAILED],[o.NIP])),[o.NIP])):be}function He(J){return g&&g.output==="source-and-map"&&Object.keys(J).forEach(function(oe){var be=J[oe];J[oe]=function(Fe){for(var Pe=arguments.length,_t=new Array(Pe>1?Pe-1:0),dt=1;dt<Pe;dt++)_t[dt-1]=arguments[dt];var ye=be.apply(void 0,[Fe].concat(_to_consumable_array(_t)));return ye===void 0||!Fe.location?ye:z([o.SOURCE_MAP_PUSH,k(Fe.location)],ye,[o.SOURCE_MAP_POP])}}),c.build(J)}var Ie=He({grammar:function(J){J.rules.forEach(Ie),J.literals=v.items,J.classes=y.items,J.expectations=m.items,J.importedNames=D.items,J.functions=S,J.locations=F},rule:function(J){J.bytecode=Ie(J.expression,{sp:-1,env:{},pluck:[],action:null})},named:function(J,oe){var be=J.match||0,Fe=be===d?-1:m.add({type:"rule",value:J.name});return z([o.SILENT_FAILS_ON],Ie(J.expression,oe),[o.SILENT_FAILS_OFF],H(-be,[o.IF_ERROR],[o.FAIL,Fe],[]))},choice:function(J,oe){function be(Fe,Pe){var _t=Fe[0].match||0,dt=Ie(Fe[0],{sp:Pe.sp,env:O(Pe.env),action:null});return _t===d?dt:z(dt,Fe.length>1?H(f,[o.IF_ERROR],z([o.POP],be(Fe.slice(1),Pe)),[]):[])}return be(J.alternatives,oe)},action:function(J,oe){var be=O(oe.env),Fe=J.expression.type!=="sequence"||J.expression.elements.length===0,Pe=Ie(J.expression,{sp:oe.sp+(Fe?1:0),env:be,action:J}),_t=J.expression.match||0,dt=Fe&&_t!==b?$(!1,Object.keys(be),J):-1;return Fe?z([o.PUSH_CURR_POS],Pe,H(_t,[o.IF_NOT_ERROR],z([o.LOAD_SAVED_POS,1],R(dt,1,be,oe.sp+2)),[]),[o.NIP]):Pe},sequence:function(J,oe){function be(Fe,Pe){if(Fe.length>0){var _t=J.elements.length-Fe.length+1;return z(Ie(Fe[0],{sp:Pe.sp,env:Pe.env,pluck:Pe.pluck,action:null}),H(Fe[0].match||0,[o.IF_NOT_ERROR],be(Fe.slice(1),{sp:Pe.sp+1,env:Pe.env,pluck:Pe.pluck,action:Pe.action}),z(_t>1?[o.POP_N,_t]:[o.POP],[o.POP_CURR_POS],[o.PUSH_FAILED])))}else{if(Pe.pluck&&Pe.pluck.length>0)return z([o.PLUCK,J.elements.length+1,Pe.pluck.length],Pe.pluck.map(function(ye){return Pe.sp-ye}));if(Pe.action){var dt=$(!1,Object.keys(Pe.env),Pe.action);return z([o.LOAD_SAVED_POS,J.elements.length],R(dt,J.elements.length+1,Pe.env,Pe.sp))}else return z([o.WRAP,J.elements.length],[o.NIP])}}return z([o.PUSH_CURR_POS],be(J.elements,{sp:oe.sp+1,env:oe.env,pluck:[],action:oe.action}))},labeled:function(J,oe){var be=oe.env,Fe=J.label,Pe=oe.sp+1;Fe&&(be=O(oe.env),oe.env[Fe]=Pe),J.pick&&oe.pluck.push(Pe);var _t=Ie(J.expression,{sp:oe.sp,env:be,action:null});return Fe&&J.labelLocation&&g&&g.output==="source-and-map"?z([o.SOURCE_MAP_LABEL_PUSH,Pe,v.add(Fe),k(J.labelLocation)],_t,[o.SOURCE_MAP_LABEL_POP,Pe]):_t},text:function(J,oe){return z([o.PUSH_CURR_POS],Ie(J.expression,{sp:oe.sp+1,env:O(oe.env),action:null}),H(J.match||0,[o.IF_NOT_ERROR],z([o.POP],[o.TEXT]),[o.NIP]))},simple_and:function(J,oe){return N(J.expression,!1,oe)},simple_not:function(J,oe){return N(J.expression,!0,oe)},optional:function(J,oe){return z(Ie(J.expression,{sp:oe.sp,env:O(oe.env),action:null}),H(-(J.expression.match||0),[o.IF_ERROR],z([o.POP],[o.PUSH_NULL]),[]))},zero_or_more:function(J,oe){var be=Ie(J.expression,{sp:oe.sp+1,env:O(oe.env),action:null});return z([o.PUSH_EMPTY_ARRAY],be,V(be),[o.POP])},one_or_more:function(J,oe){var be=Ie(J.expression,{sp:oe.sp+1,env:O(oe.env),action:null});return z([o.PUSH_EMPTY_ARRAY],be,H(J.expression.match||0,[o.IF_NOT_ERROR],z(V(be),[o.POP]),z([o.POP],[o.POP],[o.PUSH_FAILED])))},repeated:function(J,oe){var be=J.min?J.min:J.max,Fe=be.type!=="constant"||be.value>0,Pe=J.max.type!=="constant"&&J.max.value!==null,_t=Fe?2:1,dt=J.min?G(J.min,oe.env,oe.sp,2+(J.max.type==="function"?1:0)):{pre:[],post:[],sp:oe.sp},ye=G(J.max,oe.env,dt.sp,_t),Je=Ie(J.expression,{sp:ye.sp+_t,env:O(oe.env),action:null}),Ye=J.delimiter!==null?Ie(J.expression,{sp:ye.sp+_t+1,env:O(oe.env),action:null}):Je,Xe=ae(J.delimiter,J.expression.match||0,Ye,oe,_t),De=W(Xe,J.max),ke=Pe?W(Je,J.max):Je,fe=z(Fe?[o.PUSH_CURR_POS]:[],[o.PUSH_EMPTY_ARRAY],ke,V(De),[o.POP]);return z(dt.pre,ye.pre,Fe?Z(fe,be):fe,ye.post,dt.post)},group:function(J,oe){return Ie(J.expression,{sp:oe.sp,env:O(oe.env),action:null})},semantic_and:function(J,oe){return x(J,!1,oe)},semantic_not:function(J,oe){return x(J,!0,oe)},rule_ref:function(J){return[o.RULE,a.indexOfRule(A,J.name)]},library_ref:function(J){return[o.LIBRARY_RULE,J.libraryNumber,D.add(J.name)]},literal:function(J){if(J.value.length>0){var oe=J.match||0,be=oe===f||oe===d&&!J.ignoreCase?v.add(J.ignoreCase?J.value.toLowerCase():J.value):-1,Fe=oe!==d?m.add({type:"literal",value:J.value,ignoreCase:J.ignoreCase}):-1;return H(oe,J.ignoreCase?[o.MATCH_STRING_IC,be]:[o.MATCH_STRING,be],J.ignoreCase?[o.ACCEPT_N,J.value.length]:[o.ACCEPT_STRING,be],[o.FAIL,Fe])}return[o.PUSH_EMPTY_STRING]},class:function(J){var oe=J.match||0,be=oe===f?y.add(J):-1,Fe=oe!==d?m.add({type:"class",value:J.parts,inverted:J.inverted,ignoreCase:J.ignoreCase,unicode:J.unicode}):-1;return H(oe,[J.unicode?o.MATCH_UNICODE_CLASS:o.MATCH_CHAR_CLASS,be],[o.ACCEPT_N,J.unicode?-1:1],[o.FAIL,Fe])},any:function(J){var oe=J.match||0,be=oe!==d?m.add({type:"any"}):-1;return H(oe,[o.MATCH_ANY],[o.ACCEPT_N,1],[o.FAIL,be])}});Ie(A)},a=he(),o=Ht(),c=K(),u=tr(),h=ht(),d=h.ALWAYS_MATCH,f=h.SOMETIMES_MATCH,b=h.NEVER_MATCH;r.exports=s}),lr=U(function(t){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");t.encode=function(s){if(0<=s&&s<r.length)return r[s];throw new TypeError("Must be between 0 and 63: "+s)}}),pr=U(function(t){var r=function(h){return h<0?(-h<<1)+1:(h<<1)+0},s=lr(),a=5,o=1<<a,c=o-1,u=o;t.encode=function(h){var d="",f,b=r(h);do f=b&c,b>>>=a,b>0&&(f|=u),d+=s.encode(f);while(b>0);return d}}),mt=U(function(t){var r=function(H,P,R){if(P in H)return H[P];if(arguments.length===3)return R;throw new Error('"'+P+'" is a required argument.')},s=function(H){return H},a=function(H){return c(H)?"$"+H:H},o=function(H){return c(H)?H.slice(1):H},c=function(H){if(!H)return!1;var P=H.length;if(P<9||H.charCodeAt(P-1)!==95||H.charCodeAt(P-2)!==95||H.charCodeAt(P-3)!==111||H.charCodeAt(P-4)!==116||H.charCodeAt(P-5)!==111||H.charCodeAt(P-6)!==114||H.charCodeAt(P-7)!==112||H.charCodeAt(P-8)!==95||H.charCodeAt(P-9)!==95)return!1;for(var R=P-10;R>=0;R--)if(H.charCodeAt(R)!==36)return!1;return!0},u=function(H,P){return H===P?0:H===null?1:P===null?-1:H>P?1:-1},h=function(H,P){var R=H.generatedLine-P.generatedLine;return R!==0||(R=H.generatedColumn-P.generatedColumn,R!==0)||(R=u(H.source,P.source),R!==0)||(R=H.originalLine-P.originalLine,R!==0)||(R=H.originalColumn-P.originalColumn,R!==0)?R:u(H.name,P.name)},d=function(H){return function(P){var R=g(P),N=A(P),x=new URL(P,N);H(x);var V=x.toString();return R==="absolute"?V:R==="scheme-relative"?V.slice(F.length):R==="path-absolute"?V.slice($.length):v(N,V)}},f=function(H,P){return new URL(H,P).toString()},b=function(H,P){var R=0;do{var N=H+R++;if(P.indexOf(N)===-1)return N}while(!0)},A=function(H){for(var P=H.split("..").length-1,R=b("p",H),N="".concat($,"/"),x=0;x<P;x++)N+="".concat(R,"/");return N},g=function(H){return H[0]==="/"?H[1]==="/"?"scheme-relative":"path-absolute":k.test(H)?"absolute":"path-relative"},v=function(H,P){typeof H=="string"&&(H=new URL(H)),typeof P=="string"&&(P=new URL(P));var R=P.pathname.split("/"),N=H.pathname.split("/");for(N.length>0&&!N[N.length-1]&&N.pop();R.length>0&&N.length>0&&R[0]===N[0];)R.shift(),N.shift();return N.map(function(){return".."}).concat(R).join("/")+P.search+P.hash},y=function(H,P){var R=g(P),N=g(H);if(H=O(H),R==="absolute")return f(P,void 0);if(N==="absolute")return f(P,H);if(R==="scheme-relative")return z(P);if(N==="scheme-relative")return f(P,f(H,$)).slice(F.length);if(R==="path-absolute")return z(P);if(N==="path-absolute")return f(P,f(H,$)).slice($.length);var x=A(P+H),V=f(P,f(H,x));return v(x,V)},m=function(H,P){var R=D(H,P);return typeof R=="string"?R:z(P)},D=function(H,P){if(g(H)!==g(P))return null;var R=A(H+P),N=new URL(H,R),x=new URL(P,R);try{new URL("",x.toString())}catch{return null}return x.protocol!==N.protocol||x.user!==N.user||x.password!==N.password||x.hostname!==N.hostname||x.port!==N.port?null:v(N,x)};t.getArg=r;var S=(function(){return!("__proto__"in Object.create(null))})();t.toSetString=S?s:a,t.fromSetString=S?s:o,t.compareByGeneratedPositionsInflated=h;var F="http:",$="".concat(F,"//host"),k=/^[A-Za-z0-9\+\-\.]+:/,O=d(function(H){H.pathname=H.pathname.replace(/\/?$/,"/")}),z=d(function(H){});t.normalize=z,t.join=y,t.relative=m}),yr=U(function(t){var r=(function(){"use strict";function s(){_class_call_check(this,s),this._array=[],this._set=new Map}return _create_class(s,[{key:"size",value:function(){return this._set.size}},{key:"add",value:function(a,o){var c=this.has(a),u=this._array.length;(!c||o)&&this._array.push(a),c||this._set.set(a,u)}},{key:"has",value:function(a){return this._set.has(a)}},{key:"indexOf",value:function(a){var o=this._set.get(a);if(o>=0)return o;throw new Error('"'+a+'" is not in the set.')}},{key:"at",value:function(a){if(a>=0&&a<this._array.length)return this._array[a];throw new Error("No element indexed by "+a)}},{key:"toArray",value:function(){return this._array.slice()}}],[{key:"fromArray",value:function(a,o){for(var c=new s,u=0,h=a.length;u<h;u++)c.add(a[u],o);return c}}]),s})();t.ArraySet=r}),xr=U(function(t){var r=function(o,c){var u=o.generatedLine,h=c.generatedLine,d=o.generatedColumn,f=c.generatedColumn;return h>u||h==u&&f>=d||s.compareByGeneratedPositionsInflated(o,c)<=0},s=mt(),a=(function(){"use strict";function o(){_class_call_check(this,o),this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return _create_class(o,[{key:"unsortedForEach",value:function(c,u){this._array.forEach(c,u)}},{key:"add",value:function(c){r(this._last,c)?(this._last=c,this._array.push(c)):(this._sorted=!1,this._array.push(c))}},{key:"toArray",value:function(){return this._sorted||(this._array.sort(s.compareByGeneratedPositionsInflated),this._sorted=!0),this._array}}]),o})();t.MappingList=a}),Jt=U(function(t){var r=pr(),s=mt(),a=yr().ArraySet,o=xr().MappingList,c=(function(){"use strict";function u(h){_class_call_check(this,u),h||(h={}),this._file=s.getArg(h,"file",null),this._sourceRoot=s.getArg(h,"sourceRoot",null),this._skipValidation=s.getArg(h,"skipValidation",!1),this._sources=new a,this._names=new a,this._mappings=new o,this._sourcesContents=null}return _create_class(u,[{key:"addMapping",value:function(h){var d=s.getArg(h,"generated"),f=s.getArg(h,"original",null),b=s.getArg(h,"source",null),A=s.getArg(h,"name",null);this._skipValidation||this._validateMapping(d,f,b,A),b!=null&&(b=String(b),this._sources.has(b)||this._sources.add(b)),A!=null&&(A=String(A),this._names.has(A)||this._names.add(A)),this._mappings.add({generatedLine:d.line,generatedColumn:d.column,originalLine:f&&f.line,originalColumn:f&&f.column,source:b,name:A})}},{key:"setSourceContent",value:function(h,d){var f=h;this._sourceRoot!=null&&(f=s.relative(this._sourceRoot,f)),d!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[s.toSetString(f)]=d):this._sourcesContents&&(delete this._sourcesContents[s.toSetString(f)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))}},{key:"applySourceMap",value:function(h,d,f){var b=d;if(d==null){if(h.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);b=h.file}var A=this._sourceRoot;A!=null&&(b=s.relative(A,b));var g=this._mappings.toArray().length>0?new a:this._sources,v=new a;this._mappings.unsortedForEach(function(y){if(y.source===b&&y.originalLine!=null){var m=h.originalPositionFor({line:y.originalLine,column:y.originalColumn});m.source!=null&&(y.source=m.source,f!=null&&(y.source=s.join(f,y.source)),A!=null&&(y.source=s.relative(A,y.source)),y.originalLine=m.line,y.originalColumn=m.column,m.name!=null&&(y.name=m.name))}var D=y.source;D!=null&&!g.has(D)&&g.add(D);var S=y.name;S!=null&&!v.has(S)&&v.add(S)},this),this._sources=g,this._names=v,h.sources.forEach(function(y){var m=h.sourceContentFor(y);m!=null&&(f!=null&&(y=s.join(f,y)),A!=null&&(y=s.relative(A,y)),this.setSourceContent(y,m))},this)}},{key:"_validateMapping",value:function(h,d,f,b){if(d&&typeof d.line!="number"&&typeof d.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(h&&"line"in h&&"column"in h&&h.line>0&&h.column>=0&&!d&&!f&&!b)&&!(h&&"line"in h&&"column"in h&&d&&"line"in d&&"column"in d&&h.line>0&&h.column>=0&&d.line>0&&d.column>=0&&f))throw new Error("Invalid mapping: "+JSON.stringify({generated:h,source:f,original:d,name:b}))}},{key:"_serializeMappings",value:function(){for(var d=0,f=1,b=0,A=0,g=0,v=0,y="",m,D,S,F,$=this._mappings.toArray(),k=0,O=$.length;k<O;k++){if(D=$[k],m="",D.generatedLine!==f)for(d=0;D.generatedLine!==f;)m+=";",f++;else if(k>0){if(!s.compareByGeneratedPositionsInflated(D,$[k-1]))continue;m+=","}m+=r.encode(D.generatedColumn-d),d=D.generatedColumn,D.source!=null&&(F=this._sources.indexOf(D.source),m+=r.encode(F-v),v=F,m+=r.encode(D.originalLine-1-A),A=D.originalLine-1,m+=r.encode(D.originalColumn-b),b=D.originalColumn,D.name!=null&&(S=this._names.indexOf(D.name),m+=r.encode(S-g),g=S)),y+=m}return y}},{key:"_generateSourcesContent",value:function(h,d){return h.map(function(f){if(!this._sourcesContents)return null;d!=null&&(f=s.relative(d,f));var b=s.toSetString(f);return Object.prototype.hasOwnProperty.call(this._sourcesContents,b)?this._sourcesContents[b]:null},this)}},{key:"toJSON",value:function(){var d={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(d.file=this._file),this._sourceRoot!=null&&(d.sourceRoot=this._sourceRoot),this._sourcesContents&&(d.sourcesContent=this._generateSourcesContent(d.sources,d.sourceRoot)),d}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}],[{key:"fromSourceMap",value:function(h){var d=h.sourceRoot,f=new u({file:h.file,sourceRoot:d});return h.eachMapping(function(b){var A={generated:{line:b.generatedLine,column:b.generatedColumn}};b.source!=null&&(A.source=b.source,d!=null&&(A.source=s.relative(d,A.source)),A.original={line:b.originalLine,column:b.originalColumn},b.name!=null&&(A.name=b.name)),f.addMapping(A)}),h.sources.forEach(function(b){var A=b;d!=null&&(A=s.relative(d,b)),f._sources.has(A)||f._sources.add(A);var g=h.sourceContentFor(b);g!=null&&f.setSourceContent(b,g)}),f}}]),u})();c.prototype._version=3,t.SourceMapGenerator=c}),Ar=U(function(t){var r=Jt().SourceMapGenerator,s=mt(),a=/(\r?\n)/,o=10,c="$$$isSourceNode$$$",u=(function(){"use strict";function h(d,f,b,A,g){_class_call_check(this,h),this.children=[],this.sourceContents={},this.line=d??null,this.column=f??null,this.source=b??null,this.name=g??null,this[c]=!0,A!=null&&this.add(A)}return _create_class(h,[{key:"add",value:function(d){if(Array.isArray(d))d.forEach(function(f){this.add(f)},this);else if(d[c]||typeof d=="string")d&&this.children.push(d);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+d);return this}},{key:"prepend",value:function(d){if(Array.isArray(d))for(var f=d.length-1;f>=0;f--)this.prepend(d[f]);else if(d[c]||typeof d=="string")this.children.unshift(d);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+d);return this}},{key:"walk",value:function(d){for(var f,b=0,A=this.children.length;b<A;b++)f=this.children[b],f[c]?f.walk(d):f!==""&&d(f,{source:this.source,line:this.line,column:this.column,name:this.name})}},{key:"join",value:function(d){var f,b,A=this.children.length;if(A>0){for(f=[],b=0;b<A-1;b++)f.push(this.children[b]),f.push(d);f.push(this.children[b]),this.children=f}return this}},{key:"replaceRight",value:function(d,f){var b=this.children[this.children.length-1];return b[c]?b.replaceRight(d,f):typeof b=="string"?this.children[this.children.length-1]=b.replace(d,f):this.children.push("".replace(d,f)),this}},{key:"setSourceContent",value:function(d,f){this.sourceContents[s.toSetString(d)]=f}},{key:"walkSourceContents",value:function(d){for(var f=0,b=this.children.length;f<b;f++)this.children[f][c]&&this.children[f].walkSourceContents(d);for(var A=Object.keys(this.sourceContents),g=0,v=A.length;g<v;g++)d(s.fromSetString(A[g]),this.sourceContents[A[g]])}},{key:"toString",value:function(){var f="";return this.walk(function(b){f+=b}),f}},{key:"toStringWithSourceMap",value:function(d){var f={code:"",line:1,column:0},b=new r(d),A=!1,g=null,v=null,y=null,m=null;return this.walk(function(D,S){f.code+=D,S.source!==null&&S.line!==null&&S.column!==null?((g!==S.source||v!==S.line||y!==S.column||m!==S.name)&&b.addMapping({source:S.source,original:{line:S.line,column:S.column},generated:{line:f.line,column:f.column},name:S.name}),g=S.source,v=S.line,y=S.column,m=S.name,A=!0):A&&(b.addMapping({generated:{line:f.line,column:f.column}}),g=null,A=!1);for(var F=0,$=D.length;F<$;F++)D.charCodeAt(F)===o?(f.line++,f.column=0,F+1===$?(g=null,A=!1):A&&b.addMapping({source:S.source,original:{line:S.line,column:S.column},generated:{line:f.line,column:f.column},name:S.name})):f.column++}),this.walkSourceContents(function(D,S){b.setSourceContent(D,S)}),{code:f.code,map:b}}}],[{key:"fromStringWithSourceMap",value:function(d,f,b){var A=new h,g=d.split(a),v=0,y=function(){var O=H(),z=H()||"";return O+z;function H(){return v<g.length?g[v++]:void 0}},m=1,D=0,S=null,F;return f.eachMapping(function(k){if(S!==null)if(m<k.generatedLine)$(S,y()),m++,D=0;else{F=g[v]||"";var O=F.substr(0,k.generatedColumn-D);g[v]=F.substr(k.generatedColumn-D),D=k.generatedColumn,$(S,O),S=k;return}for(;m<k.generatedLine;)A.add(y()),m++;D<k.generatedColumn&&(F=g[v]||"",A.add(F.substr(0,k.generatedColumn)),g[v]=F.substr(k.generatedColumn),D=k.generatedColumn),S=k},this),v<g.length&&(S&&$(S,y()),A.add(g.splice(v).join(""))),f.sources.forEach(function(k){var O=f.sourceContentFor(k);O!=null&&(b!=null&&(k=s.join(b,k)),A.setSourceContent(k,O))}),A;function $(k,O){if(k===null||k.source===void 0)A.add(O);else{var z=b?s.join(b,k.source):k.source;A.add(new h(k.originalLine,k.originalColumn,z,O,k.name))}}}}]),h})();t.SourceNode=u}),Kt=U(function(t){t.SourceMapGenerator=Jt().SourceMapGenerator,t.SourceNode=Ar().SourceNode}),Rr=U(function(t,r){"use strict";var s=Kt(),a=s.SourceNode,o=Ve(),c=(function(){function u(h,d,f,b){_class_call_check(this,u),this.sp=-1,this.maxSp=-1,this.varName=d,this.ruleName=h,this.type=f,this.bytecode=b,this.labels={},this.sourceMapStack=[]}return _create_class(u,[{key:"name",value:function(h){if(h<0)throw new RangeError("Rule '".concat(this.ruleName,"': The variable stack underflow: attempt to use a variable '").concat(this.varName,"<x>' at an index ").concat(h,`.
Bytecode: `).concat(this.bytecode));return this.varName+h}},{key:"push",value:function(h){++this.sp>this.maxSp&&(this.maxSp=this.sp);var d=this.labels[this.sp],f=[this.name(this.sp)," = ",h,";"];if(d)if(this.sourceMapStack.length){var b=u.sourceNode(d.location,f.splice(0,2),d.label),A=this.sourceMapPopInternal(),g=A.parts,v=A.location,y=v.start.offset<d.location.end.offset?{start:d.location.end,end:v.end,source:v.source}:v,m=u.sourceNode(y,f.concat(`
`));return this.sourceMapStack.push([g,g.length+1,v]),new a(null,null,d.location.source,[b,m])}else return u.sourceNode(d.location,f.concat(`
`));return f.join("")}},{key:"pop",value:function(h){var d=this;return h!==void 0?(this.sp-=h,Array.from({length:h},function(f,b){return d.name(d.sp+1+b)})):this.name(this.sp--)}},{key:"top",value:function(){return this.name(this.sp)}},{key:"index",value:function(h){if(h<0)throw new RangeError("Rule '".concat(this.ruleName,"': The variable stack overflow: attempt to get a variable at a negative index ").concat(h,`.
Bytecode: `).concat(this.bytecode));return this.name(this.sp-h)}},{key:"result",value:function(){if(this.maxSp<0)throw new RangeError("Rule '".concat(this.ruleName,`': The variable stack is empty, can't get the result.
Bytecode: `).concat(this.bytecode));return this.name(0)}},{key:"defines",value:function(){var d=this;return this.maxSp<0?"":this.type+" "+Array.from({length:this.maxSp+1},function(f,b){return d.name(b)}).join(", ")+";"}},{key:"checkedIf",value:function(h,d,f){var b=this.sp,A=d();if(!f)return[A];var g=this.sp;this.sp=b;var v=f();if(g!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+h+": Branches of a condition can't move the stack pointer differently (before: "+b+", after then: "+g+", after else: "+this.sp+"). Bytecode: "+this.bytecode);return[A,v]}},{key:"checkedLoop",value:function(h,d){var f=this.sp,b=d();if(f!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+h+": Body of a loop can't move the stack pointer (before: "+f+", after: "+this.sp+"). Bytecode: "+this.bytecode);return b}},{key:"sourceMapPush",value:function(h,d){if(this.sourceMapStack.length){var f=this.sourceMapStack[this.sourceMapStack.length-1];f[2].start.offset===d.start.offset&&f[2].end.offset>d.end.offset&&(f[2]={start:d.end,end:f[2].end,source:f[2].source})}this.sourceMapStack.push([h,h.length,d])}},{key:"sourceMapPopInternal",value:function(){var d=this.sourceMapStack.pop();if(!d)throw new RangeError("Rule '".concat(this.ruleName,`': Attempting to pop an empty source map stack.
Bytecode: `).concat(this.bytecode));var f=_sliced_to_array(d,3),b=f[0],A=f[1],g=f[2],v=b.splice(A).map(function(m){return _instanceof(m,a)?m:m+`
`});if(v.length){var y=o.offsetStart(g);b.push(new a(y.line,y.column-1,String(g.source),v))}return{parts:b,location:g}}},{key:"sourceMapPop",value:function(h){var d=this.sourceMapPopInternal(),f=d.location;if(this.sourceMapStack.length&&f.end.offset<this.sourceMapStack[this.sourceMapStack.length-1][2].end.offset){var b=this.sourceMapPopInternal(),A=b.parts,g=b.location,v=g.start.offset<f.end.offset?{start:f.end,end:g.end,source:g.source}:g;this.sourceMapStack.push([A,A.length+(h||0),v])}}}],[{key:"sourceNode",value:function(h,d,f){var b=o.offsetStart(h);return new a(b.line,b.column?b.column-1:null,String(h.source),d,f)}}]),u})();r.exports=c}),es=U(function(t){"use strict";t.version="5.0.6"}),Qe=U(function(t){"use strict";var r=function(u){return u.codePointAt(0).toString(16).toUpperCase()},s=function(u){return(typeof u>"u"?"undefined":_type_of(u))=="object"?"\\\\".concat(u.value):u.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(RegExp("[\\u{10000}-\\u{10FFFF}]","gu"),function(h){return"\\u{".concat(r(h),"}")}).replace(/[\x00-\x0F]/g,function(h){return"\\x0"+r(h)}).replace(/[\x10-\x1F\x7F-\xFF]/g,function(h){return"\\x"+r(h)}).replace(/[\u0100-\u0FFF]/g,function(h){return"\\u0"+r(h)}).replace(/[\u1000-\uFFFF]/g,function(h){return"\\u"+r(h)})},a=function(u){return(typeof u>"u"?"undefined":_type_of(u))=="object"?"\\".concat(u.value):u.replace(/\\/g,"\\\\").replace(/\//g,"\\/").replace(/]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+r(h)}).replace(/[\x10-\x1F\x7F-\xFF]/g,function(h){return"\\x"+r(h)}).replace(RegExp("[\\u{10000}-\\u{10FFFF}]","gu"),function(h){return"\\u{"+r(h)+"}"}).replace(/[\u0100-\u0FFF]/g,function(h){return"\\u0"+r(h)}).replace(/[\u1000-\uFFFF]/g,function(h){return"\\u"+r(h)})},o=function(u){for(var h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=u.length%3,f=u.length-d,b="",A=0;A<f;A+=3)b+=h[u[A]>>2],b+=h[(u[A]&3)<<4|u[A+1]>>4],b+=h[(u[A+1]&15)<<2|u[A+2]>>6],b+=h[u[A+2]&63];return d===1?(b+=h[u[f]>>2],b+=h[(u[f]&3)<<4],b+="=="):d===2&&(b+=h[u[f]>>2],b+=h[(u[f]&3)<<4|u[f+1]>>4],b+=h[(u[f+1]&15)<<2],b+="="),b},c=function(u){var h=u[Symbol.iterator](),d=h.next();return d.done||!h.next().done?-1:d.value.codePointAt(0)};t.hex=r,t.stringEscape=s,t.regexpClassEscape=a,t.base64=o,t.codePointLen1=c}),ts=U(function(t,r){"use strict";var s=function(h,d){d=d!==void 0?d:{};var f={},b=d.grammarSource,A={Grammar:sc,ImportsAndSource:wf},g=sc,v="import",y=";",m=",",D="*",S="as",F="{",$="}",k="from",O="=",z="/",H="@",P=":",R="|",N="..",x="(",V=")",Y=".",G=`
`,W=`\r
`,Z="/*",ae="*/",He="//",Ie="\\",J="i",oe='"',be="'",Fe="[",Pe="^",_t="]",dt="p",ye="_",Je="u",Ye="-",Xe="0",De="b",ke="f",fe="n",gt="r",Te="t",xe="v",ar="x",_e=/^[!$&]/,qt=/^[*-+?]/,Oe=/^[!&]/,Ot=/^[\0-\uD7FF\uE000-\uFFFF]/,ur=/^[\uD800-\uDBFF]/,Kr=/^[\uDC00-\uDFFF]/,yt=/^[\uD800-\uDFFF]/,qe=RegExp("^[\\t\\v-\\f \\p{Zs}\\xA0\\uFEFF]","u"),Re=/^[\n\r\u2028\u2029]/,or=/^[\r\u2028-\u2029]/,kt=RegExp("^[\\p{ID_Start}_]","u"),Ge=RegExp("^[$\\p{ID_Continue}]","u"),cr=/^[\n\r"\\\u2028-\u2029]/,zt=/^[\n\r'\\\u2028-\u2029]/,pe=/^[a-z]/i,Er=/^[\n\r\\-\]\u2028-\u2029]/,St=/^["'\\]/,Ft=/^[0-9pux]/,Vn=/^[0-9]/,Ir=/^[0-9a-f]/i,Fn=/^[{}]/,Ds=gf(),Xi=lt("import",!1),vi=lt(";",!1),jt=lt(",",!1),mi=lt("*",!1),Ys=lt("as",!1),Kn=lt("{",!1),zn=lt("}",!1),Fs=lt("from",!1),Js=lt("=",!1),Cs=lt("/",!1),Fu=lt("@",!1),Zs=lt(":",!1),re=hr(["!","$","&"],!1,!1,!1),ve=hr([["*","+"],"?"],!1,!1,!1),ze=lt("|",!1),Ue=lt("..",!1),et=lt("(",!1),wt=lt(")",!1),Et=lt(".",!1),Or=hr(["!","&"],!1,!1,!1),fr=hr([["\0","\uD7FF"],["\uE000","\uFFFF"]],!1,!1,!1),wi=hr([["\uD800","\uDBFF"]],!1,!1,!1),Ci=hr([["\uDC00","\uDFFF"]],!1,!1,!1),mn=hr([["\uD800","\uDFFF"]],!1,!1,!1),Cn=fn("whitespace"),Lr=hr(["	",["\v","\f"]," ","\\p{Zs}","\xA0","\uFEFF"],!1,!1,!0),Ii=hr([`
`,"\r","\u2028","\u2029"],!1,!1,!1),bi=fn("end of line"),Cu=lt(`
`,!1),Is=lt(`\r
`,!1),Iu=hr(["\r",["\u2028","\u2029"]],!1,!1,!1),Vt=fn("comment"),Sr=lt("/*",!1),rt=lt("*/",!1),vr=lt("//",!1),on=fn("identifier"),Pr=hr(["\\p{ID_Start}","_"],!1,!1,!0),ln=lt("\\",!1),Gn=hr(["$","\\p{ID_Continue}"],!1,!1,!0),ui=fn("literal"),Wn=lt("i",!1),Zi=fn("string"),Qs=lt('"',!1),Ba=lt("'",!1),Rl=hr([`
`,"\r",'"',"\\",["\u2028","\u2029"]],!1,!1,!1),$o=hr([`
`,"\r","'","\\",["\u2028","\u2029"]],!1,!1,!1),Ra=fn("character class"),ko=lt("[",!1),$l=lt("^",!1),xo=lt("]",!1),To=lt("p",!0),Pu=lt("_",!1),kl=hr([["a","z"]],!1,!0,!1),$a=lt("u",!1),Bu=lt("-",!1),Ru=hr([`
`,"\r",["\\","]"],["\u2028","\u2029"]],!1,!1,!1),Ps=lt("0",!1),Oo=hr(['"',"'","\\"],!1,!1,!1),No=lt("b",!1),xl=lt("f",!1),Lo=lt("n",!1),Ho=lt("r",!1),jo=lt("t",!1),Uo=lt("v",!1),Tl=hr([["0","9"],"p","u","x"],!1,!1,!1),Ol=lt("x",!1),Nl=hr([["0","9"]],!1,!1,!1),Mo=hr([["0","9"],["a","f"]],!1,!0,!1),Ll=fn("code block"),ka=hr(["{","}"],!1,!1,!1);function Hl(w,B,j,L){return{type:"grammar",imports:w,topLevelInitializer:B,initializer:j,rules:L,location:Bt()}}function jl(w,B){return[w,B]}function $u(w){return{type:"top_level_initializer",code:w,codeLocation:Bt()}}function Ul(w){return{type:"top_level_initializer",code:w,codeLocation:Bt()}}function Ml(w,B){return{type:"grammar_import",what:w,from:B,location:Bt()}}function ql(w){return{type:"grammar_import",what:[],from:w,location:Bt()}}function Vl(w,B){return B?(B.unshift(w),B):[w]}function zl(w){return{type:"import_binding_default",binding:w[0],location:w[1]}}function Qt(w){return[{type:"import_binding_all",binding:w[0],location:w[1]}]}function Xt(){return[]}function Gl(w,B){return{type:"import_binding_rename",rename:w[0],renameLocation:w[1],binding:B[0],location:B[1]}}function Wl(w){return{type:"import_binding",binding:w[0],location:w[1]}}function Yl(w){return{type:"import_module_specifier",module:w,location:Bt()}}function ef(w){return[w,Bt()]}function tf(w){return[w,Bt()]}function rf(w){return vc.has(w[0])&&Ri(`Binding identifier can't be a reserved word "`.concat(w[0],'"'),w[1]),w[0]}function qo(w){return{type:"top_level_initializer",code:w[0],codeLocation:w[1],location:Bt()}}function nf(w){return{type:"initializer",code:w[0],codeLocation:w[1],location:Bt()}}function $r(w,B,j){return{type:"rule",name:w[0],nameLocation:w[1],expression:B!==null?{type:"named",name:B,expression:j,location:Bt()}:j,location:Bt()}}function ku(w,B){return B.length>0?{type:"choice",alternatives:[w].concat(B),location:Bt()}:w}function Qi(w,B){return B!==null?{type:"action",expression:w,code:B[0],codeLocation:B[1],location:Bt()}:w}function Vo(w,B){return B.length>0||w.type==="labeled"&&w.pick?{type:"sequence",elements:[w].concat(B),location:Bt()}:w}function xu(w,B,j){return j.type.startsWith("semantic_")&&Ri('"@" cannot be used on a semantic predicate',w),{type:"labeled",label:B!==null?B[0]:null,labelLocation:B!==null?B[1]:w,pick:!0,expression:j,location:Bt()}}function In(w,B){return{type:"labeled",label:w[0],labelLocation:w[1],expression:B,location:Bt()}}function Ko(){return Bt()}function zo(w){return vc.has(w[0])&&Ri(`Label can't be a reserved word "`.concat(w[0],'"'),w[1]),w}function Go(w,B){return{type:a[w],expression:B,location:Bt()}}function Wo(w,B){return{type:o[B],expression:w,location:Bt()}}function Yo(w,B,j){var L=B[0],ee=B[1];return ee.type==="constant"&&ee.value===0&&Ri("The maximum count of repetitions of the rule must be > 0",ee.location),{type:"repeated",min:L,max:ee,expression:w,delimiter:j,location:Bt()}}function Jo(w,B){return[w!==null?w:{type:"constant",value:0},B!==null?B:{type:"constant",value:null}]}function wn(w){return[null,w]}function sf(w){return{type:"constant",value:w,location:Bt()}}function Pn(w){return{type:"variable",value:w[0],location:Bt()}}function af(w){return{type:"function",value:w[0],codeLocation:w[1],location:Bt()}}function Xo(w){return w.type==="labeled"||w.type==="sequence"?{type:"group",expression:w,location:Bt()}:w}function Pi(w,B){return{type:"library_ref",name:B[0],library:w[0],libraryNumber:-1,location:Bt()}}function xa(w){return{type:"rule_ref",name:w[0],location:Bt()}}function Tu(w,B){return{type:c[w],code:B[0],codeLocation:B[1],location:Bt()}}function rr(w,B){return[w+B.join(""),Bt()]}function Bi(w,B){return{type:"literal",value:w,ignoreCase:B!==null,location:Bt()}}function Ou(w){return w.join("")}function uf(w){return w.join("")}function Nu(w,B,j){if(w&&B.length===0)if(j.unicode)B=[["\uD800","\uDFFF"]];else return{type:"any",location:Bt()};return{type:"class",parts:B.filter(function(L){return L!==""}),inverted:!!w,ignoreCase:!!j.ignoreCase,location:Bt(),unicode:!!j.unicode||B.flat().some(function(L){return(typeof L>"u"?"undefined":_type_of(L))=="object"&&L.unicode||L.codePointAt(0)>65535})}}function of(w){try{new RegExp("[\\".concat(w,"]"),"u")}catch{Ri("Invalid Unicode property escape")}return{type:"classEscape",value:w,unicode:!0,location:Bt()}}function cf(w){var B=Object.fromEntries(w);return Object.keys(B).length!==w.length&&Ri("Invalid flags"),B}function lf(){return["ignoreCase",!0]}function Zo(){return["unicode",!0]}function Ta(w,B){return w.codePointAt(0)>B.codePointAt(0)&&Ri("Invalid character range: "+df()+"."),[w,B]}function Bs(){return""}function ff(){return"\0"}function Qo(){return"\b"}function ec(){return"\f"}function Lu(){return`
`}function Hu(){return"\r"}function tc(){return"	"}function hf(){return"\v"}function ju(w){return String.fromCharCode(parseInt(w,16))}function Uu(w){return String.fromCharCode(parseInt(w,16))}function pf(w){return String.fromCodePoint(parseInt(w,16))}function rc(){return{type:"any",location:Bt()}}function bn(w){return[w,Bt()]}function Mu(w){return parseInt(w,10)}var C=d.peg$currPos|0,je=C,rs=[{line:1,column:1}],Yn=C,Oa=d.peg$maxFailExpected||[],ue=d.peg$silentFails|0,ra;if(d.startRule){if(!(d.startRule in A))throw new Error(`Can't start parsing from rule "`+d.startRule+'".');g=A[d.startRule]}function df(){return h.substring(je,C)}function na(){return je}function Lp(){return{source:b,start:je,end:C}}function Bt(){return Rs(je,C)}function nc(w,B){throw B=B!==void 0?B:Rs(je,C),ic([fn(w)],h.substring(je,C),B)}function Ri(w,B){throw B=B!==void 0?B:Rs(je,C),mf(w,B)}function Jn(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:C,B=h.codePointAt(w);return B===void 0?"":String.fromCodePoint(B)}function lt(w,B){return{type:"literal",text:w,ignoreCase:B}}function hr(w,B,j,L){return{type:"class",parts:w,inverted:B,ignoreCase:j,unicode:L}}function gf(){return{type:"any"}}function vf(){return{type:"end"}}function fn(w){return{type:"other",description:w}}function Bn(w){var B=rs[w],j;if(B)return B;if(w>=rs.length)j=rs.length-1;else for(j=w;!rs[--j];);for(B=rs[j],B={line:B.line,column:B.column};j<w;)h.charCodeAt(j)===10?(B.line++,B.column=1):B.column++,j++;return rs[w]=B,B}function Rs(w,B,j){var L=Bn(w),ee=Bn(B),ie={source:b,start:{offset:w,line:L.line,column:L.column},end:{offset:B,line:ee.line,column:ee.column}};return j&&b&&typeof b.offset=="function"&&(ie.start=b.offset(ie.start),ie.end=b.offset(ie.end)),ie}function we(w){C<Yn||(C>Yn&&(Yn=C,Oa=[]),Oa.push(w))}function mf(w,B){return new u(w,null,null,B)}function ic(w,B,j){return new u(u.buildMessage(w,B),w,B,j)}function sc(){var w,B,j,L,ee,ie,Le,ut,hn;if(w=C,B=de(),j=C,L=Ze(),ee=Na(),ee!==f?j=ee:(C=j,j=f),j===f&&(j=null),L=C,ee=Ze(),ie=La(),ie!==f?L=ie:(C=L,L=f),L===f&&(L=null),ee=Ze(),ie=[],Le=C,ut=Ut(),ut!==f?(hn=Ze(),Le=ut):(C=Le,Le=f),Le!==f)for(;Le!==f;)ie.push(Le),Le=C,ut=Ut(),ut!==f?(hn=Ze(),Le=ut):(C=Le,Le=f);else ie=f;return ie!==f?(je=w,w=Hl(B,j,L,ie)):(C=w,w=f),w}function wf(){var w,B,j;return w=C,B=ne(),j=$i(),je=w,w=jl(B,j),w}function $i(){var w,B,j,L;for(w=C,B=C,j=[],h.length>C?(L=h.charAt(C),C++):(L=f,ue===0&&we(Ds));L!==f;)j.push(L),h.length>C?(L=h.charAt(C),C++):(L=f,ue===0&&we(Ds));return B=h.substring(B,C),je=w,B=$u(B),w=B,w}function ne(){var w,B,j;return w=C,B=C,j=de(),B=h.substring(B,C),je=w,B=Ul(B),w=B,w}function de(){var w,B;for(w=[],B=le();B!==f;)w.push(B),B=le();return w}function le(){var w,B,j,L,ee,ie,Le,ut,hn,zr;return w=C,B=Ze(),h.substr(C,6)===v?(j=v,C+=6):(j=f,ue===0&&we(Xi)),j!==f?(L=Ze(),ee=Me(),ee!==f?(ie=Ze(),Le=Yt(),Le!==f?(ut=C,hn=Ze(),h.charCodeAt(C)===59?(zr=y,C++):(zr=f,ue===0&&we(vi)),zr!==f?(hn=[hn,zr],ut=hn):(C=ut,ut=f),ut===f&&(ut=null),je=w,w=Ml(ee,Le)):(C=w,w=f)):(C=w,w=f)):(C=w,w=f),w===f&&(w=C,B=Ze(),h.substr(C,6)===v?(j=v,C+=6):(j=f,ue===0&&we(Xi)),j!==f?(L=Ze(),ee=_n(),ee!==f?(ie=C,Le=Ze(),h.charCodeAt(C)===59?(ut=y,C++):(ut=f,ue===0&&we(vi)),ut!==f?(Le=[Le,ut],ie=Le):(C=ie,ie=f),ie===f&&(ie=null),je=w,w=ql(ee)):(C=w,w=f)):(C=w,w=f)),w}function Me(){var w,B,j,L,ee,ie,Le;return w=Nt(),w===f&&(w=mr(),w===f&&(w=C,B=pt(),B!==f?(j=C,L=Ze(),h.charCodeAt(C)===44?(ee=m,C++):(ee=f,ue===0&&we(jt)),ee!==f?(ie=Ze(),Le=Nt(),Le===f&&(Le=mr()),Le!==f?j=Le:(C=j,j=f)):(C=j,j=f),j===f&&(j=null),je=w,w=Vl(B,j)):(C=w,w=f))),w}function pt(){var w,B;return w=C,B=ns(),B!==f&&(je=w,B=zl(B)),w=B,w}function Nt(){var w,B,j,L,ee,ie;return w=C,h.charCodeAt(C)===42?(B=D,C++):(B=f,ue===0&&we(mi)),B!==f?(j=Ze(),h.substr(C,2)===S?(L=S,C+=2):(L=f,ue===0&&we(Ys)),L!==f?(ee=Ze(),ie=ns(),ie!==f?(je=w,w=Qt(ie)):(C=w,w=f)):(C=w,w=f)):(C=w,w=f),w}function mr(){var w,B,j,L,ee,ie,Le,ut;return w=C,h.charCodeAt(C)===123?(B=F,C++):(B=f,ue===0&&we(Kn)),B!==f?(j=Ze(),h.charCodeAt(C)===125?(L=$,C++):(L=f,ue===0&&we(zn)),L!==f?(je=w,w=Xt()):(C=w,w=f)):(C=w,w=f),w===f&&(w=C,h.charCodeAt(C)===123?(B=F,C++):(B=f,ue===0&&we(Kn)),B!==f?(j=Ze(),L=qu(),L!==f?(ee=Ze(),ie=C,h.charCodeAt(C)===44?(Le=m,C++):(Le=f,ue===0&&we(jt)),Le!==f?(ut=Ze(),Le=[Le,ut],ie=Le):(C=ie,ie=f),ie===f&&(ie=null),h.charCodeAt(C)===125?(Le=$,C++):(Le=f,ue===0&&we(zn)),Le!==f?w=L:(C=w,w=f)):(C=w,w=f)):(C=w,w=f)),w}function Yt(){var w,B,j,L;return w=C,h.substr(C,4)===k?(B=k,C+=4):(B=f,ue===0&&we(Fs)),B!==f?(j=Ze(),L=_n(),L!==f?w=L:(C=w,w=f)):(C=w,w=f),w}function qu(){var w,B,j,L,ee,ie,Le;for(w=C,B=[],j=ac();j!==f;)B.push(j),j=C,L=C,ee=Ze(),h.charCodeAt(C)===44?(ie=m,C++):(ie=f,ue===0&&we(jt)),ie!==f?(Le=Ze(),ee=[ee,ie,Le],L=ee):(C=L,L=f),L!==f?(L=ac(),L===f?(C=j,j=f):j=L):j=L;return B.length<1?(C=w,w=f):w=B,w}function ac(){var w,B,j,L,ee,ie;return w=C,B=bf(),B!==f?(j=Ze(),h.substr(C,2)===S?(L=S,C+=2):(L=f,ue===0&&we(Ys)),L!==f?(ee=Ze(),ie=ns(),ie!==f?(je=w,w=Gl(B,ie)):(C=w,w=f)):(C=w,w=f)):(C=w,w=f),w===f&&(w=C,B=ns(),B!==f&&(je=w,B=Wl(B)),w=B),w}function _n(){var w,B;return w=C,B=aa(),B!==f&&(je=w,B=Yl(B)),w=B,w}function ns(){var w,B;return w=C,B=$s(),B!==f&&(je=w,B=ef(B)),w=B,w}function bf(){var w,B;return w=Ti(),w===f&&(w=C,B=aa(),B!==f&&(je=w,B=tf(B)),w=B),w}function $s(){var w,B;return w=C,B=Ti(),B!==f&&(je=w,B=rf(B)),w=B,w}function Na(){var w,B,j,L,ee;return w=C,h.charCodeAt(C)===123?(B=F,C++):(B=f,ue===0&&we(Kn)),B!==f?(j=ca(),j!==f?(h.charCodeAt(C)===125?(L=$,C++):(L=f,ue===0&&we(zn)),L!==f?(ee=Zu(),ee!==f?(je=w,w=qo(j)):(C=w,w=f)):(C=w,w=f)):(C=w,w=f)):(C=w,w=f),w}function La(){var w,B,j;return w=C,B=ca(),B!==f?(j=Zu(),j!==f?(je=w,w=nf(B)):(C=w,w=f)):(C=w,w=f),w}function Ut(){var w,B,j,L,ee,ie,Le,ut;return w=C,B=Ti(),B!==f?(j=Ze(),L=C,ee=aa(),ee!==f?(ie=Ze(),L=ee):(C=L,L=f),L===f&&(L=null),h.charCodeAt(C)===61?(ee=O,C++):(ee=f,ue===0&&we(Js)),ee!==f?(ie=Ze(),Le=Vu(),Le!==f?(ut=Zu(),ut!==f?(je=w,w=$r(B,L,Le)):(C=w,w=f)):(C=w,w=f)):(C=w,w=f)):(C=w,w=f),w}function Vu(){var w,B,j,L,ee,ie,Le,ut;if(w=C,B=Ha(),B!==f){for(j=[],L=C,ee=Ze(),h.charCodeAt(C)===47?(ie=z,C++):(ie=f,ue===0&&we(Cs)),ie!==f?(Le=Ze(),ut=Ha(),ut!==f?L=ut:(C=L,L=f)):(C=L,L=f);L!==f;)j.push(L),L=C,ee=Ze(),h.charCodeAt(C)===47?(ie=z,C++):(ie=f,ue===0&&we(Cs)),ie!==f?(Le=Ze(),ut=Ha(),ut!==f?L=ut:(C=L,L=f)):(C=L,L=f);je=w,w=ku(B,j)}else C=w,w=f;return w}function Ha(){var w,B,j,L,ee;return w=C,B=ja(),B!==f?(j=C,L=Ze(),ee=ca(),ee!==f?j=ee:(C=j,j=f),j===f&&(j=null),je=w,w=Qi(B,j)):(C=w,w=f),w}function ja(){var w,B,j,L,ee,ie;if(w=C,B=Ku(),B!==f){for(j=[],L=C,ee=Ze(),ie=Ku(),ie!==f?L=ie:(C=L,L=f);L!==f;)j.push(L),L=C,ee=Ze(),ie=Ku(),ie!==f?L=ie:(C=L,L=f);je=w,w=Vo(B,j)}else C=w,w=f;return w}function Ku(){var w,B,j,L;return w=C,B=_f(),B!==f?(j=uc(),j===f&&(j=null),L=ks(),L!==f?(je=w,w=xu(B,j,L)):(C=w,w=f)):(C=w,w=f),w===f&&(w=C,B=uc(),B!==f?(j=ks(),j!==f?(je=w,w=In(B,j)):(C=w,w=f)):(C=w,w=f),w===f&&(w=ks())),w}function _f(){var w,B;return w=C,h.charCodeAt(C)===64?(B=H,C++):(B=f,ue===0&&we(Fu)),B!==f&&(je=w,B=Ko()),w=B,w}function uc(){var w,B,j,L,ee;return w=C,B=Ti(),B!==f?(j=Ze(),h.charCodeAt(C)===58?(L=P,C++):(L=f,ue===0&&we(Zs)),L!==f?(ee=Ze(),je=w,w=zo(B)):(C=w,w=f)):(C=w,w=f),w}function ks(){var w,B,j,L;return w=C,B=ki(),B!==f?(j=Ze(),L=ia(),L!==f?(je=w,w=Go(B,L)):(C=w,w=f)):(C=w,w=f),w===f&&(w=ia()),w}function ki(){var w;return w=h.charAt(C),_e.test(w)?C++:(w=f,ue===0&&we(re)),w}function ia(){var w,B,j,L;return w=C,B=xs(),B!==f?(j=Ze(),L=oc(),L!==f?(je=w,w=Wo(B,L)):(C=w,w=f)):(C=w,w=f),w===f&&(w=Ua(),w===f&&(w=xs())),w}function oc(){var w;return w=h.charAt(C),qt.test(w)?C++:(w=f,ue===0&&we(ve)),w}function Ua(){var w,B,j,L,ee,ie,Le,ut,hn,zr,eo,Bf;return w=C,B=xs(),B!==f?(j=Ze(),h.charCodeAt(C)===124?(L=R,C++):(L=f,ue===0&&we(ze)),L!==f?(ee=Ze(),ie=cc(),ie!==f?(Le=Ze(),ut=C,h.charCodeAt(C)===44?(hn=m,C++):(hn=f,ue===0&&we(jt)),hn!==f?(zr=Ze(),eo=Vu(),eo!==f?(Bf=Ze(),ut=eo):(C=ut,ut=f)):(C=ut,ut=f),ut===f&&(ut=null),h.charCodeAt(C)===124?(hn=R,C++):(hn=f,ue===0&&we(ze)),hn!==f?(je=w,w=Yo(B,ie,ut)):(C=w,w=f)):(C=w,w=f)):(C=w,w=f)):(C=w,w=f),w}function cc(){var w,B,j,L,ee,ie;return w=C,B=Ma(),B===f&&(B=null),j=Ze(),h.substr(C,2)===N?(L=N,C+=2):(L=f,ue===0&&we(Ue)),L!==f?(ee=Ze(),ie=Ma(),ie===f&&(ie=null),je=w,w=Jo(B,ie)):(C=w,w=f),w===f&&(w=C,B=Ma(),B!==f&&(je=w,B=wn(B)),w=B),w}function Ma(){var w,B;return w=C,B=If(),B!==f&&(je=w,B=sf(B)),w=B,w===f&&(w=C,B=Ti(),B!==f&&(je=w,B=Pn(B)),w=B,w===f&&(w=C,B=ca(),B!==f&&(je=w,B=af(B)),w=B)),w}function xs(){var w,B,j,L,ee,ie;return w=Sf(),w===f&&(w=Wu(),w===f&&(w=cs(),w===f&&(w=lc(),w===f&&(w=sa(),w===f&&(w=C,h.charCodeAt(C)===40?(B=x,C++):(B=f,ue===0&&we(et)),B!==f?(j=Ze(),L=Vu(),L!==f?(ee=Ze(),h.charCodeAt(C)===41?(ie=V,C++):(ie=f,ue===0&&we(wt)),ie!==f?(je=w,w=Xo(L)):(C=w,w=f)):(C=w,w=f)):(C=w,w=f)))))),w}function lc(){var w,B,j,L,ee,ie,Le,ut;return w=C,B=Ti(),B!==f?(h.charCodeAt(C)===46?(j=Y,C++):(j=f,ue===0&&we(Et)),j!==f?(L=Ti(),L!==f?(je=w,w=Pi(B,L)):(C=w,w=f)):(C=w,w=f)):(C=w,w=f),w===f&&(w=C,B=Ti(),B!==f?(j=C,ue++,L=C,ee=Ze(),ie=C,Le=aa(),Le!==f?(ut=Ze(),Le=[Le,ut],ie=Le):(C=ie,ie=f),ie===f&&(ie=null),h.charCodeAt(C)===61?(Le=O,C++):(Le=f,ue===0&&we(Js)),Le!==f?(ee=[ee,ie,Le],L=ee):(C=L,L=f),ue--,L===f?j=void 0:(C=j,j=f),j!==f?(je=w,w=xa(B)):(C=w,w=f)):(C=w,w=f)),w}function sa(){var w,B,j,L;return w=C,B=is(),B!==f?(j=Ze(),L=ca(),L!==f?(je=w,w=Tu(B,L)):(C=w,w=f)):(C=w,w=f),w}function is(){var w;return w=h.charAt(C),Oe.test(w)?C++:(w=f,ue===0&&we(Or)),w}function Hr(){var w;return w=Ef(),w===f&&(w=Af()),w}function Ef(){var w;return w=h.charAt(C),Ot.test(w)?C++:(w=f,ue===0&&we(fr)),w}function Af(){var w,B,j,L;return w=C,B=C,j=h.charAt(C),ur.test(j)?C++:(j=f,ue===0&&we(wi)),j!==f?(L=h.charAt(C),Kr.test(L)?C++:(L=f,ue===0&&we(Ci)),L!==f?(j=[j,L],B=j):(C=B,B=f)):(C=B,B=f),B!==f?w=h.substring(w,C):w=B,w===f&&(w=h.charAt(C),yt.test(w)?C++:(w=f,ue===0&&we(mn))),w}function qa(){var w,B;return ue++,w=Jn(),qe.test(w)?C+=w.length:(w=f,ue===0&&we(Lr)),ue--,w===f&&(B=f,ue===0&&we(Cn)),w}function xi(){var w;return w=h.charAt(C),Re.test(w)?C++:(w=f,ue===0&&we(Ii)),w}function ss(){var w,B;return ue++,h.charCodeAt(C)===10?(w=G,C++):(w=f,ue===0&&we(Cu)),w===f&&(h.substr(C,2)===W?(w=W,C+=2):(w=f,ue===0&&we(Is)),w===f&&(w=h.charAt(C),or.test(w)?C++:(w=f,ue===0&&we(Iu)))),ue--,w===f&&(B=f,ue===0&&we(bi)),w}function Va(){var w,B;return ue++,w=yf(),w===f&&(w=fc()),ue--,w===f&&(B=f,ue===0&&we(Vt)),w}function yf(){var w,B,j,L,ee,ie;if(w=C,h.substr(C,2)===Z?(B=Z,C+=2):(B=f,ue===0&&we(Sr)),B!==f){for(j=[],L=C,ee=C,ue++,h.substr(C,2)===ae?(ie=ae,C+=2):(ie=f,ue===0&&we(rt)),ue--,ie===f?ee=void 0:(C=ee,ee=f),ee!==f?(ie=Hr(),ie!==f?(ee=[ee,ie],L=ee):(C=L,L=f)):(C=L,L=f);L!==f;)j.push(L),L=C,ee=C,ue++,h.substr(C,2)===ae?(ie=ae,C+=2):(ie=f,ue===0&&we(rt)),ue--,ie===f?ee=void 0:(C=ee,ee=f),ee!==f?(ie=Hr(),ie!==f?(ee=[ee,ie],L=ee):(C=L,L=f)):(C=L,L=f);h.substr(C,2)===ae?(L=ae,C+=2):(L=f,ue===0&&we(rt)),L!==f?(B=[B,j,L],w=B):(C=w,w=f)}else C=w,w=f;return w}function zu(){var w,B,j,L,ee,ie;if(w=C,h.substr(C,2)===Z?(B=Z,C+=2):(B=f,ue===0&&we(Sr)),B!==f){for(j=[],L=C,ee=C,ue++,h.substr(C,2)===ae?(ie=ae,C+=2):(ie=f,ue===0&&we(rt)),ie===f&&(ie=xi()),ue--,ie===f?ee=void 0:(C=ee,ee=f),ee!==f?(ie=Hr(),ie!==f?(ee=[ee,ie],L=ee):(C=L,L=f)):(C=L,L=f);L!==f;)j.push(L),L=C,ee=C,ue++,h.substr(C,2)===ae?(ie=ae,C+=2):(ie=f,ue===0&&we(rt)),ie===f&&(ie=xi()),ue--,ie===f?ee=void 0:(C=ee,ee=f),ee!==f?(ie=Hr(),ie!==f?(ee=[ee,ie],L=ee):(C=L,L=f)):(C=L,L=f);h.substr(C,2)===ae?(L=ae,C+=2):(L=f,ue===0&&we(rt)),L!==f?(B=[B,j,L],w=B):(C=w,w=f)}else C=w,w=f;return w}function fc(){var w,B,j,L,ee,ie;if(w=C,h.substr(C,2)===He?(B=He,C+=2):(B=f,ue===0&&we(vr)),B!==f){for(j=[],L=C,ee=C,ue++,ie=xi(),ue--,ie===f?ee=void 0:(C=ee,ee=f),ee!==f?(ie=Hr(),ie!==f?(ee=[ee,ie],L=ee):(C=L,L=f)):(C=L,L=f);L!==f;)j.push(L),L=C,ee=C,ue++,ie=xi(),ue--,ie===f?ee=void 0:(C=ee,ee=f),ee!==f?(ie=Hr(),ie!==f?(ee=[ee,ie],L=ee):(C=L,L=f)):(C=L,L=f);B=[B,j],w=B}else C=w,w=f;return w}function Ti(){var w,B,j,L;if(ue++,w=C,B=Dr(),B!==f){for(j=[],L=Ur();L!==f;)j.push(L),L=Ur();je=w,w=rr(B,j)}else C=w,w=f;return ue--,w===f&&(B=f,ue===0&&we(on)),w}function Dr(){var w,B,j;return w=Jn(),kt.test(w)?C+=w.length:(w=f,ue===0&&we(Pr)),w===f&&(w=C,h.charCodeAt(C)===92?(B=Ie,C++):(B=f,ue===0&&we(ln)),B!==f?(j=gc(),j!==f?w=j:(C=w,w=f)):(C=w,w=f)),w}function Ur(){var w;return w=Jn(),Ge.test(w)?C+=w.length:(w=f,ue===0&&we(Gn)),w}function Sf(){var w,B,j;return ue++,w=C,B=aa(),B!==f?(h.charCodeAt(C)===105?(j=J,C++):(j=f,ue===0&&we(Wn)),j===f&&(j=null),je=w,w=Bi(B,j)):(C=w,w=f),ue--,w===f&&(B=f,ue===0&&we(ui)),w}function aa(){var w,B,j,L;if(ue++,w=C,h.charCodeAt(C)===34?(B=oe,C++):(B=f,ue===0&&we(Qs)),B!==f){for(j=[],L=Gu();L!==f;)j.push(L),L=Gu();h.charCodeAt(C)===34?(L=oe,C++):(L=f,ue===0&&we(Qs)),L!==f?(je=w,w=Ou(j)):(C=w,w=f)}else C=w,w=f;if(w===f)if(w=C,h.charCodeAt(C)===39?(B=be,C++):(B=f,ue===0&&we(Ba)),B!==f){for(j=[],L=hc();L!==f;)j.push(L),L=hc();h.charCodeAt(C)===39?(L=be,C++):(L=f,ue===0&&we(Ba)),L!==f?(je=w,w=uf(j)):(C=w,w=f)}else C=w,w=f;return ue--,w===f&&(B=f,ue===0&&we(Zi)),w}function Gu(){var w,B,j,L;return w=C,B=C,j=C,ue++,L=h.charAt(C),cr.test(L)?C++:(L=f,ue===0&&we(Rl)),ue--,L===f?j=void 0:(C=j,j=f),j!==f?(L=Hr(),L!==f?(j=[j,L],B=j):(C=B,B=f)):(C=B,B=f),B!==f?w=h.substring(w,C):w=B,w===f&&(w=C,h.charCodeAt(C)===92?(B=Ie,C++):(B=f,ue===0&&we(ln)),B!==f?(j=za(),j!==f?w=j:(C=w,w=f)):(C=w,w=f),w===f&&(w=us())),w}function hc(){var w,B,j,L;return w=C,B=C,j=C,ue++,L=h.charAt(C),zt.test(L)?C++:(L=f,ue===0&&we($o)),ue--,L===f?j=void 0:(C=j,j=f),j!==f?(L=Hr(),L!==f?(j=[j,L],B=j):(C=B,B=f)):(C=B,B=f),B!==f?w=h.substring(w,C):w=B,w===f&&(w=C,h.charCodeAt(C)===92?(B=Ie,C++):(B=f,ue===0&&we(ln)),B!==f?(j=za(),j!==f?w=j:(C=w,w=f)):(C=w,w=f),w===f&&(w=us())),w}function Wu(){var w,B,j,L,ee,ie;if(ue++,w=C,h.charCodeAt(C)===91?(B=Fe,C++):(B=f,ue===0&&we(ko)),B!==f){for(h.charCodeAt(C)===94?(j=Pe,C++):(j=f,ue===0&&we($l)),j===f&&(j=null),L=[],ee=Ts(),ee===f&&(ee=dc(),ee===f&&(ee=as()));ee!==f;)L.push(ee),ee=Ts(),ee===f&&(ee=dc(),ee===f&&(ee=as()));h.charCodeAt(C)===93?(ee=_t,C++):(ee=f,ue===0&&we(xo)),ee!==f?(ie=Ff(),je=w,w=Nu(j,L,ie)):(C=w,w=f)}else C=w,w=f;return ue--,w===f&&(B=f,ue===0&&we(Ra)),w}function Ts(){var w,B,j;return w=C,h.charCodeAt(C)===92?(B=Ie,C++):(B=f,ue===0&&we(ln)),B!==f?(j=Yu(),j!==f?w=j:(C=w,w=f)):(C=w,w=f),w}function Yu(){var w,B,j,L,ee,ie,Le;return w=C,B=C,j=C,L=h.charAt(C),L.toLowerCase()===dt?C++:(L=f,ue===0&&we(To)),L!==f?(h.charCodeAt(C)===123?(ee=F,C++):(ee=f,ue===0&&we(Kn)),ee!==f?(ie=Os(),ie!==f?(h.charCodeAt(C)===125?(Le=$,C++):(Le=f,ue===0&&we(zn)),Le!==f?(L=[L,ee,ie,Le],j=L):(C=j,j=f)):(C=j,j=f)):(C=j,j=f)):(C=j,j=f),j!==f?B=h.substring(B,C):B=j,B!==f&&(je=w,B=of(B)),w=B,w}function Os(){var w,B,j,L;return w=C,B=ua(),B!==f?(h.charCodeAt(C)===61?(j=O,C++):(j=f,ue===0&&we(Js)),j!==f?(L=oa(),L!==f?(B=[B,j,L],w=B):(C=w,w=f)):(C=w,w=f)):(C=w,w=f),w===f&&(w=Ka()),w}function ua(){var w,B,j;if(w=C,B=[],j=Ju(),j!==f)for(;j!==f;)B.push(j),j=Ju();else B=f;return B!==f?w=h.substring(w,C):w=B,w}function oa(){var w,B,j;if(w=C,B=[],j=_i(),j!==f)for(;j!==f;)B.push(j),j=_i();else B=f;return B!==f?w=h.substring(w,C):w=B,w}function Ka(){var w,B,j;if(w=C,B=[],j=_i(),j!==f)for(;j!==f;)B.push(j),j=_i();else B=f;return B!==f?w=h.substring(w,C):w=B,w}function _i(){var w;return w=Ju(),w===f&&(w=Wa()),w}function Ju(){var w;return w=Df(),w===f&&(h.charCodeAt(C)===95?(w=ye,C++):(w=f,ue===0&&we(Pu))),w}function Df(){var w;return w=h.charAt(C),pe.test(w)?C++:(w=f,ue===0&&we(kl)),w}function Ff(){var w,B,j;for(w=C,B=[],j=pc();j!==f;)B.push(j),j=pc();return je=w,B=cf(B),w=B,w}function pc(){var w,B;return w=C,h.charCodeAt(C)===105?(B=J,C++):(B=f,ue===0&&we(Wn)),B!==f&&(je=w,B=lf()),w=B,w===f&&(w=C,h.charCodeAt(C)===117?(B=Je,C++):(B=f,ue===0&&we($a)),B!==f&&(je=w,B=Zo()),w=B),w}function dc(){var w,B,j,L;return w=C,B=as(),B!==f?(h.charCodeAt(C)===45?(j=Ye,C++):(j=f,ue===0&&we(Bu)),j!==f?(L=as(),L!==f?(je=w,w=Ta(B,L)):(C=w,w=f)):(C=w,w=f)):(C=w,w=f),w}function as(){var w,B,j,L;return w=C,B=C,j=C,ue++,L=h.charAt(C),Er.test(L)?C++:(L=f,ue===0&&we(Ru)),ue--,L===f?j=void 0:(C=j,j=f),j!==f?(L=Hr(),L!==f?(j=[j,L],B=j):(C=B,B=f)):(C=B,B=f),B!==f?w=h.substring(w,C):w=B,w===f&&(w=C,h.charCodeAt(C)===92?(B=Ie,C++):(B=f,ue===0&&we(ln)),B!==f?(j=za(),j!==f?w=j:(C=w,w=f)):(C=w,w=f),w===f&&(w=us())),w}function us(){var w,B,j;return w=C,h.charCodeAt(C)===92?(B=Ie,C++):(B=f,ue===0&&we(ln)),B!==f?(j=ss(),j!==f?(je=w,w=Bs()):(C=w,w=f)):(C=w,w=f),w}function za(){var w,B,j,L;return w=M(),w===f&&(w=C,h.charCodeAt(C)===48?(B=Xe,C++):(B=f,ue===0&&we(Ps)),B!==f?(j=C,ue++,L=Wa(),ue--,L===f?j=void 0:(C=j,j=f),j!==f?(je=w,w=ff()):(C=w,w=f)):(C=w,w=f),w===f&&(w=It(),w===f&&(w=gc()))),w}function M(){var w;return w=os(),w===f&&(w=Ga()),w}function os(){var w,B;return w=h.charAt(C),St.test(w)?C++:(w=f,ue===0&&we(Oo)),w===f&&(w=C,h.charCodeAt(C)===98?(B=De,C++):(B=f,ue===0&&we(No)),B!==f&&(je=w,B=Qo()),w=B,w===f&&(w=C,h.charCodeAt(C)===102?(B=ke,C++):(B=f,ue===0&&we(xl)),B!==f&&(je=w,B=ec()),w=B,w===f&&(w=C,h.charCodeAt(C)===110?(B=fe,C++):(B=f,ue===0&&we(Lo)),B!==f&&(je=w,B=Lu()),w=B,w===f&&(w=C,h.charCodeAt(C)===114?(B=gt,C++):(B=f,ue===0&&we(Ho)),B!==f&&(je=w,B=Hu()),w=B,w===f&&(w=C,h.charCodeAt(C)===116?(B=Te,C++):(B=f,ue===0&&we(jo)),B!==f&&(je=w,B=tc()),w=B,w===f&&(w=C,h.charCodeAt(C)===118?(B=xe,C++):(B=f,ue===0&&we(Uo)),B!==f&&(je=w,B=hf()),w=B)))))),w}function Ga(){var w,B,j,L;return w=C,B=C,j=C,ue++,L=Rn(),L===f&&(L=xi()),ue--,L===f?j=void 0:(C=j,j=f),j!==f?(L=Hr(),L!==f?(j=[j,L],B=j):(C=B,B=f)):(C=B,B=f),B!==f?w=h.substring(w,C):w=B,w}function Rn(){var w;return w=os(),w===f&&(w=h.charAt(C),Ft.test(w)?C++:(w=f,ue===0&&we(Tl))),w}function It(){var w,B,j,L,ee,ie;return w=C,h.charCodeAt(C)===120?(B=ar,C++):(B=f,ue===0&&we(Ol)),B!==f?(j=C,L=C,ee=Oi(),ee!==f?(ie=Oi(),ie!==f?(ee=[ee,ie],L=ee):(C=L,L=f)):(C=L,L=f),L!==f?j=h.substring(j,C):j=L,j!==f?(je=w,w=ju(j)):(C=w,w=f)):(C=w,w=f),w}function gc(){var w,B,j,L,ee,ie,Le,ut;if(w=C,h.charCodeAt(C)===117?(B=Je,C++):(B=f,ue===0&&we($a)),B!==f?(j=C,L=C,ee=Oi(),ee!==f?(ie=Oi(),ie!==f?(Le=Oi(),Le!==f?(ut=Oi(),ut!==f?(ee=[ee,ie,Le,ut],L=ee):(C=L,L=f)):(C=L,L=f)):(C=L,L=f)):(C=L,L=f),L!==f?j=h.substring(j,C):j=L,j!==f?(je=w,w=Uu(j)):(C=w,w=f)):(C=w,w=f),w===f)if(w=C,h.charCodeAt(C)===117?(B=Je,C++):(B=f,ue===0&&we($a)),B!==f)if(h.charCodeAt(C)===123?(j=F,C++):(j=f,ue===0&&we(Kn)),j!==f){if(L=C,ee=[],ie=Oi(),ie!==f)for(;ie!==f;)ee.push(ie),ie=Oi();else ee=f;ee!==f?L=h.substring(L,C):L=ee,L!==f?(h.charCodeAt(C)===125?(ee=$,C++):(ee=f,ue===0&&we(zn)),ee!==f?(je=w,w=pf(L)):(C=w,w=f)):(C=w,w=f)}else C=w,w=f;else C=w,w=f;return w}function Wa(){var w;return w=h.charAt(C),Vn.test(w)?C++:(w=f,ue===0&&we(Nl)),w}function Oi(){var w;return w=h.charAt(C),Ir.test(w)?C++:(w=f,ue===0&&we(Mo)),w}function cs(){var w,B;return w=C,h.charCodeAt(C)===46?(B=Y,C++):(B=f,ue===0&&we(Et)),B!==f&&(je=w,B=rc()),w=B,w}function ca(){var w,B,j,L;return ue++,w=C,h.charCodeAt(C)===123?(B=F,C++):(B=f,ue===0&&we(Kn)),B!==f?(j=Cf(),h.charCodeAt(C)===125?(L=$,C++):(L=f,ue===0&&we(zn)),L!==f?w=j:(C=w,w=f)):(C=w,w=f),ue--,w===f&&(B=f,ue===0&&we(Ll)),w}function Cf(){var w,B;return w=C,B=Xu(),je=w,B=bn(B),w=B,w}function Xu(){var w,B,j,L,ee,ie;if(w=C,B=[],j=[],L=C,ee=C,ue++,ie=h.charAt(C),Fn.test(ie)?C++:(ie=f,ue===0&&we(ka)),ue--,ie===f?ee=void 0:(C=ee,ee=f),ee!==f?(ie=Hr(),ie!==f?(ee=[ee,ie],L=ee):(C=L,L=f)):(C=L,L=f),L!==f)for(;L!==f;)j.push(L),L=C,ee=C,ue++,ie=h.charAt(C),Fn.test(ie)?C++:(ie=f,ue===0&&we(ka)),ue--,ie===f?ee=void 0:(C=ee,ee=f),ee!==f?(ie=Hr(),ie!==f?(ee=[ee,ie],L=ee):(C=L,L=f)):(C=L,L=f);else j=f;for(j===f&&(j=C,h.charCodeAt(C)===123?(L=F,C++):(L=f,ue===0&&we(Kn)),L!==f?(ee=Xu(),h.charCodeAt(C)===125?(ie=$,C++):(ie=f,ue===0&&we(zn)),ie!==f?(L=[L,ee,ie],j=L):(C=j,j=f)):(C=j,j=f));j!==f;){if(B.push(j),j=[],L=C,ee=C,ue++,ie=h.charAt(C),Fn.test(ie)?C++:(ie=f,ue===0&&we(ka)),ue--,ie===f?ee=void 0:(C=ee,ee=f),ee!==f?(ie=Hr(),ie!==f?(ee=[ee,ie],L=ee):(C=L,L=f)):(C=L,L=f),L!==f)for(;L!==f;)j.push(L),L=C,ee=C,ue++,ie=h.charAt(C),Fn.test(ie)?C++:(ie=f,ue===0&&we(ka)),ue--,ie===f?ee=void 0:(C=ee,ee=f),ee!==f?(ie=Hr(),ie!==f?(ee=[ee,ie],L=ee):(C=L,L=f)):(C=L,L=f);else j=f;j===f&&(j=C,h.charCodeAt(C)===123?(L=F,C++):(L=f,ue===0&&we(Kn)),L!==f?(ee=Xu(),h.charCodeAt(C)===125?(ie=$,C++):(ie=f,ue===0&&we(zn)),ie!==f?(L=[L,ee,ie],j=L):(C=j,j=f)):(C=j,j=f))}return w=h.substring(w,C),w}function If(){var w,B,j,L;if(w=C,B=C,j=[],L=Wa(),L!==f)for(;L!==f;)j.push(L),L=Wa();else j=f;return j!==f?B=h.substring(B,C):B=j,B!==f&&(je=w,B=Mu(B)),w=B,w}function Ze(){var w,B;for(w=[],B=qa(),B===f&&(B=ss(),B===f&&(B=Va()));B!==f;)w.push(B),B=qa(),B===f&&(B=ss(),B===f&&(B=Va()));return w}function Ei(){var w,B;for(w=[],B=qa(),B===f&&(B=zu());B!==f;)w.push(B),B=qa(),B===f&&(B=zu());return w}function Zu(){var w,B,j,L;if(w=[],B=C,j=Ze(),h.charCodeAt(C)===59?(L=y,C++):(L=f,ue===0&&we(vi)),L!==f?(j=[j,L],B=j):(C=B,B=f),B!==f)for(;B!==f;)w.push(B),B=C,j=Ze(),h.charCodeAt(C)===59?(L=y,C++):(L=f,ue===0&&we(vi)),L!==f?(j=[j,L],B=j):(C=B,B=f);else w=f;return w===f&&(w=C,B=Ei(),j=fc(),j===f&&(j=null),L=ss(),L!==f?(B=[B,j,L],w=B):(C=w,w=f),w===f&&(w=C,B=Ze(),j=Pf(),j!==f?(B=[B,j],w=B):(C=w,w=f))),w}function Pf(){var w,B;return w=C,ue++,h.length>C?(B=h.charAt(C),C++):(B=f,ue===0&&we(Ds)),ue--,B===f?w=void 0:(C=w,w=f),w}var vc=new Set(d.reservedWords);ra=g();var Qu=ra!==f&&C===h.length;function mc(){throw ra!==f&&C<h.length&&we(vf()),ic(Oa,Yn<h.length?Jn(Yn):null,Yn<h.length?Rs(Yn,Yn+1):Rs(Yn,Yn))}if(d.peg$library)return{peg$result:ra,peg$currPos:C,peg$FAILED:f,peg$maxFailExpected:Oa,peg$maxFailPos:Yn,peg$success:Qu,peg$throw:Qu?void 0:mc};if(Qu)return ra;mc()},a={$:"text","&":"simple_and","!":"simple_not"},o={"?":"optional","*":"zero_or_more","+":"one_or_more"},c={"&":"semantic_and","!":"semantic_not"},u=(function(h){_inherits(d,h);function d(f,b,A,g){_class_call_check(this,d);var v;return v=_call_super(this,d,[f]),v.expected=b,v.found=A,v.location=g,v.name="SyntaxError",v}return _create_class(d,[{key:"format",value:function(f){var b=this,A="Error: "+this.message;if(this.location){var g=null,v=f.find(function(O){return O.source===b.location.source});v&&(g=v.text.split(/\r\n|\n|\r/g));var y=this.location.start,m=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(y):y,D=this.location.source+":"+m.line+":"+m.column;if(g){var S=this.location.end,F="".padEnd(m.line.toString().length," "),$=g[y.line-1],k=(y.line===S.line?S.column:$.length+1)-y.column||1;A+=`
 --> `+D+`
`+F+` |
`+m.line+" | "+$+`
`+F+" | "+"".padEnd(y.column-1," ")+"".padEnd(k,"^")}else A+=`
 at `+D}return A}}],[{key:"buildMessage",value:function(f,b){function A(k){return k.codePointAt(0).toString(16).toUpperCase()}var g=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function v(k){return g?k.replace(g,function(O){return"\\u{"+A(O)+"}"}):k}function y(k){return v(k.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(O){return"\\x0"+A(O)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(O){return"\\x"+A(O)}))}function m(k){return v(k.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(O){return"\\x0"+A(O)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(O){return"\\x"+A(O)}))}var D={literal:function(k){return'"'+y(k.text)+'"'},class:function(k){var O=k.parts.map(function(z){return Array.isArray(z)?m(z[0])+"-"+m(z[1]):m(z)});return"["+(k.inverted?"^":"")+O.join("")+"]"+(k.unicode?"u":"")},any:function(){return"any character"},end:function(){return"end of input"},other:function(k){return k.description}};function S(k){return D[k.type](k)}function F(k){var O=k.map(S);if(O.sort(),O.length>0){for(var z=1,H=1;H<O.length;H++)O[H-1]!==O[H]&&(O[z]=O[H],z++);O.length=z}switch(O.length){case 1:return O[0];case 2:return O[0]+" or "+O[1];default:return O.slice(0,-1).join(", ")+", or "+O[O.length-1]}}function $(k){return k?'"'+y(k)+'"':"end of input"}return"Expected "+F(f)+" but "+$(b)+" found."}}]),d})(_wrap_native_super(SyntaxError));r.exports={StartRules:["Grammar","ImportsAndSource"],SyntaxError:u,parse:s}}),Nr=U(function(t,r){"use strict";var s=function(F,$,k){var O=m.offsetStart($),z=O.line,H=O.column-1,P=F.split(`
`);return P.length===1?new y(z,H,String($.source),F,k):new y(null,null,String($.source),P.map(function(R,N){return new y(z+N,N===0?H:0,String($.source),N===P.length-1?R:[R,`
`],k)}))},a=function(F,$,k,O,z){if(k){var H=m.offsetEnd(k);return new y(null,null,String(k.source),[F,s($,k,z),new y(H.line,H.column-1,String(k.source),O)])}return new y(null,null,null,[F,$,O])},o=function(F,$){if(!F.literals||!F.locations||!F.classes||!F.expectations||!F.functions||!F.importedNames)throw new Error("generateJS: generate bytecode was not called.");var k=F.literals,O=F.locations,z=F.classes,H=F.expectations,P=F.functions,R=F.importedNames;if(!$.allowedStartRules)throw new Error("generateJS: options.allowedStartRules was not set.");var N=$.allowedStartRules,x=$.dependencies||{};function V(ye){var Je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",Ye=ye.match(/^\n*([ \t]+)/);return(Ye?ye.replace(new RegExp("^".concat(Ye[1]),"gm"),Je):ye).replace(/[ \t]+$/,"")}function Y(ye){var Je=!0,Ye=0;function Xe(De){return Array.isArray(De)?De.map(function(ke){return Xe(ke)}):_instanceof(De,y)?(Ye++,De.children=Xe(De.children),Ye--,De):(Je?De=De.replace(/^(.+)$/gm,"  $1"):De=De.replace(/\n(\s*\S)/g,`
  $1`),Je=!Ye||De.endsWith(`
`),De)}return Xe(ye)}function G(ye){return"peg$c"+ye}function W(ye){return"peg$r"+ye}function Z(ye){return"peg$e"+ye}function ae(ye){return"peg$f"+ye}function He(ye){return"peg$import"+ye}function Ie(ye){return"peg$parse"+ye}function J(){function ye(De){return'"'+A(De)+'"'}function Je(De){return"/^["+(De.inverted?"^":"")+De.value.map(function(ke){return Array.isArray(ke)?g(ke[0])+"-"+g(ke[1]):g(ke)}).join("")+"]/"+(De.ignoreCase?"i":"")+(De.unicode?"u":"")}function Ye(De){switch(De.type){case"rule":return'peg$otherExpectation("'+A(De.value)+'")';case"literal":return'peg$literalExpectation("'+A(De.value)+'", '+De.ignoreCase+")";case"class":return"peg$classExpectation(["+De.value.map(function(ke){return Array.isArray(ke)?'["'+A(ke[0])+'", "'+A(ke[1])+'"]':'"'+A(ke)+'"'}).join(", ")+"], "+De.inverted+", "+De.ignoreCase+", "+De.unicode+")";case"any":return"peg$anyExpectation()";default:throw new Error("Unknown expectation type ("+JSON.stringify(De)+")")}}function Xe(De,ke){return a(`
  function `.concat(ae(ke),"(").concat(De.params.join(", "),") {"),V(De.body,"    "),De.location,"  }")}return new y(null,null,$.grammarSource,[k.map(function(De,ke){return"  const "+G(ke)+" = "+ye(De)+";"}).concat("",z.map(function(De,ke){return"  const "+W(ke)+" = "+Je(De)+";"})).concat("",H.map(function(De,ke){return"  const "+Z(ke)+" = "+Ye(De)+";"})).concat("").join(`
`)].concat(_to_consumable_array(P.map(Xe))))}function oe(ye,Je){var Ye=[];return Ye.push(""),$.trace&&Ye.push("peg$tracer.trace({",'  type: "rule.enter",',"  rule: "+ye+",","  location: peg$computeLocation(startPos, startPos, true)","});",""),$.cache&&(Ye.push("const key = peg$currPos * "+F.rules.length+" + "+Je+";","const cached = peg$resultsCache[key];","","if (cached) {","  peg$currPos = cached.nextPos;",""),$.trace&&Ye.push("if (cached.result !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+ye+",","    result: cached.result,","    location: peg$computeLocation(startPos, peg$currPos, true)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+ye+",","    location: peg$computeLocation(startPos, startPos, true)","  });","}",""),Ye.push("  return cached.result;","}","")),Ye}function be(ye,Je){var Ye=[];return $.cache&&Ye.push("","peg$resultsCache[key] = { nextPos: peg$currPos, result: "+Je+" };"),$.trace&&Ye.push("","if ("+Je+" !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+ye+",","    result: "+Je+",","    location: peg$computeLocation(startPos, peg$currPos, true)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+ye+",","    location: peg$computeLocation(startPos, startPos, true)","  });","}"),Ye.push("","return "+Je+";"),Ye}function Fe(ye){var Je,Ye,Xe,De=[],ke=ye.bytecode,fe=new h(ye.name,"s","let",ke);function gt(xe){var ar=function(){switch(xe[_e]){case u.PUSH_EMPTY_STRING:Oe.push(fe.push("''")),_e++;break;case u.PUSH_CURR_POS:Oe.push(fe.push("peg$currPos")),_e++;break;case u.PUSH_UNDEFINED:Oe.push(fe.push("undefined")),_e++;break;case u.PUSH_NULL:Oe.push(fe.push("null")),_e++;break;case u.PUSH_FAILED:Oe.push(fe.push("peg$FAILED")),_e++;break;case u.PUSH_EMPTY_ARRAY:Oe.push(fe.push("[]")),_e++;break;case u.POP:fe.pop(),_e++;break;case u.POP_CURR_POS:Oe.push("peg$currPos = "+fe.pop()+";"),_e++;break;case u.POP_N:fe.pop(xe[_e+1]),_e+=2;break;case u.NIP:Ot=fe.pop(),fe.pop(),Oe.push(fe.push(Ot)),_e++;break;case u.APPEND:Ot=fe.pop(),Oe.push(fe.top()+".push("+Ot+");"),_e++;break;case u.WRAP:Oe.push(fe.push("["+fe.pop(xe[_e+1]).join(", ")+"]")),_e+=2;break;case u.TEXT:Oe.push(fe.push("input.substring("+fe.pop()+", peg$currPos)")),_e++;break;case u.PLUCK:{var kt=xe[_e+3-1],Ge=3+kt;Ot=xe.slice(_e+3,_e+Ge),Ot=kt===1?fe.index(Ot[0]):"[ ".concat(Ot.map(function(Ir){return fe.index(Ir)}).join(", ")," ]"),fe.pop(xe[_e+1]),Oe.push(fe.push(Ot)),_e+=Ge;break}case u.IF:ur(fe.top(),0);break;case u.IF_ERROR:ur(fe.top()+" === peg$FAILED",0);break;case u.IF_NOT_ERROR:ur(fe.top()+" !== peg$FAILED",0);break;case u.IF_LT:ur(fe.top()+".length < "+xe[_e+1],1);break;case u.IF_GE:ur(fe.top()+".length >= "+xe[_e+1],1);break;case u.IF_LT_DYNAMIC:ur(fe.top()+".length < ("+fe.index(xe[_e+1])+"|0)",1);break;case u.IF_GE_DYNAMIC:ur(fe.top()+".length >= ("+fe.index(xe[_e+1])+"|0)",1);break;case u.WHILE_NOT_ERROR:Re(fe.top()+" !== peg$FAILED");break;case u.MATCH_ANY:ur("input.length > peg$currPos",0);break;case u.MATCH_STRING:{var cr=xe[_e+1],zt=k[cr];qe(function(Ir,Fn){return zt.length>1?"".concat(Ir," === ").concat(G(cr)):(Ir=Fn?"".concat(Ir,".charCodeAt(0)"):"input.charCodeAt(peg$currPos)","".concat(Ir," === ").concat(zt.charCodeAt(0)))},1,zt.length);break}case u.MATCH_STRING_IC:{var pe=xe[_e+1];qe(function(Ir){return"".concat(Ir,".toLowerCase() === ").concat(G(pe))},1,k[pe].length);break}case u.MATCH_CHAR_CLASS:{var Er=xe[_e+1];qe(function(Ir){return"".concat(W(Er),".test(").concat(Ir,")")},1,1);break}case u.MATCH_UNICODE_CLASS:{var St=xe[_e+1];qe(function(Ir){return"".concat(W(St),".test(").concat(Ir,")")},1,-1);break}case u.ACCEPT_N:Oe.push(fe.push(Kr(xe[_e+1]))),Oe.push(yt(xe[_e+1],fe.top())),_e+=2;break;case u.ACCEPT_STRING:Oe.push(fe.push(G(xe[_e+1]))),Oe.push(k[xe[_e+1]].length>1?"peg$currPos += "+k[xe[_e+1]].length+";":"peg$currPos++;"),_e+=2;break;case u.FAIL:Oe.push(fe.push("peg$FAILED")),Oe.push("if (peg$silentFails === 0) { peg$fail("+Z(xe[_e+1])+"); }"),_e+=2;break;case u.LOAD_SAVED_POS:Oe.push("peg$savedPos = "+fe.index(xe[_e+1])+";"),_e+=2;break;case u.UPDATE_SAVED_POS:Oe.push("peg$savedPos = peg$currPos;"),_e++;break;case u.CALL:Ot=or(4),fe.pop(xe[_e+2]),Oe.push(fe.push(Ot)),_e+=4+xe[_e+3];break;case u.RULE:Oe.push(fe.push(Ie(F.rules[xe[_e+1]].name)+"()")),_e+=2;break;case u.LIBRARY_RULE:{var Ft=xe[_e+2],Vn=Ft===-1?"":', "'+R[Ft]+'"';Oe.push(fe.push("peg$callLibrary("+He(xe[_e+1])+Vn+")")),_e+=3;break}case u.SILENT_FAILS_ON:Oe.push("peg$silentFails++;"),_e++;break;case u.SILENT_FAILS_OFF:Oe.push("peg$silentFails--;"),_e++;break;case u.SOURCE_MAP_PUSH:fe.sourceMapPush(Oe,O[xe[_e+1]]),_e+=2;break;case u.SOURCE_MAP_POP:{fe.sourceMapPop(),_e++;break}case u.SOURCE_MAP_LABEL_PUSH:fe.labels[xe[_e+1]]={label:k[xe[_e+2]],location:O[xe[_e+3]]},_e+=4;break;case u.SOURCE_MAP_LABEL_POP:delete fe.labels[xe[_e+1]],_e+=2;break;default:throw new Error("Invalid opcode: "+xe[_e]+".")}},_e=0,qt=xe.length,Oe=[],Ot;function ur(kt,Ge,cr){var zt,pe,Er=Ge+3,St=xe[_e+Er-2],Ft=xe[_e+Er-1],Vn=_sliced_to_array(fe.checkedIf(_e,function(){return _e+=Er+St,(cr||gt)(xe.slice(_e-St,_e))},Ft>0?function(){return _e+=Ft,gt(xe.slice(_e-Ft,_e))}:null),2),Ir=Vn[0],Fn=Vn[1];Oe.push("if ("+kt+") {"),(zt=Oe).push.apply(zt,_to_consumable_array(Y(Ir))),Ft>0&&(Oe.push("} else {"),(pe=Oe).push.apply(pe,_to_consumable_array(Y(Fn)))),Oe.push("}")}function Kr(kt){switch(kt){case-1:return"peg$getUnicode()";case 1:return"input.charAt(peg$currPos)";default:return"input.substr(peg$currPos, ".concat(kt,")")}}function yt(kt,Ge){switch(kt){case-1:return"peg$currPos += ".concat(Ge,".length;");case 1:return"peg$currPos++;";default:return"peg$currPos += ("+kt+");"}}function qe(kt,Ge,cr){var zt=Ge+3,pe=Kr(cr),Er=null;xe[_e+zt]===u.ACCEPT_N&&xe[_e+zt+1]===cr&&(Oe.push(fe.push(pe)),pe=fe.pop(),Er=function(St){fe.sp++;var Ft=gt(St.slice(2));return Ft.unshift(yt(cr,pe)),Ft}),ur(kt(pe,Er!==null),Ge,Er)}function Re(kt){var Ge,cr=xe[_e+2-1],zt=fe.checkedLoop(_e,function(){return _e+=2+cr,gt(xe.slice(_e-cr,_e))});Oe.push("while ("+kt+") {"),(Ge=Oe).push.apply(Ge,_to_consumable_array(Y(zt))),Oe.push("}")}function or(kt){var Ge=xe[_e+kt-1];return ae(xe[_e+1])+"("+xe.slice(_e+kt,_e+kt+Ge).map(function(cr){return fe.index(cr)}).join(", ")+")"}for(;_e<qt;)ar();return Oe}var Te=gt(ke);return De.push(a("function ",Ie(ye.name),ye.nameLocation,`() {
`,ye.name)),$.trace&&De.push("  var startPos = peg$currPos;"),De.push(Y(fe.defines())),(Je=De).push.apply(Je,_to_consumable_array(Y(oe('"'+A(ye.name)+'"',c.indexOfRule(F,ye.name))))),(Ye=De).push.apply(Ye,_to_consumable_array(Y(Te))),(Xe=De).push.apply(Xe,_to_consumable_array(Y(be('"'+A(ye.name)+'"',fe.result())))),De.push("}"),De.push(""),De}function Pe(ye){return ye.codeLocation?s(ye.code,ye.codeLocation,"$"+ye.type):ye.code}function _t(){var ye=[],Je=F.topLevelInitializer;if(Je)if(Array.isArray(Je)){if($.format==="es"){var Ye=[],Xe=[],De=!0,ke=!1,fe=void 0;try{for(var gt=Je[Symbol.iterator](),Te;!(De=(Te=gt.next()).done);De=!0){var xe=Te.value,ar=_sliced_to_array(S(xe.code,{startRule:"ImportsAndSource",grammarSource:new m(xe.codeLocation.source,xe.codeLocation.start)}),2),_e=ar[0],qt=ar[1];_e.code?(Ye.push(_e),Xe.push(qt)):Xe.push(xe)}}catch(Ft){ke=!0,fe=Ft}finally{try{!De&&gt.return!=null&&gt.return()}finally{if(ke)throw fe}}Je=Xe.concat(Ye)}var Oe=Je.slice(0).reverse(),Ot=!0,ur=!1,Kr=void 0;try{for(var yt=Oe[Symbol.iterator](),qe;!(Ot=(qe=yt.next()).done);Ot=!0){var Re=qe.value;ye.push(Pe(Re)),ye.push("")}}catch(Ft){ur=!0,Kr=Ft}finally{try{!Ot&&yt.return!=null&&yt.return()}finally{if(ur)throw Kr}}}else ye.push(Pe(Je)),ye.push("");ye.push("class peg$SyntaxError extends SyntaxError {","  constructor(message, expected, found, location) {","    super(message);","    this.expected = expected;","    this.found = found;","    this.location = location;",'    this.name = "SyntaxError";',"  }","","  format(sources) {",'    let str = "Error: " + this.message;',"    if (this.location) {","      let src = null;","      const st = sources.find(s => s.source === this.location.source);","      if (st) {","        src = st.text.split(/\\r\\n|\\n|\\r/g);","      }","      const s = this.location.start;",'      const offset_s = (this.location.source && (typeof this.location.source.offset === "function"))',"        ? this.location.source.offset(s)","        : s;",'      const loc = this.location.source + ":" + offset_s.line + ":" + offset_s.column;',"      if (src) {","        const e = this.location.end;",'        const filler = "".padEnd(offset_s.line.toString().length, " ");',"        const line = src[s.line - 1];","        const last = s.line === e.line ? e.column : line.length + 1;","        const hatLen = (last - s.column) || 1;",'        str += "\\n --> " + loc + "\\n"','            + filler + " |\\n"','            + offset_s.line + " | " + line + "\\n"','            + filler + " | " + "".padEnd(s.column - 1, " ")','            + "".padEnd(hatLen, "^");',"      } else {",'        str += "\\n at " + loc;',"      }","    }","    return str;","  }","","  static buildMessage(expected, found) {","    function hex(ch) {","      return ch.codePointAt(0).toString(16).toUpperCase();","    }","",'    const nonPrintable = Object.prototype.hasOwnProperty.call(RegExp.prototype, "unicode")','      ? new RegExp("[\\\\p{C}\\\\p{Mn}\\\\p{Mc}]", "gu")',"      : null;","    function unicodeEscape(s) {","      if (nonPrintable) {",'        return s.replace(nonPrintable,  ch => "\\\\u{" + hex(ch) + "}");',"      }","      return s;","    }","","    function literalEscape(s) {","      return unicodeEscape(s",'        .replace(/\\\\/g, "\\\\\\\\")','        .replace(/"/g,  "\\\\\\"")','        .replace(/\\0/g, "\\\\0")','        .replace(/\\t/g, "\\\\t")','        .replace(/\\n/g, "\\\\n")','        .replace(/\\r/g, "\\\\r")','        .replace(/[\\x00-\\x0F]/g,          ch => "\\\\x0" + hex(ch))','        .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, ch => "\\\\x"  + hex(ch)));',"    }","","    function classEscape(s) {","      return unicodeEscape(s",'        .replace(/\\\\/g, "\\\\\\\\")','        .replace(/\\]/g, "\\\\]")','        .replace(/\\^/g, "\\\\^")','        .replace(/-/g,  "\\\\-")','        .replace(/\\0/g, "\\\\0")','        .replace(/\\t/g, "\\\\t")','        .replace(/\\n/g, "\\\\n")','        .replace(/\\r/g, "\\\\r")','        .replace(/[\\x00-\\x0F]/g,          ch => "\\\\x0" + hex(ch))','        .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, ch => "\\\\x"  + hex(ch)));',"    }","","    const DESCRIBE_EXPECTATION_FNS = {","      literal(expectation) {",'        return "\\"" + literalEscape(expectation.text) + "\\"";',"      },","","      class(expectation) {","        const escapedParts = expectation.parts.map(","          part => (Array.isArray(part)",'            ? classEscape(part[0]) + "-" + classEscape(part[1])',"            : classEscape(part))","        );","",'        return "[" + (expectation.inverted ? "^" : "") + escapedParts.join("") + "]" + (expectation.unicode ? "u" : "");',"      },","","      any() {",'        return "any character";',"      },","","      end() {",'        return "end of input";',"      },","","      other(expectation) {","        return expectation.description;","      },","    };","","    function describeExpectation(expectation) {","      return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);","    }","","    function describeExpected(expected) {","      const descriptions = expected.map(describeExpectation);","      descriptions.sort();","","      if (descriptions.length > 0) {","        let j = 1;","        for (let i = 1; i < descriptions.length; i++) {","          if (descriptions[i - 1] !== descriptions[i]) {","            descriptions[j] = descriptions[i];","            j++;","          }","        }","        descriptions.length = j;","      }","","      switch (descriptions.length) {","        case 1:","          return descriptions[0];","","        case 2:",'          return descriptions[0] + " or " + descriptions[1];',"","        default:",'          return descriptions.slice(0, -1).join(", ")','            + ", or "',"            + descriptions[descriptions.length - 1];","      }","    }","","    function describeFound(found) {",'      return found ? "\\"" + literalEscape(found) + "\\"" : "end of input";',"    }","",'    return "Expected " + describeExpected(expected) + " but " + describeFound(found) + " found.";',"  }","}",""),$.trace&&ye.push("class peg$DefaultTracer {","  constructor() {","    this.indentLevel = 0;","  }","","  trace(event) {","    const that = this;","","    function log(event) {","      console?.log?.(",'        event.location.start.line + ":" + event.location.start.column + "-"','          + event.location.end.line + ":" + event.location.end.column + " "','          + event.type.padEnd(10, " ")','          + "".padEnd((that.indentLevel * 2) + 1, " ") + event.rule',"       );","    }","","    switch (event.type) {",'      case "rule.enter":',"        log(event);","        this.indentLevel++;","        break;","",'      case "rule.match":',"        this.indentLevel--;","        log(event);","        break;","",'      case "rule.fail":',"        this.indentLevel--;","        log(event);","        break;","","      default:",'        throw new Error("Invalid event type: " + event.type + ".");',"    }","  }","}","");var or=`{
`+N.map(function(Ft){return"    ".concat(Ft,": ").concat(Ie(Ft),`,
`)}).join("")+"  }",kt=Ie(N[0]),Ge=!0,cr=!1,zt=void 0;if(ye.push("function peg$parse(input, options) {","  options = options !== undefined ? options : {};","","  const peg$FAILED = {};","  const peg$source = options.grammarSource;","","  const peg$startRuleFunctions = "+or+";","  let peg$startRuleFunction = "+kt+";","",J(),"","  let peg$currPos = options.peg$currPos | 0;","  let peg$savedPos = peg$currPos;","  const peg$posDetailsCache = [{ line: 1, column: 1 }];","  let peg$maxFailPos = peg$currPos;","  let peg$maxFailExpected = options.peg$maxFailExpected || [];","  let peg$silentFails = options.peg$silentFails | 0;",""),$.cache&&ye.push("  let peg$resultsCache = {};",""),$.trace&&ye.push('  let peg$tracer = "tracer" in options ? options.tracer : new peg$DefaultTracer();',""),ye.push("  let peg$result;","","  if (options.startRule) {","    if (!(options.startRule in peg$startRuleFunctions)) {",`      throw new Error("Can't start parsing from rule \\"" + options.startRule + "\\".");`,"    }","","    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];","  }","","  function text() {","    return input.substring(peg$savedPos, peg$currPos);","  }","","  function offset() {","    return peg$savedPos;","  }","","  function range() {","    return {","      source: peg$source,","      start: peg$savedPos,","      end: peg$currPos,","    };","  }","","  function location() {","    return peg$computeLocation(peg$savedPos, peg$currPos);","  }","","  function expected(description, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildStructuredError(","      [peg$otherExpectation(description)],","      input.substring(peg$savedPos, peg$currPos),","      location","    );","  }","","  function error(message, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildSimpleError(message, location);","  }","","  function peg$getUnicode(pos = peg$currPos) {","    const cp = input.codePointAt(pos);","    if (cp === undefined) {",'      return "";',"    }","    return String.fromCodePoint(cp);","  }","","  function peg$literalExpectation(text, ignoreCase) {",'    return { type: "literal", text, ignoreCase };',"  }","","  function peg$classExpectation(parts, inverted, ignoreCase, unicode) {",'    return { type: "class", parts, inverted, ignoreCase, unicode };',"  }","","  function peg$anyExpectation() {",'    return { type: "any" };',"  }","","  function peg$endExpectation() {",'    return { type: "end" };',"  }","","  function peg$otherExpectation(description) {",'    return { type: "other", description };',"  }","","  function peg$computePosDetails(pos) {","    let details = peg$posDetailsCache[pos];","    let p;","","    if (details) {","      return details;","    } else {","      if (pos >= peg$posDetailsCache.length) {","        p = peg$posDetailsCache.length - 1;","      } else {","        p = pos;","        while (!peg$posDetailsCache[--p]) {}","      }","","      details = peg$posDetailsCache[p];","      details = {","        line: details.line,","        column: details.column,","      };","","      while (p < pos) {","        if (input.charCodeAt(p) === 10) {","          details.line++;","          details.column = 1;","        } else {","          details.column++;","        }","","        p++;","      }","","      peg$posDetailsCache[pos] = details;","","      return details;","    }","  }","","  function peg$computeLocation(startPos, endPos, offset) {","    const startPosDetails = peg$computePosDetails(startPos);","    const endPosDetails = peg$computePosDetails(endPos);","","    const res = {","      source: peg$source,","      start: {","        offset: startPos,","        line: startPosDetails.line,","        column: startPosDetails.column,","      },","      end: {","        offset: endPos,","        line: endPosDetails.line,","        column: endPosDetails.column,","      },","    };",'    if (offset && peg$source && (typeof peg$source.offset === "function")) {',"      res.start = peg$source.offset(res.start);","      res.end = peg$source.offset(res.end);","    }","    return res;","  }","","  function peg$fail(expected) {","    if (peg$currPos < peg$maxFailPos) { return; }","","    if (peg$currPos > peg$maxFailPos) {","      peg$maxFailPos = peg$currPos;","      peg$maxFailExpected = [];","    }","","    peg$maxFailExpected.push(expected);","  }","","  function peg$buildSimpleError(message, location) {","    return new peg$SyntaxError(message, null, null, location);","  }","","  function peg$buildStructuredError(expected, found, location) {","    return new peg$SyntaxError(","      peg$SyntaxError.buildMessage(expected, found),","      expected,","      found,","      location","    );","  }",""),F.imports.length>0&&ye.push("  function peg$callLibrary(lib, startRule) {","    const opts = Object.assign({}, options, {","      startRule: startRule,","      peg$currPos: peg$currPos,","      peg$silentFails: peg$silentFails,","      peg$library: true,","      peg$maxFailExpected: peg$maxFailExpected","    });","    const res = lib.parse(input, opts);","    peg$currPos = res.peg$currPos;","    peg$maxFailPos = res.peg$maxFailPos;","    peg$maxFailExpected = res.peg$maxFailExpected;","    return (res.peg$result === res.peg$FAILED) ? peg$FAILED : res.peg$result;","  }",""),F.rules.forEach(function(Ft){var Vn;(Vn=ye).push.apply(Vn,_to_consumable_array(Y(Fe(Ft))))}),F.initializer)if(Array.isArray(F.initializer))try{for(var pe=F.initializer[Symbol.iterator](),Er;!(Ge=(Er=pe.next()).done);Ge=!0){var St=Er.value;ye.push(Pe(St)),ye.push("")}}catch(Ft){cr=!0,zt=Ft}finally{try{!Ge&&pe.return!=null&&pe.return()}finally{if(cr)throw zt}}else ye.push(Pe(F.initializer)),ye.push("");return ye.push("  peg$result = peg$startRuleFunction();","","  const peg$success = (peg$result !== peg$FAILED && peg$currPos === input.length);","  function peg$throw() {","    if (peg$result !== peg$FAILED && peg$currPos < input.length) {","      peg$fail(peg$endExpectation());","    }","","    throw peg$buildStructuredError(","      peg$maxFailExpected,","      peg$maxFailPos < input.length ? peg$getUnicode(peg$maxFailPos) : null,","      peg$maxFailPos < input.length","        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)","        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)","    );","  }","  if (options.peg$library) {","    return /** @type {any} */ ({","      peg$result,","      peg$currPos,","      peg$FAILED,","      peg$maxFailExpected,","      peg$maxFailPos,","      peg$success,","      peg$throw: peg$success ? undefined : peg$throw,","    });","  }","  if (peg$success) {","    return peg$result;","  } else {","    peg$throw();","  }","}"),new y(null,null,$.grammarSource,ye.map(function(Ft){return _instanceof(Ft,y)?Ft:Ft+`
`}))}function dt(ye){function Je(){return["// @generated by Peggy ".concat(f,"."),"//","// https://peggyjs.org/"]}function Ye(){var De=["{"];return $.trace&&De.push("  DefaultTracer: peg$DefaultTracer,"),$.allowedStartRules&&De.push("  StartRules: ["+$.allowedStartRules.map(function(ke){return'"'+ke+'"'}).join(", ")+"],"),De.push("  SyntaxError: peg$SyntaxError,","  parse: peg$parse,"),De.push("}"),De.join(`
`)}var Xe={bare:function(){if(Object.keys(x).length>0||F.imports.length>0)throw new Error("Dependencies not supported in format 'bare'.");return _to_consumable_array(Je()).concat(["(function() {",'  "use strict";',ye,Y("return "+Ye()+";"),"})()"])},commonjs:function(){var ke=Object.keys(x),fe=Je();fe.push("",'"use strict";'),ke.length>0&&(ke.forEach(function(xe){fe.push("const "+xe+' = require("'+A(x[xe])+'");')}),fe.push(""));for(var gt=F.imports.length,Te=0;Te<gt;Te++)fe.push("const "+He(Te)+' = require("'+A(F.imports[Te].from.module)+'");');return fe.push("",ye,"","module.exports = "+Ye()+";"),fe},es:function(){var ke=Object.keys(x),fe=Je();fe.push(""),ke.length>0&&(ke.forEach(function(Te){fe.push("import "+Te+' from "'+A(x[Te])+'";')}),fe.push(""));for(var gt=0;gt<F.imports.length;gt++)fe.push("import * as "+He(gt)+' from "'+A(F.imports[gt].from.module)+'";');return fe.push("",ye,""),fe.push("const peg$allowedStartRules = [","  "+($.allowedStartRules?$.allowedStartRules.map(function(Te){return'"'+Te+'"'}).join(`,
  `):""),"];",""),fe.push("export {"),$.trace&&fe.push("  peg$DefaultTracer as DefaultTracer,"),fe.push("  peg$allowedStartRules as StartRules,","  peg$SyntaxError as SyntaxError,","  peg$parse as parse","};"),fe},amd:function(){if(F.imports.length>0)throw new Error("Imports are not supported in format 'amd'.");var ke=Object.keys(x),fe="["+ke.map(function(Te){return x[Te]}).map(function(Te){return'"'+A(Te)+'"'}).join(", ")+"]",gt=ke.join(", ");return _to_consumable_array(Je()).concat(["define("+fe+", function("+gt+") {",'  "use strict";',ye,"",Y("return "+Ye()+";"),"});"])},globals:function(){if(Object.keys(x).length>0||F.imports.length>0)throw new Error("Dependencies not supported in format 'globals'.");if(!$.exportVar)throw new Error("No export variable defined for format 'globals'.");return _to_consumable_array(Je()).concat(["(function(root) {",'  "use strict";',ye,"",Y("root."+$.exportVar+" = "+Ye()+";"),"})(this);"])},umd:function(){if(F.imports.length>0)throw new Error("Imports are not supported in format 'umd'.");var ke=Object.keys(x),fe=ke.map(function(_e){return x[_e]}),gt="["+fe.map(function(_e){return'"'+A(_e)+'"'}).join(", ")+"]",Te=fe.map(function(_e){return'require("'+A(_e)+'")'}).join(", "),xe=ke.join(", "),ar=Je();return ar.push("(function(root, factory) {",'  if (typeof define === "function" && define.amd) {',"    define("+gt+", factory);",'  } else if (typeof module === "object" && module.exports) {',"    module.exports = factory("+Te+");"),$.exportVar&&ar.push("  } else {","    root."+$.exportVar+" = factory();"),ar.push("  }","})(this, function("+xe+") {",'  "use strict";',ye,"",Y("return "+Ye()+";"),"});"),ar}}[$.format||"bare"]();return new y(null,null,$.grammarSource,Xe.map(function(De){return _instanceof(De,y)?De:De+`
`}))}F.code=dt(_t())},c=he(),u=Ht(),h=Rr(),d=es(),f=d.version,b=Qe(),A=b.stringEscape,g=b.regexpClassEscape,v=Kt(),y=v.SourceNode,m=Ve(),D=ts(),S=D.parse;r.exports=o}),kr=U(function(t,r){"use strict";var s=function(c,u,h){function d(b){return b.type==="rule"&&b.expression.type==="rule_ref"}function f(b,A,g){o.build({rule_ref:function(v){v.name===A&&(v.name=g,h.info('Proxy rule "'.concat(A,'" replaced by the rule "').concat(g,'"'),v.location,[{message:"This rule will be used",location:a.findRule(b,g).nameLocation}]))}})(b)}c.rules.forEach(function(b){d(b)&&f(c,b.name,b.expression.name)})},a=he(),o=K();r.exports=s}),jr=U(function(t,r){"use strict";var s=function(m,D){var S=m,F=D;Object.keys(S).forEach(function($){return delete S[$]}),Object.keys(F).forEach(function($){S[$]=F[$]})},a=function(m){m.sort(function(H,P){var R=_sliced_to_array(Array.isArray(H)?H:[H,H],2),N=R[0],x=R[1],V=_sliced_to_array(Array.isArray(P)?P:[P,P],2),Y=V[0],G=V[1];return N!==Y?N<Y?-1:1:x!==G?x>G?-1:1:0});for(var D="",S="",F=0;F<m.length;F++){var $=m[F],k=_sliced_to_array(Array.isArray($)?$:[$,$],2),O=k[0],z=k[1];if(typeof O=="string"&&typeof z=="string"&&typeof D=="string"&&typeof S=="string"){if(z<=S){m.splice(F--,1);continue}if(S.charCodeAt(0)+1>=O.charCodeAt(0)){m.splice(F--,1),m[F]=[D,S=z];continue}}D=O,S=z}return m},o=function(m,D){d.build({class:function(S){var F;if(S.unicode){var $=[],k=!0,O=!1,z=void 0;try{for(var H=S.parts[Symbol.iterator](),P;!(k=(P=H.next()).done);k=!0){var R=P.value;if(Array.isArray(R)){var N=_sliced_to_array(R.map(function(Y){return Y.codePointAt(0)}),2),x=N[0],V=N[1];x<g&&V>v&&(D.info("Removing surrogate range from [".concat(h(R[0]),"-").concat(h(R[1]),"]"),S.location),$.push([y,R[1]]),R[1]=A)}}}catch(Y){O=!0,z=Y}finally{try{!k&&H.return!=null&&H.return()}finally{if(O)throw z}}(F=S.parts).push.apply(F,_to_consumable_array($))}}})(m)},c=function(m,D,S){var F=Object.create(null);m.rules.forEach(function(H){return F[H.name]=H.expression});var $=new Set;o(m,S);var k=[function(H){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;switch(H.type){case"class":if(H.inverted)break;return P?_object_spread_props(_object_spread({},H),{parts:_to_consumable_array(H.parts)}):H;case"literal":{var R=b(H.value);if(R<0)break;return{type:"class",parts:[H.value],inverted:!1,ignoreCase:H.ignoreCase,location:H.location,unicode:R>65535}}case"rule_ref":{var N=F[H.name];if(!N)break;$.has(H.name)||($.add(H.name),z(N));var x=O(N,!0);return x&&(x.location=H.location),x}}return null},d.build({choice:function(H){var P=null,R=!1;H.alternatives.forEach(function(N,x){var V;z(N);var Y=O(N);if(!Y){P=null;return}P&&P.ignoreCase===Y.ignoreCase?((V=P.parts).push.apply(V,_to_consumable_array(Y.parts)),H.alternatives[x-1]=P,H.alternatives[x]=P,P.unicode=P.unicode||Y.unicode,P.location={source:P.location.source,start:P.location.start,end:Y.location.end},R=!0):P=Y}),R&&(H.alternatives=H.alternatives.filter(function(N,x,V){return!x||N!==V[x-1]}),H.alternatives.forEach(function(N,x){N.type==="class"&&(N.parts=a(N.parts),N.parts.length===1&&!Array.isArray(N.parts[0])&&typeof N.parts[0]=="string"&&!N.inverted&&(H.alternatives[x]={type:"literal",value:N.parts[0],ignoreCase:N.ignoreCase,location:N.location}))}),H.alternatives.length===1&&s(H,H.alternatives[0]))},text:function(H){if(z(H.expression),H.expression.type==="class"||H.expression.type==="literal"){var P=H.location;s(H,H.expression),H.location=P}}})],O=k[0],z=k[1];m.rules.forEach(function(H){$.add(H.name),z(H.expression)})},u=Qe(),h=u.stringEscape,d=K(),f=Qe(),b=f.codePointLen1,A=String.fromCodePoint(55295),g=55296,v=57343,y=String.fromCodePoint(57344);r.exports=c}),Br=U(function(t,r){"use strict";var s=function(o,c,u){var h=Object.create(null);o.rules.forEach(function(g){h[g.name]=g});for(var d=_to_consumable_array(c.allowedStartRules),f=new Set,b=a.build({rule_ref:function(g){d.push(g.name)}});d.length;){var A=d.shift();f.has(A)||(f.add(A),b(h[A]))}o.rules=o.rules.filter(function(g){return f.has(g.name)?!0:(u.info('Removing unused rule: "'.concat(g.name,'"'),g.location),!1)})},a=K();r.exports=s}),Gr=U(function(t,r){"use strict";var s=function(a,o,c){var u={},h=!0,d=!1,f=void 0,b=!0,A=!1,g=void 0;try{for(var v=a.imports[Symbol.iterator](),y;!(b=(y=v.next()).done);b=!0){var m=y.value;try{for(var D=m.what[Symbol.iterator](),S;!(h=(S=D.next()).done);h=!0){var F=S.value;F.type==="import_binding_all"&&(Object.prototype.hasOwnProperty.call(u,F.binding)&&c.error('Module "'.concat(F.binding,'" is already imported'),F.location,[{message:"Original module location",location:u[F.binding]}]),u[F.binding]=F.location)}}catch($){d=!0,f=$}finally{try{!h&&D.return!=null&&D.return()}finally{if(d)throw f}}}}catch($){A=!0,g=$}finally{try{!b&&v.return!=null&&v.return()}finally{if(A)throw g}}};r.exports=s}),Yr=U(function(t,r){"use strict";var s=function(o,c,u){function h(b){var A={};return Object.keys(b).forEach(function(g){A[g]=b[g]}),A}function d(b,A){f(b.expression,h(A))}var f=a.build({rule:function(b){f(b.expression,{})},choice:function(b,A){b.alternatives.forEach(function(g){f(g,h(A))})},action:d,labeled:function(b,A){var g=b.label;g&&Object.prototype.hasOwnProperty.call(A,g)&&u.error('Label "'.concat(b.label,'" is already defined'),b.labelLocation,[{message:"Original label location",location:A[g]}]),f(b.expression,A),A[b.label]=b.labelLocation},text:d,simple_and:d,simple_not:d,optional:d,zero_or_more:d,one_or_more:d,repeated:function(b,A){b.delimiter&&f(b.delimiter,h(A)),f(b.expression,h(A))},group:d});f(o)},a=K();r.exports=s}),Jr=U(function(t,r){"use strict";var s=function(o,c,u){var h={};a.build({rule:function(d){if(Object.prototype.hasOwnProperty.call(h,d.name)){u.error('Rule "'.concat(d.name,'" is already defined'),d.nameLocation,[{message:"Original rule location",location:h[d.name]}]);return}h[d.name]=d.nameLocation}})(o)},a=K();r.exports=s}),Qr=U(function(t,r){"use strict";var s=function(c,u,h){var d=[],f=[],b=new Set,A=o.build({rule:function(g){h.errors>0||b.has(g.name)||(b.add(g.name),d.push(g.name),A(g.expression),d.pop())},sequence:function(g){h.errors>0||g.elements.every(function(v){return A(v),h.errors>0?!1:!a.alwaysConsumesOnSuccess(c,v)})},repeated:function(g){h.errors>0||(A(g.expression),g.delimiter&&!a.alwaysConsumesOnSuccess(c,g.expression)&&A(g.delimiter))},rule_ref:function(g){if(!(h.errors>0)){f.push(g);var v=a.findRule(c,g.name);if(d.indexOf(g.name)!==-1){d.push(g.name),h.error("Possible infinite loop when parsing (left recursion: "+d.join(" -> ")+")",v.nameLocation,f.map(function(y,m,D){return{message:m+1!==D.length?"Step ".concat(m+1,': call of the rule "').concat(y.name,'" without input consumption'):"Step ".concat(m+1,": calls itself without input consumption - left recursion"),location:y.location}}));return}v&&A(v),f.pop()}}});A(c)},a=he(),o=K();r.exports=s}),Zr=U(function(t,r){"use strict";var s=function(c,u,h){var d=o.build({zero_or_more:function(f){a.alwaysConsumesOnSuccess(c,f.expression)||h.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",f.location)},one_or_more:function(f){a.alwaysConsumesOnSuccess(c,f.expression)||h.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",f.location)},repeated:function(f){if(f.delimiter&&d(f.delimiter),!(a.alwaysConsumesOnSuccess(c,f.expression)||f.delimiter&&a.alwaysConsumesOnSuccess(c,f.delimiter)))if(f.max.value===null)h.error("Possible infinite loop when parsing (unbounded range repetition used with an expression that may not consume any input)",f.location);else{var b=f.min?f.min:f.max;h.warning(b.type==="constant"&&f.max.type==="constant"?"An expression may not consume any input and may always match ".concat(f.max.value," times"):"An expression may not consume any input and may always match with a maximum repetition count",f.location)}}});d(c)},a=he(),o=K();r.exports=s}),tn=U(function(t,r){"use strict";var s=function(c,u,h){o.build({rule_ref:function(d){a.findRule(c,d.name)||h.error('Rule "'.concat(d.name,'" is not defined'),d.location)}})(c)},a=he(),o=K();r.exports=s}),rn=U(function(t,r){"use strict";var s=function(o,c,u){var h=a.build({action:function(d){h(d.expression,d)},labeled:function(d,f){d.pick&&f&&u.error('"@" cannot be used with an action block',d.labelLocation,[{message:"Action block location",location:f.codeLocation}]),h(d.expression)}});h(o)},a=K();r.exports=s}),cn=U(function(t,r){"use strict";var s=function(h,d,f){var b=a.build({choice:function(A){A.alternatives.forEach(function(y){return b(y)});for(var g=0;g<A.alternatives.length-1;g++){var v=A.alternatives[g];v.match===c&&f.warning("Always matches.  Following alternatives may not be reachable.",v.location)}},simple_and:function(A){b(A.expression),A.expression.match===c?f.warning("Always matches, making the & predicate redundant.",A.expression.location):A.expression.match===u&&f.warning("Never matches, making the & predicate always fail.",A.expression.location)},simple_not:function(A){b(A.expression),A.expression.match===c?f.warning("Always matches, making the ! predicate always fail.",A.expression.location):A.expression.match===u&&f.warning("Never matches, making the ! predicate redundant.",A.expression.location)}});b(h)},a=K(),o=ht(),c=o.ALWAYS_MATCH,u=o.NEVER_MATCH;r.exports=s}),an=U(function(t,r){"use strict";var s=ft(),a=(function(){function c(u){_class_call_check(this,c),u=(typeof u>"u"?"undefined":_type_of(u))<"u"?u:{},typeof u.error=="function"&&(this.error=u.error),typeof u.warning=="function"&&(this.warning=u.warning),typeof u.info=="function"&&(this.info=u.info)}return _create_class(c,[{key:"error",value:function(){}},{key:"warning",value:function(){}},{key:"info",value:function(){}}]),c})(),o=(function(){function c(u){_class_call_check(this,c),this._callbacks=new a(u),this._firstError=null,this.errors=0,this.problems=[],this.stage=null}return _create_class(c,[{key:"error",value:function(){for(var h=arguments.length,d=new Array(h),f=0;f<h;f++)d[f]=arguments[f];var b;++this.errors,this._firstError===null&&(this._firstError=_construct(s,_to_consumable_array(d)),this._firstError.stage=this.stage,this._firstError.problems=this.problems),this.problems.push(["error"].concat(_to_consumable_array(d))),(b=this._callbacks).error.apply(b,[this.stage].concat(_to_consumable_array(d)))}},{key:"warning",value:function(){for(var h=arguments.length,d=new Array(h),f=0;f<h;f++)d[f]=arguments[f];var b;this.problems.push(["warning"].concat(_to_consumable_array(d))),(b=this._callbacks).warning.apply(b,[this.stage].concat(_to_consumable_array(d)))}},{key:"info",value:function(){for(var h=arguments.length,d=new Array(h),f=0;f<h;f++)d[f]=arguments[f];var b;this.problems.push(["info"].concat(_to_consumable_array(d))),(b=this._callbacks).info.apply(b,[this.stage].concat(_to_consumable_array(d)))}},{key:"checkErrors",value:function(){if(this.errors!==0)throw this._firstError}}]),c})();r.exports=o}),un=U(function(exports,module){"use strict";var processOptions=function(t,r){var s={};return Object.keys(t).forEach(function(a){s[a]=t[a]}),Object.keys(r).forEach(function(a){Object.prototype.hasOwnProperty.call(s,a)||(s[a]=r[a])}),s},isSourceMapCapable=function(t){return typeof t=="string"?t.length>0:t&&typeof t.offset=="function"},addImportedRules=Xs(),fixLibraryNumbers=Ks(),generateBytecode=ir(),generateJS=Nr(),inferenceMatchResult=ht(),removeProxyRules=kr(),mergeCharacterClasses=jr(),removeUnusedRules=Br(),reportDuplicateImports=Gr(),reportDuplicateLabels=Yr(),reportDuplicateRules=Jr(),reportInfiniteRecursion=Qr(),reportInfiniteRepetition=Zr(),reportUndefinedRules=tn(),reportIncorrectPlucking=rn(),reportUnreachable=cn(),Session=an(),visitor=K(),base64=Qe().base64,compiler={visitor,passes:{prepare:[addImportedRules,reportInfiniteRecursion],check:[reportUndefinedRules,reportDuplicateRules,reportDuplicateLabels,reportInfiniteRepetition,reportIncorrectPlucking,reportDuplicateImports],transform:[fixLibraryNumbers,removeProxyRules,mergeCharacterClasses,removeUnusedRules,inferenceMatchResult],semantic:[reportUnreachable],generate:[generateBytecode,generateJS]},compile:function compile(ast,passes,options){options=options!==void 0?options:{};var defaultStartRules=[ast.rules[0].name];if(options=processOptions(options,{allowedStartRules:defaultStartRules,cache:!1,dependencies:{},exportVar:null,format:"bare",output:"parser",trace:!1}),(options.allowedStartRules===null||options.allowedStartRules===void 0)&&(options.allowedStartRules=defaultStartRules),!Array.isArray(options.allowedStartRules))throw new Error("allowedStartRules must be an array");options.allowedStartRules.length===0&&(options.allowedStartRules=defaultStartRules);var allRules=ast.rules.map(function(t){return t.name}),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;if(options.allowedStartRules.some(function(t){return t==="*"}))options.allowedStartRules=allRules;else try{for(var _iterator=options.allowedStartRules[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var i=_step.value;if(allRules.indexOf(i)===-1)throw new Error('Unknown start rule "'.concat(i,'"'))}}catch(t){_didIteratorError=!0,_iteratorError=t}finally{try{!_iteratorNormalCompletion&&_iterator.return!=null&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}if((options.output==="source-and-map"||options.output==="source-with-inline-map")&&!isSourceMapCapable(options.grammarSource))throw new Error("Must provide grammarSource (as a string or GrammarLocation) in order to generate source maps");var session=new Session(options);switch(Object.keys(passes).forEach(function(t){session.stage=t,session.info("Process stage ".concat(t)),passes[t].forEach(function(r){session.info("Process pass ".concat(t,".").concat(r.name)),r(ast,options,session)}),session.checkErrors()}),options.output){case"parser":return eval(ast.code.toString());case"source":return ast.code.toString();case"source-and-map":return ast.code;case"source-with-inline-map":{if((typeof TextEncoder>"u"?"undefined":_type_of(TextEncoder))>"u")throw new Error("TextEncoder is not supported by this platform");var i=ast.code.toStringWithSourceMap(),n=new TextEncoder,e=base64(n.encode(JSON.stringify(i.map.toJSON())));return i.code+"//# sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(e,`
`)}case"ast":return ast;default:throw new Error("Invalid output format: "+options.output+".")}}};module.exports=compiler}),Jl=ft(),Xl=Ve(),Ql=he(),Kl=un(),Zl=ts(),_es=es(),ea=_es.version,ta=["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","null","true","false","enum","implements","interface","let","package","private","protected","public","static","yield","await","arguments","eval"],Ke={VERSION:ea,RESERVED_WORDS:ta,GrammarError:Jl,GrammarLocation:Xl,parser:Zl,compiler:Kl,generate:function t(t,r){r=r!==void 0?r:{};function s(u){var h={};return Object.keys(u).forEach(function(d){h[d]=u[d].slice()}),h}var a="plugins"in r?r.plugins:[],o={parser:Ke.parser,passes:s(Ke.compiler.passes),reservedWords:Ke.RESERVED_WORDS.slice()};a.forEach(function(u){u.use(o,r)}),Array.isArray(t)||(t=[{source:r.grammarSource,text:t}]);var c=Ql.combine(t.map(function(u){var h=u.source,d=u.text;return o.parser.parse(d,{grammarSource:h,reservedWords:o.reservedWords})}));return Ke.compiler.compile(c,o.passes,r)}};return module.exports=Ke,__exports!=exports&&(module.exports=exports),module.exports})});var xp=ot(($p,kp)=>{(function(t,r){typeof $p=="object"&&typeof kp<"u"?kp.exports=r():typeof define=="function"&&define.amd?define(r):t.JSON5=r()})($p,(function(){"use strict";function t(re,ve){return ve={exports:{}},re(ve,ve.exports),ve.exports}var r=t(function(re){var ve=re.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=ve)}),s=t(function(re){var ve=re.exports={version:"2.6.5"};typeof __e=="number"&&(__e=ve)}),a=s.version,o=function(re){return typeof re=="object"?re!==null:typeof re=="function"},c=function(re){if(!o(re))throw TypeError(re+" is not an object!");return re},u=function(re){try{return!!re()}catch{return!0}},h=!u(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),d=r.document,f=o(d)&&o(d.createElement),b=function(re){return f?d.createElement(re):{}},A=!h&&!u(function(){return Object.defineProperty(b("div"),"a",{get:function(){return 7}}).a!=7}),g=function(re,ve){if(!o(re))return re;var ze,Ue;if(ve&&typeof(ze=re.toString)=="function"&&!o(Ue=ze.call(re))||typeof(ze=re.valueOf)=="function"&&!o(Ue=ze.call(re))||!ve&&typeof(ze=re.toString)=="function"&&!o(Ue=ze.call(re)))return Ue;throw TypeError("Can't convert object to primitive value")},v=Object.defineProperty,y=h?Object.defineProperty:function(ve,ze,Ue){if(c(ve),ze=g(ze,!0),c(Ue),A)try{return v(ve,ze,Ue)}catch{}if("get"in Ue||"set"in Ue)throw TypeError("Accessors not supported!");return"value"in Ue&&(ve[ze]=Ue.value),ve},m={f:y},D=function(re,ve){return{enumerable:!(re&1),configurable:!(re&2),writable:!(re&4),value:ve}},S=h?function(re,ve,ze){return m.f(re,ve,D(1,ze))}:function(re,ve,ze){return re[ve]=ze,re},F={}.hasOwnProperty,$=function(re,ve){return F.call(re,ve)},k=0,O=Math.random(),z=function(re){return"Symbol(".concat(re===void 0?"":re,")_",(++k+O).toString(36))},H=!1,P=t(function(re){var ve="__core-js_shared__",ze=r[ve]||(r[ve]={});(re.exports=function(Ue,et){return ze[Ue]||(ze[Ue]=et!==void 0?et:{})})("versions",[]).push({version:s.version,mode:H?"pure":"global",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})}),R=P("native-function-to-string",Function.toString),N=t(function(re){var ve=z("src"),ze="toString",Ue=(""+R).split(ze);s.inspectSource=function(et){return R.call(et)},(re.exports=function(et,wt,Et,Or){var fr=typeof Et=="function";fr&&($(Et,"name")||S(Et,"name",wt)),et[wt]!==Et&&(fr&&($(Et,ve)||S(Et,ve,et[wt]?""+et[wt]:Ue.join(String(wt)))),et===r?et[wt]=Et:Or?et[wt]?et[wt]=Et:S(et,wt,Et):(delete et[wt],S(et,wt,Et)))})(Function.prototype,ze,function(){return typeof this=="function"&&this[ve]||R.call(this)})}),x=function(re){if(typeof re!="function")throw TypeError(re+" is not a function!");return re},V=function(re,ve,ze){if(x(re),ve===void 0)return re;switch(ze){case 1:return function(Ue){return re.call(ve,Ue)};case 2:return function(Ue,et){return re.call(ve,Ue,et)};case 3:return function(Ue,et,wt){return re.call(ve,Ue,et,wt)}}return function(){return re.apply(ve,arguments)}},Y="prototype",G=function(re,ve,ze){var Ue=re&G.F,et=re&G.G,wt=re&G.S,Et=re&G.P,Or=re&G.B,fr=et?r:wt?r[ve]||(r[ve]={}):(r[ve]||{})[Y],wi=et?s:s[ve]||(s[ve]={}),Ci=wi[Y]||(wi[Y]={}),mn,Cn,Lr,Ii;et&&(ze=ve);for(mn in ze)Cn=!Ue&&fr&&fr[mn]!==void 0,Lr=(Cn?fr:ze)[mn],Ii=Or&&Cn?V(Lr,r):Et&&typeof Lr=="function"?V(Function.call,Lr):Lr,fr&&N(fr,mn,Lr,re&G.U),wi[mn]!=Lr&&S(wi,mn,Ii),Et&&Ci[mn]!=Lr&&(Ci[mn]=Lr)};r.core=s,G.F=1,G.G=2,G.S=4,G.P=8,G.B=16,G.W=32,G.U=64,G.R=128;var W=G,Z=Math.ceil,ae=Math.floor,He=function(re){return isNaN(re=+re)?0:(re>0?ae:Z)(re)},Ie=function(re){if(re==null)throw TypeError("Can't call method on  "+re);return re},J=function(re){return function(ve,ze){var Ue=String(Ie(ve)),et=He(ze),wt=Ue.length,Et,Or;return et<0||et>=wt?re?"":void 0:(Et=Ue.charCodeAt(et),Et<55296||Et>56319||et+1===wt||(Or=Ue.charCodeAt(et+1))<56320||Or>57343?re?Ue.charAt(et):Et:re?Ue.slice(et,et+2):(Et-55296<<10)+(Or-56320)+65536)}},oe=J(!1);W(W.P,"String",{codePointAt:function(ve){return oe(this,ve)}});var be=s.String.codePointAt,Fe=Math.max,Pe=Math.min,_t=function(re,ve){return re=He(re),re<0?Fe(re+ve,0):Pe(re,ve)},dt=String.fromCharCode,ye=String.fromCodePoint;W(W.S+W.F*(!!ye&&ye.length!=1),"String",{fromCodePoint:function(ve){for(var ze=arguments,Ue=[],et=arguments.length,wt=0,Et;et>wt;){if(Et=+ze[wt++],_t(Et,1114111)!==Et)throw RangeError(Et+" is not a valid code point");Ue.push(Et<65536?dt(Et):dt(((Et-=65536)>>10)+55296,Et%1024+56320))}return Ue.join("")}});var Je=s.String.fromCodePoint,Ye=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,Xe=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,De=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,ke={Space_Separator:Ye,ID_Start:Xe,ID_Continue:De},fe={isSpaceSeparator:function(ve){return typeof ve=="string"&&ke.Space_Separator.test(ve)},isIdStartChar:function(ve){return typeof ve=="string"&&(ve>="a"&&ve<="z"||ve>="A"&&ve<="Z"||ve==="$"||ve==="_"||ke.ID_Start.test(ve))},isIdContinueChar:function(ve){return typeof ve=="string"&&(ve>="a"&&ve<="z"||ve>="A"&&ve<="Z"||ve>="0"&&ve<="9"||ve==="$"||ve==="_"||ve==="\u200C"||ve==="\u200D"||ke.ID_Continue.test(ve))},isDigit:function(ve){return typeof ve=="string"&&/[0-9]/.test(ve)},isHexDigit:function(ve){return typeof ve=="string"&&/[0-9A-Fa-f]/.test(ve)}},gt,Te,xe,ar,_e,qt,Oe,Ot,ur,Kr=function(ve,ze){gt=String(ve),Te="start",xe=[],ar=0,_e=1,qt=0,Oe=void 0,Ot=void 0,ur=void 0;do Oe=cr(),Ds[Te]();while(Oe.type!=="eof");return typeof ze=="function"?yt({"":ur},"",ze):ur};function yt(re,ve,ze){var Ue=re[ve];if(Ue!=null&&typeof Ue=="object")if(Array.isArray(Ue))for(var et=0;et<Ue.length;et++){var wt=String(et),Et=yt(Ue,wt,ze);Et===void 0?delete Ue[wt]:Object.defineProperty(Ue,wt,{value:Et,writable:!0,enumerable:!0,configurable:!0})}else for(var Or in Ue){var fr=yt(Ue,Or,ze);fr===void 0?delete Ue[Or]:Object.defineProperty(Ue,Or,{value:fr,writable:!0,enumerable:!0,configurable:!0})}return ze.call(re,ve,Ue)}var qe,Re,or,kt,Ge;function cr(){for(qe="default",Re="",or=!1,kt=1;;){Ge=zt();var re=Er[qe]();if(re)return re}}function zt(){if(gt[ar])return String.fromCodePoint(gt.codePointAt(ar))}function pe(){var re=zt();return re===`
`?(_e++,qt=0):re?qt+=re.length:qt++,re&&(ar+=re.length),re}var Er={default:function(){switch(Ge){case"	":case"\v":case"\f":case" ":case"\xA0":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":pe();return;case"/":pe(),qe="comment";return;case void 0:return pe(),St("eof")}if(fe.isSpaceSeparator(Ge)){pe();return}return Er[Te]()},comment:function(){switch(Ge){case"*":pe(),qe="multiLineComment";return;case"/":pe(),qe="singleLineComment";return}throw jt(pe())},multiLineComment:function(){switch(Ge){case"*":pe(),qe="multiLineCommentAsterisk";return;case void 0:throw jt(pe())}pe()},multiLineCommentAsterisk:function(){switch(Ge){case"*":pe();return;case"/":pe(),qe="default";return;case void 0:throw jt(pe())}pe(),qe="multiLineComment"},singleLineComment:function(){switch(Ge){case`
`:case"\r":case"\u2028":case"\u2029":pe(),qe="default";return;case void 0:return pe(),St("eof")}pe()},value:function(){switch(Ge){case"{":case"[":return St("punctuator",pe());case"n":return pe(),Ft("ull"),St("null",null);case"t":return pe(),Ft("rue"),St("boolean",!0);case"f":return pe(),Ft("alse"),St("boolean",!1);case"-":case"+":pe()==="-"&&(kt=-1),qe="sign";return;case".":Re=pe(),qe="decimalPointLeading";return;case"0":Re=pe(),qe="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":Re=pe(),qe="decimalInteger";return;case"I":return pe(),Ft("nfinity"),St("numeric",1/0);case"N":return pe(),Ft("aN"),St("numeric",NaN);case'"':case"'":or=pe()==='"',Re="",qe="string";return}throw jt(pe())},identifierNameStartEscape:function(){if(Ge!=="u")throw jt(pe());pe();var ve=Fn();switch(ve){case"$":case"_":break;default:if(!fe.isIdStartChar(ve))throw Ys();break}Re+=ve,qe="identifierName"},identifierName:function(){switch(Ge){case"$":case"_":case"\u200C":case"\u200D":Re+=pe();return;case"\\":pe(),qe="identifierNameEscape";return}if(fe.isIdContinueChar(Ge)){Re+=pe();return}return St("identifier",Re)},identifierNameEscape:function(){if(Ge!=="u")throw jt(pe());pe();var ve=Fn();switch(ve){case"$":case"_":case"\u200C":case"\u200D":break;default:if(!fe.isIdContinueChar(ve))throw Ys();break}Re+=ve,qe="identifierName"},sign:function(){switch(Ge){case".":Re=pe(),qe="decimalPointLeading";return;case"0":Re=pe(),qe="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":Re=pe(),qe="decimalInteger";return;case"I":return pe(),Ft("nfinity"),St("numeric",kt*(1/0));case"N":return pe(),Ft("aN"),St("numeric",NaN)}throw jt(pe())},zero:function(){switch(Ge){case".":Re+=pe(),qe="decimalPoint";return;case"e":case"E":Re+=pe(),qe="decimalExponent";return;case"x":case"X":Re+=pe(),qe="hexadecimal";return}return St("numeric",kt*0)},decimalInteger:function(){switch(Ge){case".":Re+=pe(),qe="decimalPoint";return;case"e":case"E":Re+=pe(),qe="decimalExponent";return}if(fe.isDigit(Ge)){Re+=pe();return}return St("numeric",kt*Number(Re))},decimalPointLeading:function(){if(fe.isDigit(Ge)){Re+=pe(),qe="decimalFraction";return}throw jt(pe())},decimalPoint:function(){switch(Ge){case"e":case"E":Re+=pe(),qe="decimalExponent";return}if(fe.isDigit(Ge)){Re+=pe(),qe="decimalFraction";return}return St("numeric",kt*Number(Re))},decimalFraction:function(){switch(Ge){case"e":case"E":Re+=pe(),qe="decimalExponent";return}if(fe.isDigit(Ge)){Re+=pe();return}return St("numeric",kt*Number(Re))},decimalExponent:function(){switch(Ge){case"+":case"-":Re+=pe(),qe="decimalExponentSign";return}if(fe.isDigit(Ge)){Re+=pe(),qe="decimalExponentInteger";return}throw jt(pe())},decimalExponentSign:function(){if(fe.isDigit(Ge)){Re+=pe(),qe="decimalExponentInteger";return}throw jt(pe())},decimalExponentInteger:function(){if(fe.isDigit(Ge)){Re+=pe();return}return St("numeric",kt*Number(Re))},hexadecimal:function(){if(fe.isHexDigit(Ge)){Re+=pe(),qe="hexadecimalInteger";return}throw jt(pe())},hexadecimalInteger:function(){if(fe.isHexDigit(Ge)){Re+=pe();return}return St("numeric",kt*Number(Re))},string:function(){switch(Ge){case"\\":pe(),Re+=Vn();return;case'"':if(or)return pe(),St("string",Re);Re+=pe();return;case"'":if(!or)return pe(),St("string",Re);Re+=pe();return;case`
`:case"\r":throw jt(pe());case"\u2028":case"\u2029":Kn(Ge);break;case void 0:throw jt(pe())}Re+=pe()},start:function(){switch(Ge){case"{":case"[":return St("punctuator",pe())}qe="value"},beforePropertyName:function(){switch(Ge){case"$":case"_":Re=pe(),qe="identifierName";return;case"\\":pe(),qe="identifierNameStartEscape";return;case"}":return St("punctuator",pe());case'"':case"'":or=pe()==='"',qe="string";return}if(fe.isIdStartChar(Ge)){Re+=pe(),qe="identifierName";return}throw jt(pe())},afterPropertyName:function(){if(Ge===":")return St("punctuator",pe());throw jt(pe())},beforePropertyValue:function(){qe="value"},afterPropertyValue:function(){switch(Ge){case",":case"}":return St("punctuator",pe())}throw jt(pe())},beforeArrayValue:function(){if(Ge==="]")return St("punctuator",pe());qe="value"},afterArrayValue:function(){switch(Ge){case",":case"]":return St("punctuator",pe())}throw jt(pe())},end:function(){throw jt(pe())}};function St(re,ve){return{type:re,value:ve,line:_e,column:qt}}function Ft(re){for(var ve=0,ze=re;ve<ze.length;ve+=1){var Ue=ze[ve],et=zt();if(et!==Ue)throw jt(pe());pe()}}function Vn(){var re=zt();switch(re){case"b":return pe(),"\b";case"f":return pe(),"\f";case"n":return pe(),`
`;case"r":return pe(),"\r";case"t":return pe(),"	";case"v":return pe(),"\v";case"0":if(pe(),fe.isDigit(zt()))throw jt(pe());return"\0";case"x":return pe(),Ir();case"u":return pe(),Fn();case`
`:case"\u2028":case"\u2029":return pe(),"";case"\r":return pe(),zt()===`
`&&pe(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw jt(pe());case void 0:throw jt(pe())}return pe()}function Ir(){var re="",ve=zt();if(!fe.isHexDigit(ve)||(re+=pe(),ve=zt(),!fe.isHexDigit(ve)))throw jt(pe());return re+=pe(),String.fromCodePoint(parseInt(re,16))}function Fn(){for(var re="",ve=4;ve-- >0;){var ze=zt();if(!fe.isHexDigit(ze))throw jt(pe());re+=pe()}return String.fromCodePoint(parseInt(re,16))}var Ds={start:function(){if(Oe.type==="eof")throw mi();Xi()},beforePropertyName:function(){switch(Oe.type){case"identifier":case"string":Ot=Oe.value,Te="afterPropertyName";return;case"punctuator":vi();return;case"eof":throw mi()}},afterPropertyName:function(){if(Oe.type==="eof")throw mi();Te="beforePropertyValue"},beforePropertyValue:function(){if(Oe.type==="eof")throw mi();Xi()},beforeArrayValue:function(){if(Oe.type==="eof")throw mi();if(Oe.type==="punctuator"&&Oe.value==="]"){vi();return}Xi()},afterPropertyValue:function(){if(Oe.type==="eof")throw mi();switch(Oe.value){case",":Te="beforePropertyName";return;case"}":vi()}},afterArrayValue:function(){if(Oe.type==="eof")throw mi();switch(Oe.value){case",":Te="beforeArrayValue";return;case"]":vi()}},end:function(){}};function Xi(){var re;switch(Oe.type){case"punctuator":switch(Oe.value){case"{":re={};break;case"[":re=[];break}break;case"null":case"boolean":case"numeric":case"string":re=Oe.value;break}if(ur===void 0)ur=re;else{var ve=xe[xe.length-1];Array.isArray(ve)?ve.push(re):Object.defineProperty(ve,Ot,{value:re,writable:!0,enumerable:!0,configurable:!0})}if(re!==null&&typeof re=="object")xe.push(re),Array.isArray(re)?Te="beforeArrayValue":Te="beforePropertyName";else{var ze=xe[xe.length-1];ze==null?Te="end":Array.isArray(ze)?Te="afterArrayValue":Te="afterPropertyValue"}}function vi(){xe.pop();var re=xe[xe.length-1];re==null?Te="end":Array.isArray(re)?Te="afterArrayValue":Te="afterPropertyValue"}function jt(re){return Fs(re===void 0?"JSON5: invalid end of input at "+_e+":"+qt:"JSON5: invalid character '"+zn(re)+"' at "+_e+":"+qt)}function mi(){return Fs("JSON5: invalid end of input at "+_e+":"+qt)}function Ys(){return qt-=5,Fs("JSON5: invalid identifier character at "+_e+":"+qt)}function Kn(re){console.warn("JSON5: '"+zn(re)+"' in strings is not valid ECMAScript; consider escaping")}function zn(re){var ve={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(ve[re])return ve[re];if(re<" "){var ze=re.charCodeAt(0).toString(16);return"\\x"+("00"+ze).substring(ze.length)}return re}function Fs(re){var ve=new SyntaxError(re);return ve.lineNumber=_e,ve.columnNumber=qt,ve}var Js=function(ve,ze,Ue){var et=[],wt="",Et,Or,fr="",wi;if(ze!=null&&typeof ze=="object"&&!Array.isArray(ze)&&(Ue=ze.space,wi=ze.quote,ze=ze.replacer),typeof ze=="function")Or=ze;else if(Array.isArray(ze)){Et=[];for(var Ci=0,mn=ze;Ci<mn.length;Ci+=1){var Cn=mn[Ci],Lr=void 0;typeof Cn=="string"?Lr=Cn:(typeof Cn=="number"||Cn instanceof String||Cn instanceof Number)&&(Lr=String(Cn)),Lr!==void 0&&Et.indexOf(Lr)<0&&Et.push(Lr)}}return Ue instanceof Number?Ue=Number(Ue):Ue instanceof String&&(Ue=String(Ue)),typeof Ue=="number"?Ue>0&&(Ue=Math.min(10,Math.floor(Ue)),fr="          ".substr(0,Ue)):typeof Ue=="string"&&(fr=Ue.substr(0,10)),Ii("",{"":ve});function Ii(Vt,Sr){var rt=Sr[Vt];switch(rt!=null&&(typeof rt.toJSON5=="function"?rt=rt.toJSON5(Vt):typeof rt.toJSON=="function"&&(rt=rt.toJSON(Vt))),Or&&(rt=Or.call(Sr,Vt,rt)),rt instanceof Number?rt=Number(rt):rt instanceof String?rt=String(rt):rt instanceof Boolean&&(rt=rt.valueOf()),rt){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof rt=="string")return bi(rt,!1);if(typeof rt=="number")return String(rt);if(typeof rt=="object")return Array.isArray(rt)?Iu(rt):Cu(rt)}function bi(Vt){for(var Sr={"'":.1,'"':.2},rt={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},vr="",on=0;on<Vt.length;on++){var Pr=Vt[on];switch(Pr){case"'":case'"':Sr[Pr]++,vr+=Pr;continue;case"\0":if(fe.isDigit(Vt[on+1])){vr+="\\x00";continue}}if(rt[Pr]){vr+=rt[Pr];continue}if(Pr<" "){var ln=Pr.charCodeAt(0).toString(16);vr+="\\x"+("00"+ln).substring(ln.length);continue}vr+=Pr}var Gn=wi||Object.keys(Sr).reduce(function(ui,Wn){return Sr[ui]<Sr[Wn]?ui:Wn});return vr=vr.replace(new RegExp(Gn,"g"),rt[Gn]),Gn+vr+Gn}function Cu(Vt){if(et.indexOf(Vt)>=0)throw TypeError("Converting circular structure to JSON5");et.push(Vt);var Sr=wt;wt=wt+fr;for(var rt=Et||Object.keys(Vt),vr=[],on=0,Pr=rt;on<Pr.length;on+=1){var ln=Pr[on],Gn=Ii(ln,Vt);if(Gn!==void 0){var ui=Is(ln)+":";fr!==""&&(ui+=" "),ui+=Gn,vr.push(ui)}}var Wn;if(vr.length===0)Wn="{}";else{var Zi;if(fr==="")Zi=vr.join(","),Wn="{"+Zi+"}";else{var Qs=`,
`+wt;Zi=vr.join(Qs),Wn=`{
`+wt+Zi+`,
`+Sr+"}"}}return et.pop(),wt=Sr,Wn}function Is(Vt){if(Vt.length===0)return bi(Vt,!0);var Sr=String.fromCodePoint(Vt.codePointAt(0));if(!fe.isIdStartChar(Sr))return bi(Vt,!0);for(var rt=Sr.length;rt<Vt.length;rt++)if(!fe.isIdContinueChar(String.fromCodePoint(Vt.codePointAt(rt))))return bi(Vt,!0);return Vt}function Iu(Vt){if(et.indexOf(Vt)>=0)throw TypeError("Converting circular structure to JSON5");et.push(Vt);var Sr=wt;wt=wt+fr;for(var rt=[],vr=0;vr<Vt.length;vr++){var on=Ii(String(vr),Vt);rt.push(on!==void 0?on:"null")}var Pr;if(rt.length===0)Pr="[]";else if(fr===""){var ln=rt.join(",");Pr="["+ln+"]"}else{var Gn=`,
`+wt,ui=rt.join(Gn);Pr=`[
`+wt+ui+`,
`+Sr+"]"}return et.pop(),wt=Sr,Pr}},Cs={parse:Kr,stringify:Js},Fu=Cs,Zs=Fu;return Zs}))});var Eh=t=>t.length%4==0&&/^[A-Za-z0-9+/]+[=]{0,3}$/.test(t);function E0(t){let r=new TextEncoder("utf-8").encode(t),s=String.fromCharCode.apply(null,r);return btoa(s)}function A0(t){let r=atob(t),s=Uint8Array.from(r,a=>a.charCodeAt(0));return new TextDecoder("utf-8").decode(s)}var I0="3.7.8",NE=I0,tu=typeof Buffer=="function",y0=typeof TextDecoder=="function"?new TextDecoder:void 0,S0=typeof TextEncoder=="function"?new TextEncoder:void 0,LE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",lo=Array.prototype.slice.call(LE),Uc=(t=>{let r={};return t.forEach((s,a)=>r[s]=a),r})(lo),HE=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,sn=String.fromCharCode.bind(String),D0=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),P0=t=>t.replace(/=/g,"").replace(/[+\/]/g,r=>r=="+"?"-":"_"),B0=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),R0=t=>{let r,s,a,o,c="",u=t.length%3;for(let h=0;h<t.length;){if((s=t.charCodeAt(h++))>255||(a=t.charCodeAt(h++))>255||(o=t.charCodeAt(h++))>255)throw new TypeError("invalid character found");r=s<<16|a<<8|o,c+=lo[r>>18&63]+lo[r>>12&63]+lo[r>>6&63]+lo[r&63]}return u?c.slice(0,u-3)+"===".substring(u):c},Sh=typeof btoa=="function"?t=>btoa(t):tu?t=>Buffer.from(t,"binary").toString("base64"):R0,Ah=tu?t=>Buffer.from(t).toString("base64"):t=>{let s=[];for(let a=0,o=t.length;a<o;a+=4096)s.push(sn.apply(null,t.subarray(a,a+4096)));return Sh(s.join(""))},Mc=(t,r=!1)=>r?P0(Ah(t)):Ah(t),jE=t=>{if(t.length<2){var r=t.charCodeAt(0);return r<128?t:r<2048?sn(192|r>>>6)+sn(128|r&63):sn(224|r>>>12&15)+sn(128|r>>>6&63)+sn(128|r&63)}else{var r=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return sn(240|r>>>18&7)+sn(128|r>>>12&63)+sn(128|r>>>6&63)+sn(128|r&63)}},UE=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,$0=t=>t.replace(UE,jE),F0=tu?t=>Buffer.from(t,"utf8").toString("base64"):S0?t=>Ah(S0.encode(t)):t=>Sh($0(t)),eu=(t,r=!1)=>r?P0(F0(t)):F0(t),C0=t=>eu(t,!0),ME=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,qE=t=>{switch(t.length){case 4:var r=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),s=r-65536;return sn((s>>>10)+55296)+sn((s&1023)+56320);case 3:return sn((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return sn((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},k0=t=>t.replace(ME,qE),x0=t=>{if(t=t.replace(/\s+/g,""),!HE.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let r,s,a,o=[];for(let c=0;c<t.length;)r=Uc[t.charAt(c++)]<<18|Uc[t.charAt(c++)]<<12|(s=Uc[t.charAt(c++)])<<6|(a=Uc[t.charAt(c++)]),s===64?o.push(sn(r>>16&255)):a===64?o.push(sn(r>>16&255,r>>8&255)):o.push(sn(r>>16&255,r>>8&255,r&255));return o.join("")},Dh=typeof atob=="function"?t=>atob(B0(t)):tu?t=>Buffer.from(t,"base64").toString("binary"):x0,T0=tu?t=>D0(Buffer.from(t,"base64")):t=>D0(Dh(t).split("").map(r=>r.charCodeAt(0))),O0=t=>T0(N0(t)),VE=tu?t=>Buffer.from(t,"base64").toString("utf8"):y0?t=>y0.decode(T0(t)):t=>k0(Dh(t)),N0=t=>B0(t.replace(/[-_]/g,r=>r=="-"?"+":"/")),yh=t=>VE(N0(t)),KE=t=>{if(typeof t!="string")return!1;let r=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(r)||!/[^\s0-9a-zA-Z\-_]/.test(r)},L0=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),H0=function(){let t=(r,s)=>Object.defineProperty(String.prototype,r,L0(s));t("fromBase64",function(){return yh(this)}),t("toBase64",function(r){return eu(this,r)}),t("toBase64URI",function(){return eu(this,!0)}),t("toBase64URL",function(){return eu(this,!0)}),t("toUint8Array",function(){return O0(this)})},j0=function(){let t=(r,s)=>Object.defineProperty(Uint8Array.prototype,r,L0(s));t("toBase64",function(r){return Mc(this,r)}),t("toBase64URI",function(){return Mc(this,!0)}),t("toBase64URL",function(){return Mc(this,!0)})},zE=()=>{H0(),j0()},Lt={version:I0,VERSION:NE,atob:Dh,atobPolyfill:x0,btoa:Sh,btoaPolyfill:R0,fromBase64:yh,toBase64:eu,encode:eu,encodeURI:C0,encodeURL:C0,utob:$0,btou:k0,decode:yh,isValid:KE,fromUint8Array:Mc,toUint8Array:O0,extendString:H0,extendUint8Array:j0,extendBuiltins:zE};var Pl=Si(u1());var Qh=Si(R1());function mD(t){let r=Qh.default.pemtohex(t);return Qh.default.KJUR.crypto.Util.hashHex(r,"sha256").match(/.{2}/g).join(":").toUpperCase()}var $1={generateFingerprint:mD};var V1=Si(q1()),KD=/^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)(\.(?!$)|$)){4}$/,zD=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/;function ri(t){return KD.test(t)}function Dn(t){return zD.test(t)}function K1(t){return/^((6553[0-5])|(655[0-2][0-9])|(65[0-4][0-9]{2})|(6[0-4][0-9]{3})|([1-5][0-9]{4})|([0-5]{0,5})|([0-9]{1,4}))$/.test(t)}function zi(t){return typeof t=="string"&&t.trim().length>0}function er(t,r){return zi(t)?t:r}function ce(t){return typeof t<"u"&&t!==null}function gu(t,r){return ce(t)?t:r}function GD(t,r){return t=Math.ceil(t),r=Math.floor(r),Math.floor(Math.random()*(r-t+1))+t}function wo(t){let r=t.split(/,|\//),s=r[Math.floor(Math.random()*r.length)];if(s.includes("-")){let[a,o]=s.split("-").map(Number);return GD(a,o)}else return Number(s)}function z1(t){return Number.isSafeInteger(t)?String(t):BigInt(t).toString()}function pl(t){return typeof t=="string"&&/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(t)}var $t={log(...t){console.log(`[LOG]: ${t.join(" ")}`)},info(...t){console.log(`[INFO]: ${t.join(" ")}`)},error(...t){console.log(`[ERROR]: ${t.join(" ")}`)}};var Do=Si(Lv());function jv(t,r,...s){try{return t(r,...s)}catch{return t(Uv(t(r.replace(/!<str>\s*/g,"__SubStoreJSYAMLString__"),...s)).replace(/__SubStoreJSYAMLString__/g,""),...s)}}function Pa(t,...r){return jv(Do.default.safeLoad,JSON.parse(JSON.stringify(t)),...r)}function S4(t,...r){return jv(Do.default.load,JSON.parse(JSON.stringify(t)),...r)}function Hv(t,...r){return Do.default.safeDump(JSON.parse(JSON.stringify(t)),...r)}function Uv(t,...r){return Do.default.dump(JSON.parse(JSON.stringify(t)),...r)}var Ep={safeLoad:Pa,load:S4,safeDump:Hv,dump:Uv,parse:Pa,stringify:Hv};function D4(){return{name:"HTML",test:a=>/^<!DOCTYPE html>/.test(a),parse:()=>""}}function F4(){let t="Base64 Pre-processor",r=["dm1lc3M","c3NyOi8v","c29ja3M6Ly","dHJvamFu","c3M6Ly","c3NkOi8v","c2hhZG93","aHR0c","dmxlc3M=","aHlzdGVyaWEy","aHkyOi8v","d2lyZWd1YXJkOi8v","d2c6Ly8=","dHVpYzovLw=="];return{name:t,test:function(o){return!/^\w+:\/\/\w+/im.test(o)&&r.some(c=>o.indexOf(c)!==-1)},parse:function(o){let c=Lt.decode(o);return/^\w+(:\/\/|\s*?=\s*?)\w+/m.test(c)?c:($t.error("Base64 Pre-processor error: decoded line does not start with protocol"),o)}}}function C4(){return{name:"Fallback Base64 Pre-processor",test:function(a){return!0},parse:function(a){let o=Lt.decode(a);return/^\w+(:\/\/|\s*?=\s*?)\w+/m.test(o)?o:($t.error("Fallback Base64 Pre-processor error: decoded line does not start with protocol"),a)}}}function I4(){return{name:"Clash Pre-processor",test:function(a){if(!/proxies/.test(a))return!1;let o=Pa(a);return o.proxies&&Array.isArray(o.proxies)},parse:function(a,o){let c=a.replace(/short-id:([ \t]*[^#\n,}]*)/g,(d,f)=>{let b=f.trim();return!b||b===""?'short-id: ""':/^(['"]).*\1$/.test(b)?`short-id: ${b}`:["null"].includes(b)?`short-id: ${b}`:`short-id: "${b}"`}),{proxies:u,"global-client-fingerprint":h}=Pa(c);return(o?`proxies:
`:"")+u.map(d=>(h&&!d["client-fingerprint"]&&(d["client-fingerprint"]=h),`${o?"  - ":""}${JSON.stringify(d)}
`)).join("")}}}function P4(){return{name:"SSD Pre-processor",test:function(a){return a.indexOf("ssd://")===0},parse:function(a){let o=[],c=JSON.parse(Lt.decode(a.split("ssd://")[1])),u=c.port,h=c.encryption,d=c.password,f=c.servers;for(let b=0;b<f.length;b++){let A=f[b];h=A.encryption?A.encryption:h,d=A.password?A.password:d;let g=Lt.encode(h+":"+d),v=A.server;u=A.port?A.port:u;let y=A.remarks?A.remarks:b,m=A.plugin_options?"/?plugin="+encodeURIComponent(A.plugin+";"+A.plugin_options):"";o[b]="ss://"+g+"@"+v+":"+u+m+"#"+y}return o.join(`
`)}}}function B4(){return{name:"Full Config Preprocessor",test:function(a){return/^(\[server_local\]|\[Proxy\])/gm.test(a)},parse:function(a){return a.match(/^\[server_local|Proxy\]([\s\S]+?)^\[.+?\](\r?\n|$)/im)?.[1]||a}}}var Mv=[D4(),I4(),F4(),P4(),B4(),C4()];var Vv=Si(qv()),bt=class{constructor(r){this.proxy=r,this.output=[]}append(r){if(typeof r>"u")throw new Error("required field is missing");this.output.push(r)}appendIfPresent(r,s){R4(this.proxy,s)&&this.append(r)}toString(){return this.output.join("")}};function R4(t,r){let s=Vv.default.get(t,r);return typeof s<"u"&&s!==null}var $4="Surge",gi={dual:"dual",ipv4:"v4-only",ipv6:"v6-only","ipv4-prefer":"prefer-v4","ipv6-prefer":"prefer-v6"};function Su(){return{produce:(r,s,a={})=>{switch(r.name=r.name.replace(/=|,/g,""),r.ports&&(r.ports=String(r.ports)),r.type){case"ss":return k4(r,a["include-unsupported-proxy"]);case"trojan":return x4(r);case"vmess":return T4(r,a["include-unsupported-proxy"]);case"http":return N4(r);case"direct":return L4(r);case"socks5":return H4(r);case"snell":return j4(r);case"tuic":return U4(r);case"wireguard-surge":return q4(r);case"hysteria2":return V4(r);case"ssh":return O4(r)}if(a["include-unsupported-proxy"]&&r.type==="wireguard")return M4(r);throw new Error(`Platform ${$4} does not support proxy type: ${r.type}`)}}}function k4(t){let r=new bt(t);if(r.append(`${t.name}=${t.type},${t.server},${t.port}`),t.cipher||(t.cipher="none"),!["aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","cast5-cfb","des-cfb","idea-cfb","rc2-cfb","seed-cfb","salsa20","chacha20","chacha20-ietf","none","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(t.cipher))throw new Error(`cipher ${t.cipher} is not supported`);r.append(`,encrypt-method=${t.cipher}`),r.appendIfPresent(`,password="${t.password}"`,"password");let s=gi[t["ip-version"]]||t["ip-version"];if(r.appendIfPresent(`,ip-version=${s}`,"ip-version"),r.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),ce(t,"plugin")){if(t.plugin==="obfs")r.append(`,obfs=${t["plugin-opts"].mode}`),r.appendIfPresent(`,obfs-host=${t["plugin-opts"].host}`,"plugin-opts.host"),r.appendIfPresent(`,obfs-uri=${t["plugin-opts"].path}`,"plugin-opts.path");else if(!["shadow-tls"].includes(t.plugin))throw new Error(`plugin ${t.plugin} is not supported`)}if(r.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),r.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),r.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),r.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),r.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),r.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),r.appendIfPresent(`,tos=${t.tos}`,"tos"),r.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),r.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),ce(t,"shadow-tls-password"))r.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),r.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),r.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni"),r.appendIfPresent(`,udp-port=${t["udp-port"]}`,"udp-port");else if(["shadow-tls"].includes(t.plugin)&&t["plugin-opts"]){let a=t["plugin-opts"].password,o=t["plugin-opts"].host,c=t["plugin-opts"].version;if(a){if(r.append(`,shadow-tls-password=${a}`),o&&r.append(`,shadow-tls-sni=${o}`),c){if(c<2)throw new Error(`shadow-tls version ${c} is not supported`);r.append(`,shadow-tls-version=${c}`)}r.appendIfPresent(`,udp-port=${t["udp-port"]}`,"udp-port")}}return r.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),r.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),r.toString()}function x4(t){let r=new bt(t);r.append(`${t.name}=${t.type},${t.server},${t.port}`),r.appendIfPresent(`,password="${t.password}"`,"password");let s=gi[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-version=${s}`,"ip-version"),r.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),Kv(r,t),r.appendIfPresent(`,tls=${t.tls}`,"tls"),r.appendIfPresent(`,server-cert-fingerprint-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),r.appendIfPresent(`,sni=${t.sni}`,"sni"),r.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),r.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),r.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),r.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),r.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),r.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),r.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),r.appendIfPresent(`,tos=${t.tos}`,"tos"),r.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),r.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),ce(t,"shadow-tls-password")&&(r.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),r.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),r.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),r.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),r.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),r.toString()}function T4(t,r){let s=new bt(t);s.append(`${t.name}=${t.type},${t.server},${t.port}`),s.appendIfPresent(`,username=${t.uuid}`,"uuid");let a=gi[t["ip-version"]]||t["ip-version"];return s.appendIfPresent(`,ip-version=${a}`,"ip-version"),s.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),Kv(s,t,r),ce(t,"aead")?s.append(`,vmess-aead=${t.aead}`):s.append(`,vmess-aead=${t.alterId===0}`),s.appendIfPresent(`,server-cert-fingerprint-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),s.appendIfPresent(`,tls=${t.tls}`,"tls"),s.appendIfPresent(`,sni=${t.sni}`,"sni"),s.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),s.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),s.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),s.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),s.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),s.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),s.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),s.appendIfPresent(`,tos=${t.tos}`,"tos"),s.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),s.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),ce(t,"shadow-tls-password")&&(s.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),s.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),s.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),s.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),s.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),s.toString()}function O4(t){let r=new bt(t);r.append(`${t.name}=ssh,${t.server},${t.port}`),r.appendIfPresent(`,username="${t.username}"`,"username"),r.appendIfPresent(`,password="${t.password}"`,"password"),r.appendIfPresent(`,private-key=${t["keystore-private-key"]}`,"keystore-private-key"),r.appendIfPresent(`,idle-timeout=${t["idle-timeout"]}`,"idle-timeout"),r.appendIfPresent(`,server-fingerprint="${t["server-fingerprint"]}"`,"server-fingerprint");let s=gi[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-version=${s}`,"ip-version"),r.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),r.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),r.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),r.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),r.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),r.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),r.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),r.appendIfPresent(`,tos=${t.tos}`,"tos"),r.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),r.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),r.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),r.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),r.toString()}function N4(t){if(t.headers&&Object.keys(t.headers).length>0)throw new Error("headers is unsupported");let r=new bt(t),s=t.tls?"https":"http";r.append(`${t.name}=${s},${t.server},${t.port}`),r.appendIfPresent(`,username="${t.username}"`,"username"),r.appendIfPresent(`,password="${t.password}"`,"password");let a=gi[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-version=${a}`,"ip-version"),r.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),r.appendIfPresent(`,server-cert-fingerprint-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),r.appendIfPresent(`,sni=${t.sni}`,"sni"),r.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),r.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),r.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),r.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),r.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),r.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),r.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),r.appendIfPresent(`,tos=${t.tos}`,"tos"),r.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),r.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),ce(t,"shadow-tls-password")&&(r.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),r.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),r.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),r.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),r.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),r.toString()}function L4(t){let r=new bt(t);r.append(`${t.name}=direct`);let a=gi[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-version=${a}`,"ip-version"),r.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),r.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),r.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),r.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),r.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),r.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),r.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),r.appendIfPresent(`,tos=${t.tos}`,"tos"),r.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),r.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),r.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),r.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),r.toString()}function H4(t){let r=new bt(t),s=t.tls?"socks5-tls":"socks5";r.append(`${t.name}=${s},${t.server},${t.port}`),r.appendIfPresent(`,username="${t.username}"`,"username"),r.appendIfPresent(`,password="${t.password}"`,"password");let a=gi[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-version=${a}`,"ip-version"),r.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),r.appendIfPresent(`,server-cert-fingerprint-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),r.appendIfPresent(`,sni=${t.sni}`,"sni"),r.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),t.tfo&&$t.info("Option tfo is not supported by Surge, thus omitted"),r.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),r.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),r.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),r.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),r.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),r.appendIfPresent(`,tos=${t.tos}`,"tos"),r.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),r.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),ce(t,"shadow-tls-password")&&(r.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),r.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),r.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),r.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),r.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),r.toString()}function j4(t){let r=new bt(t);r.append(`${t.name}=${t.type},${t.server},${t.port}`),r.appendIfPresent(`,version=${t.version}`,"version"),r.appendIfPresent(`,psk=${t.psk}`,"psk");let s=gi[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-version=${s}`,"ip-version"),r.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),r.appendIfPresent(`,obfs=${t["obfs-opts"]?.mode}`,"obfs-opts.mode"),r.appendIfPresent(`,obfs-host=${t["obfs-opts"]?.host}`,"obfs-opts.host"),r.appendIfPresent(`,obfs-uri=${t["obfs-opts"]?.path}`,"obfs-opts.path"),r.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),r.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),r.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),r.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),r.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),r.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),r.appendIfPresent(`,tos=${t.tos}`,"tos"),r.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),r.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),ce(t,"shadow-tls-password")&&(r.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),r.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),r.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),r.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),r.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),r.appendIfPresent(`,reuse=${t.reuse}`,"reuse"),r.toString()}function U4(t){let r=new bt(t),s=t.type;(!t.token||t.token.length===0)&&(s="tuic-v5"),r.append(`${t.name}=${s},${t.server},${t.port}`),r.appendIfPresent(`,uuid=${t.uuid}`,"uuid"),r.appendIfPresent(`,password="${t.password}"`,"password"),r.appendIfPresent(`,token=${t.token}`,"token"),r.appendIfPresent(`,alpn=${Array.isArray(t.alpn)?t.alpn[0]:t.alpn}`,"alpn"),ce(t,"ports")&&r.append(`,port-hopping="${t.ports.replace(/,/g,";")}"`),r.appendIfPresent(`,port-hopping-interval=${t["hop-interval"]}`,"hop-interval");let a=gi[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-version=${a}`,"ip-version"),r.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),r.appendIfPresent(`,sni=${t.sni}`,"sni"),r.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),r.appendIfPresent(`,server-cert-fingerprint-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),ce(t,"tfo")?r.append(`,tfo=${t.tfo}`):ce(t,"fast-open")&&r.append(`,tfo=${t["fast-open"]}`),r.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),r.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),r.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),r.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),r.appendIfPresent(`,tos=${t.tos}`,"tos"),r.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),r.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),ce(t,"shadow-tls-password")&&(r.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),r.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),r.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),r.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),r.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),r.appendIfPresent(`,ecn=${t.ecn}`,"ecn"),r.toString()}function M4(t){Array.isArray(t.peers)&&t.peers.length>0&&(t.server=t.peers[0].server,t.port=t.peers[0].port,t.ip=t.peers[0].ip,t.ipv6=t.peers[0].ipv6,t["public-key"]=t.peers[0]["public-key"],t["preshared-key"]=t.peers[0]["pre-shared-key"],t["allowed-ips"]=t.peers[0]["allowed-ips"],t.reserved=t.peers[0].reserved);let r=new bt(t);r.append(`# > WireGuard Proxy ${t.name}
# ${t.name}=wireguard`),t["section-name"]=er(t["section-name"],t.name),r.appendIfPresent(`,section-name=${t["section-name"]}`,"section-name"),r.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert");let s=gi[t["ip-version"]]||t["ip-version"];r.appendIfPresent(`,ip-version=${s}`,"ip-version"),r.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),r.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),r.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),r.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),r.appendIfPresent(`,tos=${t.tos}`,"tos"),r.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),r.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),ce(t,"shadow-tls-password")&&(r.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),r.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),r.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),r.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),r.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),r.append(`
# > WireGuard Section ${t.name}
[WireGuard ${t["section-name"]}]
private-key = ${t["private-key"]}`),r.appendIfPresent(`
self-ip = ${t.ip}`,"ip"),r.appendIfPresent(`
self-ip-v6 = ${t.ipv6}`,"ipv6"),t.dns&&(Array.isArray(t.dns)&&(t.dns=t.dns.join(", ")),r.append(`
dns-server = ${t.dns}`)),r.appendIfPresent(`
mtu = ${t.mtu}`,"mtu"),s==="prefer-v6"&&r.append(`
prefer-ipv6 = true`);let a=Array.isArray(t["allowed-ips"])?t["allowed-ips"].join(","):t["allowed-ips"],o=Array.isArray(t.reserved)?t.reserved.join("/"):t.reserved,c=t["preshared-key"]??t["pre-shared-key"];c&&(c=`,preshared-key="${c}"`);let u={"public-key":t["public-key"],"allowed-ips":a?`"${a}"`:void 0,endpoint:`${t.server}:${t.port}`,keepalive:t["persistent-keepalive"]||t.keepalive,"client-id":o,"preshared-key":c};return r.append(`
peer = (${Object.keys(u).filter(h=>u[h]!=null).map(h=>`${h} = ${u[h]}`).join(", ")})`),r.toString()}function q4(t){let r=new bt(t);r.append(`${t.name}=wireguard`),r.appendIfPresent(`,section-name=${t["section-name"]}`,"section-name"),r.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert");let s=gi[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-version=${s}`,"ip-version"),r.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),r.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),r.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),r.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),r.appendIfPresent(`,tos=${t.tos}`,"tos"),r.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),r.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),ce(t,"shadow-tls-password")&&(r.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),r.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),r.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),r.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),r.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),r.toString()}function V4(t){if(t.obfs||t["obfs-password"])throw new Error("obfs is unsupported");let r=new bt(t);r.append(`${t.name}=hysteria2,${t.server},${t.port}`),r.appendIfPresent(`,password="${t.password}"`,"password"),ce(t,"ports")&&r.append(`,port-hopping="${t.ports.replace(/,/g,";")}"`),r.appendIfPresent(`,port-hopping-interval=${t["hop-interval"]}`,"hop-interval");let s=gi[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-version=${s}`,"ip-version"),r.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),r.appendIfPresent(`,sni=${t.sni}`,"sni"),r.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),r.appendIfPresent(`,server-cert-fingerprint-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),ce(t,"tfo")?r.append(`,tfo=${t.tfo}`):ce(t,"fast-open")&&r.append(`,tfo=${t["fast-open"]}`),r.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),r.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),r.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),r.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),r.appendIfPresent(`,tos=${t.tos}`,"tos"),r.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),r.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),ce(t,"shadow-tls-password")&&(r.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),r.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),r.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),r.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),r.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),r.appendIfPresent(`,download-bandwidth=${`${t.down}`.match(/\d+/)?.[0]||0}`,"down"),r.appendIfPresent(`,ecn=${t.ecn}`,"ecn"),r.toString()}function Kv(t,r,s){if(ce(r,"network"))if(r.network==="ws"){if(t.append(",ws=true"),ce(r,"ws-opts")&&(t.appendIfPresent(`,ws-path=${r["ws-opts"].path}`,"ws-opts.path"),ce(r,"ws-opts.headers"))){let a=r["ws-opts"].headers,o=Object.keys(a).map(c=>{let u=a[c];return u=`"${u}"`,`${c}:${u}`}).join("|");zi(o)&&t.append(`,ws-headers=${o}`)}}else if(s&&["http"].includes(r.network))$t.info(`Include Unsupported Proxy: nework ${r.network} -> tcp`);else throw new Error(`network ${r.network} is unsupported`)}var K4={dual:"dual","v4-only":"ipv4","v6-only":"ipv6","prefer-v4":"ipv4-prefer","prefer-v6":"ipv6-prefer"};function ni(){return{type:"ALL",produce:(s,a,o={})=>{let c=s.filter(u=>o["include-unsupported-proxy"]?!0:u.type==="snell"&&u.version>=4||["juicity"].includes(u.type)||["ss"].includes(u.type)&&!["aes-128-ctr","aes-192-ctr","aes-256-ctr","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-gcm","aes-192-gcm","aes-256-gcm","aes-128-ccm","aes-192-ccm","aes-256-ccm","aes-128-gcm-siv","aes-256-gcm-siv","chacha20-ietf","chacha20","xchacha20","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","chacha8-ietf-poly1305","xchacha8-ietf-poly1305","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm","2022-blake3-chacha20-poly1305","lea-128-gcm","lea-192-gcm","lea-256-gcm","rabbit128-poly1305","aegis-128l","aegis-256","aez-384","deoxys-ii-256-128","rc4-md5","none"].includes(u.cipher)?!1:!(["anytls"].includes(u.type)&&u.network&&(!["tcp"].includes(u.network)||["tcp"].includes(u.network)&&u["reality-opts"]))).map(u=>{if(u.type==="vmess"?(ce(u,"aead")&&(u.aead&&(u.alterId=0),delete u.aead),ce(u,"sni")&&(u.servername=u.sni,delete u.sni),ce(u,"cipher")&&!["auto","none","zero","aes-128-gcm","chacha20-poly1305"].includes(u.cipher)&&(u.cipher="auto")):u.type==="tuic"?(ce(u,"alpn")?u.alpn=Array.isArray(u.alpn)?u.alpn:[u.alpn]:u.alpn=["h3"],ce(u,"tfo")&&!ce(u,"fast-open")&&(u["fast-open"]=u.tfo),(!u.token||u.token.length===0)&&!ce(u,"version")&&(u.version=5)):u.type==="hysteria"?(ce(u,"auth_str")&&!ce(u,"auth-str")&&(u["auth-str"]=u.auth_str),ce(u,"alpn")&&(u.alpn=Array.isArray(u.alpn)?u.alpn:[u.alpn]),ce(u,"tfo")&&!ce(u,"fast-open")&&(u["fast-open"]=u.tfo)):u.type==="wireguard"?(u.keepalive=u.keepalive??u["persistent-keepalive"],u["persistent-keepalive"]=u.keepalive,u["preshared-key"]=u["preshared-key"]??u["pre-shared-key"],u["pre-shared-key"]=u["preshared-key"]):u.type==="snell"&&u.version<3?delete u.udp:u.type==="vless"?ce(u,"sni")&&(u.servername=u.sni,delete u.sni):u.type==="ss"&&ce(u,"shadow-tls-password")&&!ce(u,"plugin")&&(u.plugin="shadow-tls",u["plugin-opts"]={host:u["shadow-tls-sni"],password:u["shadow-tls-password"],version:u["shadow-tls-version"]},delete u["shadow-tls-password"],delete u["shadow-tls-sni"],delete u["shadow-tls-version"]),["vmess","vless"].includes(u.type)&&u.network==="http"){let h=u["http-opts"]?.path;ce(u,"http-opts.path")&&!Array.isArray(h)&&(u["http-opts"].path=[h]);let d=u["http-opts"]?.headers?.Host;ce(u,"http-opts.headers.Host")&&!Array.isArray(d)&&(u["http-opts"].headers.Host=[d])}if(["vmess","vless"].includes(u.type)&&u.network==="h2"){let h=u["h2-opts"]?.path;ce(u,"h2-opts.path")&&Array.isArray(h)&&(u["h2-opts"].path=h[0]);let d=u["h2-opts"]?.headers?.host;ce(u,"h2-opts.headers.Host")&&!Array.isArray(d)&&(u["h2-opts"].headers.host=[d])}if(["ws"].includes(u.network)){let h=u[`${u.network}-opts`]?.path;if(h){let d=/^(.*?)(?:\?ed=(\d+))?$/,[f,b="",A=""]=d.exec(h);u[`${u.network}-opts`].path=b,A!==""&&(u["ws-opts"]["early-data-header-name"]="Sec-WebSocket-Protocol",u["ws-opts"]["max-early-data"]=parseInt(A,10))}else u[`${u.network}-opts`]=u[`${u.network}-opts`]||{},u[`${u.network}-opts`].path="/"}if(u["plugin-opts"]?.tls&&ce(u,"skip-cert-verify")&&(u["plugin-opts"]["skip-cert-verify"]=u["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity","anytls"].includes(u.type)&&delete u.tls,u["tls-fingerprint"]&&(u.fingerprint=u["tls-fingerprint"]),delete u["tls-fingerprint"],u["underlying-proxy"]&&(u["dialer-proxy"]=u["underlying-proxy"]),delete u["underlying-proxy"],ce(u,"tls")&&typeof u.tls!="boolean"&&delete u.tls,delete u.subName,delete u.collectionName,delete u.id,delete u.resolved,delete u["no-resolve"],a!=="internal"||o["delete-underscore-fields"])for(let h in u)(u[h]==null||/^_/i.test(h))&&delete u[h];return["grpc"].includes(u.network)&&u[`${u.network}-opts`]&&(delete u[`${u.network}-opts`]["_grpc-type"],delete u[`${u.network}-opts`]["_grpc-authority"]),u["ip-version"]&&(u["ip-version"]=K4[u["ip-version"]]||u["ip-version"]),u});return a==="internal"?c:`proxies:
`+c.map(u=>"  - "+JSON.stringify(u)+`
`).join("")}}}var zv="SurgeMac",z4=Su();function Ap(){return{produce:(r,s,a={})=>{switch(r.type){case"external":return Gv(r);default:try{return z4.produce(r,s,a)}catch{if(a.useMihomoExternal)return $t.log(`${r.name} is not supported on ${zv}, try to use Mihomo(SurgeMac - External Proxy Program) instead`),G4(r,s,a);throw new Error("Surge for macOS \u53EF\u624B\u52A8\u6307\u5B9A\u94FE\u63A5\u53C2\u6570 target=SurgeMac \u6216\u5728 \u540C\u6B65\u914D\u7F6E \u4E2D\u6307\u5B9A SurgeMac \u6765\u542F\u7528 mihomo \u652F\u63F4 Surge \u672C\u8EAB\u4E0D\u652F\u6301\u7684\u534F\u8BAE")}}}}}function Gv(t){let r=new bt(t);if(!t.exec||!t["local-port"])throw new Error(`${t.type}: exec and local-port are required`);return r.append(`${t.name}=external,exec="${t.exec}",local-port=${t["local-port"]}`),Array.isArray(t.args)&&t.args.map(s=>{r.append(`,args="${s}"`)}),Array.isArray(t.addresses)&&t.addresses.map(s=>{r.append(`,addresses=${s}`)}),r.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),ce(t,"tfo")?r.append(`,tfo=${t.tfo}`):ce(t,"fast-open")&&r.append(`,tfo=${t["fast-open"]}`),r.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),r.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),r.toString()}function G4(t,r,s){let a=ni().produce([t],"internal")?.[0];if(a){let o=s?.localPort||t._localPort||65535,c=!["ipv4","v4-only"].includes(t["ip-version"]),u={name:t.name,type:"external",exec:t._exec||"/usr/local/bin/mihomo","local-port":o,args:["-config",Lt.encode(JSON.stringify({"mixed-port":o,ipv6:c,mode:"global",dns:{enable:!0,ipv6:c,"default-nameserver":s?.defaultNameserver||t._defaultNameserver||["180.76.76.76","52.80.52.52","119.28.28.28","223.6.6.6"],nameserver:s?.nameserver||t._nameserver||["https://doh.pub/dns-query","https://dns.alidns.com/dns-query","https://doh-pure.onedns.net/dns-query"]},proxies:[{...a,name:"proxy"}],"proxy-groups":[{name:"GLOBAL",type:"select",proxies:["proxy"]}]}))],addresses:[]};return W4(t.server)?u.addresses.push(t.server):$t.log(`Platform ${zv}, proxy type ${t.type}: addresses should be an IP address, but got ${t.server}`),s.localPort=o-1,Gv(u)}}function W4(t){return ri(t)||Dn(t)}function yp(){return{type:"ALL",produce:(s,a,o={})=>{let c=s.filter(u=>o["include-unsupported-proxy"]?!0:!["ss","ssr","vmess","vless","socks5","http","snell","trojan","wireguard"].includes(u.type)||u.type==="ss"&&!["aes-128-gcm","aes-192-gcm","aes-256-gcm","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","rc4-md5","chacha20-ietf","xchacha20","chacha20-ietf-poly1305","xchacha20-ietf-poly1305"].includes(u.cipher)||u.type==="snell"&&u.version>=4||u.type==="vless"&&(typeof u.flow<"u"||u["reality-opts"])?!1:u["underlying-proxy"]||u["dialer-proxy"]?($t.error(`Clash \u4E0D\u652F\u6301\u524D\u7F6E\u4EE3\u7406\u5B57\u6BB5. \u5DF2\u8FC7\u6EE4\u8282\u70B9 ${u.name}`),!1):!0).map(u=>{if(u.type==="vmess"?(ce(u,"aead")&&(u.aead&&(u.alterId=0),delete u.aead),ce(u,"sni")&&(u.servername=u.sni,delete u.sni),ce(u,"cipher")&&!["auto","aes-128-gcm","chacha20-poly1305","none"].includes(u.cipher)&&(u.cipher="auto")):u.type==="wireguard"?(u.keepalive=u.keepalive??u["persistent-keepalive"],u["persistent-keepalive"]=u.keepalive,u["preshared-key"]=u["preshared-key"]??u["pre-shared-key"],u["pre-shared-key"]=u["preshared-key"]):u.type==="snell"&&u.version<3?delete u.udp:u.type==="vless"&&ce(u,"sni")&&(u.servername=u.sni,delete u.sni),["vmess","vless"].includes(u.type)&&u.network==="http"){let h=u["http-opts"]?.path;ce(u,"http-opts.path")&&!Array.isArray(h)&&(u["http-opts"].path=[h]);let d=u["http-opts"]?.headers?.Host;ce(u,"http-opts.headers.Host")&&!Array.isArray(d)&&(u["http-opts"].headers.Host=[d])}if(["vmess","vless"].includes(u.type)&&u.network==="h2"){let h=u["h2-opts"]?.path;ce(u,"h2-opts.path")&&Array.isArray(h)&&(u["h2-opts"].path=h[0]);let d=u["h2-opts"]?.headers?.host;ce(u,"h2-opts.headers.Host")&&!Array.isArray(d)&&(u["h2-opts"].headers.host=[d])}if(["ws"].includes(u.network)){let h=u[`${u.network}-opts`]?.path;if(h){let d=/^(.*?)(?:\?ed=(\d+))?$/,[f,b="",A=""]=d.exec(h);u[`${u.network}-opts`].path=b,A!==""&&(u["ws-opts"]["early-data-header-name"]="Sec-WebSocket-Protocol",u["ws-opts"]["max-early-data"]=parseInt(A,10))}else u[`${u.network}-opts`]=u[`${u.network}-opts`]||{},u[`${u.network}-opts`].path="/"}if(u["plugin-opts"]?.tls&&ce(u,"skip-cert-verify")&&(u["plugin-opts"]["skip-cert-verify"]=u["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity","anytls"].includes(u.type)&&delete u.tls,u["tls-fingerprint"]&&(u.fingerprint=u["tls-fingerprint"]),delete u["tls-fingerprint"],ce(u,"tls")&&typeof u.tls!="boolean"&&delete u.tls,delete u.subName,delete u.collectionName,delete u.id,delete u.resolved,delete u["no-resolve"],a!=="internal")for(let h in u)(u[h]==null||/^_/i.test(h))&&delete u[h];return["grpc"].includes(u.network)&&u[`${u.network}-opts`]&&(delete u[`${u.network}-opts`]["_grpc-type"],delete u[`${u.network}-opts`]["_grpc-authority"]),u});return a==="internal"?c:`proxies:
`+c.map(u=>"  - "+JSON.stringify(u)+`
`).join("")}}}function Dl(){return{type:"ALL",produce:(s,a,o={})=>{let c=s.filter(u=>!["ss","ssr","vmess","socks5","http","snell","trojan","tuic","vless","wireguard","hysteria","hysteria2","ssh","juicity"].includes(u.type)||u.type==="ss"&&!["aes-128-gcm","aes-192-gcm","aes-256-gcm","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","rc4-md5","chacha20-ietf","xchacha20","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(u.cipher)||u.type==="snell"&&u.version>=4||u.type==="vless"&&u["reality-opts"]&&!["xtls-rprx-vision"].includes(u.flow)?!1:u["underlying-proxy"]||u["dialer-proxy"]?($t.error(`Stash \u6682\u4E0D\u652F\u6301\u524D\u7F6E\u4EE3\u7406\u5B57\u6BB5. \u5DF2\u8FC7\u6EE4\u8282\u70B9 ${u.name}. \u8BF7\u4F7F\u7528 \u4EE3\u7406\u7684\u8F6C\u53D1\u94FE https://stash.wiki/proxy-protocols/proxy-groups#relay`),!1):!0).map(u=>{if(u.type==="vmess"?(ce(u,"aead")&&(u.aead&&(u.alterId=0),delete u.aead),ce(u,"sni")&&(u.servername=u.sni,delete u.sni),ce(u,"cipher")&&!["auto","aes-128-gcm","chacha20-poly1305","none"].includes(u.cipher)&&(u.cipher="auto")):u.type==="tuic"?(ce(u,"alpn")?u.alpn=Array.isArray(u.alpn)?u.alpn:[u.alpn]:u.alpn=["h3"],ce(u,"tfo")&&!ce(u,"fast-open")&&(u["fast-open"]=u.tfo,delete u.tfo),(!u.token||u.token.length===0)&&!ce(u,"version")&&(u.version=5)):u.type==="hysteria"?(ce(u,"auth_str")&&!ce(u,"auth-str")&&(u["auth-str"]=u.auth_str),ce(u,"alpn")&&(u.alpn=Array.isArray(u.alpn)?u.alpn:[u.alpn]),ce(u,"tfo")&&!ce(u,"fast-open")&&(u["fast-open"]=u.tfo,delete u.tfo),ce(u,"down")&&!ce(u,"down-speed")&&(u["down-speed"]=u.down,delete u.down),ce(u,"up")&&!ce(u,"up-speed")&&(u["up-speed"]=u.up,delete u.up),ce(u,"down-speed")&&(u["down-speed"]=`${u["down-speed"]}`.match(/\d+/)?.[0]||0),ce(u,"up-speed")&&(u["up-speed"]=`${u["up-speed"]}`.match(/\d+/)?.[0]||0)):u.type==="hysteria2"?(ce(u,"password")&&!ce(u,"auth")&&(u.auth=u.password,delete u.password),ce(u,"tfo")&&!ce(u,"fast-open")&&(u["fast-open"]=u.tfo,delete u.tfo),ce(u,"down")&&!ce(u,"down-speed")&&(u["down-speed"]=u.down,delete u.down),ce(u,"up")&&!ce(u,"up-speed")&&(u["up-speed"]=u.up,delete u.up),ce(u,"down-speed")&&(u["down-speed"]=`${u["down-speed"]}`.match(/\d+/)?.[0]||0),ce(u,"up-speed")&&(u["up-speed"]=`${u["up-speed"]}`.match(/\d+/)?.[0]||0)):u.type==="wireguard"?(u.keepalive=u.keepalive??u["persistent-keepalive"],u["persistent-keepalive"]=u.keepalive,u["preshared-key"]=u["preshared-key"]??u["pre-shared-key"],u["pre-shared-key"]=u["preshared-key"]):u.type==="snell"&&u.version<3?delete u.udp:u.type==="vless"&&ce(u,"sni")&&(u.servername=u.sni,delete u.sni),["vmess","vless"].includes(u.type)&&u.network==="http"){let h=u["http-opts"]?.path;ce(u,"http-opts.path")&&!Array.isArray(h)&&(u["http-opts"].path=[h]);let d=u["http-opts"]?.headers?.Host;ce(u,"http-opts.headers.Host")&&!Array.isArray(d)&&(u["http-opts"].headers.Host=[d])}if(["vmess","vless"].includes(u.type)&&u.network==="h2"){let h=u["h2-opts"]?.path;ce(u,"h2-opts.path")&&Array.isArray(h)&&(u["h2-opts"].path=h[0]);let d=u["h2-opts"]?.headers?.host;ce(u,"h2-opts.headers.Host")&&!Array.isArray(d)&&(u["h2-opts"].headers.host=[d])}if(["ws"].includes(u.network)){let h=u[`${u.network}-opts`]?.path;if(h){let d=/^(.*?)(?:\?ed=(\d+))?$/,[f,b="",A=""]=d.exec(h);u[`${u.network}-opts`].path=b,A!==""&&(u["ws-opts"]["early-data-header-name"]="Sec-WebSocket-Protocol",u["ws-opts"]["max-early-data"]=parseInt(A,10))}else u[`${u.network}-opts`]=u[`${u.network}-opts`]||{},u[`${u.network}-opts`].path="/"}if(u["plugin-opts"]?.tls&&ce(u,"skip-cert-verify")&&(u["plugin-opts"]["skip-cert-verify"]=u["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity","anytls"].includes(u.type)&&delete u.tls,u["tls-fingerprint"]&&(u["server-cert-fingerprint"]=u["tls-fingerprint"]),delete u["tls-fingerprint"],ce(u,"tls")&&typeof u.tls!="boolean"&&delete u.tls,u["test-url"]&&(u["benchmark-url"]=u["test-url"],delete u["test-url"]),u["test-timeout"]&&(u["benchmark-timeout"]=u["test-timeout"],delete u["test-timeout"]),delete u.subName,delete u.collectionName,delete u.id,delete u.resolved,delete u["no-resolve"],a!=="internal")for(let h in u)(u[h]==null||/^_/i.test(h))&&delete u[h];return["grpc"].includes(u.network)&&u[`${u.network}-opts`]&&(delete u[`${u.network}-opts`]["_grpc-type"],delete u[`${u.network}-opts`]["_grpc-authority"]),u});return a==="internal"?c:`proxies:
`+c.map(u=>"  - "+JSON.stringify(u)+`
`).join("")}}}var Y4="Loon",ys={dual:"dual",ipv4:"v4-only",ipv6:"v6-only","ipv4-prefer":"prefer-v4","ipv6-prefer":"prefer-v6"};function Sp(){return{produce:(r,s,a={})=>{switch(r.type){case"ss":return J4(r);case"ssr":return X4(r);case"trojan":return Z4(r);case"vmess":return Q4(r,a["include-unsupported-proxy"]);case"vless":return e6(r,a["include-unsupported-proxy"]);case"http":return t6(r);case"socks5":return r6(r);case"wireguard":return n6(r);case"hysteria2":return i6(r)}throw new Error(`Platform ${Y4} does not support proxy type: ${r.type}`)}}}function J4(t){let r=new bt(t);if(!["rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","salsa20","chacha20","chacha20-ietf","aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(t.cipher))throw new Error(`cipher ${t.cipher} is not supported`);if(r.append(`${t.name}=shadowsocks,${t.server},${t.port},${t.cipher},"${t.password}"`),ce(t,"plugin")){if(t.plugin==="obfs")r.append(`,obfs-name=${t["plugin-opts"].mode}`),r.appendIfPresent(`,obfs-host=${t["plugin-opts"].host}`,"plugin-opts.host"),r.appendIfPresent(`,obfs-uri=${t["plugin-opts"].path}`,"plugin-opts.path");else if(!["shadow-tls"].includes(t.plugin))throw new Error(`plugin ${t.plugin} is not supported`)}if(ce(t,"shadow-tls-password"))r.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),r.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),r.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni"),r.appendIfPresent(`,udp-port=${t["udp-port"]}`,"udp-port");else if(["shadow-tls"].includes(t.plugin)&&t["plugin-opts"]){let a=t["plugin-opts"].password,o=t["plugin-opts"].host,c=t["plugin-opts"].version;if(a){if(r.append(`,shadow-tls-password=${a}`),o&&r.append(`,shadow-tls-sni=${o}`),c){if(c<2)throw new Error(`shadow-tls version ${c} is not supported`);r.append(`,shadow-tls-version=${c}`)}r.appendIfPresent(`,udp-port=${t["udp-port"]}`,"udp-port")}}r.appendIfPresent(`,fast-open=${t.tfo}`,"tfo"),t["block-quic"]==="on"?r.append(",block-quic=true"):t["block-quic"]==="off"&&r.append(",block-quic=false"),t.udp&&r.append(",udp=true");let s=ys[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-mode=${s}`,"ip-version"),r.toString()}function X4(t){let r=new bt(t);if(r.append(`${t.name}=shadowsocksr,${t.server},${t.port},${t.cipher},"${t.password}"`),r.append(`,protocol=${t.protocol}`),r.appendIfPresent(`,protocol-param=${t["protocol-param"]}`,"protocol-param"),r.appendIfPresent(`,obfs=${t.obfs}`,"obfs"),r.appendIfPresent(`,obfs-param=${t["obfs-param"]}`,"obfs-param"),ce(t,"shadow-tls-password"))r.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),r.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),r.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni"),r.appendIfPresent(`,udp-port=${t["udp-port"]}`,"udp-port");else if(["shadow-tls"].includes(t.plugin)&&t["plugin-opts"]){let a=t["plugin-opts"].password,o=t["plugin-opts"].host,c=t["plugin-opts"].version;if(a){if(r.append(`,shadow-tls-password=${a}`),o&&r.append(`,shadow-tls-sni=${o}`),c){if(c<2)throw new Error(`shadow-tls version ${c} is not supported`);r.append(`,shadow-tls-version=${c}`)}r.appendIfPresent(`,udp-port=${t["udp-port"]}`,"udp-port")}}r.appendIfPresent(`,fast-open=${t.tfo}`,"tfo"),t["block-quic"]==="on"?r.append(",block-quic=true"):t["block-quic"]==="off"&&r.append(",block-quic=false"),t.udp&&r.append(",udp=true");let s=ys[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-mode=${s}`,"ip-version"),r.toString()}function Z4(t){let r=new bt(t);if(r.append(`${t.name}=trojan,${t.server},${t.port},"${t.password}"`),t.network==="tcp"&&delete t.network,ce(t,"network"))if(t.network==="ws")r.append(",transport=ws"),r.appendIfPresent(`,path=${t["ws-opts"]?.path}`,"ws-opts.path"),r.appendIfPresent(`,host=${t["ws-opts"]?.headers?.Host}`,"ws-opts.headers.Host");else throw new Error(`network ${t.network} is unsupported`);r.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),r.appendIfPresent(`,tls-name=${t.sni}`,"sni"),r.appendIfPresent(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),r.appendIfPresent(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),r.appendIfPresent(`,fast-open=${t.tfo}`,"tfo"),t["block-quic"]==="on"?r.append(",block-quic=true"):t["block-quic"]==="off"&&r.append(",block-quic=false"),t.udp&&r.append(",udp=true");let s=ys[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-mode=${s}`,"ip-version"),r.toString()}function Q4(t){let r=!!t["reality-opts"],s=new bt(t);if(s.append(`${t.name}=vmess,${t.server},${t.port},${t.cipher},"${t.uuid}"`),t.network==="tcp"&&delete t.network,ce(t,"network"))if(t.network==="ws")s.append(",transport=ws"),s.appendIfPresent(`,path=${t["ws-opts"]?.path}`,"ws-opts.path"),s.appendIfPresent(`,host=${t["ws-opts"]?.headers?.Host}`,"ws-opts.headers.Host");else if(t.network==="http"){s.append(",transport=http");let o=t["http-opts"]?.path,c=t["http-opts"]?.headers?.Host;s.appendIfPresent(`,path=${Array.isArray(o)?o[0]:o}`,"http-opts.path"),s.appendIfPresent(`,host=${Array.isArray(c)?c[0]:c}`,"http-opts.headers.Host")}else throw new Error(`network ${t.network} is unsupported`);else s.append(",transport=tcp");s.appendIfPresent(`,over-tls=${t.tls}`,"tls"),s.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),r?(s.appendIfPresent(`,sni=${t.sni}`,"sni"),s.appendIfPresent(`,public-key="${t["reality-opts"]["public-key"]}"`,"reality-opts.public-key"),s.appendIfPresent(`,short-id=${t["reality-opts"]["short-id"]}`,"reality-opts.short-id")):(s.appendIfPresent(`,tls-name=${t.sni}`,"sni"),s.appendIfPresent(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),s.appendIfPresent(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256")),ce(t,"aead")?s.append(`,alterId=${t.aead?0:1}`):s.append(`,alterId=${t.alterId}`),s.appendIfPresent(`,fast-open=${t.tfo}`,"tfo"),t["block-quic"]==="on"?s.append(",block-quic=true"):t["block-quic"]==="off"&&s.append(",block-quic=false"),t.udp&&s.append(",udp=true");let a=ys[t["ip-version"]]||t["ip-version"];return s.appendIfPresent(`,ip-mode=${a}`,"ip-version"),s.toString()}function e6(t){let r=!1,s=!!t["reality-opts"];if(typeof t.flow<"u")if(["xtls-rprx-vision"].includes(t.flow))r=!0;else throw new Error(`VLESS flow(${t.flow}) is not supported`);let a=new bt(t);if(a.append(`${t.name}=vless,${t.server},${t.port},"${t.uuid}"`),t.network==="tcp"&&delete t.network,ce(t,"network"))if(t.network==="ws")a.append(",transport=ws"),a.appendIfPresent(`,path=${t["ws-opts"]?.path}`,"ws-opts.path"),a.appendIfPresent(`,host=${t["ws-opts"]?.headers?.Host}`,"ws-opts.headers.Host");else if(t.network==="http"){a.append(",transport=http");let c=t["http-opts"]?.path,u=t["http-opts"]?.headers?.Host;a.appendIfPresent(`,path=${Array.isArray(c)?c[0]:c}`,"http-opts.path"),a.appendIfPresent(`,host=${Array.isArray(u)?u[0]:u}`,"http-opts.headers.Host")}else throw new Error(`network ${t.network} is unsupported`);else a.append(",transport=tcp");a.appendIfPresent(`,over-tls=${t.tls}`,"tls"),a.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),r&&a.appendIfPresent(`,flow=${t.flow}`,"flow"),s?(a.appendIfPresent(`,sni=${t.sni}`,"sni"),a.appendIfPresent(`,public-key="${t["reality-opts"]["public-key"]}"`,"reality-opts.public-key"),a.appendIfPresent(`,short-id=${t["reality-opts"]["short-id"]}`,"reality-opts.short-id")):(a.appendIfPresent(`,tls-name=${t.sni}`,"sni"),a.appendIfPresent(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),a.appendIfPresent(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256")),a.appendIfPresent(`,fast-open=${t.tfo}`,"tfo"),t["block-quic"]==="on"?a.append(",block-quic=true"):t["block-quic"]==="off"&&a.append(",block-quic=false"),t.udp&&a.append(",udp=true");let o=ys[t["ip-version"]]||t["ip-version"];return a.appendIfPresent(`,ip-mode=${o}`,"ip-version"),a.toString()}function t6(t){let r=new bt(t),s=t.tls?"https":"http";r.append(`${t.name}=${s},${t.server},${t.port}`),r.appendIfPresent(`,${t.username}`,"username"),r.appendIfPresent(`,"${t.password}"`,"password"),r.appendIfPresent(`,sni=${t.sni}`,"sni"),r.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),r.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),t["block-quic"]==="on"?r.append(",block-quic=true"):t["block-quic"]==="off"&&r.append(",block-quic=false");let a=ys[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-mode=${a}`,"ip-version"),r.toString()}function r6(t){let r=new bt(t);r.append(`${t.name}=socks5,${t.server},${t.port}`),r.appendIfPresent(`,${t.username}`,"username"),r.appendIfPresent(`,"${t.password}"`,"password"),r.appendIfPresent(`,over-tls=${t.tls}`,"tls"),r.appendIfPresent(`,sni=${t.sni}`,"sni"),r.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),r.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),t["block-quic"]==="on"?r.append(",block-quic=true"):t["block-quic"]==="off"&&r.append(",block-quic=false"),t.udp&&r.append(",udp=true");let s=ys[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-mode=${s}`,"ip-version"),r.toString()}function n6(t){Array.isArray(t.peers)&&t.peers.length>0&&(t.server=t.peers[0].server,t.port=t.peers[0].port,t.ip=t.peers[0].ip,t.ipv6=t.peers[0].ipv6,t["public-key"]=t.peers[0]["public-key"],t["preshared-key"]=t.peers[0]["pre-shared-key"],t["allowed-ips"]=t.peers[0]["allowed-ips"],t.reserved=t.peers[0].reserved);let r=new bt(t);if(r.append(`${t.name}=wireguard`),r.appendIfPresent(`,interface-ip=${t.ip}`,"ip"),r.appendIfPresent(`,interface-ipv6=${t.ipv6}`,"ipv6"),r.appendIfPresent(`,private-key="${t["private-key"]}"`,"private-key"),r.appendIfPresent(`,mtu=${t.mtu}`,"mtu"),t.dns&&Array.isArray(t.dns)){t.dnsv6=t.dns.find(h=>Dn(h));let u=t.dns.find(h=>ri(h));u||(u=t.dns.find(h=>!ri(h)&&!Dn(h))),t.dns=u}r.appendIfPresent(`,dns=${t.dns}`,"dns"),r.appendIfPresent(`,dnsv6=${t.dnsv6}`,"dnsv6"),r.appendIfPresent(`,keepalive=${t["persistent-keepalive"]}`,"persistent-keepalive"),r.appendIfPresent(`,keepalive=${t.keepalive}`,"keepalive");let s=Array.isArray(t["allowed-ips"])?t["allowed-ips"].join(","):t["allowed-ips"],a=Array.isArray(t.reserved)?t.reserved.join(","):t.reserved;a&&(a=`,reserved=[${a}]`);let o=t["preshared-key"]??t["pre-shared-key"];o&&(o=`,preshared-key="${o}"`),r.append(`,peers=[{public-key="${t["public-key"]}",allowed-ips="${s??"0.0.0.0/0,::/0"}",endpoint=${t.server}:${t.port}${a??""}${o??""}}]`);let c=ys[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-mode=${c}`,"ip-version"),t["block-quic"]==="on"?r.append(",block-quic=true"):t["block-quic"]==="off"&&r.append(",block-quic=false"),r.toString()}function i6(t){if(t["obfs-password"]&&t.obfs!="salamander")throw new Error("only salamander obfs is supported");let r=new bt(t);r.append(`${t.name}=Hysteria2,${t.server},${t.port}`),r.appendIfPresent(`,"${t.password}"`,"password"),r.appendIfPresent(`,tls-name=${t.sni}`,"sni"),r.appendIfPresent(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),r.appendIfPresent(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),r.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),t["obfs-password"]&&t.obfs=="salamander"&&r.append(`,salamander-password=${t["obfs-password"]}`),r.appendIfPresent(`,fast-open=${t.tfo}`,"tfo"),t["block-quic"]==="on"?r.append(",block-quic=true"):t["block-quic"]==="off"&&r.append(",block-quic=false"),t.udp&&r.append(",udp=true"),r.appendIfPresent(`,download-bandwidth=${`${t.down}`.match(/\d+/)?.[0]||0}`,"down"),r.appendIfPresent(`,ecn=${t.ecn}`,"ecn");let s=ys[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-mode=${s}`,"ip-version"),r.toString()}function Wv(t){let r="none",s=t["reality-opts"],a="",o="",c="";if(s){r="reality";let F=t["reality-opts"]?.["public-key"];F&&(o=`&pbk=${encodeURIComponent(F)}`);let $=t["reality-opts"]?.["short-id"];$&&(a=`&sid=${encodeURIComponent($)}`);let k=t["reality-opts"]?.["_spider-x"];k&&(c=`&spx=${encodeURIComponent(k)}`)}else t.tls&&(r="tls");let u="";t.alpn&&(u=`&alpn=${encodeURIComponent(Array.isArray(t.alpn)?t.alpn:t.alpn.join(","))}`);let h="";t["skip-cert-verify"]&&(h="&allowInsecure=1");let d="";t.sni&&(d=`&sni=${encodeURIComponent(t.sni)}`);let f="";t["client-fingerprint"]&&(f=`&fp=${encodeURIComponent(t["client-fingerprint"])}`);let b="";t.flow&&(b=`&flow=${encodeURIComponent(t.flow)}`);let A="";t._extra&&(A=`&extra=${encodeURIComponent(t._extra)}`);let g="";t._mode&&(g=`&mode=${encodeURIComponent(t._mode)}`);let v=t.network;t.network==="ws"&&t["ws-opts"]?.["v2ray-http-upgrade"]&&(v="httpupgrade");let y=`&type=${encodeURIComponent(v)}`;if(["grpc"].includes(t.network)){y+=`&mode=${encodeURIComponent(t[`${t.network}-opts`]?.["_grpc-type"]||"gun")}`;let F=t[`${t.network}-opts`]?.["_grpc-authority"];F&&(y+=`&authority=${encodeURIComponent(F)}`)}let m=t[`${t.network}-opts`]?.[`${t.network}-service-name`],D=t[`${t.network}-opts`]?.path,S=t[`${t.network}-opts`]?.headers?.Host;return D&&(y+=`&path=${encodeURIComponent(Array.isArray(D)?D[0]:D)}`),S&&(y+=`&host=${encodeURIComponent(Array.isArray(S)?S[0]:S)}`),m&&(y+=`&serviceName=${encodeURIComponent(m)}`),t.network==="kcp"&&(t.seed&&(y+=`&seed=${encodeURIComponent(t.seed)}`),t.headerType&&(y+=`&headerType=${encodeURIComponent(t.headerType)}`)),`vless://${t.uuid}@${t.server}:${t.port}?security=${encodeURIComponent(r)}${y}${u}${h}${d}${f}${b}${a}${c}${o}${g}${A}#${encodeURIComponent(t.name)}`}function Du(){return{type:"SINGLE",produce:s=>{let a="";delete s.subName,delete s.collectionName,delete s.id,delete s.resolved,delete s["no-resolve"];for(let o in s)s[o]==null&&delete s[o];switch(["trojan","tuic","hysteria","hysteria2","juicity"].includes(s.type)&&delete s.tls,!["vmess"].includes(s.type)&&s.server&&Dn(s.server)&&(s.server=`[${s.server}]`),s.type){case"socks5":a=`socks://${encodeURIComponent(Lt.encode(`${s.username??""}:${s.password??""}`))}@${s.server}:${s.port}#${s.name}`;break;case"ss":let o=`${s.cipher}:${s.password}`;if(a=`ss://${s.cipher?.startsWith("2022-blake3-")?`${encodeURIComponent(s.cipher)}:${encodeURIComponent(s.password)}`:Lt.encode(o)}@${s.server}:${s.port}${s.plugin?"/":""}`,s.plugin){a+="?plugin=";let x=s["plugin-opts"];switch(s.plugin){case"obfs":a+=encodeURIComponent(`simple-obfs;obfs=${x.mode}${x.host?";obfs-host="+x.host:""}`);break;case"v2ray-plugin":a+=encodeURIComponent(`v2ray-plugin;obfs=${x.mode}${x.host?";obfs-host"+x.host:""}${x.tls?";tls":""}`);break;case"shadow-tls":a+=encodeURIComponent(`shadow-tls;host=${x.host};password=${x.password};version=${x.version}`);break;default:throw new Error(`Unsupported plugin option: ${s.plugin}`)}}s["udp-over-tcp"]&&(a=`${a}${s.plugin?"&":"?"}uot=1`),s.tfo&&(a=`${a}${s.plugin||s["udp-over-tcp"]?"&":"?"}tfo=1`),a+=`#${encodeURIComponent(s.name)}`;break;case"ssr":a=`${s.server}:${s.port}:${s.protocol}:${s.cipher}:${s.obfs}:${Lt.encode(s.password)}/`,a+=`?remarks=${Lt.encode(s.name)}${s["obfs-param"]?"&obfsparam="+Lt.encode(s["obfs-param"]):""}${s["protocol-param"]?"&protocolparam="+Lt.encode(s["protocol-param"]):""}`,a="ssr://"+Lt.encode(a);break;case"vmess":let c="",u=s.network||"tcp";if(s.network==="http"?(u="tcp",c="http"):s.network==="ws"&&s["ws-opts"]?.["v2ray-http-upgrade"]&&(u="httpupgrade"),a={v:"2",ps:s.name,add:s.server,port:`${s.port}`,id:s.uuid,aid:`${s.alterId||0}`,scy:s.cipher,net:u,type:c,tls:s.tls?"tls":"",alpn:Array.isArray(s.alpn)?s.alpn.join(","):s.alpn,fp:s["client-fingerprint"]},s.tls&&s.sni&&(a.sni=s.sni),s.network){let x=s[`${s.network}-opts`]?.path,V=s[`${s.network}-opts`]?.headers?.Host;["grpc"].includes(s.network)?(a.path=s[`${s.network}-opts`]?.["grpc-service-name"],a.type=s[`${s.network}-opts`]?.["_grpc-type"]||"gun",a.host=s[`${s.network}-opts`]?.["_grpc-authority"]):["kcp","quic"].includes(s.network)?(a.type=s[`${s.network}-opts`]?.[`_${s.network}-type`]||"none",a.host=s[`${s.network}-opts`]?.[`_${s.network}-host`],a.path=s[`${s.network}-opts`]?.[`_${s.network}-path`]):(x&&(a.path=Array.isArray(x)?x[0]:x),V&&(a.host=Array.isArray(V)?V[0]:V))}a="vmess://"+Lt.encode(JSON.stringify(a));break;case"vless":a=Wv(s);break;case"trojan":let h="";if(s.network){let x=s.network;if(s.network==="ws"&&s["ws-opts"]?.["v2ray-http-upgrade"]&&(x="httpupgrade"),h=`&type=${encodeURIComponent(x)}`,["grpc"].includes(s.network)){let G=s[`${s.network}-opts`]?.[`${s.network}-service-name`],W=s[`${s.network}-opts`]?.["_grpc-authority"];G&&(h+=`&serviceName=${encodeURIComponent(G)}`),W&&(h+=`&authority=${encodeURIComponent(W)}`),h+=`&mode=${encodeURIComponent(s[`${s.network}-opts`]?.["_grpc-type"]||"gun")}`}let V=s[`${s.network}-opts`]?.path,Y=s[`${s.network}-opts`]?.headers?.Host;V&&(h+=`&path=${encodeURIComponent(Array.isArray(V)?V[0]:V)}`),Y&&(h+=`&host=${encodeURIComponent(Array.isArray(Y)?Y[0]:Y)}`)}let d="";s["client-fingerprint"]&&(d=`&fp=${encodeURIComponent(s["client-fingerprint"])}`);let f="";s.alpn&&(f=`&alpn=${encodeURIComponent(Array.isArray(s.alpn)?s.alpn:s.alpn.join(","))}`);let b=s["reality-opts"],A="",g="",v="",y="",m="",D="";if(b){y="&security=reality";let x=s["reality-opts"]?.["public-key"];x&&(g=`&pbk=${encodeURIComponent(x)}`);let V=s["reality-opts"]?.["short-id"];V&&(A=`&sid=${encodeURIComponent(V)}`);let Y=s["reality-opts"]?.["_spider-x"];Y&&(v=`&spx=${encodeURIComponent(Y)}`),s._extra&&(D=`&extra=${encodeURIComponent(s._extra)}`),s._mode&&(m=`&mode=${encodeURIComponent(s._mode)}`)}a=`trojan://${s.password}@${s.server}:${s.port}?sni=${encodeURIComponent(s.sni||s.server)}${s["skip-cert-verify"]?"&allowInsecure=1":""}${h}${f}${d}${y}${A}${g}${v}${m}${D}#${encodeURIComponent(s.name)}`;break;case"hysteria2":let S=[];s["hop-interval"]&&S.push(`hop-interval=${s["hop-interval"]}`),s.keepalive&&S.push(`keepalive=${s.keepalive}`),s["skip-cert-verify"]&&S.push("insecure=1"),s.obfs&&(S.push(`obfs=${encodeURIComponent(s.obfs)}`),s["obfs-password"]&&S.push(`obfs-password=${encodeURIComponent(s["obfs-password"])}`)),s.sni&&S.push(`sni=${encodeURIComponent(s.sni)}`),s.ports&&S.push(`mport=${s.ports}`),s["tls-fingerprint"]&&S.push(`pinSHA256=${encodeURIComponent(s["tls-fingerprint"])}`),s.tfo&&S.push("fastopen=1"),a=`hysteria2://${encodeURIComponent(s.password)}@${s.server}:${s.port}?${S.join("&")}#${encodeURIComponent(s.name)}`;break;case"hysteria":let F=[];Object.keys(s).forEach(x=>{if(!["name","type","server","port"].includes(x)){let V=x.replace(/-/,"_");["alpn"].includes(x)?s[x]&&F.push(`${V}=${encodeURIComponent(Array.isArray(s[x])?s[x][0]:s[x])}`):["skip-cert-verify"].includes(x)?s[x]&&F.push("insecure=1"):["tfo","fast-open"].includes(x)?s[x]&&!F.includes("fastopen=1")&&F.push("fastopen=1"):["ports"].includes(x)?F.push(`mport=${s[x]}`):["auth-str"].includes(x)?F.push(`auth=${s[x]}`):["up"].includes(x)?F.push(`upmbps=${s[x]}`):["down"].includes(x)?F.push(`downmbps=${s[x]}`):["_obfs"].includes(x)?F.push(`obfs=${s[x]}`):["obfs"].includes(x)?F.push(`obfsParam=${s[x]}`):["sni"].includes(x)?F.push(`peer=${s[x]}`):s[x]&&!/^_/i.test(x)&&F.push(`${V}=${encodeURIComponent(s[x])}`)}}),a=`hysteria://${s.server}:${s.port}?${F.join("&")}#${encodeURIComponent(s.name)}`;break;case"tuic":if(!s.token||s.token.length===0){let x=[];Object.keys(s).forEach(V=>{if(!["name","type","uuid","password","server","port","tls"].includes(V)){let Y=V.replace(/-/,"_");["alpn"].includes(V)?s[V]&&x.push(`${Y}=${encodeURIComponent(Array.isArray(s[V])?s[V][0]:s[V])}`):["skip-cert-verify"].includes(V)?s[V]&&x.push("allow_insecure=1"):["tfo","fast-open"].includes(V)?s[V]&&!x.includes("fast_open=1")&&x.push("fast_open=1"):["disable-sni","reduce-rtt"].includes(V)&&s[V]?x.push(`${Y.replace(/-/g,"_")}=1`):["congestion-controller"].includes(V)?x.push(`congestion_control=${s[V]}`):s[V]&&!/^_/i.test(V)&&x.push(`${Y.replace(/-/g,"_")}=${encodeURIComponent(s[V])}`)}}),a=`tuic://${encodeURIComponent(s.uuid)}:${encodeURIComponent(s.password)}@${s.server}:${s.port}?${x.join("&")}#${encodeURIComponent(s.name)}`}break;case"anytls":a=Wv({...s,uuid:s.password,network:s.network||"tcp"}).replace("vless","anytls");let $=[];Object.keys(s).forEach(x=>{if(!["name","type","password","server","port","tls"].includes(x)){let V=x.replace(/-/,"_");["alpn"].includes(x)?s[x]&&$.push(`${V}=${encodeURIComponent(Array.isArray(s[x])?s[x][0]:s[x])}`):["skip-cert-verify"].includes(x)?s[x]&&$.push("insecure=1"):["udp"].includes(x)?s[x]&&$.push("udp=1"):s[x]&&!/^_|client-fingerprint/i.test(x)&&["number","string","boolean"].includes(typeof s[x])&&$.push(`${V.replace(/-/g,"_")}=${encodeURIComponent(s[x])}`)}});let k=a.split("?"),O=k[0],z={};k.length>1&&k[1].split("#")[0].split("&").forEach(Y=>{let[G,W]=Y.split("=");G&&(z[G]=W)}),$.forEach(x=>{let[V,Y]=x.split("=");V&&(z[V]=Y)});let H=Object.keys(z).map(x=>`${x}=${z[x]}`).join("&"),P=a.match(/#(.*)$/),R=P?`#${P[1]}`:"";a=`${O}?${H}${R}`;break;case"wireguard":let N=[];Object.keys(s).forEach(x=>{["name","type","server","port","ip","ipv6","private-key"].includes(x)||(["public-key"].includes(x)?N.push(`publickey=${s[x]}`):["udp"].includes(x)?s[x]&&N.push(`${x}=1`):s[x]&&!/^_/i.test(x)&&N.push(`${x}=${encodeURIComponent(s[x])}`))}),s.ip&&s.ipv6?N.push(`address=${s.ip}/32,${s.ipv6}/128`):s.ip?N.push(`address=${s.ip}/32`):s.ipv6&&N.push(`address=${s.ipv6}/128`),a=`wireguard://${encodeURIComponent(s["private-key"])}@${s.server}:${s.port}/?${N.join("&")}#${encodeURIComponent(s.name)}`;break}return a}}}var s6=Du();function Co(){return{type:"ALL",produce:s=>{let a=[];return s.map(o=>{try{a.push(s6.produce(o))}catch(c){$t.error(`Cannot produce proxy: ${JSON.stringify(o,null,2)}
Reason: ${c}`)}}),Lt.encode(a.join(`
`))}}}var a6="QX";function Io(){return{produce:(r,s,a={})=>{switch(r.type){case"ss":return u6(r);case"ssr":return o6(r);case"trojan":return c6(r);case"vmess":return l6(r);case"http":return h6(r);case"socks5":return p6(r);case"vless":return f6(r)}throw new Error(`Platform ${a6} does not support proxy type: ${r.type}`)}}}function u6(t){let r=new bt(t),s=r.append.bind(r),a=r.appendIfPresent.bind(r);if(t.cipher||(t.cipher="none"),!["none","rc4-md5","rc4-md5-6","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","cast5-cfb","des-cfb","rc2-cfb","salsa20","chacha20","chacha20-ietf","aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(t.cipher))throw new Error(`cipher ${t.cipher} is not supported`);if(s(`shadowsocks=${t.server}:${t.port}`),s(`,method=${t.cipher}`),s(`,password=${t.password}`),ii(t)&&(t.tls=!0),ce(t,"plugin")){if(t.plugin==="obfs"){let o=t["plugin-opts"];s(`,obfs=${o.mode}`)}else if(t.plugin==="v2ray-plugin"&&t["plugin-opts"].mode==="websocket")t["plugin-opts"].tls?s(",obfs=wss"):s(",obfs=ws");else throw new Error("plugin is not supported");a(`,obfs-host=${t["plugin-opts"].host}`,"plugin-opts.host"),a(`,obfs-uri=${t["plugin-opts"].path}`,"plugin-opts.path")}return ii(t)&&(a(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),a(`,tls-alpn=${t["tls-alpn"]}`,"tls-alpn"),a(`,tls-no-session-ticket=${t["tls-no-session-ticket"]}`,"tls-no-session-ticket"),a(`,tls-no-session-reuse=${t["tls-no-session-reuse"]}`,"tls-no-session-reuse"),a(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),a(`,tls-verification=${!t["skip-cert-verify"]}`,"skip-cert-verify"),a(`,tls-host=${t.sni}`,"sni")),a(`,fast-open=${t.tfo}`,"tfo"),a(`,udp-relay=${t.udp}`,"udp"),t._ssr_python_uot?s(",udp-over-tcp=true"):t["udp-over-tcp"]&&(!t["udp-over-tcp-version"]||t["udp-over-tcp-version"]===1?s(",udp-over-tcp=sp.v1"):t["udp-over-tcp-version"]===2&&s(",udp-over-tcp=sp.v2")),r.appendIfPresent(`,server_check_url=${t["test-url"]}`,"test-url"),s(`,tag=${t.name}`),r.toString()}function o6(t){let r=new bt(t),s=r.append.bind(r),a=r.appendIfPresent.bind(r);return s(`shadowsocks=${t.server}:${t.port}`),s(`,method=${t.cipher}`),s(`,password=${t.password}`),s(`,ssr-protocol=${t.protocol}`),a(`,ssr-protocol-param=${t["protocol-param"]}`,"protocol-param"),a(`,obfs=${t.obfs}`,"obfs"),a(`,obfs-host=${t["obfs-param"]}`,"obfs-param"),a(`,fast-open=${t.tfo}`,"tfo"),a(`,udp-relay=${t.udp}`,"udp"),r.appendIfPresent(`,server_check_url=${t["test-url"]}`,"test-url"),s(`,tag=${t.name}`),r.toString()}function c6(t){let r=new bt(t),s=r.append.bind(r),a=r.appendIfPresent.bind(r);if(s(`trojan=${t.server}:${t.port}`),s(`,password=${t.password}`),ce(t,"network"))if(t.network==="ws")ii(t)?s(",obfs=wss"):s(",obfs=ws"),a(`,obfs-uri=${t["ws-opts"]?.path}`,"ws-opts.path"),a(`,obfs-host=${t["ws-opts"]?.headers?.Host}`,"ws-opts.headers.Host");else throw new Error(`network ${t.network} is unsupported`);return t.network!=="ws"&&ii(t)&&s(",over-tls=true"),ii(t)&&(a(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),a(`,tls-alpn=${t["tls-alpn"]}`,"tls-alpn"),a(`,tls-no-session-ticket=${t["tls-no-session-ticket"]}`,"tls-no-session-ticket"),a(`,tls-no-session-reuse=${t["tls-no-session-reuse"]}`,"tls-no-session-reuse"),a(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),a(`,tls-verification=${!t["skip-cert-verify"]}`,"skip-cert-verify"),a(`,tls-host=${t.sni}`,"sni")),a(`,fast-open=${t.tfo}`,"tfo"),a(`,udp-relay=${t.udp}`,"udp"),r.appendIfPresent(`,server_check_url=${t["test-url"]}`,"test-url"),s(`,tag=${t.name}`),r.toString()}function l6(t){let r=new bt(t),s=r.append.bind(r),a=r.appendIfPresent.bind(r);s(`vmess=${t.server}:${t.port}`);let o;if(t.cipher==="auto"?o="chacha20-ietf-poly1305":o=t.cipher,s(`,method=${o}`),s(`,password=${t.uuid}`),ii(t)&&(t.tls=!0),ce(t,"network")){if(t.network==="ws")t.tls?s(",obfs=wss"):s(",obfs=ws");else if(t.network==="http")s(",obfs=http");else throw new Error(`network ${t.network} is unsupported`);let c=t[`${t.network}-opts`]?.path,u=t[`${t.network}-opts`]?.headers?.Host;a(`,obfs-uri=${Array.isArray(c)?c[0]:c}`,`${t.network}-opts.path`),a(`,obfs-host=${Array.isArray(u)?u[0]:u}`,`${t.network}-opts.headers.Host`)}else t.tls&&s(",obfs=over-tls");return ii(t)&&(a(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),a(`,tls-alpn=${t["tls-alpn"]}`,"tls-alpn"),a(`,tls-no-session-ticket=${t["tls-no-session-ticket"]}`,"tls-no-session-ticket"),a(`,tls-no-session-reuse=${t["tls-no-session-reuse"]}`,"tls-no-session-reuse"),a(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),a(`,tls-verification=${!t["skip-cert-verify"]}`,"skip-cert-verify"),a(`,tls-host=${t.sni}`,"sni")),ce(t,"aead")?s(`,aead=${t.aead}`):s(`,aead=${t.alterId===0}`),a(`,fast-open=${t.tfo}`,"tfo"),a(`,udp-relay=${t.udp}`,"udp"),r.appendIfPresent(`,server_check_url=${t["test-url"]}`,"test-url"),s(`,tag=${t.name}`),r.toString()}function f6(t){if(typeof t.flow<"u"||t["reality-opts"])throw new Error("VLESS XTLS/REALITY is not supported");let r=new bt(t),s=r.append.bind(r),a=r.appendIfPresent.bind(r);if(s(`vless=${t.server}:${t.port}`),s(",method=none"),s(`,password=${t.uuid}`),ii(t)&&(t.tls=!0),ce(t,"network")){if(t.network==="ws")t.tls?s(",obfs=wss"):s(",obfs=ws");else if(t.network==="http")s(",obfs=http");else if(["tcp"].includes(t.network))t.tls&&s(",obfs=over-tls");else if(!["tcp"].includes(t.network))throw new Error(`network ${t.network} is unsupported`);let c=t[`${t.network}-opts`]?.path,u=t[`${t.network}-opts`]?.headers?.Host;a(`,obfs-uri=${Array.isArray(c)?c[0]:c}`,`${t.network}-opts.path`),a(`,obfs-host=${Array.isArray(u)?u[0]:u}`,`${t.network}-opts.headers.Host`)}else t.tls&&s(",obfs=over-tls");return ii(t)&&(a(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),a(`,tls-alpn=${t["tls-alpn"]}`,"tls-alpn"),a(`,tls-no-session-ticket=${t["tls-no-session-ticket"]}`,"tls-no-session-ticket"),a(`,tls-no-session-reuse=${t["tls-no-session-reuse"]}`,"tls-no-session-reuse"),a(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),a(`,tls-verification=${!t["skip-cert-verify"]}`,"skip-cert-verify"),a(`,tls-host=${t.sni}`,"sni")),a(`,fast-open=${t.tfo}`,"tfo"),a(`,udp-relay=${t.udp}`,"udp"),r.appendIfPresent(`,server_check_url=${t["test-url"]}`,"test-url"),s(`,tag=${t.name}`),r.toString()}function h6(t){let r=new bt(t),s=r.append.bind(r),a=r.appendIfPresent.bind(r);return s(`http=${t.server}:${t.port}`),a(`,username=${t.username}`,"username"),a(`,password=${t.password}`,"password"),ii(t)&&(t.tls=!0),a(`,over-tls=${t.tls}`,"tls"),ii(t)&&(a(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),a(`,tls-alpn=${t["tls-alpn"]}`,"tls-alpn"),a(`,tls-no-session-ticket=${t["tls-no-session-ticket"]}`,"tls-no-session-ticket"),a(`,tls-no-session-reuse=${t["tls-no-session-reuse"]}`,"tls-no-session-reuse"),a(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),a(`,tls-verification=${!t["skip-cert-verify"]}`,"skip-cert-verify"),a(`,tls-host=${t.sni}`,"sni")),a(`,fast-open=${t.tfo}`,"tfo"),a(`,udp-relay=${t.udp}`,"udp"),r.appendIfPresent(`,server_check_url=${t["test-url"]}`,"test-url"),s(`,tag=${t.name}`),r.toString()}function p6(t){let r=new bt(t),s=r.append.bind(r),a=r.appendIfPresent.bind(r);return s(`socks5=${t.server}:${t.port}`),a(`,username=${t.username}`,"username"),a(`,password=${t.password}`,"password"),ii(t)&&(t.tls=!0),a(`,over-tls=${t.tls}`,"tls"),ii(t)&&(a(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),a(`,tls-alpn=${t["tls-alpn"]}`,"tls-alpn"),a(`,tls-no-session-ticket=${t["tls-no-session-ticket"]}`,"tls-no-session-ticket"),a(`,tls-no-session-reuse=${t["tls-no-session-reuse"]}`,"tls-no-session-reuse"),a(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),a(`,tls-verification=${!t["skip-cert-verify"]}`,"skip-cert-verify"),a(`,tls-host=${t.sni}`,"sni")),a(`,fast-open=${t.tfo}`,"tfo"),a(`,udp-relay=${t.udp}`,"udp"),r.appendIfPresent(`,server_check_url=${t["test-url"]}`,"test-url"),s(`,tag=${t.name}`),r.toString()}function ii(t){return t.tls}function Po(){return{type:"ALL",produce:(s,a,o={})=>{let c=s.filter(u=>o["include-unsupported-proxy"]?!0:u.type==="snell"&&u.version>=4?!1:!["mieru"].includes(u.type)).map(u=>{if(u.type==="vmess")ce(u,"aead")&&(u.aead&&(u.alterId=0),delete u.aead),ce(u,"sni")&&(u.servername=u.sni,delete u.sni),ce(u,"cipher")&&!["auto","none","zero","aes-128-gcm","chacha20-poly1305"].includes(u.cipher)&&(u.cipher="auto");else if(u.type==="tuic")ce(u,"alpn")?u.alpn=Array.isArray(u.alpn)?u.alpn:[u.alpn]:u.alpn=["h3"],ce(u,"tfo")&&!ce(u,"fast-open")&&(u["fast-open"]=u.tfo),(!u.token||u.token.length===0)&&!ce(u,"version")&&(u.version=5);else if(u.type==="hysteria")ce(u,"auth_str")&&!ce(u,"auth-str")&&(u["auth-str"]=u.auth_str),ce(u,"alpn")&&(u.alpn=Array.isArray(u.alpn)?u.alpn:[u.alpn]),ce(u,"tfo")&&!ce(u,"fast-open")&&(u["fast-open"]=u.tfo);else if(u.type==="hysteria2")ce(u,"alpn")&&(u.alpn=Array.isArray(u.alpn)?u.alpn:[u.alpn]),ce(u,"tfo")&&!ce(u,"fast-open")&&(u["fast-open"]=u.tfo);else if(u.type==="wireguard")u.keepalive=u.keepalive??u["persistent-keepalive"],u["persistent-keepalive"]=u.keepalive,u["preshared-key"]=u["preshared-key"]??u["pre-shared-key"],u["pre-shared-key"]=u["preshared-key"];else if(u.type==="snell"&&u.version<3)delete u.udp;else if(u.type==="vless")ce(u,"sni")&&(u.servername=u.sni,delete u.sni);else if(u.type==="ss")ce(u,"shadow-tls-password")&&!ce(u,"plugin")&&(u.plugin="shadow-tls",u["plugin-opts"]={host:u["shadow-tls-sni"],password:u["shadow-tls-password"],version:u["shadow-tls-version"]},delete u["shadow-tls-password"],delete u["shadow-tls-sni"],delete u["shadow-tls-version"]);else if(["anytls"].includes(u.type)&&u.network&&(!["tcp"].includes(u.network)||["tcp"].includes(u.network)&&u["reality-opts"]))return!1;if(["vmess","vless"].includes(u.type)&&u.network==="http"){let h=u["http-opts"]?.path;ce(u,"http-opts.path")&&!Array.isArray(h)&&(u["http-opts"].path=[h]);let d=u["http-opts"]?.headers?.Host;ce(u,"http-opts.headers.Host")&&!Array.isArray(d)&&(u["http-opts"].headers.Host=[d])}if(["vmess","vless"].includes(u.type)&&u.network==="h2"){let h=u["h2-opts"]?.path;ce(u,"h2-opts.path")&&Array.isArray(h)&&(u["h2-opts"].path=h[0]);let d=u["h2-opts"]?.headers?.host;ce(u,"h2-opts.headers.Host")&&!Array.isArray(d)&&(u["h2-opts"].headers.host=[d])}if(["ws"].includes(u.network)){let h=u[`${u.network}-opts`]?.path;if(h){let d=/^(.*?)(?:\?ed=(\d+))?$/,[f,b="",A=""]=d.exec(h);u[`${u.network}-opts`].path=b,A!==""&&(u["ws-opts"]["early-data-header-name"]="Sec-WebSocket-Protocol",u["ws-opts"]["max-early-data"]=parseInt(A,10))}else u[`${u.network}-opts`]=u[`${u.network}-opts`]||{},u[`${u.network}-opts`].path="/"}if(u["plugin-opts"]?.tls&&ce(u,"skip-cert-verify")&&(u["plugin-opts"]["skip-cert-verify"]=u["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity","anytls"].includes(u.type)&&delete u.tls,u["tls-fingerprint"]&&(u.fingerprint=u["tls-fingerprint"]),delete u["tls-fingerprint"],u["underlying-proxy"]&&(u["dialer-proxy"]=u["underlying-proxy"]),delete u["underlying-proxy"],ce(u,"tls")&&typeof u.tls!="boolean"&&delete u.tls,delete u.subName,delete u.collectionName,delete u.id,delete u.resolved,delete u["no-resolve"],a!=="internal")for(let h in u)(u[h]==null||/^_/i.test(h))&&delete u[h];return["grpc"].includes(u.network)&&u[`${u.network}-opts`]&&(delete u[`${u.network}-opts`]["_grpc-type"],delete u[`${u.network}-opts`]["_grpc-authority"]),u});return a==="internal"?c:`proxies:
`+c.map(u=>"  - "+JSON.stringify(u)+`
`).join("")}}}var d6="Surfboard";function Fl(){return{produce:r=>{switch(r.name=r.name.replace(/=|,/g,""),r.type){case"ss":return g6(r);case"trojan":return v6(r);case"vmess":return m6(r);case"http":return w6(r);case"socks5":return b6(r);case"wireguard-surge":return _6(r)}throw new Error(`Platform ${d6} does not support proxy type: ${r.type}`)}}}function g6(t){let r=new bt(t);if(r.append(`${t.name}=${t.type},${t.server},${t.port}`),!["aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","salsa20","chacha20","chacha20-ietf"].includes(t.cipher))throw new Error(`cipher ${t.cipher} is not supported`);if(r.append(`,encrypt-method=${t.cipher}`),r.appendIfPresent(`,password=${t.password}`,"password"),ce(t,"plugin"))if(t.plugin==="obfs")r.append(`,obfs=${t["plugin-opts"].mode}`),r.appendIfPresent(`,obfs-host=${t["plugin-opts"].host}`,"plugin-opts.host"),r.appendIfPresent(`,obfs-uri=${t["plugin-opts"].path}`,"plugin-opts.path");else throw new Error(`plugin ${t.plugin} is not supported`);return r.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),r.toString()}function v6(t){let r=new bt(t);return r.append(`${t.name}=${t.type},${t.server},${t.port}`),r.appendIfPresent(`,password=${t.password}`,"password"),Yv(r,t),r.appendIfPresent(`,tls=${t.tls}`,"tls"),r.appendIfPresent(`,sni=${t.sni}`,"sni"),r.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),r.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),r.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),r.toString()}function m6(t){let r=new bt(t);return r.append(`${t.name}=${t.type},${t.server},${t.port}`),r.appendIfPresent(`,username=${t.uuid}`,"uuid"),Yv(r,t),ce(t,"aead")?r.append(`,vmess-aead=${t.aead}`):r.append(`,vmess-aead=${t.alterId===0}`),r.appendIfPresent(`,tls=${t.tls}`,"tls"),r.appendIfPresent(`,sni=${t.sni}`,"sni"),r.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),r.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),r.toString()}function w6(t){let r=new bt(t),s=t.tls?"https":"http";return r.append(`${t.name}=${s},${t.server},${t.port}`),r.appendIfPresent(`,${t.username}`,"username"),r.appendIfPresent(`,${t.password}`,"password"),r.appendIfPresent(`,sni=${t.sni}`,"sni"),r.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),r.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),r.toString()}function b6(t){let r=new bt(t),s=t.tls?"socks5-tls":"socks5";return r.append(`${t.name}=${s},${t.server},${t.port}`),r.appendIfPresent(`,${t.username}`,"username"),r.appendIfPresent(`,${t.password}`,"password"),r.appendIfPresent(`,sni=${t.sni}`,"sni"),r.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),r.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),r.toString()}function _6(t){let r=new bt(t);return r.append(`${t.name}=wireguard`),r.appendIfPresent(`,section-name=${t["section-name"]}`,"section-name"),r.toString()}function Yv(t,r){if(ce(r,"network"))if(r.network==="ws"){if(t.append(",ws=true"),ce(r,"ws-opts")&&(t.appendIfPresent(`,ws-path=${r["ws-opts"].path}`,"ws-opts.path"),ce(r,"ws-opts.headers"))){let s=r["ws-opts"].headers,a=Object.keys(s).map(o=>{let c=s[o];return["Host"].includes(o)&&(c=`"${c}"`),`${o}:${c}`}).join("|");zi(a)&&t.append(`,ws-headers=${a}`)}}else throw new Error(`network ${r.network} is unsupported`)}var E6={ipv4:"ipv4_only",ipv6:"ipv6_only","v4-only":"ipv4_only","v6-only":"ipv6_only","ipv4-prefer":"prefer_ipv4","ipv6-prefer":"prefer_ipv6","prefer-v4":"prefer_ipv4","prefer-v6":"prefer_ipv6"},Mn=(t,r)=>{let s=E6[t["ip-version"]];t._dns_server&&s&&(r.domain_resolver={server:t._dns_server,strategy:s})},qn=(t,r)=>{r.detour=t["dialer-proxy"]||t.detour},Wi=(t,r)=>{["tcp","udp"].includes(t._network)&&(r.network=t._network)},si=(t,r)=>{r.tcp_fast_open=!1,t.tfo&&(r.tcp_fast_open=!0),t.tcp_fast_open&&(r.tcp_fast_open=!0),t["tcp-fast-open"]&&(r.tcp_fast_open=!0),r.tcp_fast_open||delete r.tcp_fast_open},Yi=(t,r)=>{!t||!t.enabled||(r.multiplex={enabled:!0},r.multiplex.protocol=t.protocol,t["max-connections"]&&(r.multiplex.max_connections=parseInt(`${t["max-connections"]}`,10)),t["max-streams"]&&(r.multiplex.max_streams=parseInt(`${t["max-streams"]}`,10)),t["min-streams"]&&(r.multiplex.min_streams=parseInt(`${t["min-streams"]}`,10)),t.padding&&(r.multiplex.padding=!0),(t["brutal-opts"]?.up||t["brutal-opts"]?.down)&&(r.multiplex.brutal={enabled:!0},t["brutal-opts"]?.up&&(r.multiplex.brutal.up_mbps=parseInt(`${t["brutal-opts"]?.up}`,10)),t["brutal-opts"]?.down&&(r.multiplex.brutal.down_mbps=parseInt(`${t["brutal-opts"]?.down}`,10))))},Dp=(t,r)=>{let s={type:"ws",headers:{}};if(t["ws-opts"]){let{path:a="",headers:o={},"max-early-data":c,"early-data-header-name":u}=t["ws-opts"];if(s.early_data_header_name=u,s.max_early_data=parseInt(c,10),a!==""&&(s.path=`${a}`),Object.keys(o).length>0){let h={};for(let f of Object.keys(o)){let b=o[f];b!==""&&(Array.isArray(b)||(b=[`${b}`]),b.length>0&&(h[f]=b))}let{Host:d}=h;if(d.length===1)for(let f of`Host:${d[0]}`.split(`
`)){let[b,A]=f.split(":");A.trim()!==""&&(h[b.trim()]=A.trim().split(","))}s.headers=h}}if(t["ws-headers"]){let a={};for(let c of Object.keys(t["ws-headers"])){let u=t["ws-headers"][c];u!==""&&(Array.isArray(u)||(u=[`${u}`]),u.length>0&&(a[c]=u))}let{Host:o}=a;if(o.length===1)for(let c of`Host:${o[0]}`.split(`
`)){let[u,h]=c.split(":");h.trim()!==""&&(a[u.trim()]=h.trim().split(","))}for(let c of Object.keys(a))s.headers[c]=a[c]}if(t["ws-path"]&&t["ws-path"]!==""&&(s.path=`${t["ws-path"]}`),s.path){let a=/^(.*?)(?:\?ed=(\d+))?$/,[o,c="",u=""]=a.exec(s.path);s.path=c,u!==""&&(s.early_data_header_name="Sec-WebSocket-Protocol",s.max_early_data=parseInt(u,10))}r.tls.insecure&&(r.tls.server_name=s.headers.Host[0]),t["ws-opts"]&&t["ws-opts"]["v2ray-http-upgrade"]&&(s.type="httpupgrade",s.headers.Host&&(s.host=s.headers.Host[0],delete s.headers.Host),s.max_early_data&&delete s.max_early_data,s.early_data_header_name&&delete s.early_data_header_name);for(let a of Object.keys(s.headers)){let o=s.headers[a];o.length===1&&(s.headers[a]=o[0])}r.transport=s},Jv=(t,r)=>{let s={type:"http",headers:{}};if(t["http-opts"]){let{method:a="",path:o="",headers:c={}}=t["http-opts"];a!==""&&(s.method=a),Array.isArray(o)?s.path=`${o[0]}`:o!==""&&(s.path=`${o}`);for(let u of Object.keys(c)){let h=c[u];if(h!==""){if(u.toLowerCase()==="host"){let d=h;Array.isArray(d)||(d=`${d}`.split(",").map(f=>f.trim())),d.length>0&&(s.host=d);continue}Array.isArray(h)||(h=`${h}`.split(",").map(d=>d.trim())),h.length>0&&(s.headers[u]=h)}}}if(t["http-host"]&&t["http-host"]!==""){let a=t["http-host"];Array.isArray(a)||(a=`${a}`.split(",").map(o=>o.trim())),a.length>0&&(s.host=a)}if(t["http-path"]&&t["http-path"]!==""){let a=t["http-path"];Array.isArray(a)?s.path=`${a[0]}`:a!==""&&(s.path=`${a}`)}r.tls.insecure&&(r.tls.server_name=s.host[0]),s.host?.length===1&&(s.host=s.host[0]);for(let a of Object.keys(s.headers)){let o=s.headers[a];o.length===1&&(s.headers[a]=o[0])}r.transport=s},Xv=(t,r)=>{let s={type:"http"};if(t["h2-opts"]){let{host:a="",path:o=""}=t["h2-opts"];o!==""&&(s.path=`${o}`),a!==""&&(Array.isArray(a)||(a=`${a}`.split(",").map(c=>c.trim())),a.length>0&&(s.host=a))}if(t["h2-host"]&&t["h2-host"]!==""){let a=t["h2-host"];Array.isArray(a)||(a=`${a}`.split(",").map(o=>o.trim())),a.length>0&&(s.host=a)}t["h2-path"]&&t["h2-path"]!==""&&(s.path=`${t["h2-path"]}`),r.tls.enabled=!0,r.tls.insecure&&(r.tls.server_name=s.host[0]),s.host.length===1&&(s.host=s.host[0]),r.transport=s},Fp=(t,r)=>{let s={type:"grpc"};if(t["grpc-opts"]){let a=t["grpc-opts"]["grpc-service-name"];a!=null&&a!==""&&(s.service_name=`${a}`)}r.transport=s},Ws=(t,r)=>{t.tls&&(r.tls.enabled=!0),t.servername&&t.servername!==""&&(r.tls.server_name=t.servername),t.peer&&t.peer!==""&&(r.tls.server_name=t.peer),t.sni&&t.sni!==""&&(r.tls.server_name=t.sni),t["skip-cert-verify"]&&(r.tls.insecure=!0),t.insecure&&(r.tls.insecure=!0),t["disable-sni"]&&(r.tls.disable_sni=!0),typeof t.alpn=="string"?r.tls.alpn=[t.alpn]:Array.isArray(t.alpn)&&(r.tls.alpn=t.alpn),t.ca&&(r.tls.certificate_path=`${t.ca}`),t.ca_str&&(r.tls.certificate=[t.ca_str]),t["ca-str"]&&(r.tls.certificate=[t["ca-str"]]),t["reality-opts"]&&(r.tls.reality={enabled:!0},t["reality-opts"]["public-key"]&&(r.tls.reality.public_key=t["reality-opts"]["public-key"]),t["reality-opts"]["short-id"]&&(r.tls.reality.short_id=t["reality-opts"]["short-id"]),r.tls.utls={enabled:!0}),!["hysteria","hysteria2","tuic"].includes(t.type)&&t["client-fingerprint"]&&t["client-fingerprint"]!==""&&(r.tls.utls={enabled:!0,fingerprint:t["client-fingerprint"]}),r.tls.enabled||delete r.tls},A6=(t={})=>{let r={tag:t.name,type:"ssh",server:t.server,server_port:parseInt(`${t.port}`,10)};if(r.server_port<0||r.server_port>65535)throw"invalid port";return t.username&&(r.user=t.username),t.password&&(r.password=t.password),t.privateKey&&(r.private_key_path=t.privateKey),t["private-key"]&&(r.private_key_path=t["private-key"]),t["private-key-passphrase"]&&(r.private_key_passphrase=t["private-key-passphrase"]),t["server-fingerprint"]&&(r.host_key=[t["server-fingerprint"]],r.host_key_algorithms=[t["server-fingerprint"].split(" ")[0]]),t["host-key"]&&(r.host_key=t["host-key"]),t["host-key-algorithms"]&&(r.host_key_algorithms=t["host-key-algorithms"]),t["fast-open"]&&(r.udp_fragment=!0),si(t,r),qn(t,r),Mn(t,r),r},y6=(t={})=>{let r={tag:t.name,type:"http",server:t.server,server_port:parseInt(`${t.port}`,10),tls:{enabled:!1,server_name:t.server,insecure:!1}};if(r.server_port<0||r.server_port>65535)throw"invalid port";if(t.username&&(r.username=t.username),t.password&&(r.password=t.password),t.headers){r.headers={};for(let s of Object.keys(t.headers))r.headers[s]=`${t.headers[s]}`;Object.keys(r.headers).length===0&&delete r.headers}return t["fast-open"]&&(r.udp_fragment=!0),si(t,r),qn(t,r),Ws(t,r),Mn(t,r),r},S6=(t={})=>{let r={tag:t.name,type:"socks",server:t.server,server_port:parseInt(`${t.port}`,10),password:t.password,version:"5"};if(r.server_port<0||r.server_port>65535)throw"invalid port";return t.username&&(r.username=t.username),t.password&&(r.password=t.password),t.uot&&(r.udp_over_tcp=!0),t["udp-over-tcp"]&&(r.udp_over_tcp=!0),t["fast-open"]&&(r.udp_fragment=!0),Wi(t,r),si(t,r),qn(t,r),Mn(t,r),r},D6=(t={})=>{let r={tag:t.name,type:"shadowsocks",method:t.cipher,password:t.password,detour:`${t.name}_shadowtls`};t.uot&&(r.udp_over_tcp=!0),t["udp-over-tcp"]&&(r.udp_over_tcp={enabled:!0,version:!t["udp-over-tcp-version"]||t["udp-over-tcp-version"]===1?1:2});let s={tag:`${t.name}_shadowtls`,type:"shadowtls",server:t.server,server_port:parseInt(`${t.port}`,10),version:t["plugin-opts"].version,password:t["plugin-opts"].password,tls:{enabled:!0,server_name:t["plugin-opts"].host,utls:{enabled:!0,fingerprint:t["client-fingerprint"]}}};if(s.server_port<0||s.server_port>65535)throw"\u7AEF\u53E3\u503C\u975E\u6CD5";return t["fast-open"]===!0&&(s.udp_fragment=!0),si(t,s),qn(t,s),Yi(t.smux,r),Mn(t,s),{type:"ss-with-st",ssPart:r,stPart:s}},F6=(t={})=>{let r={tag:t.name,type:"shadowsocks",server:t.server,server_port:parseInt(`${t.port}`,10),method:t.cipher,password:t.password};if(r.server_port<0||r.server_port>65535)throw"invalid port";if(t.uot&&(r.udp_over_tcp=!0),t["udp-over-tcp"]&&(r.udp_over_tcp={enabled:!0,version:!t["udp-over-tcp-version"]||t["udp-over-tcp-version"]===1?1:2}),t["fast-open"]&&(r.udp_fragment=!0),Wi(t,r),si(t,r),qn(t,r),Yi(t.smux,r),Mn(t,r),t.plugin){let s=[];t.plugin==="obfs"&&(r.plugin="obfs-local",r.plugin_opts="",t["obfs-host"]&&(t["plugin-opts"].host=t["obfs-host"]),Object.keys(t["plugin-opts"]).forEach(a=>{switch(a){case"mode":s.push(`obfs=${t["plugin-opts"].mode}`);break;case"host":s.push(`obfs-host=${t["plugin-opts"].host}`);break;default:s.push(`${a}=${t["plugin-opts"][a]}`);break}})),t.plugin==="v2ray-plugin"&&(r.plugin="v2ray-plugin",t["ws-host"]&&(t["plugin-opts"].host=t["ws-host"]),t["ws-path"]&&(t["plugin-opts"].path=t["ws-path"]),Object.keys(t["plugin-opts"]).forEach(a=>{switch(a){case"tls":t["plugin-opts"].tls&&s.push("tls");break;case"host":s.push(`host=${t["plugin-opts"].host}`);break;case"path":s.push(`path=${t["plugin-opts"].path}`);break;case"headers":s.push(`headers=${JSON.stringify(t["plugin-opts"].headers)}`);break;case"mux":t["plugin-opts"].mux&&(r.multiplex={enabled:!0});break;default:s.push(`${a}=${t["plugin-opts"][a]}`)}})),r.plugin_opts=s.join(";")}return r},C6=(t={})=>{let r={tag:t.name,type:"shadowsocksr",server:t.server,server_port:parseInt(`${t.port}`,10),method:t.cipher,password:t.password,obfs:t.obfs,protocol:t.protocol};if(r.server_port<0||r.server_port>65535)throw"invalid port";return t["obfs-param"]&&(r.obfs_param=t["obfs-param"]),t["protocol-param"]&&t["protocol-param"]!==""&&(r.protocol_param=t["protocol-param"]),t["fast-open"]&&(r.udp_fragment=!0),si(t,r),qn(t,r),Yi(t.smux,r),Mn(t,r),r},I6=(t={})=>{let r={tag:t.name,type:"vmess",server:t.server,server_port:parseInt(`${t.port}`,10),uuid:t.uuid,security:t.cipher,alter_id:parseInt(`${t.alterId}`,10),tls:{enabled:!1,server_name:t.server,insecure:!1}};if(["auto","none","zero","aes-128-gcm","chacha20-poly1305","aes-128-ctr"].indexOf(r.security)===-1&&(r.security="auto"),r.server_port<0||r.server_port>65535)throw"invalid port";return t.xudp&&(r.packet_encoding="xudp"),t["fast-open"]&&(r.udp_fragment=!0),t.network==="ws"&&Dp(t,r),t.network==="h2"&&Xv(t,r),t.network==="http"&&Jv(t,r),t.network==="grpc"&&Fp(t,r),Wi(t,r),si(t,r),qn(t,r),Ws(t,r),Yi(t.smux,r),Mn(t,r),r},P6=(t={})=>{let r={tag:t.name,type:"vless",server:t.server,server_port:parseInt(`${t.port}`,10),uuid:t.uuid,tls:{enabled:!1,server_name:t.server,insecure:!1}};if(r.server_port<0||r.server_port>65535)throw"invalid port";return t.xudp&&(r.packet_encoding="xudp"),t["fast-open"]&&(r.udp_fragment=!0),t.flow!=null&&(r.flow=t.flow),t.network==="ws"&&Dp(t,r),t.network==="h2"&&Xv(t,r),t.network==="http"&&Jv(t,r),t.network==="grpc"&&Fp(t,r),Wi(t,r),si(t,r),qn(t,r),Yi(t.smux,r),Ws(t,r),Mn(t,r),r},B6=(t={})=>{let r={tag:t.name,type:"trojan",server:t.server,server_port:parseInt(`${t.port}`,10),password:t.password,tls:{enabled:!0,server_name:t.server,insecure:!1}};if(r.server_port<0||r.server_port>65535)throw"invalid port";return t["fast-open"]&&(r.udp_fragment=!0),t.network==="grpc"&&Fp(t,r),t.network==="ws"&&Dp(t,r),Wi(t,r),si(t,r),qn(t,r),Ws(t,r),Yi(t.smux,r),Mn(t,r),r},R6=(t={})=>{let r={tag:t.name,type:"hysteria",server:t.server,server_port:parseInt(`${t.port}`,10),disable_mtu_discovery:!1,tls:{enabled:!0,server_name:t.server,insecure:!1}};if(r.server_port<0||r.server_port>65535)throw"invalid port";t.auth_str&&(r.auth_str=`${t.auth_str}`),t["auth-str"]&&(r.auth_str=`${t["auth-str"]}`),t["fast-open"]&&(r.udp_fragment=!0);let s=new RegExp("^[0-9]+[ 	]*[KMGT]*[Bb]ps$");return s.test(`${t.up}`)&&!`${t.up}`.endsWith("Mbps")?r.up=`${t.up}`:r.up_mbps=parseInt(`${t.up}`,10),s.test(`${t.down}`)&&!`${t.down}`.endsWith("Mbps")?r.down=`${t.down}`:r.down_mbps=parseInt(`${t.down}`,10),t.obfs&&(r.obfs=t.obfs),t.recv_window_conn&&(r.recv_window_conn=t.recv_window_conn),t["recv-window-conn"]&&(r.recv_window_conn=t["recv-window-conn"]),t.recv_window&&(r.recv_window=t.recv_window),t["recv-window"]&&(r.recv_window=t["recv-window"]),t.disable_mtu_discovery&&(typeof t.disable_mtu_discovery=="boolean"?r.disable_mtu_discovery=t.disable_mtu_discovery:t.disable_mtu_discovery===1&&(r.disable_mtu_discovery=!0)),Wi(t,r),Ws(t,r),qn(t,r),si(t,r),Yi(t.smux,r),Mn(t,r),r},$6=(t={})=>{let r={tag:t.name,type:"hysteria2",server:t.server,server_port:parseInt(`${t.port}`,10),password:t.password,obfs:{},tls:{enabled:!0,server_name:t.server,insecure:!1}};if(r.server_port<0||r.server_port>65535)throw"invalid port";return t["hop-interval"]&&(r.hop_interval=/^\d+$/.test(t["hop-interval"])?`${t["hop-interval"]}s`:t["hop-interval"]),t.ports&&(r.server_ports=t.ports.split(/\s*,\s*/).map(s=>s.replace(/\s*-\s*/g,":"))),t.up&&(r.up_mbps=parseInt(`${t.up}`,10)),t.down&&(r.down_mbps=parseInt(`${t.down}`,10)),t.obfs==="salamander"&&(r.obfs.type="salamander"),t["obfs-password"]&&(r.obfs.password=t["obfs-password"]),r.obfs.type||delete r.obfs,Wi(t,r),Ws(t,r),si(t,r),qn(t,r),Yi(t.smux,r),Mn(t,r),r},k6=(t={})=>{let r={tag:t.name,type:"tuic",server:t.server,server_port:parseInt(`${t.port}`,10),uuid:t.uuid,password:t.password,tls:{enabled:!0,server_name:t.server,insecure:!1}};if(r.server_port<0||r.server_port>65535)throw"invalid port";return t["fast-open"]&&(r.udp_fragment=!0),t["congestion-controller"]&&t["congestion-controller"]!=="cubic"&&(r.congestion_control=t["congestion-controller"]),t["udp-relay-mode"]&&t["udp-relay-mode"]!=="native"&&(r.udp_relay_mode=t["udp-relay-mode"]),t["reduce-rtt"]&&(r.zero_rtt_handshake=!0),t["udp-over-stream"]&&(r.udp_over_stream=!0),t["heartbeat-interval"]&&(r.heartbeat=`${t["heartbeat-interval"]}ms`),Wi(t,r),si(t,r),qn(t,r),Ws(t,r),Yi(t.smux,r),Mn(t,r),r},x6=(t={})=>{let r={tag:t.name,type:"anytls",server:t.server,server_port:parseInt(`${t.port}`,10),password:t.password,tls:{enabled:!0,server_name:t.server,insecure:!1}};return/^\d+$/.test(t["idle-session-check-interval"])&&(r.idle_session_check_interval=`${t["idle-session-check-interval"]}s`),/^\d+$/.test(t["idle-session-timeout"])&&(r.idle_session_timeout=`${t["idle-session-timeout"]}s`),/^\d+$/.test(t["min-idle-session"])&&(r.min_idle_session=parseInt(`${t["min-idle-session"]}`,10)),Wi(t,r),qn(t,r),Ws(t,r),Mn(t,r),r},T6=(t={})=>{let r=["ip","ipv6"].map(a=>t[a]).map(a=>{if(ri(a))return`${a}/32`;if(Dn(a))return`${a}/128`}).filter(a=>a),s={tag:t.name,type:"wireguard",server:t.server,server_port:parseInt(`${t.port}`,10),local_address:r,private_key:t["private-key"],peer_public_key:t["public-key"],pre_shared_key:t["pre-shared-key"],reserved:[]};if(s.server_port<0||s.server_port>65535)throw"invalid port";if(t["fast-open"]&&(s.udp_fragment=!0),typeof t.reserved=="string")s.reserved=t.reserved;else if(Array.isArray(t.reserved))for(let a of t.reserved)s.reserved.push(a);else delete s.reserved;if(t.peers&&t.peers.length>0){s.peers=[];for(let a of t.peers){let o={server:a.server,server_port:parseInt(`${a.port}`,10),public_key:a["public-key"],allowed_ips:a["allowed-ips"]||a.allowed_ips,reserved:[]};if(typeof a.reserved=="string")o.reserved.push(a.reserved);else if(Array.isArray(a.reserved))for(let c of a.reserved)o.reserved.push(c);else delete o.reserved;a["pre-shared-key"]&&(o.pre_shared_key=a["pre-shared-key"]),s.peers.push(o)}}return Wi(t,s),si(t,s),qn(t,s),Yi(t.smux,s),Mn(t,s),s};function Cl(){return{type:"ALL",produce:(s,a,o={})=>{let c=[];return ni().produce(s,"internal",{"include-unsupported-proxy":!0}).map(u=>{try{switch(u.type){case"ssh":c.push(A6(u));break;case"http":c.push(y6(u));break;case"socks5":if(u.tls)throw new Error(`Platform sing-box does not support proxy type: ${u.type} with tls`);c.push(S6(u));break;case"ss":if(u.plugin==="shadow-tls"){let{ssPart:h,stPart:d}=D6(u);c.push(h),c.push(d)}else c.push(F6(u));break;case"ssr":if(o["include-unsupported-proxy"])c.push(C6(u));else throw new Error(`Platform sing-box does not support proxy type: ${u.type}`);break;case"vmess":if(!u.network||["ws","grpc","h2","http"].includes(u.network))c.push(I6(u));else throw new Error(`Platform sing-box does not support proxy type: ${u.type} with network ${u.network}`);break;case"vless":if(!u.flow||["xtls-rprx-vision"].includes(u.flow))c.push(P6(u));else throw new Error(`Platform sing-box does not support proxy type: ${u.type} with flow ${u.flow}`);break;case"trojan":if(!u.flow)c.push(B6(u));else throw new Error(`Platform sing-box does not support proxy type: ${u.type} with flow ${u.flow}`);break;case"hysteria":c.push(R6(u));break;case"hysteria2":c.push($6(u,o["include-unsupported-proxy"]));break;case"tuic":if(!u.token||u.token.length===0)c.push(k6(u));else throw new Error("Platform sing-box does not support proxy type: TUIC v4");break;case"wireguard":c.push(T6(u));break;case"anytls":c.push(x6(u));break;default:throw new Error(`Platform sing-box does not support proxy type: ${u.type}`)}}catch(h){$t.error(h.message??h)}}),a==="internal"?c:JSON.stringify({outbounds:c},null,2)}}}function Il(){return{type:"ALL",produce:(s,a)=>{let o=s.filter(c=>!(!["http","socks5","ss","trojan","hysteria2","vless","vmess","tuic"].includes(c.type)||c.type==="ss"&&(c.plugin==="obfs"&&!["http","tls"].includes(c["plugin-opts"]?.mode)||!["chacha20-ietf-poly1305","chacha20-poly1305","aes-256-gcm","aes-128-gcm","none","tbale","rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","cast5-cfb","des-cfb","idea-cfb","rc2-cfb","seed-cfb","salsa20","chacha20","chacha20-ietf","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(c.cipher))||c.type==="vmess"&&!["http","ws","tcp"].includes(c.network)&&c.network||c.type==="trojan"&&!["http","ws","tcp"].includes(c.network)&&c.network||c.type==="vless"&&(typeof c.flow<"u"||c["reality-opts"]||!["http","ws","tcp"].includes(c.network)&&c.network)||c.type==="tuic"&&c.token&&c.token.length!==0)).map(c=>{let u={...c};c.tls&&!c.sni&&(c.sni=c.server);let h=c.prev_hop||c["underlying-proxy"]||c["dialer-proxy"]||c.detour;if(c.type==="http")c={type:"http",name:c.name,server:c.server,port:c.port,username:c.username,password:c.password,tfo:c.tfo||c["fast-open"],next_hop:c.next_hop};else if(c.type==="socks5")c={type:"socks5",name:c.name,server:c.server,port:c.port,username:c.username,password:c.password,tfo:c.tfo||c["fast-open"],udp_relay:c.udp||c.udp_relay||c.udp_relay,next_hop:c.next_hop};else if(c.type==="ss")c={type:"shadowsocks",name:c.name,method:c.cipher==="chacha20-ietf-poly1305"?"chacha20-poly1305":c.cipher,server:c.server,port:c.port,password:c.password,tfo:c.tfo||c["fast-open"],udp_relay:c.udp||c.udp_relay||c.udp_relay,next_hop:c.next_hop},u.plugin==="obfs"&&(c.obfs=u["plugin-opts"].mode,c.obfs_host=u["plugin-opts"].host,c.obfs_uri=u["plugin-opts"].path);else if(c.type==="hysteria2")c={type:"hysteria2",name:c.name,server:c.server,port:c.port,auth:c.password,tfo:c.tfo||c["fast-open"],udp_relay:c.udp||c.udp_relay||c.udp_relay,next_hop:c.next_hop,sni:c.sni,skip_tls_verify:c["skip-cert-verify"],port_hopping:c.ports,port_hopping_interval:c["hop-interval"]},u["obfs-password"]&&u.obfs=="salamander"&&(c.obfs="salamander",c.obfs_password=u["obfs-password"]);else if(c.type==="tuic")c={type:"tuic",name:c.name,server:c.server,port:c.port,uuid:c.uuid,password:c.password,next_hop:c.next_hop,sni:c.sni,alpn:Array.isArray(c.alpn)?c.alpn:[c.alpn||"h3"],skip_tls_verify:c["skip-cert-verify"],port_hopping:c.ports,port_hopping_interval:c["hop-interval"]};else if(c.type==="trojan")c.network==="ws"&&(c.websocket={path:c["ws-opts"]?.path,host:c["ws-opts"]?.headers?.Host}),c={type:"trojan",name:c.name,server:c.server,port:c.port,password:c.password,tfo:c.tfo||c["fast-open"],udp_relay:c.udp||c.udp_relay||c.udp_relay,next_hop:c.next_hop,sni:c.sni,skip_tls_verify:c["skip-cert-verify"],websocket:c.websocket};else if(c.type==="vmess"){let d=c.cipher;d&&!["auto","none","zero","aes-128-gcm","chacha20-poly1305"].includes(d)&&(d="auto"),c.network==="ws"?c.transport={[c.tls?"wss":"ws"]:{path:c["ws-opts"]?.path,headers:{Host:c["ws-opts"]?.headers?.Host},sni:c.tls?c.sni:void 0,skip_tls_verify:c.tls?c["skip-cert-verify"]:void 0}}:c.network==="http"?c.transport={http1:{method:c["http-opts"]?.method,path:Array.isArray(c["http-opts"]?.path)?c["http-opts"]?.path[0]:c["http-opts"]?.path,headers:{Host:Array.isArray(c["http-opts"]?.headers?.Host)?c["http-opts"]?.headers?.Host[0]:c["http-opts"]?.headers?.Host},skip_tls_verify:c["skip-cert-verify"]}}:c.network==="h2"?c.transport={http2:{method:c["h2-opts"]?.method,path:Array.isArray(c["h2-opts"]?.path)?c["h2-opts"]?.path[0]:c["h2-opts"]?.path,headers:{Host:Array.isArray(c["h2-opts"]?.headers?.Host)?c["h2-opts"]?.headers?.Host[0]:c["h2-opts"]?.headers?.Host},skip_tls_verify:c["skip-cert-verify"]}}:(c.network==="tcp"||!c.network)&&c.tls&&(c.transport={tls:{sni:c.tls?c.sni:void 0,skip_tls_verify:c.tls?c["skip-cert-verify"]:void 0}}),c={type:"vmess",name:c.name,server:c.server,port:c.port,user_id:c.uuid,security:d,tfo:c.tfo||c["fast-open"],legacy:c.legacy,udp_relay:c.udp||c.udp_relay||c.udp_relay,next_hop:c.next_hop,transport:c.transport}}else c.type==="vless"&&(c.network==="ws"?c.transport={[c.tls?"wss":"ws"]:{path:c["ws-opts"]?.path,headers:{Host:c["ws-opts"]?.headers?.Host},sni:c.tls?c.sni:void 0,skip_tls_verify:c.tls?c["skip-cert-verify"]:void 0}}:c.network==="http"?c.transport={http:{method:c["http-opts"]?.method,path:Array.isArray(c["http-opts"]?.path)?c["http-opts"]?.path[0]:c["http-opts"]?.path,headers:{Host:Array.isArray(c["http-opts"]?.headers?.Host)?c["http-opts"]?.headers?.Host[0]:c["http-opts"]?.headers?.Host},skip_tls_verify:c["skip-cert-verify"]}}:(c.network==="tcp"||!c.network)&&(c.transport={[c.tls?"tls":"tcp"]:{sni:c.tls?c.sni:void 0,skip_tls_verify:c.tls?c["skip-cert-verify"]:void 0}}),c={type:"vless",name:c.name,server:c.server,port:c.port,user_id:c.uuid,security:c.cipher,tfo:c.tfo||c["fast-open"],legacy:c.legacy,udp_relay:c.udp||c.udp_relay||c.udp_relay,next_hop:c.next_hop,transport:c.transport});if(["http","socks5","ss","trojan","vless","vmess"].includes(u.type)){if(ce(u,"shadow-tls-password")){if(u["shadow-tls-version"]!=3)throw new Error(`shadow-tls version ${u["shadow-tls-version"]} is not supported`);c.shadow_tls={password:u["shadow-tls-password"],sni:u["shadow-tls-sni"]}}else if(["shadow-tls"].includes(u.plugin)&&u["plugin-opts"]){if(u["plugin-opts"].version!=3)throw new Error(`shadow-tls version ${u["plugin-opts"].version} is not supported`);c.shadow_tls={password:u["plugin-opts"].password,sni:u["plugin-opts"].host}}}if(["ss"].includes(u.type)&&c.shadow_tls&&u["udp-port"]>0&&u["udp-port"]<=65535&&(c.udp_port=u["udp-port"]),delete c.subName,delete c.collectionName,delete c.id,delete c.resolved,delete c["no-resolve"],c.transport){for(let d in c.transport)(Object.keys(c.transport[d]).length===0||Object.values(c.transport[d]).every(f=>f==null))&&delete c.transport[d];Object.keys(c.transport).length===0&&delete c.transport}if(a!=="internal")for(let d in c)(c[d]==null||/^_/i.test(d))&&delete c[d];return{[c.type]:{...c,type:void 0,prev_hop:h}}});return a==="internal"?o:`proxies:
`+o.map(c=>"  - "+JSON.stringify(c)+`
`).join("")}}}function Zv(){return{type:"ALL",produce:(s,a)=>a==="internal"?s:JSON.stringify(s,null,2)}}var Qv={qx:Io(),QX:Io(),QuantumultX:Io(),surge:Su(),Surge:Su(),SurgeMac:Ap(),Loon:Sp(),Clash:yp(),meta:ni(),clashmeta:ni(),"clash.meta":ni(),"Clash.Meta":ni(),ClashMeta:ni(),mihomo:ni(),Mihomo:ni(),uri:Du(),URI:Du(),v2:Co(),v2ray:Co(),V2Ray:Co(),json:Zv(),JSON:Zv(),stash:Dl(),Stash:Dl(),shadowrocket:Po(),Shadowrocket:Po(),ShadowRocket:Po(),surfboard:Fl(),Surfboard:Fl(),singbox:Cl(),"sing-box":Cl(),egern:Il(),Egern:Il()};var em=Si(Bo()),O6=String.raw`
// global initializer
{{
    function $set(obj, path, value) {
      if (Object(obj) !== obj) return obj;
      if (!Array.isArray(path)) path = path.toString().match(/[^.[\]]+/g) || [];
      path
        .slice(0, -1)
        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[
        path[path.length - 1]
      ] = value;
      return obj;
    }
}}

// per-parser initializer
{
    const proxy = {};
    const obfs = {};
    const $ = {};

    function handleWebsocket() {
        if (obfs.type === "ws") {
            proxy.network = "ws";
            $set(proxy, "ws-opts.path", obfs.path);
            $set(proxy, "ws-opts.headers", obfs['ws-headers']);
            if (proxy['ws-opts'] && proxy['ws-opts']['headers'] && proxy['ws-opts']['headers'].Host) {
                proxy['ws-opts']['headers'].Host = proxy['ws-opts']['headers'].Host.replace(/^"(.*)"$/, '$1')
            }
        }
    }
    function handleShadowTLS() {
        if (proxy['shadow-tls-password'] && !proxy['shadow-tls-version']) {
            proxy['shadow-tls-version'] = 2;
        }
    }
}

start = (shadowsocks/vmess/trojan/https/http/snell/socks5/socks5_tls/tuic/tuic_v5/wireguard/hysteria2/ssh/direct) {
    return proxy;
}

shadowsocks = tag equals "ss" address (method/passwordk/obfs/obfs_host/obfs_uri/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/udp_port/others)* {
    proxy.type = "ss";
    // handle obfs
    if (obfs.type == "http" || obfs.type === "tls") {
        proxy.plugin = "obfs";
        $set(proxy, "plugin-opts.mode", obfs.type);
        $set(proxy, "plugin-opts.host", obfs.host);
        $set(proxy, "plugin-opts.path", obfs.path);
    }
    handleShadowTLS();
}
vmess = tag equals "vmess" address (vmess_uuid/vmess_aead/ws/ws_path/ws_headers/method/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls/sni/tls_fingerprint/tls_verification/fast_open/tfo/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "vmess";
    proxy.cipher = proxy.cipher || "none";
    // Surfboard 与 Surge 默认不一致, 不管 Surfboard https://getsurfboard.com/docs/profile-format/proxy/external-proxy/vmess
    if (proxy.aead) {
        proxy.alterId = 0;
    } else {
        proxy.alterId = 1;
    }
    handleWebsocket();
    handleShadowTLS();
}
trojan = tag equals "trojan" address (passwordk/ws/ws_path/ws_headers/tls/sni/tls_fingerprint/tls_verification/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "trojan";
    handleWebsocket();
    handleShadowTLS();
}
https = tag equals "https" address (username password)? (usernamek passwordk)? (sni/tls_fingerprint/tls_verification/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "http";
    proxy.tls = true;
    handleShadowTLS();
}
http = tag equals "http" address (username password)? (usernamek passwordk)? (ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "http";
    handleShadowTLS();
}
ssh = tag equals "ssh" address (username password)? (usernamek passwordk)? (server_fingerprint/idle_timeout/private_key/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "ssh";
    handleShadowTLS();
}
snell = tag equals "snell" address (snell_version/snell_psk/obfs/obfs_host/obfs_uri/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/udp_relay/reuse/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "snell";
    // handle obfs
    if (obfs.type == "http" || obfs.type === "tls") {
        $set(proxy, "obfs-opts.mode", obfs.type);
        $set(proxy, "obfs-opts.host", obfs.host);
        $set(proxy, "obfs-opts.path", obfs.path);
    }
    handleShadowTLS();
}
tuic = tag equals "tuic" address (alpn/token/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls_fingerprint/tls_verification/sni/fast_open/tfo/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/port_hopping_interval/others)* {
    proxy.type = "tuic";
    handleShadowTLS();
}
tuic_v5 = tag equals "tuic-v5" address (alpn/passwordk/uuidk/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls_fingerprint/tls_verification/sni/fast_open/tfo/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/port_hopping_interval/others)* {
    proxy.type = "tuic";
    proxy.version = 5;
    handleShadowTLS();
}
wireguard = tag equals "wireguard" (section_name/no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "wireguard-surge";
    handleShadowTLS();
}
hysteria2 = tag equals "hysteria2" address (no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/sni/tls_verification/passwordk/tls_fingerprint/download_bandwidth/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/port_hopping_interval/others)* {
    proxy.type = "hysteria2";
    handleShadowTLS();
}
socks5 = tag equals "socks5" address (username password)? (usernamek passwordk)? (udp_relay/no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "socks5";
    handleShadowTLS();
}
socks5_tls = tag equals "socks5-tls" address (username password)? (usernamek passwordk)? (udp_relay/no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/sni/tls_fingerprint/tls_verification/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "socks5";
    proxy.tls = true;
    handleShadowTLS();
}
direct = tag equals "direct" (udp_relay/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/block_quic/others)* {
    proxy.type = "direct";
}
address = comma server:server comma port:port {
    proxy.server = server;
    proxy.port = port;
}

server = ip/domain

ip = & {
    const start = peg$currPos;
    let j = start;
    while (j < input.length) {
        if (input[j] === ",") break;
        j++;
    }
    peg$currPos = j;
    $.ip = input.substring(start, j).trim();
    return true;
} { return $.ip; }

domain = match:[0-9a-zA-z-_.]+ { 
    const domain = match.join(""); 
    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {
        return domain;
    }
}

port = digits:[0-9]+ { 
    const port = parseInt(digits.join(""), 10); 
    if (port >= 0 && port <= 65535) {
    	return port;
    }
}

port_hopping_interval = comma "port-hopping-interval" equals match:$[0-9]+ { proxy["hop-interval"] = parseInt(match.trim()); }

username = & {
    let j = peg$currPos; 
    let start, end;
    let first = true;
    while (j < input.length) {
        if (input[j] === ',') {
            if (first) {
                start = j + 1;
                first = false;
            } else {
                end = j;
                break;
            }
        }
        j++;
    }
    const match = input.substring(start, end);
    if (match.indexOf("=") === -1) {
        $.username = match;
        peg$currPos = end;
        return true;
    }
} { proxy.username = $.username.trim().replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }
password = comma match:[^,]+ { proxy.password = match.join("").replace(/^"(.*)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }

tls = comma "tls" equals flag:bool { proxy.tls = flag; }
sni = comma "sni" equals sni:("off"/domain) { 
    if (sni === "off") {
        proxy["disable-sni"] = true;
    } else {
        proxy.sni = sni;
    }
}
tls_verification = comma "skip-cert-verify" equals flag:bool { proxy["skip-cert-verify"] = flag; }
tls_fingerprint = comma "server-cert-fingerprint-sha256" equals tls_fingerprint:$[^,]+ { proxy["tls-fingerprint"] = tls_fingerprint.trim(); }

snell_psk = comma "psk" equals match:[^,]+ { proxy.psk = match.join(""); }
snell_version = comma "version" equals match:$[0-9]+ { proxy.version = parseInt(match.trim()); }

usernamek = comma "username" equals match:[^,]+ { proxy.username = match.join("").replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }
passwordk = comma "password" equals match:[^,]+ { proxy.password = match.join("").replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }
vmess_uuid = comma "username" equals match:[^,]+ { proxy.uuid = match.join(""); }
vmess_aead = comma "vmess-aead" equals flag:bool { proxy.aead = flag; }

method = comma "encrypt-method" equals cipher:cipher {
    proxy.cipher = cipher;
}
cipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"bf-cfb"/"camellia-128-cfb"/"camellia-192-cfb"/"camellia-256-cfb"/"cast5-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"des-cfb"/"idea-cfb"/"none"/"rc2-cfb"/"rc4-md5"/"rc4"/"salsa20"/"seed-cfb"/"xchacha20-ietf-poly1305"/"2022-blake3-aes-128-gcm"/"2022-blake3-aes-256-gcm");

ws = comma "ws" equals flag:bool { obfs.type = "ws"; }
ws_headers = comma "ws-headers" equals headers:$[^,]+ {
    const pairs = headers.split("|");
    const result = {};
    pairs.forEach(pair => {
        const [key, value] = pair.trim().split(":");
        result[key.trim()] = value.trim().replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1');
    })
    obfs["ws-headers"] = result;
}
ws_path = comma "ws-path" equals path:uri { obfs.path = path.trim().replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }

obfs = comma "obfs" equals type:("http"/"tls") { obfs.type = type; }
obfs_host = comma "obfs-host" equals host:domain { obfs.host = host; };
obfs_uri = comma "obfs-uri" equals path:uri { obfs.path = path }
uri = $[^,]+

udp_relay = comma "udp-relay" equals flag:bool { proxy.udp = flag; }
fast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }
reuse = comma "reuse" equals flag:bool { proxy.reuse = flag; }
ecn = comma "ecn" equals flag:bool { proxy.ecn = flag; }
tfo = comma "tfo" equals flag:bool { proxy.tfo = flag; }
ip_version = comma "ip-version" equals match:[^,]+ { proxy["ip-version"] = match.join(""); }
section_name = comma "section-name" equals match:[^,]+ { proxy["section-name"] = match.join(""); }
no_error_alert = comma "no-error-alert" equals match:[^,]+ { proxy["no-error-alert"] = match.join(""); }
underlying_proxy = comma "underlying-proxy" equals match:[^,]+ { proxy["underlying-proxy"] = match.join(""); }
download_bandwidth = comma "download-bandwidth" equals match:[^,]+ { proxy.down = match.join(""); }
test_url = comma "test-url" equals match:[^,]+ { proxy["test-url"] = match.join(""); }
test_udp = comma "test-udp" equals match:[^,]+ { proxy["test-udp"] = match.join(""); }
test_timeout = comma "test-timeout" equals match:$[0-9]+ { proxy["test-timeout"] = parseInt(match.trim()); }
tos = comma "tos" equals match:$[0-9]+ { proxy.tos = parseInt(match.trim()); }
interface = comma "interface" equals match:[^,]+ { proxy.interface = match.join(""); }
allow_other_interface = comma "allow-other-interface" equals flag:bool { proxy["allow-other-interface"] = flag; }
hybrid = comma "hybrid" equals flag:bool { proxy.hybrid = flag; }
idle_timeout = comma "idle-timeout" equals match:$[0-9]+ { proxy["idle-timeout"] = parseInt(match.trim()); }
private_key = comma "private-key" equals match:[^,]+ { proxy["keystore-private-key"] = match.join("").replace(/^"(.*)"$/, '$1'); }
server_fingerprint = comma "server-fingerprint" equals match:[^,]+ { proxy["server-fingerprint"] = match.join("").replace(/^"(.*)"$/, '$1'); }
block_quic = comma "block-quic" equals match:[^,]+ { proxy["block-quic"] = match.join(""); }
udp_port = comma "udp-port" equals match:$[0-9]+ { proxy["udp-port"] = parseInt(match.trim()); }
shadow_tls_version = comma "shadow-tls-version" equals match:$[0-9]+ { proxy["shadow-tls-version"] = parseInt(match.trim()); }
shadow_tls_sni = comma "shadow-tls-sni" equals match:[^,]+ { proxy["shadow-tls-sni"] = match.join(""); }
shadow_tls_password = comma "shadow-tls-password" equals match:[^,]+ { proxy["shadow-tls-password"] = match.join("").replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }
token = comma "token" equals match:[^,]+ { proxy.token = match.join(""); }
alpn = comma "alpn" equals match:[^,]+ { proxy.alpn = match.join(""); }
uuidk = comma "uuid" equals match:[^,]+ { proxy.uuid = match.join(""); }

tag = match:[^=,]* { proxy.name = match.join("").trim(); }
comma = _ "," _
equals = _ "=" _
_ = [ \r\t]*
bool = b:("true"/"false") { return b === "true" }
others = comma [^=,]+ equals [^=,]+
`,Cp;function ai(){return Cp||(Cp=em.generate(O6)),Cp}var tm=Si(Bo()),N6=String.raw`
// global initializer
{{
    function $set(obj, path, value) {
      if (Object(obj) !== obj) return obj;
      if (!Array.isArray(path)) path = path.toString().match(/[^.[\]]+/g) || [];
      path
        .slice(0, -1)
        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[
        path[path.length - 1]
      ] = value;
      return obj;
    }
}}

// per-parser initializer
{
    const proxy = {};
    const obfs = {};
    const transport = {};
    const $ = {};

    function handleTransport() {
        if (transport.type === "tcp") { /* do nothing */ }
        else if (transport.type === "ws") {
            proxy.network = "ws";
            $set(proxy, "ws-opts.path", transport.path);
            $set(proxy, "ws-opts.headers.Host", transport.host);
        } else if (transport.type === "http") {
            proxy.network = "http";
            $set(proxy, "http-opts.path", transport.path);
            $set(proxy, "http-opts.headers.Host", transport.host);
        }
    }
}

start = (shadowsocksr/shadowsocks/vmess/vless/trojan/https/http/socks5/hysteria2) {
    return proxy;
}

shadowsocksr = tag equals "shadowsocksr"i address method password (ssr_protocol/ssr_protocol_param/obfs_ssr/obfs_ssr_param/obfs_host/obfs_uri/fast_open/udp_relay/udp_port/shadow_tls_version/shadow_tls_sni/shadow_tls_password/ip_mode/block_quic/others)*{
    proxy.type = "ssr";
    // handle ssr obfs
    proxy.obfs = obfs.type;
}
shadowsocks = tag equals "shadowsocks"i address method password (obfs_typev obfs_hostv)? (obfs_ss/obfs_host/obfs_uri/fast_open/udp_relay/udp_port/shadow_tls_version/shadow_tls_sni/shadow_tls_password/ip_mode/block_quic/others)* {
    proxy.type = "ss";
    // handle ss obfs
    if (obfs.type == "http" || obfs.type === "tls") {
        proxy.plugin = "obfs";
        $set(proxy, "plugin-opts.mode", obfs.type);
        $set(proxy, "plugin-opts.host", obfs.host);
        $set(proxy, "plugin-opts.path", obfs.path);
    }
}
vmess = tag equals "vmess"i address method uuid (transport/transport_host/transport_path/over_tls/tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/vmess_alterId/fast_open/udp_relay/ip_mode/public_key/short_id/block_quic/others)* {
    proxy.type = "vmess";
    proxy.cipher = proxy.cipher || "none";
    proxy.alterId = proxy.alterId || 0;
    handleTransport();
}
vless = tag equals "vless"i address uuid (transport/transport_host/transport_path/over_tls/tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/ip_mode/flow/public_key/short_id/block_quic/others)* {
    proxy.type = "vless";
    handleTransport();
}
trojan = tag equals "trojan"i address password (transport/transport_host/transport_path/over_tls/tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/ip_mode/block_quic/others)* {
    proxy.type = "trojan";
    handleTransport();
}
hysteria2 = tag equals "hysteria2"i address password (tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/udp_relay/fast_open/download_bandwidth/salamander_password/ecn/ip_mode/block_quic/others)* {
    proxy.type = "hysteria2";
}
https = tag equals "https"i address (username password)? (tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/ip_mode/block_quic/others)* {
    proxy.type = "http";
    proxy.tls = true;
}
http = tag equals "http"i address (username password)? (fast_open/udp_relay/ip_mode/block_quic/others)* {
    proxy.type = "http";
}
socks5 = tag equals "socks5"i address (username password)? (over_tls/tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/ip_mode/block_quic/others)* {
    proxy.type = "socks5";
}

address = comma server:server comma port:port {
    proxy.server = server;
    proxy.port = port;
}

server = ip/domain

ip = & {
    const start = peg$currPos;
    let j = start;
    while (j < input.length) {
        if (input[j] === ",") break;
        j++;
    }
    peg$currPos = j;
    $.ip = input.substring(start, j).trim();
    return true;
} { return $.ip; }

domain = match:[0-9a-zA-z-_.]+ { 
    const domain = match.join(""); 
    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {
        return domain;
    }
    throw new Error("Invalid domain: " + domain);
}

port = digits:[0-9]+ { 
    const port = parseInt(digits.join(""), 10); 
    if (port >= 0 && port <= 65535) {
    	return port;
    }
    throw new Error("Invalid port number: " + port);
}

method = comma cipher:cipher { 
    proxy.cipher = cipher;
}
cipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"auto"/"bf-cfb"/"camellia-128-cfb"/"camellia-192-cfb"/"camellia-256-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"none"/"rc4-md5"/"rc4"/"salsa20"/"xchacha20-ietf-poly1305"/"2022-blake3-aes-128-gcm"/"2022-blake3-aes-256-gcm");

username = & {
    let j = peg$currPos; 
    let start, end;
    let first = true;
    while (j < input.length) {
        if (input[j] === ',') {
            if (first) {
                start = j + 1;
                first = false;
            } else {
                end = j;
                break;
            }
        }
        j++;
    }
    const match = input.substring(start, end);
    if (match.indexOf("=") === -1) {
        $.username = match;
        peg$currPos = end;
        return true;
    }
} { proxy.username = $.username; }
password = comma '"' match:[^"]* '"' { proxy.password = match.join(""); }
uuid = comma '"' match:[^"]+ '"' { proxy.uuid = match.join(""); }

obfs_typev = comma type:("http"/"tls") { obfs.type = type; }
obfs_hostv = comma match:[^,]+ { obfs.host = match.join(""); }

obfs_ss = comma "obfs-name" equals type:("http"/"tls") { obfs.type = type; }

obfs_ssr = comma "obfs" equals type:("plain"/"http_simple"/"http_post"/"random_head"/"tls1.2_ticket_auth"/"tls1.2_ticket_fastauth") { obfs.type = type; }
obfs_ssr_param = comma "obfs-param" equals match:$[^,]+ { proxy["obfs-param"] = match; }

obfs_host = comma "obfs-host" equals host:domain { obfs.host = host; }
obfs_uri = comma "obfs-uri" equals uri:uri { obfs.path = uri; }
uri = $[^,]+

transport = comma "transport" equals type:("tcp"/"ws"/"http") { transport.type = type; }
transport_host = comma "host" equals host:domain { transport.host = host; }
transport_path = comma "path" equals path:uri { transport.path = path; }

ssr_protocol = comma "protocol" equals protocol:("origin"/"auth_sha1_v4"/"auth_aes128_md5"/"auth_aes128_sha1"/"auth_chain_a"/"auth_chain_b") { proxy.protocol = protocol; }
ssr_protocol_param = comma "protocol-param" equals param:$[^=,]+ { proxy["protocol-param"] = param; }

vmess_alterId = comma "alterId" equals alterId:$[0-9]+ { proxy.alterId = parseInt(alterId); } 

udp_port = comma "udp-port" equals match:$[0-9]+ { proxy["udp-port"] = parseInt(match.trim()); }
shadow_tls_version = comma "shadow-tls-version" equals match:$[0-9]+ { proxy["shadow-tls-version"] = parseInt(match.trim()); }
shadow_tls_sni = comma "shadow-tls-sni" equals match:[^,]+ { proxy["shadow-tls-sni"] = match.join(""); }
shadow_tls_password = comma "shadow-tls-password" equals match:[^,]+ { proxy["shadow-tls-password"] = match.join(""); }

over_tls = comma "over-tls" equals flag:bool { proxy.tls = flag; }
tls_name = comma sni:("tls-name") equals host:domain { proxy.sni = host; }
sni = comma sni:("sni") equals host:domain { proxy.sni = host; }
tls_verification = comma "skip-cert-verify" equals flag:bool { proxy["skip-cert-verify"] = flag; }
tls_cert_sha256 = comma "tls-cert-sha256" equals match:[^,]+ { proxy["tls-fingerprint"] = match.join("").replace(/^"(.*)"$/, '$1'); }
tls_pubkey_sha256 = comma "tls-pubkey-sha256" equals match:[^,]+ { proxy["tls-pubkey-sha256"] = match.join("").replace(/^"(.*)"$/, '$1'); }

flow = comma "flow" equals match:[^,]+ { proxy["flow"] = match.join("").replace(/^"(.*)"$/, '$1'); }
public_key = comma "public-key" equals match:[^,]+ { proxy["reality-opts"] = proxy["reality-opts"] || {}; proxy["reality-opts"]["public-key"] = match.join("").replace(/^"(.*)"$/, '$1'); }
short_id = comma "short-id" equals match:[^,]+ { proxy["reality-opts"] = proxy["reality-opts"] || {}; proxy["reality-opts"]["short-id"] = match.join("").replace(/^"(.*)"$/, '$1'); }

fast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }
udp_relay = comma "udp" equals flag:bool { proxy.udp = flag; }
ip_mode = comma "ip-mode" equals match:[^,]+ { proxy["ip-version"] = match.join(""); }

ecn = comma "ecn" equals flag:bool { proxy.ecn = flag; }
download_bandwidth = comma "download-bandwidth" equals match:[^,]+ { proxy.down = match.join(""); }
salamander_password = comma "salamander-password" equals match:[^,]+ { proxy['obfs-password'] = match.join(""); proxy.obfs = 'salamander'; }

block_quic = comma "block-quic" equals flag:bool { if(flag) proxy["block-quic"] = "on"; else proxy["block-quic"] = "off"; }

tag = match:[^=,]* { proxy.name = match.join("").trim(); }
comma = _ "," _
equals = _ "=" _
_ = [ \r\t]*
bool = b:("true"/"false") { return b === "true" }
others = comma [^=,]+ equals [^=,]+
`,Ip;function Ji(){return Ip||(Ip=tm.generate(N6)),Ip}var rm=Si(Bo()),L6=String.raw`
// global initializer
{{
    function $set(obj, path, value) {
      if (Object(obj) !== obj) return obj;
      if (!Array.isArray(path)) path = path.toString().match(/[^.[\]]+/g) || [];
      path
        .slice(0, -1)
        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[
        path[path.length - 1]
      ] = value;
      return obj;
    }
}}

// per-parse initializer
{
	const proxy = {};
    const obfs = {};
    const $ = {};

    function handleObfs() {
        if (obfs.type === "ws" || obfs.type === "wss") {
            proxy.network = "ws";
            if (obfs.type === 'wss') {
                proxy.tls = true;
            }
            $set(proxy, "ws-opts.path", obfs.path);
            $set(proxy, "ws-opts.headers.Host", obfs.host);
        } else if (obfs.type === "over-tls") {
            proxy.tls = true;
        } else if (obfs.type === "http") {
            proxy.network = "http";
            $set(proxy, "http-opts.path", obfs.path);
            $set(proxy, "http-opts.headers.Host", obfs.host);
        }
    }
}

start = (trojan/shadowsocks/vmess/vless/http/socks5) {
    return proxy
}

trojan = "trojan" equals address
    (password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/obfs/obfs_host/obfs_uri/tag/udp_relay/udp_over_tcp/fast_open/server_check_url/others)* {
    proxy.type = "trojan";
    handleObfs();
}

shadowsocks = "shadowsocks" equals address
    (password/method/obfs_ssr/obfs_ss/obfs_host/obfs_uri/ssr_protocol/ssr_protocol_param/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/udp_relay/udp_over_tcp_new/fast_open/tag/server_check_url/others)* {
    if (proxy.protocol || proxy.type === "ssr") {
        proxy.type = "ssr";
        if (!proxy.protocol) {
            proxy.protocol = "origin";
        }
        // handle ssr obfs
        if (obfs.host) proxy["obfs-param"] = obfs.host;
        if (obfs.type) proxy.obfs = obfs.type;
    } else {
        proxy.type = "ss";
        // handle ss obfs
        if (obfs.type == "http" || obfs.type === "tls") {
            proxy.plugin = "obfs";
            $set(proxy, "plugin-opts", {
                mode: obfs.type
            });
        } else if (obfs.type === "ws" || obfs.type === "wss") {
            proxy.plugin = "v2ray-plugin";
            $set(proxy, "plugin-opts.mode", "websocket");
            if (obfs.type === "wss") {
                $set(proxy, "plugin-opts.tls", true);
            }
        } else if (obfs.type === 'over-tls') {
            throw new Error('ss over-tls is not supported');
        }
        if (obfs.type) {
            $set(proxy, "plugin-opts.host", obfs.host);
            $set(proxy, "plugin-opts.path", obfs.path);
        }
    }
}

vmess = "vmess" equals address
    (uuid/method/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/obfs/obfs_host/obfs_uri/udp_relay/udp_over_tcp/fast_open/aead/server_check_url/others)* {
    proxy.type = "vmess";
    proxy.cipher = proxy.cipher || "none";
    if (proxy.aead === false) {
        proxy.alterId = 1;
    } else {
        proxy.alterId = 0;
    }
    handleObfs();
}

vless = "vless" equals address
    (uuid/method/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/obfs/obfs_host/obfs_uri/udp_relay/udp_over_tcp/fast_open/aead/server_check_url/others)* {
    proxy.type = "vless";
    proxy.cipher = proxy.cipher || "none";
    handleObfs();
}

http = "http" equals address 
    (username/password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/fast_open/udp_relay/udp_over_tcp/server_check_url/others)*{
    proxy.type = "http";
}

socks5 = "socks5" equals address
    (username/password/password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/fast_open/udp_relay/udp_over_tcp/server_check_url/others)* {
    proxy.type = "socks5";
}
    
address = server:server ":" port:port {
    proxy.server = server;
    proxy.port = port;
}
server = ip/domain

domain = match:[0-9a-zA-z-_.]+ { 
    const domain = match.join(""); 
    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {
        return domain;
    }
}

ip = & {
    const start = peg$currPos;
    let end;
    let j = start;
    while (j < input.length) {
        if (input[j] === ",") break;
        if (input[j] === ":") end = j;
        j++;
    }
    peg$currPos = end || j;
    $.ip = input.substring(start, end).trim();
    return true;
} { return $.ip; }

port = digits:[0-9]+ { 
    const port = parseInt(digits.join(""), 10); 
    if (port >= 0 && port <= 65535) {
    	return port;
    }
}

username = comma "username" equals username:[^,]+ { proxy.username = username.join("").trim(); }
password = comma "password" equals password:[^,]+ { proxy.password = password.join("").trim(); }
uuid = comma "password" equals uuid:[^,]+ { proxy.uuid = uuid.join("").trim(); }

method = comma "method" equals cipher:cipher { 
    proxy.cipher = cipher;
};
cipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"bf-cfb"/"cast5-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"des-cfb"/"none"/"rc2-cfb"/"rc4-md5-6"/"rc4-md5"/"salsa20"/"xchacha20-ietf-poly1305"/"2022-blake3-aes-128-gcm"/"2022-blake3-aes-256-gcm");
aead = comma "aead" equals flag:bool { proxy.aead = flag; }

udp_relay = comma "udp-relay" equals flag:bool { proxy.udp = flag; }
udp_over_tcp = comma "udp-over-tcp" equals flag:bool { throw new Error("UDP over TCP is not supported"); }
udp_over_tcp_new = comma "udp-over-tcp" equals param:$[^=,]+ { if (param === "sp.v1") { proxy["udp-over-tcp"] = true; proxy["udp-over-tcp-version"] = 1; } else if (param === "sp.v2") { proxy["udp-over-tcp"] = true; proxy["udp-over-tcp-version"] = 2; } else if (param === "true") { proxy["_ssr_python_uot"] = true; } else { throw new Error("Invalid value for udp-over-tcp"); } }

fast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }

over_tls = comma "over-tls" equals flag:bool { proxy.tls = flag; }
tls_host = comma "tls-host" equals sni:domain { proxy.sni = sni; }
tls_verification = comma "tls-verification" equals flag:bool { 
    proxy["skip-cert-verify"] = !flag;
}
tls_fingerprint = comma "tls-cert-sha256" equals tls_fingerprint:$[^,]+ { proxy["tls-fingerprint"] = tls_fingerprint.trim(); }
tls_pubkey_sha256 = comma "tls-pubkey-sha256" equals param:$[^=,]+ { proxy["tls-pubkey-sha256"] = param; }
tls_alpn = comma "tls-alpn" equals param:$[^=,]+ { proxy["tls-alpn"] = param; }
tls_no_session_ticket = comma "tls-no-session-ticket" equals flag:bool { 
    proxy["tls-no-session-ticket"] = flag;
}
tls_no_session_reuse = comma "tls-no-session-reuse" equals flag:bool { 
    proxy["tls-no-session-reuse"] = flag;
}

obfs_ss = comma "obfs" equals type:("http"/"tls"/"wss"/"ws"/"over-tls") { obfs.type = type; return type; }
obfs_ssr = comma "obfs" equals type:("plain"/"http_simple"/"http_post"/"random_head"/"tls1.2_ticket_auth"/"tls1.2_ticket_fastauth") { proxy.type = "ssr"; obfs.type = type; return type; }
obfs = comma "obfs" equals type:("wss"/"ws"/"over-tls"/"http") { obfs.type = type; return type; };

obfs_host = comma "obfs-host" equals host:domain { obfs.host = host; }
obfs_uri = comma "obfs-uri" equals uri:uri { obfs.path = uri; }

ssr_protocol = comma "ssr-protocol" equals protocol:("origin"/"auth_sha1_v4"/"auth_aes128_md5"/"auth_aes128_sha1"/"auth_chain_a"/"auth_chain_b") { proxy.protocol = protocol; return protocol; }
ssr_protocol_param = comma "ssr-protocol-param" equals param:$[^=,]+ { proxy["protocol-param"] = param; }

server_check_url = comma "server_check_url" equals param:$[^=,]+ { proxy["test-url"] = param; }

uri = $[^,]+

tag = comma "tag" equals tag:[^=,]+ { proxy.name = tag.join(""); }
others = comma [^=,]+ equals [^=,]+
comma = _ "," _
equals = _ "=" _
_ = [ \r\t]*
bool = b:("true"/"false") { return b === "true" }
`,Pp;function Ss(){return Pp||(Pp=rm.generate(L6)),Pp}var nm=Si(Bo()),H6=String.raw`
// global initializer
{{
  function $set(obj, path, value) {
    if (Object(obj) !== obj) return obj;
    if (!Array.isArray(path)) path = path.toString().match(/[^.[\]]+/g) || [];
    path
      .slice(0, -1)
      .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[
      path[path.length - 1]
    ] = value;
    return obj;
  }

  function toBool(str) {
    if (typeof str === 'undefined' || str === null) return undefined;
    return /(TRUE)|1/i.test(str);
  }
}}

{
  const proxy = {};
  const obfs = {};
  const $ = {};
  const params = {};
}

start = (trojan) {
  return proxy
}

trojan = "trojan://" password:password "@" server:server ":" port:port "/"? params? name:name?{
  proxy.type = "trojan";
  proxy.password = password;
  proxy.server = server;
  proxy.port = port;
  proxy.name = name;

  // name may be empty
  if (!proxy.name) {
    proxy.name = server + ":" + port;
  }
};

password = match:$[^@]+ {
  return decodeURIComponent(match);
};

server = ip/domain;

domain = match:[0-9a-zA-z-_.]+ { 
  const domain = match.join(""); 
  if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {
    return domain;
  }
}

ip = & {
  const start = peg$currPos;
  let end;
  let j = start;
  while (j < input.length) {
    if (input[j] === ",") break;
    if (input[j] === ":") end = j;
    j++;
  }
  peg$currPos = end || j;
  $.ip = input.substring(start, end).trim();
  return true;
} { return $.ip; }

port = digits:[0-9]+ { 
  const port = parseInt(digits.join(""), 10); 
  if (port >= 0 && port <= 65535) {
    return port;
  } else {
    throw new Error("Invalid port: " + port);
  }
}

params = "?" head:param tail:("&"@param)* {
  for (const [key, value] of Object.entries(params)) {
    params[key] = decodeURIComponent(value);
  }
  proxy["skip-cert-verify"] = toBool(params["allowInsecure"]);
  proxy.sni = params["sni"] || params["peer"];
  proxy['client-fingerprint'] = params.fp;
  proxy.alpn = params.alpn ? decodeURIComponent(params.alpn).split(',') : undefined;

  if (toBool(params["ws"])) {
    proxy.network = "ws";
    $set(proxy, "ws-opts.path", params["wspath"]);
  }
  
  if (params["type"]) {
    let httpupgrade
    proxy.network = params["type"]
    if(proxy.network === 'httpupgrade') {
      proxy.network = 'ws'
      httpupgrade = true
    }
    if (['grpc'].includes(proxy.network)) {
        proxy[proxy.network + '-opts'] = {
            'grpc-service-name': params["serviceName"],
            '_grpc-type': params["mode"],
            '_grpc-authority': params["authority"],
        };
    } else {
      if (params["path"]) {
        $set(proxy, proxy.network+"-opts.path", decodeURIComponent(params["path"]));  
      }
      if (params["host"]) {
        $set(proxy, proxy.network+"-opts.headers.Host", decodeURIComponent(params["host"])); 
      }
      if (httpupgrade) {
        $set(proxy, proxy.network+"-opts.v2ray-http-upgrade", true); 
        $set(proxy, proxy.network+"-opts.v2ray-http-upgrade-fast-open", true); 
      }
    }
    if (['reality'].includes(params.security)) {
      const opts = {};
      if (params.pbk) {
        opts['public-key'] = params.pbk;
      }
      if (params.sid) {
        opts['short-id'] = params.sid;
      }
      if (params.spx) {
        opts['_spider-x'] = params.spx;
      }
      if (params.mode) {
        proxy._mode = params.mode;
      }
      if (params.extra) {
        proxy._extra = params.extra;
      }
      if (Object.keys(opts).length > 0) {
        $set(proxy, params.security+"-opts", opts); 
      }
    }
  }

  proxy.udp = toBool(params["udp"]);
  proxy.tfo = toBool(params["tfo"]);
}

param = kv/single;

kv = key:$[a-z]i+ "=" value:$[^&#]i* {
  params[key] = value;
}

single = key:$[a-z]i+ {
  params[key] = true;
};

name = "#" + match:$.* {
  return decodeURIComponent(match);
}
`,Bp;function Rp(){return Bp||(Bp=nm.generate(H6)),Bp}var Tp=Si(xp());function im(t){let[r,s]=t.match(/,\s*?port-hopping\s*?=\s*?["']?\s*?((\d+(-\d+)?)([,;]\d+(-\d+)?)*)\s*?["']?\s*?/)||[];return{port_hopping:s?s.replace(/;/g,","):void 0,line:r?t.replace(r,""):t}}function j6(){return{name:"URI PROXY Parser",test:a=>/^(socks5\+tls|socks5|http|https):\/\//.test(a),parse:a=>{let[o,c,u,h,d,f,b,A,g]=a.match(/^(socks5|http|http)(\+tls|s)?:\/\/(?:(.*?):(.*?)@)?(.*?)(?::(\d+?))?(\?.*?)?(?:#(.*?))?$/);if(b)b=parseInt(b,10);else{if(u)b=443;else if(c==="http")b=80;else throw $t.error(`port is not present in line: ${a}`),new Error(`port is not present in line: ${a}`);$t.info(`port is not present in line: ${a}, set to ${b}`)}return{name:g!=null?decodeURIComponent(g):`${c} ${f}:${b}`,type:c,tls:!!u,server:f,port:b,username:h!=null?decodeURIComponent(h):void 0,password:d!=null?decodeURIComponent(d):void 0}}}}function U6(){return{name:"URI SOCKS Parser",test:a=>/^socks:\/\//.test(a),parse:a=>{let[o,c,u,h,d,f,b]=a.match(/^(socks)?:\/\/(?:(.*)@)?(.*?)(?::(\d+?))?(\?.*?)?(?:#(.*?))?$/);if(d)d=parseInt(d,10);else throw $t.error(`port is not present in line: ${a}`),new Error(`port is not present in line: ${a}`);let A,g;if(u){let y=Lt.decode(decodeURIComponent(u)).split(":");A=y[0],g=y[1]}return{name:b!=null?decodeURIComponent(b):`${c} ${h}:${d}`,type:"socks5",server:h,port:d,username:A,password:g}}}}function M6(){return{name:"URI SS Parser",test:a=>/^ss:\/\//.test(a),parse:a=>{let o=a.split("ss://")[1],c=a.split("#")[1],u={type:"ss"};o=o.split("#")[0];let h=o.match(/@([^/?]*)(\/|\?|$)/),d=decodeURIComponent(o.split("@")[0]),f;d?.startsWith("2022-blake3-")?f=d:f=Lt.decode(d);let b="";if(h)o.includes("?")&&(b=o.match(/(\?.*)$/)[1]);else{if(o.includes("?")){let D=o.match(/^(.*)(\?.*)$/);o=D[1],b=D[2]}if(o=Lt.decode(o),b){if(/(&|\?)v2ray-plugin=/.test(b)){let S=b.match(/(&|\?)v2ray-plugin=(.*?)(&|$)/)[2];S&&(u.plugin="v2ray-plugin",u["plugin-opts"]=JSON.parse(Lt.decode(S)))}o=`${o}${b}`}f=o.match(/(^.*)@/)?.[1],h=o.match(/@([^/@]*)(\/|$)/)}let A=h[1],g=A.lastIndexOf(":");u.server=A.substring(0,g),u.port=`${A.substring(g+1)}`.match(/\d+/)?.[0];let v=f.match(/(^.*?):(.*$)/);u.cipher=v?.[1],u.password=v?.[2];let y=o.match(/[?&]plugin=([^&]+)/),m=o.match(/[?&]shadow-tls=([^&]+)/);if(y){let D=("plugin="+decodeURIComponent(y[1])).split(";"),S={};for(let F of D){let[$,k]=F.split("=");$&&(S[$]=k||!0)}switch(S.plugin){case"obfs-local":case"simple-obfs":u.plugin="obfs",u["plugin-opts"]={mode:S.obfs,host:er(S["obfs-host"])};break;case"v2ray-plugin":u.plugin="v2ray-plugin",u["plugin-opts"]={mode:"websocket",host:er(S["obfs-host"]),path:er(S.path),tls:gu(S.tls)};break;case"shadow-tls":{u.plugin="shadow-tls";let F=er(S.version);u["plugin-opts"]={host:er(S.host),password:er(S.password),version:F?parseInt(F,10):void 0};break}default:throw new Error(`Unsupported plugin option: ${S.plugin}`)}}if(m){let D=JSON.parse(Lt.decode(m[1])),S=er(D.version),F=er(D.address),$=er(D.port);u.plugin="shadow-tls",u["plugin-opts"]={host:er(D.host),password:er(D.password),version:S?parseInt(S,10):void 0},F&&(u.server=F),$&&(u.port=parseInt($,10))}return/(&|\?)uot=(1|true)/i.test(b)&&(u["udp-over-tcp"]=!0),/(&|\?)tfo=(1|true)/i.test(b)&&(u.tfo=!0),c!=null&&(c=decodeURIComponent(c)),u.name=c??`SS ${u.server}:${u.port}`,u}}}function q6(){return{name:"URI SSR Parser",test:a=>/^ssr:\/\//.test(a),parse:a=>{a=Lt.decode(a.split("ssr://")[1]);let o=a.indexOf(":origin");o===-1&&(o=a.indexOf(":auth_"));let c=a.substring(0,o),u=c.substring(0,c.lastIndexOf(":")),h=c.substring(c.lastIndexOf(":")+1),d=a.substring(o+1).split("/?")[0].split(":"),f={type:"ssr",server:u,port:h,protocol:d[0],cipher:d[1],obfs:d[2],password:Lt.decode(d[3])},b={};if(a=a.split("/?")[1].split("&"),a.length>1)for(let A of a){let[g,v]=A.split("=");v=v.trim(),v.length>0&&v!=="(null)"&&(b[g]=v)}return f={...f,name:b.remarks?Lt.decode(b.remarks):f.server,"protocol-param":er(Lt.decode(b.protoparam||"").replace(/\s/g,"")),"obfs-param":er(Lt.decode(b.obfsparam||"").replace(/\s/g,""))},f}}}function V6(){return{name:"URI VMess Parser",test:a=>/^vmess:\/\//.test(a),parse:a=>{a=a.split("vmess://")[1];let o=Lt.decode(a.replace(/\?.*?$/,""));if(/=\s*vmess/.test(o)){let c=o.split(",").map(d=>d.trim()),u={};for(let d of c)if(d.indexOf("=")!==-1){let[f,b]=d.split("=");u[f.trim()]=b.trim()}let h={name:c[0].split("=")[0].trim(),type:"vmess",server:c[1],port:c[2],cipher:er(c[3],"auto"),uuid:c[4].match(/^"(.*)"$/)[1],tls:u.obfs==="wss",udp:gu(u["udp-relay"]),tfo:gu(u["fast-open"]),"skip-cert-verify":ce(u["tls-verification"])?!u["tls-verification"]:void 0};if(ce(u.obfs))if(u.obfs==="ws"||u.obfs==="wss"){h.network="ws",h["ws-opts"].path=(er(u["obfs-path"])||'"/"').match(/^"(.*)"$/)[1];let d=u["obfs-header"];d&&d.indexOf("Host")!==-1&&(d=d.match(/Host:\s*([a-zA-Z0-9-.]*)/)[1]),zi(d)&&(h["ws-opts"].headers={Host:d})}else throw new Error(`Unsupported obfs: ${u.obfs}`);return h}else{let c={};try{c=JSON.parse(o)}catch{let[A,g,v]=/(^[^?]+?)\/?\?(.*)$/.exec(a);o=Lt.decode(g);for(let $ of v.split("&")){let[k,O]=$.split("="),z=O;z=decodeURIComponent(O),z.indexOf(",")===-1?c[k]=z:c[k]=z.split(",")}let[y,m,D,S,F]=/(^[^:]+?):([^:]+?)@(.*):(\d+)$/.exec(o);c.scy=m,c.id=D,c.port=F,c.add=S}let u=c.add,h=parseInt(gu(c.port),10),d={name:c.ps??c.remarks??c.remark??`VMess ${u}:${h}`,type:"vmess",server:u,port:h,cipher:["auto","aes-128-gcm","chacha20-poly1305","none"].includes(c.scy)?c.scy:"auto",uuid:c.id,alterId:parseInt(gu(c.aid??c.alterId,0),10),tls:["tls",!0,1,"1"].includes(c.tls),"skip-cert-verify":ce(c.verify_cert)?!c.verify_cert:void 0};!d["skip-cert-verify"]&&ce(c.allowInsecure)&&(d["skip-cert-verify"]=/(TRUE)|1/i.test(c.allowInsecure)),d.tls&&(c.sni&&c.sni!==""?d.sni=c.sni:c.peer&&c.peer!==""&&(d.sni=c.peer));let f=!1;if(c.net==="ws"||c.obfs==="websocket"?d.network="ws":["http"].includes(c.net)||["http"].includes(c.obfs)||["http"].includes(c.type)?d.network="http":["grpc","kcp","quic"].includes(c.net)?d.network=c.net:c.net==="httpupgrade"||d.network==="httpupgrade"?(d.network="ws",f=!0):(c.net==="h2"||d.network==="h2")&&(d.network="h2"),d.network){let b=c.host??c.obfsParam;try{let v=JSON.parse(b)?.Host;v&&(b=v)}catch{}let A=c.path;if(["ws"].includes(d.network)&&(A=A||"/"),d.network==="http"&&(b&&(b=b.split(",").map(g=>g.trim()),b=Array.isArray(b)?b[0]:b),A?A=Array.isArray(A)?A[0]:A:A="/"),A||b||["kcp","quic"].includes(d.network))if(["grpc"].includes(d.network))d[`${d.network}-opts`]={"grpc-service-name":er(A),"_grpc-type":er(c.type),"_grpc-authority":er(c.authority)};else if(["kcp","quic"].includes(d.network))d[`${d.network}-opts`]={[`_${d.network}-type`]:er(c.type),[`_${d.network}-host`]:er(er(b)),[`_${d.network}-path`]:er(A)};else{let g={path:er(A),headers:{Host:er(b)}};f&&(g["v2ray-http-upgrade"]=!0,g["v2ray-http-upgrade-fast-open"]=!0),d[`${d.network}-opts`]=g}else delete d.network}return d["client-fingerprint"]=c.fp,d.alpn=c.alpn?c.alpn.split(","):void 0,d}}}}function sm(){return{name:"URI VLESS Parser",test:a=>/^vless:\/\//.test(a),parse:a=>{a=a.split("vless://")[1];let o,c=/^(.*?)@(.*?):(\d+)\/?(\?(.*?))?(?:#(.*?))?$/.exec(a);if(!c){let[D,S,F]=/^(.*?)(\?.*?$)/.exec(a);a=`${Lt.decode(S)}${F}`,c=/^(.*?)@(.*?):(\d+)\/?(\?(.*?))?(?:#(.*?))?$/.exec(a),o=!0}let[u,h,d,f,b,A="",g]=c;o&&(h=h.replace(/^.*?:/g,"")),f=parseInt(`${f}`,10),h=decodeURIComponent(h),g!=null&&(g=decodeURIComponent(g));let v={type:"vless",name:g,server:d,port:f,uuid:h},y={};for(let D of A.split("&"))if(D){let[S,F]=D.split("="),$=F;$=decodeURIComponent(F),y[S]=$}if(v.name=g??y.remarks??y.remark??`VLESS ${d}:${f}`,v.tls=y.security&&y.security!=="none",o&&/TRUE|1/i.test(y.tls)&&(v.tls=!0,y.security=y.security??"reality"),v.sni=y.sni||y.peer,v.flow=y.flow,!v.flow&&o&&y.xtls){let D=[void 0,"xtls-rprx-direct","xtls-rprx-vision"][y.xtls];D&&(v.flow=D)}if(v["client-fingerprint"]=y.fp,v.alpn=y.alpn?y.alpn.split(","):void 0,v["skip-cert-verify"]=/(TRUE)|1/i.test(y.allowInsecure),["reality"].includes(y.security)){let D={};y.pbk&&(D["public-key"]=y.pbk),y.sid&&(D["short-id"]=y.sid),y.spx&&(D["_spider-x"]=y.spx),Object.keys(D).length>0&&(v[`${y.security}-opts`]=D)}let m=!1;if(v.network=y.type,v.network==="tcp"&&y.headerType==="http"?v.network="http":v.network==="httpupgrade"&&(v.network="ws",m=!0),!v.network&&o&&y.obfs&&(v.network=y.obfs,["none"].includes(v.network)&&(v.network="tcp")),["websocket"].includes(v.network)&&(v.network="ws"),v.network&&!["tcp","none"].includes(v.network)){let D={},S=y.host??y.obfsParam;if(S)if(y.obfsParam)try{let F=JSON.parse(S);D.headers=F}catch{D.headers={Host:S}}else D.headers={Host:S};y.serviceName?(D[`${v.network}-service-name`]=y.serviceName,["grpc"].includes(v.network)&&y.authority&&(D["_grpc-authority"]=y.authority)):o&&y.path&&(["ws","http","h2"].includes(v.network)||(D[`${v.network}-service-name`]=y.path,delete y.path)),y.path&&(D.path=y.path),["grpc"].includes(v.network)&&(D["_grpc-type"]=y.mode||"gun"),m&&(D["v2ray-http-upgrade"]=!0,D["v2ray-http-upgrade-fast-open"]=!0),Object.keys(D).length>0&&(v[`${v.network}-opts`]=D),v.network==="kcp"&&(y.seed&&(v.seed=y.seed),v.headerType=y.headerType||"none"),y.mode&&(v._mode=y.mode),y.extra&&(v._extra=y.extra)}return v}}}function K6(){return{name:"URI AnyTLS Parser",test:a=>/^anytls:\/\//.test(a),parse:a=>{let o=sm().parse(a.replace("anytls","vless"));a=a.split(/anytls:\/\//)[1];let[c,u,h,d,f="",b]=/^(.*?)@(.*?)(?::(\d+))?\/?(?:\?(.*?))?(?:#(.*?))?$/.exec(a);u=decodeURIComponent(u),d=parseInt(`${d}`,10),isNaN(d)&&(d=443),u=decodeURIComponent(u),b!=null&&(b=decodeURIComponent(b)),b=b??`AnyTLS ${h}:${d}`;let A={...o,uuid:void 0,type:"anytls",name:b,server:h,port:d,password:u};for(let g of f.split("&"))if(g){let[v,y]=g.split("=");v=v.replace(/_/g,"-"),y=decodeURIComponent(y),["alpn"].includes(v)?A[v]=y?y.split(","):void 0:["insecure"].includes(v)?A["skip-cert-verify"]=/(TRUE)|1/i.test(y):["udp"].includes(v)?A[v]=/(TRUE)|1/i.test(y):Object.keys(A).includes(v)||(A[v]=y)}return["tcp"].includes(A.network)&&!A["reality-opts"]&&(delete A.network,delete A.security),A}}}function z6(){return{name:"URI Hysteria2 Parser",test:a=>/^(hysteria2|hy2):\/\//.test(a),parse:a=>{a=a.split(/(hysteria2|hy2):\/\//)[2];let o,[c,u,h,d,f,b,A,g,v,y,m="",D]=/^(.*?)@(.*?)(:((\d+(-\d+)?)([,;]\d+(-\d+)?)*))?\/?(\?(.*?))?(?:#(.*?))?$/.exec(a);/^\d+$/.test(f)?(f=parseInt(`${f}`,10),isNaN(f)&&(f=443)):f?(o=f,f=wo(o)):f=443,u=decodeURIComponent(u),D!=null&&(D=decodeURIComponent(D)),D=D??`Hysteria2 ${h}:${f}`;let S={type:"hysteria2",name:D,server:h,port:f,ports:o,password:u},F={};for(let O of m.split("&"))if(O){let[z,H]=O.split("="),P=H;P=decodeURIComponent(H),F[z]=P}S.sni=F.sni,!S.sni&&F.peer&&(S.sni=F.peer),F.obfs&&F.obfs!=="none"&&(S.obfs=F.obfs),F.mport&&(S.ports=F.mport),S["obfs-password"]=F["obfs-password"],S["skip-cert-verify"]=/(TRUE)|1/i.test(F.insecure),S.tfo=/(TRUE)|1/i.test(F.fastopen),S["tls-fingerprint"]=F.pinSHA256;let $=F["hop-interval"]||F.hop_interval;/^\d+$/.test($)&&(S["hop-interval"]=parseInt(`${$}`,10));let k=F.keepalive;return/^\d+$/.test(k)&&(S.keepalive=parseInt(`${k}`,10)),S}}}function G6(){return{name:"URI Hysteria Parser",test:a=>/^(hysteria|hy):\/\//.test(a),parse:a=>{a=a.split(/(hysteria|hy):\/\//)[2];let[o,c,u,h,d,f="",b]=/^(.*?)(:(\d+))?\/?(\?(.*?))?(?:#(.*?))?$/.exec(a);h=parseInt(`${h}`,10),isNaN(h)&&(h=443),b!=null&&(b=decodeURIComponent(b)),b=b??`Hysteria ${c}:${h}`;let A={type:"hysteria",name:b,server:c,port:h},g={};for(let v of f.split("&"))if(v){let[y,m]=v.split("=");y=y.replace(/_/,"-"),m=decodeURIComponent(m),["alpn"].includes(y)?A[y]=m?m.split(","):void 0:["insecure"].includes(y)?A["skip-cert-verify"]=/(TRUE)|1/i.test(m):["auth"].includes(y)?A["auth-str"]=m:["mport"].includes(y)?A.ports=m:["obfsParam"].includes(y)?A.obfs=m:["upmbps"].includes(y)?A.up=m:["downmbps"].includes(y)?A.down=m:["obfs"].includes(y)?A._obfs=m||"":["fast-open","peer"].includes(y)?g[y]=m:Object.keys(A).includes(y)||(A[y]=m)}return!A.sni&&g.peer&&(A.sni=g.peer),!A["fast-open"]&&g.fastopen&&(A["fast-open"]=!0),A.protocol||(A.protocol="udp"),A}}}function W6(){return{name:"URI TUIC Parser",test:a=>/^tuic:\/\//.test(a),parse:a=>{a=a.split(/tuic:\/\//)[1];let[o,c,u,h,d="",f]=/^(.*?)@(.*?)(?::(\d+))?\/?(?:\?(.*?))?(?:#(.*?))?$/.exec(a);c=decodeURIComponent(c);let[b,...A]=c.split(":"),g=A.join(":");h=parseInt(`${h}`,10),isNaN(h)&&(h=443),g=decodeURIComponent(g),f!=null&&(f=decodeURIComponent(f)),f=f??`TUIC ${u}:${h}`;let v={type:"tuic",name:f,server:u,port:h,password:g,uuid:b};for(let y of d.split("&"))if(y){let[m,D]=y.split("=");m=m.replace(/_/g,"-"),D=decodeURIComponent(D),["alpn"].includes(m)?v[m]=D?D.split(","):void 0:["allow-insecure","insecure"].includes(m)?v["skip-cert-verify"]=/(TRUE)|1/i.test(D):["fast-open"].includes(m)?v.tfo=!0:["disable-sni","reduce-rtt"].includes(m)?v[m]=/(TRUE)|1/i.test(D):m==="congestion-control"?(v["congestion-controller"]=D,delete v[m]):Object.keys(v).includes(m)||(v[m]=D)}return v}}}function Y6(){return{name:"URI WireGuard Parser",test:a=>/^(wireguard|wg):\/\//.test(a),parse:a=>{a=a.split(/(wireguard|wg):\/\//)[2];let[o,c,u,h,d,f,b,A="",g]=/^((.*?)@)?(.*?)(:(\d+))?\/?(\?(.*?))?(?:#(.*?))?$/.exec(a);f=parseInt(`${f}`,10),isNaN(f)&&(f=51820),u=decodeURIComponent(u),g!=null&&(g=decodeURIComponent(g)),g=g??`WireGuard ${h}:${f}`;let v={type:"wireguard",name:g,server:h,port:f,"private-key":u,udp:!0};for(let y of A.split("&"))if(y){let[m,D]=y.split("=");if(m=m.replace(/_/,"-"),D=decodeURIComponent(D),["reserved"].includes(m)){let S=D.split(",").map(F=>parseInt(F.trim(),10)).filter(F=>Number.isInteger(F));S.length===3&&(v[m]=S)}else if(["address","ip"].includes(m))D.split(",").map(S=>{let F=S.trim().replace(/\/\d+$/,"").replace(/^\[/,"").replace(/\]$/,"");ri(F)?v.ip=F:Dn(F)&&(v.ipv6=F)});else if(["mtu"].includes(m)){let S=parseInt(D.trim(),10);Number.isInteger(S)&&(v[m]=S)}else/publickey/i.test(m)?v["public-key"]=D:/privatekey/i.test(m)?v["private-key"]=D:["udp"].includes(m)?v[m]=/(TRUE)|1/i.test(D):[...Object.keys(v),"flag"].includes(m)||(v[m]=D)}return v}}}function J6(){return{name:"URI Trojan Parser",test:a=>/^trojan:\/\//.test(a),parse:a=>{let o=/^(trojan:\/\/.*?@.*?)(:(\d+))?\/?(\?.*?)?$/.exec(a);o?.[2]||(a=a.replace(o[1],`${o[1]}:443`));let[u,h]=a.split(/#(.+)/,2),f=Rp().parse(u);if(zi(h))try{f.name=decodeURIComponent(h)}catch(b){console.log(b)}return f}}}function X6(){return{name:"Clash Parser",test:a=>{let o;try{o=Tp.default.parse(a)}catch{o=Ep.parse(a)}return!!o?.type},parse:a=>{let o;try{o=Tp.default.parse(a)}catch{o=Ep.parse(a)}if(!["anytls","mieru","juicity","ss","ssr","vmess","socks5","http","snell","trojan","tuic","vless","hysteria","hysteria2","wireguard","ssh","direct"].includes(o.type))throw new Error(`Clash does not support proxy with type: ${o.type}`);return["vmess","vless"].includes(o.type)&&(o.sni=o.servername,delete o.servername),o["server-cert-fingerprint"]&&(o["tls-fingerprint"]=o["server-cert-fingerprint"]),o.fingerprint&&(o["tls-fingerprint"]=o.fingerprint),o["dialer-proxy"]&&(o["underlying-proxy"]=o["dialer-proxy"]),o["benchmark-url"]&&(o["test-url"]=o["benchmark-url"]),o["benchmark-timeout"]&&(o["test-timeout"]=o["benchmark-timeout"]),o}}}function Z6(){return{name:"QX SS Parser",test:a=>/^shadowsocks\s*=/.test(a.split(",")[0].trim())&&a.indexOf("ssr-protocol")===-1,parse:a=>Ss().parse(a)}}function Q6(){return{name:"QX SSR Parser",test:a=>/^shadowsocks\s*=/.test(a.split(",")[0].trim())&&a.indexOf("ssr-protocol")!==-1,parse:a=>Ss().parse(a)}}function e3(){return{name:"QX VMess Parser",test:a=>/^vmess\s*=/.test(a.split(",")[0].trim()),parse:a=>Ss().parse(a)}}function t3(){return{name:"QX VLESS Parser",test:a=>/^vless\s*=/.test(a.split(",")[0].trim()),parse:a=>Ss().parse(a)}}function r3(){return{name:"QX Trojan Parser",test:a=>/^trojan\s*=/.test(a.split(",")[0].trim()),parse:a=>Ss().parse(a)}}function n3(){return{name:"QX HTTP Parser",test:a=>/^http\s*=/.test(a.split(",")[0].trim()),parse:a=>Ss().parse(a)}}function i3(){return{name:"QX Socks5 Parser",test:a=>/^socks5\s*=/.test(a.split(",")[0].trim()),parse:a=>Ss().parse(a)}}function s3(){return{name:"Loon SS Parser",test:a=>a.split(",")[0].split("=")[1].trim().toLowerCase()==="shadowsocks",parse:a=>Ji().parse(a)}}function a3(){return{name:"Loon SSR Parser",test:a=>a.split(",")[0].split("=")[1].trim().toLowerCase()==="shadowsocksr",parse:a=>Ji().parse(a)}}function u3(){return{name:"Loon VMess Parser",test:a=>/^.*=\s*vmess/i.test(a.split(",")[0])&&a.indexOf("username")===-1,parse:a=>Ji().parse(a)}}function o3(){return{name:"Loon Vless Parser",test:a=>/^.*=\s*vless/i.test(a.split(",")[0]),parse:a=>Ji().parse(a)}}function c3(){return{name:"Loon Trojan Parser",test:a=>/^.*=\s*trojan/i.test(a.split(",")[0]),parse:a=>Ji().parse(a)}}function l3(){return{name:"Loon Hysteria2 Parser",test:a=>/^.*=\s*Hysteria2/i.test(a.split(",")[0]),parse:a=>Ji().parse(a)}}function f3(){return{name:"Loon HTTP Parser",test:a=>/^.*=\s*http/i.test(a.split(",")[0]),parse:a=>Ji().parse(a)}}function h3(){return{name:"Loon SOCKS5 Parser",test:a=>/^.*=\s*socks5/i.test(a.split(",")[0]),parse:a=>Ji().parse(a)}}function p3(){return{name:"Loon WireGuard Parser",test:a=>/^.*=\s*wireguard/i.test(a.split(",")[0]),parse:a=>{let o=a.match(/(^.*?)\s*?=\s*?wireguard\s*?,.+?\s*?=\s*?.+?/i)?.[1];a=a.replace(o,"").replace(/^\s*?=\s*?wireguard\s*/i,"");let c=a.match(/,\s*?peers\s*?=\s*?\[\s*?\{\s*?(.+?)\s*?\}\s*?\]/i)?.[1],u=c.match(/(,|^)\s*?endpoint\s*?=\s*?"?(.+?):(\d+)"?\s*?(,|$)/i),h=u?.[2],d=parseInt(u?.[3],10),f=a.match(/(,|^)\s*?mtu\s*?=\s*?"?(\d+?)"?\s*?(,|$)/i)?.[2];f&&(f=parseInt(f,10));let b=a.match(/(,|^)\s*?keepalive\s*?=\s*?"?(\d+?)"?\s*?(,|$)/i)?.[2];b&&(b=parseInt(b,10));let A=c.match(/(,|^)\s*?reserved\s*?=\s*?"?(\[\s*?.+?\s*?\])"?\s*?(,|$)/i)?.[2];A&&(A=JSON.parse(A));let g,v=a.match(/(,|^)\s*?dns\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],y=a.match(/(,|^)\s*?dnsv6\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2];(v||y)&&(g=[],v&&g.push(v),y&&g.push(y));let m=c.match(/(,|^)\s*?allowed-ips\s*?=\s*?"(.+?)"\s*?(,|$)/i)?.[2]?.split(",").map(O=>O.trim()),D=c.match(/(,|^)\s*?preshared-key\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],S=a.match(/(,|^)\s*?interface-ip\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],F=a.match(/(,|^)\s*?interface-ipv6\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],$=c.match(/(,|^)\s*?public-key\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],k={type:"wireguard",name:o,server:h,port:d,ip:S,ipv6:F,"private-key":a.match(/(,|^)\s*?private-key\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],"public-key":$,mtu:f,keepalive:b,reserved:A,"allowed-ips":m,"preshared-key":D,dns:g,udp:!0,peers:[{server:h,port:d,ip:S,ipv6:F,"public-key":$,"pre-shared-key":D,"allowed-ips":m,reserved:A}]};return Array.isArray(k.dns)&&k.dns.length>0&&(k["remote-dns-resolve"]=!0),k}}}function d3(){return{name:"Surge Direct Parser",test:a=>/^.*=\s*direct/.test(a.split(",")[0]),parse:a=>ai().parse(a)}}function g3(){return{name:"Surge SSH Parser",test:a=>/^.*=\s*ssh/.test(a.split(",")[0]),parse:a=>ai().parse(a)}}function v3(){return{name:"Surge SS Parser",test:a=>/^.*=\s*ss/.test(a.split(",")[0]),parse:a=>ai().parse(a)}}function m3(){return{name:"Surge VMess Parser",test:a=>/^.*=\s*vmess/.test(a.split(",")[0])&&a.indexOf("username")!==-1,parse:a=>ai().parse(a)}}function w3(){return{name:"Surge Trojan Parser",test:a=>/^.*=\s*trojan/.test(a.split(",")[0]),parse:a=>ai().parse(a)}}function b3(){return{name:"Surge HTTP Parser",test:a=>/^.*=\s*https?/.test(a.split(",")[0]),parse:a=>ai().parse(a)}}function _3(){return{name:"Surge Socks5 Parser",test:a=>/^.*=\s*socks5(-tls)?/.test(a.split(",")[0]),parse:a=>ai().parse(a)}}function E3(){return{name:"Surge External Parser",test:a=>/^.*=\s*external/.test(a.split(",")[0]),parse:a=>{let o=/^\s*(.*?)\s*?=\s*?external\s*?,\s*(.*?)\s*$/.exec(a),[c,u,h]=o;a=h;let d=/(,|^)\s*?exec\s*?=\s*"(.*?)"\s*?(,|$)/.exec(a)?.[2];d||(d=/(,|^)\s*?exec\s*?=\s*(.*?)\s*?(,|$)/.exec(a)?.[2]);let f=/(,|^)\s*?local-port\s*?=\s*"(.*?)"\s*?(,|$)/.exec(a)?.[2];f||(f=/(,|^)\s*?local-port\s*?=\s*(.*?)\s*?(,|$)/.exec(a)?.[2]);let b=/(,|^)\s*?args\s*?=\s*("(.*?)"|(.*?))(?=\s*?(,|$))/g,A,g=[];for(;(A=b.exec(a))!==null;)A[3]!=null?g.push(A[3]):A[4]!=null&&g.push(A[4]);let v=/(,|^)\s*?addresses\s*?=\s*("(.*?)"|(.*?))(?=\s*?(,|$))/g,y,m=[];for(;(y=v.exec(a))!==null;){let S;y[3]!=null?S=y[3]:y[4]!=null&&(S=y[4]),S!=null&&(S=`${S}`.trim().replace(/^\[/,"").replace(/\]$/,"")),F3(S)&&m.push(S)}return{type:"external",name:u,exec:d,"local-port":f,args:g,addresses:m}}}}function A3(){return{name:"Surge Snell Parser",test:a=>/^.*=\s*snell/.test(a.split(",")[0]),parse:a=>ai().parse(a)}}function y3(){return{name:"Surge Tuic Parser",test:a=>/^.*=\s*tuic(-v5)?/.test(a.split(",")[0]),parse:a=>{let{port_hopping:o,line:c}=im(a),u=ai().parse(c);return u.ports=o,u}}}function S3(){return{name:"Surge WireGuard Parser",test:a=>/^.*=\s*wireguard/.test(a.split(",")[0]),parse:a=>ai().parse(a)}}function D3(){return{name:"Surge Hysteria2 Parser",test:a=>/^.*=\s*hysteria2/.test(a.split(",")[0]),parse:a=>{let{port_hopping:o,line:c}=im(a),u=ai().parse(c);return u.ports=o,u}}}function F3(t){return ri(t)||Dn(t)}var am=[j6(),U6(),M6(),q6(),V6(),sm(),W6(),Y6(),G6(),z6(),J6(),K6(),X6(),d3(),g3(),v3(),m3(),w3(),b3(),A3(),y3(),S3(),D3(),_3(),E3(),s3(),a3(),u3(),o3(),l3(),c3(),f3(),h3(),p3(),Z6(),Q6(),e3(),t3(),r3(),n3(),i3()];var lm=Si(xp());function C3(t){for(let r of Mv)try{if(r.test(t))return $t.info(`Pre-processor [${r.name}] activated`),r.parse(t)}catch(s){$t.error(`Parser [${r.name}] failed
 Reason: ${s}`)}return t}function I3(t){t=C3(t);let r=t.split(`
`),s=[],a;for(let o of r){if(o=o.trim(),o.length===0)continue;let c=!1;if(a){let[u,h]=um(a,o);h||(s.push(cm(u)),c=!0)}if(!c)for(let u of am){let[h,d]=um(u,o);if(!d){s.push(cm(h)),a=u,c=!0,$t.info(`${u.name} is activated`);break}}c||$t.error(`Failed to parse line: ${o}`)}return s.filter(o=>(["vless","vmess"].includes(o.type)&&(pl(o.uuid)||$t.error(`UUID may be invalid: ${o.name} ${o.uuid}`)),!0))}function P3(t,r,s,a={}){let o=Qv[r];if(!o)throw new Error(`Target platform: ${r} is not supported!`);let c=/Surge|SurgeMac|Shadowrocket/i.test(r);if(t=t.filter(u=>u.supported&&u.supported[r]===!1?!1:(["vless","vmess"].includes(u.type)&&(pl(u.uuid)||$t.error(`UUID may be invalid: ${u.name} ${u.uuid}`)),!0)),t=t.map(u=>(u._resolved=u.resolved,zi(u.name)||(u.name=`${u.type} ${u.server}:${u.port}`),u["disable-sni"]&&(c?u.sni="off":["tuic"].includes(u.type)||($t.error(`Target platform ${r} does not support sni off. Proxy's fields (sni, tls-fingerprint and skip-cert-verify) will be modified.`),u.sni="",u["skip-cert-verify"]=!0,delete u["tls-fingerprint"])),u.ports&&(u.ports=String(u.ports),["ClashMeta"].includes(r)||(u.ports=u.ports.replace(/\//g,",")),u.port||(u.port=wo(u.ports))),u)),$t.log(`Producing proxies for target: ${r}`),typeof o.type>"u"||o.type==="SINGLE"){let u=t.map(h=>{try{return o.produce(h,s,a)}catch(d){return $t.error(`Cannot produce proxy: ${JSON.stringify(h,null,2)}
Reason: ${d}`),""}}).filter(h=>h.length>0);return u=s==="internal"?u:u.join(`
`),r.startsWith("Surge")&&t.length>0&&t.every(h=>h.type==="wireguard")&&(u=`#!name=${t[0]?._subName}
#!desc=${t[0]?._desc??""}
#!category=${t[0]?._category??""}
${u}`),u}else if(o.type==="ALL")return o.produce(t,s,a)}var Ro={parse:I3,produce:P3,ipAddress:V1,getRandomPort:wo,isIPv4:ri,isIPv6:Dn,isIP:Op,isValidUUID:pl,Buffer:Pl.Buffer,Base64:Lt,JSON5:lm.default};function um(t,r){if(!B3(t,r))return[null,new Error("Parser mismatch")];try{return[t.parse(r),null]}catch(s){return[null,s]}}function B3(t,r){try{return t.test(r)}catch{return!1}}function om(t){if(typeof t=="string"||typeof t=="number"){if(t=String(t).trim(),t==="")return"/";if(!t.startsWith("/"))return"/"+t}return t}function cm(t){typeof t.cipher=="string"&&(t.cipher=t.cipher.toLowerCase()),typeof t.password=="number"&&(t.password=z1(t.password)),["ss"].includes(t.type)&&t.cipher==="none"&&!t.password&&(t.password=""),t.interface&&(t["interface-name"]=t.interface,delete t.interface),K1(t.port)&&(t.port=parseInt(t.port,10)),t.server&&(t.server=`${t.server}`.trim().replace(/^\[/,"").replace(/\]$/,"")),t.network==="ws"&&(!t["ws-opts"]&&(t["ws-path"]||t["ws-headers"])&&(t["ws-opts"]={},t["ws-path"]&&(t["ws-opts"].path=t["ws-path"]),t["ws-headers"]&&(t["ws-opts"].headers=t["ws-headers"])),delete t["ws-path"],delete t["ws-headers"]);let r=t[`${t.network}-opts`]?.path;if(Array.isArray(r)?t[`${t.network}-opts`].path=r.map(a=>om(a)):r!=null&&(t[`${t.network}-opts`].path=om(r)),t.type==="trojan"&&t.network==="tcp"&&delete t.network,["vless"].includes(t.type)&&(t.network||(t.network="tcp")),["trojan","tuic","hysteria","hysteria2","juicity","anytls"].includes(t.type)&&(t.tls=!0),t.network){let a=t[`${t.network}-opts`]?.headers?.Host,o=t[`${t.network}-opts`]?.headers?.host;t.network==="h2"?!o&&a&&(t[`${t.network}-opts`].headers.host=a,delete t[`${t.network}-opts`].headers.Host):o&&!a&&(t[`${t.network}-opts`].headers.Host=o,delete t[`${t.network}-opts`].headers.host)}if(t.network==="h2"){let a=t["h2-opts"]?.headers?.host,o=t["h2-opts"]?.path;a&&!Array.isArray(a)&&(t["h2-opts"].headers.host=[a]),Array.isArray(o)&&(t["h2-opts"].path=o[0])}if(!t.tls&&["ws","http"].includes(t.network)&&!t[`${t.network}-opts`]?.headers?.Host&&!Op(t.server)&&(t[`${t.network}-opts`]=t[`${t.network}-opts`]||{},t[`${t.network}-opts`].headers=t[`${t.network}-opts`].headers||{},t[`${t.network}-opts`].headers.Host=["vmess","vless"].includes(t.type)&&t.network==="http"?[t.server]:t.server),["vmess","vless"].includes(t.type)&&t.network==="http"){let a=t[`${t.network}-opts`]?.path,o=t[`${t.network}-opts`]?.headers?.Host;o&&!Array.isArray(o)&&(t[`${t.network}-opts`].headers.Host=[o]),a&&!Array.isArray(a)&&(t[`${t.network}-opts`].path=[a])}if(t.tls&&!t.sni&&(Op(t.server)||(t.sni=t.server),!t.sni&&t.network)){let a=t[`${t.network}-opts`]?.headers?.Host;a=Array.isArray(a)?a[0]:a,a&&(t.sni=a)}if(t.ports?t.ports=String(t.ports).replace(/\//g,","):delete t.ports,["hysteria2"].includes(t.type)&&t.obfs&&!["salamander"].includes(t.obfs)&&!t["obfs-password"]&&(t["obfs-password"]=t.obfs,t.obfs="salamander"),["hysteria2"].includes(t.type)&&!t["obfs-password"]&&t.obfs_password&&(t["obfs-password"]=t.obfs_password,delete t.obfs_password),["vless"].includes(t.type)&&(t["reality-opts"]&&Object.keys(t["reality-opts"]).length===0&&delete t["reality-opts"],t["grpc-opts"]&&Object.keys(t["grpc-opts"]).length===0&&delete t["grpc-opts"],!t["reality-opts"]&&!t.flow&&delete t.flow,["http"].includes(t.network)&&(t[`${t.network}-opts`]?.path||(t[`${t.network}-opts`]||(t[`${t.network}-opts`]={}),t[`${t.network}-opts`].path=["/"]))),typeof t.name!="string")if(/^\d+$/.test(t.name))t.name=`${t.name}`;else try{t.name?.data?t.name=Pl.Buffer.from(t.name.data).toString("utf8"):t.name=Pl.Buffer.from(t.name).toString("utf8")}catch(a){$t.error(`proxy.name decode failed
Reason: ${a}`),t.name=`${t.type} ${t.server}:${t.port}`}["ws","http","h2"].includes(t.network)&&(["ws","h2"].includes(t.network)&&!t[`${t.network}-opts`]?.path?(t[`${t.network}-opts`]=t[`${t.network}-opts`]||{},t[`${t.network}-opts`].path="/"):t.network==="http"&&(!Array.isArray(t[`${t.network}-opts`]?.path)||t[`${t.network}-opts`]?.path.every(a=>!a))&&(t[`${t.network}-opts`]=t[`${t.network}-opts`]||{},t[`${t.network}-opts`].path=["/"])),["","off"].includes(t.sni)&&(t["disable-sni"]=!0);let s=t.ca_str;t["ca-str"]?s=t["ca-str"]:s&&(delete t.ca_str,t["ca-str"]=s);try{$t.env.isNode&&!s&&t._ca&&(s=$t.node.fs.readFileSync(t._ca,{encoding:"utf8"}))}catch(a){$t.error(`Read ca file failed
Reason: ${a}`)}return!t["tls-fingerprint"]&&s&&(t["tls-fingerprint"]=$1.generateFingerprint(s)),["ss"].includes(t.type)&&ce(t,"shadow-tls-password")&&(t.plugin="shadow-tls",t["plugin-opts"]={host:t["shadow-tls-sni"],password:t["shadow-tls-password"],version:t["shadow-tls-version"]},delete t["shadow-tls-sni"],delete t["shadow-tls-password"],delete t["shadow-tls-version"]),t}function Op(t){return ri(t)||Dn(t)}async function fm(t,r){let s=await fetch(t,{method:"GET",headers:{"User-Agent":r,Accept:"text/plain,application/yaml,application/json,*/*"}});if(!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);let a=Object.fromEntries(s.headers.entries()),o=R3(s.headers);o&&(a["content-disposition"]=o);let c=await s.text();return{status:s.status,headers:a,data:Np(c)}}function R3(t){let r=t.get("content-disposition");if(!r)return null;let s=r.match(/filename\*?=["']?(?:UTF-8'')?([^;"']+)["']?/i)||r.match(/filename=["']?([^;"']+)["']?/i);if(!s)return null;let a=s[1].trim();if(!/[^\x00-\x7F]/.test(a))return r;let c="download.yaml",u=encodeURIComponent(a);return`attachment; filename="${c}"; filename*=UTF-8''${u}`}function Np(t){try{return Pa(t,{maxAliasCount:-1,merge:!0})}catch{return t}}async function Bl(t,r){if(!t||t.length===0)throw new Error("\u8F93\u5165\u8282\u70B9\u6570\u7EC4\u4E0D\u80FD\u4E3A\u7A7A");let s={data:{},headers:[]},a=await Promise.all(t.map(o=>$3(o,r)));return k3(s,a),s}async function $3(t,r){let s=null,a=[],o={};if(/^https?:\/\//i.test(t)){let u=await fm(t,"clash.mate");o=u?.headers??{},s=u?.data??u}s.proxies?s=Ro.produce(s.proxies,r):(Eh(s)?a=Ro.parse(s):a=s.split(`
`).map(u=>Ro.parse(u)),s=Ro.produce(a,r));try{s=Np(s),typeof s=="string"&&(s=JSON.parse(s))}catch{s=s}return{data:s,headers:o}}function k3(t,r){let s=[],a=[];if(r.forEach(({data:o,headers:c})=>{Eh(o)&&s.push(o);for(let u of Object.keys(o))if(Array.isArray(o[u])){t.data[u]=t.data[u]||[];for(let h of o[u]){if(h&&typeof h=="object"&&"name"in h){let d=h.name,f=d,b=1;for(;t.data[u].some(A=>A.name===f);)f=`${d}_${b++}`;h.name=f}t.data[u].push(h)}}else t.data[u]=o[u];c&&Object.keys(c).length&&a.push(c)}),a.length>0){let o=Math.floor(Math.random()*a.length);t.headers=a[o]}if(s.length>0){let o="";for(let c of s){let u=A0(c);o+=u+`
`}t.data=E0(o)}}(async()=>{let t=await Bl(["https://cdn.jsdmirror.com/gh/Kwisma/MarketNest@main/config.yaml","https://cdn.jsdmirror.com/gh/Kwisma/MarketNest@main/config.yaml"],"mihomo");$t.info("data:",JSON.stringify(t.data,null,2))})();var bI={async fetch(t){try{let r=new URL(t.url),s=r.searchParams.get("target"),a=r.searchParams.get("url"),o=a?a.split(/[,|]/):[];if(/meta|clash.meta|clash|clashverge|mihomo/i.test(s)&&(s="mihomo"),/singbox|sing-box|sfa/i.test(s)&&(s="singbox"),!s||o.length===0)return x3();let c=await Bl(o,s),u=c.data;return typeof u=="object"&&(u=JSON.stringify(u)),new Response(u,{status:200,headers:c.headers})}catch(r){return new Response(`Error: ${r.message}`,{status:500})}}};function x3(){return new Response(JSON.stringify({version:"SubStore v2.20.13",message:"\u8FD9\u662F\u4E00\u4E2A\u57FA\u4E8E cloudflare pagers \u7684 sub-store \u8282\u70B9\u8F6C\u6362\u5DE5\u5177\uFF0C\u4EC5\u8F6C\u6362\u8282\u70B9\u7528",usage:{target:"\u8F93\u51FA\u7C7B\u578B\uFF1A{singbox|mihomo|v2ray|base64|qx|QX|QuantumultX|surge|Surge|SurgeMac|Loon|Clash|meta|clashmeta|clash.meta|Clash.Meta|ClashMeta|Mihomo|uri|URI|json|JSON|stash|Stash|shadowrocket|Shadowrocket|ShadowRocket|surfboard|Surfboard|egern|Egern}",url:"\u8F93\u5165\u7F16\u7801\u540E\u7684\u8BA2\u9605\u94FE\u63A5\uFF0C\u591A\u4E2A\u8BA2\u9605\u53EF\u7528\u82F1\u6587\u9017\u53F7(,)\u5206\u9694",example:"/?target=v2ray&url=UrlEncode(\u7F16\u7801\u540E\u7684\u8BA2\u9605)",examples:["/?target=v2ray&url=https%3A%2F%2Fexample.com%2Fsubscription","/?target=clash&url=https%3A%2F%2Fexample.com%2Fsub1,https%3A%2F%2Fexample.com%2Fsub1"]},notes:["\u6240\u6709\u8BA2\u9605\u94FE\u63A5\u5FC5\u987B\u8FDB\u884CURL\u7F16\u7801\u5904\u7406","\u591A\u4E2A\u8BA2\u9605\u94FE\u63A5\u4F7F\u7528\u82F1\u6587\u9017\u53F7\u5206\u9694\uFF0C\u4E0D\u8981\u6DFB\u52A0\u7A7A\u683C"]},null,4),{status:200,headers:{"Content-Type":"application/json"}})}export{bI as default};
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

jsrsasign/lib/jsrsasign.js:
  (*! CryptoJS v3.1.2 core-fix.js
   * code.google.com/p/crypto-js
   * (c) 2009-2013 by Jeff Mott. All rights reserved.
   * code.google.com/p/crypto-js/wiki/License
   * THIS IS FIX of 'core.js' to fix Hmac issue.
   * https://code.google.com/p/crypto-js/issues/detail?id=84
   * https://crypto-js.googlecode.com/svn-history/r667/branches/3.x/src/core.js
   *)
  (*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
   *)
  (*! (c) Tom Wu, Kenji Urushima | http://www-cs-students.stanford.edu/~tjw/jsbn/
   *)
  (*! (c) Stefan Thomas | https://github.com/bitcoinjs/bitcoinjs-lib
   *)
  (*! Mike Samuel (c) 2009 | code.google.com/p/json-sans-eval
   *)

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
